<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:37:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22SLING%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="600" end="800" total="4707"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[SLING-10534] NullPointerException on stopping of bundles</title>
                <link>https://issues.apache.org/jira/browse/SLING-10534</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a bundle is stopping, a race condition might occur for example if a service user for that bundle is tried to get a resource resolver:&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrProviderStateFactory.createProviderState(JcrProviderStateFactory.java:100) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.jcr.resource:3.0.22&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.authenticate(JcrResourceProvider.java:303) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.jcr.resource:3.0.22&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13385234">SLING-10534</key>
            <summary>NullPointerException on stopping of bundles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jun 2021 17:41:25 +0000</created>
                <updated>Fri, 12 Nov 2021 11:06:27 +0000</updated>
                            <resolved>Tue, 22 Jun 2021 17:44:39 +0000</resolved>
                                    <version>JCR Resource 3.0.22</version>
                                    <fixVersion>JCR Resource 3.1.0</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17367560" author="cziegeler" created="Tue, 22 Jun 2021 17:44:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-resource/commit/3e22411765bec909b005fa21155d107347e47ed7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-resource/commit/3e22411765bec909b005fa21155d107347e47ed7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s6yw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10533] The @connection directive cannot be used with interfaces</title>
                <link>https://issues.apache.org/jira/browse/SLING-10533</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;&amp;#64;connection&lt;/tt&gt; directive cannot currently use interfaces in its &lt;tt&gt;for&lt;/tt&gt; argument, since the current implementation expect the type to be an &lt;tt&gt;ObjectTypeDefinition&lt;/tt&gt;. In practice, this can be just a &lt;tt&gt;TypeDefinition&lt;/tt&gt;, since only its name is required to generate the Relay types.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13385211">SLING-10533</key>
            <summary>The @connection directive cannot be used with interfaces</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jun 2021 16:19:06 +0000</created>
                <updated>Mon, 12 Jul 2021 15:37:35 +0000</updated>
                            <resolved>Tue, 22 Jun 2021 18:30:18 +0000</resolved>
                                    <version>GraphQL Core 0.0.10</version>
                                    <fixVersion>GraphQL Core 0.0.12</fixVersion>
                                    <component>GraphQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17367599" author="radu.cotescu" created="Tue, 22 Jun 2021 18:30:18 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-graphql-core/commit/078bfb4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 078bfb4&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s6ts:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10530] Validation mode is not respected for internal configurations</title>
                <link>https://issues.apache.org/jira/browse/SLING-10530</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When internal configurations are listed just by name, then the validation mode is not respected&lt;/p&gt;</description>
                <environment></environment>
        <key id="13385195">SLING-10530</key>
            <summary>Validation mode is not respected for internal configurations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jun 2021 15:20:38 +0000</created>
                <updated>Tue, 29 Jun 2021 08:18:09 +0000</updated>
                            <resolved>Tue, 22 Jun 2021 15:47:34 +0000</resolved>
                                    <version>Feature Model API Regions Extension 1.3.0</version>
                                    <fixVersion>Feature Model API Regions Extension 1.3.2</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17367487" author="cziegeler" created="Tue, 22 Jun 2021 15:47:34 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/385ced4c30d174979fb16dde0c33a3db5f7dc577&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/385ced4c30d174979fb16dde0c33a3db5f7dc577&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s6q8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10529] Remove MDC constructs</title>
                <link>https://issues.apache.org/jira/browse/SLING-10529</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;BookKeeper sets up MDC which are not used. We should remove them and rely on consistent logging instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13385184">SLING-10529</key>
            <summary>Remove MDC constructs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jun 2021 13:34:50 +0000</created>
                <updated>Fri, 16 Jul 2021 07:39:18 +0000</updated>
                            <resolved>Tue, 22 Jun 2021 19:49:02 +0000</resolved>
                                                    <fixVersion>Content Distribution Journal Core 0.1.18</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17367642" author="marett" created="Tue, 22 Jun 2021 19:49:02 +0000"  >&lt;p&gt;Merged PR #74&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s6ns:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10528] Reject large packages</title>
                <link>https://issues.apache.org/jira/browse/SLING-10528</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Journal distribution serialise content packages in binary less mode only. When doing &quot;deep&quot; distribution, the package can still become so large that the importing side can&apos;t ingest it. When this happens, Apache Oak does a session save that never seem to return and can easily take 8 hours to terminate.&lt;/p&gt;

&lt;p&gt;I suggest to detect those large packages, based on the package size and simply reject packages above a  configurable limit size. The limit should take in consideration the mean import throughput for a single Oak session on cloud segment tar and should keep the save operation below, say 15 minutes.&lt;/p&gt;

&lt;p&gt;With this approach, we can ensure that Oak always return when importing a package and we can fail fast for larger packages. Journal distribution will also handle the errors nicely and allow to remove the blocking item from the usual set of tools. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13385183">SLING-10528</key>
            <summary>Reject large packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jun 2021 13:27:22 +0000</created>
                <updated>Fri, 16 Jul 2021 07:39:19 +0000</updated>
                            <resolved>Wed, 23 Jun 2021 10:43:01 +0000</resolved>
                                                    <fixVersion>Content Distribution Journal Core 0.1.18</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17367343" author="kwin" created="Tue, 22 Jun 2021 13:41:03 +0000"  >&lt;p&gt;Usually the &lt;tt&gt;session.save()&lt;/tt&gt; takes long when the transient session space is very big. To prevent that from happening you can leverage &lt;a href=&quot;https://jackrabbit.apache.org/filevault/apidocs/org/apache/jackrabbit/vault/fs/io/ImportOptions.html#setAutoSaveThreshold(int&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/filevault/apidocs/org/apache/jackrabbit/vault/fs/io/ImportOptions.html#setAutoSaveThreshold(int&lt;/a&gt;) which allows to trigger intermediate saves after a certain number of nodes has been imported. The only drawback is that rollback is not that easy in that case.&lt;/p&gt;</comment>
                            <comment id="17367352" author="marett" created="Tue, 22 Jun 2021 13:53:47 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;! Indeed, we could leverage auto save threshold but as you pointed out we&apos;d loose atomic commits. In addition we have seen use cases where the threshold was not enforced due to missing dependencies. This latter issue may be fixed eventually.&lt;/p&gt;</comment>
                            <comment id="17367421" author="chris@die-schneider.net" created="Tue, 22 Jun 2021 14:57:01 +0000"  >&lt;p&gt;Make sense to reject such packages. Ideally we already reject to create such packages.&#160;&lt;/p&gt;

&lt;p&gt;So question is mainly if we can simple put a useful limit into the code or if we need a configuration.&lt;/p&gt;</comment>
                            <comment id="17367442" author="marett" created="Tue, 22 Jun 2021 15:11:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;if we can simple put a useful limit into the code or if we need a configuration.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We can hardcode the threshold and add the configuration later. The threshold is not expected to be configured that much because we are serialising in binary-less mode. It&apos;d have been different with full binaries.&lt;/p&gt;</comment>
                            <comment id="17367661" author="marett" created="Tue, 22 Jun 2021 20:25:30 +0000"  >&lt;p&gt;Opened &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-journal/pull/75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR#75&lt;/a&gt; that limits packages to 5MB. In my test environments, it takes around 1 minute to import 5MB binary-less package worth of assets. &lt;/p&gt;

&lt;p&gt;Packages larger than 5MB will fail upon import and will be handled via the standard procedures, either blocking the queue or moving it in a quarantine queue.&lt;/p&gt;</comment>
                            <comment id="17367864" author="chris@die-schneider.net" created="Wed, 23 Jun 2021 04:59:32 +0000"  >&lt;p&gt;How about rejecting the package on creation instead. This will give immediate feedback to the user that it does not work and we do not need to block.&lt;/p&gt;</comment>
                            <comment id="17367993" author="marett" created="Wed, 23 Jun 2021 09:37:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cschneider&quot; class=&quot;user-hover&quot; rel=&quot;cschneider&quot;&gt;cschneider&lt;/a&gt; good point. I thought of handling the case in the subscriber as it would also catch packages already produced. Given that the journal removes messages after 7 days, we can realistically ignore that case.&lt;/p&gt;</comment>
                            <comment id="17367994" author="marett" created="Wed, 23 Jun 2021 09:39:26 +0000"  >&lt;p&gt;Updated the PR with package length assertions on the distribution publisher side.&lt;/p&gt;</comment>
                            <comment id="17368000" author="marett" created="Wed, 23 Jun 2021 09:42:27 +0000"  >&lt;p&gt;The mechanism of rejecting packages by size supersedes &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10112&quot; title=&quot;Distribution Queue can not be reliably cleared due to race condition processing delete messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10112&quot;&gt;&lt;del&gt;SLING-10112&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="17368040" author="marett" created="Wed, 23 Jun 2021 10:43:01 +0000"  >&lt;p&gt;Squashed and merged PR #75&lt;/p&gt;</comment>
                            <comment id="17368083" author="chris@die-schneider.net" created="Wed, 23 Jun 2021 12:09:34 +0000"  >&lt;p&gt;Looks great .. thx.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13389812">SLING-10617</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="13355968">SLING-10112</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s6nk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10527] Log imported instead of importing package</title>
                <link>https://issues.apache.org/jira/browse/SLING-10527</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the package import is logged at INFO level before processing the package&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Importing distribution &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; {} at offset={}&quot;&lt;/span&gt;, pkgMsg, offset);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This makes it difficult to figure out if there was an error with the import because one has to seek further logs to see if the package import failed or (worst) no log if the package was imported successfully. We should ensure that a single log statement is logged upon import, either the import succeeded or failed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13385156">SLING-10527</key>
            <summary>Log imported instead of importing package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jun 2021 12:27:09 +0000</created>
                <updated>Fri, 16 Jul 2021 07:39:23 +0000</updated>
                            <resolved>Tue, 22 Jun 2021 19:41:49 +0000</resolved>
                                                    <fixVersion>Content Distribution Journal Core 0.1.18</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17367635" author="marett" created="Tue, 22 Jun 2021 19:41:42 +0000"  >&lt;p&gt;Merged PR #73&lt;/p&gt;</comment>
                            <comment id="17368085" author="chris@die-schneider.net" created="Wed, 23 Jun 2021 12:17:17 +0000"  >&lt;p&gt;It makes a lot of sense to log when the package was imported. It is as well important though to also log when we start to import a package.&lt;br/&gt;
From that information I was able to see which package was stuck for a customer and which offset in the topic the package was at.&lt;/p&gt;

&lt;p&gt;What do you think about also logging the &quot;Importing.. &quot; message at info level?&lt;/p&gt;</comment>
                            <comment id="17370495" author="marett" created="Mon, 28 Jun 2021 08:50:00 +0000"  >&lt;p&gt;I think that we should avoid to log importing to limit the volume of logs we produce to the minimum. The information you relied on should be available in the logs produced on author. You are correct that currently we don&apos;t log the offset, we could and I have filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10564&quot; title=&quot;Log package offset in the Distribution Publisher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10564&quot;&gt;&lt;del&gt;SLING-10564&lt;/del&gt;&lt;/a&gt; to track that work. &lt;/p&gt;</comment>
                            <comment id="17370659" author="chris@die-schneider.net" created="Mon, 28 Jun 2021 15:27:33 +0000"  >&lt;p&gt;On distribution publisher side we can log the offset of the package when we read it back into the queue. This is not the information I am missing though.&lt;/p&gt;

&lt;p&gt;What I would like to know is when the distribution receiver is starting to process the package (including offset). This can not be produced on distribution publisher side.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13386219">SLING-10564</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s6hk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10513] Merging artifact extensions will not preserve the feature origin of the first feature</title>
                <link>https://issues.apache.org/jira/browse/SLING-10513</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When merging two features, the default merge for the artifact extensions (like e.g. the content-packages extension) will not preserve the origin of the first feature because it will just take the extension as is. Only the second feature will get the feature origin when it is merged into the first one. &lt;/p&gt;

&lt;p&gt;We should fix this by making sure the feature origin is written even for the first feature (the best way is probably to just merge the first feature with an empty extension just like the second one will be merged).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13385011">SLING-10513</key>
            <summary>Merging artifact extensions will not preserve the feature origin of the first feature</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Jun 2021 20:51:06 +0000</created>
                <updated>Tue, 29 Jun 2021 08:17:05 +0000</updated>
                            <resolved>Tue, 22 Jun 2021 12:09:54 +0000</resolved>
                                    <version>Feature Model 1.2.22</version>
                                    <fixVersion>Feature Model 1.2.24</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17367266" author="karlpauls" created="Tue, 22 Jun 2021 12:09:54 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/27&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/27&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s5lc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10483] Incorrect mapping is returned when a resourceResolver.map is called with all its aliases</title>
                <link>https://issues.apache.org/jira/browse/SLING-10483</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I think this might be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10432&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-10432&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When you have a path in which several nodes have some alias, resourceResolver.map(path) will return the wrong result in some cases.&lt;/p&gt;

&lt;p&gt;before&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10432&quot; title=&quot;Regression: incorrect mapping result for aliased pages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10432&quot;&gt;&lt;del&gt;SLING-10432&lt;/del&gt;&lt;/a&gt;&#160;was fixed this happen more often, now the problem is reduced, but persist.&lt;/p&gt;

&lt;p&gt;eg.&lt;/p&gt;

&lt;p&gt;I have a path&#160;&lt;em&gt;/content/uw/ecrm/germany/www/de/home/laundry&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;of those &lt;em&gt;de&lt;/em&gt;, &lt;em&gt;home&lt;/em&gt; and &lt;em&gt;laundry&lt;/em&gt; have aliases (dealias,homealias &amp;amp; laundryalias, respectively).&lt;/p&gt;

&lt;p&gt;when calling :&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;resourceResolver.map(&quot;/content/uw/ecrm/germany/www/&lt;b&gt;dealias/homealias/laundryalias&lt;/b&gt;&quot;)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I get&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;/content/uw/ecrm/germany/www/&lt;b&gt;de&lt;/b&gt;/homealias/laundryalias&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note &lt;b&gt;de&lt;/b&gt; instead of &lt;b&gt;dealias.&lt;/b&gt;&#160;&lt;/p&gt;

&lt;p&gt;It only happens when all map receives only aliases, then the first segment with alias is not used. i.e. if I remove the alias from &lt;b&gt;de&lt;/b&gt;, &lt;b&gt;homealias&lt;/b&gt; would then not be used&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;calling rr.map() with just some of the paths using aliases, it seems to work fine now&lt;/p&gt;</description>
                <environment></environment>
        <key id="13383211">SLING-10483</key>
            <summary>Incorrect mapping is returned when a resourceResolver.map is called with all its aliases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="santiagozky">Santiago Garc&#237;a Pimentel</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jun 2021 14:28:49 +0000</created>
                <updated>Sat, 24 Jul 2021 14:32:06 +0000</updated>
                            <resolved>Tue, 20 Jul 2021 11:26:01 +0000</resolved>
                                    <version>Resource Resolver 1.7.8</version>
                                    <fixVersion>Resource Resolver 1.7.10</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                <comments>
                            <comment id="17360966" author="santiagozky" created="Thu, 10 Jun 2021 14:29:30 +0000"  >&lt;p&gt;I used critical since that is also what&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10432&quot; title=&quot;Regression: incorrect mapping result for aliased pages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10432&quot;&gt;&lt;del&gt;SLING-10432&lt;/del&gt;&lt;/a&gt; has. but feel free to reduce it if you consider it less critical&lt;/p&gt;</comment>
                            <comment id="17361030" author="rombert" created="Thu, 10 Jun 2021 15:27:50 +0000"  >&lt;p&gt;Thanks for the report &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=santiagozky&quot; class=&quot;user-hover&quot; rel=&quot;santiagozky&quot;&gt;santiagozky&lt;/a&gt;. As always, PRs welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I think at least a test demonstrating the problem would be very good - you should be able to easily create a new one in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/master/src/test/java/org/apache/sling/resourceresolver/impl/mapping/ResourceMapperImplTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/master/src/test/java/org/apache/sling/resourceresolver/impl/mapping/ResourceMapperImplTest.java&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;And it would be interesting to know when the old behaviour appeared last so we can trace down the change.&lt;/p&gt;</comment>
                            <comment id="17361515" author="santiagozky" created="Fri, 11 Jun 2021 07:52:40 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;. I was checking into it, but decided to report it before hand since it seems important.&lt;/p&gt;</comment>
                            <comment id="17361792" author="rombert" created="Fri, 11 Jun 2021 13:45:20 +0000"  >&lt;p&gt;Sounds good to me!&lt;/p&gt;</comment>
                            <comment id="17369377" author="sagarmiglani" created="Fri, 25 Jun 2021 10:24:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=santiagozky&quot; class=&quot;user-hover&quot; rel=&quot;santiagozky&quot;&gt;santiagozky&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Raised a PR for potential fix: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/48&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, Could you please have a look?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ruhs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10480] Password property in UserCredentialsDistributionTransportSecretProvider is visible as clear text in felix web console</title>
                <link>https://issues.apache.org/jira/browse/SLING-10480</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Password property in UserCredentialsDistributionTransportSecretProvider is visible as clear text in felix web console.&lt;/p&gt;

&lt;p&gt;It should be annotated correctly to be treated as a password in web console.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13383169">SLING-10480</key>
            <summary>Password property in UserCredentialsDistributionTransportSecretProvider is visible as clear text in felix web console</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="sagarmiglani">Sagar Miglani</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jun 2021 11:42:45 +0000</created>
                <updated>Tue, 6 Jul 2021 16:05:44 +0000</updated>
                            <resolved>Thu, 10 Jun 2021 15:26:15 +0000</resolved>
                                    <version>Content Distribution Core 0.4.0</version>
                                    <fixVersion>Content Distribution Core 0.4.6</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17360813" author="sagarmiglani" created="Thu, 10 Jun 2021 11:43:21 +0000"  >&lt;p&gt;I&apos;m working on it&lt;/p&gt;</comment>
                            <comment id="17360845" author="sagarmiglani" created="Thu, 10 Jun 2021 12:25:52 +0000"  >&lt;p&gt;Created the PR for the same: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/52&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17361028" author="cziegeler" created="Thu, 10 Jun 2021 15:26:15 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarmiglani&quot; class=&quot;user-hover&quot; rel=&quot;sagarmiglani&quot;&gt;sagarmiglani&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ru8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10479] MockServiceRegistration.unregister should throw IllegalStateException if registration is already closed</title>
                <link>https://issues.apache.org/jira/browse/SLING-10479</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I tested some code that threw&#160;IllegalStateException when a service registration was unregistered twice.&#160;&lt;/p&gt;

&lt;p&gt;To test the behaviour automatically I created a unit test to reproduce the behaviour.&#160;&lt;/p&gt;

&lt;p&gt;Unfortunately it seems that when using OsgiContext the&#160;MockServiceRegistration I get when registering a service does not show the same behaviour as a real object.&lt;/p&gt;

&lt;p&gt;So I propose we also throw a&#160;IllegalStateException when unregister is called twice. I can provide a test case and fix for this.&lt;/p&gt;

&lt;p&gt;There also might be other cases like registration failed when we also would like to throw but I am not sure ho to implement this.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13383159">SLING-10479</key>
            <summary>MockServiceRegistration.unregister should throw IllegalStateException if registration is already closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cschneider">Christian Schneider</assignee>
                                    <reporter username="cschneider">Christian Schneider</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jun 2021 10:49:08 +0000</created>
                <updated>Thu, 2 Sep 2021 20:09:13 +0000</updated>
                            <resolved>Tue, 15 Jun 2021 10:31:32 +0000</resolved>
                                    <version>Testing OSGi Mock 3.1.2</version>
                                    <fixVersion>Testing OSGi Mock 3.1.4</fixVersion>
                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17360744" author="sseifert@pro-vision.de" created="Thu, 10 Jun 2021 10:57:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;I can provide a test case and fix for this.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;please do! happy to get improvements here&lt;/p&gt;</comment>
                            <comment id="17360756" author="kwin" created="Thu, 10 Jun 2021 11:19:15 +0000"  >&lt;p&gt;Please also consider &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6429&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FELIX-6429&lt;/a&gt;, as it seems it is not clear yet, whether Felix or OSGi Mock behave spec-compliant.&lt;/p&gt;</comment>
                            <comment id="17362966" author="chris@die-schneider.net" created="Mon, 14 Jun 2021 13:48:00 +0000"  >&lt;p&gt;I checked about ungetService and I agree with J&#252;rgen, that there should be no IllegalArgumentException if the service was already unregistered.&lt;/p&gt;</comment>
                            <comment id="17363013" author="chris@die-schneider.net" created="Mon, 14 Jun 2021 14:43:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert&quot; class=&quot;user-hover&quot; rel=&quot;sseifert&quot;&gt;sseifert&lt;/a&gt;&#160;PR is done:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17363023" author="kwin" created="Mon, 14 Jun 2021 15:11:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cschneider&quot; class=&quot;user-hover&quot; rel=&quot;cschneider&quot;&gt;cschneider&lt;/a&gt; I am a bit confused, you provide a PR for Sling OSGi Mocks, although you agree that it behaves correctly (&quot;there should be no IllegalArgumentException if the service was already unregistered&quot;)? Isn&apos;t this rather something that Felix would need to fix?&lt;/p&gt;</comment>
                            <comment id="17363063" author="chris@die-schneider.net" created="Mon, 14 Jun 2021 16:38:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&#160;we are having two different issues here.&lt;br/&gt;
 1. ServiceRegistration.unregister should throw IllegalStateException when service is not registered&lt;br/&gt;
 2. ungetService should not throw IllegalArgumentException when service is already unregistered&lt;/p&gt;</comment>
                            <comment id="17363078" author="kwin" created="Mon, 14 Jun 2021 17:02:46 +0000"  >&lt;p&gt;Thanks for clarifying. Can you adjust the Jira issue title to reflect the issue we are trying to fix here?&lt;/p&gt;</comment>
                            <comment id="17363140" author="chris@die-schneider.net" created="Mon, 14 Jun 2021 18:34:34 +0000"  >&lt;p&gt;Changed it.&lt;/p&gt;</comment>
                            <comment id="17363191" author="sseifert@pro-vision.de" created="Mon, 14 Jun 2021 20:22:41 +0000"  >&lt;p&gt;lgtm&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13397656">SLING-10757</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ru68:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10478] SlingServletResolver#handleError should not attempt to flush/close an already closed response writer</title>
                <link>https://issues.apache.org/jira/browse/SLING-10478</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In&#160;SlingServletResolver#handleError if the errorHandler servlet has already closed the response writer, then it should not attempt to flush/close it again.&#160; &#160;&lt;/p&gt;

&lt;p&gt;The attempt to flush/close the already closed writer after the errorHandler servlet is invoked can result in a&#160;WriterAlreadyClosedException being thrown which can fill up the logs with noise.&lt;/p&gt;

&lt;p&gt;For example, if a custom error handler servlet is generating a JSON error response using a JsonGenerator that writes to the response writer, then closing the JsonGenerator object would also close the response writer.&lt;/p&gt;

&lt;p&gt;&#160;The logs have exceptions like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Error handler failed: org.apache.sling.engine.impl.SlingHttpServletResponseImpl$WriterAlreadyClosedException
    at org.apache.sling.servlets.resolver.internal.SlingServletResolver.handleError(SlingServletResolver.java:655) [org.apache.sling.servlets.resolver:2.7.14]
    at org.apache.sling.servlets.resolver.internal.SlingServletResolver.handleError(SlingServletResolver.java:328) [org.apache.sling.servlets.resolver:2.7.14]
    at org.apache.sling.engine.impl.DefaultErrorHandler.handleError(DefaultErrorHandler.java:97) [org.apache.sling.engine:2.7.6]
...&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Expected:&lt;/p&gt;

&lt;p&gt;Track whether the response writer is closed and skip the flush/close calls if it is already closed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13383048">SLING-10478</key>
            <summary>SlingServletResolver#handleError should not attempt to flush/close an already closed response writer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jun 2021 21:21:17 +0000</created>
                <updated>Thu, 22 Jul 2021 16:51:56 +0000</updated>
                            <resolved>Mon, 14 Jun 2021 18:59:03 +0000</resolved>
                                                    <fixVersion>Servlets Resolver 2.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17360584" author="joerghoh" created="Thu, 10 Jun 2021 06:20:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt; oh, this one is nagging me for months ... thanks for spotting and fixing it. &lt;/p&gt;</comment>
                            <comment id="17363153" author="enorman" created="Mon, 14 Jun 2021 18:59:03 +0000"  >&lt;p&gt;Merged PR at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/commit/7c0a1fe63de1a41559db35b4153635993038550b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;7c0a1fe&lt;/tt&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17385654" author="enorman" created="Thu, 22 Jul 2021 16:51:56 +0000"  >&lt;p&gt;Closing with the 2.8.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rthk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10476] Aliases in MapEntries are removed in delete event of jcr:content present in the parent directory</title>
                <link>https://issues.apache.org/jira/browse/SLING-10476</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a &lt;tt&gt;jcr:content&lt;/tt&gt; node is deleted, it removes all the aliases present below that path&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;Let&apos;s say we have&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
    /
        - content
    	    - A
    	        - jcr:content
    	        - B
    	            - de_DE - has sling:alias de
    		    - en_GB - has sling:alias en
    	        - C
    		    - it_CH - has sling:alias it
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If /&lt;tt&gt;content/A/jcr:content&lt;/tt&gt; node is removed, It deletes all the aliases (in-memory in the MapEntries) which start with &lt;tt&gt;/content/A/&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;See: &lt;tt&gt;sling-resourceresolver:MapEntries.java&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/org.apache.sling.resourceresolver-1.7.0/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java#L330&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/org.apache.sling.resourceresolver-1.7.0/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java#L330&lt;/a&gt;)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382920">SLING-10476</key>
            <summary>Aliases in MapEntries are removed in delete event of jcr:content present in the parent directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="sagarmiglani">Sagar Miglani</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jun 2021 10:32:50 +0000</created>
                <updated>Sat, 24 Jul 2021 14:32:11 +0000</updated>
                            <resolved>Fri, 25 Jun 2021 13:21:59 +0000</resolved>
                                    <version>Resource Resolver 1.7.0</version>
                                    <fixVersion>Resource Resolver 1.7.10</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17359941" author="rombert" created="Wed, 9 Jun 2021 11:00:38 +0000"  >&lt;p&gt;Thanks for the report and for pin-pointing the cause &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarmiglani&quot; class=&quot;user-hover&quot; rel=&quot;sagarmiglani&quot;&gt;sagarmiglani&lt;/a&gt;. Would you have the time to provide a PR? I&apos;d be happy to guide you through the process.&lt;/p&gt;</comment>
                            <comment id="17359952" author="sagarmiglani" created="Wed, 9 Jun 2021 11:10:51 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Sure, I&apos;ll create a PR soon. Thank you.&lt;/p&gt;</comment>
                            <comment id="17359953" author="rombert" created="Wed, 9 Jun 2021 11:11:25 +0000"  >&lt;p&gt;Sounds good, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarmiglani&quot; class=&quot;user-hover&quot; rel=&quot;sagarmiglani&quot;&gt;sagarmiglani&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17364828" author="sagarmiglani" created="Thu, 17 Jun 2021 10:40:04 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Here is the PR: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/47&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please let me know in case I&apos;ve missed something. Looking forward to your comments and suggestions&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;br/&gt;
Sagar&lt;/p&gt;

&lt;p&gt;PS: Apologies for the late PR, was stuck on something else&lt;/p&gt;</comment>
                            <comment id="17364862" author="rombert" created="Thu, 17 Jun 2021 10:50:03 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarmiglani&quot; class=&quot;user-hover&quot; rel=&quot;sagarmiglani&quot;&gt;sagarmiglani&lt;/a&gt;, I&apos;ll review early next week.&lt;/p&gt;</comment>
                            <comment id="17369465" author="rombert" created="Fri, 25 Jun 2021 13:21:59 +0000"  >&lt;p&gt;PR merged, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarmiglani&quot; class=&quot;user-hover&quot; rel=&quot;sagarmiglani&quot;&gt;sagarmiglani&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17371033" author="sagarmiglani" created="Tue, 29 Jun 2021 04:34:05 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rsp4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10475] plugin&apos;s apis-jar goal fails for empty jar</title>
                <link>https://issues.apache.org/jira/browse/SLING-10475</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Plugin&apos;s apis-jar goal fails when we have empty APIs jar. It fails while writing the source-report.txt.&#160; We can fix this via ensuring that &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/blob/master/src/main/java/org/apache/sling/feature/maven/mojos/ApisJarMojo.java#L425&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/blob/master/src/main/java/org/apache/sling/feature/maven/mojos/ApisJarMojo.java#L425&lt;/a&gt;&#160;directory exists before we write sources-report.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.maven.plugin.MojoExecutionException: Unable to write /Users/admin/git_codebase/sdk-builder/target/apis-prerelease-jars/sdk-builder-sources-report.txt
 at org.apache.sling.feature.maven.mojos.apis.ApisUtil.writeSourceReport (ApisUtil.java:514)
 at org.apache.sling.feature.maven.mojos.ApisJarMojo.onFeature (ApisJarMojo.java:527)
 at org.apache.sling.feature.maven.mojos.ApisJarMojo.execute (ApisJarMojo.java:449)
 at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)
 at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
 at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
 at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13382901">SLING-10475</key>
            <summary>plugin&apos;s apis-jar goal fails for empty jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="darshan.mahor">Darshan Mahor</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jun 2021 09:31:28 +0000</created>
                <updated>Mon, 14 Jun 2021 10:35:12 +0000</updated>
                            <resolved>Wed, 9 Jun 2021 10:16:00 +0000</resolved>
                                                    <fixVersion>slingfeature-maven-plugin 1.5.6</fixVersion>
                                    <component>Feature Model</component>
                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17359907" author="cziegeler" created="Wed, 9 Jun 2021 10:16:00 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/commit/1d768e9a226eeb6081f811523ab936bd803a7b58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/commit/1d768e9a226eeb6081f811523ab936bd803a7b58&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rskw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10472] TokenStore.saveTokens fails on windows</title>
                <link>https://issues.apache.org/jira/browse/SLING-10472</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As reported by Stefan during the release vote:&lt;/p&gt;

&lt;p&gt;TokenStore#saveTokens fails on windows because the File.renameTo call that is renaming the temp file to the destination fails if the file already exists.&#160; This failure does not happen in linux.&lt;/p&gt;

&lt;p&gt;Expected:&lt;/p&gt;

&lt;p&gt;Change the code to use the nio Files.&lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Files.html#move(java.nio.file.Path,java.nio.file.Path,java.nio.file.CopyOption...)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;move&lt;/tt&gt;&lt;/a&gt;&#160;method to rename the file in a platform independent manner.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382805">SLING-10472</key>
            <summary>TokenStore.saveTokens fails on windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jun 2021 00:06:07 +0000</created>
                <updated>Sat, 12 Jun 2021 01:33:07 +0000</updated>
                            <resolved>Wed, 9 Jun 2021 00:26:22 +0000</resolved>
                                                    <fixVersion>Form Based Authentication 1.0.24</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17359672" author="enorman" created="Wed, 9 Jun 2021 00:26:22 +0000"  >&lt;p&gt;Fixed at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-form/commit/38b9dfaf57c47b2c9a5d91de30d95a889e8df910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;38b9dfaf57c47b2c9a5d91de30d95a889e8df910&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17362214" author="enorman" created="Sat, 12 Jun 2021 01:33:07 +0000"  >&lt;p&gt;Closing with the 1.0.24 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rrzk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10469] Breaking leftover dir folders for configs in generated packages</title>
                <link>https://issues.apache.org/jira/browse/SLING-10469</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case a configuration package is generated from an existing repository due to the serialization logic for each nt:file representing a configuration there is also a .dir folder (with an embedded .content.xml declaring nodetype etc.) as a sibling.&lt;br/&gt;
The configuration handlers only handle the binaries but don&apos;t recognize the sibling structures which will make them remain in the package and therefore render the packages invalid as the binary belonging to the nt:file is being stripped out.&lt;/p&gt;

&lt;p&gt;To prevent this (rare but existing) edge case the Configuration handler should also detect the dir folder and drop it from assembly in the target package as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382670">SLING-10469</key>
            <summary>Breaking leftover dir folders for configs in generated packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsuess">Dominik S&#252;&#223;</assignee>
                                    <reporter username="dsuess">Dominik S&#252;&#223;</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2021 09:27:30 +0000</created>
                <updated>Tue, 6 Jul 2021 07:05:34 +0000</updated>
                            <resolved>Fri, 2 Jul 2021 20:42:13 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.4</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.6</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17359198" author="dsuess" created="Tue, 8 Jun 2021 09:36:48 +0000"  >&lt;p&gt;PR at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/88&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/88&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17359201" author="kwin" created="Tue, 8 Jun 2021 09:41:04 +0000"  >&lt;p&gt;The same issue might happen in &lt;tt&gt;BundleEntryHandler&lt;/tt&gt; so I think it might be worth to encapsulate the logic somehow and reuse it there as well.&lt;/p&gt;</comment>
                            <comment id="17359203" author="dsuess" created="Tue, 8 Jun 2021 09:47:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - that is a bit more tricky (unless we just duplicate the logic. The point fix makes sure the corresponding substructures are detected by the very same Handler and then simply ignores those structures.   Therefore for an even more generic refactoring I suggest to create another one.&lt;/p&gt;

&lt;p&gt;In the end this is an edge case when somebody produces the package from an existing repository - which I so far only observed a few times when someone  extracts the configs - but you are right, people &quot;may&quot; break bundle entries the same way. &lt;/p&gt;</comment>
                            <comment id="17373769" author="karlpauls" created="Fri, 2 Jul 2021 20:42:13 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/96&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/96&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rr60:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10468] Converted content package is missing some .content.xml</title>
                <link>https://issues.apache.org/jira/browse/SLING-10468</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, when trying to install the converted content package as attached to&#160; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10467&quot; title=&quot;Converted content package referres to paths moved to repo-init&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10467&quot;&gt;&lt;del&gt;SLING-10467&lt;/del&gt;&lt;/a&gt; the import failed with &lt;tt&gt;ConstraintViolationException&lt;/tt&gt; because the intermediate nodes for the demo-cp group and the regular user does no longer come with a &lt;em&gt;.content.xml&lt;/em&gt; defining it&apos;s node type and jackrabbit fvault resorting to it&apos;s &lt;em&gt;nt:folder&lt;/em&gt; default, which is not allowed by &lt;tt&gt;rep:AuthorizableFolder&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In order to exclude the possibility that this is caused by the &lt;tt&gt;rep:policy&lt;/tt&gt; node attached to the user/group folder nodes containing an ACE for one of the service users in the package, I created a slightly modified package that doesn&apos;t come with a AC policy at &lt;em&gt;/home/groups/demo-cp&lt;/em&gt; (but still has one with &lt;em&gt;/home/users/demo-cp&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;Running the converter however returned the same output:&lt;br/&gt;
There is no longer exists a &lt;em&gt;.content.xml&lt;/em&gt; file with neither the intermediate authorizable folder mentioned above. Not sure where that gets lost, but it looks like a bug to me (and will essentially prevent the converted content package from being installed). &lt;br/&gt;
Am I missing something???&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382668">SLING-10468</key>
            <summary>Converted content package is missing some .content.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2021 09:15:42 +0000</created>
                <updated>Tue, 6 Jul 2021 07:05:35 +0000</updated>
                            <resolved>Wed, 9 Jun 2021 14:11:11 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.4</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.6</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17359408" author="anchela" created="Tue, 8 Jun 2021 15:03:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, if i am not mistaken the culprit is the &lt;tt&gt;AbstractUserEntryHandler&lt;/tt&gt;, which catches all users, all groups and all intermediate paths and doesn&apos;t write those parts back that are not transformed to repo-init (namely groups, regular users and their intermediate paths). probably a regression from our goal to make sure we can properly identify service-user-permissions that point to user and group homes (in contrast to those pointing to other service users, which is supported).&lt;br/&gt;
probably &lt;tt&gt;AbstractUserEntryHandler&lt;/tt&gt; needs something similar to &lt;tt&gt;AbstractPolicyEntryHandler&lt;/tt&gt; i.e. the parser returned a boolean instead of void and subsequently writing the current entry back to the package if it has not been moved to repo-init. &lt;/p&gt;

&lt;p&gt;something like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; rejectedUser;
            AbstractUserParser parser = createParser(converter, originalPath, intermediatePath);
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream input = archive.openInputStream(entry)) {
                rejectedUser = parser.parse(input);
            }

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rejectedUser) {
                &lt;span class=&quot;code-comment&quot;&gt;// TODO write entry back to the &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
&lt;/span&gt;            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13026550" name="SLING-10468.patch" size="3743" author="angela" created="Tue, 8 Jun 2021 15:17:16 +0000"/>
                            <attachment id="13026528" name="demo-cp-no-su-ace-at-group-folder-0.0.0-cp2fm-converted.zip" size="5727" author="angela" created="Tue, 8 Jun 2021 09:16:12 +0000"/>
                            <attachment id="13026527" name="demo-cp-no-su-ace-at-group-folder.zip" size="16155" author="angela" created="Tue, 8 Jun 2021 09:16:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rr5k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10467] Converted content package referres to paths moved to repo-init</title>
                <link>https://issues.apache.org/jira/browse/SLING-10467</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, in the light of the &lt;em&gt;enforce-principal-based-supported-path&lt;/em&gt; configuration option i had a look at the converted content packages, which probably need to be used instead of the original packages if the modifications applied by converted are not to be reverted by later installing the original content package.&lt;/p&gt;

&lt;p&gt;i therefore created a simple test content package &lt;em&gt;demo-cp.zip&lt;/em&gt; that contains:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a regular user in &apos;demo-cp&apos; subfolder&lt;/li&gt;
	&lt;li&gt;a regular group in &apos;demo-cp&apos; subfolder&lt;/li&gt;
	&lt;li&gt;a bunch of service users both with resource-based and principal-based ac setup&lt;/li&gt;
	&lt;li&gt;content root at /demo-cp with a ac-policy (entries for user, group and service user)&lt;/li&gt;
	&lt;li&gt;a serviceusermapping configuration below /apps/demo-cp&lt;br/&gt;
 and had the converter generate &lt;em&gt;demo-cp-0.0.0-cp2fm-converted.zip&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;when trying to install the converted content package on a repository that content for service users and below /apps installed, i noticed that the converted package will actually remove that content.&lt;br/&gt;
 i suspect that this is caused by &lt;em&gt;META_INF/vault/filter.xml&lt;/em&gt; and/or &lt;em&gt;META-INF/vault/definition/content.xml&lt;/em&gt; still referring to those parts that got &apos;moved&apos; to repo-init. in case of the dependency/.content.xml it states that the import mode is &lt;em&gt;replace&lt;/em&gt; (same as in original package).&lt;/p&gt;

&lt;p&gt;maybe my test package is not correct.... but I would have expected that the paths that have been installed by repo-init statements should no longer be covered by the converted package (everything below /apps and /home/users/system) or/and should have the import-mode changed to the deprecated &lt;del&gt;MERGE&lt;/del&gt; or new MERGE_PROPERTIES. the latter would be needed for any kind of resource-based AC setup for service users at mutable content nodes (NOTE: doesn&apos;t apply in case ac-setup for service users is migrated to principal-based authorization which entirely resides below the service user home).&lt;/p&gt;

&lt;p&gt;edge case: if regular users were to be located below &lt;em&gt;/home/users/system&lt;/em&gt; excluding that path from the package definition obviously doesn&apos;t work.... changing import mode would be required. alternatively: spotting regular users below &lt;em&gt;home/users/system&lt;/em&gt; and abort converter.&lt;/p&gt;

&lt;p&gt;wdyt?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382651">SLING-10467</key>
            <summary>Converted content package referres to paths moved to repo-init</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2021 08:31:55 +0000</created>
                <updated>Tue, 6 Jul 2021 07:05:37 +0000</updated>
                            <resolved>Wed, 30 Jun 2021 14:37:33 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.4</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.6</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17372500" author="anchela" created="Thu, 1 Jul 2021 07:59:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; thanks a lot for discussions, input and suggestions.... joint effort definitely results in better fixes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13386461">SLING-10571</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                            <outwardlinks description="Testing discovered">
                                        <issuelink>
            <issuekey id="13383193">SLING-10481</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13026522" name="demo-cp-0.0.0-cp2fm-converted.zip" size="5685" author="angela" created="Tue, 8 Jun 2021 08:32:47 +0000"/>
                            <attachment id="13026524" name="demo-cp.zip" size="16491" author="angela" created="Tue, 8 Jun 2021 08:33:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rr1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10463] Repoinit fails to create node if property already exists at the same path</title>
                <link>https://issues.apache.org/jira/browse/SLING-10463</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a property already exists at the path of a node described in repoinit, then the repoinit will incorrectly assume the node does not need to be created. &lt;/p&gt;

&lt;p&gt;Test case &amp;amp; fix -  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13026501/13026501_SLING-10463.patch&quot; title=&quot;SLING-10463.patch attached to SLING-10463&quot;&gt;SLING-10463.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13382548">SLING-10463</key>
            <summary>Repoinit fails to create node if property already exists at the same path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="rma61870@adobe.com">Tom Blackford</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2021 18:08:49 +0000</created>
                <updated>Mon, 30 Jan 2023 18:35:17 +0000</updated>
                            <resolved>Thu, 12 Jan 2023 16:10:22 +0000</resolved>
                                                    <fixVersion>Repoinit JCR 1.1.44</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9000">2.5h</timespent>
                                <comments>
                            <comment id="17359226" author="anchela" created="Tue, 8 Jun 2021 10:13:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rma61870%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;rma61870@adobe.com&quot;&gt;rma61870@adobe.com&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, just a minor comment from a JCR point of view: whether or not same-name-property-and-node are allowed at the same parent node is subject to the repository implementation and there exists a dedicated descriptor for that (&lt;tt&gt;Repository.OPTION_NODE_AND_PROPERTY_WITH_SAME_NAME_SUPPORTED&lt;/tt&gt;. i am not sure if repo-init should care and check if an item with the same name but different item-type already exists but it might be worth thinking about it... having a node and a property with the same name might introduce unintended regressions as we saw with the case that made this bug surface in the first place.&lt;/p&gt;

&lt;p&gt;a more conservative approach to the proposed patch would be to leave the &lt;tt&gt;Session.itemExists&lt;/tt&gt; but verify that it actually is a node and fail the repo-init if it is a property.&lt;/p&gt;</comment>
                            <comment id="17359279" author="bdelacretaz" created="Tue, 8 Jun 2021 10:48:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;a more conservative approach to the proposed patch would be to leave the Session.itemExists but verify that it actually is a node and fail the repo-init if it is a property.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this is less likely to cause surprises: repoinit would fail the creation of a node with name N if its parent already has a property named N.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rma61870%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;rma61870@adobe.com&quot;&gt;rma61870@adobe.com&lt;/a&gt; would that behavior work for your use case?&lt;/p&gt;</comment>
                            <comment id="17359308" author="anchela" created="Tue, 8 Jun 2021 12:13:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, since i was involved with the investigation of the issue that lead to this report by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rma61870%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;rma61870@adobe.com&quot;&gt;rma61870@adobe.com&lt;/a&gt;: the problem surfaced because &lt;em&gt;&apos;create path /node1/node2-but-there-is-a-property&lt;/em&gt; succeeded but the subsequent &lt;em&gt;&apos;set property on /node1/node2-but-there-is-a-property&apos;&lt;/em&gt; failed with &lt;tt&gt;PathNotFoundException&lt;/tt&gt;. So having repo-init fail early would have helped a lot.&lt;br/&gt;
The patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rma61870%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;rma61870@adobe.com&quot;&gt;rma61870@adobe.com&lt;/a&gt; would have gracefully avoided any failure during repo-init (as long as the repository supports OPTION_NODE_AND_PROPERTY_WITH_SAME_NAME_SUPPORTED) but I suspect that it had caused regressions later on..... while from a JCR point of view the patch is ok and same-name-node-and-property is legal, my feeling is that there exists plenty of &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRSITE-4&quot; title=&quot;Implementation Architecture Documentation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRSITE-4&quot;&gt;JCR-1&lt;/a&gt;.0 code that doesn&apos;t use the 2.0 methods &lt;tt&gt;Session.nodeExist&lt;/tt&gt;, &lt;tt&gt;Session.propertyExists&lt;/tt&gt;, &lt;tt&gt;Session.getNode&lt;/tt&gt; and &lt;tt&gt;Session.getProperty&lt;/tt&gt; instead of the corresponding general-item variants. So, the conservative approach would be a safe bet. also in Sling-based application same-name-node-and-property looks pretty awkward, doesn&apos;t it? and i would not be surprised if it caused other sling features to break.&lt;/p&gt;</comment>
                            <comment id="17359322" author="bdelacretaz" created="Tue, 8 Jun 2021 12:39:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;in Sling-based application same-name-node-and-property looks pretty awkward, doesn&apos;t it? and i would not be surprised if it caused other sling features to break.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It looks unusual at least and like you I wouldn&apos;t be surprised if it causes hard-to-troubleshoot issues due to the confusion that it can cause, even if it doesn&apos;t cause any hard breakages.&lt;/p&gt;</comment>
                            <comment id="17359360" author="rma61870@adobe.com" created="Tue, 8 Jun 2021 13:36:57 +0000"  >&lt;p&gt;Sorry for slow reply &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Yes - the more conservative approach would be fine from my perspective. I toyed with doing something like that - but I wasn&apos;t sure that there were not situations where creating a node at a path which matches the path of an existing property might be required. &lt;/p&gt;

&lt;p&gt;My only concern is that failures in RepoInit are hard to troubleshoot etc (see this case) since AEM itself isn&apos;t up (and therefore pods keep getting killed in a K8s-based deployment). &lt;/p&gt;

&lt;p&gt;Alternatively I guess we could emit a WARN message but I doubt anybody would notice.&lt;/p&gt;</comment>
                            <comment id="17359392" author="anchela" created="Tue, 8 Jun 2021 14:23:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rma61870%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;rma61870@adobe.com&quot;&gt;rma61870@adobe.com&lt;/a&gt;, yes..... they are tedious to troubleshoot. but figuring out what happened once odd bugs/regression pop up if nobody even noticed that there was a same-named-node-property issues might be next to impossible. so, i&apos;d rather go for failing as early and loudly as possible. also, i don&apos;t remember having seen a same-named-node-property collision with repo-init in the all the years.... so maybe it&apos;s really an edge case. wdyt?&lt;/p&gt;</comment>
                            <comment id="17359396" author="bdelacretaz" created="Tue, 8 Jun 2021 14:32:45 +0000"  >&lt;p&gt;I have created PR #19 with the &quot;conservative approach&quot;.&lt;/p&gt;

&lt;p&gt;Repoinit causing the content repository startup to fail is by design, as in many cases such failures would lead problematic structures behind them otherwise.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rma61870%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;rma61870@adobe.com&quot;&gt;rma61870@adobe.com&lt;/a&gt; I&apos;m open to suggestions on how to better signal those failures, if you have any.&lt;/p&gt;</comment>
                            <comment id="17676247" author="kwin" created="Thu, 12 Jan 2023 16:10:22 +0000"  >&lt;p&gt;Fixed implicitly via &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-11736&quot; title=&quot;Add &amp;quot;ensure nodes&amp;quot; which should potentially adjust the primary type/mixin types of existing nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-11736&quot;&gt;&lt;del&gt;SLING-11736&lt;/del&gt;&lt;/a&gt; through new instruction &quot;ensure nodes&quot; which bails out in case a property with the same name exists already.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13513654">SLING-11736</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13026501" name="SLING-10463.patch" size="1799" author="rma61870@adobe.com" created="Mon, 7 Jun 2021 18:09:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rqew:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10460] Contenpackage Converter needs osgi.resource and osgi.dto on the classpath</title>
                <link>https://issues.apache.org/jira/browse/SLING-10460</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10223&quot; title=&quot;org.osgi.framework.Version not contained in lib folder generated from appassembly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10223&quot;&gt;&lt;del&gt;SLING-10223&lt;/del&gt;&lt;/a&gt; changed the dependency for osgi from osgi.core to osgi.framework - that one doesn&apos;t contain the org.osgi.&lt;/p&gt;
{dto,resource}
&lt;p&gt; packages. Consequently, the converter now fails when it encounters them in manifests like in:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NoClassDefFoundError: org/osgi/resource/Capability
	at org.apache.sling.feature.io.json.ManifestUtils.unmarshalDirective(ManifestUtils.java:45)
	at org.apache.sling.feature.io.json.FeatureJSONReader.lambda$readRequirements$1(FeatureJSONReader.java:603)
	at org.apache.sling.feature.io.json.FeatureJSONReader.lambda$rethrowBiConsumer$4(FeatureJSONReader.java:649)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We need to add the osgi.dto and osgi.resource dependencies.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382451">SLING-10460</key>
            <summary>Contenpackage Converter needs osgi.resource and osgi.dto on the classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2021 11:33:47 +0000</created>
                <updated>Tue, 6 Jul 2021 07:05:35 +0000</updated>
                            <resolved>Mon, 7 Jun 2021 11:55:15 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.4</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.6</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13365599">SLING-10223</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rptc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10454] CMS Reference - Crypto Configuration Fails due to Content Configuration</title>
                <link>https://issues.apache.org/jira/browse/SLING-10454</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When attempting to create a &quot;default&quot; Commons Crypto configuration via the Sling Feature Model, the Feature Model configuration will be overridden by the default settings provided in the Reference app. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13381782">SLING-10454</key>
            <summary>CMS Reference - Crypto Configuration Fails due to Content Configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dklco">Dan Klco</assignee>
                                    <reporter username="dklco">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2021 20:16:20 +0000</created>
                <updated>Fri, 23 Jul 2021 15:51:00 +0000</updated>
                            <resolved>Wed, 2 Jun 2021 20:24:49 +0000</resolved>
                                    <version>App CMS 1.0.2</version>
                                    <fixVersion>App CMS 1.0.4</fixVersion>
                                    <component>App CMS Reference</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17355945" author="dklco" created="Wed, 2 Jun 2021 20:24:49 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/d46582b62024c11c24104677a94e4cfded7867c1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/d46582b62024c11c24104677a94e4cfded7867c1&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rloo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10451] ArtifactManagerConfig leaves empty &quot;slingfeature&quot; folders in the java tmp directory</title>
                <link>https://issues.apache.org/jira/browse/SLING-10451</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With every run of &lt;tt&gt;FeatureBuilder.assemble&lt;/tt&gt;&#160;empty folders starting with prefix &lt;tt&gt;slingfeature&lt;/tt&gt; and followed by a random number are left in the java tmp folder. Those should be properly cleaned up. The creation happens in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/blob/afbad06b30ad1ff81ce25d8a27d3dcd2abbfc035/src/main/java/org/apache/sling/feature/io/artifacts/ArtifactManagerConfig.java#L66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/blob/afbad06b30ad1ff81ce25d8a27d3dcd2abbfc035/src/main/java/org/apache/sling/feature/io/artifacts/ArtifactManagerConfig.java#L66&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13381738">SLING-10451</key>
            <summary>ArtifactManagerConfig leaves empty &quot;slingfeature&quot; folders in the java tmp directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2021 16:19:24 +0000</created>
                <updated>Tue, 29 Jun 2021 14:50:53 +0000</updated>
                            <resolved>Fri, 25 Jun 2021 09:57:53 +0000</resolved>
                                                    <fixVersion>Feature Model 1.2.24</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17358088" author="cziegeler" created="Sun, 6 Jun 2021 11:03:18 +0000"  >&lt;p&gt;While I agree with the description I think the PR is too agressive - we have to go with the originator principle here: if the ArtifactManagerConfig is used its own temp directory, then it &lt;b&gt;might&lt;/b&gt; be ok to remove it afterwards. If setCacheDirectory is called with a custom directory then that directory must not be removed.&lt;/p&gt;</comment>
                            <comment id="17358096" author="kwin" created="Sun, 6 Jun 2021 11:16:27 +0000"  >&lt;p&gt;Should the cache directory be cleaned up by ArtifactManagerConfig instead? This would require it to implement some close method as well&#8230; Or do you have another idea?&lt;/p&gt;</comment>
                            <comment id="17358098" author="cziegeler" created="Sun, 6 Jun 2021 11:34:46 +0000"  >&lt;p&gt;Not 100% sure what the best approach is - but I think AMConfig should not be responsible for deletion - it should not create the temp dir in the first place either I think.&lt;br/&gt;
We could remove the temp dir creation from AMConfig and let it return null if nothing is configurated. Then the manager can create a temp dir if cache dir is not set and delete it on shutdown - otherwise it just uses the configured one&lt;/p&gt;</comment>
                            <comment id="17358104" author="kwin" created="Sun, 6 Jun 2021 12:23:31 +0000"  >&lt;p&gt;Is it ok to break backwards compatibility of AMConfig by removing this method or should we just deprecate mentioning its limitations?&lt;/p&gt;</comment>
                            <comment id="17358112" author="cziegeler" created="Sun, 6 Jun 2021 13:39:02 +0000"  >&lt;p&gt;We would just remove creating the cache directory from the constructor of the AMConfig. I think that&apos;s fine. Today it is already possible to do a setCacheDir(null) and then getCacheDir would return null - something the AM should handle anyway - I guess today it will result in an NPE.&lt;br/&gt;
So removing the creation of the cache dir and update the javadocs accordingly should do the trick. AM is the only client of AMConfig anyway&lt;/p&gt;</comment>
                            <comment id="17358204" author="kwin" created="Sun, 6 Jun 2021 18:57:15 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/commit/94a5023560c05f0bde2acc1617ca70846253c139&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/commit/94a5023560c05f0bde2acc1617ca70846253c139&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13386278">SLING-10567</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rlew:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10448] The Java Script Engine is not made available any more</title>
                <link>https://issues.apache.org/jira/browse/SLING-10448</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Starting with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10155&quot; title=&quot;add configuration to include or exclude specific ScriptEngineFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10155&quot;&gt;&lt;del&gt;SLING-10155&lt;/del&gt;&lt;/a&gt;, it seems that the Java Script Engine, provided by the Apache Sling Scripting Java Support bundle, is not made available to the platform any more.&lt;/p&gt;

&lt;p&gt;This happens because the implementation of the Java Script Engine Factory doesn&apos;t correctly return the short names under which the script engine is made available.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13381728">SLING-10448</key>
            <summary>The Java Script Engine is not made available any more</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2021 15:16:44 +0000</created>
                <updated>Mon, 14 Jun 2021 08:04:57 +0000</updated>
                            <resolved>Wed, 2 Jun 2021 15:28:15 +0000</resolved>
                                    <version>Scripting Java 2.1.2</version>
                                    <fixVersion>Scripting Java 2.1.6</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17355803" author="radu.cotescu" created="Wed, 2 Jun 2021 15:28:15 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-java/commit/4abea89&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 4abea89&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17355829" author="olli" created="Wed, 2 Jun 2021 16:06:17 +0000"  >&lt;p&gt;This &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-java/commit/4abea89#diff-060eb53d0a7e4c7f1779d81228da83d4f387f9b402eeb9ad4181d659b18fda67L68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;change&lt;/a&gt; will break the filtering on component properties.&lt;/p&gt;</comment>
                            <comment id="17355832" author="radu.cotescu" created="Wed, 2 Jun 2021 16:08:15 +0000"  >&lt;p&gt;Saw it right now and I&apos;ll re-add the registration properties. But other than filtering, they serve no other purpose.&lt;/p&gt;</comment>
                            <comment id="17355834" author="radu.cotescu" created="Wed, 2 Jun 2021 16:11:00 +0000"  >&lt;p&gt;Brought back the properties in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-java/commit/cb8e364&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit cb8e364&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17355838" author="olli" created="Wed, 2 Jun 2021 16:13:58 +0000"  >&lt;p&gt;FreeMarker script engine (et al.) &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-freemarker/blob/master/src/main/java/org/apache/sling/scripting/freemarker/internal/FreemarkerScriptEngineFactory.java#L110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;is configurable and keeps it in sync&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13360202">SLING-10155</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13056216">SLING-6643</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rlco:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10447] sling:vanityPath are being searched during startup in the entire repository, including version storage</title>
                <link>https://issues.apache.org/jira/browse/SLING-10447</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We have a lot of pages on our production author instance. We also have a lot of pages that use sling:vanityPath. Everytime a page is replicated, a new version is created. &lt;/p&gt;

&lt;p&gt;We have roughly 168.000 pages in our instance. In the /content node, there are approx. 4500 pages with vanity URLs. In the version storage, however, there are 120.000+ entries that have a sling:vanityPath defined.&lt;/p&gt;

&lt;p&gt;When starting up Apache Sling, the Resource Resolver fetches all the existing sling:vanityPath entries, which it fails to do, because of the large amount of sling:vanityPath in the version storage.&lt;/p&gt;

&lt;p&gt;In the code, I specifically see checks (when processing the query results) about the version storage. However, this should have been put inside the query as a filter, in order to avoid fetching such a large amount of query result nodes:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/4406b8fed0fedb48202fc6472fb552c36aa06e35/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java#L1158&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/4406b8fed0fedb48202fc6472fb552c36aa06e35/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java#L1158&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I propose to update the query with a &quot;not isdescendantnode&quot;-check, to make sure we do not return any content from the version storage and thus make the default query limits of 100.000 nodes work again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13381689">SLING-10447</key>
            <summary>sling:vanityPath are being searched during startup in the entire repository, including version storage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="Henry Kuijpers">Henry Kuijpers</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2021 12:09:12 +0000</created>
                <updated>Fri, 12 Jul 2024 08:29:37 +0000</updated>
                            <resolved>Thu, 9 Sep 2021 10:18:27 +0000</resolved>
                                    <version>Resource Resolver 1.7.6</version>
                                    <fixVersion>Resource Resolver 1.8.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="25800">7h 10m</timespent>
                                <comments>
                            <comment id="17355674" author="rombert" created="Wed, 2 Jun 2021 12:18:38 +0000"  >&lt;p&gt;That&apos;s a great idea for an improvement &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt;. Would you have the time to provide a pull request? I think this can be a simplified version of the changes submitted for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9535&quot; title=&quot;Improve performance of sling:alias Query when Optimize alias resolution is activated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9535&quot;&gt;&lt;del&gt;SLING-9535&lt;/del&gt;&lt;/a&gt; (minus the configurable paths).&lt;/p&gt;</comment>
                            <comment id="17355676" author="kwin" created="Wed, 2 Jun 2021 12:19:02 +0000"  >&lt;p&gt;As I don&apos;t see a reason why sling:alias should be indexed at all in the version storage I would not index there. Then the query does not have to do (costly) path checks.&lt;/p&gt;</comment>
                            <comment id="17355678" author="rombert" created="Wed, 2 Jun 2021 12:24:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - did you mean vanity paths in your comment?&lt;/p&gt;</comment>
                            <comment id="17355689" author="kwin" created="Wed, 2 Jun 2021 12:54:12 +0000"  >&lt;p&gt;Yes, I meant the index for the &lt;tt&gt;sling:vanityPath&lt;/tt&gt; not &lt;tt&gt;sling:alias&lt;/tt&gt;. But IMHO both indices could leverage the same path restriction.&lt;/p&gt;</comment>
                            <comment id="17355693" author="rombert" created="Wed, 2 Jun 2021 13:01:19 +0000"  >&lt;p&gt;TBH I am not sure how that works &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;. Does this mean that if an index for &lt;tt&gt;sling:vanityPath&lt;/tt&gt; is restricted to &lt;tt&gt;/content&lt;/tt&gt; and I run a query over the whole repository it would only return results for &lt;tt&gt;/content&lt;/tt&gt;, even if it I have vanity paths defined in &lt;tt&gt;/libs&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="17355697" author="kwin" created="Wed, 2 Jun 2021 13:04:04 +0000"  >&lt;p&gt;Look at &lt;a href=&quot;https://jackrabbit.apache.org/oak/docs/query/lucene.html#include-exclude&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/oak/docs/query/lucene.html#include-exclude&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Note that excludedPaths and includedPaths does not affect the index selection logic for a query i.e. if a query has any path restriction specified then that would not be checked against the excludedPaths and includedPaths.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So the answer to your question is yes (given that the index with the path restriction is selected for the query based on its score)&lt;/p&gt;</comment>
                            <comment id="17355701" author="henry kuijpers" created="Wed, 2 Jun 2021 13:07:55 +0000"  >&lt;p&gt;Yes, i can provide a PR. &lt;/p&gt;

&lt;p&gt;There are 2 way the vanity paths are fetched: once at startup, which uses a query. I can update that query with the &quot;not version storage&quot;-path restriction.&lt;/p&gt;

&lt;p&gt;The other one is a ResourceChangeListener that listens for changed in the observation paths that are configured: in the case of AEM, that is /. &lt;br/&gt;
For that one, there is still a filter needed to exclude /jcr:system. &lt;/p&gt;

&lt;p&gt;Or is there a way to configure a ResourceChangeListener to exclude certain paths? I could not find anything for that. &lt;/p&gt;</comment>
                            <comment id="17355727" author="rombert" created="Wed, 2 Jun 2021 13:35:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - that actually looks scary to me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; In case someone actually wants to look in jcr:system for vanity paths for &lt;em&gt;whatever&lt;/em&gt; reason they will not be found. Looking in the query docs I see noted that&lt;/p&gt;

&lt;p&gt;&lt;blockquote&gt;&lt;p&gt;Use excludedPaths, includedPaths with caution - When paths are excluded or included then query engine is not aware of that. If wrong paths get excluded then its possible that nodes which should have been part of query result get excluded as they are not indexed. So only exclude those paths which do not have node matching given nodeType or nodes which are known to be not part of any query result&lt;/p&gt;&lt;/blockquote&gt;.&lt;/p&gt;

&lt;p&gt;I don&apos;t think we should recommend this kind of exclusion and should instead make better queries.&lt;/p&gt;</comment>
                            <comment id="17355730" author="rombert" created="Wed, 2 Jun 2021 13:39:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt; - I am not aware of an option of resource change events in a way that you need ( / but not /jcr:system ). But we should treat optimisation in a different issue.&lt;/p&gt;</comment>
                            <comment id="17355735" author="kwin" created="Wed, 2 Jun 2021 13:43:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think we should recommend this kind of exclusion and should instead make better queries.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We should maybe involve someone more familiar with queries, but I don&apos;t see a good reason for queries within version storage. As I said before, placing the path constraint in the query makes it execute more slowly. In any case having a dedicated index for the use cases of Sling itself (which for sure is everything outside version storage) makes IMHO a lot of sense.&lt;/p&gt;

&lt;p&gt;In any case this is more for the distribution to fix (either Sling Starter or AEM) as the index is provided by them.&lt;/p&gt;</comment>
                            <comment id="17355766" author="bdelacretaz" created="Wed, 2 Jun 2021 14:24:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;...this is more for the distribution to fix (either Sling Starter or AEM) as the index is provided by them.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree with that and I think it also means that making the startup query more selective is required anyway, as there&apos;s no way to guarantee that these more selective indexes will be configured. &lt;/p&gt;</comment>
                            <comment id="17355862" author="henry kuijpers" created="Wed, 2 Jun 2021 16:54:33 +0000"  >&lt;p&gt;Proposed PR here: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/46&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17356293" author="jsedding" created="Thu, 3 Jun 2021 08:52:32 +0000"  >&lt;p&gt;I think we should adjust the query for &lt;tt&gt;sling:vanityPath&lt;/tt&gt; to exclude &lt;tt&gt;/jcr:system&lt;/tt&gt;. Even with a suboptimal index (or non at all) that will already allow the query engine to filter out undesired paths on a much lower level of abstraction and thus reduce overhead. This then opens the door for index optimizations: either something along &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; suggestion or just the ability of the index to evaluate path restrictions.&lt;/p&gt;

&lt;p&gt;Note that a similar approach is already in place for &lt;tt&gt;sling:alias&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17356296" author="henry kuijpers" created="Thu, 3 Jun 2021 09:04:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I think, especially given that most of the vanity path white-/blacklisting is configured in OSGi, that it&apos;s hard to keep indexes in sync with these configs.&lt;/p&gt;

&lt;p&gt;Also note that, (at least in AEM) the ntBaseLucene index already evaluates path restrictions.&lt;/p&gt;

&lt;p&gt;I&apos;ll use our bloated-with-versions-production-instance in a few to run some querys, to see what the performance impact would be.&lt;/p&gt;

&lt;p&gt;Also note that there are more paths to restrict. It&apos;s not only an exclusion for /jcr:system that needs to be added, also:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Includes for all paths mentioned in `resource.resolver.vanitypath.whitelist` (and by design, if it is empty, an include for `/` instead)&lt;/li&gt;
	&lt;li&gt;Excludes for all paths mentioned in `resource.resolver.vanitypath.blacklist`&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(This is also visible in the PR.)&lt;/p&gt;

&lt;p&gt;And, indeed, a similar approach was already added for `sling:alias`. However, it doesn&apos;t have the white/blacklist &quot;feature&quot;.&lt;/p&gt;</comment>
                            <comment id="17356348" author="henry kuijpers" created="Thu, 3 Jun 2021 11:33:47 +0000"  >&lt;p&gt;I just attached 2 files, one with a query with path restrictions (as they would be generated when the mentioned PR is merged) and one without path restrictions (as it works now).&lt;/p&gt;

&lt;p&gt;The instance has ~5000 vanity paths in the /content-node and a few in /libs (and maybe some in /apps) of course. There are roughly 120.000 vanity paths under the /jcr:system node (they reside in the /jcr:system/jcr:versionStorage node).&lt;/p&gt;

&lt;p&gt;I see no alerting impact of the query with the path restrictions over the query without. In fact, I see that it seems to perform better, in terms of node traversal, which of course makes sense.&lt;/p&gt;</comment>
                            <comment id="17360870" author="henry kuijpers" created="Thu, 10 Jun 2021 12:54:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; Want to have a(nother) look at the PR?&lt;/p&gt;</comment>
                            <comment id="17401112" author="henry kuijpers" created="Wed, 18 Aug 2021 14:42:31 +0000"  >&lt;p&gt;Any idea how we can make some progress on this one, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;? I just made &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10742&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-10742&lt;/a&gt; to tackle the integration tests for the ResourceResolver-module.&lt;/p&gt;</comment>
                            <comment id="17401202" author="cziegeler" created="Wed, 18 Aug 2021 16:39:56 +0000"  >&lt;p&gt;To be honest, the PR is too large for me to grasp in total, there are changes to the configuration, how that configuration is evaluated alongside all the other changes around the querying - while in the end I expected just a change to construct the query . maybe others are able to eval the PR as-is&lt;/p&gt;</comment>
                            <comment id="17405151" author="henry kuijpers" created="Thu, 26 Aug 2021 11:12:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I just created a light version of the PR: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/49/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/49/files&lt;/a&gt; Would you be able to review this?&lt;/p&gt;</comment>
                            <comment id="17405154" author="cziegeler" created="Thu, 26 Aug 2021 11:19:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt; That&apos;s much simpler , thanks - I&apos;ve approved it&lt;/p&gt;</comment>
                            <comment id="17412495" author="rombert" created="Thu, 9 Sep 2021 10:18:27 +0000"  >&lt;p&gt;Thanks, I&apos;ve applied &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/49&lt;/a&gt; . Let&apos;s track any additional improvements in subsequent issues.&lt;/p&gt;</comment>
                            <comment id="17451844" author="nitigup" created="Wed, 1 Dec 2021 14:01:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; &#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt;&#160; - I came across this Jira while investigating an issue with vanity paths query at startup. I see that the fix here is to add a NOT isDescendent clause in the query.&lt;/p&gt;

&lt;p&gt;I think this would not help with avoiding the query hit limit. Because NOT isDescendent would not be fetched directly from index - so if it the NOT condition here even works - it would be done in memory by QueryEngine - which would mean the same amount of nodes would be read from the index as before.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;&#160; - Please correct me if I am wrong here.&#160;&lt;/p&gt;</comment>
                            <comment id="17451855" author="henry kuijpers" created="Wed, 1 Dec 2021 14:13:10 +0000"  >&lt;p&gt;Hi Gupta,&lt;/p&gt;

&lt;p&gt;This actually does fix the issue: the amount of nodes that is fetched from the index is drastically less than without that restriction.&lt;/p&gt;

&lt;p&gt;It works because the ntBaseLucene index has evaluatePathRestrictions=true and it defines an index for sling:vanityPath.&lt;/p&gt;</comment>
                            <comment id="17451871" author="nitigup" created="Wed, 1 Dec 2021 14:39:30 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;It works because the ntBaseLucene index has evaluatePathRestrictions=true&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;evaluatePathRestrictions does work for isDescendantNode, but I don&apos;t think it works for the NOT isDescendantNode.&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;the amount of nodes that is fetched from the index is drastically less than without that restriction.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;HI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;If the test was done on the final result set, then yes, this could have worked, but not because the index supported it, but most probably because the NOT condition was applied in the query engine.&#160;&lt;/p&gt;

&lt;p&gt;So something like&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(ISDESCENDANTNODE(&lt;span class=&quot;code-quote&quot;&gt;&apos;/content&apos;&lt;/span&gt;) OR ISDESCENDANTNODE(&lt;span class=&quot;code-quote&quot;&gt;&apos;/libs&apos;&lt;/span&gt;) OR ISDESCENDANTNODE(&lt;span class=&quot;code-quote&quot;&gt;&apos;/apps&apos;&lt;/span&gt;)) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;would work effectively with index.&lt;/p&gt;

&lt;p&gt;but&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(NOT isdescendantNode(\&lt;span class=&quot;code-quote&quot;&gt;&quot;/jcr:system\&quot;&lt;/span&gt;) AND not isdescendantnode(&lt;span class=&quot;code-quote&quot;&gt;&apos;/content/usergenerated&apos;&lt;/span&gt;)) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this might not.&#160;&lt;/p&gt;

&lt;p&gt;A good test case to verify this would be -&#160;&lt;/p&gt;

&lt;p&gt;Assuming query limit is set to 100000&lt;/p&gt;

&lt;p&gt;Create &amp;gt;100000 nodes where sling:vanityPath is not null. Out of these, keep 80% of nodes under /jcr:system.&lt;/p&gt;

&lt;p&gt;Then verify this query -&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT sling:vanityPath from nt:base WHERE sling:vanityPath IS NOT NULL &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This should hit the Index-Traversal limit.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Then try with&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT sling:vanityPath from nt:base WHERE sling:vanityPath IS NOT NULL AND NOT isdescendantNode(\&lt;span class=&quot;code-quote&quot;&gt;&quot;/jcr:system\&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;you should notice that the query would still hit the index traversal read limit - because the NOT operation is not directly served from the index.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I can do some additional testing on this in a couple of days, but I am almost certain that the NOT condition is not directly served from the index.&lt;/p&gt;</comment>
                            <comment id="17769571" author="henry kuijpers" created="Wed, 27 Sep 2023 12:06:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngupta&quot; class=&quot;user-hover&quot; rel=&quot;ngupta&quot;&gt;ngupta&lt;/a&gt; Did you do any of your additional testing yet?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13026342" name="with-path-restrictions.json" size="7964" author="Henry Kuijpers" created="Thu, 3 Jun 2021 11:30:15 +0000"/>
                            <attachment id="13026343" name="without-path-restrictions.json" size="1652" author="Henry Kuijpers" created="Thu, 3 Jun 2021 11:30:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rl40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10440] org.apache.sling.pipes.it.PipeModelIT.testListComponent fails from time to time</title>
                <link>https://issues.apache.org/jira/browse/SLING-10440</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;see &lt;a href=&quot;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-pipes/job/master/74/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-pipes/job/master/74/console&lt;/a&gt; for example&lt;/p&gt;</description>
                <environment></environment>
        <key id="13381289">SLING-10440</key>
            <summary>org.apache.sling.pipes.it.PipeModelIT.testListComponent fails from time to time</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 May 2021 13:03:11 +0000</created>
                <updated>Wed, 24 Nov 2021 16:26:17 +0000</updated>
                            <resolved>Thu, 14 Oct 2021 12:47:14 +0000</resolved>
                                    <version>Pipes 4.1.2</version>
                                    <fixVersion>Pipes 4.3.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13404445">SLING-10849</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0riow:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10439] Ignore &apos;jspc&apos; goal in Eclipse</title>
                <link>https://issues.apache.org/jira/browse/SLING-10439</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="13381285">SLING-10439</key>
            <summary>Ignore &apos;jspc&apos; goal in Eclipse</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 May 2021 12:30:32 +0000</created>
                <updated>Mon, 31 May 2021 12:31:33 +0000</updated>
                            <resolved>Mon, 31 May 2021 12:31:33 +0000</resolved>
                                                    <fixVersion>JSPC Maven Plugin 2.2.4</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17354435" author="rombert" created="Mon, 31 May 2021 12:31:33 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-jspc-maven-plugin/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-jspc-maven-plugin/pull/4&lt;/a&gt; .&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rio0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10434] ArrayIndexOutOfBoundsException in RegionConfiguration#handleMapConfig</title>
                <link>https://issues.apache.org/jira/browse/SLING-10434</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I get the following&#160;ArrayIndexOutOfBoundsException for a similar feature model as provided below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
28.05.2021 17:06:09.328 *ERROR* [FelixLogListener] org.apache.felix.configadmin Service [org.apache.felix.cm.ConfigurationAdmin,39, [org.osgi.service.cm.ConfigurationAdmin]] Unexpected problem delivering configuration event to [org.osgi.service.cm.SynchronousConfigurationListener, id=40, bundle=0/&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt; Bundle] (java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; length 1)
java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; length 1
	at org.apache.sling.feature.apiregions.impl.RegionConfiguration.handleMapConfig(RegionConfiguration.java:268)
	at org.apache.sling.feature.apiregions.impl.RegionConfiguration.updateConfiguration(RegionConfiguration.java:236)
	at org.apache.sling.feature.apiregions.impl.RegionConfiguration.setConfig(RegionConfiguration.java:471)
	at org.apache.sling.feature.apiregions.impl.Activator$3.invoke(Activator.java:269)
	at com.sun.proxy.$Proxy6.configurationEvent(Unknown Source)
	at org.apache.felix.cm.impl.ConfigurationManager$FireConfigurationEvent.sendEvent(ConfigurationManager.java:1720)
	at org.apache.felix.cm.impl.ConfigurationManager$FireConfigurationEvent.run(ConfigurationManager.java:1662)
	at org.apache.felix.cm.impl.ConfigurationManager.fireConfigurationEvent(ConfigurationManager.java:658)
	at org.apache.felix.cm.impl.ConfigurationManager.updated(ConfigurationManager.java:613)
	at org.apache.felix.cm.impl.ConfigurationImpl.update(ConfigurationImpl.java:467)
	at org.apache.felix.cm.impl.ConfigurationAdapter.update(ConfigurationAdapter.java:145)
	at org.apache.sling.installer.factories.configuration.impl.ConfigInstallTask.execute(ConfigInstallTask.java:78)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.doExecuteTasks(OsgiInstallerImpl.java:918)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.executeTasks(OsgiInstallerImpl.java:755)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.run(OsgiInstallerImpl.java:304)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834)
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Example Feature Model&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;com.exmaple:my-cloud-ready-feature-pkg:slingosgifeature:tiera:12345-SNAPSHOT&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;bundles&quot;&lt;/span&gt;:[
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;com.example:my-bundle:1.2.3-SNAPSHOT&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;start-order&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt;
    }
  ],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;api-regions:JSON|&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;:[
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;global&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;exports&quot;&lt;/span&gt;:[
        &lt;span class=&quot;code-quote&quot;&gt;&quot;com.example.my&quot;&lt;/span&gt;
      ]
    }
  ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13381035">SLING-10434</key>
            <summary>ArrayIndexOutOfBoundsException in RegionConfiguration#handleMapConfig</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 May 2021 18:46:24 +0000</created>
                <updated>Tue, 8 Jun 2021 09:01:43 +0000</updated>
                            <resolved>Wed, 2 Jun 2021 09:48:33 +0000</resolved>
                                    <version>Feature Model API Regions Runtime Fragment 1.1.6</version>
                                    <fixVersion>Feature Model API Regions Runtime Fragment 1.1.8</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17353520" author="diru" created="Fri, 28 May 2021 19:01:23 +0000"  >&lt;p&gt;I extended &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-apiregions/pull/15/commits/46e30a435d44779b9da4736d75416dfcaa4ec4dc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RegionConfigurationTest#testLoadBundleFeatureMapAndConfig&lt;/a&gt; to show the issue.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-apiregions/pull/15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fix&lt;/a&gt; is simple, but I am not sure if it is the expected behaviour. At least according to &lt;br/&gt;
 &lt;a href=&quot;https://github.com/Buuhuu/sling-org-apache-sling-installer-factory-feature/commit/a8f5a97fa8ea584539ad9675bd9fe4382a6207df&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-installer-factory-feature&lt;/a&gt; the case is possible.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rh4o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10433] Mutable content dependency removal by convert is ordering dependent</title>
                <link>https://issues.apache.org/jira/browse/SLING-10433</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Following &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8649&quot; title=&quot;Missing dependencies when installing computed content-packages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8649&quot;&gt;&lt;del&gt;SLING-8649&lt;/del&gt;&lt;/a&gt;, the converter is trying to remove dependencies on mutable content package from converted packages. That suffers from an ordering problem as it will only learn about mutable content package ids when it hits the package but removes the dependencies directly when it is converting a package. &lt;/p&gt;

&lt;p&gt;In other words, if a content package contains two sub packages, one mutable and one immutable and the immutable package has a dependency on the mutable one it will depend on the order they are found in the content package whether the dependency is removed or not.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13381020">SLING-10433</key>
            <summary>Mutable content dependency removal by convert is ordering dependent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 May 2021 16:07:34 +0000</created>
                <updated>Mon, 7 Jun 2021 09:09:11 +0000</updated>
                            <resolved>Mon, 31 May 2021 21:56:59 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.2</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.4</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17354664" author="karlpauls" created="Mon, 31 May 2021 21:57:00 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/85&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/85&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13252103">SLING-8649</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rh1c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10432] Regression: incorrect mapping result for aliased pages</title>
                <link>https://issues.apache.org/jira/browse/SLING-10432</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We inadvertently changed the way &lt;tt&gt;resourceResolver.map()&lt;/tt&gt; calls work for aliases. Assuming that we have a page at &lt;tt&gt;/foo/bar&lt;/tt&gt; with a &lt;tt&gt;sling:alias&lt;/tt&gt; property set to &lt;tt&gt;quux&lt;/tt&gt;, the following code should return &quot;/foo/quux&quot;, but returns &quot;/foo/bar&quot; instead&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
resourceResolver.map(&lt;span class=&quot;code-quote&quot;&gt;&quot;/foo/quux&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This was likely broken during the changes done for the 1.7.0 Resource Resolver release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13380989">SLING-10432</key>
            <summary>Regression: incorrect mapping result for aliased pages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 May 2021 13:35:17 +0000</created>
                <updated>Mon, 7 Jun 2021 09:37:13 +0000</updated>
                            <resolved>Fri, 28 May 2021 15:46:34 +0000</resolved>
                                    <version>Resource Resolver 1.7.0</version>
                                    <fixVersion>Resource Resolver 1.7.8</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17353416" author="rombert" created="Fri, 28 May 2021 15:46:34 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/45&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rgug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10431] ResourceMapperImpl tests no longer running with optimised alias resolution</title>
                <link>https://issues.apache.org/jira/browse/SLING-10431</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9535&quot; title=&quot;Improve performance of sling:alias Query when Optimize alias resolution is activated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9535&quot;&gt;&lt;del&gt;SLING-9535&lt;/del&gt;&lt;/a&gt; we changed the query that is issued for looking up aliases. That was not reflected in the stub resource resolver we use for tests, and starting at that point the tests were not running in the optimised alias resolution mode, even if requested. The only clue were messages logged in the console&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[main] ERROR org.apache.sling.resourceresolver.impl.mapping.MapEntries - Unexpected problem during initialization of optimize alias resolution. Therefore disabling optimize alias resolution. Please fix the problem.
java.lang.UnsupportedOperationException: Unsupported query: &apos;SELECT sling:alias FROM nt:base AS page WHERE (NOT ISDESCENDANTNODE(page,&quot;/jcr:system&quot;)) AND sling:alias IS NOT NULL &apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13380984">SLING-10431</key>
            <summary>ResourceMapperImpl tests no longer running with optimised alias resolution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 May 2021 13:08:25 +0000</created>
                <updated>Mon, 7 Jun 2021 09:37:15 +0000</updated>
                            <resolved>Fri, 28 May 2021 13:24:11 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.7.8</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17353351" author="rombert" created="Fri, 28 May 2021 13:24:11 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/44&lt;/a&gt; .&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rgtc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10427] Pipeline executed on error even though processError=false</title>
                <link>https://issues.apache.org/jira/browse/SLING-10427</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a transformer configured in a custom pipeline that can throw an exception in its &lt;tt&gt;init&lt;/tt&gt; method. Even though the pipeline is configured to not process errors, i.e. &lt;tt&gt;processError=false&lt;/tt&gt;, it&apos;s still executed and fails again resulting in the error page not shown.&lt;/p&gt;

&lt;p&gt;In addition to the &lt;tt&gt;processError&lt;/tt&gt; setting, &lt;tt&gt;ProcessorConfigurationImpl#match&lt;/tt&gt; checks if a &lt;tt&gt;javax.servlet.error.status_code&lt;/tt&gt; request attribute is set, which is not the case.&lt;/p&gt;

&lt;p&gt;I see that the &lt;tt&gt;SlingRequestProcessorImpl&lt;/tt&gt; catches the exception and sets a &lt;tt&gt;javax.servlet.error.servlet_name&lt;/tt&gt; request attribute before initiating the error handler, but not the one for status code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13380725">SLING-10427</key>
            <summary>Pipeline executed on error even though processError=false</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vsaar">Victor Saar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 May 2021 10:25:26 +0000</created>
                <updated>Thu, 27 May 2021 10:25:26 +0000</updated>
                                            <version>Rewriter 1.2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rf7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10426] Property name is not reported for configuration validation violations</title>
                <link>https://issues.apache.org/jira/browse/SLING-10426</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The output of warnings and errors for a configuration validation does currently not include the property name. Its just printing the PID&lt;/p&gt;</description>
                <environment></environment>
        <key id="13380722">SLING-10426</key>
            <summary>Property name is not reported for configuration validation violations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 May 2021 10:11:31 +0000</created>
                <updated>Mon, 31 May 2021 05:10:20 +0000</updated>
                            <resolved>Thu, 27 May 2021 10:24:22 +0000</resolved>
                                    <version>Feature Model API Regions Extension 1.2.8</version>
                                    <fixVersion>Feature Model API Regions Extension 1.2.10</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17352379" author="cziegeler" created="Thu, 27 May 2021 10:24:22 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/43955ae54634caa2c6fc6f81015e7af41a6ff719&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/43955ae54634caa2c6fc6f81015e7af41a6ff719&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rf74:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10425] JSON Convertion of streams can throw an NPE</title>
                <link>https://issues.apache.org/jira/browse/SLING-10425</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The getLength() call for streams has been changed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9726&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-9726&lt;/a&gt; to do a valueMap.get(key, Long.class) - that can cause an NPE if there is no value for the key.&lt;/p&gt;

&lt;p&gt;Looks like this:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.sling.servlets.get.impl.helpers.JsonRenderer Error in JsonRendererServlet: {}
java.lang.NullPointerException: null
	at org.apache.sling.servlets.get.impl.util.JsonObjectCreator.getLength(JsonObjectCreator.java:245) [org.apache.sling.servlets.get:2.1.42]
	at org.apache.sling.servlets.get.impl.util.JsonObjectCreator.createProperty(JsonObjectCreator.java:221) [org.apache.sling.servlets.get:2.1.42]
	at org.apache.sling.servlets.get.impl.util.JsonObjectCreator.create(JsonObjectCreator.java:95) [org.apache.sling.servlets.get:2.1.42]
	at org.apache.sling.servlets.get.impl.util.ResourceTraversor.adapt(ResourceTraversor.java:139) [org.apache.sling.servlets.get:2.1.42]
	at org.apache.sling.servlets.get.impl.util.ResourceTraversor.addChildren(ResourceTraversor.java:152) [org.apache.sling.servlets.get:2.1.42]
	at org.apache.sling.servlets.get.impl.util.ResourceTraversor.addChildren(ResourceTraversor.java:152) [org.apache.sling.servlets.get:2.1.42]
	at org.apache.sling.servlets.get.impl.util.ResourceTraversor.addChildren(ResourceTraversor.java:152) [org.apache.sling.servlets.get:2.1.42]
	at org.apache.sling.servlets.get.impl.util.ResourceTraversor.getJSONObject(ResourceTraversor.java:143) [org.apache.sling.servlets.get:2.1.42]
	at org.apache.sling.servlets.get.impl.helpers.JsonRenderer.render(JsonRenderer.java:119) [org.apache.sling.servlets.get:2.1.42]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="13380712">SLING-10425</key>
            <summary>JSON Convertion of streams can throw an NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 May 2021 09:50:59 +0000</created>
                <updated>Wed, 2 Jun 2021 10:46:02 +0000</updated>
                            <resolved>Thu, 27 May 2021 10:59:11 +0000</resolved>
                                                    <fixVersion>Servlets Get 2.1.44</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17352392" author="karlpauls" created="Thu, 27 May 2021 10:59:11 +0000"  >&lt;p&gt;done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-get/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-get/pull/8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13326870">SLING-9726</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rf4w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10415] JasyptStandardPBEStringCryptoService fails to start with: Password is not ASCII</title>
                <link>https://issues.apache.org/jira/browse/SLING-10415</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;JasyptStandardPBEStringCryptoService fails to start with Password is not ASCII. &lt;/p&gt;

&lt;p&gt;I tried changing the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-crypto/blob/892a242028bca2f1bd19d50f60515e10e1985553/src/main/java/org/apache/sling/commons/crypto/internal/FilePasswordProvider.java#L81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;File Password Provider&lt;/a&gt; from :&lt;/p&gt;

&lt;p&gt;{{try (final BufferedReader reader = Files.newBufferedReader(file.toPath(), StandardCharsets.UTF_8)) { }}&lt;/p&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;p&gt;{{try (final BufferedReader reader = Files.newBufferedReader(file.toPath(), StandardCharsets.US_ASCII)) { }}&lt;/p&gt;

&lt;p&gt;as well as verifying that the file and the password are ASCII: &lt;/p&gt;

&lt;p&gt;{{user@server:/opt/path/secrets# file -i passowrd-file&lt;br/&gt;
passowrd-file: text/plain; charset=us-ascii}}&lt;/p&gt;

&lt;p&gt;*&lt;b&gt;Stack Trace&lt;/b&gt;*&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;org.jasypt.exceptions.EncryptionInitializationException: java.security.spec.InvalidKeySpecException: Password is not ASCII at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.initialize(StandardPBEByteEncryptor.java:773) at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.initialize(StandardPBEStringEncryptor.java:566) at org.apache.sling.commons.crypto.jasypt.internal.JasyptStandardPBEStringCryptoService.setupEncryptor(JasyptStandardPBEStringCryptoService.java:128) at org.apache.sling.commons.crypto.jasypt.internal.JasyptStandardPBEStringCryptoService.activate(JasyptStandardPBEStringCryptoService.java:83) at&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;*&lt;b&gt;Environment&lt;/b&gt;*&lt;/p&gt;

&lt;p&gt;OS: Linux (Ubuntu &amp;amp; Amazon Linux 2)&lt;br/&gt;
JDK: Eclipse OpenJ9 11: Eclipse OpenJ9 VM(build openj9-0.24.0, JRE 11 Linux amd64-64-Bit Compressed References 20210120_910 (JIT enabled, AOT enabled) OpenJ9 - 345e1b09e OMR - 741e94ea8 JCL - 0a86953833 based on jdk-11.0.10+9)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13380120">SLING-10415</key>
            <summary>JasyptStandardPBEStringCryptoService fails to start with: Password is not ASCII</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="dklco">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 May 2021 13:25:50 +0000</created>
                <updated>Fri, 28 May 2021 19:21:19 +0000</updated>
                            <resolved>Thu, 27 May 2021 18:37:42 +0000</resolved>
                                    <version>Commons Crypto 1.0.0</version>
                                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17350567" author="olli" created="Mon, 24 May 2021 18:13:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dklco&quot; class=&quot;user-hover&quot; rel=&quot;dklco&quot;&gt;dklco&lt;/a&gt;, See&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-crypto/blob/master/src/test/java/org/apache/sling/commons/crypto/it/tests/jasypt/JasyptStandardPBEStringCryptoServiceIT.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JasyptStandardPBEStringCryptoServiceIT&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-crypto/blob/master/src/test/resources/password.ascii85&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;password.ascii85&lt;/a&gt;.&lt;br/&gt;
 UTF-8 is compatible with ASCII so your change cannot solve a potential issue.&lt;br/&gt;
 You have most probably an invalid character in your file, I guess &lt;tt&gt;\n&lt;/tt&gt;.&lt;br/&gt;
 Can you check and test with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-crypto/blob/master/src/test/resources/password.ascii85&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;password.ascii85&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17350570" author="olli" created="Mon, 24 May 2021 18:29:53 +0000"  >&lt;p&gt;Or you hit an issue in JDK:&#160;&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8236400&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8236400&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17351753" author="dklco" created="Wed, 26 May 2021 12:28:46 +0000"  >&lt;p&gt;After chatting with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; offline and verifying, the problem is indeed a newline vi was adding to the end of the file. I created PR to add a setting to optionally remove the final newline character from a file:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-crypto/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-crypto/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17351760" author="bdelacretaz" created="Wed, 26 May 2021 12:46:51 +0000"  >&lt;p&gt;IIUC that PR#1 does not check that it is actually a newline character that&apos;s being removed.&lt;/p&gt;

&lt;p&gt;In terms of defensive programming I think that should be checked.&lt;/p&gt;

&lt;p&gt;Or maybe what you actually want to do is to remove all extra whitespace characters, similar to what trim() does? It&apos;s easy to leave extra spaces, tabs and newlines when editing files and it might be better to cleanup everything.&lt;/p&gt;</comment>
                            <comment id="17352551" author="olli" created="Thu, 27 May 2021 15:09:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, As&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dklco&quot; class=&quot;user-hover&quot; rel=&quot;dklco&quot;&gt;dklco&lt;/a&gt;&#160;wrote we discussed on #sling...&lt;br/&gt;
 The&#160;&lt;tt&gt;FilePasswordProvider&lt;/tt&gt; must not tamper with the file content, it is just passing the content as character array to a consumer.&lt;br/&gt;
 I will add a new feature which can be enabled to just ignore the last character if it is a newline.&lt;br/&gt;
 If someone needs more magic (e.g. full trimming of white space) it should be in a different password provider.&lt;/p&gt;</comment>
                            <comment id="17352554" author="bdelacretaz" created="Thu, 27 May 2021 15:13:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;I will add a new feature which can be enabled to just ignore the last character if it is a newline.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok, works for me but I think the current code does not check that it&apos;s actually a newline, which might lead to hard-to-troubleshoot issues.&lt;/p&gt;</comment>
                            <comment id="17352689" author="olli" created="Thu, 27 May 2021 18:37:42 +0000"  >&lt;p&gt;Feature to ignore/fix the invalid newline character added in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10430&quot; title=&quot;Add fix for POSIX newline in password files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10430&quot;&gt;&lt;del&gt;SLING-10430&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13380813">SLING-10430</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rbhk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10414] NPE in CheckDeprecatedApi.java</title>
                <link>https://issues.apache.org/jira/browse/SLING-10414</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As reported in &lt;a href=&quot;https://github.com/adobe/aemanalyser-maven-plugin/issues/66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/adobe/aemanalyser-maven-plugin/issues/66&lt;/a&gt; an NPE might occur in  &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/blob/9949086f9d65af95e7763c12c5c04b33f442bee3/src/main/java/org/apache/sling/feature/extension/apiregions/analyser/CheckDeprecatedApi.java#L100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/blob/9949086f9d65af95e7763c12c5c04b33f442bee3/src/main/java/org/apache/sling/feature/extension/apiregions/analyser/CheckDeprecatedApi.java#L100&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13379989">SLING-10414</key>
            <summary>NPE in CheckDeprecatedApi.java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 May 2021 13:44:21 +0000</created>
                <updated>Thu, 27 May 2021 06:42:11 +0000</updated>
                            <resolved>Mon, 24 May 2021 07:29:18 +0000</resolved>
                                    <version>Feature Model API Regions Extension 1.2.4</version>
                                    <fixVersion>Feature Model API Regions Extension 1.2.8</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17350041" author="cziegeler" created="Sun, 23 May 2021 13:48:55 +0000"  >&lt;p&gt;Fixed  in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/f744d0624d0717d0e79516076ea9b95aa9da2012&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/f744d0624d0717d0e79516076ea9b95aa9da2012&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17350080" author="kwin" created="Sun, 23 May 2021 16:57:24 +0000"  >&lt;p&gt;With this fix there is a NumberFormatException. Details in &lt;a href=&quot;https://github.com/adobe/aemanalyser-maven-plugin/issues/68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/adobe/aemanalyser-maven-plugin/issues/68&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17350282" author="cziegeler" created="Mon, 24 May 2021 07:29:12 +0000"  >&lt;p&gt;Fixed now in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/a584d8a6d4d9cfc736aec3a5ce070a290d6e76d5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/a584d8a6d4d9cfc736aec3a5ce070a290d6e76d5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The code is iterating over imports - which use a version range - not a version. Therefore calling getPackageVersion results in the above error&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 22 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0raoo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10404] Log: &apos;No Configuration Admin API available&apos; when it is available</title>
                <link>https://issues.apache.org/jira/browse/SLING-10404</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The api region extension logs a message:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
No Configuration Admin API available
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;on info level. That is confusing as it seems to be the default. Maybe that log message should be moved somewhere else or the log level should be lower?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13379463">SLING-10404</key>
            <summary>Log: &apos;No Configuration Admin API available&apos; when it is available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidb">A. J. David Bosschaert</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 May 2021 08:51:34 +0000</created>
                <updated>Tue, 8 Jun 2021 09:01:43 +0000</updated>
                            <resolved>Wed, 2 Jun 2021 09:47:08 +0000</resolved>
                                    <version>Feature Model API Regions Runtime Fragment 1.1.6</version>
                                    <fixVersion>Feature Model API Regions Runtime Fragment 1.1.8</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17350406" author="davidb" created="Mon, 24 May 2021 12:37:00 +0000"  >&lt;p&gt;Due to an error in the code, that log message is written regardless of wether the API is found or not. Working on a fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r7g0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10403] Converter does not override existing package dependencies when it doesn&apos;t have any dependencies</title>
                <link>https://issues.apache.org/jira/browse/SLING-10403</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We used to not copy the dependencies from the properties of content packages. However, with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10205&quot; title=&quot;Support converting packages with custom properties and install hooks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10205&quot;&gt;&lt;del&gt;SLING-10205&lt;/del&gt;&lt;/a&gt; we started doing so. That would be fine, as we override the dependencies with the ones we want anyways - however, we don&apos;t do that in case we don&apos;t have any dependencies: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/VaultPackageUtils.java#L93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/VaultPackageUtils.java#L93&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We need to remove the dependencies key if we don&apos;t have any dependencies.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13379455">SLING-10403</key>
            <summary>Converter does not override existing package dependencies when it doesn&apos;t have any dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 May 2021 08:13:26 +0000</created>
                <updated>Mon, 24 May 2021 21:32:21 +0000</updated>
                            <resolved>Thu, 20 May 2021 08:37:31 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.0</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.2</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17348153" author="karlpauls" created="Thu, 20 May 2021 08:37:31 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/84&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13363518">SLING-10205</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r7e8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10402] MongoDB doesn&apos;t work anymore with Sling Starter</title>
                <link>https://issues.apache.org/jira/browse/SLING-10402</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When starting the Sling Starter 12 SNAPSHOT with, the Repository doesn&apos;t seem to work properly right now when I&apos;m using MongoDB. It starts up, but when I open &lt;a href=&quot;http://localhost:8080/bin/browser.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/bin/browser.html&lt;/a&gt;, I get an exception reading from the database (see below). I tried with mongodb 4.4.6 (the latest one) and 4.0.3. This issue seems to be connected to the version of org.mongodb:mongo-java-driver - it came in when it was upgraded from 3.8.2 to 3.12.7; if I downgrade to 3.10.2 it works, but with 3.11.3, 3.12.7 or 3.12.8 it doesn&apos;t.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.RuntimeException: failed to read block from backend, id 6e01a3001107903ee3971f74d9ba7e4bf6d512d47b1006b708f7ca295658fead@0
	at org.apache.jackrabbit.oak.spi.blob.AbstractBlobStore.load(AbstractBlobStore.java:509)
	at org.apache.jackrabbit.oak.spi.blob.AbstractBlobStore.readBlock(AbstractBlobStore.java:500)
	at org.apache.jackrabbit.oak.spi.blob.AbstractBlobStore.readBlob(AbstractBlobStore.java:486)
	at org.apache.jackrabbit.oak.spi.blob.BlobStoreInputStream.read(BlobStoreInputStream.java:45)
	... 96 more
Caused by: java.lang.UnsupportedOperationException: The BsonCodec can only encode to Bson
	at org.bson.codecs.BsonCodec.decode(BsonCodec.java:48)
	at org.bson.codecs.BsonCodec.decode(BsonCodec.java:33)
	at com.mongodb.operation.CommandResultArrayCodec.decode(CommandResultArrayCodec.java:52)
	at com.mongodb.operation.CommandResultDocumentCodec.readValue(CommandResultDocumentCodec.java:60)
	at org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:84)
	at org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:41)
	at org.bson.codecs.configuration.LazyCodec.decode(LazyCodec.java:47)
	at org.bson.codecs.BsonDocumentCodec.readValue(BsonDocumentCodec.java:101)
	at com.mongodb.operation.CommandResultDocumentCodec.readValue(CommandResultDocumentCodec.java:63)
	at org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:84)
	at org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:41)
	at com.mongodb.internal.connection.ReplyMessage.&amp;lt;init&amp;gt;(ReplyMessage.java:51)
	at com.mongodb.internal.connection.InternalStreamConnection.getCommandResult(InternalStreamConnection.java:413)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:309)
	at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:259)
	at com.mongodb.internal.connection.UsageTrackingInternalConnection.sendAndReceive(UsageTrackingInternalConnection.java:99)
	at com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.sendAndReceive(DefaultConnectionPool.java:450)
	at com.mongodb.internal.connection.CommandProtocolImpl.execute(CommandProtocolImpl.java:72)
	at com.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor.execute(DefaultServer.java:218)
	at com.mongodb.internal.connection.DefaultServerConnection.executeProtocol(DefaultServerConnection.java:269)
	at com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:131)
	at com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:123)
	at com.mongodb.operation.CommandOperationHelper.executeCommand(CommandOperationHelper.java:343)
	at com.mongodb.operation.CommandOperationHelper.executeCommand(CommandOperationHelper.java:334)
	at com.mongodb.operation.CommandOperationHelper.executeCommandWithConnection(CommandOperationHelper.java:220)
	at com.mongodb.operation.FindOperation$1.call(FindOperation.java:731)
	at com.mongodb.operation.FindOperation$1.call(FindOperation.java:725)
	at com.mongodb.operation.OperationHelper.withReadConnectionSource(OperationHelper.java:463)
	at com.mongodb.operation.FindOperation.execute(FindOperation.java:725)
	at com.mongodb.operation.FindOperation.execute(FindOperation.java:89)
	at com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:189)
	at com.mongodb.client.internal.MongoIterableImpl.execute(MongoIterableImpl.java:143)
	at com.mongodb.client.internal.MongoIterableImpl.iterator(MongoIterableImpl.java:92)
	at com.mongodb.client.internal.MongoIterableImpl.forEach(MongoIterableImpl.java:121)
	at com.mongodb.client.internal.MongoIterableImpl.into(MongoIterableImpl.java:133)
	at org.apache.jackrabbit.oak.plugins.document.mongo.MongoBlobStore.getBlob(MongoBlobStore.java:234)
	at org.apache.jackrabbit.oak.plugins.document.mongo.MongoBlobStore.readBlockFromBackend(MongoBlobStore.java:153)
	at org.apache.jackrabbit.oak.spi.blob.AbstractBlobStore.load(AbstractBlobStore.java:507)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&amp;nbsp;Sling-Starter 12-SNAPSHOT (commit a6b94beb7b) with JDK 11 on MacOS</environment>
        <key id="13379452">SLING-10402</key>
            <summary>MongoDB doesn&apos;t work anymore with Sling Starter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="hanspeterstoerr">Hans-Peter Stoerr</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 May 2021 07:48:07 +0000</created>
                <updated>Fri, 18 Mar 2022 15:05:04 +0000</updated>
                            <resolved>Thu, 20 May 2021 11:04:38 +0000</resolved>
                                    <version>Starter 12</version>
                                    <fixVersion>Starter 12</fixVersion>
                                    <component>Starter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="13200">3h 40m</timespent>
                                <comments>
                            <comment id="17348150" author="rombert" created="Thu, 20 May 2021 08:33:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hanspeterstoerr&quot; class=&quot;user-hover&quot; rel=&quot;hanspeterstoerr&quot;&gt;hanspeterstoerr&lt;/a&gt; - according to &lt;a href=&quot;https://jackrabbit.apache.org/oak/docs/nodestore/document/mongo-document-store.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/oak/docs/nodestore/document/mongo-document-store.html&lt;/a&gt; the version of Oak we use (1.38.0) supports MongoDB 4.0.x . Also according to &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/651f1b96634268ea7285231cc85f40eda46fa01e/oak-parent/pom.xml#L57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/651f1b96634268ea7285231cc85f40eda46fa01e/oak-parent/pom.xml#L57&lt;/a&gt; , the version of the MongoDB driver we should use is 3.8.2 .&lt;/p&gt;

&lt;p&gt;Looks like in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10143&quot; title=&quot;bundles referenced in sling starter are out of date&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10143&quot;&gt;&lt;del&gt;SLING-10143&lt;/del&gt;&lt;/a&gt; we were too eager to upgrade the MongoDB driver ( /cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reusr1&quot; class=&quot;user-hover&quot; rel=&quot;reusr1&quot;&gt;reusr1&lt;/a&gt; ). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hanspeterstoerr&quot; class=&quot;user-hover&quot; rel=&quot;hanspeterstoerr&quot;&gt;hanspeterstoerr&lt;/a&gt; - if you want to, you can file a PR downgrading the MongoDB driver to 3.8.2 since you did all the hard work discovering the problem. Otherwise I can file one myself.&lt;/p&gt;</comment>
                            <comment id="17348160" author="bdelacretaz" created="Thu, 20 May 2021 08:50:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;Looks like in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10143&quot; title=&quot;bundles referenced in sling starter are out of date&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10143&quot;&gt;&lt;del&gt;SLING-10143&lt;/del&gt;&lt;/a&gt; we were too eager to upgrade the MongoDB driver&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I have added a comment in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter/commit/94432778258a76f9eba9aa2bf41a95ff84eb3c46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 9443277&lt;/a&gt; to remind us to be careful about that.&lt;/p&gt;</comment>
                            <comment id="17348161" author="hanspeterstoerr" created="Thu, 20 May 2021 08:53:03 +0000"  >&lt;p&gt;Thanks! Yes, I&apos;ll create a PR.&lt;/p&gt;</comment>
                            <comment id="17348167" author="rombert" created="Thu, 20 May 2021 08:56:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt; - is this something that could be captured by &lt;a href=&quot;https://github.com/apache/sling-whiteboard/tree/master/org-apache-sling-build-version-rules&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-whiteboard/tree/master/org-apache-sling-build-version-rules&lt;/a&gt;, maybe by not proposing updates to the MongoDB driver version?  I don&apos;t think we can express rules like &apos;use the version defined in the parent pom of the respective Oak version&apos;.&lt;/p&gt;</comment>
                            <comment id="17348198" author="hanspeterstoerr" created="Thu, 20 May 2021 10:05:45 +0000"  >&lt;p&gt;There is now a PR to downgrade the mongo-java-driver. It worked for me with Mongo 4.0.24. Thank you!&lt;/p&gt;</comment>
                            <comment id="17348296" author="rombert" created="Thu, 20 May 2021 11:04:38 +0000"  >&lt;p&gt;PR merged, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hanspeterstoerr&quot; class=&quot;user-hover&quot; rel=&quot;hanspeterstoerr&quot;&gt;hanspeterstoerr&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17348648" author="enorman" created="Thu, 20 May 2021 17:28:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&#160;I suppose we could hardcode a specific version for mongo-java-driver in the&#160;maven-version-rules.xml of org-apache-sling-build-version-rules if oak requires a specific version of the mongo-java-driver and no other version is expected to work, but is that really the case here?&lt;/p&gt;

&lt;p&gt;I&apos;m no expert on the mongo-java-driver, but can someone explain to me what the root of the problem is here?&#160; It seems to me that the version in the oak parent pom should be just the minimum version, so newer compatible versions of mongo-java-driver should reasonably be expected to work in the runtime as well.&#160;&#160;&lt;/p&gt;

&lt;p&gt;And from what I have just read on &lt;a href=&quot;https://docs.mongodb.com/drivers/java/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.mongodb.com/drivers/java/&lt;/a&gt;&#160;it says that the mongo-java-driver version 3.11 to 4.2 are supposed to be compatible with MongoDB 4.0.x and all of our supported JVM versions.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Maybe&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-9357&quot; title=&quot;Update to MongoDB Java driver 3.12&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-9357&quot;&gt;&lt;del&gt;OAK-9357&lt;/del&gt;&lt;/a&gt; resolves the problems?&#160; Has anyone tried with a version of oak that has the pending changes scheduled for the future 1.40.0 release?&lt;/p&gt;</comment>
                            <comment id="17349627" author="olli" created="Sat, 22 May 2021 07:31:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hanspeterstoerr&quot; class=&quot;user-hover&quot; rel=&quot;hanspeterstoerr&quot;&gt;hanspeterstoerr&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, A similar problem was reported some time back with Sling on Karaf but without details. The integration tests are not&#160;disclosing the issue and Starter Content is working fine. Do you know what exactly&#160;is triggering the issue?&lt;/p&gt;</comment>
                            <comment id="17350947" author="rombert" created="Tue, 25 May 2021 10:14:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - I don&apos;t know the exact root cause, sorry. The problem seems to be related to reading blobs, but I don&apos;t have any more context.&lt;/p&gt;</comment>
                            <comment id="17351072" author="bdelacretaz" created="Tue, 25 May 2021 13:42:31 +0000"  >&lt;p&gt;I have created &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter/pull/24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter/pull/24&lt;/a&gt; to run the &lt;tt&gt;SmokeIT&lt;/tt&gt; on both the tar and mongo setups.&lt;/p&gt;

&lt;p&gt;With that the build requires Docker services so I&apos;m not sure if we want that - but some of our modules already require Docker to build.&lt;/p&gt;

&lt;p&gt;See the notes in the PR, there&apos;s some TODO left in pom.xml&lt;/p&gt;</comment>
                            <comment id="17351105" author="rombert" created="Tue, 25 May 2021 14:42:35 +0000"  >&lt;p&gt;That&apos;s a very good approach IMO. If you&apos;re concerned about possible breakage/slowdowns we could enable the MongoDB checks only on Jenkins by making them enabled only when the &lt;tt&gt;ci&lt;/tt&gt; profile is active.&lt;/p&gt;</comment>
                            <comment id="17351645" author="olli" created="Wed, 26 May 2021 08:50:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, Which test is triggering the problem with the MongoDB driver? (I&apos;m currently preparing a test for &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-karaf-integration-tests/blob/master/src/test/java/org/apache/sling/karaf/tests/bootstrap/AbstractSlingQuickstartOakTestSupport.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AbstractSlingQuickstartOakTestSupport&lt;/a&gt;&#160;which calls Composum&apos;s Browser).&lt;/p&gt;</comment>
                            <comment id="17351736" author="bdelacretaz" created="Wed, 26 May 2021 11:54:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Which test is triggering the problem with the MongoDB driver?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I haven&apos;t checked, I suppose a bad combination of Mongo and driver version would prevent Sling from starting?&lt;/p&gt;

&lt;p&gt;If you want to test that you might add a pom variable to use a different Mongo container image version, which I suppose would expose the problem.&lt;/p&gt;</comment>
                            <comment id="17351744" author="bdelacretaz" created="Wed, 26 May 2021 12:07:01 +0000"  >&lt;p&gt;I have now merged PR#24, so the Starter smoke tests will now run for both the tar and mongo feature models.&lt;/p&gt;</comment>
                            <comment id="17351961" author="hanspeterstoerr" created="Wed, 26 May 2021 17:23:14 +0000"  >&lt;p&gt;The problem appeared when the version of the mongo-java-driver was set to 3.12.7. But the IT doesn&apos;t fail when I set that version in src/main/features/oak/persistence/oak_persistence_mongods.json , so it doesn&apos;t yet check for the problem. The reason is that the SmokeIT just verifies that all bundles are activated - which they are. I noticed the problem originally when I accessed &lt;a href=&quot;http://localhost:8080/bin/browser.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/bin/browser.html&lt;/a&gt; - possibly the bug happens only when it reads something from a resources jcr:data , or something - the bundle list doesn&apos;t do that.&lt;/p&gt;</comment>
                            <comment id="17351990" author="enorman" created="Wed, 26 May 2021 18:05:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&#160;The build now fails if docker is not installed.&#160; For people that are not using docker for other purposes, I don&apos;t think that is it reasonable to require them to install docker just to build the starter project.&#160; So I think it is best make the oak-mongo launch and testing optional.&lt;/p&gt;</comment>
                            <comment id="17352205" author="enorman" created="Thu, 27 May 2021 00:13:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&#160;I&apos;ve prepared &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter/pull/25&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR #25&lt;/a&gt; for your review and consideration.&#160; That PR also requires the changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10423&quot; title=&quot;Add support to skip a launch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10423&quot;&gt;&lt;del&gt;SLING-10423&lt;/del&gt;&lt;/a&gt; to work.&lt;/p&gt;</comment>
                            <comment id="17352304" author="hanspeterstoerr" created="Thu, 27 May 2021 07:12:31 +0000"  >&lt;p&gt;I had a look: currently the SmokeIT is unable to detect the problem when I update org.mongodb:mongo-java-driver to 3.12.7 again. So I had a look around for an easy check what does break: in /content/slingshot/users/slingshot1/travel.html 3 of the 4 images break (strange that the 4th one works, mind you). So I suggest adding the following to the SmokeIT - then it really breaks when the mongo driver is wrongly updated. To be extra sure, one could also check for a couple of URLs (among those the 4 images) that they return HTTP 200 - when it breaks, you get a 500. Wdyt?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void verifyReadableImage() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( CloseableHttpClient client = newClient() ) {
            HttpGet get = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpGet(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:&quot;&lt;/span&gt; + slingHttpPort + &lt;span class=&quot;code-quote&quot;&gt;&quot;/content/slingshot/users/slingshot1/travel/home/images/home.jpg&quot;&lt;/span&gt;);
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (CloseableHttpResponse response = client.execute(get, httpClientContext)) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( response.getStatusLine().getStatusCode() != 200 ) {
                    fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected status line &quot;&lt;/span&gt; + response.getStatusLine());
                }
                ByteArrayOutputStream bout = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
                response.getEntity().writeTo(bout);
                assertThat(&lt;span class=&quot;code-quote&quot;&gt;&quot;Expected 1170194 bytes &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; image, but got &quot;&lt;/span&gt; + bout.size(), bout.size(), equalTo(1170194));
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17352315" author="jsedding" created="Thu, 27 May 2021 07:47:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; strange that the 4th one works, mind you &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oak inlines smaller blobs in its NodeStore and doesn&apos;t store them in the BlobStore. Presumably the failure is related to the BlobStore, so if the 4th image is small enough it may not trigger the same code-paths.&lt;/p&gt;</comment>
                            <comment id="17352318" author="bdelacretaz" created="Thu, 27 May 2021 07:50:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;...one could also check for a couple of URLs (among those the 4 images) that they return HTTP 200..&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I like the idea but I would prefer that we do not hardcode those URLs. We might define a list of URLs to check for 200 status as a pom property, maybe just a comma-separated list of paths to check.&lt;/p&gt;</comment>
                            <comment id="17352319" author="bdelacretaz" created="Thu, 27 May 2021 07:55:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;...I&apos;ve prepared PR #25 for your review and consideration.  That PR also requires the changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10423&quot; title=&quot;Add support to skip a launch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10423&quot;&gt;&lt;del&gt;SLING-10423&lt;/del&gt;&lt;/a&gt; to work.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Detecting Docker is a great idea but the method used (checking for the existence of platform-specific paths IIUC) looks fragile to me. I think the right way to check for Docker is to try to connect to it and detect failure, but I haven&apos;t found a Maven plugin that does that.&lt;/p&gt;

&lt;p&gt;As Robert mentioned above, we could enable the MongoDB checks only on Jenkins by making them enabled only when the &lt;tt&gt;ci&lt;/tt&gt; profile is active.&lt;/p&gt;

&lt;p&gt;I think that would be more robust and simpler - moving the launch config + mongo container startup to that &lt;tt&gt;ci&lt;/tt&gt; profile, disabled by default, should work, and we can then tweak the &lt;tt&gt;SmokeIT&lt;/tt&gt; parametrization to cope with a variable number of instances to test. Maybe just passing it a single system property with a list of instance ports to test.&lt;/p&gt;

&lt;p&gt;I won&apos;t have time to work on this before tomorrow or Monday - worst case feel free to revert commit 66c0990e4 until we fix this.&lt;/p&gt;
</comment>
                            <comment id="17352892" author="enorman" created="Thu, 27 May 2021 23:54:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&#160;Ok.&#160; I considered just setting the docker.skip=false property in the &quot;ci&quot; profile as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; suggested, but I was thinking that people would forget it was there and accidentally commit breaking changes because they didn&apos;t run the build locally with the &quot;ci&quot; profile enabled to test the oak_mongo configuration.&lt;/p&gt;

&lt;p&gt;I guess I was looking for a middle ground, where it automatically works for the (ubuntu) &quot;ci&quot; builds and also works automatically for some developer environments as well.&lt;/p&gt;

&lt;p&gt;If there is some better way to determine if docker is available I&apos;m all for using that.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17353227" author="bdelacretaz" created="Fri, 28 May 2021 10:33:42 +0000"  >&lt;p&gt;You&apos;re right that in the end it&apos;s only the way we set &lt;tt&gt;docker.skip&lt;/tt&gt; that&apos;s debatable.&lt;/p&gt;

&lt;p&gt;For now I have committed (bd042fb) changes based on your PR (with credits) that use &lt;tt&gt;docker.skip&lt;/tt&gt; more or less how you did in your PR, setting it in the &lt;tt&gt;ci&lt;/tt&gt; profile.&lt;/p&gt;

&lt;p&gt;With a warning &quot;docker.skip is true, Docker-based tests will not be executed&quot; to remind poeple.&lt;/p&gt;

&lt;p&gt;I think that&apos;s an improvement, and detecting Docker might be worth a separate issue if we think we need it? We have other builds that use Docker and I think it&apos;s good to have a pattern for that.&lt;/p&gt;</comment>
                            <comment id="17357662" author="enorman" created="Fri, 4 Jun 2021 22:50:37 +0000"  >&lt;p&gt;FYI: I tried the now released oak 1.40.0 with&#160;mongo-java-driver:3.12.8 and it seems to work correctly again, so it looks like the fix for&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-9357&quot; title=&quot;Update to MongoDB Java driver 3.12&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-9357&quot;&gt;&lt;del&gt;OAK-9357&lt;/del&gt;&lt;/a&gt;&#160;does resolve the problem.&lt;/p&gt;

&lt;p&gt;I created&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10459&quot; title=&quot;Update starter to use Oak 1.40.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10459&quot;&gt;&lt;del&gt;SLING-10459&lt;/del&gt;&lt;/a&gt; to track updating the starter to 1.40.0&lt;/p&gt;</comment>
                            <comment id="17359085" author="bdelacretaz" created="Tue, 8 Jun 2021 07:02:33 +0000"  >&lt;p&gt;Thank you for this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt;! I have added a few more paths to test in SmokeIT (it&apos;s cheap and might help discover things) and changed the setup a bit, in a way that I think makes it simpler, commit &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter/commit/d55945f7e3a704405678f26ab0b694a6d4a9de43&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter/commit/d55945f7e3a704405678f26ab0b694a6d4a9de43&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13391538">SLING-10656</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r7dk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10395] Converter fails on serviceuser mappings without a service name</title>
                <link>https://issues.apache.org/jira/browse/SLING-10395</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The converter fails when it encounters a serviceusermapping config with a missing service name: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Unable to convert content-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; [&amp;lt;snip&amp;gt;]: serviceName is required
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It should log an error and continue instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13379280">SLING-10395</key>
            <summary>Converter fails on serviceuser mappings without a service name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 May 2021 11:44:57 +0000</created>
                <updated>Mon, 24 May 2021 21:32:20 +0000</updated>
                            <resolved>Wed, 19 May 2021 13:29:35 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.0</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.2</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r6bc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10388] RepoPath.getParent returns null for top-level paths</title>
                <link>https://issues.apache.org/jira/browse/SLING-10388</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, as discussed it seem there exists one (or potentially many) bugs in the &lt;tt&gt;RepoPath&lt;/tt&gt; class as &lt;tt&gt;new RepoPath(&quot;/apps&quot;).getParent()&lt;/tt&gt; returns null, which IMHO is unexpected.&lt;/p&gt;

&lt;p&gt;more things i noticed while trying to understand what&apos;s going on:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;toString for a repository path is &quot;/&quot; and not &quot;&quot;&lt;/li&gt;
	&lt;li&gt;equals method ignores isRepositoryPath field&lt;/li&gt;
	&lt;li&gt;getSegmentCount is not used at all&lt;/li&gt;
	&lt;li&gt;however, getSegments does not exist (but would be better in &lt;tt&gt;DefaultAclManager.getCreatePath&lt;/tt&gt; than the split/substring on the toString method)&lt;/li&gt;
	&lt;li&gt;startswith(null(: comment states that the root path is null which is not what the code does in the constructor.... startswith(null) should IMO return false&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13379099">SLING-10388</key>
            <summary>RepoPath.getParent returns null for top-level paths</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 May 2021 16:38:19 +0000</created>
                <updated>Mon, 24 May 2021 21:32:19 +0000</updated>
                            <resolved>Wed, 19 May 2021 06:35:02 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.0</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.2</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                                                <inwardlinks description="Discovered while testing">
                                        <issuelink>
            <issuekey id="13379033">SLING-10386</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r574:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10387] JcrModifiableValueMap#remove does not allow jcr:mixinTypes to be removed</title>
                <link>https://issues.apache.org/jira/browse/SLING-10387</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In our codebase, at some point, we decide to either re-write the jcr:mixinTypes property, or remove the jcr:mixinTypes property.&lt;/p&gt;

&lt;p&gt;When calling JcrModifiableValueMap#remove, we however get an exception when trying to remove the property (because we deem it to be empty when our desired mixin is removed). Calling `put` with new values works fine, however.&lt;/p&gt;

&lt;p&gt;We should update the remove-method to reflect the behavior of the put-method: Support managing jcr:mixinTypes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13379080">SLING-10387</key>
            <summary>JcrModifiableValueMap#remove does not allow jcr:mixinTypes to be removed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Henry Kuijpers">Henry Kuijpers</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 May 2021 14:58:57 +0000</created>
                <updated>Tue, 18 May 2021 14:58:57 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r52w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10386] Converter needs to issue create path statements for repoinit path without node type</title>
                <link>https://issues.apache.org/jira/browse/SLING-10386</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When an ACL targets a path, the converter will only issue create path statements for the path if it can determine the node type - otherwise, the statement is omitted. Instead, the converter should issue a create path statement without type - hence, passing the problem to the runtime where the default type can be used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13379033">SLING-10386</key>
            <summary>Converter needs to issue create path statements for repoinit path without node type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 May 2021 12:36:18 +0000</created>
                <updated>Mon, 24 May 2021 21:32:19 +0000</updated>
                            <resolved>Wed, 19 May 2021 06:35:34 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.0</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.2</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17346916" author="karlpauls" created="Tue, 18 May 2021 13:58:36 +0000"  >&lt;p&gt;Done by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;Angela&lt;/a&gt; in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/5f8cf146100d01ab1e70e9316ab1fba95469ad9e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/5f8cf146100d01ab1e70e9316ab1fba95469ad9e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17346999" author="anchela" created="Tue, 18 May 2021 15:21:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, as discussed we missed another special case: the root path (and probably also the repository-level path, which for JCR ac-setup is indicated by &apos;null&apos;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                            <outwardlinks description="Testing discovered">
                                        <issuelink>
            <issuekey id="13379099">SLING-10388</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r4sg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10385] JavaDocs cannot be generated with Java 11</title>
                <link>https://issues.apache.org/jira/browse/SLING-10385</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The JavaDocs cannot be correctly generated with Java 11 for a number of classes from the &lt;tt&gt;org.apache.sling.graphql.core&lt;/tt&gt; bundle.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13378983">SLING-10385</key>
            <summary>JavaDocs cannot be generated with Java 11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 May 2021 09:32:02 +0000</created>
                <updated>Tue, 25 May 2021 11:48:43 +0000</updated>
                            <resolved>Tue, 18 May 2021 13:04:39 +0000</resolved>
                                                    <fixVersion>GraphQL Core 0.0.10</fixVersion>
                                    <component>GraphQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17346883" author="radu.cotescu" created="Tue, 18 May 2021 13:04:39 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-graphql-core/commit/33ccb29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 33ccb29&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r4hc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10382] Wrong namespace url for prefix &quot;sling&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-10382</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The namespace URI registered in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/e0e8a4d1e664919d1232125bf942a7ac23bcc984/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/JcrNamespaceRegistry.java#L50&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/e0e8a4d1e664919d1232125bf942a7ac23bcc984/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/JcrNamespaceRegistry.java#L50&lt;/a&gt;&#160;is wrong leading to wrong XML nodetype declarations in the generated docview files extracted from Sling-Initial-Content.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13378773">SLING-10382</key>
            <summary>Wrong namespace url for prefix &quot;sling&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 May 2021 10:05:42 +0000</created>
                <updated>Mon, 24 May 2021 21:32:20 +0000</updated>
                            <resolved>Mon, 17 May 2021 10:28:13 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.0</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.2</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17346054" author="kwin" created="Mon, 17 May 2021 10:28:13 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/0e95a5d4bb5975f4163eaa21371dad406f501aa9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/0e95a5d4bb5975f4163eaa21371dad406f501aa9&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13366336">SLING-10243</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r36o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10380] Headers support not working</title>
                <link>https://issues.apache.org/jira/browse/SLING-10380</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="13378604">SLING-10380</key>
            <summary>Headers support not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 May 2021 14:14:23 +0000</created>
                <updated>Sun, 12 Dec 2021 21:57:41 +0000</updated>
                            <resolved>Sun, 16 May 2021 17:19:44 +0000</resolved>
                                                    <fixVersion>Commons Messaging Mail 2.0.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13378637">SLING-10381</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r254:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10372] OSGi Installer: NPE during package installation during startup</title>
                <link>https://issues.apache.org/jira/browse/SLING-10372</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;(As requested in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10362&quot; title=&quot;Sling Starter: trouble when installing packages containing install hooks with OSGi installer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10362&quot;&gt;&lt;del&gt;SLING-10362&lt;/del&gt;&lt;/a&gt;) When starting a Sling Starter 12 with a feature archive containing a couple of packages and having a couple of packages installed with the&#160;Sling&#160;&lt;a href=&quot;https://sling.apache.org/documentation/bundles/file-installer-provider.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fileinstaller provider&lt;/a&gt;, I often get a NPE, stacktrace is appended. This stops the installation of the package when this happens. It isn&apos;t about that particular package, though - if I take out other packages from the automatic installation or put it into the fileinstall directory it later, it installs happily.&lt;/p&gt;

&lt;p&gt;It&apos;s a rather difficult to give detailed steps to reproduce that, but I have guess what&apos;s happening. I do have a particular setting where it always happens on my machine, but that might be sensitive to the speed of my machine and whatnot. Basically, I&apos;m starting the feature launcher with a FAR containg several packages of ours, and also give the arguments&lt;/p&gt;

&lt;p&gt;-Dsling.fileinstall.dir=launcher/fileinstall -Dfelix.startlevel.bundle=30&lt;/p&gt;

&lt;p&gt;to the launcher, having placed several packages in the fileinstall directory. I guess the NPE happens only when enough packages are placed there, and it happens only on the first startup (i.e., there was no launcher directory yet).&lt;/p&gt;

&lt;p&gt;I had a look around with the debugger: it seems the SlingRepository was stopped but not yet started again for a restart just before the PackageTransformer is trying to process the package, probably due to some kind of configuration change. It tries to access the repository via a reference of the OakSlingRepository whose manager already has been stopped so that getRepository() returns null. Hence the NPE. Probably the org.apache.sling.installer.factory.packages.impl.PackageTransformer should somehow handle such temporary failures that don&apos;t have anything to do with the package? Another way to solve seems to be to set the start level of the&#160;org.apache.sling.installer.factory.packages bundle to 21. Probably because when reaching the start level 20 so much happens at once, so that transition is not a good time to install packages.&lt;/p&gt;

&lt;p&gt;Here is the stacktrace that marks the error. I&apos;ll attach a logfile for some more context. BTW: Interesting might be also the exceptions &quot;Can&apos;t create child on a synthetic root&quot; in the log file, which I receive regularily during startup, but that&apos;s probably not related to this problem, as it also happens when things work properly.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
11.05.2021 13:27:49.462 *ERROR* [OsgiInstallerImpl] org.apache.sling.installer.factory.packages.impl.PackageTransformer Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing install content &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; task* of TaskResource(url=fileinstallff43091e0ee8ac91416c79636bdce5f4:/Users/hps/dev/composum/composum-launch/feature/composumstarter/target/launcher/fileinstall/99/composum-site-app-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-1.0.0-SNAPSHOT.zip, entity=content-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;:tenants/ist:composum-site-app-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;, state=INSTALL, attributes=[org.apache.sling.installer.api.tasks.ResourceTransformer=:27:23:1243:, &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-id=tenants/ist:composum-site-app-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;:1.0.0-SNAPSHOT, Bundle-Version=1.0.0.SNAPSHOT], digest=1620718306467) due to &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, no retry.
 java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
         at org.apache.sling.jcr.oak.server.internal.OakSlingRepository$2.run(OakSlingRepository.java:99) [org.apache.sling.jcr.oak.server:1.2.10]
         at org.apache.sling.jcr.oak.server.internal.OakSlingRepository$2.run(OakSlingRepository.java:96) [org.apache.sling.jcr.oak.server:1.2.10]
         at java.base/java.security.AccessController.doPrivileged(Native Method)
         at java.base/javax.security.auth.Subject.doAsPrivileged(Subject.java:550)
         at org.apache.sling.jcr.oak.server.internal.OakSlingRepository.createServiceSession(OakSlingRepository.java:96) [org.apache.sling.jcr.oak.server:1.2.10]
         at org.apache.sling.jcr.base.AbstractSlingRepository2.createServiceSession(AbstractSlingRepository2.java:166) [org.apache.sling.jcr.base:3.1.6]
         at org.apache.sling.jcr.base.AbstractSlingRepository2.loginService(AbstractSlingRepository2.java:383) [org.apache.sling.jcr.base:3.1.6]
         at org.apache.sling.installer.factory.packages.impl.PackageTransformer$AbstractPackageInstallTask.execute(PackageTransformer.java:263) [org.apache.sling.installer. factory.packages:1.0.4]
         at org.apache.sling.installer.core.impl.OsgiInstallerImpl.doExecuteTasks(OsgiInstallerImpl.java:918) [org.apache.sling.installer.core:3.11.4]
         at org.apache.sling.installer.core.impl.OsgiInstallerImpl.executeTasks(OsgiInstallerImpl.java:755) [org.apache.sling.installer.core:3.11.4]
         at org.apache.sling.installer.core.impl.OsgiInstallerImpl.run(OsgiInstallerImpl.java:304) [org.apache.sling.installer.core:3.11.4]
         at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m not sure whether this is a a Minor or Major - it breaks things in the startup, but I&apos;ve found a way to modify the starter to avoid it, see above.&lt;/p&gt;</description>
                <environment>&amp;nbsp;Sling-Starter 12-SNAPSHOT (commit 0e6a8e41) with JDK 11 on MacOS</environment>
        <key id="13377845">SLING-10372</key>
            <summary>OSGi Installer: NPE during package installation during startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hanspeterstoerr">Hans-Peter Stoerr</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 May 2021 11:43:19 +0000</created>
                <updated>Tue, 8 Mar 2022 15:11:16 +0000</updated>
                                            <version>Starter 12</version>
                                    <fixVersion>Installer Packages Factory 1.0.6</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17342618" author="kwin" created="Tue, 11 May 2021 14:58:22 +0000"  >&lt;p&gt;Indeed this seems to be a race condition. The following seems to happen in your case in the following order:&lt;br/&gt;
1. &lt;tt&gt;PackageTransformer&lt;/tt&gt; is started (once SlingRepository is up)&lt;br/&gt;
2. &lt;tt&gt;PackageTransfomer.createTask()&lt;/tt&gt; is called from OSGi Installer, returned &lt;tt&gt;InstalledPackageTask&lt;/tt&gt; is put into queue&lt;br/&gt;
3. &lt;tt&gt;SlingRepository&lt;/tt&gt; is stopped (after stopping component &lt;tt&gt;PackageTransformer&lt;/tt&gt;)&lt;br/&gt;
4. &lt;tt&gt;OsgiInstallerImpl.executeTasks&lt;/tt&gt; is calling &lt;tt&gt;execute&lt;/tt&gt; on the &lt;tt&gt;InstallPackageTask&lt;/tt&gt; reference (which has been returned in 3) in dedicated thread.&lt;/p&gt;

&lt;p&gt;I don&apos;t yet have a good idea how to solve that yet. IMHO the OSGiInstallerImpl should never call tasks returned from deactivated &lt;tt&gt;InstallTaskFactory&lt;/tt&gt; s.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Do you have a suggestion how to prevent executing tasks of deactivated &lt;tt&gt;InstallTaskFactories&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="17342651" author="kwin" created="Tue, 11 May 2021 15:20:05 +0000"  >&lt;p&gt;Alternatively all inner classes of &lt;tt&gt;PackageTransformer&lt;/tt&gt; should use &lt;a href=&quot;https://docs.osgi.org/javadoc/r6/core/org/osgi/framework/ServiceReference.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ServiceReferences&lt;/a&gt; to get the relevant services (&lt;tt&gt;SlingRepository&lt;/tt&gt; and &lt;tt&gt;Packaging&lt;/tt&gt; for each &lt;tt&gt;execute&lt;/tt&gt; call individually. In case the service reference is no longer there the execution should be retried with the next cycle.&lt;/p&gt;</comment>
                            <comment id="17342665" author="cziegeler" created="Tue, 11 May 2021 15:36:04 +0000"  >&lt;p&gt;I think there is nothing that we can do on the Osgi Installer side - the task factory services might come and go any time. Its better to change the implementation of the PackageTransformer to handle the case and return a fail when deactivated&lt;/p&gt;</comment>
                            <comment id="17342669" author="kwin" created="Tue, 11 May 2021 15:40:57 +0000"  >&lt;p&gt;Putting the resource state to &quot;Ignored&quot; leads to the fact that the affected packages not installed at all, even after the &lt;tt&gt;PackageTransfomer&lt;/tt&gt; came back. Any idea how to put the underlying OSGi resource back to the unprocessed resource list?&lt;/p&gt;</comment>
                            <comment id="17342723" author="cziegeler" created="Tue, 11 May 2021 16:38:25 +0000"  >&lt;p&gt;I think the task can either throw some exception or not set a resource state at all&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13025313" name="error.log" size="225835" author="hanspeterstoerr" created="Tue, 11 May 2021 11:46:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qxgo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10365] Sling Model Exporter framework. A HEAD request leads to the java.lang.IllegalArgumentException: setContentLength(0) when already written 273</title>
                <link>https://issues.apache.org/jira/browse/SLING-10365</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We are using the Sling Model Exported framework:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Model(adaptables = Resource.class, resourceType = &#8220;myResourceType&#8221;)
@Exporters({
&#160; &#160; &#160; &#160; @Exporter(name = ExporterA.NAME, selector = &lt;span class=&quot;code-quote&quot;&gt;&quot;css&quot;&lt;/span&gt;, extensions = &lt;span class=&quot;code-quote&quot;&gt;&quot;html&quot;&lt;/span&gt;),
&#160; &#160; &#160; &#160; @Exporter(name = ExporterB.NAME, selector = &lt;span class=&quot;code-quote&quot;&gt;&quot;js&quot;&lt;/span&gt;, extensions = &lt;span class=&quot;code-quote&quot;&gt;&quot;html&quot;&lt;/span&gt;)
})
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyModel {&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Sightly script:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
${@ resourceType=&lt;span class=&quot;code-quote&quot;&gt;&apos;myResourceType&apos;&lt;/span&gt;, selectors=&lt;span class=&quot;code-quote&quot;&gt;&apos;css&apos;&lt;/span&gt;}&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A HEAD request leads to an error, at the same time, a GET request is processed successfully.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalArgumentException: setContentLength(0) when already written 273 at org.eclipse.jetty.server.Response.setContentLength(Response.java:876) [org.apache.felix.http.jetty:4.1.6] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at org.apache.sling.engine.impl.log.RequestLoggerResponse.setContentLength(RequestLoggerResponse.java:198) [org.apache.sling.engine:2.7.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at javax.servlet.ServletResponseWrapper.setContentLength(ServletResponseWrapper.java:112) [org.apache.felix.http.servlet-api:1.1.2] at org.apache.sling.api.servlets.SlingSafeMethodsServlet$NoBodyResponse.setContentLength(SlingSafeMethodsServlet.java:511) [org.apache.sling.api:2.22.0] at org.apache.sling.api.servlets.SlingSafeMethodsServlet$NoBodyResponse.setContentLength(SlingSafeMethodsServlet.java:501) [org.apache.sling.api:2.22.0] at org.apache.sling.api.servlets.SlingSafeMethodsServlet.doHead(SlingSafeMethodsServlet.java:105) [org.apache.sling.api:2.22.0]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please find the full log attached&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377581">SLING-10365</key>
            <summary>Sling Model Exporter framework. A HEAD request leads to the java.lang.IllegalArgumentException: setContentLength(0) when already written 273</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Slyshkova">Olena</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 May 2021 08:46:36 +0000</created>
                <updated>Fri, 25 Jun 2021 11:24:08 +0000</updated>
                                                                            <component>Sling Models</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17341785" author="bdelacretaz" created="Mon, 10 May 2021 09:02:44 +0000"  >&lt;p&gt;Could you provide more precise steps to reproduce this problem? Ideally based on the Sling Starter, &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter&lt;/a&gt; or on the automated tests of the module that&apos;s affected.&lt;/p&gt;</comment>
                            <comment id="17341790" author="kwin" created="Mon, 10 May 2021 09:15:56 +0000"  >&lt;p&gt;Your exporter is registered for selector &lt;tt&gt;css&lt;/tt&gt; or &lt;tt&gt;js&lt;/tt&gt; with extension &lt;tt&gt;html&lt;/tt&gt;. But according to the error log the head request was for &lt;tt&gt;HEAD /content/netcentric-digitalxn-reference/de/en.html&lt;/tt&gt;. So I don&apos;t think this has anything to do with the exporter. Also the stacktrace does not show any hints of the exporter.&lt;/p&gt;</comment>
                            <comment id="17341793" author="slyshkova" created="Mon, 10 May 2021 09:24:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&#160;Indeed, this is a HEAD request to an HTML page, where the mentioned model is used and the following sightly script is involved:&lt;/p&gt;

&lt;p&gt;${@ resourceType=&apos;myResourceType&apos;, selectors=&apos;css&apos;}&quot;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17341959" author="kwin" created="Mon, 10 May 2021 15:16:12 +0000"  >&lt;p&gt;There seem to be a custom exporter involved, without knowing that it would be hard to fix. Can you reproduce the issue with the Jackson Exporter which ships with Sling?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13025229" name="SlingHead.log" size="36917" author="Slyshkova" created="Mon, 10 May 2021 08:41:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qvu8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10361] Extra space in DisableServiceUser.asRepoInitString</title>
                <link>https://issues.apache.org/jira/browse/SLING-10361</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; spotted:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; userType = isServiceUser ? &lt;span class=&quot;code-quote&quot;&gt;&quot;service &quot;&lt;/span&gt; : &quot;&quot;;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;disable %s user %s : %s%n&quot;&lt;/span&gt;, userType, username, escapeQuotes(reason));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in an redundant extra space.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377252">SLING-10361</key>
            <summary>Extra space in DisableServiceUser.asRepoInitString</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 May 2021 14:31:05 +0000</created>
                <updated>Mon, 21 Jun 2021 08:55:43 +0000</updated>
                            <resolved>Thu, 20 May 2021 11:19:17 +0000</resolved>
                                    <version>Repoinit Parser 1.6.8</version>
                                    <fixVersion>Repoinit Parser 1.6.10</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qtt4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10360] The CLI tool cannot send emails via mail-relay.apache.org any more</title>
                <link>https://issues.apache.org/jira/browse/SLING-10360</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Committer CLI tool cannot send emails any more using the ASF mail-relay due to a protocol issue:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;javax.mail.MessagingException: Could not connect to SMTP host: mail-relay.apache.org, port: 465
	at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1961)
	at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:654)
	at javax.mail.Service.connect(Service.java:295)
	at javax.mail.Service.connect(Service.java:176)
	at javax.mail.Service.connect(Service.java:196)
	at javax.mail.Transport.send0(Transport.java:251)
	at javax.mail.Transport.send(Transport.java:174)
	at org.apache.sling.cli.impl.mail.Mailer.send(Mailer.java:62)
	at org.apache.sling.cli.impl.release.PrepareVoteEmailCommand.call(PrepareVoteEmailCommand.java:158)
	at org.apache.sling.cli.impl.release.PrepareVoteEmailCommand.call(PrepareVoteEmailCommand.java:48)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1701)
	at picocli.CommandLine.access$900(CommandLine.java:146)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2059)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2026)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:1893)
	at picocli.CommandLine.execute(CommandLine.java:1822)
	at org.apache.sling.cli.impl.CommandProcessor.runCommand(CommandProcessor.java:110)
	at org.apache.sling.cli.impl.ExecutionTrigger.lambda$activate$0(ExecutionTrigger.java:33)
	at java.base/java.lang.Thread.run(Unknown Source)
Caused by: javax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate)
	at java.base/sun.security.ssl.HandshakeContext.&amp;lt;init&amp;gt;(Unknown Source)
	at java.base/sun.security.ssl.ClientHandshakeContext.&amp;lt;init&amp;gt;(Unknown Source)
	at java.base/sun.security.ssl.TransportContext.kickstart(Unknown Source)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
	at com.sun.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java:527)
	at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:332)
	at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:208)
	at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1927)
	... 18 common frames omitted &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I suspect that this is because of a configuration change in the relay, where support for TLSv1 (the default protocol for an SSL socket in &lt;tt&gt;javax.mail&lt;/tt&gt;) has been disabled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377251">SLING-10360</key>
            <summary>The CLI tool cannot send emails via mail-relay.apache.org any more</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 May 2021 14:28:15 +0000</created>
                <updated>Fri, 7 May 2021 14:29:53 +0000</updated>
                            <resolved>Fri, 7 May 2021 14:29:53 +0000</resolved>
                                                    <fixVersion>Committer CLI 1.0.0</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17340870" author="radu.cotescu" created="Fri, 7 May 2021 14:29:53 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-committer-cli/commit/4845139&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 4845139&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qtsw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10359] RepPrincipalPolicyEntryHandler: rep:effectivePath is defined to be of type PATH</title>
                <link>https://issues.apache.org/jira/browse/SLING-10359</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;while creating adobe specific ITs for the cp-2-fm-converter &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; spotted an inconsistency in the generated repo-init for principal-based policies that have been extracted from a generated content package.&lt;/p&gt;

&lt;p&gt;we found that &lt;tt&gt;RepPrincipalPolicyEntryHandler&lt;/tt&gt; treats &lt;tt&gt;rep:effectivePath&lt;/tt&gt; as property of type STRING instead of property type PATH.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377216">SLING-10359</key>
            <summary>RepPrincipalPolicyEntryHandler: rep:effectivePath is defined to be of type PATH</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 May 2021 11:32:14 +0000</created>
                <updated>Mon, 17 May 2021 11:38:41 +0000</updated>
                            <resolved>Fri, 7 May 2021 13:08:59 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qtl4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10358] Enforcing configuration below config folders is not taking into account the xml config handler</title>
                <link>https://issues.apache.org/jira/browse/SLING-10358</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The regex we use to find configurations in the case of the XmlConfigurationEntryHandler is matching all xml files below an install or config folder. Whether it is consider a config or not is decided later. The enforcement is failing if there is a match below an install folder - hence, it can make the convert fail even so the match would have been rejected later.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377213">SLING-10358</key>
            <summary>Enforcing configuration below config folders is not taking into account the xml config handler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 May 2021 11:23:34 +0000</created>
                <updated>Mon, 17 May 2021 11:38:47 +0000</updated>
                            <resolved>Fri, 7 May 2021 13:05:07 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qtkg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10356] MockResourceResolver does not correctly resolve resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-10356</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The mock resource resolver does not do the complete cycle of the resolving. For example I could have a file:&lt;br/&gt;
/content/dam/my-file.jpg&lt;/p&gt;

&lt;p&gt;If I would now do resourceResolver.resolve(&quot;/content/dam/my-file.jpg.selector/my-suffix&quot;) I would expect to get /content/dam/my-file.jpg but it returns a non existing resource for path /content/dam/my-file.jpg.selector/my-suffix&lt;/p&gt;

&lt;p&gt;I see that this logic is done by the ResourcePathIterator in the ResourceResolverImpl: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/a19b2c2474ae0165e35bce94ecad5e3d23873549/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java#L704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/a19b2c2474ae0165e35bce94ecad5e3d23873549/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java#L704&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What would be the recommended approach? Copy the internal ResourcePathIterator class to the mock testing library and implement the same logic?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377014">SLING-10356</key>
            <summary>MockResourceResolver does not correctly resolve resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="royteeuwen">Roy Teeuwen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 May 2021 10:47:37 +0000</created>
                <updated>Mon, 28 Jun 2021 07:12:41 +0000</updated>
                                                                            <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17370204" author="sseifert@pro-vision.de" created="Sun, 27 Jun 2021 11:36:49 +0000"  >&lt;p&gt;i would recommend using Sling Mocks with ResourceResolver type JCR_MOCK - this uses the &quot;real&quot; resource resolver with a mocked JCR repository.&lt;br/&gt;
the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-resourceresolver-mock&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Resource Resolver Mock&lt;/a&gt; implements only a subset which is fine for most unit tests, but not for all scenarios.&lt;/p&gt;</comment>
                            <comment id="17370451" author="royteeuwen" created="Mon, 28 Jun 2021 07:12:41 +0000"  >&lt;p&gt;Thats always a possibility of course, but that adds an extra performance impact on your tests, seeing as the JCR_MOCK is slower to start up.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qscg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10353] ClusterSyncServiceChain can leak a background thread</title>
                <link>https://issues.apache.org/jira/browse/SLING-10353</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Invoking a &lt;tt&gt;ClusterSyncService.sync()&lt;/tt&gt; should ensure that if a background thread is running, it gets terminated. In the case of a chain of sync services implemented by &lt;tt&gt;ClusterSyncServiceChain&lt;/tt&gt; there is a race-condition which can leak a background thread running unintentionally.&lt;/p&gt;

&lt;p&gt;The order of events is eg:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;setup: ClusterSyncServiceChain is configured with a chain of a OakBacklogClusterSyncService followed by a SyncTokenService&lt;/li&gt;
	&lt;li&gt;ViewStateManagerImpl.handleNewViewNonDelayed can be called consecutively, as it is protected by a lock. Let&apos;s assume on first invocation it starts a sync process by invoking the ClusterSyncServiceChain.sync()&lt;/li&gt;
	&lt;li&gt;the ClusterSyncServiceChain.sync() will first invoke the OakBacklogClusterSyncService.sync()&lt;/li&gt;
	&lt;li&gt;let&apos;s assume there is a backlog (ie a recovery hasn&apos;t finished yet) with a particular instance in the cluster - so OakBacklogClusterSyncService.sync() will spawn a background thread that checks for that backlog every 2 seconds (handled by AbstractServiceWithBackgroundCheck.BackgroundCheckRunnable.run()).&lt;/li&gt;
	&lt;li&gt;the OakBacklogClusterSyncService background check determines that the backlog is gone and that it can proceed. It will do so by continuing in the ClusterSyncServiceChain - ie it will invoke the SyncTokenService.sync() - that in turn invokes syncToken() - which invokes startBackgroundThread. At this point, let&apos;s assume, the check() returns false - ie there are sync tokens it needs to wait for. Hence it will start a new background Thread for the SyncTokenService.&lt;/li&gt;
	&lt;li&gt;let&apos;s now assume, at some later point ViewStateManagerImpl.handleNewViewNonDelayed is again invoked. So it will again call ClusterSyncServiceChain.sync(). Now it is the responsibility of ClusterSyncServiceChain.sync() to cancel any currently running background thread - but  the first element in the chain (the OakBacklogClusterSyncService) doesn&apos;t actually have any background thread anymore - it has already &quot;handed over&quot; to the SyncTokenService - so the OakBacklogClusterSyncService.cancelPreviousBackgroundCheck() will not have anything to cancel. Hence it goes ahead and follows the sync() chain process - which is first checking for backlog (that has cleared now, as we assumed), and then the sync token (which is not complete, as we assumed). So it will now create a &lt;b&gt;second&lt;/b&gt; background thread.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The above resulting in 2 SyncTokenService background threads.&lt;/p&gt;

&lt;p&gt;This can have a few consequences:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a behaviour was noticed, whereby &lt;tt&gt;SyncTokenService.storeMySyncToken&lt;/tt&gt; keeps being invoked with toggling values, eg first it stores &lt;tt&gt;627&lt;/tt&gt;, then &lt;tt&gt;628&lt;/tt&gt;, then again &lt;tt&gt;627&lt;/tt&gt;, then &lt;tt&gt;628&lt;/tt&gt; etc. The following is an example of the generated data in DocumentNodeStore as a result ( excerpt from the &lt;tt&gt;&quot;_id&quot; : &quot;4:/var/discovery/oak/syncTokens&quot;&lt;/tt&gt; document ) :
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;	&quot;&amp;lt;slingId&amp;gt;&quot; : {
		&quot;r179378d10da-0-4&quot; : &quot;\&quot;627\&quot;&quot;,
		&quot;r179378d14ce-0-4&quot; : &quot;\&quot;628\&quot;&quot;,
		&quot;r179378d18bc-0-4&quot; : &quot;\&quot;627\&quot;&quot;,
		&quot;r179378d1ca1-0-4&quot; : &quot;\&quot;628\&quot;&quot;,
		&quot;r179378d209c-0-4&quot; : &quot;\&quot;627\&quot;&quot;,
		&quot;r179378d2477-0-4&quot; : &quot;\&quot;628\&quot;&quot;,
		&quot;r179378d287f-0-4&quot; : &quot;\&quot;627\&quot;&quot;,
		&quot;r179378d2c4b-0-4&quot; : &quot;\&quot;628\&quot;&quot;,
		&quot;r179378d3068-0-4&quot; : &quot;\&quot;627\&quot;&quot;,
		&quot;r179378d3421-0-4&quot; : &quot;\&quot;628\&quot;&quot;
	},
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This eventually should clear out - but it can lead to &lt;/p&gt;
	&lt;ul&gt;
		&lt;li&gt;unnecessary lengthening the sync procedure as other cluster nodes will potentially have to wait longer&lt;/li&gt;
		&lt;li&gt;confusion when reading such log files&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;it can also result in conflict exceptions if the two threads want to update simultaneously:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;04.05.2021 13:22:27.741 *ERROR* [Discovery-AsyncEventSender] org.apache.sling.discovery.commons.providers.spi.base.SyncTokenService storeMySyncToken: got PersistenceException while storing my syncToken:
 org.apache.sling.api.resource.PersistenceException: Unable to commit changes to session.
org.apache.sling.api.resource.PersistenceException: Unable to commit changes to session.
        at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.commit(JcrResourceProvider.java:516) [org.apache.sling.jcr.resource:3.0.22]
        at org.apache.sling.resourceresolver.impl.providers.stateful.AuthenticatedResourceProvider.commit(AuthenticatedResourceProvider.java:215) [org.apache.sling.resourceresolver:1.7.2]
        at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.commit(ResourceResolverControl.java:424) [org.apache.sling.resourceresolver:1.7.2]
        at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.commit(ResourceResolverImpl.java:1000) [org.apache.sling.resourceresolver:1.7.2]
        at org.apache.sling.discovery.commons.providers.spi.base.SyncTokenService.storeMySyncToken(SyncTokenService.java:174) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.SyncTokenService.access$000(SyncTokenService.java:53) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.SyncTokenService$1.check(SyncTokenService.java:137) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.AbstractServiceWithBackgroundCheck.startBackgroundCheck(AbstractServiceWithBackgroundCheck.java:199) [org.apache.sling.discovery.commons:
1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.SyncTokenService.syncToken(SyncTokenService.java:131) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.SyncTokenService.sync(SyncTokenService.java:124) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.ClusterSyncServiceChain.chainedSync(ClusterSyncServiceChain.java:65) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.ClusterSyncServiceChain.access$000(ClusterSyncServiceChain.java:34) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.ClusterSyncServiceChain$1.run(ClusterSyncServiceChain.java:69) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.AbstractServiceWithBackgroundCheck.startBackgroundCheck(AbstractServiceWithBackgroundCheck.java:204) [org.apache.sling.discovery.commons:
1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.OakBacklogClusterSyncService.waitWhileBacklog(OakBacklogClusterSyncService.java:142) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.OakBacklogClusterSyncService.sync(OakBacklogClusterSyncService.java:136) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.ClusterSyncServiceChain.chainedSync(ClusterSyncServiceChain.java:65) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.spi.base.ClusterSyncServiceChain.sync(ClusterSyncServiceChain.java:54) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.base.ViewStateManagerImpl$1.trigger(ViewStateManagerImpl.java:548) [org.apache.sling.discovery.commons:1.0.20]
        at org.apache.sling.discovery.commons.providers.base.AsyncEventSender.run(AsyncEventSender.java:118) [org.apache.sling.discovery.commons:1.0.20]
        at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: javax.jcr.InvalidItemStateException: OakState0001: Unresolved conflicts in /var/discovery/oak/syncTokens
        at org.apache.jackrabbit.oak.api.CommitFailedException.asRepositoryException(CommitFailedException.java:238)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;the 2 threads can also be seen in a thread-dump of course:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;SyncTokenService&quot; #504 daemon prio=5 os_prio=0 cpu=258.15ms elapsed=47.01s tid=0x000000000f315800 nid=0x449c in Object.wait()  [0x00007f74fd56c000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
        at java.lang.Object.wait(java.base@11.0.6/Native Method)
        - waiting on &amp;lt;no object reference available&amp;gt;
        at org.apache.sling.discovery.commons.providers.spi.base.AbstractServiceWithBackgroundCheck$BackgroundCheckRunnable.run(AbstractServiceWithBackgroundCheck.java:98)
        - waiting to re-lock in wait() &amp;lt;0x00000007a8516420&amp;gt; (a java.lang.Object)
        at java.lang.Thread.run(java.base@11.0.6/Thread.java:834)

&quot;SyncTokenService&quot; #530 daemon prio=5 os_prio=0 cpu=0.78ms elapsed=0.96s tid=0x000000000a638800 nid=0x4870 in Object.wait()  [0x00007f74f0bdf000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
        at java.lang.Object.wait(java.base@11.0.6/Native Method)
        - waiting on &amp;lt;no object reference available&amp;gt;
        at org.apache.sling.discovery.commons.providers.spi.base.AbstractServiceWithBackgroundCheck$BackgroundCheckRunnable.run(AbstractServiceWithBackgroundCheck.java:98)
        - waiting to re-lock in wait() &amp;lt;0x00000007bfe29640&amp;gt; (a java.lang.Object)
        at java.lang.Thread.run(java.base@11.0.6/Thread.java:834)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13376850">SLING-10353</key>
            <summary>ClusterSyncServiceChain can leak a background thread</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 May 2021 18:33:00 +0000</created>
                <updated>Mon, 7 Jun 2021 13:43:34 +0000</updated>
                            <resolved>Wed, 2 Jun 2021 14:13:27 +0000</resolved>
                                    <version>Discovery Commons 1.0.20</version>
                                    <fixVersion>Discovery Commons 1.0.24</fixVersion>
                                    <component>Discovery</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17355760" author="egli" created="Wed, 2 Jun 2021 14:13:27 +0000"  >&lt;ul&gt;
	&lt;li&gt;fixed in [this PR|https://github.com/apache/sling-org-apache-sling-discovery-commons/pull/1&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qrc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10349] Repoinit: Nodetype definitions not working </title>
                <link>https://issues.apache.org/jira/browse/SLING-10349</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Tried to register nodetypes and namespaces like so:  &lt;/p&gt;

&lt;p&gt;register namespace ( yyy ) &lt;a href=&quot;http://yyy.com/jcr/nt/1.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yyy.com/jcr/nt/1.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;register nodetypes&lt;br/&gt;
&amp;lt;&amp;lt;===&lt;br/&gt;
&amp;lt;&amp;lt;  &amp;lt;yyy=&apos;http://yyy.com/jcr/nt/1.0&apos;&amp;gt;&lt;br/&gt;
&amp;lt;&amp;lt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;yyy:Foobar&amp;#93;&lt;/span&gt; &amp;gt; nt:unstructured&lt;br/&gt;
===&amp;gt;&amp;gt; &lt;/p&gt;

&lt;p&gt;The whole repoinit script was ignored, then. (I created a &quot;marker&quot; with createuser that also was not executed).&lt;/p&gt;

&lt;p&gt;I saw no apparent error in the logfile. &lt;/p&gt;

&lt;p&gt;The namespace did register, when I removed the whole &quot;register nodetypes&quot; block. &lt;/p&gt;

&lt;p&gt;Btw. the documentation could be more explicit that (if) &quot;&amp;lt;&amp;lt;  &amp;lt;yyy=&apos;http://yyy.com/jcr/nt/1.0&apos;&amp;gt;&quot; already creates a namespace (or if that is required to reference an existing one in the scope of the CND block)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13376596">SLING-10349</key>
            <summary>Repoinit: Nodetype definitions not working </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="-achim">Achim Koch</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 May 2021 16:43:27 +0000</created>
                <updated>Wed, 2 Jun 2021 15:58:59 +0000</updated>
                                                                            <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17339177" author="bdelacretaz" created="Tue, 4 May 2021 17:37:38 +0000"  >&lt;p&gt;I have added a test for this supposedly failing script &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/commit/a3ac18b8cd8efbbfb73947cfb0a04c7b81c6cc01&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;in a temporary branch&lt;/a&gt;, and the test passes.&lt;/p&gt;

&lt;p&gt;Do you have steps to reproduce the failure that you&apos;re seeing?&lt;/p&gt;

&lt;p&gt;Maybe something is processing your script before passing it to repoinit and there&apos;s a bug in that processing?&lt;/p&gt;

&lt;p&gt;Any information on the versions of the repoinit parser and jcr-repoinit module versions?&lt;/p&gt;</comment>
                            <comment id="17339186" author="enorman" created="Tue, 4 May 2021 17:44:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=-achim&quot; class=&quot;user-hover&quot; rel=&quot;-achim&quot;&gt;-achim&lt;/a&gt;&#160; I tried to reproduce this problem by integrating what you described into the latest starter but I didn&apos;t see the same result as you.&#160; Both the &quot;yyy&quot; namespace and the &quot;yyy:Foobar&quot; nodetype appeared to be created after starting up.&lt;/p&gt;

&lt;p&gt;Are there any more details of your distribution that you can share, or perhaps a test project that demonstrates the problem?&lt;/p&gt;</comment>
                            <comment id="17339191" author="-achim" created="Tue, 4 May 2021 17:50:59 +0000"  >&lt;p&gt;I am using the cloud SDK 2021.1.4738.20210107T143101Z&lt;/p&gt;

&lt;p&gt;Repoinit is version 1.1.28&lt;br/&gt;
Parser is version 1.6.2&lt;/p&gt;

&lt;p&gt;The repoinit file in total is pretty large (1500 lines) and cannot be share here. I can try if the issue occurs in a smaller separate file, too. &lt;/p&gt;

&lt;p&gt;The file is not transformed by us.&lt;/p&gt;</comment>
                            <comment id="17339232" author="enorman" created="Tue, 4 May 2021 19:03:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=-achim&quot; class=&quot;user-hover&quot; rel=&quot;-achim&quot;&gt;-achim&lt;/a&gt;&#160;Ok.&#160; To follow up,&#160; I just retried&#160;to reproduce this problem again by integrating what you described into the latest starter while switching to the older o.a.s.jcr.repoinit version 1.1.26 (the 1.1.28 version that you specified doesn&apos;t appear to exist in the maven central repo) and o.a.s.repoinit.parser 1.6.2.&#160; In that test environment, both the &quot;yyy&quot; namespace and the &quot;yyy:Foobar&quot; nodetype appeared to be created after starting up.&#160; So for me, those older versions of the repoinit artifacts appears to have the same behavior that I was getting when using the latest versions of those artifacts.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17339244" author="rombert" created="Tue, 4 May 2021 19:17:25 +0000"  >&lt;p&gt;Maybe caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6406&quot; title=&quot;Exception when parsing multi-line configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6406&quot;&gt;&lt;del&gt;FELIX-6406&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17355824" author="bdelacretaz" created="Wed, 2 Jun 2021 15:58:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=-achim&quot; class=&quot;user-hover&quot; rel=&quot;-achim&quot;&gt;-achim&lt;/a&gt;, is this still an issue or did you find a solution?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qprs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10348] Number of errors and warnigs not logged correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-10348</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;At the end of the analyser run, the Analyser logs the number of errors and warnings.&lt;br/&gt;
If configuration errors are found, that number is missing those&lt;/p&gt;</description>
                <environment></environment>
        <key id="13376543">SLING-10348</key>
            <summary>Number of errors and warnigs not logged correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 May 2021 11:06:02 +0000</created>
                <updated>Mon, 17 May 2021 08:22:00 +0000</updated>
                            <resolved>Tue, 4 May 2021 11:07:41 +0000</resolved>
                                    <version>Feature Model Analyser 1.3.24</version>
                                    <fixVersion>Feature Model Analyser 1.3.26</fixVersion>
                                    <component>Feature Model Analyser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17338914" author="cziegeler" created="Tue, 4 May 2021 11:07:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-analyser/commit/1d96fe14c234cbe0c15f0a9d24997b6e0dca684c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-analyser/commit/1d96fe14c234cbe0c15f0a9d24997b6e0dca684c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qpg0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10346] ResourceResolver: MapEntries.dispose throws NPE when vanity path is disabled</title>
                <link>https://issues.apache.org/jira/browse/SLING-10346</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.AssertionError: For value JCR_MOCK (teardown): Unable to invoke method &apos;deactivate&apos; for class org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator
	at io.wcm.testing.junit.rules.parameterized.RepeatedStatement.evaluate(RepeatedStatement.java:69)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)
Caused by: java.lang.RuntimeException: Unable to invoke method &apos;deactivate&apos; for class org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:347)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeLifecycleMethod(OsgiServiceUtil.java:234)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.activateDeactivate(OsgiServiceUtil.java:98)
	at org.apache.sling.testing.mock.osgi.MockOsgi.deactivate(MockOsgi.java:272)
	at org.apache.sling.testing.mock.osgi.MockBundleContext.shutdown(MockBundleContext.java:448)
	at org.apache.sling.testing.mock.osgi.MockOsgi.shutdown(MockOsgi.java:371)
	at org.apache.sling.testing.mock.osgi.context.OsgiContextImpl.tearDown(OsgiContextImpl.java:58)
	at org.apache.sling.testing.mock.sling.context.SlingContextImpl.tearDown(SlingContextImpl.java:256)
	at io.wcm.testing.mock.aem.context.AemContextImpl.tearDown(AemContextImpl.java:105)
	at io.wcm.testing.mock.aem.junit.AemContext.access$2(AemContext.java:1)
	at io.wcm.testing.mock.aem.junit.AemContext$3.execute(AemContext.java:216)
	at io.wcm.testing.mock.aem.junit.AemContext$3.execute(AemContext.java:1)
	at io.wcm.testing.junit.rules.parameterized.RepeatedStatement.evaluate(RepeatedStatement.java:65)
	... 18 more
Caused by: java.lang.NullPointerException
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.dispose(MapEntries.java:530)
	at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.deactivate(CommonResourceResolverFactoryImpl.java:339)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.unregisterFactory(ResourceResolverFactoryActivator.java:500)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.unregisterFactory(ResourceResolverFactoryActivator.java:485)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.deactivate(ResourceResolverFactoryActivator.java:454)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:338)
	... 30 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13375881">SLING-10346</key>
            <summary>ResourceResolver: MapEntries.dispose throws NPE when vanity path is disabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Apr 2021 16:23:52 +0000</created>
                <updated>Tue, 11 May 2021 13:12:10 +0000</updated>
                            <resolved>Thu, 29 Apr 2021 16:29:40 +0000</resolved>
                                    <version>Resource Resolver 1.7.4</version>
                                    <fixVersion>Resource Resolver 1.7.6</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17335656" author="sseifert@pro-vision.de" created="Thu, 29 Apr 2021 16:29:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/a19b2c2474ae0165e35bce94ecad5e3d23873549&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/a19b2c2474ae0165e35bce94ecad5e3d23873549&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13329419">SLING-9769</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qldk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10342] The recursion selector value for the JsonRenderServlet should be limited to real numbers</title>
                <link>https://issues.apache.org/jira/browse/SLING-10342</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The JsonRenderServlet recursion selector is supposed to be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;-1&quot;&lt;/span&gt; | &lt;span class=&quot;code-quote&quot;&gt;&quot;infinity&quot;&lt;/span&gt; | [0-9]+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Following &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2324&quot; title=&quot;The recursion selector value for the JsonRenderServlet is limited to Integer.MAX_VALUE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2324&quot;&gt;&lt;del&gt;SLING-2324&lt;/del&gt;&lt;/a&gt;, a value &amp;gt; Integer.MAX_VALUE is considered to be &quot;infinity&quot;.&lt;/p&gt;

&lt;p&gt;However, we don&apos;t enforce that the value is not a negative number (besides the allowed &quot;-1&quot;) nor do we prevent it from being a numeric which is not real numbers (i.e., not matching &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;+).&lt;/p&gt;

&lt;p&gt;We should make sure we only accept:&#160;&lt;tt&gt;&quot;-1&quot; | &quot;infinity&quot; | &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;+&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13375857">SLING-10342</key>
            <summary>The recursion selector value for the JsonRenderServlet should be limited to real numbers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Apr 2021 14:43:28 +0000</created>
                <updated>Wed, 7 Jul 2021 11:43:27 +0000</updated>
                            <resolved>Thu, 29 Apr 2021 14:59:05 +0000</resolved>
                                    <version>Servlets Get 2.1.40</version>
                                    <fixVersion>Servlets Get 2.1.42</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17335557" author="karlpauls" created="Thu, 29 Apr 2021 14:59:05 +0000"  >&lt;p&gt;Done in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-get/pull/7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-get/pull/7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310361">
                    <name>Blocked</name>
                                            <outwardlinks description="Blocked">
                                        <issuelink>
            <issuekey id="13388163">SLING-10591</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13388163">SLING-10591</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ql88:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10341] ConfigurationProxy.DynamicProxyInvocationHandler should fill in toString() with useful value</title>
                <link>https://issues.apache.org/jira/browse/SLING-10341</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When debugging the proxies that are created by ConfigurationProxy.get() (of type DynamicProxyInvocationHandler), when viewing those proxies in the IntelliJ debug view, we see &quot;null&quot; being printed. This is due to the proxies not having a toString() method. By default, it will then return null.&lt;/p&gt;

&lt;p&gt;We should specify a useful toString()-method, so that debugging is less confusing.&lt;/p&gt;

&lt;p&gt;We could at least specify the name of the configuration that that proxy represents. It would be nice to also include the properties with values probably, but I think having the name of the configuration is already very nice.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13375619">SLING-10341</key>
            <summary>ConfigurationProxy.DynamicProxyInvocationHandler should fill in toString() with useful value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Henry Kuijpers">Henry Kuijpers</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Apr 2021 14:59:44 +0000</created>
                <updated>Wed, 28 Apr 2021 14:59:44 +0000</updated>
                                            <version>Context-Aware Configuration Impl 1.5.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qjrc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10340] The ScriptResource should unwrap the active resource before adapting it to a Servlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-10340</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9365&quot; title=&quot;Optionally don&amp;#39;t create resource providers for servlets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9365&quot;&gt;&lt;del&gt;SLING-9365&lt;/del&gt;&lt;/a&gt; the Servlet Resolver was enhanced to not mount the resource providers for the bound servlets, with the benefit of way faster startups for systems with a large number of servlets.&lt;/p&gt;

&lt;p&gt;However, when the &lt;tt&gt;ScriptResource&lt;/tt&gt; has to be adapted to a &lt;tt&gt;Servlet&lt;/tt&gt;, the active resource should be checked if it&apos;s either a &lt;tt&gt;ServletResource&lt;/tt&gt; or a wrapped &lt;tt&gt;ServletResource&lt;/tt&gt; to obtain its servlet. Otherwise the normal &lt;tt&gt;SlingAdaptable&lt;/tt&gt; behaviour should be used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13375559">SLING-10340</key>
            <summary>The ScriptResource should unwrap the active resource before adapting it to a Servlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Apr 2021 09:43:59 +0000</created>
                <updated>Tue, 11 May 2021 13:02:11 +0000</updated>
                            <resolved>Wed, 28 Apr 2021 13:23:48 +0000</resolved>
                                    <version>Servlets Resolver 2.7.0</version>
                                    <fixVersion>Servlets Resolver 2.7.14</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17334731" author="radu.cotescu" created="Wed, 28 Apr 2021 13:23:48 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/commit/245ae4d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 245ae4d&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13298131">SLING-9365</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qje0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10337] Toggles not respected when checking generated api jars</title>
                <link>https://issues.apache.org/jira/browse/SLING-10337</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If toggles are used to generate the api jar, the toggles are currently not respected when checking the api jar for correctness which then results in errors.&lt;br/&gt;
The toggles need to be respected for checking as well&lt;/p&gt;</description>
                <environment></environment>
        <key id="13375527">SLING-10337</key>
            <summary>Toggles not respected when checking generated api jars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Apr 2021 07:34:36 +0000</created>
                <updated>Sat, 1 May 2021 09:34:18 +0000</updated>
                            <resolved>Wed, 28 Apr 2021 07:35:56 +0000</resolved>
                                    <version>slingfeature-maven-plugin 1.5.0</version>
                                    <fixVersion>slingfeature-maven-plugin 1.5.2</fixVersion>
                                    <component>Feature Model</component>
                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17334523" author="cziegeler" created="Wed, 28 Apr 2021 07:35:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/commit/9069049660b79620663c0f7a2cd6ef6e39546fa9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/commit/9069049660b79620663c0f7a2cd6ef6e39546fa9&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qj6w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10336] Javadoc errors</title>
                <link>https://issues.apache.org/jira/browse/SLING-10336</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The release process fails with javadoc issues:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR] Exit code: 1 - /Users/jhoh/repos/sling-git/org-apache-sling-api/src/main/java/org/apache/sling/api/request/header/MediaRangeList.java:65: error: self-closing element not allowed
[ERROR]      * The string is a comma-separated list of media ranges, as specified by the RFC.&amp;lt;br /&amp;gt;
[ERROR]                                                                                      ^
[ERROR] /Users/jhoh/repos/sling-git/org-apache-sling-api/src/main/java/org/apache/sling/api/request/header/MediaRangeList.java:172: error: self-closing element not allowed
[ERROR]          *               ) *( &quot;;&quot; parameter )&amp;lt;br/&amp;gt;
[ERROR]                                              ^
[ERROR] /Users/jhoh/repos/sling-git/org-apache-sling-api/src/main/java/org/apache/sling/api/request/header/MediaRangeList.java:173: error: self-closing element not allowed
[ERROR]          * as specified by RFC 2616, section 14.1. &amp;lt;br/&amp;gt;
[ERROR]                                                    ^
[ERROR] /Users/jhoh/repos/sling-git/org-apache-sling-api/src/main/java/org/apache/sling/api/request/header/MediaRangeList.java:184: error: self-closing element not allowed
[ERROR]          * must also be wildcard.&amp;lt;br /&amp;gt;
[ERROR]                                  ^
[ERROR]

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13375516">SLING-10336</key>
            <summary>Javadoc errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="joerghoh">Joerg Hoh</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Apr 2021 06:58:05 +0000</created>
                <updated>Tue, 4 May 2021 10:36:13 +0000</updated>
                            <resolved>Wed, 28 Apr 2021 07:17:51 +0000</resolved>
                                                    <fixVersion>API 2.23.4</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17334516" author="joerghoh" created="Wed, 28 Apr 2021 07:17:35 +0000"  >&lt;p&gt;Merged fix with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/commit/cb61c009624b583d800d93e7ec067e8ed0e62923&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;cb61c00&lt;/tt&gt;&lt;/a&gt; &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qj4g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10335] Wrong resource returned if overlap with mounted provider</title>
                <link>https://issues.apache.org/jira/browse/SLING-10335</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a resource provider is mounted at a path and the chilren of the parent are list and the parent resource provider has a resource with the same name, then the resource from the provider should be returned. Currently the resource from the parent is returned.&lt;br/&gt;
Example:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Provider A mounted at /&lt;/li&gt;
	&lt;li&gt;Provider A has a resource at /some/path&lt;/li&gt;
	&lt;li&gt;Provider B mounted at /some/path returning a resource for /some/path&lt;/li&gt;
	&lt;li&gt;a call to listChildren(&quot;/some&quot;) should return the resource from B not A&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13375393">SLING-10335</key>
            <summary>Wrong resource returned if overlap with mounted provider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Apr 2021 16:54:34 +0000</created>
                <updated>Tue, 11 May 2021 13:12:12 +0000</updated>
                            <resolved>Wed, 28 Apr 2021 08:29:31 +0000</resolved>
                                    <version>Resource Resolver 1.7.4</version>
                                    <fixVersion>Resource Resolver 1.7.6</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17333375" author="cziegeler" created="Tue, 27 Apr 2021 16:55:41 +0000"  >&lt;p&gt;Potential fix with test case at&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/79bce4d31c5b2cc91fa517a19c9d36c3cea7de2c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/79bce4d31c5b2cc91fa517a19c9d36c3cea7de2c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qid4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10334] PrivilegesHandler: regexp never matches privileges definitions from content packages</title>
                <link>https://issues.apache.org/jira/browse/SLING-10334</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, as discussed the &lt;tt&gt;PrivilegesHandler&lt;/tt&gt; will never match a &lt;em&gt;privileges.xml&lt;/em&gt; file contained in the META_INF folder of a content package. i did an initial test with a AEM specific content package and changing the regexp as follows seems to do the trick:&lt;/p&gt;

&lt;p&gt;instead of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;META-INF/vault/privileges\\.xml&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the path-pattern should be&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;/META-INF/vault/privileges\\.xml&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this will lead to &lt;tt&gt;PrivilegesHandlerTest.matches&lt;/tt&gt; to fail but that one is anyway a bit odd.... the next test &lt;tt&gt;parsePrivileges&lt;/tt&gt; uses a path &lt;tt&gt;String path = &quot;/META-INF/vault/privileges.xml&quot;;&lt;/tt&gt;, which wouldn&apos;t match but since &lt;tt&gt;PrivilegesHandler.handle&lt;/tt&gt; is directly called it wasn&apos;t noticed.&lt;/p&gt;

&lt;p&gt;will try to come up with a reasonable test package that illustrates the issue.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13375354">SLING-10334</key>
            <summary>PrivilegesHandler: regexp never matches privileges definitions from content packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Apr 2021 14:07:17 +0000</created>
                <updated>Mon, 17 May 2021 11:38:55 +0000</updated>
                            <resolved>Wed, 28 Apr 2021 06:05:35 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qi4g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10324] ServiceUserMapper documentation is incomplete</title>
                <link>https://issues.apache.org/jira/browse/SLING-10324</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10321&quot; title=&quot;Deprecate service mapping by userID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10321&quot;&gt;&lt;del&gt;SLING-10321&lt;/del&gt;&lt;/a&gt; i was looking for the corresponding documentation and found that the description of the &lt;tt&gt;ServiceUserMapper&lt;/tt&gt; at &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/service-authentication.html#serviceusermapper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/service-authentication.html#serviceusermapper&lt;/a&gt; doesn&apos;t correctly reflect the current status of the &lt;tt&gt;ServiceUserMapper&lt;/tt&gt;, which first resolves mapping by principal names. In addition it doesn&apos;t describe the validator interfaces and their effect.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13374047">SLING-10324</key>
            <summary>ServiceUserMapper documentation is incomplete</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Apr 2021 07:37:22 +0000</created>
                <updated>Thu, 8 Dec 2022 12:21:09 +0000</updated>
                            <resolved>Thu, 22 Apr 2021 07:44:38 +0000</resolved>
                                                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13373784">SLING-10321</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13080068">SLING-6963</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qa2o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10314] PubQueueProviderImpl close may throw IllegalStateException</title>
                <link>https://issues.apache.org/jira/browse/SLING-10314</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The PubQueueProviderImpl close method throws IllegalStateException when invoked multiple times.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[FelixLogListener] org.apache.sling.distribution.journal.impl.publisher.DistributionPublisher bundle org.apache.sling.distribution.journal:0.2.0.T20200727-828e876 (547)[org.apache.sling.distribution.journal.impl.publisher.DistributionPublisher(2815)] : The deactivate method has thrown an exception (java.lang.IllegalStateException: Service already unregistered.)
java.lang.IllegalStateException: Service already unregistered.
	at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:141)
	at org.apache.sling.distribution.journal.queue.impl.PubQueueProviderImpl.close(PubQueueProviderImpl.java:98) [org.apache.sling.distribution.journal:0.2.0.T20200727-828e876]
	at org.apache.commons.io.IOUtils.closeQuietly(IOUtils.java:363) [org.apache.commons.io:2.6.0]
	at org.apache.commons.io.IOUtils.closeQuietly(IOUtils.java:423) [org.apache.commons.io:2.6.0]
	at org.apache.sling.distribution.journal.impl.publisher.DistributionPublisher.deactivate(DistributionPublisher.java:195) [org.apache.sling.distribution.journal:0.2.0.T20200727-828e876]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.felix.scr.impl.inject.methods.BaseMethod.invokeMethod(BaseMethod.java:242) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.BaseMethod.access$500(BaseMethod.java:41) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.BaseMethod$Resolved.invoke(BaseMethod.java:678) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.BaseMethod.invoke(BaseMethod.java:524) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.ActivateMethod.invoke(ActivateMethod.java:318) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.ActivateMethod.invoke(ActivateMethod.java:308) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.disposeImplementationObject(SingleComponentManager.java:409) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.deleteComponent(SingleComponentManager.java:164) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.doDeactivate(AbstractComponentManager.java:832) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.deactivateInternal(AbstractComponentManager.java:806) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.DependencyManager.deactivateComponentManager(DependencyManager.java:2413) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.DependencyManager.access$400(DependencyManager.java:58) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.removedService(DependencyManager.java:1166) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.removedService(DependencyManager.java:1043) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1242) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1137) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.untrack(ServiceTracker.java:997) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1176) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:125) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
	at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
	at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4833)
	at org.apache.felix.framework.Felix.access$000(Felix.java:112)
	at org.apache.felix.framework.Felix$1.serviceChanged(Felix.java:434)
	at org.apache.felix.framework.ServiceRegistry.unregisterService(ServiceRegistry.java:170)
	at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:145)
	at org.apache.sling.distribution.journal.impl.publisher.PubQueueProviderPublisher.deactivate(PubQueueProviderPublisher.java:86) [org.apache.sling.distribution.journal:0.2.0.T20200727-828e876]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.felix.scr.impl.inject.methods.BaseMethod.invokeMethod(BaseMethod.java:242) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.BaseMethod.access$500(BaseMethod.java:41) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.BaseMethod$Resolved.invoke(BaseMethod.java:678) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.BaseMethod.invoke(BaseMethod.java:524) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.ActivateMethod.invoke(ActivateMethod.java:318) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.inject.methods.ActivateMethod.invoke(ActivateMethod.java:308) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.disposeImplementationObject(SingleComponentManager.java:409) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.deleteComponent(SingleComponentManager.java:164) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.doDeactivate(AbstractComponentManager.java:832) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.deactivateInternal(AbstractComponentManager.java:806) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.DependencyManager.deactivateComponentManager(DependencyManager.java:2413) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.DependencyManager.access$400(DependencyManager.java:58) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.removedService(DependencyManager.java:1166) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.removedService(DependencyManager.java:1043) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1242) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1137) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.untrack(ServiceTracker.java:997) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1176) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:125) [org.apache.felix.scr:2.1.20]
	at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
	at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
	at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4833)
	at org.apache.felix.framework.Felix.access$000(Felix.java:112)
	at org.apache.felix.framework.Felix$1.serviceChanged(Felix.java:434)
	at org.apache.felix.framework.ServiceRegistry.unregisterService(ServiceRegistry.java:170)
	at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:145)
	at org.apache.felix.scr.impl.manager.AbstractCo MESSAGE TOO LONG, TRUNCATED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13373042">SLING-10314</key>
            <summary>PubQueueProviderImpl close may throw IllegalStateException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Apr 2021 14:46:39 +0000</created>
                <updated>Fri, 16 Jul 2021 07:39:33 +0000</updated>
                            <resolved>Fri, 25 Jun 2021 15:08:00 +0000</resolved>
                                                    <fixVersion>Content Distribution Journal Core 0.1.18</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17369526" author="marett" created="Fri, 25 Jun 2021 15:07:52 +0000"  >&lt;p&gt;Merged PR #76&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0q3vc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10312] Include exception message when handling exception while communicating to the journal</title>
                <link>https://issues.apache.org/jira/browse/SLING-10312</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The JournalAvailableChecker should log the exception message when handling exception events. Currently it does print&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
sling.distribution.journal.shared.JournalAvailableChecker Received exception event com.adobe.mcloud.pipeline.client.http.HttpPipelineException. Journal is considered unavailable.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but should include the message.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13373037">SLING-10312</key>
            <summary>Include exception message when handling exception while communicating to the journal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Apr 2021 14:18:09 +0000</created>
                <updated>Fri, 16 Jul 2021 07:39:31 +0000</updated>
                            <resolved>Sat, 17 Apr 2021 13:26:16 +0000</resolved>
                                                    <fixVersion>Content Distribution Journal Core 0.1.18</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17324265" author="marett" created="Sat, 17 Apr 2021 13:26:07 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-journal/commit/a5ce4363e60afd3aa9f90c92e67f4e4af2990474&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-journal/commit/a5ce4363e60afd3aa9f90c92e67f4e4af2990474&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0q3u8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10311] API is always included, even if dependency mechanism is enabled</title>
                <link>https://issues.apache.org/jira/browse/SLING-10311</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When generating api jars, it is possible to enable the use dependency mechanism - which allows to create a dependency for apis rather than embedding it in the single api jar&lt;br/&gt;
This detection is currently broken&lt;/p&gt;</description>
                <environment></environment>
        <key id="13372850">SLING-10311</key>
            <summary>API is always included, even if dependency mechanism is enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Apr 2021 07:59:19 +0000</created>
                <updated>Sat, 1 May 2021 09:34:20 +0000</updated>
                            <resolved>Fri, 16 Apr 2021 09:57:16 +0000</resolved>
                                    <version>slingfeature-maven-plugin 1.5.0</version>
                                    <fixVersion>slingfeature-maven-plugin 1.5.2</fixVersion>
                                    <component>Feature Model</component>
                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17322750" author="cziegeler" created="Fri, 16 Apr 2021 09:57:16 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/commit/25d6c9db7feed2d61a1844b134ab134527cd9be7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/commit/25d6c9db7feed2d61a1844b134ab134527cd9be7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0q2oo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10308] Sling Dynamic Include - Changing the resulting DOM for JSI</title>
                <link>https://issues.apache.org/jira/browse/SLING-10308</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Using Java Script Include will result into a different DOM as it will include a div in which the component is nested as well as a script tag next to the div.&lt;/p&gt;

&lt;p&gt;Especially if JSI is used for container components which are relying on the underlying DOM structure this will result into issues, e.g. Slick Carousel which interprets the script tag as carousel slide.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13372605">SLING-10308</key>
            <summary>Sling Dynamic Include - Changing the resulting DOM for JSI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dklco">Dan Klco</assignee>
                                    <reporter username="voss">Maximilian Voss</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Apr 2021 10:58:40 +0000</created>
                <updated>Fri, 23 Apr 2021 13:58:44 +0000</updated>
                            <resolved>Fri, 23 Apr 2021 13:58:43 +0000</resolved>
                                    <version>Dynamic Include 3.2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17330790" author="dklco" created="Fri, 23 Apr 2021 13:58:44 +0000"  >&lt;p&gt;Resolved in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-dynamic-include/commit/b8046c97a21c7e5051b524dd74e4d8a834cc574d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-dynamic-include/commit/b8046c97a21c7e5051b524dd74e4d8a834cc574d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0q168:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10304] Missing documentation for delete user and delete service user</title>
                <link>https://issues.apache.org/jira/browse/SLING-10304</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;according to tests in repoinit-parser (and the implementation for JCR repositories) repo-init supports the removal of users and service users. however, the documentation at &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/repository-initialization.html&lt;/a&gt; only documents the removal of groups.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13372061">SLING-10304</key>
            <summary>Missing documentation for delete user and delete service user</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Apr 2021 14:23:48 +0000</created>
                <updated>Sat, 1 May 2021 09:32:52 +0000</updated>
                            <resolved>Wed, 14 Apr 2021 10:58:19 +0000</resolved>
                                    <version>Repoinit Parser 1.6.6</version>
                                    <fixVersion>Repoinit Parser 1.6.8</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17320903" author="bdelacretaz" created="Wed, 14 Apr 2021 10:58:19 +0000"  >&lt;p&gt;Good catch, thank you! I have updated the &quot;kitchen sink&quot; &lt;tt&gt;test-99&lt;/tt&gt; scenario to include tests for these statements and added them to &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/repository-initialization.html&lt;/a&gt; - the site is still building but that should be live soon.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pxtk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10295] Unclosed inpustreams with DefaultGetServlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-10295</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The DefaultGetServlet has codepaths with unclosed inputstreams.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-get/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-get/pull/5&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13371844">SLING-10295</key>
            <summary>Unclosed inpustreams with DefaultGetServlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="joerghoh">Joerg Hoh</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Apr 2021 17:12:24 +0000</created>
                <updated>Mon, 24 May 2021 21:31:45 +0000</updated>
                            <resolved>Tue, 13 Apr 2021 20:25:28 +0000</resolved>
                                    <version>Servlets Get 2.1.40</version>
                                    <fixVersion>Servlets Get 2.1.42</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pwhc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10290] Every request renews sling.formauth token</title>
                <link>https://issues.apache.org/jira/browse/SLING-10290</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using Apache Sling Form Based Authentication Handler&lt;br/&gt;
Every request and subrequest sets a new value for `sling.formauth`&lt;/p&gt;

&lt;p&gt;Analyzing the code indicates that it not the intended behavior,&lt;br/&gt;
and the cookie value of `sling.formauth` should be consistent for 30 minutes &lt;br/&gt;
according to the default value of form.auth.timeout&lt;/p&gt;

&lt;p&gt;Debugging shows that the method &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-form/blob/master/src/main/java/org/apache/sling/auth/form/impl/FormAuthenticationHandler.java#L514-L519&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;getCookieAuthData&lt;/a&gt; always returns null.... AuthenticationInfo properties are user.jcr.credentials, sling.authType and user.name.  But this is not a property called sling.formauth &lt;/p&gt;

</description>
                <environment></environment>
        <key id="13370719">SLING-10290</key>
            <summary>Every request renews sling.formauth token</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="cris">Cris Rockwell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2021 18:19:33 +0000</created>
                <updated>Sat, 12 Jun 2021 01:32:26 +0000</updated>
                            <resolved>Fri, 21 May 2021 18:40:31 +0000</resolved>
                                    <version>Form Based Authentication 1.0.20</version>
                                    <fixVersion>Form Based Authentication 1.0.24</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="17325824" author="cris" created="Tue, 20 Apr 2021 14:15:32 +0000"  >&lt;p&gt;Suggest upgrade this ticket to Critical.&lt;/p&gt;

&lt;p&gt;The TokenStore in Forms uses SHA-1&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;final Mac m = Mac.getInstance(HMAC_SHA1);&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-form/blob/e7cfa7827c9ce39d5f686556bb2555c83c335c3f/src/main/java/org/apache/sling/auth/form/impl/TokenStore.java#L143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-auth-form/blob/e7cfa7827c9ce39d5f686556bb2555c83c335c3f/src/main/java/org/apache/sling/auth/form/impl/TokenStore.java#L143&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Cryptographic hash algorithms such as&#160;MD2,&#160;MD4,&#160;MD5,&#160;MD6,&#160;HAVAL-128,&#160;HMAC-MD5,&#160;DSA&#160;(which uses&#160;SHA-1),&#160;RIPEMD,&#160;RIPEMD-128,&#160;RIPEMD-160,&#160;HMACRIPEMD160&#160;and&#160;SHA-1&#160;are no longer considered secure, because it is possible to have&#160;collisions&#160;(little computational effort is enough to find two or more different inputs that produce the same hash).&lt;/p&gt;

&lt;p&gt;The provisioning of weak security tokens for every request could be considered a security vulnerability. Also in a production environment with many active users, the risk of accidental collision is not impossible.&lt;/p&gt;</comment>
                            <comment id="17339259" author="enorman" created="Tue, 4 May 2021 19:31:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cris&quot; class=&quot;user-hover&quot; rel=&quot;cris&quot;&gt;cris&lt;/a&gt;&#160;In your last comment it seems you are also concerned with hash algorithm of the TokenStore.&#160; That seems like a valid topic to discuss, but it seems like a different issue than what was described in the description which seems to be more about the cookie getting refreshed too frequently.&#160;&lt;/p&gt;

&lt;p&gt;Would you mind reporting the TokenStore hash algorithm problem as a separate issue so the two problems can be tracked independently?&lt;/p&gt;</comment>
                            <comment id="17339308" author="cris" created="Tue, 4 May 2021 21:27:08 +0000"  >&lt;p&gt;Thanks for the suggestion Eric. I created a new ticket as you suggest in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10350&quot; title=&quot;Use a stronger algorithm in TokenStore  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10350&quot;&gt;&lt;del&gt;SLING-10350&lt;/del&gt;&lt;/a&gt; relating to the weak algorithm.&lt;/p&gt;</comment>
                            <comment id="17339332" author="enorman" created="Tue, 4 May 2021 22:28:30 +0000"  >&lt;p&gt;It looks like the problem with the cookie refresh logic is that&#160;FormAuthentiactionHandler#getCookieAuthData is looking for the authData in a different place than where&#160;FormAuthenticationHandler#createAuthInfo has stored it when&#160;jaasHelper is enabled.&lt;/p&gt;

&lt;p&gt;I&apos;ve created &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-form/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR #1&lt;/a&gt; with a proposed fix for review.&#160; I&apos;ll merge the PR to the mainline in a few days if there is no negative feedback to the changes.&lt;/p&gt;</comment>
                            <comment id="17349433" author="enorman" created="Fri, 21 May 2021 18:40:31 +0000"  >&lt;p&gt;Merged the PR at: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-form/commit/0be8984790cda629a093d440ef0be573ac4f7cf7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-auth-form/commit/0be8984790cda629a093d440ef0be573ac4f7cf7&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17349626" author="olli" created="Sat, 22 May 2021 07:21:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt;, You can use &lt;tt&gt;@Inject&lt;/tt&gt;&#160;to wait for services, no need for HC in this case (see &lt;tt&gt;@Inject&lt;/tt&gt; in section &lt;a href=&quot;https://sling.apache.org/documentation/development/testing-paxexam.html#set-up-a-tailored-sling-instance&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Set up a tailored Sling instance&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17349814" author="enorman" created="Sat, 22 May 2021 19:00:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;&#160;Yes, I was already aware of the @Inject technique as you may see that I used it for getting a reference to the ConfigurationAdmin service.&lt;/p&gt;

&lt;p&gt;However, I think I still prefer the HC approach since it is closer to a real world setup where the org.apache.felix.hc.core.impl.filter.ServiceUnavailableFilter uses the HC components to tell if the server is ready to service http requests.&#160; The HC technique is extensible for more conditions than just service availability and to me that usage makes the test code more readable.&#160; Also, I&apos;m not a big fan of injecting services that I have no intention of using directly.&lt;/p&gt;</comment>
                            <comment id="17354347" author="olli" created="Mon, 31 May 2021 09:51:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt;, I see. We should have some documented, reusable conditions which can be used in Pax Exam. I prefer to inject an &quot;ok&quot; marker service instead of having additional boilerplate for polling status of HC (similar to &lt;tt&gt;BootFinished&lt;/tt&gt; in Karaf).&lt;/p&gt;</comment>
                            <comment id="17355268" author="enorman" created="Tue, 1 Jun 2021 17:53:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;&#160;I&apos;d be happy to review any PR if someone wants to do that work.&#160; But I don&apos;t see it as a requirement for this issue, so perhaps that discussion could be moved to the mail list or a new standalone issue to be tracked independently.&lt;/p&gt;</comment>
                            <comment id="17362209" author="enorman" created="Sat, 12 Jun 2021 01:32:26 +0000"  >&lt;p&gt;Closing with the 1.0.24 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13023635" name="image-2021-04-09-14-19-17-509.png" size="308454" author="cris" created="Fri, 9 Apr 2021 18:19:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pq80:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10289] Sling Dynamic Include 3.2.0 configuration of arrays broken</title>
                <link>https://issues.apache.org/jira/browse/SLING-10289</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;XML config like this stopped working &amp;gt; 3.1.6 and will only pick up first value&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
include-filter.config.resource-types=&lt;span class=&quot;code-quote&quot;&gt;&quot;[wcm/components/content/downloadteaser,wcm/components/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/menu,wcm/components/&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;/menuflyout]&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;fixed this by changing the Configuration Attribute to String[]&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      @AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;Resource types&quot;&lt;/span&gt;,
          description = &lt;span class=&quot;code-quote&quot;&gt;&quot;Filter will replace components with selected resource types&quot;&lt;/span&gt;,
          type = AttributeType.STRING)
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] include$_$filter_config_resource$_$types() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; {};&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13370714">SLING-10289</key>
            <summary>Sling Dynamic Include 3.2.0 configuration of arrays broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="AndreasWurm">Andreas Wurm</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2021 17:58:36 +0000</created>
                <updated>Fri, 14 Jan 2022 16:12:13 +0000</updated>
                            <resolved>Fri, 23 Apr 2021 07:55:03 +0000</resolved>
                                    <version>Dynamic Include 3.2.0</version>
                                    <fixVersion>Dynamic Include 3.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17320000" author="rombert" created="Tue, 13 Apr 2021 07:48:28 +0000"  >&lt;p&gt;Good catch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndreasWurm&quot; class=&quot;user-hover&quot; rel=&quot;AndreasWurm&quot;&gt;AndreasWurm&lt;/a&gt;. Would you have the time to file a PR with the fix?&lt;/p&gt;</comment>
                            <comment id="17325765" author="andreaswurm" created="Tue, 20 Apr 2021 12:47:14 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I created a Pull Request that also adds assertions for this.&lt;/p&gt;</comment>
                            <comment id="17330081" author="rombert" created="Fri, 23 Apr 2021 07:55:03 +0000"  >&lt;p&gt;Merged, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AndreasWurm&quot; class=&quot;user-hover&quot; rel=&quot;AndreasWurm&quot;&gt;AndreasWurm&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17468424" author="banerjee-ronit" created="Tue, 4 Jan 2022 08:17:25 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&#160; - When can we expect to have SDI version 3.3.0 as part of maven repository. In case its not anytime soon, what would be the suggested approach to fix this issue.&lt;/p&gt;</comment>
                            <comment id="17468589" author="rombert" created="Tue, 4 Jan 2022 11:45:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=banerjee-ronit&quot; class=&quot;user-hover&quot; rel=&quot;banerjee-ronit&quot;&gt;banerjee-ronit&lt;/a&gt; - I&apos;ve made a note to start a release this week, it will probably be available early next week. &lt;/p&gt;</comment>
                            <comment id="17476248" author="rombert" created="Fri, 14 Jan 2022 16:12:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=banerjee-ronit&quot; class=&quot;user-hover&quot; rel=&quot;banerjee-ronit&quot;&gt;banerjee-ronit&lt;/a&gt; - the 3.3.0 release is out and should appear in Maven Central shortly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pq6w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10288] FelixFrameworkScanner sets framework properties always for current Java version</title>
                <link>https://issues.apache.org/jira/browse/SLING-10288</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sometimes the analyser is executed with a different java version than the one executing the actual OSGi container. There should be a possibility to explicitly set a Java version.&lt;/p&gt;

&lt;p&gt;Currently the framework properties are gathered in a dedicated java process executing &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-analyser/blob/730b7d3297ab9f17f484e7b557e4ec47c3d9b3e9/src/main/java/org/apache/sling/feature/scanner/impl/fwk/FrameworkPropertiesGatherer.java#L41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-analyser/blob/730b7d3297ab9f17f484e7b557e4ec47c3d9b3e9/src/main/java/org/apache/sling/feature/scanner/impl/fwk/FrameworkPropertiesGatherer.java#L41&lt;/a&gt;. That new process always takes the current  &lt;tt&gt;java.home&lt;/tt&gt; which therefore returns the wrong properties (i.e. the ones for the current  java version instead of the one used to execute the framework).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13370696">SLING-10288</key>
            <summary>FelixFrameworkScanner sets framework properties always for current Java version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2021 15:54:07 +0000</created>
                <updated>Wed, 26 Jun 2024 09:03:45 +0000</updated>
                            <resolved>Mon, 17 Jun 2024 19:55:18 +0000</resolved>
                                                    <fixVersion>Feature Model Analyser 2.0.8</fixVersion>
                                    <component>Feature Model Analyser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17318100" author="kwin" created="Fri, 9 Apr 2021 16:00:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davidb&quot; class=&quot;user-hover&quot; rel=&quot;davidb&quot;&gt;davidb&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt; Any idea how to fix it? The process seems overly complex. Isn&apos;t there a possibility to gather the properties without actually using the FrameworkFactory?&lt;/p&gt;</comment>
                            <comment id="17318104" author="karlpauls" created="Fri, 9 Apr 2021 16:04:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, not easily. The framework is calculating some stuff for us. I guess you could try to externalize that but it probably would be easier to somehow fix the java.home thing.&lt;/p&gt;</comment>
                            <comment id="17318105" author="kwin" created="Fri, 9 Apr 2021 16:05:50 +0000"  >&lt;p&gt;It seems the framework property &lt;tt&gt;java.specification.version&lt;/tt&gt; can be used (&lt;a href=&quot;https://github.com/apache/felix-dev/blob/00c952340e51b9748d84cc63d1048d833f0a3cff/framework/src/main/java/org/apache/felix/framework/Felix.java#L4920&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix-dev/blob/00c952340e51b9748d84cc63d1048d833f0a3cff/framework/src/main/java/org/apache/felix/framework/Felix.java#L4920&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17318107" author="karlpauls" created="Fri, 9 Apr 2021 16:08:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;It seems the framework property java.specification.version can be used&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately, not really.&lt;/p&gt;</comment>
                            <comment id="17318110" author="kwin" created="Fri, 9 Apr 2021 16:14:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;it probably would be easier to somehow fix the java.home thing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That would require that you have the target Java version installed locally. I don&apos;t think that would be good.&lt;br/&gt;
In case of JPMS it gets even more complicated because you don&apos;t necessarily have the same modules enabled. Probably easier when the full framework description of the target system would be published somewhere and can just be referenced as is by the analyser.&lt;/p&gt;</comment>
                            <comment id="17318118" author="karlpauls" created="Fri, 9 Apr 2021 16:22:13 +0000"  >&lt;p&gt;Yeah, that would make some sense - but we would need to generate these descriptions (probably on a per module basis x jvm versions). Even then, it would still be tricky because the properties in the feature can influence stuff in the result of the framework properties... That was why &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davidb&quot; class=&quot;user-hover&quot; rel=&quot;davidb&quot;&gt;davidb&lt;/a&gt; ended up using the invocation. &lt;/p&gt;</comment>
                            <comment id="17318120" author="kwin" created="Fri, 9 Apr 2021 16:25:27 +0000"  >&lt;p&gt;I was not suggesting that the Felix Project would publish those (because there are probably too many possibilities) but every service provider running an OSGi container.  I.e. AEMaaCS publishes a framework description for their target environment and other providers as well!&lt;/p&gt;</comment>
                            <comment id="17318259" author="karlpauls" created="Fri, 9 Apr 2021 20:07:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, IC - I guess that would make sense. We already have a way to provide metadata for bundles anyways: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-analyser/blob/master/src/main/java/org/apache/sling/feature/analyser/extensions/AnalyserMetaDataExtension.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-analyser/blob/master/src/main/java/org/apache/sling/feature/analyser/extensions/AnalyserMetaDataExtension.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I guess you could make it so that the framework metadata can be provided by it as well. In that case, AEMaaCS for example, could provide a cached version for the local analyzers. &lt;/p&gt;</comment>
                            <comment id="17852508" author="rombert" created="Wed, 5 Jun 2024 16:12:40 +0000"  >&lt;p&gt;I am going to give this a shot. I would like to start some experiments on the Sling Starter, but I am not sure how to generate a feature model that includes the analyser-metadata. I was looking into the &lt;tt&gt;apis-jar&lt;/tt&gt; mojo but that does not look to be the case.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; - any hints on how to generate a feature model that includes the analyser-metadata section?&lt;/p&gt;</comment>
                            <comment id="17852795" author="rombert" created="Thu, 6 Jun 2024 13:41:59 +0000"  >&lt;p&gt;I came to the conclusion that there is no way of generating the analyser metadata and raised &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-12351&quot; title=&quot;Create a default implementation for generating the analyser-metadata extension&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-12351&quot;&gt;&lt;del&gt;SLING-12351&lt;/del&gt;&lt;/a&gt; for it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13581798">SLING-12351</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pq2w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10286] Converter ignores disabled status of system user</title>
                <link>https://issues.apache.org/jira/browse/SLING-10286</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, IMHO the content-package-2-fm-converter should spot if system-users are marked as disabled (i.e. if they have &lt;tt&gt;rep:disabled&lt;/tt&gt; property set and should reflect that in the set of repo-init statements generated upon conversion.&lt;/p&gt;

&lt;p&gt;While this is probably not a very common scenario it still has a significant impact as disabled system users are not allowed in sling service user mappings (and should allowed to login).&lt;/p&gt;

&lt;p&gt;the fix should be straight forward:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;test if rep:disabled exists with users/system-users&lt;/li&gt;
	&lt;li&gt;extend User/SystemUser to allow to have a &apos;disable-reason&apos; set (groups can&apos;t be disabled)&lt;/li&gt;
	&lt;li&gt;when generating repo-init statements in &lt;tt&gt;DefaultAclManager&lt;/tt&gt; add an additional &lt;tt&gt;DisableServiceUser&lt;/tt&gt; operation if a user is marked as disabled.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13370636">SLING-10286</key>
            <summary>Converter ignores disabled status of system user</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2021 11:46:17 +0000</created>
                <updated>Mon, 17 May 2021 11:38:43 +0000</updated>
                            <resolved>Wed, 14 Apr 2021 10:12:42 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pppk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10284] Dependency check fails on CVE-2015-2944 for Sling Resource Merger 1.4.0</title>
                <link>https://issues.apache.org/jira/browse/SLING-10284</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Failed to execute goal org.owasp:dependency-check-maven:5.3.0:check (check-dependencies-for-vulnerabilities) on project dependencies:&lt;/p&gt;

&lt;p&gt;One or more dependencies were identified with vulnerabilities:&lt;/p&gt;

&lt;p&gt;org.apache.sling.resourcemerger-1.4.0.jar: CVE-2015-2944&lt;/p&gt;

&lt;p&gt;See the dependency-check report for more details.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13370607">SLING-10284</key>
            <summary>Dependency check fails on CVE-2015-2944 for Sling Resource Merger 1.4.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Henry Kuijpers">Henry Kuijpers</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Apr 2021 09:38:10 +0000</created>
                <updated>Fri, 9 Apr 2021 12:57:29 +0000</updated>
                            <resolved>Fri, 9 Apr 2021 12:57:29 +0000</resolved>
                                    <version>Resource Merger 1.4.0</version>
                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17317824" author="henry kuijpers" created="Fri, 9 Apr 2021 09:39:01 +0000"  >&lt;p&gt;Can we just bump the version numbers of the mentioned dependencies &lt;a href=&quot;https://nvd.nist.gov/vuln/detail/CVE-2015-2944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://nvd.nist.gov/vuln/detail/CVE-2015-2944&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17317826" author="kwin" created="Fri, 9 Apr 2021 09:41:26 +0000"  >&lt;p&gt;This is a false positive, and just increasing the dependencies to make dependency-check-maven happy feels wrong. Sling Resource Merger is still compatible with older (potentially vulnerable) Sling/AEM versions. But what matters in OSGi is what is deployed, not which dependencies are given in Maven!&lt;/p&gt;</comment>
                            <comment id="17317831" author="henry kuijpers" created="Fri, 9 Apr 2021 09:43:31 +0000"  >&lt;p&gt;I very much agree. I think the issue here is that sling parent refers to that older dependency?&lt;/p&gt;</comment>
                            <comment id="17317832" author="kwin" created="Fri, 9 Apr 2021 09:46:19 +0000"  >&lt;p&gt;In general we depend on the lowest version supported. Whether that is defined by the parent pom or locally does not really matter here. Please bring d-c-m to ignore that dependency. I don&apos;t think we should do anything in Sling.&lt;/p&gt;

&lt;p&gt;In general all dependencies with scope &quot;provided&quot; are not included in the bundle but referenced at run time. Usually using &quot;compile&quot; scope for classes you want to embed works fine and only those should be checked with tools like d-c-m.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ppj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10281] Add &quot;ensure principal ACL&quot; which throws an Exception it it fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-10281</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As highlighted in the last comment of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9449&quot; title=&quot;Repoinit AclUtil#setPrincipalAcl throws exception if no path-based entry exists for principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9449&quot;&gt;&lt;del&gt;SLING-9449&lt;/del&gt;&lt;/a&gt;, repoinit should use exceptions when some statements cannot be applied (as that leads to an undesired repository state). In the worst case it could lead to privilege escalation&lt;/p&gt;</description>
                <environment></environment>
        <key id="13370360">SLING-10281</key>
            <summary>Add &quot;ensure principal ACL&quot; which throws an Exception it it fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Apr 2021 11:34:35 +0000</created>
                <updated>Wed, 8 Feb 2023 13:30:10 +0000</updated>
                            <resolved>Mon, 23 Jan 2023 18:34:41 +0000</resolved>
                                    <version>Repoinit JCR 1.1.34</version>
                                    <fixVersion>Repoinit Parser 1.9.0</fixVersion>
                    <fixVersion>Repoinit JCR 1.1.44</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="38400">10h 40m</timespent>
                                <comments>
                            <comment id="17317337" author="kwin" created="Thu, 8 Apr 2021 16:47:12 +0000"  >&lt;p&gt;PR in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/pull/14&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/pull/14&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17325771" author="kwin" created="Tue, 20 Apr 2021 12:55:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; Can you have a look at the PR?&lt;/p&gt;</comment>
                            <comment id="17325797" author="bdelacretaz" created="Tue, 20 Apr 2021 13:32:57 +0000"  >&lt;p&gt;I mostly looked at the tests and it&apos;s not clear to me what &quot;outside of supported tree&quot; means in code like this example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-comment&quot;&gt;// create service user outside of supported tree &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; principal-based access control
&lt;/span&gt;U.parseAndExecute(&lt;span class=&quot;code-quote&quot;&gt;&quot;create service user otherSystemPrincipal&quot;&lt;/span&gt;);

&lt;span class=&quot;code-comment&quot;&gt;// setting up principal-acl will not succeed (principal not located below supported path)
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; setup = &lt;span class=&quot;code-quote&quot;&gt;&quot;set principal ACL &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; otherSystemPrincipal \n&quot;&lt;/span&gt;
  + &lt;span class=&quot;code-quote&quot;&gt;&quot;allow jcr:read on /non/existing/path\n&quot;&lt;/span&gt;
  + &lt;span class=&quot;code-quote&quot;&gt;&quot;end&quot;&lt;/span&gt;;
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think we need a clear explanation of that in the &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;repoinit docs&lt;/a&gt;, pointing to the relevant Oak docs if that explanation is there. And a link to that in those tests for clarity. Happy to help write that explanation if needed as I have no clue so far so I&apos;m a good guinea pig for the explanation.&lt;/p&gt;

&lt;p&gt;Also, is there a test that clearly demonstrates the different behavior between &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9449&quot; title=&quot;Repoinit AclUtil#setPrincipalAcl throws exception if no path-based entry exists for principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9449&quot;&gt;&lt;del&gt;SLING-9449&lt;/del&gt;&lt;/a&gt; and this? Reverting the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9449&quot; title=&quot;Repoinit AclUtil#setPrincipalAcl throws exception if no path-based entry exists for principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9449&quot;&gt;&lt;del&gt;SLING-9449&lt;/del&gt;&lt;/a&gt; changes might break some users repoinit scripts so we should make the difference obvious, and maybe mention &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9449&quot; title=&quot;Repoinit AclUtil#setPrincipalAcl throws exception if no path-based entry exists for principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9449&quot;&gt;&lt;del&gt;SLING-9449&lt;/del&gt;&lt;/a&gt; in the tests comments.&lt;/p&gt;</comment>
                            <comment id="17325869" author="kwin" created="Tue, 20 Apr 2021 14:52:16 +0000"  >&lt;p&gt;&quot;Supported tree&quot; is the area where principal-based access control is supported, configured via &lt;a href=&quot;https://jackrabbit.apache.org/oak/docs/apidocs/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/Filter.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/oak/docs/apidocs/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/Filter.html&lt;/a&gt; and in OSGi context via PID {{	org.apache.jackrabbit.oak.spi.security.authorization.principalbased.impl.FilterProviderImpl}}. That part hasn&apos;t really changed though. Principal-based ACLs never worked outside that path, but with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9449&quot; title=&quot;Repoinit AclUtil#setPrincipalAcl throws exception if no path-based entry exists for principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9449&quot;&gt;&lt;del&gt;SLING-9449&lt;/del&gt;&lt;/a&gt; this was just ignored and now leads to an exception (i.e. preventing the repository from starting up).&lt;/p&gt;

&lt;p&gt;The different behaviour can be seen e.g. in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/pull/14/files#diff-3d14a072a6c806a780386eb77cf96ad4e75b1959093dd46da8a3d500ab681148R473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/pull/14/files#diff-3d14a072a6c806a780386eb77cf96ad4e75b1959093dd46da8a3d500ab681148R473&lt;/a&gt; (i.e. exception expected instead of warn).&lt;br/&gt;
I would appreciate a comment directly on the PR to make it clear, where you would see changes necessary.&lt;/p&gt;</comment>
                            <comment id="17325901" author="bdelacretaz" created="Tue, 20 Apr 2021 15:16:01 +0000"  >&lt;p&gt;Thank you for the explanation I wasn&apos;t aware of those configurable paths for principal-based permissions.&lt;/p&gt;

&lt;p&gt;I have added a comment in the PR explaining my suggested changes, &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/pull/14/files#r616781576&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/pull/14/files#r616781576&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the different behavior reference, that works for me!&lt;/p&gt;</comment>
                            <comment id="17357415" author="kwin" created="Fri, 4 Jun 2021 15:14:45 +0000"  >&lt;p&gt;More than one month passed, the PR now has some conflicts. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&#160;Do you have capacity to take it up?&lt;/p&gt;</comment>
                            <comment id="17364186" author="bdelacretaz" created="Wed, 16 Jun 2021 10:08:38 +0000"  >&lt;p&gt;PR #14 is back in sync but as discussed there there&apos;s some instability in the tests - while the current tests at &lt;a href=&quot;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-jcr-repoinit/job/master/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-jcr-repoinit/job/master/&lt;/a&gt; are stable.&lt;/p&gt;

&lt;p&gt;I&apos;d like to get a release out and don&apos;t have much time to look at this now so I&apos;ll move this ticket to the next release. We can always do another release one this is fixed.&lt;/p&gt;</comment>
                            <comment id="17364192" author="kwin" created="Wed, 16 Jun 2021 10:19:56 +0000"  >&lt;p&gt;IT errors on ASF Jenkins were transient, I just triggered a new build which was successful: &lt;a href=&quot;https://ci-builds.apache.org/blue/organizations/jenkins/Sling%2Fmodules%2Fsling-org-apache-sling-jcr-repoinit/detail/bugfix%2Frevert-SLING-9449/14/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/blue/organizations/jenkins/Sling%2Fmodules%2Fsling-org-apache-sling-jcr-repoinit/detail/bugfix%2Frevert-SLING-9449/14/pipeline&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17364265" author="bdelacretaz" created="Wed, 16 Jun 2021 11:55:52 +0000"  >&lt;p&gt;Thanks for the info. Looking at PR #14 I think there&apos;s one comment from @anchela that we haven&apos;t addressed so far:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;this is still a major change that might lead to regressions for those cases that don&apos;t yet use &apos;with forced&apos;  path for the system user creation&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure about the implications, and maybe we need to enforce that &apos;with forced path&apos; option to avoid problems? I think we need to clarify that, will leave this issue out of the release I&apos;m doing now.&lt;/p&gt;</comment>
                            <comment id="17364275" author="kwin" created="Wed, 16 Jun 2021 12:16:49 +0000"  >&lt;p&gt;That comment was from the 9th of April and no reaction till now? I am still convinced that in those cases failing loudly instead of silently ignoring and not applying (potentially necessary ACLs) is much better. I am not sure what you mean by enforcing &quot;with forced path&quot;. When do you want to enforce and under which circumstances?&lt;/p&gt;</comment>
                            <comment id="17656112" author="kwin" created="Mon, 9 Jan 2023 13:57:10 +0000"  >&lt;p&gt;As in &lt;a href=&quot;https://lists.apache.org/thread/7mvc2jvxltvrrntklzm1gzfmf0jy3mhc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/7mvc2jvxltvrrntklzm1gzfmf0jy3mhc&lt;/a&gt; we reached consensus that we should not change implementation in a potentially backwards incompatible ways, I proposed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/pull/28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-repoinit-parser/pull/28&lt;/a&gt; a new statement &lt;tt&gt;ensure principal ACL&lt;/tt&gt; which has the stricter semantics.&lt;/p&gt;</comment>
                            <comment id="17656510" author="kwin" created="Tue, 10 Jan 2023 08:40:39 +0000"  >&lt;p&gt;New instruction supported by Parser with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/e09013b0434d6088cbb8b189337ae6b322aa7722&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/e09013b0434d6088cbb8b189337ae6b322aa7722&lt;/a&gt; and supported through jcr-repoinit in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/commit/63e0d135e7220165f5a761930309c60406474718&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/commit/63e0d135e7220165f5a761930309c60406474718&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13523769">SLING-11769</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13517663">SLING-11750</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13304697">SLING-9449</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0po08:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10280] ServiceUserMapped services registered multiple times</title>
                <link>https://issues.apache.org/jira/browse/SLING-10280</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There is an issue in the handling of mappings that causes ServiceUserMapped services to be registered and unregistered multiple times. Worse, it causes not only unnecessary register/unregister of services, it can actually lead to have some services be duplicated in the end. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13370346">SLING-10280</key>
            <summary>ServiceUserMapped services registered multiple times</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Apr 2021 10:14:00 +0000</created>
                <updated>Thu, 8 Apr 2021 10:42:12 +0000</updated>
                            <resolved>Thu, 8 Apr 2021 10:42:12 +0000</resolved>
                                    <version>Service User Mapper 1.5.2</version>
                                    <fixVersion>Service User Mapper 1.5.4</fixVersion>
                                    <component>Service User Mapper</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17317077" author="karlpauls" created="Thu, 8 Apr 2021 10:42:12 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-serviceusermapper/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-serviceusermapper/pull/4&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pnx4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10279] Unify naming: cp2fm or cp2sf</title>
                <link>https://issues.apache.org/jira/browse/SLING-10279</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While the generated binary is called &lt;tt&gt;cp2sf&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/8e2eda722d6d4b9d8007711d9bee9ce57ce48a67/pom.xml#L311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/8e2eda722d6d4b9d8007711d9bee9ce57ce48a67/pom.xml#L311&lt;/a&gt;), the about text refers to &lt;tt&gt;cp2fm&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/30dbeee8c6da640464734c02fe3f3ba5e148e6ae/src/main/java/org/apache/sling/feature/cpconverter/cli/ContentPackage2FeatureModelConverterLauncher.java#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/30dbeee8c6da640464734c02fe3f3ba5e148e6ae/src/main/java/org/apache/sling/feature/cpconverter/cli/ContentPackage2FeatureModelConverterLauncher.java#L51&lt;/a&gt;) and also the rest of the readme refers to cp2fm.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13370341">SLING-10279</key>
            <summary>Unify naming: cp2fm or cp2sf</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Apr 2021 10:06:36 +0000</created>
                <updated>Mon, 17 May 2021 11:38:38 +0000</updated>
                            <resolved>Mon, 12 Apr 2021 11:29:02 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17319387" author="kwin" created="Mon, 12 Apr 2021 11:29:02 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/7e8c8652e73b5d982828b79cc965bd19d2d89ee1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/7e8c8652e73b5d982828b79cc965bd19d2d89ee1&lt;/a&gt; by consistenly using cp2fm.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pnw0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10278] Treat install and config folders the same</title>
                <link>https://issues.apache.org/jira/browse/SLING-10278</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As the JCR Installer Providers by default considers artifacts in both folders (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-provider-jcr/blob/bf911ef17a5ccbebc8dc3e10690bb9c88b3512eb/src/main/java/org/apache/sling/installer/provider/jcr/impl/JcrInstaller.java#L101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-provider-jcr/blob/bf911ef17a5ccbebc8dc3e10690bb9c88b3512eb/src/main/java/org/apache/sling/installer/provider/jcr/impl/JcrInstaller.java#L101&lt;/a&gt;) &lt;tt&gt;config&lt;/tt&gt; and &lt;tt&gt;install&lt;/tt&gt; cp2fm should both treat the same.&lt;/p&gt;

&lt;p&gt;That means that by default both &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/8e2eda722d6d4b9d8007711d9bee9ce57ce48a67/src/main/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandler.java#L40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/8e2eda722d6d4b9d8007711d9bee9ce57ce48a67/src/main/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandler.java#L40&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/8e2eda722d6d4b9d8007711d9bee9ce57ce48a67/src/main/java/org/apache/sling/feature/cpconverter/handlers/BundleEntryHandler.java#L66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/8e2eda722d6d4b9d8007711d9bee9ce57ce48a67/src/main/java/org/apache/sling/feature/cpconverter/handlers/BundleEntryHandler.java#L66&lt;/a&gt; should consider both paths.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13370338">SLING-10278</key>
            <summary>Treat install and config folders the same</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Apr 2021 09:49:48 +0000</created>
                <updated>Mon, 17 May 2021 11:38:52 +0000</updated>
                            <resolved>Tue, 13 Apr 2021 07:46:28 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17319364" author="cziegeler" created="Mon, 12 Apr 2021 11:10:25 +0000"  >&lt;p&gt;It would be good if this is configurable - while one on hand it makes sense to support existing supports, on the other hand it makes sense to enforce best practices&lt;/p&gt;</comment>
                            <comment id="17319368" author="kwin" created="Mon, 12 Apr 2021 11:12:29 +0000"  >&lt;p&gt;I am open for enforcing best practices, but enforcing does not mean silently ignoring such artifacts (which is currently the case). So enforcing would IMHO be best tracked in a new ticket (together with the parameter to make it configurable).&lt;/p&gt;</comment>
                            <comment id="17319372" author="cziegeler" created="Mon, 12 Apr 2021 11:18:44 +0000"  >&lt;p&gt;Enforcing is right now done by silently ignoring &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; So by not ignoring these anymore the enforcing function will be removed. Therefore I think this should be dealt with in a single issue&lt;/p&gt;</comment>
                            <comment id="17319380" author="kwin" created="Mon, 12 Apr 2021 11:21:25 +0000"  >&lt;p&gt;IMHO enforcing best practices should be done in a feature analyser task (not the converter), so I would rather add a new analyser to enforce placing artifacts below a special folder. WDYT?&lt;/p&gt;</comment>
                            <comment id="17319391" author="cziegeler" created="Mon, 12 Apr 2021 11:34:37 +0000"  >&lt;p&gt;In general, yes, but that would require to run special analysers on the content packages before converting&lt;/p&gt;</comment>
                            <comment id="17319392" author="kwin" created="Mon, 12 Apr 2021 11:36:08 +0000"  >&lt;p&gt;Failing after the conversion is good enough to enforce best practices, don&apos;t you think?&lt;/p&gt;</comment>
                            <comment id="17319395" author="cziegeler" created="Mon, 12 Apr 2021 11:38:14 +0000"  >&lt;p&gt;But how does the analyser know where bundles or configs originated from?&lt;/p&gt;</comment>
                            <comment id="17319401" author="kwin" created="Mon, 12 Apr 2021 11:45:04 +0000"  >&lt;p&gt;Right, indeed. What do you think of providing a &lt;a href=&quot;https://jackrabbit.apache.org/filevault/validation.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;filevault validator&lt;/a&gt; for this check? There it is quite easy to enforce this best practice and it should be IMHO followed, no matter whether you use this converter or the OSGi installer....&lt;/p&gt;</comment>
                            <comment id="17319514" author="cziegeler" created="Mon, 12 Apr 2021 15:31:41 +0000"  >&lt;p&gt;A filevault validator definitely makes sense - still I think we should make it configurable where the converter looks for bundles and where it looks for configurations.&lt;/p&gt;</comment>
                            <comment id="17319584" author="kwin" created="Mon, 12 Apr 2021 16:55:14 +0000"  >&lt;p&gt;OK, I changed the PR at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/72&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/72&lt;/a&gt; accordingly and exposed a CLI option named &lt;tt&gt;--enforce-configs-and-bundles-below-proper-folder&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17319949" author="cziegeler" created="Tue, 13 Apr 2021 06:42:29 +0000"  >&lt;p&gt;Thanks, PR looks basically good to me - can we maybe reverse the default so we have the behaviour closer to as it is today?&lt;br/&gt;
While the CLI option name speaks to itself &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; maybe we can come with something slightly shorter? Like &quot;--disable-installer-policy&quot; ?&lt;/p&gt;</comment>
                            <comment id="17319995" author="kwin" created="Tue, 13 Apr 2021 07:46:29 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/040535be60fe958be0536bbab9829d95701d2887&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/040535be60fe958be0536bbab9829d95701d2887&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pnvc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10277] REGISTER PRIVILEGE and SET ACL should support lists of STRING and NAMESPACED_ITEM</title>
                <link>https://issues.apache.org/jira/browse/SLING-10277</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10274&quot; title=&quot;Consistently use platform independent line separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10274&quot;&gt;&lt;del&gt;SLING-10274&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; noticed that repo-init parser doesn&apos;t support aggregated privilege names with namespace prefix.&lt;/p&gt;

&lt;p&gt;Looking at the parser I found that the handling of privileges seems to be inconsistent:&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;1.RegisterPrivileges&quot;&gt;&lt;/a&gt;1. Register Privileges&lt;/h3&gt;
&lt;p&gt;the parser defines this as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;REGISTER&amp;gt; ((&amp;lt;ABSTRACT&amp;gt;) {isAbstract = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;})? &amp;lt;PRIVILEGE&amp;gt; (privilege = &amp;lt;STRING&amp;gt; | privilege = &amp;lt;NAMESPACED_ITEM&amp;gt;) (&amp;lt;WITH&amp;gt; aggregates = principalsList())?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;-&amp;gt; privilege name can be a STRING or a NAMESPACED_ITEM (that&apos;s correct (&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;br/&gt;
-&amp;gt; aggregates is a principalList??? that&apos;s quite odd and obviously not correct.... aggregates can again be a list of STRING and/or NAMESPACED_ITEM (&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;2.UsingRegisteredPrivilegesinAClines&quot;&gt;&lt;/a&gt;2. Using Registered Privileges in AC-lines&lt;/h3&gt;
&lt;p&gt;&lt;tt&gt;line.setProperty(AclLine.PROP_PRIVILEGES&lt;/tt&gt; is always  populated with the result of &lt;tt&gt;namespacedItemsList()&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;-&amp;gt; if my reading is correct that means that only NAMESPACED_ITEM can be used as privilege names, which is not correct because a privilege name can be any valid JCR name, with or without namespace prefix. (&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;3.SummaryandSuggestedFix&quot;&gt;&lt;/a&gt;3. Summary and Suggested Fix&lt;/h3&gt;
&lt;p&gt;this can easily be illustrated by slightly adjusting the test-*.txt (see attachment).&lt;br/&gt;
the fix should IMHO be 2-fold:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;allow aggregated privilege names to be STRING or NAMESPACED_ITEM&lt;/li&gt;
	&lt;li&gt;allow privilege names in AC-line to be STRING or NAMESPACED_ITEM in accordance to the register privilege call.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13370092">SLING-10277</key>
            <summary>REGISTER PRIVILEGE and SET ACL should support lists of STRING and NAMESPACED_ITEM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Apr 2021 12:44:17 +0000</created>
                <updated>Mon, 21 Jun 2021 08:55:41 +0000</updated>
                            <resolved>Fri, 28 May 2021 09:32:09 +0000</resolved>
                                    <version>Repoinit Parser 1.6.8</version>
                                    <fixVersion>Repoinit Parser 1.6.10</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                <comments>
                            <comment id="17316455" author="anchela" created="Wed, 7 Apr 2021 16:08:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, initial WIP at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/tree/SLING-10277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-repoinit-parser/tree/SLING-10277&lt;/a&gt;. most probably that&apos;s not the correct final solution because a privilege name is essentially a JCR name which cannot be arbitrary string..... maybe it would therefore be better to fix the &lt;tt&gt;namespacedItemsList&lt;/tt&gt; such that it actually reflects an &lt;tt&gt;namedItemsList&lt;/tt&gt; that allows for valid JCR names that may or may not come with a namespace prefix.&lt;br/&gt;
while looking at the usage of &lt;tt&gt;namespacedItemsList&lt;/tt&gt;  i also noticed that the repo init parse seems to mandate that nodetype names are &apos;namespaced-items&apos; which would also not be correct IMHO as the same applies as for privilege names. so, you might want to take a closer look at that as well.&lt;/p&gt;</comment>
                            <comment id="17334693" author="bdelacretaz" created="Wed, 28 Apr 2021 12:20:10 +0000"  >&lt;p&gt;To verify my understanding, is it sufficient to support &lt;tt&gt;allow priv for larry&lt;/tt&gt; in a statement like the one below, or are more changes needed?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
set ACL on home(alice)
  allow jcr:one &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; alice, bob, carol
  # the following line currently causes a syntax error
  allow priv &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; larry
end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17334699" author="anchela" created="Wed, 28 Apr 2021 12:31:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, unfortunately that&apos;s not all..... the first bug is that it&apos;s not possible to register privileges with aggregates that are again privilege names. see section 1. of the bug report.&lt;/p&gt;

&lt;p&gt;see cp-featuremodel converter for a test scenario. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; had to work around this bug here by altering the names of the declared aggregates. oh.... and the attached patch for the test files &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17334705" author="bdelacretaz" created="Wed, 28 Apr 2021 12:41:21 +0000"  >&lt;p&gt;Ah ok, sorry, I missed the attached patch initially, I see now that it has what I was looking for.&lt;/p&gt;</comment>
                            <comment id="17351537" author="anchela" created="Wed, 26 May 2021 06:28:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, any update on this issue? i filed it as a critical bug due to the fact that requirements for ACL-line combined with the bug in the privilege registration essentially makes it impossible to register custom privileges from declared aggregates.&lt;/p&gt;</comment>
                            <comment id="17351741" author="bdelacretaz" created="Wed, 26 May 2021 12:05:02 +0000"  >&lt;p&gt;If from your point of view the attached patch is good to go I suggest that you create a pull request on which we can do a final review before merging.&lt;/p&gt;</comment>
                            <comment id="17351791" author="anchela" created="Wed, 26 May 2021 13:39:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, the attached patch is not good to go otherwise i would have created a PR.... as i stated before&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;most probably that&apos;s not the correct final solution because a privilege name is essentially a JCR name which cannot be arbitrary string..... maybe it would therefore be better to fix the namespacedItemsList such that it actually reflects an namedItemsList that allows for valid JCR names that may or may not come with a namespace prefix.&lt;br/&gt;
while looking at the usage of namespacedItemsList i also noticed that the repo init parse seems to mandate that nodetype names are &apos;namespaced-items&apos; which would also not be correct IMHO as the same applies as for privilege names. so, you might want to take a closer look at that as well.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17352324" author="bdelacretaz" created="Thu, 27 May 2021 08:04:44 +0000"  >&lt;p&gt;I&apos;m still not sure whether the tests included in the attached &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10277&quot; title=&quot;REGISTER PRIVILEGE and SET ACL should support lists of STRING and NAMESPACED_ITEM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10277&quot;&gt;&lt;del&gt;SLING-10277&lt;/del&gt;&lt;/a&gt;.patch represent everything that needs to be fixed, i.e. would it be enough to make those tests pass? Can you confirm?&lt;/p&gt;

&lt;p&gt;I see the those tests introduce&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  register privilege withoutabstract_withaggregates with bla,jcr:read
  ...
  register &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; privilege withabstract_withaggregates with foo,jcr:read
  ...
  allow priv &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; larry
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which currently all cause parsing to fail.&lt;/p&gt;</comment>
                            <comment id="17352332" author="anchela" created="Thu, 27 May 2021 08:15:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, as far as i remember the tests include both issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;register privileges with both namespaces and and non-namespaced &lt;b&gt;aggregated&lt;/b&gt; privilege names&lt;/li&gt;
	&lt;li&gt;acl-line containing both namespaced and non-namespaced privilege names&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;what i don&apos;t recall if the tests also&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;register privileges with both namespaced and non-namespace privilege names... but that should be easy to add if missing... for example something like
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
register privilege sling:execute
register privilege sling_execute
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17352528" author="bdelacretaz" created="Thu, 27 May 2021 14:34:21 +0000"  >&lt;p&gt;I have implemented a fix in PR#12, please review.&lt;/p&gt;

&lt;p&gt;It&apos;s a grammar change only, both the &lt;tt&gt;userPrivilegesLine&lt;/tt&gt; and &lt;tt&gt;registerPrivilegeStatement&lt;/tt&gt; productions now use this for the list of privileges, I think that&apos;s what we want:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; privilegesList() :
{
    Token t = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; priv = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;();
}
{
    ( t=&amp;lt;NAMESPACED_ITEM&amp;gt; | t=&amp;lt;STRING&amp;gt; ) { priv.add(t.image); }
    ( &amp;lt;COMMA&amp;gt; ( t=&amp;lt;NAMESPACED_ITEM&amp;gt; | t=&amp;lt;STRING&amp;gt; ) { priv.add(t.image); } )*
    { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; priv; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17353129" author="bdelacretaz" created="Fri, 28 May 2021 09:32:09 +0000"  >&lt;p&gt;Implemented in commit be349ad, thank for reporting this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13023509" name="SLING-10277.patch" size="3360" author="angela" created="Wed, 7 Apr 2021 12:50:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pmco:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10274] Consistently use platform independent line separator</title>
                <link>https://issues.apache.org/jira/browse/SLING-10274</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, as discussed offline &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10268&quot; title=&quot;Use Operation.asRepoInitString instead of hardcoding repo-init statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10268&quot;&gt;&lt;del&gt;SLING-10268&lt;/del&gt;&lt;/a&gt; will introduce platform independent line separators for all generated repo-init statements. However, the converter code base seems to have a difficult history with line separators:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;originally they seemed to be mostly platform-independent but tests were not&lt;/li&gt;
	&lt;li&gt;test got fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/6c2ef9929c3e12acf4b7b104871816a6e3e15f4e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/6c2ef9929c3e12acf4b7b104871816a6e3e15f4e&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;then with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10121&quot; title=&quot;Unable to checkout and build org-apache-sling-feature-cpconverter on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10121&quot;&gt;&lt;del&gt;SLING-10121&lt;/del&gt;&lt;/a&gt; platform independent separators got replaced by \n &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/86b412dffc2c9c5654745f5ab1946d758b11004a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/86b412dffc2c9c5654745f5ab1946d758b11004a&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;IMHO going with platform independent separators would be better.... so, i would suggest to revert tests back and fix any potential remaining usages of \n in the code base. wdyt?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13369782">SLING-10274</key>
            <summary>Consistently use platform independent line separator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Apr 2021 12:07:55 +0000</created>
                <updated>Mon, 17 May 2021 11:38:39 +0000</updated>
                            <resolved>Wed, 7 Apr 2021 13:40:39 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17315483" author="cziegeler" created="Tue, 6 Apr 2021 12:15:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt; Just to be sure before &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10121&quot; title=&quot;Unable to checkout and build org-apache-sling-feature-cpconverter on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10121&quot;&gt;&lt;del&gt;SLING-10121&lt;/del&gt;&lt;/a&gt; tests were failing on windows - I personally consider \n platform independent as it is the same character on all platforms&lt;/p&gt;</comment>
                            <comment id="17315494" author="karlpauls" created="Tue, 6 Apr 2021 12:33:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, I suppose the question is: what is the expectation wrt. repoinit? We have the converter now use the repoinit parser objects to construct the repoinit - hence, we have to deal with the way they do their conversion to repoinit. Right now, that is using the platform line separator - hence, updating to the parser objects will break the tests again on windows. &lt;/p&gt;

&lt;p&gt;I guess the correct way would be to rewrite the tests as well to use the parser objects....&lt;/p&gt;</comment>
                            <comment id="17315509" author="cziegeler" created="Tue, 6 Apr 2021 12:52:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt; I see  - is it a good thing that the repoinit parser objects use platform dependent line separators?&lt;/p&gt;</comment>
                            <comment id="17316344" author="karlpauls" created="Wed, 7 Apr 2021 13:40:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, that is a good question - however, I think it doesn&apos;t have to be answered by the cpconverter as we are now using the parser objects. I changed the tests to use the parser objects as well for the expected repoinit - that should make it work (hopefully).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13368639">SLING-10268</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pkfs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10270] Disabling service users sets incorrect &quot;reason&quot; </title>
                <link>https://issues.apache.org/jira/browse/SLING-10270</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;UserVisitor&lt;/tt&gt; currently uses &lt;tt&gt;DisableServiceUser.getParametersDescription()&lt;/tt&gt; for the value of the &quot;disable reason&quot; string.&lt;/p&gt;

&lt;p&gt;That includes additional information besides the reason defined by the repoinit statement.&lt;/p&gt;

&lt;p&gt;The new &lt;tt&gt;getReason()&lt;/tt&gt; method introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10235&quot; title=&quot;DisableServiceUser does not allow to retrieve original disable-reason&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10235&quot;&gt;&lt;del&gt;SLING-10235&lt;/del&gt;&lt;/a&gt; allows for getting just the reason string, it should be used instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13369055">SLING-10270</key>
            <summary>Disabling service users sets incorrect &quot;reason&quot; </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Apr 2021 08:53:38 +0000</created>
                <updated>Mon, 21 Jun 2021 08:56:09 +0000</updated>
                            <resolved>Thu, 1 Apr 2021 09:06:55 +0000</resolved>
                                    <version>Repoinit JCR 1.1.34</version>
                                    <fixVersion>Repoinit JCR 1.1.36</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17313027" author="bdelacretaz" created="Thu, 1 Apr 2021 09:06:55 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/commit/5dd19a27f099bb44af1c366fdeceaa6f45b10eb6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 5dd19a2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13366033">SLING-10235</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pfy8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10265] JUNIT5 Test cases are failing when I use code &quot;new AemContext(ResourceResolverType.JCR_OAK)&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-10265</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I am unable to run test cases using JUNIT5 with JCR_OAK repository implementation in the test case code .&lt;/p&gt;

&lt;p&gt;Repository using JCR_MOCK works, the snippet below works&lt;/p&gt;

&lt;p&gt;private final AemContext aemContext = new AemContext(ResourceResolverType.JCR_MOCK);&#160; &#160;&lt;/p&gt;

&lt;p&gt;Where as this one throws exception:&lt;/p&gt;

&lt;p&gt;private final AemContext aemContext = new AemContext(ResourceResolverType.JCR_OAK);&#160; &#160;&lt;/p&gt;

&lt;p&gt;This is the error I am getting&#160;&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: Unable to initialize JCR_OAK resource resolver factory: Unable to invoke method &apos;activate&apos; for class org.apache.sling.testing.mock.sling.oak.OakMockSlingRepository Caused by: java.lang.NoSuchMethodError: org.apache.jackrabbit.oak.plugins.nodetype.constraint.Constraints.asPredicate(ILjava/lang/String;)Ljava/util/function/Predicate;&#160;&#160;summary JUNIT5 Test cases are failing when I use new AemContext(ResourceResolverType.JCR_OAK)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13368287">SLING-10265</key>
            <summary>JUNIT5 Test cases are failing when I use code &quot;new AemContext(ResourceResolverType.JCR_OAK)&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="11">Done</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="subramanya_vl">subramanya</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Mar 2021 06:06:24 +0000</created>
                <updated>Sun, 12 Sep 2021 07:52:01 +0000</updated>
                            <resolved>Sun, 12 Sep 2021 07:52:01 +0000</resolved>
                                    <version>Testing Sling Mock 2.6.0</version>
                                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17326436" author="csaba varga" created="Wed, 21 Apr 2021 11:00:28 +0000"  >&lt;p&gt;I&apos;m not a Sling developer, but I&apos;ve run into the exact same issue this week. In my case, it was caused by two incompatible sets of Sling API classes being on the classpath. One was included via Sling Mocks, the other was embedded into the AEM SDK API JAR.&lt;/p&gt;

&lt;p&gt;I could fix my issue by explicitly including org.apache.sling.api as a dependency before Sling Mocks and specifying a more recent version than what Sling Mocks would have pulled. This more recent version, while still technically a duplicate, played nicely with the classes coming from the AEM SDK.&lt;/p&gt;

&lt;p&gt;I hope this helps.&lt;/p&gt;</comment>
                            <comment id="17413667" author="sseifert@pro-vision.de" created="Sun, 12 Sep 2021 07:52:01 +0000"  >&lt;p&gt;first, update to latest version of sling-mock and sling-mock-oak (or, if you are using AEM Mocks, update to latest version of aem-mock and do not declare an explicit version for sling-mock). we fixed an issue with dependency management in latest sling-mock-oak release.&lt;/p&gt;

&lt;p&gt;secondly it is recommended to put the aem-mock/sling-mock test dependency at top in your pom, before the AEM SDK dependency.&lt;/p&gt;

&lt;p&gt;if you need more help for AEM Mocks, please come to &lt;a href=&quot;https://wcm.io/mailing-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wcm.io/mailing-lists.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pb88:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10262] Sling not picking up the SourceDirectory and gives error src\main\scripts does not exist </title>
                <link>https://issues.apache.org/jira/browse/SLING-10262</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Here is my plugin configuration and it specifies the source directory but sling still looking to default location&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;plugin&amp;gt;&amp;lt;plugin&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;artifactId&amp;gt;jspc-maven-plugin&amp;lt;/artifactId&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;version&amp;gt;2.2.2&amp;lt;/version&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;executions&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;execution&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  &amp;lt;configuration&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  &amp;lt;failOnError&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/failOnError&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  &amp;lt;printCompilationReport&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/printCompilationReport&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  &#160;  &amp;lt;sourceDirectory&amp;gt;${project.basedir}/src/main/jsps&amp;lt;/sourceDirectory&amp;gt;&#160;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  &amp;lt;showSuccess&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/showSuccess&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  &amp;lt;outputDirectory&amp;gt;${project.basedir}/target/jspc/&amp;lt;/outputDirectory&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  &amp;lt;/configuration&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;id&amp;gt;compile-jsp&amp;lt;/id&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;goals&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;goal&amp;gt;jspc&amp;lt;/goal&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/goals&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/execution&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/executions&amp;gt;&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Getting error&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- jspc-maven-plugin:2.2.2:jspc (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ project-war ---[INFO] --- jspc-maven-plugin:2.2.2:jspc (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ project-war ---[ERROR] Compilation Failureorg.apache.sling.scripting.jsp.jasper.JasperException: java.lang.IllegalStateException: basedir E:\project\src\main\scripts does not exist at org.apache.sling.maven.jspc.JspcMojo.executeInternal(JspcMojo.java:329) at org.apache.sling.maven.jspc.JspcMojo.execute(JspcMojo.java:223) at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134) at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:207) at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80) at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51) at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128) at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:307) at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:193) at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:106) at org.apache.maven.cli.MavenCli.execute(MavenCli.java:863) at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:288) at org.apache.maven.cli.MavenCli.main(MavenCli.java:199) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289) at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229) at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415) at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)Caused by: java.lang.IllegalStateException: basedir E:\project\src\main\scripts does not exist at org.codehaus.plexus.util.DirectoryScanner.scan(DirectoryScanner.java:308) at org.apache.sling.maven.jspc.JspcMojo.scanFiles(JspcMojo.java:256) at org.apache.sling.maven.jspc.JspcMojo.executeInternal(JspcMojo.java:282)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13367978">SLING-10262</key>
            <summary>Sling not picking up the SourceDirectory and gives error src\main\scripts does not exist </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ecstasy">ecstasy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Mar 2021 16:54:35 +0000</created>
                <updated>Fri, 26 Mar 2021 16:54:35 +0000</updated>
                                            <version>JSPC Maven Plugin 2.2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0p9c8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10254] SubscriberTest#testReceiveDelete fails randomly</title>
                <link>https://issues.apache.org/jira/browse/SLING-10254</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The test SubscriberTest#testReceiveDelete regularly fails in our Jenkins infrastructure. See for instance &lt;a href=&quot;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-distribution-journal/job/master/99/testReport/org.apache.sling.distribution.journal.impl.subscriber/SubscriberTest/testReceiveDelete/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. It fails with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error Message
Lambda expression in org.apache.sling.distribution.journal.impl.subscriber.SubscriberTest that uses org.apache.sling.distribution.journal.impl.subscriber.DistributionSubscriber: expected &amp;lt;RUNNING&amp;gt; but was &amp;lt;IDLE&amp;gt; within 30 seconds.
Stacktrace
org.awaitility.core.ConditionTimeoutException: Lambda expression in org.apache.sling.distribution.journal.impl.subscriber.SubscriberTest that uses org.apache.sling.distribution.journal.impl.subscriber.DistributionSubscriber: expected &amp;lt;RUNNING&amp;gt; but was &amp;lt;IDLE&amp;gt; within 30 seconds.
	at org.apache.sling.distribution.journal.impl.subscriber.SubscriberTest.waitSubscriber(SubscriberTest.java:465)
	at org.apache.sling.distribution.journal.impl.subscriber.SubscriberTest.testReceiveDelete(SubscriberTest.java:304)
Standard Output
2021-03-23 11:22:26,835 INFO [main] o.a.s.d.j.b.BookKeeper [BookKeeper.java : 122] Started bookkeeper subAgentName=SUB1AGENT, subSlingId=sub1sling, editable=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, maxRetries=-1, packageHandling=Off, packageNodeName=myserver.apache.org_aemdistribution_package. -  
2021-03-23 11:22:26,835 INFO [Queue Processor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Subscriber agent sub1agent] o.a.s.d.j.i.s.DistributionSubscriber [DistributionSubscriber.java : 283] Started Queue processor -  
2021-03-23 11:22:26,836 INFO [main] o.a.s.d.j.i.s.DistributionSubscriber [DistributionSubscriber.java : 197] Started Subscriber agent sub1agent at offset 0, subscribed to agent names [pub1agent] -  
2021-03-23 11:22:26,841 INFO [Queue Processor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Subscriber agent sub1agent] o.a.s.d.j.b.BookKeeper [BookKeeper.java : 142] Importing distribution &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; PackageMessage(pubSlingId=pub1sling, reqType=DELETE, pkgId=myid, pkgType=journal, pkgLength=0, pubAgentName=pub1agent, userId=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, paths=[/test], deepPaths=[]) at offset=0 -  
2021-03-23 11:22:26,843 INFO [Queue Processor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Subscriber agent sub1agent] o.a.s.d.j.b.PackageHandler [PackageHandler.java : 102] Deleting paths [/test] - retries=0, paths=/test, sub-sling-id=sub1sling, module=distribution, sub-agent-name=sub1agent, pub-sling-id=pub1sling, distribution-message-type=DELETE, &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-id=myid, pub-agent-name=pub1agent 
2021-03-23 11:22:56,983 INFO [Queue Processor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Subscriber agent sub1agent] o.a.s.d.j.i.s.DistributionSubscriber [DistributionSubscriber.java : 304] Stopped Queue processor -  
2021-03-23 11:22:56,984 INFO [main] o.a.s.d.j.i.s.DistributionSubscriber [DistributionSubscriber.java : 227] Stopped Subscriber agent sub1agent, subscribed to Publisher agent names [pub1agent] with &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; builder journal -  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13366960">SLING-10254</key>
            <summary>SubscriberTest#testReceiveDelete fails randomly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Mar 2021 11:32:56 +0000</created>
                <updated>Fri, 16 Jul 2021 07:39:32 +0000</updated>
                            <resolved>Tue, 23 Mar 2021 12:24:45 +0000</resolved>
                                    <version>Content Distribution Journal Core 0.1.0</version>
                                    <fixVersion>Content Distribution Journal Core 0.1.18</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0p32o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10250] Sending a test message leads to an error</title>
                <link>https://issues.apache.org/jira/browse/SLING-10250</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The commit below from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10066&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-10066&lt;/a&gt;&#160;(2021-02-11 16:44:16) introduced an error where a distribution without paths throws an exception.&lt;br/&gt;
 This occurs when sending a test request. The issue is visible in the UI as &quot;An error has occured while attempting to deliver a test package&quot;.&lt;/p&gt;

&lt;p&gt;The issue was fixed in a commit on the same sling issue on (2021-03-12 18:08:35).&#160;&lt;/p&gt;

&lt;p&gt;Unfortunately the code went into internal releases. So I wanted to document it existing here as a reference.&lt;/p&gt;

&lt;p&gt;Internal releases affected are:&lt;br/&gt;
 -&#160;org.apache.sling.distribution.journal-0.1.17-T20210211&lt;/p&gt;

&lt;p&gt;-&#160;org.apache.sling.distribution.journal-0.1.17-T20210301&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13366693">SLING-10250</key>
            <summary>Sending a test message leads to an error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cschneider">Christian Schneider</assignee>
                                    <reporter username="cschneider">Christian Schneider</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Mar 2021 09:53:13 +0000</created>
                <updated>Fri, 16 Jul 2021 07:39:34 +0000</updated>
                            <resolved>Mon, 22 Mar 2021 10:00:18 +0000</resolved>
                                                    <fixVersion>Content Distribution Journal Core 0.1.18</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17306910" author="marett" created="Tue, 23 Mar 2021 09:08:50 +0000"  >&lt;p&gt;This issue was noticed and fixed &lt;a href=&quot;https://issues.apache.org/jira/secure/EditComment!default.jspa?id=13352677&amp;amp;commentId=17300288&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cschneider&quot; class=&quot;user-hover&quot; rel=&quot;cschneider&quot;&gt;cschneider&lt;/a&gt; Apache Sling does hold the code of the UI you are referencing here and we don&apos;t maintain internal releases. We may stick to the existing versioning scheme and release process.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13022762" name="screenshot-1.png" size="10384" author="cschneider" created="Mon, 22 Mar 2021 10:03:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0p1fc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10247] javax.jcr no longer optional due to javax.jcr.lock.LockException in JCRSupportImpl</title>
                <link>https://issues.apache.org/jira/browse/SLING-10247</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/commit/d843c5dd34aa77727a155652b10229d1445c0e17#diff-23d7d8a02710bffeb33890b4a096e2cdfd881b622053ec143badb2183eaa9e4aR39&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/commit/d843c5dd34aa77727a155652b10229d1445c0e17#diff-23d7d8a02710bffeb33890b4a096e2cdfd881b622053ec143badb2183eaa9e4aR39&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13366535">SLING-10247</key>
            <summary>javax.jcr no longer optional due to javax.jcr.lock.LockException in JCRSupportImpl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Mar 2021 21:23:29 +0000</created>
                <updated>Sun, 13 Jun 2021 10:10:38 +0000</updated>
                            <resolved>Sun, 21 Mar 2021 08:10:39 +0000</resolved>
                                                    <fixVersion>Servlets POST 2.4.4</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17305637" author="olli" created="Sun, 21 Mar 2021 08:10:39 +0000"  >&lt;ul&gt;
	&lt;li&gt;Package &lt;tt&gt;javax.jcr.lock&lt;/tt&gt; added&lt;/li&gt;
	&lt;li&gt;Made all &lt;tt&gt;optional&lt;/tt&gt; imports &lt;tt&gt;dynamic&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0p0g8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10244] osgi-mock: Only inject services with direct match of registered interface</title>
                <link>https://issues.apache.org/jira/browse/SLING-10244</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10195&quot; title=&quot;osgi-mock: Dynamic reference filtering does not work when super type is used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10195&quot;&gt;&lt;del&gt;SLING-10195&lt;/del&gt;&lt;/a&gt; introduced a bug in osgi-mock, injecting services into a reference that were registered to an interface extending the requested interface. the interface the service is registered to and the interface of the reference have to match directly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13366481">SLING-10244</key>
            <summary>osgi-mock: Only inject services with direct match of registered interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Mar 2021 08:26:38 +0000</created>
                <updated>Tue, 23 Mar 2021 12:01:28 +0000</updated>
                            <resolved>Sat, 20 Mar 2021 08:28:45 +0000</resolved>
                                    <version>Testing OSGi Mock 3.1.0</version>
                                    <fixVersion>Testing OSGi Mock 3.1.2</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17305367" author="sseifert@pro-vision.de" created="Sat, 20 Mar 2021 08:28:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/commit/3a8c2d86e8cc747bf9901be717f24fa85d0d534e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/commit/3a8c2d86e8cc747bf9901be717f24fa85d0d534e&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13363045">SLING-10195</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0p048:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10237] NodePropertiesVisitor.convertToValue does not use ValueFactory</title>
                <link>https://issues.apache.org/jira/browse/SLING-10237</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the method &lt;tt&gt;NodePropertiesVisitor.convertToValue&lt;/tt&gt; uses specific implementations of &lt;tt&gt;javax.jcr.Value&lt;/tt&gt; from jackrabbit-commons instead of using the &lt;tt&gt;ValueFactory&lt;/tt&gt; associated with the JCR &lt;tt&gt;Session&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;while for trivial types like boolean/long etc it doesn&apos;t make a difference there are some issues with more sophisticated types like names, paths, dates that the impls in commons don&apos;t handle properly as far as i remember. but neither jackrabbit 2.x nor oak use those common values for conversion/creation. so, using the &lt;tt&gt;ValueFactory&lt;/tt&gt; would be a better choice.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13366068">SLING-10237</key>
            <summary>NodePropertiesVisitor.convertToValue does not use ValueFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Mar 2021 12:26:15 +0000</created>
                <updated>Thu, 18 Mar 2021 12:26:15 +0000</updated>
                                                                            <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0oxkg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10235] DisableServiceUser does not allow to retrieve original disable-reason</title>
                <link>https://issues.apache.org/jira/browse/SLING-10235</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, during preliminary investigation into &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10219&quot; title=&quot;Expand enforcing principal-based authorization option to repo-init&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10219&quot;&gt;&lt;del&gt;SLING-10219&lt;/del&gt;&lt;/a&gt; i noticed that there is no way to obtain the original disable reason from &lt;tt&gt;DisableServiceUser&lt;/tt&gt; operation.&lt;/p&gt;

&lt;p&gt;for the documented example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
disable service user deprecated_service_user : &lt;span class=&quot;code-quote&quot;&gt;&quot;Disabled user to make an example&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the jcr-repoinit &lt;tt&gt;UserVisitor.visitDisableServiceUser&lt;/tt&gt; will do the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void visitDisableServiceUser(DisableServiceUser dsu) {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username = dsu.getUsername();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason = dsu.getParametersDescription();
        [...]
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;however, &lt;tt&gt;DisableServiceUser.getParametersDescription&lt;/tt&gt; looks as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getParametersDescription() {
        StringBuilder sb = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringBuilder();
        sb.append(&lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getParametersDescription());
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.reason != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            sb.append(&lt;span class=&quot;code-quote&quot;&gt;&quot; : &quot;&lt;/span&gt;);
            sb.append(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.reason);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; sb.toString();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where &lt;tt&gt;super.getParametersDescription())&lt;/tt&gt; returns the &lt;tt&gt;userName&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;so, the resulting disable reason stored in the repository will be:&lt;br/&gt;
&quot;deprecated_service_user : Disabled user to make an example&quot;&lt;br/&gt;
instead of&lt;br/&gt;
&quot;Disabled user to make an example&quot;&lt;/p&gt;

&lt;p&gt;note, that there is no other way to retrieve the original reason (e.g. &lt;tt&gt;DisableServiceUser.getReason()&lt;/tt&gt; which means for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10219&quot; title=&quot;Expand enforcing principal-based authorization option to repo-init&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10219&quot;&gt;&lt;del&gt;SLING-10219&lt;/del&gt;&lt;/a&gt; that the param-description needs to be parsed again i.e. relying on implementation detail, which looks quite wrong.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13366033">SLING-10235</key>
            <summary>DisableServiceUser does not allow to retrieve original disable-reason</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Mar 2021 09:24:40 +0000</created>
                <updated>Sat, 1 May 2021 09:32:54 +0000</updated>
                            <resolved>Thu, 1 Apr 2021 08:55:32 +0000</resolved>
                                    <version>Repoinit Parser 1.6.6</version>
                                    <fixVersion>Repoinit Parser 1.6.8</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17303998" author="bdelacretaz" created="Thu, 18 Mar 2021 09:49:37 +0000"  >&lt;p&gt;Makes sense, I have added the missing &lt;tt&gt;DisableServiceUser.getReason()&lt;/tt&gt; method in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/287ca1c4f8c2269e2b20938d7f54e24f6d40c244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 287ca1c&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17306456" author="anchela" created="Mon, 22 Mar 2021 17:42:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, thanks for extending the &lt;tt&gt;DisableServiceUser&lt;/tt&gt; operation. however, shouldn&apos;t the implementation in sling.jcr.repoinit  be adjusted as well to make use of the new method in order to really write the correct reason to the repository?&lt;/p&gt;

&lt;p&gt;the current code is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void visitDisableServiceUser(DisableServiceUser dsu) {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username = dsu.getUsername();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason = dsu.getParametersDescription();
        log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Disabling service user {} reason {}&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] { username, reason });
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!UserUtil.disableUser(session, username, reason)) {
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Service user {} doesn&apos;t exist - assuming disable to be a noop.&quot;&lt;/span&gt;, username);
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            report(e, &lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to disable service user [&quot;&lt;/span&gt; + username + &lt;span class=&quot;code-quote&quot;&gt;&quot;]:&quot;&lt;/span&gt; + e);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the param-description as i said doesn&apos;t reflect the reason specified in the repo-init statement&lt;/p&gt;</comment>
                            <comment id="17307672" author="bdelacretaz" created="Wed, 24 Mar 2021 08:57:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;shouldn&apos;t the implementation in sling.jcr.repoinit be adjusted as well...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. I don&apos;t have time for that right now but feel free to make that change. I&apos;m not sure if the existing tests verify that disabling message, if not it would be good to add that as well.&lt;/p&gt;</comment>
                            <comment id="17307723" author="anchela" created="Wed, 24 Mar 2021 09:53:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, i don&apos;t have time either...... but feel free to clone the issue such that the 2 separate parts are reflected:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fix the operation in the parser&lt;/li&gt;
	&lt;li&gt;fix the implementation using the operation in jcr-repoinit that currently write to wrong string to the User.disable method.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17313020" author="bdelacretaz" created="Thu, 1 Apr 2021 08:55:05 +0000"  >&lt;p&gt;I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10270&quot; title=&quot;Disabling service users sets incorrect &amp;quot;reason&amp;quot; &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10270&quot;&gt;&lt;del&gt;SLING-10270&lt;/del&gt;&lt;/a&gt; for the &lt;tt&gt;UserVisitor&lt;/tt&gt; fix in the jcr-repoinit module.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13365437">SLING-10219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13369055">SLING-10270</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0oxco:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10230] DeleteServiceUser, DisableServiceUser extend from OperationWithPathOptions</title>
                <link>https://issues.apache.org/jira/browse/SLING-10230</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;i noticed that &lt;tt&gt;DeleteServiceUser&lt;/tt&gt; and &lt;tt&gt;DisableServiceUser&lt;/tt&gt; extend from the &lt;tt&gt;ServiceUserOperation&lt;/tt&gt;, which in turn extends from &lt;tt&gt;OperationWithPathOptions&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;however, neither delete nor disable actually allow for a &apos;with path&apos; or &apos;with forced path&apos; option.&lt;br/&gt;
note in contrast that &lt;tt&gt;DeleteGroup&lt;/tt&gt; and &lt;tt&gt;DeleteUser&lt;/tt&gt; are not defined as &lt;tt&gt;OperationWithPathOptions&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13365832">SLING-10230</key>
            <summary>DeleteServiceUser, DisableServiceUser extend from OperationWithPathOptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Mar 2021 13:02:08 +0000</created>
                <updated>Wed, 17 Mar 2021 13:02:08 +0000</updated>
                                                                            <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ow40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10228] Unused property PROP_NODETYPES in AclLine</title>
                <link>https://issues.apache.org/jira/browse/SLING-10228</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;while performing some initial investigations for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10219&quot; title=&quot;Expand enforcing principal-based authorization option to repo-init&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10219&quot;&gt;&lt;del&gt;SLING-10219&lt;/del&gt;&lt;/a&gt;, i noticed that &lt;tt&gt;AclLine&lt;/tt&gt; comes with a property &lt;tt&gt;AclLine.PROP_NODETYPES&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;while i found the following example in &lt;em&gt;test-33.txt&lt;/em&gt; , i couldn&apos;t find any usage in &lt;em&gt;org.apache.sling.jcr.repoinit&lt;/em&gt; or a more detailed explanation:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    # Optional nodetypes clause
    deny jcr:lockManagement on /apps, /content nodetypes sling:Folder, nt:unstructured
    # nodetypes clause with restriction clause
    deny jcr:modifyProperties on /apps, /content nodetypes sling:Folder, nt:unstructured restriction(rep:itemNames,prop1,prop2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;therefore, i am bit lost what the intention behind that optional &apos;nodetypes&apos; property would be in the first place as there exists no &apos;nodetypes&apos; property with any type of access control entry defined by either JCR or Jackrabbit API.&lt;/p&gt;

&lt;p&gt;i would therefore suggest to deprecate and ignore it upon parsing. &lt;/p&gt;


</description>
                <environment></environment>
        <key id="13365818">SLING-10228</key>
            <summary>Unused property PROP_NODETYPES in AclLine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Mar 2021 12:20:29 +0000</created>
                <updated>Wed, 26 May 2021 12:03:30 +0000</updated>
                                                                            <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17351540" author="anchela" created="Wed, 26 May 2021 06:32:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, what is your take on this bug report? maybe you can elaborate what the intention behind the &lt;em&gt;nodetypes&lt;/em&gt; clause in the ACLLine was? I don&apos;t see it implemented and I don&apos;t understand what it was intended to be used for. In case there is no reason for having it, I would recommend to either drop it from repo-init language altogether or at least officially deprecated it and log a warning (or throw UnsupportedOperationException).&lt;/p&gt;</comment>
                            <comment id="17351739" author="bdelacretaz" created="Wed, 26 May 2021 12:03:30 +0000"  >&lt;p&gt;As usual my memory doesn&apos;t help much about this but I dug in the code history and it looks like this &quot;optional nodetypes clause&quot; test was added for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8602&quot; title=&quot;Add support for PrincipalAccessControlList and ac-management by principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8602&quot;&gt;&lt;del&gt;SLING-8602&lt;/del&gt;&lt;/a&gt; ? I think the two &lt;tt&gt;-parser&lt;/tt&gt; patches attached there introduced those tests.&lt;/p&gt;

&lt;p&gt;If that doesn&apos;t correspond to any JCR functionality I agree to deprecate these statements. Throwing &lt;tt&gt;UnsupportedOperationException&lt;/tt&gt; can be a good idea if we clearly document the deprecation.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13365437">SLING-10219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ow0w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10225] Files with &quot;..&quot; In Name Throw 400 Exception</title>
                <link>https://issues.apache.org/jira/browse/SLING-10225</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9741&quot; title=&quot;Invalid path decomposition in case of multiple dots&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9741&quot;&gt;&lt;del&gt;SLING-9741&lt;/del&gt;&lt;/a&gt; and the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-engine/pull/11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;associated PR&lt;/a&gt; introduced a regression where the Sling Engine will return a 400 error on requests based on the presence of &quot;..&quot; in the URL when not preceded by a slash.&lt;/p&gt;

&lt;p&gt;This is an issue as file names may contain multiple periods and it is not obvious that it would cause an issue to upload a file with two periods in the name. &lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;Reproductionsteps%3A&quot;&gt;&lt;/a&gt;Reproduction steps:&lt;/h2&gt;

&lt;ul&gt;
	&lt;li&gt;Update a Sling instance to use Engine 2.7.4&lt;/li&gt;
	&lt;li&gt;Upload a file containing .. in the path&lt;/li&gt;
	&lt;li&gt;Attempt to get the file or any path with the file as a suffix&lt;/li&gt;
	&lt;li&gt;Note this returns a 400 error&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13365643">SLING-10225</key>
            <summary>Files with &quot;..&quot; In Name Throw 400 Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="dklco">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Mar 2021 22:07:13 +0000</created>
                <updated>Fri, 25 Jun 2021 11:18:27 +0000</updated>
                            <resolved>Mon, 31 May 2021 15:41:12 +0000</resolved>
                                    <version>Engine 2.7.4</version>
                                    <fixVersion>Engine 2.7.6</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6000">1h 40m</timespent>
                                <comments>
                            <comment id="17302940" author="dklco" created="Tue, 16 Mar 2021 22:14:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akanksha88&quot; class=&quot;user-hover&quot; rel=&quot;akanksha88&quot;&gt;akanksha88&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davidb&quot; class=&quot;user-hover&quot; rel=&quot;davidb&quot;&gt;davidb&lt;/a&gt; - any thoughts about the best way to resolve this? It seems like the specific problem this was meant to address was the selector string containing &quot;..&quot; or a path ending with &quot;..&quot; not &lt;em&gt;necessarily&lt;/em&gt; the full URL containing .. so instead of putting the test against the full path would it make sense to only test the selector string and path ending. Does that make sense? &lt;/p&gt;

&lt;p&gt;Or would this just make more sense to handle in the reverse proxy rather than building this into the Sling Engine? &lt;/p&gt;</comment>
                            <comment id="17304006" author="rombert" created="Thu, 18 Mar 2021 10:00:36 +0000"  >&lt;p&gt;I agree that allowing to upload a file and then disallowing access it something we must avoid. I think that also &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chaotic&quot; class=&quot;user-hover&quot; rel=&quot;chaotic&quot;&gt;chaotic&lt;/a&gt; can help us understand which cases are problematic, like two dots after the path separator and which ones are safe.&lt;/p&gt;</comment>
                            <comment id="17304160" author="chaotic" created="Thu, 18 Mar 2021 13:55:18 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I agree that the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9741&quot; title=&quot;Invalid path decomposition in case of multiple dots&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9741&quot;&gt;&lt;del&gt;SLING-9741&lt;/del&gt;&lt;/a&gt;, i.e &lt;tt&gt;path.contains(&quot;...&quot;)&lt;/tt&gt; is incomplete (at least for JCR), since &lt;tt&gt;.&lt;/tt&gt; is a valid node name character. Some ambiguity most likely cannot be avoided. &lt;br/&gt;
Actually, I would &lt;b&gt;not&lt;/b&gt; invalidate the path in the first place, but simply try to be a bit more consistent with the normalization. I&apos;m not sure if anything other than &lt;tt&gt;/../&lt;/tt&gt; or &lt;tt&gt;/..;foo/&lt;/tt&gt; should resolve to the parent. From a strict security POV however there is no right or wrong IMO, it&apos;s just different interpretations.  &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dklco&quot; class=&quot;user-hover&quot; rel=&quot;dklco&quot;&gt;dklco&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Or would this just make more sense to handle in the reverse proxy rather than building this into the Sling Engine?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think it&apos;s a combination of both - the decomposition from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9741&quot; title=&quot;Invalid path decomposition in case of multiple dots&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9741&quot;&gt;&lt;del&gt;SLING-9741&lt;/del&gt;&lt;/a&gt; is rather confusing (note, that additionally this is dependent on whether &lt;tt&gt;a.js&lt;/tt&gt; exists or not, so it&apos;s impossible for a static proxy to determine the correct resolution). But the problem of mismatching interpretations of &quot;..&quot; is &lt;a href=&quot;https://www.acunetix.com/blog/articles/a-fresh-look-on-reverse-proxy-related-attacks/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;not unique to Sling&lt;/a&gt; - I think the best we can do is to be consistent and well documented.&lt;/p&gt;</comment>
                            <comment id="17354520" author="karlpauls" created="Mon, 31 May 2021 15:41:12 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-engine/pull/15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-engine/pull/15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We now don&apos;t allow empty selectors as well as not allowing /.. or really and segment with only dots.&lt;/p&gt;</comment>
                            <comment id="17360811" author="wunsch" created="Thu, 10 Jun 2021 11:42:29 +0000"  >&lt;p&gt;Not allowing &quot;empty selectors&quot; will cause problems (eg. Classic UI creates URLs with empty selectors).&lt;/p&gt;

&lt;p&gt;The reason/background for&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10225&quot; title=&quot;Files with &amp;quot;..&amp;quot; In Name Throw 400 Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10225&quot;&gt;&lt;del&gt;SLING-10225&lt;/del&gt;&lt;/a&gt; was - not to interpret &quot;/...&amp;lt;extension&amp;gt;&quot; (eg. &quot;&amp;lt;url&amp;gt;/...html&quot;) as &quot;even though the resource does not exist, move one level up and deliver the parent-resource&quot;.&lt;/p&gt;



&lt;p&gt;I would assume a lot of projects might have &quot;empty selectors&quot; in their code , something like &quot;&amp;lt;url/&amp;lt;valid-resource-name&amp;gt;.&amp;lt;selector1&amp;gt;..html&quot; .&lt;/p&gt;

&lt;p&gt;If empty selectors are not longer allowed, this will cause trouble for multiple SLING projects, I imagine.&lt;/p&gt;

&lt;p&gt;So I would see the solution for both problems to allow &quot;..&amp;lt;extension&amp;gt;&quot; as &quot;empty-selector, but NOT to interprete this as &quot;resolve to the parent resource&quot;.&lt;/p&gt;

&lt;p&gt;Hope this makes sense.&lt;/p&gt;</comment>
                            <comment id="17360814" author="karlpauls" created="Thu, 10 Jun 2021 11:48:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wunsch&quot; class=&quot;user-hover&quot; rel=&quot;wunsch&quot;&gt;wunsch&lt;/a&gt;, this is released now and it is at least some improvement over &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10225&quot; title=&quot;Files with &amp;quot;..&amp;quot; In Name Throw 400 Exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10225&quot;&gt;&lt;del&gt;SLING-10225&lt;/del&gt;&lt;/a&gt; (at least I hope so). I think we have to see how it plays out - do you have something that fails?&lt;/p&gt;</comment>
                            <comment id="17360853" author="wunsch" created="Thu, 10 Jun 2021 12:36:16 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, thanks for getting back!&lt;br/&gt;
 Yes, Classic UI (AEM) is creating &quot;empty selectors&quot; which are now causing problems in Authoring - Classic UI.&lt;br/&gt;
 The same project is concerned about potentially using&#160; &quot;empty selectors&quot; in their &quot;website-project&quot; (but are not sure) - and would see it as problematic if &quot;suddenly&quot; the SLING behavior would change, causing websites to deliver &quot;400&quot; on these pages.&lt;br/&gt;
 Generally a lot of SLING-projects could use &quot;empty selectors&quot; in their projects without problems, which would change as soon as Sling-Engine 2.7.4 would be used (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9741&quot; title=&quot;Invalid path decomposition in case of multiple dots&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9741&quot;&gt;&lt;del&gt;SLING-9741&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;(late Addition: &lt;br/&gt;
I need to test this with Sling-Engine 7.4.6 (this ticket&apos;s resolution) - I have not done that. Will do and come back. from the comments I however understood, that &quot;empty selectors&quot; would generally not be allowed due to this ticket&apos;s resolution.)&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13328021">SLING-9741</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13385829">SLING-10554</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ouy8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10223] org.osgi.framework.Version not contained in lib folder generated from appassembly</title>
                <link>https://issues.apache.org/jira/browse/SLING-10223</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The application generated by &lt;tt&gt;appassembler-maven-plugin&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/1b7f2e900f1474809b66b57c0564e1727ff8c8de/pom.xml#L291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/1b7f2e900f1474809b66b57c0564e1727ff8c8de/pom.xml#L291&lt;/a&gt;) only includes dependencies of scope &quot;provided&quot; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/1b7f2e900f1474809b66b57c0564e1727ff8c8de/src/main/assembly/bin.xml#L65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/1b7f2e900f1474809b66b57c0564e1727ff8c8de/src/main/assembly/bin.xml#L65&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;But the class &lt;tt&gt;org.osgi.framework.Version&lt;/tt&gt; used in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/1b7f2e900f1474809b66b57c0564e1727ff8c8de/src/main/java/org/apache/sling/feature/cpconverter/handlers/BundleEntryHandler.java#L99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/1b7f2e900f1474809b66b57c0564e1727ff8c8de/src/main/java/org/apache/sling/feature/cpconverter/handlers/BundleEntryHandler.java#L99&lt;/a&gt; is only provided via the dependency &lt;tt&gt;org.osgi:osgi.core:7.0.0&lt;/tt&gt; in scope &lt;tt&gt;compile&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/1b7f2e900f1474809b66b57c0564e1727ff8c8de/pom.xml#L170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/1b7f2e900f1474809b66b57c0564e1727ff8c8de/pom.xml#L170&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;That leads to exceptions like these&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NoClassDefFoundError: org/osgi/framework/Version
	at org.apache.sling.feature.cpconverter.handlers.BundleEntryHandler.handle(BundleEntryHandler.java:99)
	at org.apache.sling.feature.cpconverter.ContentPackage2FeatureModelConverter.onFile(ContentPackage2FeatureModelConverter.java:401)
	at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse(BaseVaultPackageScanner.java:110)
	at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse(BaseVaultPackageScanner.java:102)
	at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse(BaseVaultPackageScanner.java:102)
	at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse(BaseVaultPackageScanner.java:102)
	at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse(BaseVaultPackageScanner.java:102)
	at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse(BaseVaultPackageScanner.java:102)
	at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse(BaseVaultPackageScanner.java:102)
	at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse(BaseVaultPackageScanner.java:89)
	at org.apache.sling.feature.cpconverter.ContentPackage2FeatureModelConverter.secondPass(ContentPackage2FeatureModelConverter.java:246)
	at org.apache.sling.feature.cpconverter.ContentPackage2FeatureModelConverter.convert(ContentPackage2FeatureModelConverter.java:194)
	at org.apache.sling.feature.cpconverter.cli.ContentPackage2FeatureModelConverterLauncher.run(ContentPackage2FeatureModelConverterLauncher.java:184)
	at picocli.CommandLine.execute(CommandLine.java:996)
	at picocli.CommandLine.access$900(CommandLine.java:142)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1199)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1167)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1075)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1358)
	at picocli.CommandLine.run(CommandLine.java:1817)
	at picocli.CommandLine.run(CommandLine.java:1747)
	at org.apache.sling.feature.cpconverter.cli.ContentPackage2FeatureModelConverterLauncher.main(ContentPackage2FeatureModelConverterLauncher.java:308)
Caused by: java.lang.ClassNotFoundException: org.osgi.framework.Version
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:522)
	... 22 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13365599">SLING-10223</key>
            <summary>org.osgi.framework.Version not contained in lib folder generated from appassembly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Mar 2021 17:25:32 +0000</created>
                <updated>Mon, 7 Jun 2021 11:34:07 +0000</updated>
                            <resolved>Wed, 17 Mar 2021 06:39:33 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17303141" author="kwin" created="Wed, 17 Mar 2021 06:39:33 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/900722ed2966f4cecda71819188b131163001089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/900722ed2966f4cecda71819188b131163001089&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13382451">SLING-10460</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ouog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10222] Always report warnings</title>
                <link>https://issues.apache.org/jira/browse/SLING-10222</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently warnings are only reported if errors occured. Warnings should always be reported&lt;/p&gt;</description>
                <environment></environment>
        <key id="13365504">SLING-10222</key>
            <summary>Always report warnings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Mar 2021 12:56:24 +0000</created>
                <updated>Fri, 2 Apr 2021 11:27:43 +0000</updated>
                            <resolved>Tue, 16 Mar 2021 13:02:49 +0000</resolved>
                                    <version>Feature Model API Regions Extension 1.1.20</version>
                                    <fixVersion>Feature Model API Regions Extension 1.2.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17302495" author="cziegeler" created="Tue, 16 Mar 2021 13:02:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/f049f71d894a7ea516ec22c7ab6a60f033b8d8ab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/f049f71d894a7ea516ec22c7ab6a60f033b8d8ab&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ou3c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10221] Package metadata appears below jcr_root in transformed packages</title>
                <link>https://issues.apache.org/jira/browse/SLING-10221</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The package metadata is only supposed to be placed below &lt;tt&gt;META_INF&lt;/tt&gt; (compare with &lt;a href=&quot;http://jackrabbit.apache.org/filevault/metadata.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/filevault/metadata.html&lt;/a&gt;). But transformed packages have additional static metadata below &lt;tt&gt;jcr_root&lt;/tt&gt;: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/acf8c533590b9a081d64ca8e4787bed600f36386/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/VaultPackageAssembler.java#L255&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/acf8c533590b9a081d64ca8e4787bed600f36386/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/VaultPackageAssembler.java#L255&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13365479">SLING-10221</key>
            <summary>Package metadata appears below jcr_root in transformed packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Mar 2021 10:51:41 +0000</created>
                <updated>Mon, 17 May 2021 11:38:38 +0000</updated>
                            <resolved>Wed, 17 Mar 2021 07:07:32 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17303150" author="kwin" created="Wed, 17 Mar 2021 07:07:32 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/40b3bbd5c8c0d6bf79f30af19f1e24a6d441aa96&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/40b3bbd5c8c0d6bf79f30af19f1e24a6d441aa96&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0otxs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10216] Servlets annotations ITs fail with Java 11</title>
                <link>https://issues.apache.org/jira/browse/SLING-10216</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Similarly to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9980&quot; title=&quot;Junit Core ITs fail with jdk11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9980&quot;&gt;&lt;del&gt;SLING-9980&lt;/del&gt;&lt;/a&gt; the tests fail with &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] org.ops4j.pax.exam.TestContainerException: org.osgi.framework.BundleException: Could not create bundle object.
[INFO] Caused by: org.osgi.framework.BundleException: Could not create bundle object.
[INFO] Caused by: java.lang.UnsupportedOperationException: Unable to add extension bundle.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13365299">SLING-10216</key>
            <summary>Servlets annotations ITs fail with Java 11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Mar 2021 17:11:36 +0000</created>
                <updated>Thu, 10 Jun 2021 09:11:04 +0000</updated>
                            <resolved>Tue, 16 Mar 2021 12:38:20 +0000</resolved>
                                    <version>Sling Servlet Annotations 1.2.4</version>
                                    <fixVersion>Sling Servlet Annotations 1.2.6</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17302474" author="bdelacretaz" created="Tue, 16 Mar 2021 12:38:20 +0000"  >&lt;p&gt;Fixed by switching to a &lt;tt&gt;verify.groovy&lt;/tt&gt; script to validate the generated service properties, in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-annotations/commit/1003355f8b88c31861e0b685cdb5cc372d891bf7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 1003355f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17302601" author="kwin" created="Tue, 16 Mar 2021 15:12:15 +0000"  >&lt;p&gt;How is the Java11 compatibility related to the switch to groovy based ITs? Can&apos;t we check the service properties just as well with Java ITs?&lt;/p&gt;</comment>
                            <comment id="17302640" author="bdelacretaz" created="Tue, 16 Mar 2021 15:48:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;How is the Java11 compatibility related to the switch to groovy based ITs?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-annotations/blob/master/src/it/annotations-it/verify.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;verify.groovy&lt;/a&gt; script is called by &lt;tt&gt;maven-invoker-plugin&lt;/tt&gt;, so I&apos;d say any Java 11 issues would be that plugin&apos;s concern?&lt;/p&gt;

&lt;p&gt;Anyway, I haven&apos;t seen any warnings related to this way of testing in Java 11. There&apos;s a &quot;illegal reflective access operation has occurred&quot; warning in the build but that&apos;s caused by &lt;tt&gt;ianal-maven-plugin&lt;/tt&gt;, unrelated.&lt;/p&gt;</comment>
                            <comment id="17302673" author="kwin" created="Tue, 16 Mar 2021 16:24:26 +0000"  >&lt;p&gt;But IMHO this was solved by getting rid of the pax-exam dependency. You can check for the service properties just as well with Java (i.e. maven-failsafe-plugin). That is in general compatible with Java 11 as well (even more than maven-invoker-plugin I would say, as that is using an outdated groovy version, see &lt;a href=&quot;https://issues.apache.org/jira/browse/MINVOKER-274&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MINVOKER-274&lt;/a&gt;). Any particular reason why those checks cannot be performed in Java ITs?&lt;/p&gt;</comment>
                            <comment id="17302674" author="bdelacretaz" created="Tue, 16 Mar 2021 16:29:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;Any particular reason why those checks cannot be performed in Java ITs?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Using the verify script sounds natural and lightweight with maven-invoker-plugin, but you&apos;re right that Java tests should work as well.&lt;/p&gt;

&lt;p&gt;Unless there&apos;s a concrete problem with the current tests I&apos;m not planning to change them, but if someone wants to do that I&apos;m fine.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13344594">SLING-9980</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0osts:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10215] repoinit analyser fails if there is no repoinit section</title>
                <link>https://issues.apache.org/jira/browse/SLING-10215</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;the analyzer complains about an invalid repoinit, but the created test project does not contain any repoinit statement.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13365183">SLING-10215</key>
            <summary>repoinit analyser fails if there is no repoinit section</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="davidb">A. J. David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Mar 2021 09:07:43 +0000</created>
                <updated>Sat, 1 May 2021 09:32:53 +0000</updated>
                            <resolved>Wed, 14 Apr 2021 08:05:35 +0000</resolved>
                                    <version>Feature Model Analyser 1.3.22</version>
                                    <fixVersion>Repoinit Parser 1.6.8</fixVersion>
                    <fixVersion>Feature Model Analyser 1.3.24</fixVersion>
                                    <component>Feature Model Analyser</component>
                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17301522" author="cziegeler" created="Mon, 15 Mar 2021 09:12:47 +0000"  >&lt;p&gt;The analyser only acts on existing OSGi configurations and an existing repoinit extension &lt;/p&gt;

&lt;p&gt;What is the actual problem? Could it maybe be that the cp2fm converter creates an empty repoinit extension? Which is then evaluated as invalid?&lt;/p&gt;</comment>
                            <comment id="17301555" author="davidb" created="Mon, 15 Mar 2021 09:59:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; that could very well be. This problem was observed with the &lt;a href=&quot;https://github.com/adobe/aemanalyser-maven-plugin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;aemanalyser-maven-plugin&lt;/a&gt; which converts the content packages first.&lt;/p&gt;

&lt;p&gt;Basically it was reporting an error like this appeared on a project does not contain any repoinit statement:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] repoinit: Parsing error in repoinit from extension : Encountered &quot;&quot; at line 15, column 37.
Was expecting one of:
    

[ERROR] Analyser detected errors on feature
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17301558" author="cziegeler" created="Mon, 15 Mar 2021 10:04:38 +0000"  >&lt;p&gt;If that&apos;s the case, I think we should do two fixed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fix the analyser that it skips empty values&lt;/li&gt;
	&lt;li&gt;create an issue for the cp2fm converter to not create a repoinit section if no repoinit is available&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17301751" author="cziegeler" created="Mon, 15 Mar 2021 16:32:15 +0000"  >&lt;p&gt;Looking again at the message, I think this issue is invalid - clearly repoinit had a line 15 so it is not empty &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I also checked the cp2fm converter and that one only generates repoinit, if the project actually has some repoinit.&lt;/p&gt;</comment>
                            <comment id="17302375" author="kwin" created="Tue, 16 Mar 2021 09:49:38 +0000"  >&lt;p&gt;It would help to expose the full repoinit section in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-analyser/blob/642a14742f1b940ab658979dc4828248d092610b/src/main/java/org/apache/sling/feature/analyser/task/impl/CheckRepoinit.java#L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-analyser/blob/642a14742f1b940ab658979dc4828248d092610b/src/main/java/org/apache/sling/feature/analyser/task/impl/CheckRepoinit.java#L92&lt;/a&gt;, although it might be really long. For me the error rather looks like an error with the repoinit parser instead of the analyser...&lt;/p&gt;

&lt;p&gt;I dug a bit deeper and to me it seems that the spooling from Reader to Writer in &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/blob/master/src/main/java/org/apache/sling/repoinit/parser/impl/RepoInitParserService.java#L46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-repoinit-parser/blob/master/src/main/java/org/apache/sling/repoinit/parser/impl/RepoInitParserService.java#L46&lt;/a&gt;&lt;br/&gt;
is assuming that 0 is never returned.&lt;/p&gt;

&lt;p&gt;Apache Commons IO only ends once -1 is being returned which seems the safer approach&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-io/blob/2d238d87dadf2860f9488133f9d250946bea3eb4/src/main/java/org/apache/commons/io/IOUtils.java#L1307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-io/blob/2d238d87dadf2860f9488133f9d250946bea3eb4/src/main/java/org/apache/commons/io/IOUtils.java#L1307&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Also relying on Commons IO for that logic seems better.&lt;/p&gt;</comment>
                            <comment id="17302412" author="kwin" created="Tue, 16 Mar 2021 10:34:51 +0000"  >&lt;p&gt;I provided a potential fix for this in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/pull/7/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-repoinit-parser/pull/7/files&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17302605" author="kwin" created="Tue, 16 Mar 2021 15:14:43 +0000"  >&lt;p&gt;Made the parser more reliable in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/05cae0cce036f83494f3722a6b693abbc6e182ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/05cae0cce036f83494f3722a6b693abbc6e182ca&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17311206" author="kwin" created="Tue, 30 Mar 2021 07:15:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davidb&quot; class=&quot;user-hover&quot; rel=&quot;davidb&quot;&gt;davidb&lt;/a&gt; Do you have a test feature model with which I can reproduce? I am not really sure that the fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10215?focusedCommentId=17302605&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17302605&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-10215?focusedCommentId=17302605&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17302605&lt;/a&gt; is sufficient.&lt;/p&gt;

&lt;p&gt;Regarding:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Basically it was reporting an error like this appeared on a project does not contain any repoinit statement.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;aemanalyser-maven-plugin always creates a merged feature model with the one from AEM (which contains some repoinit configurations), therefore even if the project does not contain them, it will inherit them from AEM.&lt;/p&gt;</comment>
                            <comment id="17313039" author="bdelacretaz" created="Thu, 1 Apr 2021 09:21:49 +0000"  >&lt;p&gt;FYI, I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10271&quot; title=&quot;Use a streaming filter in RepoInitParserService&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10271&quot;&gt;&lt;del&gt;SLING-10271&lt;/del&gt;&lt;/a&gt; to make the streaming reader issue specific to the parser.&lt;/p&gt;</comment>
                            <comment id="17320790" author="cziegeler" created="Wed, 14 Apr 2021 08:05:35 +0000"  >&lt;p&gt;Updated to latest repoinit parser in feature model analyser&lt;/p&gt;</comment>
                            <comment id="17320810" author="kwin" created="Wed, 14 Apr 2021 08:40:07 +0000"  >&lt;p&gt;Would be good to have a test covering this. Basically &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/05cae0cce036f83494f3722a6b693abbc6e182ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-repoinit-parser/commit/05cae0cce036f83494f3722a6b693abbc6e182ca&lt;/a&gt; was just a best guess fix. Anyone has an example feature model which consistently lead to that exception?&lt;/p&gt;</comment>
                            <comment id="17320825" author="cziegeler" created="Wed, 14 Apr 2021 09:04:14 +0000"  >&lt;p&gt;I think this was a false alarm - as the message clearly indicates that there is in fact repoinit.&lt;/p&gt;</comment>
                            <comment id="17320828" author="kwin" created="Wed, 14 Apr 2021 09:06:34 +0000"  >&lt;p&gt;I have seen the message from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10215?focusedCommentId=17301555&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17301555&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-10215?focusedCommentId=17301555&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17301555&lt;/a&gt; myself on projects having a repoinit, but I can unfortunately no longer reproduce it, so there was a real issue somewhere and I am not sure what fixed it/if it is fixed at all. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; Do you still have the failing project or feature file handy?&lt;/p&gt;</comment>
                            <comment id="17320953" author="joerghoh" created="Wed, 14 Apr 2021 12:11:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I remember that I had a bunch of repoinit issues a while back, but unfortunately I haven&apos;t stored them.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13369064">SLING-10271</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0os40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10207] NodeTypesEntryHandler does not consider CND files outside of META-INF/vault/nodetypes.cnd</title>
                <link>https://issues.apache.org/jira/browse/SLING-10207</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Namespace and node type definitions can not only be given in &lt;tt&gt;/META-INF/vault/nodetypes.cnd&lt;/tt&gt; but also in other cnd files inside the package (compare with Package property &lt;tt&gt;cndPattern&lt;/tt&gt;, &lt;a href=&quot;http://jackrabbit.apache.org/filevault/properties.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/filevault/properties.html&lt;/a&gt;).&lt;br/&gt;
Currently only those in &lt;tt&gt;/META-INF/vault/nodetypes.cnd&lt;/tt&gt; are correctly extracted though: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/acf8c533590b9a081d64ca8e4787bed600f36386/src/main/java/org/apache/sling/feature/cpconverter/handlers/NodeTypesEntryHandler.java#L32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/acf8c533590b9a081d64ca8e4787bed600f36386/src/main/java/org/apache/sling/feature/cpconverter/handlers/NodeTypesEntryHandler.java#L32&lt;/a&gt; because the pattern being registered in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/acf8c533590b9a081d64ca8e4787bed600f36386/src/main/java/org/apache/sling/feature/cpconverter/ContentPackage2FeatureModelConverter.java#L425&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/acf8c533590b9a081d64ca8e4787bed600f36386/src/main/java/org/apache/sling/feature/cpconverter/ContentPackage2FeatureModelConverter.java#L425&lt;/a&gt; does not start with the &lt;tt&gt;jcr_root&lt;/tt&gt; prefix.&lt;/p&gt;

&lt;p&gt;CND patterns in package are matched against absolute repository paths while patterns for &lt;tt&gt;AbstractRegexEntryHandler&lt;/tt&gt; are matched against the ZIP package file path.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13363790">SLING-10207</key>
            <summary>NodeTypesEntryHandler does not consider CND files outside of META-INF/vault/nodetypes.cnd</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Mar 2021 09:23:18 +0000</created>
                <updated>Mon, 17 May 2021 11:38:43 +0000</updated>
                            <resolved>Wed, 17 Mar 2021 11:51:29 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17303292" author="cziegeler" created="Wed, 17 Mar 2021 10:55:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; If I read the code correctly, it only looks for /META-INF/vault/nodetypes.cnd but not for all *.cnd files in that directory. So I think that needs to be fixed as well&lt;/p&gt;</comment>
                            <comment id="17303294" author="kwin" created="Wed, 17 Mar 2021 10:57:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Right, that is another bug. I will extend the PR....&lt;/p&gt;

&lt;p&gt;Update: Done&lt;/p&gt;</comment>
                            <comment id="17303319" author="kwin" created="Wed, 17 Mar 2021 11:51:29 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/703044640a3720dfee9c5acd8dec82fd895c864e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/703044640a3720dfee9c5acd8dec82fd895c864e&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ojmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10202] Incorrect evaluation of executed hashes</title>
                <link>https://issues.apache.org/jira/browse/SLING-10202</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Only the first executed hash is compared against the list of candidates in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/blob/4a78330354e4d65402ec8bf37dfda20346826651/src/main/java/org/apache/sling/jcr/packageinit/impl/ExecutionPlanRepoInitializer.java#L127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/blob/4a78330354e4d65402ec8bf37dfda20346826651/src/main/java/org/apache/sling/jcr/packageinit/impl/ExecutionPlanRepoInitializer.java#L127&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If another item in the executed hash list is containing the hash already, the execution plan is  still scheduled for execution. I think a nested loop is somehow missing here.&lt;/p&gt;

&lt;p&gt;The assumption that the execution plan order in candidates and processed hashes is always the same is wrong.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13363331">SLING-10202</key>
            <summary>Incorrect evaluation of executed hashes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Mar 2021 17:23:02 +0000</created>
                <updated>Thu, 10 Jun 2021 09:12:26 +0000</updated>
                            <resolved>Tue, 16 Mar 2021 15:17:08 +0000</resolved>
                                    <version>JCR Package Init 1.0.2</version>
                                    <fixVersion>JCR Package Init 1.0.4</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17298210" author="kwin" created="Tue, 9 Mar 2021 17:23:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; Can you have a look?&lt;/p&gt;</comment>
                            <comment id="17302609" author="kwin" created="Tue, 16 Mar 2021 15:17:08 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/commit/5e224d601bc9fda181d6238c5ddc689c92df3c2e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/commit/5e224d601bc9fda181d6238c5ddc689c92df3c2e&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ogso:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10201] Unclosed session in ExecutionPlanRepoInitializer</title>
                <link>https://issues.apache.org/jira/browse/SLING-10201</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The admin session opened at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/blob/4a78330354e4d65402ec8bf37dfda20346826651/src/main/java/org/apache/sling/jcr/packageinit/impl/ExecutionPlanRepoInitializer.java#L157&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/blob/4a78330354e4d65402ec8bf37dfda20346826651/src/main/java/org/apache/sling/jcr/packageinit/impl/ExecutionPlanRepoInitializer.java#L157&lt;/a&gt; is never closed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13363321">SLING-10201</key>
            <summary>Unclosed session in ExecutionPlanRepoInitializer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Mar 2021 17:07:28 +0000</created>
                <updated>Thu, 10 Jun 2021 09:12:26 +0000</updated>
                            <resolved>Wed, 10 Mar 2021 08:09:45 +0000</resolved>
                                    <version>JCR Package Init 1.0.2</version>
                                    <fixVersion>JCR Package Init 1.0.4</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17298209" author="kwin" created="Tue, 9 Mar 2021 17:23:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; Please cross-check.&lt;/p&gt;</comment>
                            <comment id="17298624" author="kwin" created="Wed, 10 Mar 2021 08:09:45 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/commit/92bad43059e35312d1819bcdb1548ada13f7a0d4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/commit/92bad43059e35312d1819bcdb1548ada13f7a0d4&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ogqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10200] Provide the importer errors as queue properties</title>
                <link>https://issues.apache.org/jira/browse/SLING-10200</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The queue API currently exposes the number of attempts to import a given entry but not the logs corresponding to the last attempt. The logs typically contain the root cause for the failure.&lt;/p&gt;

&lt;p&gt;Providing the logs as properties of each queue item will allow investigating the root cause of increasing attempts without having to access and scrape logs.&lt;/p&gt;

&lt;p&gt;By using the default GET servlet, we currently obtain the following informations&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl -u admin:admin localhost:9500/libs/sling/distribution/services/agents/publish.-1.json | jq &lt;span class=&quot;code-quote&quot;&gt;&apos;.queues&apos;&lt;/span&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent/queue/list&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: [
    &lt;span class=&quot;code-quote&quot;&gt;&quot;00b6b2a8-e63a-49e8-9481-1700312c3e59-publishSubscriber&quot;&lt;/span&gt;
  ],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;00b6b2a8-e63a-49e8-9481-1700312c3e59-publishSubscriber&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;capabilities&quot;&lt;/span&gt;: [],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent/queue&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;RUNNING&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: [
      &lt;span class=&quot;code-quote&quot;&gt;&quot;aemdistribution_package-0@576438706&quot;&lt;/span&gt;
    ],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;itemsCount&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;empty&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;aemdistribution_package-0@576438706&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;size&quot;&lt;/span&gt;: 3771,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;paths&quot;&lt;/span&gt;: [
        &lt;span class=&quot;code-quote&quot;&gt;&quot;/libs&quot;&lt;/span&gt;
      ],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent/queue/item&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;action&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;ADD&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;aemdistribution_package-0@576438706&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;time&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Fri Mar 05 15:56:56 UTC 2021&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;QUEUED&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;userid&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;admin&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;attempts&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;
    }
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We would add two properties, a `message` and `stackTrace` corresponding to the last processing attempt.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;publish&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;queues&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent/queue/list&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: [
      &lt;span class=&quot;code-quote&quot;&gt;&quot;8ca33c66-4c3a-459f-a61d-6a5a02a8a2a5-publishSubscriber&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;ce0d68de-9be9-4165-a951-e106cb963d5b-publishSubscriber&quot;&lt;/span&gt;
    ],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;8ca33c66-4c3a-459f-a61d-6a5a02a8a2a5-publishSubscriber&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;capabilities&quot;&lt;/span&gt;: [
        &lt;span class=&quot;code-quote&quot;&gt;&quot;removable&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;clearable&quot;&lt;/span&gt;
      ],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent/queue&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;BLOCKED&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: [
        &lt;span class=&quot;code-quote&quot;&gt;&quot;-0@85098&quot;&lt;/span&gt;
      ],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;itemsCount&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;empty&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;-0@85098&quot;&lt;/span&gt;: {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;size&quot;&lt;/span&gt;: 4291,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;paths&quot;&lt;/span&gt;: [
          &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/test&quot;&lt;/span&gt;
        ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;errorTrace&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.Throwable: Error processing distribution &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; dstrpck-1615494012187-af61eeb4-be2e-43d2-974d-797387a8f96a at offset 85098 first path /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/test. Retry attempts 127/infinite. Url: https:&lt;span class=&quot;code-comment&quot;&gt;//aemk8s.blob.core.windows.net/aem-distribution/42361682-65c2-4f58-b378-384e9a14f4d4?sig=%2Fv%2FZNjyPTzPOvP0OauuqKbvQmoatK4ZXM4DgFw7BViY%3D&amp;amp;se=2021-03-21T20%3A20%3A12Z&amp;amp;sv=2019-02-02&amp;amp;sp=r&amp;amp;sr=b, retrying, Message: javax.jcr.AccessDeniedException: OakAccess0000: Access denied\n\tat org.apache.sling.distribution.journal.queue.impl.QueueErrors.toThrowable(QueueErrors.java:68)\n\tat org.apache.sling.distribution.journal.queue.impl.QueueErrors.handleEvent(QueueErrors.java:63)\n\tat org.apache.felix.eventadmin.impl.handler.EventHandlerProxy.sendEvent(EventHandlerProxy.java:431)\n\tat org.apache.felix.eventadmin.impl.tasks.HandlerTask.runWithoutDenylistTiming(HandlerTask.java:82)\n\tat org.apache.felix.eventadmin.impl.tasks.SyncDeliverTasks.execute(SyncDeliverTasks.java:107)\n\tat org.apache.felix.eventadmin.impl.tasks.AsyncDeliverTasks$TaskExecuter.run(AsyncDeliverTasks.java:167)\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n\tat java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834)\nCaused by: java.lang.Throwable: org.apache.sling.distribution.common.DistributionException: javax.jcr.AccessDeniedException: OakAccess0000: Access denied\n\tat org.apache.sling.distribution.serialization.impl.vlt.FileVaultContentSerializer.importFromStream(FileVaultContentSerializer.java:170)\n\tat org.apache.sling.distribution.packaging.impl.InMemoryDistributionPackageBuilder.installPackageInternal(InMemoryDistributionPackageBuilder.java:119)\n\tat org.apache.sling.distribution.packaging.impl.AbstractDistributionPackageBuilder.installPackage(AbstractDistributionPackageBuilder.java:156)\n\tat org.apache.sling.distribution.monitor.impl.MonitoringDistributionPackageBuilder.installPackage(MonitoringDistributionPackageBuilder.java:92)\n\tat org.apache.sling.distribution.serialization.impl.vlt.VaultDistributionPackageBuilderFactory.installPackage(VaultDistributionPackageBuilderFactory.java:340)\n\tat org.apache.sling.distribution.journal.bookkeeper.PackageHandler.installAddPackage(PackageHandler.java:78)\n\tat org.apache.sling.distribution.journal.bookkeeper.PackageHandler.apply(PackageHandler.java:61)\n\tat org.apache.sling.distribution.journal.bookkeeper.BookKeeper.importPackage(BookKeeper.java:149)\n\tat org.apache.sling.distribution.journal.impl.subscriber.DistributionSubscriber.processQueueItem(DistributionSubscriber.java:354)\n\tat org.apache.sling.distribution.journal.impl.subscriber.DistributionSubscriber.fetchAndProcessQueueItem(DistributionSubscriber.java:311)\n\tat org.apache.sling.distribution.journal.impl.subscriber.DistributionSubscriber.processQueue(DistributionSubscriber.java:287)\n\tat java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834)\nCaused by: javax.jcr.AccessDeniedException: OakAccess0000: Access denied\n\tat org.apache.jackrabbit.oak.api.CommitFailedException.asRepositoryException(CommitFailedException.java:232)\n\tat org.apache.jackrabbit.oak.api.CommitFailedException.asRepositoryException(CommitFailedException.java:213)\n\tat org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.newRepositoryException(SessionDelegate.java:684)\n\tat org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.save(SessionDelegate.java:505)\n\tat org.apache.jackrabbit.oak.jcr.session.SessionImpl$8.performVoid(SessionImpl.java:424)\n\tat org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.performVoid(SessionDelegate.java:275)\n\tat org.apache.jackrabbit.oak.jcr.session.SessionImpl.save(SessionImpl.java:421)\n\tat com.adobe.granite.repository.impl.CRX3SessionImpl.save(CRX3SessionImpl.java:207)\n\tat org.apache.jackrabbit.vault.fs.io.AutoSave.save(AutoSave.java:177)\n\tat org.apache.jackrabbit.vault.fs.io.Importer.run(Importer.java:441)\n\tat org.apache.sling.distribution.serialization.impl.vlt.FileVaultContentSerializer.importFromStream(FileVaultContentSerializer.java:162)\n\t... 11 more\nCaused by: org.apache.jackrabbit.oak.api.CommitFailedException: OakAccess0000: Access denied\n\tat org.apache.jackrabbit.oak.security.authorization.permission.PermissionValidator.checkIsGranted(PermissionValidator.java:352)\n\tat org.apache.jackrabbit.oak.security.authorization.permission.PermissionValidator.checkPermissions(PermissionValidator.java:205)\n\tat org.apache.jackrabbit.oak.security.authorization.permission.PermissionValidator.childNodeAdded(PermissionValidator.java:145)\n\tat org.apache.jackrabbit.oak.spi.commit.VisibleValidator.childNodeAdded(VisibleValidator.java:104)\n\tat org.apache.jackrabbit.oak.spi.commit.VisibleValidator.childNodeAdded(VisibleValidator.java:30)\n\tat org.apache.jackrabbit.oak.spi.commit.CompositeEditor.childNodeAdded(CompositeEditor.java:107)\n\tat org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeAdded(EditorDiff.java:115)\n\tat org.apache.jackrabbit.oak.segment.MapRecord$4.childNodeAdded(MapRecord.java:465)\n\tat org.apache.jackrabbit.oak.segment.MapRecord.compare(MapRecord.java:527)\n\tat org.apache.jackrabbit.oak.segment.MapRecord.compare(MapRecord.java:462)\n\tat org.apache.jackrabbit.oak.segment.SegmentNodeState.compareAgainstBaseState(SegmentNodeState.java:651)\n\tat org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeChanged(EditorDiff.java:147)\n\tat org.apache.jackrabbit.oak.composite.CompositeNodeState$WrappingDiff.childNodeChanged(CompositeNodeState.java:309)\n\tat org.apache.jackrabbit.oak.composite.CompositeNodeState$ChildrenDiffFilter.childNodeChanged(CompositeNodeState.java:256)\n\tat org.apache.jackrabbit.oak.segment.MapRecord$3.childNodeChanged(MapRecord.java:430)\n\tat org.apache.jackrabbit.oak.segment.MapRecord$4.childNodeChanged(MapRecord.java:471)\n\tat org.apache.jackrabbit.oak.segment.MapRecord.compare(MapRecord.java:517)\n\tat org.apache.jackrabbit.oak.segment.MapRecord.compare(MapRecord.java:462)\n\tat org.apache.jackrabbit.oak.segment.MapRecord.compare(MapRecord.java:420)\n\tat org.apache.jackrabbit.oak.segment.SegmentNodeState.compareAgainstBaseState(SegmentNodeState.java:651)\n\tat org.apache.jackrabbit.oak.composite.CompositeNodeState.compareAgainstBaseState(CompositeNodeState.java:163)\n\tat org.apache.jackrabbit.oak.spi.commit.EditorDiff.process(EditorDiff.java:51)\n\tat org.apache.jackrabbit.oak.spi.commit.EditorHook.processCommit(EditorHook.java:54)\n\tat org.apache.jackrabbit.oak.spi.commit.CompositeHook.processCommit(CompositeHook.java:60)\n\tat org.apache.jackrabbit.oak.composite.CommitHookEnhancer.processCommit(CommitHookEnhancer.java:55)\n\tat org.apache.jackrabbit.oak.segment.scheduler.Commit.apply(Commit.java:99)\n\tat org.apache.jackrabbit.oak.segment.scheduler.LockBasedScheduler.execute(LockBasedScheduler.java:299)\n\tat org.apache.jackrabbit.oak.segment.scheduler.LockBasedScheduler.schedule(LockBasedScheduler.java:270)\n\tat org.apache.jackrabbit.oak.segment.SegmentNodeStore.merge(SegmentNodeStore.java:211)\n\tat org.apache.jackrabbit.oak.composite.CompositeNodeStore.merge(CompositeNodeStore.java:151)\n\tat org.apache.jackrabbit.oak.core.MutableRoot.commit(MutableRoot.java:252)\n\tat org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.commit(SessionDelegate.java:348)\n\tat org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.save(SessionDelegate.java:503)\n\t... 18 more\n\n\t... 11 more\n&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;errorMessage&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Error processing distribution &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; dstrpck-1615494012187-af61eeb4-be2e-43d2-974d-797387a8f96a at offset 85098 first path /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/test. Retry attempts 127/infinite. Url: https:&lt;span class=&quot;code-comment&quot;&gt;//aemk8s.blob.core.windows.net/aem-distribution/42361682-65c2-4f58-b378-384e9a14f4d4?sig=%2Fv%2FZNjyPTzPOvP0OauuqKbvQmoatK4ZXM4DgFw7BViY%3D&amp;amp;se=2021-03-21T20%3A20%3A12Z&amp;amp;sv=2019-02-02&amp;amp;sp=r&amp;amp;sr=b, retrying, Message: javax.jcr.AccessDeniedException: OakAccess0000: Access denied&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent/queue/item&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;action&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;ADD&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;-0@85098&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;time&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Thu Mar 11 20:20:12 UTC 2021&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;ERROR&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;userid&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;admin&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;attempts&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;127&quot;&lt;/span&gt;
      }
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;ce0d68de-9be9-4165-a951-e106cb963d5b-publishSubscriber&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;capabilities&quot;&lt;/span&gt;: [],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent/queue&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;RUNNING&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;items&quot;&lt;/span&gt;: [
        &lt;span class=&quot;code-quote&quot;&gt;&quot;-0@85098&quot;&lt;/span&gt;
      ],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;itemsCount&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;empty&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;-0@85098&quot;&lt;/span&gt;: {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;size&quot;&lt;/span&gt;: 4291,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;paths&quot;&lt;/span&gt;: [
          &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/test&quot;&lt;/span&gt;
        ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/agent/queue/item&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;action&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;ADD&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;-0@85098&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;time&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Thu Mar 11 20:20:12 UTC 2021&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;QUEUED&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;userid&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;admin&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;attempts&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;
      }
    }
  },
  &lt;span class=&quot;code-quote&quot;&gt;&quot;log&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/distribution/service/log&quot;&lt;/span&gt;
  },
  &lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;BLOCKED&quot;&lt;/span&gt;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13363263">SLING-10200</key>
            <summary>Provide the importer errors as queue properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Mar 2021 12:45:56 +0000</created>
                <updated>Tue, 6 Jul 2021 16:05:39 +0000</updated>
                            <resolved>Thu, 11 Mar 2021 22:19:44 +0000</resolved>
                                    <version>Content Distribution Journal Core 0.1.18</version>
                    <version>Content Distribution Core 0.4.6</version>
                                    <fixVersion>Content Distribution Journal Core 0.1.18</fixVersion>
                    <fixVersion>Content Distribution Core 0.4.6</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17298078" author="marett" created="Tue, 9 Mar 2021 13:52:24 +0000"  >&lt;p&gt;PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#48&lt;/a&gt; extends the DistributionQueueItemStatus with an `errorMessage` and `errorTrace` properties for each queue item.&lt;/p&gt;</comment>
                            <comment id="17299747" author="marett" created="Thu, 11 Mar 2021 17:19:33 +0000"  >&lt;p&gt;PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-journal/pull/67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#67&lt;/a&gt; extends the distribution journal bundle to keep track of the latest errors and map them to the queue items.&lt;/p&gt;</comment>
                            <comment id="17299909" author="marett" created="Thu, 11 Mar 2021 22:19:24 +0000"  >&lt;p&gt;Merged both PRs.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ogdk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10197] JobManager findJobs throws QuerySyntaxException with a quoted value</title>
                <link>https://issues.apache.org/jira/browse/SLING-10197</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This happens in AEM 6.5.6.0 when the &quot;templates&quot; are used and a cq:path with a single quote in the value is passed.&lt;/p&gt;

&lt;p&gt;Stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
02.03.2021 22:46:30.427 *WARN* [172.31.0.150 [1614725190407] POST /libs/wcm/core/content/reference.json HTTP/1.1] org.apache.sling.event.impl.jobs.JobManagerImpl Query syntax wrong /jcr:root/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/eventing/jobs&lt;span class=&quot;code-comment&quot;&gt;//element(*,slingevent:Job)[@event.job.topic = &lt;span class=&quot;code-quote&quot;&gt;&apos;com/day/cq/replication/job/scene7&apos;&lt;/span&gt; and not(@slingevent:finishedState) and ((@cq:path = &lt;span class=&quot;code-quote&quot;&gt;&apos;/content/dam/images-vrt-video/canvas/als-je-eens-wist/extra&apos;&lt;/span&gt;s/THUMBNAIL Corona-maakt-ons-gezin-hechter foto Ines Keygnaert.jpeg&apos;))] order by @slingevent:created ascending
&lt;/span&gt;org.apache.sling.api.resource.QuerySyntaxException: java.text.ParseException: Query:
/jcr:root/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/eventing/jobs&lt;span class=&quot;code-comment&quot;&gt;//element(*,slingevent:Job)[@event.job.topic = &lt;span class=&quot;code-quote&quot;&gt;&apos;com/day/cq/replication/job/scene7&apos;&lt;/span&gt; and not(@slingevent:finishedState) and ((@cq:path = &lt;span class=&quot;code-quote&quot;&gt;&apos;/content/dam/images-vrt-video/canvas/als-je-eens-wist/extra&apos;&lt;/span&gt;s/THUMBNAIL Corona-maakt-ons-gezin-hechter foto Ines Keygnaert.jpeg(*)&apos;))] order by @slingevent:created ascending
&lt;/span&gt;        at org.apache.sling.jcr.resource.internal.helper.jcr.BasicQueryLanguageProvider.findResources(BasicQueryLanguageProvider.java:87)
        at org.apache.sling.resourceresolver.impl.providers.stateful.AuthenticatedResourceProvider.findResources(AuthenticatedResourceProvider.jav
a:260)
        at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.findResources(ResourceResolverControl.java:457)
        at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.findResources(ResourceResolverImpl.java:548)
        at org.apache.sling.event.impl.jobs.JobManagerImpl.findJobs(JobManagerImpl.java:523)
        at com.day.cq.replication.impl.queue.ReplicationQueueImpl.hasEntries(ReplicationQueueImpl.java:178)
        at com.day.cq.replication.impl.ReplicationStatusImpl.isPending(ReplicationStatusImpl.java:111)
        at com.day.cq.replication.impl.ReplicationStatusImpl.isDelivered(ReplicationStatusImpl.java:169)
        at com.day.cq.wcm.core.impl.reference.ActivationReferenceSearchServlet.doGet(ActivationReferenceSearchServlet.java:162)
        at com.day.cq.wcm.core.impl.reference.ActivationReferenceSearchServlet.doPost(ActivationReferenceSearchServlet.java:91)  &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Issue is at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/org.apache.sling.event-4.2.12/src/main/java/org/apache/sling/event/impl/jobs/JobManagerImpl.java#L505&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/blob/org.apache.sling.event-4.2.12/src/main/java/org/apache/sling/event/impl/jobs/JobManagerImpl.java#L505&lt;/a&gt;, where &quot;value&quot; is not escaped.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13363057">SLING-10197</key>
            <summary>JobManager findJobs throws QuerySyntaxException with a quoted value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wim.symons">Wim Symons</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Mar 2021 16:33:34 +0000</created>
                <updated>Mon, 6 Jun 2022 14:12:29 +0000</updated>
                            <resolved>Mon, 6 Jun 2022 14:12:04 +0000</resolved>
                                    <version>Event 4.2.12</version>
                                                    <component>Event</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17550493" author="joerghoh" created="Mon, 6 Jun 2022 14:12:04 +0000"  >&lt;p&gt;closing as duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8413&quot; title=&quot;JobManagerImpl.findJobs does not escape some values when running queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8413&quot;&gt;&lt;del&gt;SLING-8413&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13232654">SLING-8413</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13300554">SLING-9393</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0of3s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10196] Creation of groups indeterministic</title>
                <link>https://issues.apache.org/jira/browse/SLING-10196</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The creation of groups with repoinit is not deterministic. If a group is created once via repoinit, then created manually, it is not re-created in the next run.&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;

&lt;p&gt;(1) Search for group &quot;dummyims&quot; - failed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
(2) Create a repoinit script containing the line &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create group dummyims
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(3) Deploy repoinitscript (via maven)&lt;br/&gt;
(4) Search for group &quot;dummyims&quot; - found &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
(6) Manually delete  &quot;dummyims&quot; - deleted &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
(7) Redeploy via maven&lt;br/&gt;
(8) Search for &quot;dummyims&quot; - failed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Expected behaviour would be, that the group would be recreated.&lt;br/&gt;
The group will be re-created, when it is created in a different path, e.g. with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create group dummyims with path /home/groups/test1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;deleted and then created under the default path... but that&apos;s nothing we can do reliably over several stages. &lt;/p&gt;




</description>
                <environment></environment>
        <key id="13363051">SLING-10196</key>
            <summary>Creation of groups indeterministic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="-achim">Achim Koch</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Mar 2021 15:49:51 +0000</created>
                <updated>Mon, 8 Mar 2021 16:10:32 +0000</updated>
                            <resolved>Mon, 8 Mar 2021 16:10:32 +0000</resolved>
                                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17297488" author="kwin" created="Mon, 8 Mar 2021 16:00:33 +0000"  >&lt;p&gt;The problem is that repoinit is only executed either during start or when some OSGi configuration has changed. Your case triggered none of those.&lt;/p&gt;</comment>
                            <comment id="17297493" author="-achim" created="Mon, 8 Mar 2021 16:10:13 +0000"  >&lt;p&gt;That makes sense.. I figured that much. So I tried to outsmart OSGi by setting a comment in the config:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
### 0001
scripts=[&quot;
    create group dummyims
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which didn&apos;t help.. but now that you confirmed my previous idea.. I gave it another try .. and actually &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
scripts=[&quot;
    ### 0001
    create group dummyims
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;did trigger a change. Thx.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0of2g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10195] osgi-mock: Dynamic reference filtering does not work when super type is used</title>
                <link>https://issues.apache.org/jira/browse/SLING-10195</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the logic introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7794&quot; title=&quot;osgi-mock: Dynamic reference properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7794&quot;&gt;&lt;del&gt;SLING-7794&lt;/del&gt;&lt;/a&gt; does not work if the service reference does not use the type directly, but an interface/super-interface/super-type of it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13363045">SLING-10195</key>
            <summary>osgi-mock: Dynamic reference filtering does not work when super type is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Mar 2021 15:26:44 +0000</created>
                <updated>Sat, 20 Mar 2021 08:27:13 +0000</updated>
                            <resolved>Mon, 8 Mar 2021 15:33:43 +0000</resolved>
                                    <version>Testing OSGi Mock 3.0.0</version>
                                    <fixVersion>Testing OSGi Mock 3.1.0</fixVersion>
                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17297460" author="sseifert@pro-vision.de" created="Mon, 8 Mar 2021 15:33:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/commit/e802ec1bf9faa221725edba67890e1484c9ad63b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/commit/e802ec1bf9faa221725edba67890e1484c9ad63b&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13366481">SLING-10244</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0of14:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10190] org.apache.sling.serviceusermapper:1.5.2 breaks Sling Mocks</title>
                <link>https://issues.apache.org/jira/browse/SLING-10190</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;reason is that serviceusermapper is uses constructor injection on it&apos;s OSGi component.&lt;br/&gt;
once &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10189&quot; title=&quot;OSGi Mocks: Support Constructor Injection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10189&quot;&gt;&lt;del&gt;SLING-10189&lt;/del&gt;&lt;/a&gt; is provided, we have to switch the instantiation in sling-mock.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13362582">SLING-10190</key>
            <summary>org.apache.sling.serviceusermapper:1.5.2 breaks Sling Mocks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Mar 2021 11:39:38 +0000</created>
                <updated>Fri, 12 Mar 2021 19:55:33 +0000</updated>
                            <resolved>Mon, 8 Mar 2021 20:25:11 +0000</resolved>
                                    <version>Testing Sling Mock 3.0.0</version>
                                    <fixVersion>Testing Sling Mock 3.0.2</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17297682" author="sseifert@pro-vision.de" created="Mon, 8 Mar 2021 20:25:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-sling-mock/commit/a193d4f6db7bee7af05c2c931c69515b3563ee00&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-sling-mock/commit/a193d4f6db7bee7af05c2c931c69515b3563ee00&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13362531">SLING-10189</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0oc6g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10182] Analyze fails to evaluate when the aggregate feature contains the bundle being built</title>
                <link>https://issues.apache.org/jira/browse/SLING-10182</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;BundleDescriptorImpl fails to load the manifest if the URL for the bundle points at a folder as it assumes the URL passed in points at a jar file.&lt;/p&gt;

&lt;p&gt;I noticed this while trying to add an it-testing aggregate feature so a bundle could test itself in an integration test.&#160; In this scenario, the URL for the local bundle gets passed to the&#160;BundleDescriptorImpl as a file URL pointing at the target/classes folder and fails the analyze-feature goal with this error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.io.FileNotFoundException: /home/projects/sling-org-apache-sling-jcr-maintenance/target/classes (Is a directory)
    at java.io.RandomAccessFile.open0 (Native Method)
    at java.io.RandomAccessFile.open (RandomAccessFile.java:345)
    at java.io.RandomAccessFile.&amp;lt;init&amp;gt; (RandomAccessFile.java:259)
    at java.io.RandomAccessFile.&amp;lt;init&amp;gt; (RandomAccessFile.java:214)
    at java.util.zip.ZipFile$Source.&amp;lt;init&amp;gt; (ZipFile.java:1285)
    at java.util.zip.ZipFile$Source.get (ZipFile.java:1251)
    at java.util.zip.ZipFile$CleanableResource.&amp;lt;init&amp;gt; (ZipFile.java:732)
    at java.util.zip.ZipFile$CleanableResource.get (ZipFile.java:849)
    at java.util.zip.ZipFile.&amp;lt;init&amp;gt; (ZipFile.java:247)
    at java.util.zip.ZipFile.&amp;lt;init&amp;gt; (ZipFile.java:177)
    at java.util.jar.JarFile.&amp;lt;init&amp;gt; (JarFile.java:348)
    at java.util.jar.JarFile.&amp;lt;init&amp;gt; (JarFile.java:319)
    at java.util.jar.JarFile.&amp;lt;init&amp;gt; (JarFile.java:285)
    at org.apache.sling.feature.io.IOUtils.getJarFileFromURL (IOUtils.java:242)
    at org.apache.sling.feature.scanner.impl.BundleDescriptorImpl.getManifest (BundleDescriptorImpl.java:75)
    at org.apache.sling.feature.scanner.impl.BundleDescriptorImpl.&amp;lt;init&amp;gt; (BundleDescriptorImpl.java:83)
    at org.apache.sling.feature.scanner.Scanner.doScan (Scanner.java:146)
    at org.apache.sling.feature.scanner.Scanner.scanBundle (Scanner.java:117)
    at org.apache.sling.feature.scanner.Scanner.getBundleInfos (Scanner.java:162)
    at org.apache.sling.feature.scanner.Scanner.scan (Scanner.java:227)
    at org.apache.sling.feature.analyser.Analyser.analyse (Analyser.java:188)
    at org.apache.sling.feature.maven.mojos.AnalyseFeaturesMojo.execute (AnalyseFeaturesMojo.java:157)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Expected that the&#160;BundleDescriptorImpl should check if the address is a file url pointing at a local directory and try to load the META-INF/MANIFEST.MF&#160; as a file within that directory.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13362170">SLING-10182</key>
            <summary>Analyze fails to evaluate when the aggregate feature contains the bundle being built</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Mar 2021 19:04:48 +0000</created>
                <updated>Sat, 1 May 2021 09:33:21 +0000</updated>
                            <resolved>Wed, 3 Mar 2021 19:16:16 +0000</resolved>
                                                    <fixVersion>Feature Model Analyser 1.3.24</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17294757" author="enorman" created="Wed, 3 Mar 2021 19:16:17 +0000"  >&lt;p&gt;Fixed at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-analyser/commit/642a14742f1b940ab658979dc4828248d092610b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-analyser/commit/642a14742f1b940ab658979dc4828248d092610b&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o9n4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10178] Queueitem should be moved to error queue if the distribution package does not exist anymore</title>
                <link>https://issues.apache.org/jira/browse/SLING-10178</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There can be a case when the distribution package has been processed but the queueitem has not been removed properly and is being re-processed. In such a case (when the associated distribution package is null), &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/master/src/main/java/org/apache/sling/distribution/agent/impl/SimpleDistributionAgentQueueProcessor.java#L159-L162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the queue item is simply removed&lt;/a&gt;. Thus, the user does not have the ability to check what happened. If a queueitem was sent to processing without the corresponding distribution package, then something must have errored, either the package was distributed successfully but the queueitem was not &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/master/src/main/java/org/apache/sling/distribution/queue/impl/simple/SimpleDistributionQueueProcessor.java#L55&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;removed successfully by the QueueProcessor&lt;/a&gt; or some other code bug. In such a case we can consider moving the queueitem to error queue instead of just removing it with an error log.&lt;/p&gt;

&lt;p&gt;cc - &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashishc&quot; class=&quot;user-hover&quot; rel=&quot;ashishc&quot;&gt;ashishc&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13361691">SLING-10178</key>
            <summary>Queueitem should be moved to error queue if the distribution package does not exist anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mohiaror">Mohit Arora</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Mar 2021 20:53:50 +0000</created>
                <updated>Tue, 20 Apr 2021 21:27:28 +0000</updated>
                                            <version>Content Distribution Core 0.4.2</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17326112" author="mohiaror" created="Tue, 20 Apr 2021 21:27:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cschneider&quot; class=&quot;user-hover&quot; rel=&quot;cschneider&quot;&gt;cschneider&lt;/a&gt; can you please review this JIRA and provide your inputs?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o6ow:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10177] Multiple data-sly-attribute blocks on one HTL tag don&apos;t work correctty</title>
                <link>https://issues.apache.org/jira/browse/SLING-10177</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://github.com/adobe/htl-spec/issues/92:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/adobe/htl-spec/issues/92:&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When multiple &lt;tt&gt;data-sly-attribute=&quot;${model.map}&quot;&lt;/tt&gt; are used on a single HTL element, only the last one is evaluated. &lt;/p&gt;

&lt;p&gt;Given that the &lt;tt&gt;model&lt;/tt&gt; and &lt;tt&gt;model2&lt;/tt&gt; have a method &lt;tt&gt;map&lt;/tt&gt; that returns a String -&amp;gt; String map, the following HTL code will not render attributes defined in &lt;tt&gt;model2.map&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
// model1.map -&amp;gt; \{&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;val a&apos;&lt;/span&gt;}
// model2.map -&amp;gt; \{&lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;val b&apos;&lt;/span&gt; }
 &amp;lt;div
 data-sly-use.model1=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.Model1&quot;&lt;/span&gt;
 data-sly-use.model2=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.Model2&quot;&lt;/span&gt;
 data-sly-attribute=&lt;span class=&quot;code-quote&quot;&gt;&quot;${model1.map}&quot;&lt;/span&gt;
 data-sly-attribute=&lt;span class=&quot;code-quote&quot;&gt;&quot;${model2.map}&quot;&lt;/span&gt;&amp;gt;
 &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a name=&quot;ExpectedBehaviour&quot;&gt;&lt;/a&gt;Expected Behaviour&lt;/h3&gt;
&lt;p&gt;Expected HTML output&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
 &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div a=&lt;span class=&quot;code-quote&quot;&gt;&quot;val a&quot;&lt;/span&gt; b=&lt;span class=&quot;code-quote&quot;&gt;&quot;val b&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a name=&quot;ActualBehaviour&quot;&gt;&lt;/a&gt;Actual Behaviour&lt;/h3&gt;
&lt;p&gt;Actual HTL output&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
 &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div b=&lt;span class=&quot;code-quote&quot;&gt;&quot;val b&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13361572">SLING-10177</key>
            <summary>Multiple data-sly-attribute blocks on one HTL tag don&apos;t work correctty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Mar 2021 10:28:01 +0000</created>
                <updated>Wed, 28 Apr 2021 15:10:38 +0000</updated>
                            <resolved>Mon, 15 Mar 2021 16:15:01 +0000</resolved>
                                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17334792" author="radu.cotescu" created="Wed, 28 Apr 2021 15:10:38 +0000"  >&lt;p&gt;In the HTML 5 specification, specifically in the HTML syntax chapter dedicated to attributes &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, there&apos;s this paragraph:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;There must never be two or more attributes on the same start tag whose names are an ASCII case-insensitive match for each other.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -&#160;&lt;a href=&quot;https://html.spec.whatwg.org/multipage/syntax.html#attributes-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://html.spec.whatwg.org/multipage/syntax.html#attributes-2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o5yg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10174] Feature attribute &quot;$schema&quot;:  is read add Artifact Extension</title>
                <link>https://issues.apache.org/jira/browse/SLING-10174</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a feature Json that uses the &quot;$schema&quot; Attribute for an better integration with eclipse json content assist and validation.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
&lt;span class=&quot;code-quote&quot;&gt;&quot;$schema&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;local:../../../../Feature-1.0.0.schema.json&quot;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&quot;bundles&quot;&lt;/span&gt;: [
  &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling:org.apache.sling.api:2.20.0&quot;&lt;/span&gt;
  ]
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;when running the `feature-maven-plugin` i got this exception because it tryed to read this attribute as an Extension, and by default all unnamed extensions are Artifact Type.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Internal error: java.lang.RuntimeException: Unable to read feature /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/home/stbischof/dev/git/geckoFeatures/org.gecko.feature.gogo.ssh/src/main/features/feature.json: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/home/stbischof/dev/git/geckoFeatures/org.gecko.feature.gogo.ssh/src/main/features/feature.json : Key artifact is not a valid artifact id : local:../../../../Feature-1.0.0.schema.json -&amp;gt; [Help 1]
org.apache.maven.InternalErrorException: Internal error: java.lang.RuntimeException: Unable to read feature /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/home/stbischof/dev/git/geckoFeatures/org.gecko.feature.gogo.ssh/src/main/features/feature.json
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:120)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:957)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:289)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:193)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)
Caused by: java.lang.RuntimeException: Unable to read feature /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/home/stbischof/dev/git/geckoFeatures/org.gecko.feature.gogo.ssh/src/main/features/feature.json
	at org.apache.sling.feature.maven.Preprocessor.readProjectFeatures(Preprocessor.java:330)
	at org.apache.sling.feature.maven.Preprocessor.process(Preprocessor.java:145)
	at org.apache.sling.feature.maven.Preprocessor.process(Preprocessor.java:110)
	at org.apache.sling.feature.maven.mojos.DependencyLifecycleParticipant.afterProjectsRead(DependencyLifecycleParticipant.java:79)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:264)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)
	... 11 more
Caused by: java.io.IOException: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/home/stbischof/dev/git/geckoFeatures/org.gecko.feature.gogo.ssh/src/main/features/feature.json : Key artifact is not a valid artifact id : local:../../../../Feature-1.0.0.schema.json
	at org.apache.sling.feature.io.json.FeatureJSONReader.checkTypeArtifactId(FeatureJSONReader.java:456)
	at org.apache.sling.feature.io.json.FeatureJSONReader.readArtifacts(FeatureJSONReader.java:195)
	at org.apache.sling.feature.io.json.FeatureJSONReader.readExtensions(FeatureJSONReader.java:364)
	at org.apache.sling.feature.io.json.FeatureJSONReader.readFeature(FeatureJSONReader.java:709)
	at org.apache.sling.feature.io.json.FeatureJSONReader.read(FeatureJSONReader.java:77)
	at org.apache.sling.feature.maven.Preprocessor.readProjectFeatures(Preprocessor.java:314)
	... 17 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13361373">SLING-10174</key>
            <summary>Feature attribute &quot;$schema&quot;:  is read add Artifact Extension</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bischofs@jena.de">Stefan Bischof</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Feb 2021 16:00:25 +0000</created>
                <updated>Tue, 16 Mar 2021 16:33:51 +0000</updated>
                                                                            <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17292669" author="cziegeler" created="Mon, 1 Mar 2021 06:48:01 +0000"  >&lt;p&gt;I&apos;m not sure if it is common practice to reference the schema from within the data.&lt;/p&gt;</comment>
                            <comment id="17292716" author="bischofs@jena.de" created="Mon, 1 Mar 2021 08:20:15 +0000"  >&lt;p&gt;I agree that it is NOT common practice to reference the schema from within the data.&lt;br/&gt;
I came up with this as a tooling fix for my eclipse JSON-Editor (needs this to give code-assist).&lt;br/&gt;
And my generated Feature Files should not contain this schema.&lt;/p&gt;

&lt;p&gt;But I am also sure that is is not the best way trying to handle $schema and $id as an ARRIFACT Extension.&lt;/p&gt;</comment>
                            <comment id="17292719" author="cziegeler" created="Mon, 1 Mar 2021 08:27:18 +0000"  >&lt;p&gt;The JSON format for a feature is unfortunately a little bit too optimized as it treats every unknown root property as an extension. That was not the best choice we did.&lt;br/&gt;
The question here is whether having $schema in the data is a workaround for a tooling problem and should better be solved in the tooling / configuration for the tooling - or if this is a common problem. &lt;br/&gt;
If it is the former then there is nothing to do here, if it is the latter we must treat those properties to avoid them being handled as an extension&lt;/p&gt;</comment>
                            <comment id="17292742" author="karlpauls" created="Mon, 1 Mar 2021 08:59:46 +0000"  >&lt;p&gt;IIRC, the feature reader does support json comments - can the $schema be hidden behind a json comment maybe?&lt;/p&gt;</comment>
                            <comment id="17292863" author="bischofs@jena.de" created="Mon, 1 Mar 2021 12:40:14 +0000"  >&lt;p&gt;I fixes my tooling problem - works without &quot;$schema&quot;. But that wasn&apos;t the focus of this issue.&lt;/p&gt;

&lt;p&gt;I thought that the parser should not visit this line.&lt;br/&gt;
at org.apache.sling.feature.io.json.FeatureJSONReader.readExtensions(FeatureJSONReader.java:364)&lt;/p&gt;</comment>
                            <comment id="17292865" author="cziegeler" created="Mon, 1 Mar 2021 12:49:06 +0000"  >&lt;p&gt;Every root property that is not known is expected to be an extension, as $schema is unknown this is treated as an extension and therefore you end up with that exception. From that pov, it works as designed (it&apos;s poorly designed as I mentioned previously, but that&apos;s a different issue)&lt;/p&gt;</comment>
                            <comment id="17295874" author="cziegeler" created="Fri, 5 Mar 2021 08:40:41 +0000"  >&lt;p&gt;How about we treat every property starting with a dollar-sign as a &quot;metadata&quot; property which we preserve?&lt;/p&gt;</comment>
                            <comment id="17302676" author="cziegeler" created="Tue, 16 Mar 2021 16:33:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bischofs%40jena.de&quot; class=&quot;user-hover&quot; rel=&quot;bischofs@jena.de&quot;&gt;bischofs@jena.de&lt;/a&gt; What&apos;s your thought on this one? If you think that we should deal with those metadata properties maybe you can come up with a PR?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o4q8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10173] Potential collision with tmp dir if run in parallel</title>
                <link>https://issues.apache.org/jira/browse/SLING-10173</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The VaultPackageAssembler uses a hard coded directory within the tmp directory to store files. If now the converter is run in parallel, this will lead to collisions&lt;br/&gt;
In addition, the cleanup of that directory is not implemented correctly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13361200">SLING-10173</key>
            <summary>Potential collision with tmp dir if run in parallel</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Feb 2021 14:18:48 +0000</created>
                <updated>Mon, 17 May 2021 11:38:57 +0000</updated>
                            <resolved>Fri, 26 Feb 2021 16:46:46 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17291755" author="cziegeler" created="Fri, 26 Feb 2021 16:46:46 +0000"  >&lt;p&gt;Removed the unnecessary shutdown hook and refactored tmp directory handling to add a time stamp to the directory name&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/0e97f0583db86b5564c57500dcc3d97f3b269acb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/0e97f0583db86b5564c57500dcc3d97f3b269acb&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o3ns:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10172] Converter fails on artifacts with no GAV and bundle names with special characters</title>
                <link>https://issues.apache.org/jira/browse/SLING-10172</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When the converter finds a bundle, it will first try to &quot;read the GAV&quot; from potentially embedded pom.properties. If it can&apos;t, it will fallback to the symbolic name as the groupID and the bundle name as the artifactID. That is problematic as the bundle name can contain special characters like e.g. &lt;tt&gt;:&lt;/tt&gt; which are not allowed in an artifactID. &lt;/p&gt;

&lt;p&gt;Furthermore, if a bundle doesn&apos;t have pom.properties, it might still have the original pom.xml embedded (see &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; for an example). &lt;/p&gt;

&lt;p&gt;The converter should fallback to that embedded pom first before trying to use the bundle metadata. If that fails as well, it should likely use different parts of the metadata but regardless, properly escape whatever it uses.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://repo1.maven.org/maven2/org/osgi/org.osgi.service.jdbc/1.0.0/org.osgi.service.jdbc-1.0.0.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo1.maven.org/maven2/org/osgi/org.osgi.service.jdbc/1.0.0/org.osgi.service.jdbc-1.0.0.jar&lt;/a&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13361170">SLING-10172</key>
            <summary>Converter fails on artifacts with no GAV and bundle names with special characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Feb 2021 11:37:01 +0000</created>
                <updated>Mon, 17 May 2021 11:38:55 +0000</updated>
                            <resolved>Fri, 26 Feb 2021 16:11:02 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17291730" author="karlpauls" created="Fri, 26 Feb 2021 16:11:03 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/60&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We know pick up the groupId and artifactId from the path if an embedded pom.xml is found (and no pom.properties). Furthermore, use the BSN up to the last dot as groupID and the rest as artifactID (and escape problematic characters in both).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o3h4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10169] Enabling servlet.post.autoCheckout breaks POST requests when one of the ancestor nodes is not accessible</title>
                <link>https://issues.apache.org/jira/browse/SLING-10169</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Example:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;enable servlet.post.autoCheckout&lt;/li&gt;
	&lt;li&gt;create a non-admin user&lt;/li&gt;
	&lt;li&gt;deny access to / (the root node)&lt;/li&gt;
	&lt;li&gt;allow access to /content&lt;/li&gt;
	&lt;li&gt;try to post new content&lt;/li&gt;
	&lt;li&gt;request fails with 500 Server Error because findVersionableAncestor fails to handle the AccessDeniedException thrown when trying to access the parent of /content&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13361074">SLING-10169</key>
            <summary>Enabling servlet.post.autoCheckout breaks POST requests when one of the ancestor nodes is not accessible</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="sdumitriu">Sergiu Dumitriu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Feb 2021 02:12:09 +0000</created>
                <updated>Sun, 13 Jun 2021 10:10:34 +0000</updated>
                            <resolved>Thu, 4 Mar 2021 10:19:11 +0000</resolved>
                                    <version>Servlets Post 2.3.36</version>
                                    <fixVersion>Servlets POST 2.4.4</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17295140" author="rombert" created="Thu, 4 Mar 2021 10:19:29 +0000"  >&lt;p&gt;PR at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/12&lt;/a&gt; applied, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sdumitriu&quot; class=&quot;user-hover&quot; rel=&quot;sdumitriu&quot;&gt;sdumitriu&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o2vs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10167] MapEntries.loadAliases generates JCR queries with illegal absolute paths</title>
                <link>https://issues.apache.org/jira/browse/SLING-10167</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the code introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9535&quot; title=&quot;Improve performance of sling:alias Query when Optimize alias resolution is activated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9535&quot;&gt;&lt;del&gt;SLING-9535&lt;/del&gt;&lt;/a&gt; generates JCR queries like this to load existing alias on startup:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT sling:alias FROM nt:base AS page WHERE (NOT ISDESCENDANTNODE(page,&quot;/jcr:system/&quot;)) AND sling:alias IS NOT NULL
SELECT sling:alias FROM nt:base AS page WHERE (NOT ISDESCENDANTNODE(page,&quot;/parent1/&quot;)) AND sling:alias IS NOT NULL
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this query are invalid, as &quot;/jcr:system/&quot; or &quot;/parent1/&quot; are not valid paths - valid paths must end not with &quot;/&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13361029">SLING-10167</key>
            <summary>MapEntries.loadAliases generates JCR queries with illegal absolute paths</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Feb 2021 18:45:33 +0000</created>
                <updated>Thu, 15 Apr 2021 21:46:57 +0000</updated>
                            <resolved>Tue, 2 Mar 2021 11:33:13 +0000</resolved>
                                    <version>Resource Resolver 1.7.2</version>
                                    <fixVersion>Resource Resolver 1.7.4</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                <comments>
                            <comment id="17291143" author="sseifert@pro-vision.de" created="Thu, 25 Feb 2021 18:49:26 +0000"  >&lt;p&gt;for some reason these illegal paths in the JCR query do not lead to problems in a running instance - queries seem to be executed. however, the problem can be reproduced easily in unit tests e..g with sling-mock-oak - e.g. with this branch using Sling Resource Resolver 1.7.2:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-sling-mock-oak/tree/feature/SLING-10167-reproduce-sling-alias-query-problem&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-sling-mock-oak/tree/feature/SLING-10167-reproduce-sling-alias-query-problem&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;this leads to tons of exceptions in the unit tests like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: Unable to initialize JCR_OAK resource resolver factory: Unable to invoke method &apos;activate&apos; for class org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator
        at org.apache.sling.testing.mock.sling.context.ContextResourceResolverFactory.get(ContextResourceResolverFactory.java:68)
        at org.apache.sling.testing.mock.sling.context.SlingContextImpl.newResourceResolverFactory(SlingContextImpl.java:145)
        at org.apache.sling.testing.mock.sling.context.SlingContextImpl.resourceResolverFactory(SlingContextImpl.java:150)
        at org.apache.sling.testing.mock.sling.context.SlingContextImpl.setUp(SlingContextImpl.java:134)
        at org.apache.sling.testing.mock.sling.junit.SlingContext.access$100(SlingContext.java:49)
        at org.apache.sling.testing.mock.sling.junit.SlingContext$1.before(SlingContext.java:153)
        at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:46)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:377)
        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:138)
        at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:465)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:451)
Caused by: java.lang.RuntimeException: Unable to invoke method &apos;activate&apos; for class org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator
        at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:325)
        at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeLifecycleMethod(OsgiServiceUtil.java:218)
        at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.activateDeactivate(OsgiServiceUtil.java:89)
        at org.apache.sling.testing.mock.osgi.MockOsgi.activate(MockOsgi.java:186)
        at org.apache.sling.testing.mock.sling.ResourceResolverFactoryInitializer.initializeResourceResolverFactoryActivator(ResourceResolverFactoryInitializer.java:157)
        at org.apache.sling.testing.mock.sling.ResourceResolverFactoryInitializer.setUp(ResourceResolverFactoryInitializer.java:79)
        at org.apache.sling.testing.mock.sling.MockSling.newResourceResolverFactory(MockSling.java:76)
        at org.apache.sling.testing.mock.sling.context.ContextResourceResolverFactory.get(ContextResourceResolverFactory.java:47)
        ... 24 more
Caused by: java.lang.AssertionError: Invalid path [/jcr:system/]
        at org.apache.jackrabbit.oak.commons.PathUtils.isAbsolute(PathUtils.java:89)
        at org.apache.jackrabbit.oak.query.SQL2Parser.readAbsolutePath(SQL2Parser.java:643)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseConditionFunctionIf(SQL2Parser.java:575)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseCondition(SQL2Parser.java:407)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseCondition(SQL2Parser.java:400)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseAnd(SQL2Parser.java:390)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseConstraint(SQL2Parser.java:382)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseCondition(SQL2Parser.java:402)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseAnd(SQL2Parser.java:390)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseConstraint(SQL2Parser.java:382)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parseSelect(SQL2Parser.java:238)
        at org.apache.jackrabbit.oak.query.SQL2Parser.parse(SQL2Parser.java:158)
        at org.apache.jackrabbit.oak.query.QueryEngineImpl.parseQuery(QueryEngineImpl.java:179)
        at org.apache.jackrabbit.oak.query.QueryEngineImpl.executeQuery(QueryEngineImpl.java:261)
        at org.apache.jackrabbit.oak.jcr.query.QueryManagerImpl.executeQuery(QueryManagerImpl.java:136)
        at org.apache.jackrabbit.oak.jcr.query.QueryImpl$2.perform(QueryImpl.java:104)
        at org.apache.jackrabbit.oak.jcr.query.QueryImpl$2.perform(QueryImpl.java:100)
        at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.perform(SessionDelegate.java:207)
        at org.apache.jackrabbit.oak.jcr.query.QueryImpl.execute(QueryImpl.java:99)
        at org.apache.sling.jcr.resource.internal.helper.JcrResourceUtil.query(JcrResourceUtil.java:56)
        at org.apache.sling.jcr.resource.internal.helper.jcr.BasicQueryLanguageProvider.findResources(BasicQueryLanguageProvider.java:80)
        at org.apache.sling.resourceresolver.impl.providers.stateful.AuthenticatedResourceProvider.findResources(AuthenticatedResourceProvider.java:260)
        at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.findResources(ResourceResolverControl.java:459)
        at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.findResources(ResourceResolverImpl.java:549)
        at org.apache.sling.resourceresolver.impl.mapping.MapEntries.loadAliases(MapEntries.java:1020)
        at org.apache.sling.resourceresolver.impl.mapping.MapEntries.doInit(MapEntries.java:180)
        at org.apache.sling.resourceresolver.impl.mapping.MapEntries.&amp;lt;init&amp;gt;(MapEntries.java:142)
        at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.activate(CommonResourceResolverFactoryImpl.java:318)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.registerFactory(ResourceResolverFactoryActivator.java:520)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.checkFactoryPreconditions(ResourceResolverFactoryActivator.java:584)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.access$100(ResourceResolverFactoryActivator.java:67)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator$1.providerAdded(ResourceResolverFactoryActivator.java:418)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.register(ResourceProviderTracker.java:217)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.access$200(ResourceProviderTracker.java:59)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.addingService(ResourceProviderTracker.java:130)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.addingService(ResourceProviderTracker.java:106)
        at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)
        at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)
        at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)
        at org.osgi.util.tracker.AbstractTracked.trackInitial(AbstractTracked.java:183)
        at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:318)
        at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:261)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.activate(ResourceProviderTracker.java:134)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.activate(ResourceResolverFactoryActivator.java:411)
        at jdk.internal.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:316)
        ... 31 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;failing in &lt;tt&gt;PathUtils.isAbsolute&lt;/tt&gt; when validating the paths given in the query.&lt;/p&gt;

&lt;p&gt;i&apos;m completely puzzled why these queries do not fail in runtime, but the query is faulty in every cause.&lt;/p&gt;</comment>
                            <comment id="17291146" author="sseifert@pro-vision.de" created="Thu, 25 Feb 2021 18:55:18 +0000"  >&lt;p&gt;i&apos;ve provided a PR to fix the problem: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(i&apos;m also wondering why all query in MapEntries.java use the deprecated SQL-1 JCR query syntax and not SQL-2, but this is a topic for another issue)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; can you have a look - you where involved in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9535&quot; title=&quot;Improve performance of sling:alias Query when Optimize alias resolution is activated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9535&quot;&gt;&lt;del&gt;SLING-9535&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akanksha88&quot; class=&quot;user-hover&quot; rel=&quot;akanksha88&quot;&gt;akanksha88&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17293636" author="sseifert@pro-vision.de" created="Tue, 2 Mar 2021 11:33:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/30bf2129817ae20f9d480f8571d7219aef51a6ab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/30bf2129817ae20f9d480f8571d7219aef51a6ab&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13312521">SLING-9535</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o2ls:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10166] Fix vulnerabilities, bugs and code smells reported by Sonar</title>
                <link>https://issues.apache.org/jira/browse/SLING-10166</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sonar reports 8 security issues, 8 vulnerabilities and 111 Code smells for the &lt;tt&gt;sling.auth.core&lt;/tt&gt; module including 1 blocker, 19 critical and 40 major issues. &lt;br/&gt;
Since the sling authentication code base is IMO quite a crucial part of Sling, it is worth investing a bit of energy into maintenance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13360919">SLING-10166</key>
            <summary>Fix vulnerabilities, bugs and code smells reported by Sonar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Feb 2021 09:17:44 +0000</created>
                <updated>Mon, 19 Jul 2021 19:17:31 +0000</updated>
                            <resolved>Mon, 21 Jun 2021 16:34:26 +0000</resolved>
                                                    <fixVersion>Auth Core 1.5.6</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17365054" author="enorman" created="Thu, 17 Jun 2021 17:35:21 +0000"  >&lt;p&gt;Current sonar status shows:&lt;/p&gt;

&lt;p&gt;92 Issues&lt;br/&gt;
3 Bugs&lt;br/&gt;
7 Vulnerabilities&lt;br/&gt;
0 Security Hotspots&lt;br/&gt;
82 Code Smells&lt;/p&gt;</comment>
                            <comment id="17365063" author="enorman" created="Thu, 17 Jun 2021 18:01:15 +0000"  >&lt;p&gt;Created PR #11 with the changes.&#160; If there are no objections in a few days I&apos;ll merge the PR.&lt;/p&gt;</comment>
                            <comment id="17366701" author="enorman" created="Mon, 21 Jun 2021 16:19:26 +0000"  >&lt;p&gt;Merged PR at:&#160;&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-core/commit/4a00ed086aae9e8407680a4e4c579b4fa3e9f0c6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;4a00ed0&lt;/tt&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17366710" author="enorman" created="Mon, 21 Jun 2021 16:34:26 +0000"  >&lt;p&gt;Marking this a resolved.&lt;/p&gt;

&lt;p&gt;Current sonar status shows 24 Issues:&lt;br/&gt;
 0 Bugs&lt;br/&gt;
 0 Vulnerabilities&lt;br/&gt;
 0 Security Hotspots&lt;br/&gt;
 24 Code Smells&lt;/p&gt;

&lt;p&gt;The remaining code smells consist of:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;15 warnings for do not forget to remove this deprecated code someday&lt;/li&gt;
	&lt;li&gt;8 warnings to reduce the cognitive complexity of a method&lt;/li&gt;
	&lt;li&gt;1 warning about a TODO comment&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I believe all of those can be left alone or dealt with later.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17383528" author="enorman" created="Mon, 19 Jul 2021 19:17:31 +0000"  >&lt;p&gt;closing with the 1.5.6 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o1xc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10159] Handle framework properties after the feature is processed</title>
                <link>https://issues.apache.org/jira/browse/SLING-10159</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-launcher/pull/15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-launcher/pull/15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;OSGi properties are being handled before&#160;&lt;tt&gt;&lt;em&gt;Installation#getFrameworkProperties()&lt;/em&gt;&lt;/tt&gt;&#160;is populated by parsing the Feature files using&#160;&lt;em&gt;&lt;tt&gt;FeatureProcessor#prepareLauncher()&lt;/tt&gt;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;E.g. specifying framework properties such as&#160;&lt;b&gt;org.osgi.framework.startlevel.beginning&lt;/b&gt;&#160;and&#160;&lt;b&gt;org.osgi.framework.storage&lt;/b&gt;&#160;in&#160;&lt;b&gt;feature.json&lt;/b&gt;&#160;file has no effect, the default values are used. These properties should be read from the feature&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In the&#160;&lt;b&gt;&lt;tt&gt;prepare()&lt;/tt&gt;&lt;/b&gt;&#160;method&#160;&lt;b&gt;&lt;tt&gt;installation.getFrameworkProperties()&lt;/tt&gt;&lt;/b&gt;&#160;is empty.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13021112/13021112_108997486-f0659980-769f-11eb-8cd4-db3f84f1b797.png&quot; height=&quot;274&quot; width=&quot;424&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The duplicate code exists in the&#160;&lt;b&gt;&lt;tt&gt;run()&lt;/tt&gt;&lt;/b&gt;&#160;method, which is correct.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13360606">SLING-10159</key>
            <summary>Handle framework properties after the feature is processed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="NMuzaffar">Muzaffar Nurmukhammadov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Feb 2021 12:09:03 +0000</created>
                <updated>Fri, 26 Feb 2021 06:24:43 +0000</updated>
                            <resolved>Thu, 25 Feb 2021 14:33:48 +0000</resolved>
                                                    <fixVersion>Feature Model Launcher 1.1.18</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17289916" author="cziegeler" created="Wed, 24 Feb 2021 13:23:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=NMuzaffar&quot; class=&quot;user-hover&quot; rel=&quot;NMuzaffar&quot;&gt;NMuzaffar&lt;/a&gt; Could you please add the description in this issue? Thanks&lt;/p&gt;</comment>
                            <comment id="17289931" author="nmuzaffar" created="Wed, 24 Feb 2021 13:45:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160;Done&lt;/p&gt;</comment>
                            <comment id="17289977" author="cziegeler" created="Wed, 24 Feb 2021 14:59:09 +0000"  >&lt;p&gt;THanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=NMuzaffar&quot; class=&quot;user-hover&quot; rel=&quot;NMuzaffar&quot;&gt;NMuzaffar&lt;/a&gt; - I think the duplicate code - at least to some degree is required - this allows feature models to reference the real values for example for sling.home; at least that was the idea behind it&lt;/p&gt;

&lt;p&gt;It would be good if you could provide tests demonstrating the problem&lt;/p&gt;</comment>
                            <comment id="17290842" author="cziegeler" created="Thu, 25 Feb 2021 10:52:03 +0000"  >&lt;p&gt;Maybe we could reduce the change to just not set  org.osgi.framework.startlevel.beginning and org.osgi.framework.storage ?&lt;/p&gt;</comment>
                            <comment id="17290872" author="nmuzaffar" created="Thu, 25 Feb 2021 11:48:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160;Applied the changes, only OSGi properties are not set&lt;/p&gt;</comment>
                            <comment id="17290946" author="cziegeler" created="Thu, 25 Feb 2021 14:33:48 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=NMuzaffar&quot; class=&quot;user-hover&quot; rel=&quot;NMuzaffar&quot;&gt;NMuzaffar&lt;/a&gt; - i&apos;ve applied your PR&lt;/p&gt;</comment>
                            <comment id="17291252" author="nmuzaffar" created="Thu, 25 Feb 2021 22:02:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160;Thank you for merging. A question if you do not mind - when can we expect the next release?&lt;/p&gt;</comment>
                            <comment id="17291415" author="cziegeler" created="Fri, 26 Feb 2021 06:24:43 +0000"  >&lt;p&gt;There is no fixed timeline, I suggest to ask on the dev list for a release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13021112" name="108997486-f0659980-769f-11eb-8cd4-db3f84f1b797.png" size="93987" author="NMuzaffar" created="Wed, 24 Feb 2021 13:44:26 +0000"/>
                            <attachment id="13021120" name="Capture.PNG" size="60377" author="NMuzaffar" created="Wed, 24 Feb 2021 15:47:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o0hs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10158] XSSFilter fails with a classloading error with the TreeWalker class</title>
                <link>https://issues.apache.org/jira/browse/SLING-10158</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After switching to xss v2.2.10 many pages fail with a classloading exception regarding the org.apache.xml.serializer.TreeWalker class&lt;/p&gt;

&lt;p&gt;For example, the composium browser at &lt;a href=&quot;http://localhost:8080/bin/browser.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/bin/browser.html&lt;/a&gt;&#160;fails with this error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org/apache/xml/serializer/TreeWalker (500)

The requested URL /bin/browser.html resulted in an error in /libs/composum/nodes/browser/browser.jsp.
Exception:

java.lang.NoClassDefFoundError: org/apache/xml/serializer/TreeWalker
    at org.apache.xalan.processor.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:818)
    at org.owasp.validator.html.scan.AntiSamySAXScanner.getNewTransformer(AntiSamySAXScanner.java:178)
    at org.owasp.validator.html.scan.AntiSamySAXScanner.scan(AntiSamySAXScanner.java:133)
    at org.owasp.validator.html.scan.AntiSamySAXScanner.scan(AntiSamySAXScanner.java:107)
    at org.owasp.validator.html.scan.AntiSamySAXScanner.scan(AntiSamySAXScanner.java:89)
    at org.owasp.validator.html.AntiSamy.scan(AntiSamy.java:129)
    at org.owasp.validator.html.AntiSamy.scan(AntiSamy.java:75)
    at org.apache.sling.xss.impl.HtmlToHtmlContentContext.getCleanResults(HtmlToHtmlContentContext.java:98)
    at org.apache.sling.xss.impl.HtmlToHtmlContentContext.filter(HtmlToHtmlContentContext.java:68)
    at org.apache.sling.xss.impl.XSSFilterImpl.filter(XSSFilterImpl.java:200)
    at org.apache.sling.xss.impl.XSSFilterImpl.filter(XSSFilterImpl.java:194)
    at com.composum.sling.core.util.XSS.filter(XSS.java:282)
    at com.composum.sling.core.util.ConsoleUtil.getConsoleResource(ConsoleUtil.java:31)
    at com.composum.sling.core.AbstractServletBean.initialize(AbstractServletBean.java:33)
    at com.composum.sling.core.BeanContext$AbstractContext.tryToInstantiateSlingBean(BeanContext.java:266)
    at com.composum.sling.core.BeanContext$AbstractContext.adaptTo(BeanContext.java:246)
    at com.composum.sling.core.BeanContext$Page.adaptTo(BeanContext.java:571)
    at com.composum.sling.cpnl.ComponentTag.createComponent(ComponentTag.java:220)
    at com.composum.sling.cpnl.ComponentTag.doStartTag(ComponentTag.java:73)
    at org.apache.jsp.libs.composum.nodes.browser.browser__002e__jsp._jspService(browser__002e__jsp.java:112)
    at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
    at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:496)...

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13360397">SLING-10158</key>
            <summary>XSSFilter fails with a classloading error with the TreeWalker class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2021 18:25:01 +0000</created>
                <updated>Mon, 1 Mar 2021 08:34:59 +0000</updated>
                            <resolved>Tue, 23 Feb 2021 20:06:22 +0000</resolved>
                                    <version>XSS Protection API 2.2.10</version>
                                    <fixVersion>XSS Protection API 2.2.12</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17289297" author="enorman" created="Tue, 23 Feb 2021 20:06:22 +0000"  >&lt;p&gt;Fixed at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/cc6e63d80d4a2c2fc7bbca31b6a1ec1e65e74dc8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-xss/commit/cc6e63d80d4a2c2fc7bbca31b6a1ec1e65e74dc8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17290901" author="radu.cotescu" created="Thu, 25 Feb 2021 12:56:40 +0000"  >&lt;p&gt;Thanks for fixing this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt;. I didn&apos;t see the error in my normal manual smoke tests... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;I&apos;ll start a release now, since 2.2.10 cannot really be used...&lt;/p&gt;</comment>
                            <comment id="17291129" author="enorman" created="Thu, 25 Feb 2021 18:26:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu&quot; class=&quot;user-hover&quot; rel=&quot;radu&quot;&gt;radu&lt;/a&gt;&#160;Not a problem.&#160; I noticed the troubles right away after switching.&#160; Perhaps it would be worth it to add some simple integration tests so things like this would be detected without manual testing.&lt;/p&gt;</comment>
                            <comment id="17291570" author="radu.cotescu" created="Fri, 26 Feb 2021 10:52:59 +0000"  >&lt;p&gt;Sure, it makes sense. The question is what kind of test to add.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13354859">SLING-10094</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13361158">SLING-10171</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nzcg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10157] Converter fails with duplicate configuration PIDs</title>
                <link>https://issues.apache.org/jira/browse/SLING-10157</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If there is a configuration for the same PID multiple times, either in the same or different content packages, the converter fails with an error.&lt;br/&gt;
We should handle this similar to how the OSGi installer does it, and pick the right configuration based on the repository path.&lt;br/&gt;
A warning should be logged for these cases as well.&lt;/p&gt;

&lt;p&gt;We could add a strict option, throwing an exception in this case like today&lt;/p&gt;</description>
                <environment></environment>
        <key id="13360383">SLING-10157</key>
            <summary>Converter fails with duplicate configuration PIDs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2021 17:04:35 +0000</created>
                <updated>Mon, 17 May 2021 11:38:42 +0000</updated>
                            <resolved>Fri, 26 Feb 2021 14:07:22 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17289419" author="schaefa" created="Tue, 23 Feb 2021 23:02:08 +0000"  >&lt;p&gt;The CP Converter has a mergeConfiguration flag that enables to deal with multiple configurations. That said I takes the configuration is order it finds it in the ZIP file and that is, I assume, alphabetically ordered.&lt;br/&gt;
I would prefer to have a way of setting a precedence based on the content-package but as far as I can tell this is not available to the&#160;FeaturesManager so I guess we should have something along the lines of the Sling Feature Model Plugin (USE_FIRST / USE_LATEST).&lt;/p&gt;</comment>
                            <comment id="17289682" author="cziegeler" created="Wed, 24 Feb 2021 06:31:15 +0000"  >&lt;p&gt;The order of paths in a zip file is not reliable, it depends on the tool creating the zip file and the order the tool creates the entries. So this is not a stable order.&lt;br/&gt;
I think the first step is to implement this like the OSGi installer does, and that is based on the path order - that should be the default.&lt;br/&gt;
I&apos;m not sure if anyone is using the mergeConfiguration flag - at least the way it is implemented today, it does not have a stable order either.&lt;br/&gt;
I&apos;m open to implement other strategies, but I think thats an extension to the current mechanism.&lt;br/&gt;
Or in other words, lets&lt;br/&gt;
1. fix the broken implementation (this issue)&lt;br/&gt;
2. think about extensions (another issue)&lt;/p&gt;</comment>
                            <comment id="17290504" author="schaefa" created="Wed, 24 Feb 2021 22:30:39 +0000"  >&lt;p&gt;The issue I encounter is a little bit more delicate as it is forced by the way Feature Models are handled.&lt;/p&gt;

&lt;p&gt;Traditionally I would install (external) package into Sling that may contain OSGi configurations (assume here it does).&lt;br/&gt;
Then I would install the client&apos;s custom project package which its custom configuration which in turn overrides the default configuration of the external package.&lt;/p&gt;

&lt;p&gt;Because this happens at different times (two separate installation tasks) the order is defined by that.&lt;/p&gt;

&lt;p&gt;In the Feature Model world the customer might combine both packages into one package (required by Skyline) together with the configurations and here we need to provide a strategy to resolve it.&lt;/p&gt;

&lt;p&gt;For now we can rely on an alphabetical order meaning that the overriding configuration but that might getting ugly when the configuration is in the /libs folder.&lt;/p&gt;</comment>
                            <comment id="17290699" author="cziegeler" created="Thu, 25 Feb 2021 06:02:10 +0000"  >&lt;p&gt;We need to have a consistent, repeatable solution - in the old world with the OSGi installer, the way it works is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if all configurations are known, alphabetical ordering of the id is used, the first being used (so /apps before /libs)&lt;/li&gt;
	&lt;li&gt;if a configuration is already installed and a new one with the PID at a different location arrives, the new one is not considered regardless of the path&lt;br/&gt;
So that already is inconsistent and depends on installation order; which is a bad idea - we must not make the same mistake here again.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="17291667" author="cziegeler" created="Fri, 26 Feb 2021 14:07:22 +0000"  >&lt;p&gt;Implemented in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/23731f426bb9ec00313f11ae81cdcbb72110c0f7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/23731f426bb9ec00313f11ae81cdcbb72110c0f7&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17293125" author="schaefa" created="Mon, 1 Mar 2021 19:30:59 +0000"  >&lt;p&gt;It works but I ran into a few issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;in AbstractJcrNodeParser&#160;this line failed:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;this.primaryTypes = ImmutableSet.of(primaryTypes);&lt;/p&gt;

&lt;p&gt;and I had to replace it with:&lt;br/&gt;
 this.primaryTypes = new HashSet&amp;lt;String&amp;gt;(java.util.Arrays.asList(primaryTypes));&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In&#160;DefaultFeaturesManager when I only have two configurations it did not work well because the first configuration is not added to the map. So I had to add this line (233):&lt;/p&gt;

&lt;p&gt;if (configuration == null) {&lt;br/&gt;
 configuration = new Configuration(pid);&lt;br/&gt;
 feature.getConfigurations().add(configuration);&lt;/p&gt;

&lt;p&gt;// Add this so that the first configuration is considered in an Ordered configuration&lt;br/&gt;
 this.pidToPathMapping.put(pid, path);&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17293376" author="cziegeler" created="Tue, 2 Mar 2021 05:56:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andysch&quot; class=&quot;user-hover&quot; rel=&quot;andysch&quot;&gt;andysch&lt;/a&gt; Good catch with the missing line for the configuration handling. I added it (together with a test):&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/28a78d2a8f2cee923402cf1be39be9cac62baa6c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/28a78d2a8f2cee923402cf1be39be9cac62baa6c&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For the other error, that seems to be unrelated to configurations, please open a separate ticket. Thanks&lt;/p&gt;</comment>
                            <comment id="17293628" author="cziegeler" created="Tue, 2 Mar 2021 11:20:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andysch&quot; class=&quot;user-hover&quot; rel=&quot;andysch&quot;&gt;andysch&lt;/a&gt; I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10180&quot; title=&quot;Remove dependency to google commons&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10180&quot;&gt;&lt;del&gt;SLING-10180&lt;/del&gt;&lt;/a&gt; - let me know if that fixes the other problem&lt;/p&gt;</comment>
                            <comment id="17293813" author="schaefa" created="Tue, 2 Mar 2021 16:19:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160;Yes, that fixed my problems.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nz9c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10156] Create access control entries for unknown principals</title>
                <link>https://issues.apache.org/jira/browse/SLING-10156</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, today the JCR repo-init implementation limits creation of access control content to principals known to the repository (see also &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10134&quot; title=&quot;Deleting ACEs for users that don&amp;#39;t exist is impossible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10134&quot;&gt;SLING-10134&lt;/a&gt; for a related ticket wrt to removing access control entries):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// first &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; PrincipalManager.getPrincipal(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
&lt;/span&gt;Principal principal = AccessControlUtils.getPrincipal(session, name);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (principal == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-comment&quot;&gt;// backwards compatibility: fallback to original code treating principal name as authorizable ID (see SLING-8604)
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Authorizable authorizable = UserUtil.getAuthorizable(session, name);
                checkState(authorizable != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Authorizable not found:&quot;&lt;/span&gt; + name);
                principal = authorizable.getPrincipal();
            }
            checkState(principal != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Principal not found: &quot;&lt;/span&gt; + name); &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;- here it fails &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; principal does not exist&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While JCR access control API mandates that a principal must be known to the repository, it is possible both with Apache Jackrabbit 2.x and in Apache Jackrabbit Oak to relax that contract (see ImportBehavior.BESTEFFORT &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;). The main reason for this is the fact that principals may only be installed at a later stage and packaging them together with (resource-based) access control isn&apos;t always feasible/desirable (see for example Jackrabbit vault &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;). &lt;br/&gt;
In other words: repo-init should delegate the principal validation step (and whether or not the strict JCR contract is enforced) to the repository itself.&lt;/p&gt;

&lt;p&gt;In Sling RepoInit this is relevant under the following circumstances:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cleaning up access control content when the principal no longer exists (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10134&quot; title=&quot;Deleting ACEs for users that don&amp;#39;t exist is impossible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10134&quot;&gt;SLING-10134&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;setting up access control content in the initial repository initialization, while principals are not yet available (maybe installed later with content packages). this becomes increasingly relevant with a composite NodeStore setup, where certain trees of the repository are marked as immutable and thus might be initialized independently of the mutable stores (that e.g. would include the group nodes).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;NOTE: delegating the principal validation step to the repository, may also require the principal-equality test in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/blob/master/src/main/java/org/apache/sling/jcr/repoinit/impl/AclUtil.java#L399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/blob/master/src/main/java/org/apache/sling/jcr/repoinit/impl/AclUtil.java#L399&lt;/a&gt; to be adjusted (e.g. reducing to comparing names as it is done in &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, fyi&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://jackrabbit.apache.org/oak/docs/security/accesscontrol/default.html#xml_import&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/oak/docs/security/accesscontrol/default.html#xml_import&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/blob/f785fcb24d4cbd01c734e9273310a925c29ae15b/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/JackrabbitACLImporter.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/blob/f785fcb24d4cbd01c734e9273310a925c29ae15b/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/JackrabbitACLImporter.java&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/blob/f785fcb24d4cbd01c734e9273310a925c29ae15b/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/JackrabbitACLImporter.java#L290&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/blob/f785fcb24d4cbd01c734e9273310a925c29ae15b/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/JackrabbitACLImporter.java#L290&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13360279">SLING-10156</key>
            <summary>Create access control entries for unknown principals</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2021 08:25:11 +0000</created>
                <updated>Tue, 19 Mar 2024 16:07:07 +0000</updated>
                            <resolved>Tue, 19 Mar 2024 16:07:07 +0000</resolved>
                                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17289936" author="bdelacretaz" created="Wed, 24 Feb 2021 13:53:09 +0000"  >&lt;p&gt;Thanks for this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Would you be able to supply failing tests that precisely expose the problem? Along the lines of the existing &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/blob/master/src/test/java/org/apache/sling/jcr/repoinit/PrincipalBasedAclTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PrincipalBasedAclTest&lt;/a&gt;, or maybe as a new test class in that package as that one is quite big already. I think that&apos;s best starting point for fixing this.&lt;/p&gt;</comment>
                            <comment id="17289940" author="anchela" created="Wed, 24 Feb 2021 13:57:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, i am sorry.... but i am quite busy and don&apos;t have time to create test cases or provide patches to repo-init.&lt;/p&gt;</comment>
                            <comment id="17828432" author="anchela" created="Tue, 19 Mar 2024 16:07:07 +0000"  >&lt;p&gt;this has been addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-12115&quot; title=&quot;Repoinit should leave enforcement of importBehaviour for ACL creation to JCR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-12115&quot;&gt;&lt;del&gt;SLING-12115&lt;/del&gt;&lt;/a&gt;. thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13554942">SLING-12115</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13357933">SLING-10134</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nym8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10155] add configuration to include or exclude specific ScriptEngineFactory</title>
                <link>https://issues.apache.org/jira/browse/SLING-10155</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sometimes it may be useful to exclude a ScriptEngineFactory from being used by the&#160;SlingScriptEngineManager&lt;/p&gt;

&lt;p&gt;One such consideration is excluding the nashorn script engine so it can&apos;t be used now that it is deprecated.&lt;/p&gt;

&lt;p&gt;You may see messages like this logged to the console when running sling with java 11:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Warning: Nashorn engine is planned to be removed from a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; JDK release&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Excluding nashorn via configuration would get rid of those log warnings and prevent you from accidentally using it.&lt;/p&gt;

&lt;p&gt;There may be other use cases where a ScriptEngineFactory is available in the runtime but not intended for usage with sling so the solution should not be &quot;nashorn&quot; specific.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13360202">SLING-10155</key>
            <summary>add configuration to include or exclude specific ScriptEngineFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Feb 2021 23:20:11 +0000</created>
                <updated>Wed, 2 Jun 2021 15:16:55 +0000</updated>
                            <resolved>Wed, 10 Mar 2021 19:17:10 +0000</resolved>
                                                    <fixVersion>Scripting Core 2.3.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="15000">4h 10m</timespent>
                                <comments>
                            <comment id="17288711" author="enorman" created="Tue, 23 Feb 2021 00:01:32 +0000"  >&lt;p&gt;Created PR #6 with the proposed changes for review.&lt;/p&gt;</comment>
                            <comment id="17291177" author="olli" created="Thu, 25 Feb 2021 19:47:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt;, This configuration makes sense only for platform factories (like Nashorn). You would install a scripting engine only when used, no?&lt;/p&gt;

&lt;p&gt;How does the configuration&#160;distinguish between different versions, e.g. Groovy 2.x and Groovy 3.x?&lt;/p&gt;</comment>
                            <comment id="17291181" author="enorman" created="Thu, 25 Feb 2021 20:08:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;&#160;I couldn&apos;t say with any certainty why someone would install a script engine.&#160; Perhaps they need a specific script engine for some other use case within the runtime and don&apos;t want that script engine exposed for sling scripting.&#160; Or sometimes people do other strange stuff that I have no control over.&lt;/p&gt;

&lt;p&gt;This solution is simply matching against the &quot;short name&quot; list provided by the ScriptEngineFactory so if Groovy 2.x and Groovy 3.x contain some unique &quot;short name&quot; in their list then a regex could select one or the other.&#160; If they don&apos;t have something unique then this solution would not work for that.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If you think that there is some real world chance that matching on the short names are not sufficient, then I suppose the include/exclude patterns could be changed to be a CSV of patterns that matches other fields.&#160; Is there consensus to do that extra work now or could that wait until someone asks for it?&lt;/p&gt;</comment>
                            <comment id="17293623" author="olli" created="Tue, 2 Mar 2021 11:17:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt;, I&apos;m only aware of scripting engines from Sling project itself which are available for two &quot;major&quot; language versions. You could configure the names of Groovy and Thymeleaf scripting engines but I don&apos;t see a reason to install multiple engines of those in parallel &#8211; not a blocker for me.&lt;/p&gt;</comment>
                            <comment id="17299087" author="enorman" created="Wed, 10 Mar 2021 19:17:10 +0000"  >&lt;p&gt;Feedback from the reviews has been integrated and no objections remain, so I have merged the PR at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/3d910d1624c940b390e9163c24b6ffaa24287262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/3d910d1624c940b390e9163c24b6ffaa24287262&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13381728">SLING-10448</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ny5c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10153] Missing/spurious pom files</title>
                <link>https://issues.apache.org/jira/browse/SLING-10153</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There are some inconsistencies around the released pom files:&lt;/p&gt;

&lt;p&gt;No .pom file:&lt;br/&gt;
sling-39.pom.asc&lt;br/&gt;
sling-39.pom.md5&lt;br/&gt;
sling-39.pom.sha1&lt;/p&gt;

&lt;p&gt;No sigs or hashes:&lt;br/&gt;
sling-40.pom&lt;/p&gt;

&lt;p&gt;No .pom file:&lt;br/&gt;
sling-bundle-parent-39.pom.asc&lt;br/&gt;
sling-bundle-parent-39.pom.md5&lt;br/&gt;
sling-bundle-parent-39.pom.sha1&lt;/p&gt;

&lt;p&gt;No sigs or hashes:&lt;br/&gt;
sling-bundle-parent-40.pom&lt;/p&gt;</description>
                <environment>&lt;a href=&quot;https://dist.apache.org/repos/dist/release/sling/&quot;&gt;https://dist.apache.org/repos/dist/release/sling/&lt;/a&gt;</environment>
        <key id="13359618">SLING-10153</key>
            <summary>Missing/spurious pom files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Feb 2021 15:36:53 +0000</created>
                <updated>Wed, 24 Feb 2021 18:10:15 +0000</updated>
                            <resolved>Wed, 24 Feb 2021 18:10:11 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17290129" author="kwin" created="Wed, 24 Feb 2021 17:52:24 +0000"  >&lt;p&gt;I think both are caused by wrong cleanup of old releases.&lt;/p&gt;</comment>
                            <comment id="17290156" author="kwin" created="Wed, 24 Feb 2021 18:09:28 +0000"  >&lt;p&gt;Fixed in r46309&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nuk0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10152] Missing release artifact installhook-1.1.0-source-release.zip</title>
                <link>https://issues.apache.org/jira/browse/SLING-10152</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The file&lt;br/&gt;
org.apache.sling.installer.provider.installhook-1.1.0-source-release.zip&lt;br/&gt;
is not present, yet there are sig and hash files for it&lt;/p&gt;

&lt;p&gt;Looks like it was omitted from the commit that uploaded the related files&lt;/p&gt;</description>
                <environment></environment>
        <key id="13359616">SLING-10152</key>
            <summary>Missing release artifact installhook-1.1.0-source-release.zip</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Feb 2021 15:27:57 +0000</created>
                <updated>Wed, 24 Feb 2021 17:53:23 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17290131" author="kwin" created="Wed, 24 Feb 2021 17:53:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ghenzler&quot; class=&quot;user-hover&quot; rel=&quot;ghenzler&quot;&gt;ghenzler&lt;/a&gt; Can you upload the missing file?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nujk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10151] Missing signatures for various release artifacts</title>
                <link>https://issues.apache.org/jira/browse/SLING-10151</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following release artifacts don&apos;t appear to have any signatures:&lt;/p&gt;

&lt;p&gt;org.apache.sling.distribution.api-0.4.0-javadoc.jar&lt;br/&gt;
org.apache.sling.distribution.api-0.4.0-source-release.zip&lt;br/&gt;
org.apache.sling.distribution.api-0.4.0-sources.jar&lt;br/&gt;
org.apache.sling.distribution.api-0.4.0.jar&lt;br/&gt;
org.apache.sling.distribution.core-0.4.2-javadoc.jar&lt;br/&gt;
org.apache.sling.distribution.core-0.4.2-source-release.zip&lt;br/&gt;
org.apache.sling.distribution.core-0.4.2-sources.jar&lt;br/&gt;
org.apache.sling.distribution.core-0.4.2.jar&lt;br/&gt;
org.apache.sling.rewriter-1.3.0-javadoc.jar&lt;br/&gt;
org.apache.sling.rewriter-1.3.0-source-release.zip&lt;br/&gt;
org.apache.sling.rewriter-1.3.0-sources.jar&lt;br/&gt;
org.apache.sling.rewriter-1.3.0.jar&lt;/p&gt;

&lt;p&gt;They do have hashes, but that is not sufficient&lt;/p&gt;</description>
                <environment>&lt;a href=&quot;https://downloads.apache.org/sling/&quot;&gt;https://downloads.apache.org/sling/&lt;/a&gt;</environment>
        <key id="13359585">SLING-10151</key>
            <summary>Missing signatures for various release artifacts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Feb 2021 13:29:09 +0000</created>
                <updated>Fri, 19 Feb 2021 13:29:09 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nuco:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10150] Sling Resource Merger completely hides parent when whitelisting in combination with asterisk is used for sling:hideChildren</title>
                <link>https://issues.apache.org/jira/browse/SLING-10150</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Provided a failing test case here: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/3/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/3/files&lt;/a&gt;&lt;br/&gt;
TODO: Fix&lt;/p&gt;

&lt;p&gt;When trying to configure a whitelisting approach to inheriting nodes from a parent (i.e. through resource super type, or through overlaying), the following way:&lt;/p&gt;

&lt;p&gt;/apps/base/test/tabs/undesired-tab&lt;br/&gt;
/apps/base/test/tabs/desired-tab&lt;br/&gt;
/apps/base/test/tabs/desired-tab/items/field@title=&quot;title&quot;&lt;/p&gt;

&lt;p&gt;&amp;amp;&lt;/p&gt;

&lt;p&gt;/apps/overlay/test/tabs@sling:hideChildren=&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;!desired-tab,*&amp;#93;&lt;/span&gt;&quot;&lt;br/&gt;
/apps/overlay/test/tabs/desired-tab/items/field@description=&quot;test&quot;&lt;/p&gt;

&lt;p&gt;One would expect that requesting the children of /merged/test/tabs would yield the &quot;desired-tab&quot; only, i.e. &quot;undesired-tab&quot; (and other nodes not whitelisted) being hidden. This is working as expected.&lt;/p&gt;

&lt;p&gt;One would also expect the &quot;desired-tab&quot; to have the properties of the base-structure as well as the properties of the overlay-structure. This is also working as expected.&lt;/p&gt;

&lt;p&gt;One would expect that the underlying nodes of &quot;desired-tab&quot; from the base would remain intact and would be merged with the underlying nodes of &quot;desired-tab&quot; in the overlay. So, while listing the items of desired-tab, one would expect:&lt;/p&gt;

&lt;p&gt;MergedResource containing properties &lt;span class=&quot;error&quot;&gt;&amp;#91;title=test, description=test&amp;#93;&lt;/span&gt; consisting of original resources &lt;span class=&quot;error&quot;&gt;&amp;#91;/apps/base/test/tabs/desired-tab/items/field, /apps/overlay/test/tabs/desired-tab/items/field&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;However, instead, the following is returned:&lt;/p&gt;

&lt;p&gt;MergedResource containing properties &lt;span class=&quot;error&quot;&gt;&amp;#91;description=test&amp;#93;&lt;/span&gt; consisting of original resources &lt;span class=&quot;error&quot;&gt;&amp;#91;/apps/overlay/test/tabs/desired-tab/items/field&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;So, the original &quot;base&quot; resource is not considered anymore!&lt;/p&gt;

&lt;p&gt;I believe the issue is in MergingResourceProvider.ParentHidingHandler, in the constructor, actually. At some point, it decides that the parent resource (which indeed has the sling:hideChildren property defined) defines an exclude entry which is &quot;*&quot; and adds that entry to the list.&lt;br/&gt;
Then, when the class starts checking the parent of the parent (marked with &quot;// also check on the parent&apos;s parent whether that was hiding the parent&quot;) - There it will find that asterisk exclude that was defined on the parent, not taking into account that it was preceded by a whitelisting &quot;!desired-tab&quot; - Removing the parent of the parent&apos;s children entirely.&lt;/p&gt;

&lt;p&gt;I believe this should be changed into a more robust way of handling this use-case. Probably the asterisk exclude can be global&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, even though it should still be desired that any child of the parent still is able to remove that exclude. But whenever those excludes are considered, also the includes that were preceding it should be considered to figure out if it&apos;s a real include in the case of that specific path.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13359536">SLING-10150</key>
            <summary>Sling Resource Merger completely hides parent when whitelisting in combination with asterisk is used for sling:hideChildren</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="Henry Kuijpers">Henry Kuijpers</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Feb 2021 08:04:57 +0000</created>
                <updated>Thu, 25 Jul 2024 10:06:36 +0000</updated>
                            <resolved>Mon, 8 Mar 2021 18:56:57 +0000</resolved>
                                    <version>Resource Merger 1.3.10</version>
                                    <fixVersion>Resource Merger 1.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="8400">2h 20m</timespent>
                                <comments>
                            <comment id="17286927" author="henry kuijpers" created="Fri, 19 Feb 2021 08:26:53 +0000"  >&lt;p&gt;Provided a failing test case here: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/3/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/3/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17287095" author="henry kuijpers" created="Fri, 19 Feb 2021 14:33:46 +0000"  >&lt;p&gt;I have tried to create a proposed fix. Can you have a look, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17287201" author="cziegeler" created="Fri, 19 Feb 2021 16:55:23 +0000"  >&lt;p&gt;I haven&apos;t looked at that code for a long time, but I think the fix is ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17287319" author="paul.bjorkstrand" created="Fri, 19 Feb 2021 19:34:53 +0000"  >&lt;p&gt;Just a question for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt;, have you tried changing the order of the hide-children values? If the &lt;tt&gt;!desired-tab&lt;/tt&gt; is evaluated first then the &lt;tt&gt;*&lt;/tt&gt; is next, maybe it is an ordering problem (or maybe I am completely missing part of the problem).&lt;/p&gt;</comment>
                            <comment id="17287322" author="henry kuijpers" created="Fri, 19 Feb 2021 19:39:39 +0000"  >&lt;p&gt;I was wondering that, too, maybe. But after checking out the code, the unit tests as well as the documentation: &lt;a href=&quot;https://sling.apache.org/documentation/bundles/resource-merger.html#merge-properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/resource-merger.html#merge-properties&lt;/a&gt;&lt;br/&gt;
We came to the conclusion that it was indeed a bug. &lt;/p&gt;</comment>
                            <comment id="17289854" author="kwin" created="Wed, 24 Feb 2021 11:01:50 +0000"  >&lt;p&gt;I think the fix in the PR is not correct as it would only work for 2 value arrays correctly (in general only the first value is considered). I would like to support use cases like &quot;hide everything except for a or b&quot;.&lt;/p&gt;

&lt;p&gt;Maybe it is reasonable to &lt;br/&gt;
1. not allow mixing negated values and non-negated values&lt;br/&gt;
2. Only allow wildcard in non-negated, single values&lt;br/&gt;
3. implicitly hide all properties/child resources not matching any value for negated values&lt;/p&gt;

&lt;p&gt;That way we can do something like &lt;br/&gt;
&lt;tt&gt;hide=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;!a&amp;quot;,&amp;quot;!b&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt; to hide everything except a or b&lt;br/&gt;
and&lt;br/&gt;
&lt;tt&gt;hide=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;a&amp;quot;,&amp;quot;b&amp;quot;&amp;#93;&lt;/span&gt;&lt;/tt&gt; to just hide a and b&lt;br/&gt;
and&lt;br/&gt;
&lt;tt&gt;hide=&quot;*&quot;&lt;/tt&gt; to hide everything&lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="17289979" author="jsedding" created="Wed, 24 Feb 2021 14:59:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I agree with your list of constraints. Mixing negated and non-negated values doesn&apos;t make sense to me either.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to refine the constraints a bit, including how to deal with &quot;invalid&quot; configurations.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;A list is considered a negated list if it contains at least one negated value.&lt;/li&gt;
	&lt;li&gt;In a negated list, an optional &quot;&amp;#42;&quot; may be explicitly listed (for backwards compatibility) and is otherwise implied.&lt;/li&gt;
	&lt;li&gt;In a list containing a &quot;&amp;#42;&quot; value, all non-negated values are ignored and a log message written to point to the invalid configuration. Note: this should also cover negated lists with an implied &quot;&amp;#42;&quot; value.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;If I didn&apos;t miss anything, that covers all cases. WDYT?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17290035" author="kwin" created="Wed, 24 Feb 2021 15:50:39 +0000"  >&lt;p&gt;I don&apos;t agree with&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;A list is considered a negated list if it contains at least one negated value.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Rather&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;a list is considered negated if the first value starts with &lt;tt&gt;!&lt;/tt&gt; and should emit a log WARN message in case either &quot;*&quot; or non negated values are used. Those are then simply ignored.&lt;/li&gt;
	&lt;li&gt;a list is considered non-negated if the first value doesn&apos;t start with &lt;tt&gt;!&lt;/tt&gt; and should emit a log WARN message in case either &quot;*&quot; or negated values are used. Those are then simply ignored.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17291156" author="kwin" created="Thu, 25 Feb 2021 19:15:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt; Please have a look at the proposed fix in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourcemerger/pull/4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17292515" author="jsedding" created="Sun, 28 Feb 2021 20:38:40 +0000"  >&lt;p&gt;The documentation on &lt;a href=&quot;https://sling.apache.org/documentation/bundles/resource-merger.html#merge-properties-1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/resource-merger.html#merge-properties-1&lt;/a&gt; says the following about &lt;tt&gt;sling:hideChildren&lt;/tt&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Hides the child resources with the given names. * hides all child resources (since version 1.3.2 the wildcard only affects underlying child resources and no longer local ones, see also &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5468&quot; title=&quot;Resource Merger: Provide a way to completely replace the underlying resources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5468&quot;&gt;&lt;del&gt;SLING-5468&lt;/del&gt;&lt;/a&gt;). If one value starts with ! this is a negation (which means the property with the given value should not be hidden). Since by default nothing is hidden the negation is only useful if you specify multiple values for this property. E.g. giving the values &lt;span class=&quot;error&quot;&gt;&amp;#91;!child1,*&amp;#93;&lt;/span&gt; hides all children except for the one with the name child1. If you have a resource name starting with ! you must escape it with an additional ! in front if you want to reference it in sling:hideChildren, e.g. !!child1 means that the resource with the name !child1 should be hidden.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I believe we need to relax your suggestion a little, because we should respect the documented behaviour as far as possible.&lt;/p&gt;

&lt;p&gt;Support for the &quot;*&quot; value in negated lists needs to be kept (without warning) and it may appear at any position in a negated list (no required ordering is documented, only an example given). It can be made optional, in which case the docs should be adjusted to reflect the relaxation of this requirement. (&quot;Since by default nothing is hidden the negation is only useful if you specify multiple values &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&quot;).&lt;/p&gt;

&lt;p&gt;Furthermore, we have an issue with escaping of exclamation marks, because the current docs are not sufficiently specific. The docs only say that the resource named &lt;tt&gt;&amp;#33;child1&lt;/tt&gt; can be hidden (i.e. listed as non-negated) by listing it as &lt;tt&gt;&amp;#33;&amp;#33;child1&lt;/tt&gt;. However, what happens if we want to exclude it? I assume &lt;tt&gt;&amp;#33;&amp;#33;&amp;#33;child1&lt;/tt&gt;. And what about the resource named &lt;tt&gt;&amp;#33;&amp;#33;child2&lt;/tt&gt;?. Do I hide it with &lt;tt&gt;&amp;#33;&amp;#33;&amp;#33;&amp;#33;child2&lt;/tt&gt; and not hide it with &lt;tt&gt;&amp;#33;&amp;#33;&amp;#33;&amp;#33;&amp;#33;child2&lt;/tt&gt;? This would imply that odd numbers of leading exclamation marks constitute a negation, and all following &lt;tt&gt;&amp;#33;&lt;/tt&gt; would need to be unescaped.&lt;/p&gt;

&lt;p&gt;Given that a negated list is determined by its first (non &quot;*&quot;) element, we &lt;em&gt;could&lt;/em&gt; relax the requirement for escaping &quot;!&quot; in non-negated lists. But that would make it impossible to know when to log a warning for seemingly negated entries.&lt;/p&gt;

&lt;p&gt;Furthermore, we &lt;em&gt;could&lt;/em&gt; relax the requirement for escaping in all but the first element of a list, because then we already know if it is negated or not.&lt;/p&gt;

&lt;p&gt;I don&apos;t think that these relaxed requirements for escaping would be a good idea. I also don&apos;t think that node names starting with &quot;!&quot; are very common. So keeping it simple and documenting it properly is probably best.&lt;/p&gt;</comment>
                            <comment id="17297645" author="kwin" created="Mon, 8 Mar 2021 18:56:57 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourcemerger/commit/84c00de4306f340f2d9c5594c645cb12ba21d1bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourcemerger/commit/84c00de4306f340f2d9c5594c645cb12ba21d1bd&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13544638">SLING-11984</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13586674">SLING-12391</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nu1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10149] Move usermanager servlets from /apps to /libs</title>
                <link>https://issues.apache.org/jira/browse/SLING-10149</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The servlets provided by o.a.sling.jcr.jackrabbit.usermanager should be mounted under /libs instead of /apps&#160;&lt;/p&gt;

&lt;p&gt;The /apps area should be left for customization or experiments.&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;%C2%A0&quot;&gt;&lt;/a&gt;&#160;&lt;/h4&gt;</description>
                <environment></environment>
        <key id="13359188">SLING-10149</key>
            <summary>Move usermanager servlets from /apps to /libs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Feb 2021 04:54:35 +0000</created>
                <updated>Thu, 10 Jun 2021 18:28:33 +0000</updated>
                            <resolved>Thu, 18 Feb 2021 18:26:49 +0000</resolved>
                                                    <fixVersion>JCR Jackrabbit User Manager 2.2.14</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17286655" author="enorman" created="Thu, 18 Feb 2021 18:26:49 +0000"  >&lt;p&gt;Fixed at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/4b323f550a8128605b2237a0df3f5704e4de7f42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/4b323f550a8128605b2237a0df3f5704e4de7f42&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17361160" author="enorman" created="Thu, 10 Jun 2021 18:28:33 +0000"  >&lt;p&gt;Closing with the 2.2.14 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nrwg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10148] Move accessmanager servlets from /apps to /libs</title>
                <link>https://issues.apache.org/jira/browse/SLING-10148</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The servlets provided by o.a.sling.jcr.jackrabbit.accessmanager should be mounted under /libs instead of /apps&#160;&lt;/p&gt;

&lt;p&gt;The /apps area should be left for customization or experiments.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13359187">SLING-10148</key>
            <summary>Move accessmanager servlets from /apps to /libs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Feb 2021 04:50:01 +0000</created>
                <updated>Thu, 10 Jun 2021 18:22:13 +0000</updated>
                            <resolved>Thu, 18 Feb 2021 18:26:02 +0000</resolved>
                                                    <fixVersion>JCR Jackrabbit Access Manager 3.0.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17286653" author="enorman" created="Thu, 18 Feb 2021 18:26:02 +0000"  >&lt;p&gt;Fixed at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-accessmanager/commit/dee006753cf4ab4594e1fc81ce5449a0651f3daf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-accessmanager/commit/dee006753cf4ab4594e1fc81ce5449a0651f3daf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17361148" author="enorman" created="Thu, 10 Jun 2021 18:22:13 +0000"  >&lt;p&gt;Closing with the 3.0.10 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nrw8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10147] scripting variables implementation details are exposed to not authorized users</title>
                <link>https://issues.apache.org/jira/browse/SLING-10147</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &quot;.SLING_availablebindings.json&quot; selector is registered at /apps/sling/servlet/default and the usage on all resources is not protected by any security checks.&#160; The information returned contains implementation details that a regular user should not need to know and could be considered an &quot;information disclosure&quot; vulnerability.&lt;/p&gt;

&lt;p&gt;Since this selector appears to only be used by the &quot;Scripting Variables&quot; webconsole plugin, I would expect that it should require the same security checking that would be needed to access the webconsole.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13359139">SLING-10147</key>
            <summary>scripting variables implementation details are exposed to not authorized users</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Feb 2021 20:30:10 +0000</created>
                <updated>Tue, 11 May 2021 13:01:47 +0000</updated>
                            <resolved>Fri, 26 Mar 2021 18:24:09 +0000</resolved>
                                                    <fixVersion>Scripting Core 2.3.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="39000">10h 50m</timespent>
                                <comments>
                            <comment id="17286151" author="kwin" created="Wed, 17 Feb 2021 21:26:30 +0000"  >&lt;p&gt;See the discussion at &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3543&quot; title=&quot;Provide a Felix Web Console Tab exposing the available Scripting Variables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3543&quot;&gt;&lt;del&gt;SLING-3543&lt;/del&gt;&lt;/a&gt;. Exposing the bindings requires a real Sling Servlet Request, therefore this generic servlet binding. Doing  the same kind of access check requires probably a dependency on the WebConsoleSecurityProvider service. But IMHO that service is optional (even with Sling) so it must also work without it. &lt;br/&gt;
Maybe reusing the OsgiManagerHttpContext is an option (&lt;a href=&quot;https://github.com/apache/felix-dev/blob/e8fbf5bae0b736e187f603ae05d5b2ebeafb7973/webconsole/src/main/java/org/apache/felix/webconsole/internal/servlet/OsgiManager.java#L961&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix-dev/blob/e8fbf5bae0b736e187f603ae05d5b2ebeafb7973/webconsole/src/main/java/org/apache/felix/webconsole/internal/servlet/OsgiManager.java#L961&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17286185" author="enorman" created="Wed, 17 Feb 2021 22:42:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&#160;Yes, that was my conclusion as well.&#160;&lt;/p&gt;

&lt;p&gt;My first thought was the simple solution of using a reference to a WebConsoleSecurityProvider service that implements the WebConsoleSecurityProvider2 interface and call WebConsoleSecurityProvider2#authenticate to do the validate the security credentials.&#160; That works ok when that service exists, but if there is no such service then the security checks become more complex and rely on the some internal implementation details...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;How would you feel about changing the request flow a bit, so the all the calls from the&#160;&quot;Scripting Variables&quot; form are POSTed to the ScriptingVariablesConsolePlugin servlet (which would flow though OsgiManagerHttpContext#handleSecurity) that sets some value as a request attribute and then forwards as a GET request for processing the response?&#160; Then changes can be made to ensure that any request to the&#160;SlingBindingsVariablesListJsonServlet that arrives without the expected request attribute is rejected and 404 is returned (or use OptingServlet)?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17286233" author="enorman" created="Thu, 18 Feb 2021 02:12:40 +0000"  >&lt;p&gt;I couldn&apos;t figure out a convenient way to forward a request from the webconsole plugin&#160; to the sling main servlet, so I changed my approach from forwarding the request to redirecting.&#160; &#160;&lt;/p&gt;

&lt;p&gt;The new post handling generates a one-time-use token to pass along as a request parameter and then redirects to generate the response. Changes were also made to ensure that any request to the SlingBindingsVariablesListJsonServlet that arrives without a valid value in the &quot;nonce&quot; request parameter is not accepted via implementing OptingServlet.&lt;/p&gt;

&lt;p&gt;I have stashed the code in PR #5 for review and feedback:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="17286983" author="bdelacretaz" created="Fri, 19 Feb 2021 10:28:31 +0000"  >&lt;p&gt;Wouldn&apos;t it be simpler to block access to the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/master/src/main/java/org/apache/sling/scripting/core/impl/SlingBindingsVariablesListJsonServlet.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SlingBindingsVariablesListJsonServlet&lt;/a&gt; unless the current request can read a specific node in the repository?&lt;/p&gt;

&lt;p&gt;The Sling Pipes &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/blob/de2932b92881b0351881f87f73ac5551b52e5dde/src/main/java/org/apache/sling/pipes/internal/PlumberImpl.java#L195&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PlumberImpl&lt;/a&gt; is using such mechanism: attempt to get &lt;tt&gt;/system/sling/permissions/pipes/exec&lt;/tt&gt; with &lt;tt&gt;ResourceResolver.getResource&lt;/tt&gt; and if that fails refuse to execute the current operation.&lt;/p&gt;

&lt;p&gt;That&apos;s just a few lines of code to implement, and you can then use regular JCR access control to define who can execute the servlet in question, I think that&apos;s convenient.&lt;/p&gt;</comment>
                            <comment id="17286985" author="kwin" created="Fri, 19 Feb 2021 10:31:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; Such an approach requires setting additional ACLs. I think reusing the webconsole&apos;s authentication makes a lot more sense in this context as this servlet is supposed to be called exclusively in this context. That way every user having access to the web console can access that servlet.&lt;/p&gt;</comment>
                            <comment id="17286989" author="bdelacretaz" created="Fri, 19 Feb 2021 10:40:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;Such an approach requires setting additional ACLs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Granted, but if we define a &lt;tt&gt;/system/sling/permissions/webconsole/view&lt;/tt&gt; resource I think that could be used for other webconsole-related hardening which is probably useful? I don&apos;t have concrete examples right now but I suppose they would come up if we take a closer look.&lt;/p&gt;

&lt;p&gt;And the resource-checking thing is about 4 lines of code compared to more than 100 at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Anyway, feel free to consider my suggestion as just that - if the new code has strong tests I&apos;m not opposed to merging it. But I&apos;m doubtful about that, searching for &lt;tt&gt;/test&lt;/tt&gt; in that PR returns nothing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17287259" author="enorman" created="Fri, 19 Feb 2021 17:50:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&#160;I am not opposed to such &quot;functional privilege&quot; concepts in general and I have advocated for such things in the past.&#160; But I must point out that the whole reason for the extra code in that pull request is to make it independent of optional security concepts.&#160; In other words to work when the org.apache.sling:org.apache.sling.extensions.webconsolesecurityprovider bundle is not present and the webconsole is protected by the default simple admin username/password as defined in the &quot;Apache Felix OSGi Management Console&quot; configuration.&lt;/p&gt;

&lt;p&gt;If I am allowed to assume that&#160;org.apache.sling:org.apache.sling.extensions.webconsolesecurityprovider (or equivalent) is present then the solution would be just a couple lines of code as I could get a reference to the WebConsoleSecurityProvider service and call&#160;WebConsoleSecurityProvider2#authenticate to check the security in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/master/src/main/java/org/apache/sling/scripting/core/impl/SlingBindingsVariablesListJsonServlet.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SlingBindingsVariablesListJsonServlet&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Can I require that the optional WebConsoleSecurityProvider be present to allow access?&#160; Is that any different than assuming that the resource tree is writable and capable of defining&#160; a&#160;&lt;tt&gt;/system/sling/permissions/webconsole/view&lt;/tt&gt;&#160;resource?&lt;/p&gt;</comment>
                            <comment id="17287832" author="enorman" created="Sun, 21 Feb 2021 00:08:44 +0000"  >&lt;p&gt;Added integration tests to the PR.&lt;/p&gt;</comment>
                            <comment id="17289955" author="bdelacretaz" created="Wed, 24 Feb 2021 14:15:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can I require that the optional WebConsoleSecurityProvider be present to allow access?  Is that any different than assuming that the resource tree is writable and capable of defining  a /system/sling/permissions/webconsole/view resource?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Requiring the &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt; service sounds reasonable to me, especially as IIUC the webconsole functionality that you are protecting here is not something critical that would prevent troubleshooting a Sling instance. IIUC that would greatly simplify your code?&lt;/p&gt;

&lt;p&gt;If you go that route I suggest doing a LAZY vote on our dev list about approving that option, as others might have different views (looks like Konrad and myself take this from different angles for example) and it&apos;s good to expose such &quot;architectural&quot; decisions to our developers community. But if it makes your code dramatically simpler I think that&apos;s a reasonable choice.&lt;/p&gt;</comment>
                            <comment id="17290010" author="jsedding" created="Wed, 24 Feb 2021 15:18:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt; would it be possible to re-implement the default authentication (i.e. without a &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt;) as a &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt;? This could be the default implementation and only be registered as a service unless another one is available. If this was the case it would then be simple to secure all sorts of web-console related servlets. Granted, the bindings are probably a bit of an edge case. So it may not be worth the effort.&lt;/p&gt;</comment>
                            <comment id="17290095" author="enorman" created="Wed, 24 Feb 2021 17:16:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;&#160;Of course that is not impossible, but it breaks the separation of duties.&#160; It just seems wrong for the scripting.core bundle to be providing security protection for the entire webconsole in order to protect the functionality of one webconsole plugin.&lt;/p&gt;</comment>
                            <comment id="17290791" author="jsedding" created="Thu, 25 Feb 2021 08:58:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt; it seems I didn&apos;t explain my suggestion clearly. Of course it makes little sense to implement a &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt; in &lt;tt&gt;scripting.core&lt;/tt&gt;. What I tried to suggest was a modification to the web-console itself (i.e. in the Apache Felix project), whereby the its current default authentication mechanism is refactored into a default &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt; and also exposed as a service. It could unregister the default &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt; when another one is registered as a service. With such a change to the web-console, you could rely on the presence of a &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt; in your changes to &lt;tt&gt;scripting.core&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17291179" author="enorman" created="Thu, 25 Feb 2021 19:55:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;&#160;Oh, that makes more sense.&#160; Sorry I misunderstood what you were suggesting.&#160; Yes, if we could guarantee that there was at least one&#160;WebConsoleSecurityProvider provided somewhere than that should be sufficient.&lt;/p&gt;</comment>
                            <comment id="17291969" author="enorman" created="Fri, 26 Feb 2021 23:43:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;&#160;I&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6390&quot; title=&quot;Refactor the&#160;default authentication mechanism of the webconsole to be a&#160;WebConsoleSecurityProvider2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6390&quot;&gt;&lt;del&gt;FELIX-6390&lt;/del&gt;&lt;/a&gt; with the proposed changes that you described.&#160; Lets see how that goes.&#160;&lt;/p&gt;</comment>
                            <comment id="17292056" author="cziegeler" created="Sat, 27 Feb 2021 08:36:01 +0000"  >&lt;p&gt;I think you are creating a tight dependency to the web console here, even worse to a version of it - I haven&apos;t look at the change for &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6390&quot; title=&quot;Refactor the&#160;default authentication mechanism of the webconsole to be a&#160;WebConsoleSecurityProvider2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6390&quot;&gt;&lt;del&gt;FELIX-6390&lt;/del&gt;&lt;/a&gt;, but even if that gets accepted how do you want to express the dependency?&lt;/p&gt;</comment>
                            <comment id="17292111" author="kwin" created="Sat, 27 Feb 2021 11:55:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think you are creating a tight dependency to the web console here&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is the whole point of this issue, the servlet should only be usable from the web console and from nowhere else&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;how do you want to express the dependency?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This service reference expresses the dependency: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/7/files#diff-ac2aaf6487dcf3676032acfd1213e3de141e8bae45500ea1367d2b34d4c6f714R79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/pull/7/files#diff-ac2aaf6487dcf3676032acfd1213e3de141e8bae45500ea1367d2b34d4c6f714R79&lt;/a&gt;. It is optional though to improve the error message in case the service is not there!&lt;/p&gt;</comment>
                            <comment id="17292175" author="cziegeler" created="Sat, 27 Feb 2021 16:30:32 +0000"  >&lt;p&gt;But if the solution depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6390&quot; title=&quot;Refactor the&#160;default authentication mechanism of the webconsole to be a&#160;WebConsoleSecurityProvider2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6390&quot;&gt;&lt;del&gt;FELIX-6390&lt;/del&gt;&lt;/a&gt; then you need to have the latest version of the web console with that fix - or am I missing something?&lt;/p&gt;</comment>
                            <comment id="17292196" author="kwin" created="Sat, 27 Feb 2021 17:56:16 +0000"  >&lt;p&gt;It works as long as a WebConsoleSecurityProvider is in place. Please have a look at the attached PRs&lt;/p&gt;</comment>
                            <comment id="17292236" author="enorman" created="Sat, 27 Feb 2021 20:48:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160;To clarify, the &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6390&quot; title=&quot;Refactor the&#160;default authentication mechanism of the webconsole to be a&#160;WebConsoleSecurityProvider2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6390&quot;&gt;&lt;del&gt;FELIX-6390&lt;/del&gt;&lt;/a&gt; improvement is only required for the use case where a WebConsoleSecurityProvider service that implements WebConsoleSecurityProvider2 is not registered.&#160;&lt;/p&gt;

&lt;p&gt;Since&#160;org.apache.sling/org.apache.sling.extensions.webconsolesecurityprovider/1.2.0 is included since starter version 11 and provides that service I am not certain how many real world use cases would need the &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6390&quot; title=&quot;Refactor the&#160;default authentication mechanism of the webconsole to be a&#160;WebConsoleSecurityProvider2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6390&quot;&gt;&lt;del&gt;FELIX-6390&lt;/del&gt;&lt;/a&gt; fix.&#160;&lt;/p&gt;

&lt;p&gt;Do you have some more data about whether existing customers typically use the webconsole with sling without the o.a.s.extensions.webconsolesecurityprovider bundle (or equivalent) deployed?&lt;/p&gt;</comment>
                            <comment id="17292418" author="cziegeler" created="Sun, 28 Feb 2021 14:48:08 +0000"  >&lt;p&gt;Ok, thanks - I think its common to use Sling without the webconsole being deployed and in that case you dont have the web console security provider bundle either. &lt;br/&gt;
So, all references to the webconsole API must be optional to allow scripting core to be usable without the web console being installed.&lt;br/&gt;
If you now introduce this dependency to the WebConsoleSecurityProvider, the servlet will not be available in those scenarios. Which might be fine, don&apos;t know about the use cases.&lt;br/&gt;
Wouldn&apos;t it make more sense to have the servlet as a plugin in the web console and then use a service user to fetch resources  - similar to what the plugin for the resource resolver does?&lt;/p&gt;</comment>
                            <comment id="17292447" author="enorman" created="Sun, 28 Feb 2021 17:15:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;So, all references to the webconsole API must be optional to allow scripting core to be usable without the web console being installed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;All the references to the webconsole API were already optional in scripting.core, the proposed changes don&apos;t change that at all.&#160;&lt;/p&gt;

&lt;p&gt;My impression is that if the&#160;ScriptingVariablesConsolePlugin is not accessible due to the webconsole not being deployed or the user not having permissions to access it, then the&#160;SlingBindingsVariablesListJsonServlet should not be accessible either since the only use case is being called from the ScriptingVariablesConsolePlugin UI.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Wouldn&apos;t it make more sense to have the servlet as a plugin in the web console and then use a service user to fetch resources - similar to what the plugin for the resource resolver does?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The reason for why SlingBindingsVariablesListJsonServlet requires a real Sling Servlet Request was already litigated and resolved when it was introduced with&#160;&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3543&quot; title=&quot;Provide a Felix Web Console Tab exposing the available Scripting Variables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3543&quot;&gt;&lt;del&gt;SLING-3543&lt;/del&gt;&lt;/a&gt;&#160;and perhaps redoing that discussion is out of scope here?&lt;/p&gt;</comment>
                            <comment id="17292636" author="cziegeler" created="Mon, 1 Mar 2021 06:00:25 +0000"  >&lt;p&gt;If everyone is happy that the SlingBindingsVariablesListJsonServlet is not available without a webconsole being deployed, then this solution might be ok.&lt;br/&gt;
Still it feels wrong to me to have a public endpoint in Sling which is just used for the web console. Anyways feel free to just ignore me&lt;/p&gt;</comment>
                            <comment id="17293072" author="enorman" created="Mon, 1 Mar 2021 18:13:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160;There is an ongoing vote at &lt;a href=&quot;https://lists.apache.org/thread.html/r869b846003410b3763a64681cd1ccf1d3c60cf964beb7c543d578d47%40%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/r869b846003410b3763a64681cd1ccf1d3c60cf964beb7c543d578d47%40%3Cdev.sling.apache.org%3E&lt;/a&gt;&#160;if you wish to make your preference or objection known.&lt;/p&gt;</comment>
                            <comment id="17309618" author="enorman" created="Fri, 26 Mar 2021 18:06:42 +0000"  >&lt;p&gt;These were the results of the vote on mailing list :&lt;/p&gt;

&lt;p&gt;PR #7 preferred by: Bertrand Delacretaz, Eric Norman, Julian Sedding&lt;/p&gt;

&lt;p&gt;PR #5: preferred by: Konrad Windszus&lt;/p&gt;

&lt;p&gt;Since PR #7 was the more preferred solution I will proceed with merging the PR with those changes and close the PR #5.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;FYI: I created the &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6390&quot; title=&quot;Refactor the&#160;default authentication mechanism of the webconsole to be a&#160;WebConsoleSecurityProvider2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6390&quot;&gt;&lt;del&gt;FELIX-6390&lt;/del&gt;&lt;/a&gt; issue with additional proposed changes to better cover the use case where a WebConsoleSecurityProvider service that implements WebConsoleSecurityProvider2 is not registered. I asked several times for a review and/or ruling on that proposal on both JIRA and the PR but there has been no response at all. If anyone has any influence over the FELIX project committers, perhaps you can nudge them on following up on &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6390&quot; title=&quot;Refactor the&#160;default authentication mechanism of the webconsole to be a&#160;WebConsoleSecurityProvider2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-6390&quot;&gt;&lt;del&gt;FELIX-6390&lt;/del&gt;&lt;/a&gt; since they are ignoring me.&lt;/p&gt;</comment>
                            <comment id="17309634" author="enorman" created="Fri, 26 Mar 2021 18:24:09 +0000"  >&lt;p&gt;Merged PR #7 at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/e4481eeafdd5a6b1c1114f5746fc13cd7d55d808&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/e4481eeafdd5a6b1c1114f5746fc13cd7d55d808&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12712292">SLING-3543</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="13361288">FELIX-6390</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nrlk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10145] No removes happen with duplicated &quot;remove *&quot; repoinit statement</title>
                <link>https://issues.apache.org/jira/browse/SLING-10145</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While applying the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9090&quot; title=&quot;AclLine.Action.REMOVE and AclLine.Action.REMOVE_ALL not handled in jcr implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9090&quot;&gt;&lt;del&gt;SLING-9090&lt;/del&gt;&lt;/a&gt; patch I mistakenly changed&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (action == AclLine.Action.REMOVE_ALL) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (removePrincipalEntries(acl, principalName, getJcrPaths(session, line.getProperty(PROP_PATHS)))) {
    modified = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (action == AclLine.Action.REMOVE_ALL) {
  modified = removePrincipalEntries(acl, principalName, getJcrPaths(session, line.getProperty(PROP_PATHS)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which can cause &lt;tt&gt;modified&lt;/tt&gt; to be reset if &lt;tt&gt;removePrincipalEntries&lt;/tt&gt; returns false, even if another loop iteration has set it true.&lt;/p&gt;

&lt;p&gt;The code should OR &lt;tt&gt;modified&lt;/tt&gt; with the result of the function call:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (action == AclLine.Action.REMOVE_ALL) {
  modified |= removePrincipalEntries...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The existing tests have not detected this bug, I&apos;ll need to augment them to do so before fixing that bug.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Update this bug causes a duplicated &quot;remove *&quot; statement to have no effect at all, added a test in commit c2e8c53&lt;/em&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13358845">SLING-10145</key>
            <summary>No removes happen with duplicated &quot;remove *&quot; repoinit statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Feb 2021 11:12:19 +0000</created>
                <updated>Fri, 19 Feb 2021 16:21:15 +0000</updated>
                            <resolved>Tue, 16 Feb 2021 12:12:53 +0000</resolved>
                                    <version>Repoinit JCR 1.1.32</version>
                                    <fixVersion>Repoinit JCR 1.1.34</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17285159" author="bdelacretaz" created="Tue, 16 Feb 2021 12:12:53 +0000"  >&lt;p&gt;Fixed in commit 611be91 - I haven&apos;t been able to expose the problems in tests, that might be a somewhat obscure case but the fix is obvious.&lt;/p&gt;</comment>
                            <comment id="17285226" author="bdelacretaz" created="Tue, 16 Feb 2021 14:19:55 +0000"  >&lt;p&gt;Always Try Again After Lunch - I found a way to expose the issue, by duplicating the &lt;tt&gt;remove *&lt;/tt&gt; statement, test added in commit c2e8c53. Not a likely case but wrong code is wrong, fixed now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13286402">SLING-9090</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nps8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10140] Handle defining resources through JSON when the resourceRoot is a file that is mapped to a different entry path</title>
                <link>https://issues.apache.org/jira/browse/SLING-10140</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Handle the special case when the resourceRoot points to a mapped file and also has a &quot;propsJSON&quot; directive.&lt;/p&gt;


&lt;p&gt;In this case, the &quot;propsJSON&quot; sibling entry may still exist in the bundle but it would not be contained within the mappedPath set since it is not a descendant of the resourceRoot.&#160; So additional logic is needed to locate the &quot;propsJSON&quot; entry for this file.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Sling-Bundle-Resources: /products.txt;path:=/resources/products.txt;propsJSON:=json&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For this example, if the /resources/products.txt.json file exists in the bundle, it should be loaded and used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13358511">SLING-10140</key>
            <summary>Handle defining resources through JSON when the resourceRoot is a file that is mapped to a different entry path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Feb 2021 02:28:18 +0000</created>
                <updated>Tue, 27 Apr 2021 03:42:19 +0000</updated>
                            <resolved>Sun, 14 Feb 2021 03:07:45 +0000</resolved>
                                                    <fixVersion>Bundle Resource Provider 2.3.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17284318" author="enorman" created="Sun, 14 Feb 2021 03:07:45 +0000"  >&lt;p&gt;Fixed at: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-bundleresource-impl/commit/54c2d6949c3c0e4714c51d30ef2841af38e52e35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-bundleresource-impl/commit/54c2d6949c3c0e4714c51d30ef2841af38e52e35&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also added new unit test to verify the fix.&lt;/p&gt;</comment>
                            <comment id="17332905" author="enorman" created="Tue, 27 Apr 2021 03:42:19 +0000"  >&lt;p&gt;Closing with the 2.3.4 version released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nnq0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10137] SlingModelAdapterFactory.createModel() returns null</title>
                <link>https://issues.apache.org/jira/browse/SLING-10137</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to the documentation (&lt;a href=&quot;https://sling.apache.org/documentation/bundles/models.html#modelfactory-since-120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/models.html#modelfactory-since-120&lt;/a&gt;) null checks are not necessary. However if a &lt;tt&gt;@PostConstruct&lt;/tt&gt; method returns false, &lt;tt&gt;org.apache.sling.models.impl.ModelAdapterFactory.invokePostConstruct()&lt;/tt&gt; will return &lt;tt&gt;null&lt;/tt&gt;. This will cause &lt;tt&gt;org.apache.sling.models.impl.ModelAdapterFactory.createModel()&lt;/tt&gt; to fail because &lt;tt&gt;result.getThrowable()&lt;/tt&gt; returns &lt;tt&gt;null&lt;/tt&gt; which will result in &lt;tt&gt;throw null&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In order to fix this &lt;tt&gt;internalCreateModel()&lt;/tt&gt; needs to return a valid throwable to indicate that the &lt;tt&gt;@PostConstruct&lt;/tt&gt; method returned &lt;tt&gt;false&lt;/tt&gt; and therefore no model was created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13358127">SLING-10137</key>
            <summary>SlingModelAdapterFactory.createModel() returns null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="renegrob">Ren&#233; Grob</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Feb 2021 09:31:49 +0000</created>
                <updated>Thu, 21 Mar 2024 12:28:53 +0000</updated>
                            <resolved>Thu, 21 Mar 2024 12:28:53 +0000</resolved>
                                    <version>Models Implementation 1.4.16</version>
                                                    <component>Sling Models</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17283118" author="kwin" created="Thu, 11 Feb 2021 16:04:07 +0000"  >&lt;p&gt;This is already reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8079&quot; title=&quot;Returning false in a model PostConstruct causes an java.lang.IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8079&quot;&gt;&lt;del&gt;SLING-8079&lt;/del&gt;&lt;/a&gt;. But the title of this JIRA issue is wrong, because null is IMHO never returned from SlingModelAdapterFactory.createModel(), rather the IllegalStateException reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8079&quot; title=&quot;Returning false in a model PostConstruct causes an java.lang.IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8079&quot;&gt;&lt;del&gt;SLING-8079&lt;/del&gt;&lt;/a&gt;, right?&lt;/p&gt;</comment>
                            <comment id="17283408" author="renegrob" created="Thu, 11 Feb 2021 22:04:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; Sorry, I didn&apos;t find that issue. I probably used the wrong keywords in my search. And yes you are right &lt;tt&gt;ModelAdapterFactory.createModel()&lt;/tt&gt; actuall throws &lt;tt&gt;null&lt;/tt&gt; and doesn&apos;t return it. &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8079&quot; title=&quot;Returning false in a model PostConstruct causes an java.lang.IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8079&quot;&gt;&lt;del&gt;SLING-8079&lt;/del&gt;&lt;/a&gt; mentions that the exception should not be thrown. I would rephrase that to: &quot;An exception indicating that a &lt;tt&gt;@PostConstruct&lt;/tt&gt; method returned &lt;tt&gt;false&lt;/tt&gt; should be thrown.&quot; Because if you call createModel() you expect a non-null value back. This guarantee is the whole point of using this method. If you want the null-value behavior you could just use adaptTo() instead. The current behavior is very confusing. I had to debug all the way down to the Sling model implementation to find out why this happened.&lt;br/&gt;
Should I resolve this issue and mark it as duplicate?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13196792">SLING-8079</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13196792">SLING-8079</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nlcw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10134] Deleting ACEs for users that don&apos;t exist is impossible</title>
                <link>https://issues.apache.org/jira/browse/SLING-10134</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We&apos;re looking into using Sling Repo Init to clean up old permissions that have been left behind in our instances over time. We used the following syntax: &lt;/p&gt;

&lt;p&gt;delete service user sv-read-apps-website-components&lt;br/&gt;
set ACL for sv-read-apps-website-components&lt;br/&gt;
 remove * on /apps/website/components &lt;br/&gt;
end &lt;/p&gt;

&lt;p&gt;We get the following error: 09.02.2021 21:57:38.961 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.repoinit.RepositoryInitializer.25c1f862-75bd-4cd9-9ca1-b612f8752544)&amp;#93;&lt;/span&gt; com.adobe.granite.repository.impl.SlingRepositoryManager Exception in a SlingRepositoryInitializer: RepositoryInitializerFactory, references=[], scripts=2 java.lang.RuntimeException: Failed to set ACL (java.lang.IllegalStateException: Authorizable not found:sv-read-apps-website-components) AclLine REMOVE_ALL &lt;/p&gt;
{paths=[/apps/website/components]}
&lt;p&gt; at org.apache.sling.jcr.repoinit.impl.AclVisitor.setAcl(AclVisitor.java:63) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.jcr.repoinit:1.1.8&amp;#93;&lt;/span&gt; at org.apache.sling.jcr.repoinit.impl.AclVisitor.visitSetAclPrincipal(AclVisitor.java:84) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.jcr.repoinit:1.1.8&amp;#93;&lt;/span&gt; at org.apache.sling.repoinit.parser.operations.SetAclPrincipals.accept(SetAclPrincipals.java:53) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.repoinit.parser:1.2.2&amp;#93;&lt;/span&gt; .... &lt;/p&gt;

&lt;p&gt;I think it&apos;s fine that the authorizable is not found: It doesn&apos;t have to exist, in order to be able to remove ACEs, which is exactly what we are trying to achieve: remove left behind ACEs for our deleted service users.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13357933">SLING-10134</key>
            <summary>Deleting ACEs for users that don&apos;t exist is impossible</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Henry Kuijpers">Henry Kuijpers</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Feb 2021 13:08:54 +0000</created>
                <updated>Tue, 13 Apr 2021 08:43:55 +0000</updated>
                                            <version>Repoinit JCR 1.1.30</version>
                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17282565" author="anchela" created="Wed, 10 Feb 2021 16:41:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt;, i agree with your analysis.... when iterating over entries of an access control list all entries that have a matching principal-name should be removed based on the repo-init statements above. IMHO this is a bug.... &lt;/p&gt;

&lt;p&gt;on a side note: one might argue that the removal should be better using&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
set ACL on /apps/website/components
    remove * &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; su-read-apps-website-component
end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but the net-effect is the same and wouldn&apos;t be surprised if that wouldn&apos;t work either.&lt;/p&gt;

&lt;p&gt;after all: depending on the configuration of the underlaying repository, it might be possible to even create access control content for a principal that doesn&apos;t exist (yet) (see import-behavior &apos;besteffort&apos; defined with oak authorization configuration)&lt;/p&gt;</comment>
                            <comment id="17282681" author="henry kuijpers" created="Wed, 10 Feb 2021 20:07:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt;, I really like that you&apos;re thinking that way (with regards to path-based access, vs authorizable-based access): I thought the very same. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; So I tried that this afternoon as well, just after I created this ticket... And indeed: The outcome is the very same. An exception is also being thrown, indicating that the authorizable could not be found. I am indeed still in doubt if I maybe should use the path-based way of defining that an ACE for that authorizable should not be there. &lt;/p&gt;

&lt;p&gt;I really think that the value of ensuring that a authorizable (identified by the given name) exists, in the context of clearing up ACLs, is 0. I didn&apos;t even know of the import-behavior &apos;besteffort&apos;. I do think that&apos;s an additional reason this is indeed a bug.&lt;/p&gt;

&lt;p&gt;I will try to provide a fix for this in the coming days. Hopefully it can be merged in quite fast, we&apos;re also waiting for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9090&quot; title=&quot;AclLine.Action.REMOVE and AclLine.Action.REMOVE_ALL not handled in jcr implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9090&quot;&gt;&lt;del&gt;SLING-9090&lt;/del&gt;&lt;/a&gt; to be merged in.&lt;/p&gt;</comment>
                            <comment id="17282910" author="anchela" created="Thu, 11 Feb 2021 08:08:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt;, i guess there is a slight misconception in Sling repo-init about principals: it assumes that a given Principal for which access control is defined is always backed by a user or a group.... that might be the case but user management does not need to be the only source of principals.&lt;br/&gt;
it commonly is true though for service users as you use in your example. also note: for service users i would recommend to use the new principal-based access control setup if that is already configured as part of your repository authorization setup). it has the added benefit that access control setup is stored with the user node and thus removing the service user would automatically get rid of the ac-setup.&lt;/p&gt;

&lt;p&gt;repo init:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create service user sv-read-apps-website-components
set principal ACL &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sv-read-apps-website-components
allow jcr:read on /apps/website/components
end 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the corresponding Apache Jackrabbit Oak documentation/exercises:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;http://jackrabbit.apache.org/oak/docs/security/authorization/principalbased.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/oak/docs/security/authorization/principalbased.html&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-exercise/src/test/java/org/apache/jackrabbit/oak/exercise/security/authorization/principalbased/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-exercise/src/test/java/org/apache/jackrabbit/oak/exercise/security/authorization/principalbased/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13360279">SLING-10156</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13371985">SLING-10299</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nk5s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10133] Memory leak in MonitoringDistributionPackageBuilder</title>
                <link>https://issues.apache.org/jira/browse/SLING-10133</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The MonitoringDistributionPackageBuilder maintain a list of MBean for the latest packages. The number of packages to be monitored is passed as the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/b80cd8f3bae6b7875387ee7caaea271b7e9baec6/src/main/java/org/apache/sling/distribution/monitor/impl/MonitoringDistributionPackageBuilder.java#L49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;queueCapacity&lt;/a&gt;&#160;via the constructor. When the queueCapacity is 0, the monitoring is disabled.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/b80cd8f3bae6b7875387ee7caaea271b7e9baec6/src/main/java/org/apache/sling/distribution/serialization/impl/vlt/VaultDistributionPackageBuilderFactory.java#L201&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;VaultDistributionPackageBuilderFactory&lt;/a&gt; and&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/b80cd8f3bae6b7875387ee7caaea271b7e9baec6/src/main/java/org/apache/sling/distribution/serialization/impl/DistributionPackageBuilderFactory.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DistributionPackageBuilderFactory&lt;/a&gt; disable this feature by default. An environment that runs for multiple weeks without restart and with the default configuration will experience a memory leak that leads to the JVM running out of memory.&lt;/p&gt;

&lt;p&gt;The implementation has two flaws that explain the memory leak.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;%231RegisteringaMBeanwhenthequeueCapacityis0&quot;&gt;&lt;/a&gt;#1 - Registering a MBean when the queueCapacity is 0&lt;/h2&gt;

&lt;p&gt;The code &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/b80cd8f3bae6b7875387ee7caaea271b7e9baec6/src/main/java/org/apache/sling/distribution/monitor/impl/MonitoringDistributionPackageBuilder.java#L106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unconditionally registers a MBean&lt;/a&gt; even if the queueCapacity is 0. We need to only register a MBean when the capacity is &amp;gt; 0.&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;%232ConcurrencyissuewhenunregisteringMBean&quot;&gt;&lt;/a&gt;#2 - Concurrency issue when un-registering MBean&lt;/h2&gt;

&lt;p&gt;The code &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/b80cd8f3bae6b7875387ee7caaea271b7e9baec6/src/main/java/org/apache/sling/distribution/monitor/impl/MonitoringDistributionPackageBuilder.java#L108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;attempts to remove&lt;/a&gt; by checking if the queueCapacity equals the list of MBeans. This check works in a single threaded context but it falls short when registerDistributionPackageMBean is invoked concurrently. In the latter case, it can happen that the check never holds true leading the&#160;mBeans queue to grow indefinitely. One solution is to leverage the features of the&#160;LinkedBlockingDeque. Create a&#160;LinkedBlockingDeque with bounded capacity and rely on the returned status from the offer method to decide if an item needs to be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13357930">SLING-10133</key>
            <summary>Memory leak in MonitoringDistributionPackageBuilder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Feb 2021 12:45:59 +0000</created>
                <updated>Mon, 10 Mar 2025 13:50:21 +0000</updated>
                                            <version>Content Distribution Core 0.4.0</version>
                                    <fixVersion>Content Distribution Core 0.8.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nk54:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10131] Unpack extension causes java.io.NotSerializableException: org.apache.sling.feature.ArtifactId</title>
                <link>https://issues.apache.org/jira/browse/SLING-10131</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The unpack extension puts an artiactId into the context of the osgi installer. However, ArtifactId is not serializable which can cause issues. We should just put the mvn id string into the context and recreated the artifact id object from it as needed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13357744">SLING-10131</key>
            <summary>Unpack extension causes java.io.NotSerializableException: org.apache.sling.feature.ArtifactId</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2021 11:30:16 +0000</created>
                <updated>Mon, 15 Feb 2021 10:48:46 +0000</updated>
                            <resolved>Wed, 10 Feb 2021 09:21:31 +0000</resolved>
                                    <version>Feature Model Unpack Extension 0.1.0</version>
                                    <fixVersion>Feature Model Unpack Extension 0.2.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17282333" author="karlpauls" created="Wed, 10 Feb 2021 09:21:31 +0000"  >&lt;p&gt;Fixed by using the mvn id.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nizs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10127] Keep modified content packages of type &quot;content&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-10127</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/a21667f65a2bd503bd752c3cc6fb842caac90d90/src/main/java/org/apache/sling/feature/cpconverter/ContentPackage2FeatureModelConverter.java#L343&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/a21667f65a2bd503bd752c3cc6fb842caac90d90/src/main/java/org/apache/sling/feature/cpconverter/ContentPackage2FeatureModelConverter.java#L343&lt;/a&gt; all generated/modified content packages of type &quot;content&quot; are just disregarded.&lt;/p&gt;

&lt;p&gt;If you have as input a content package of type &quot;content&quot; containing ACLs on mutable nodes, system users and arbitrary other mutable nodes, the first two are correctly extracted into a feature model but the content package is not modified, leading to the fact that the ACLs and system users are still contained in the content package.&lt;/p&gt;

&lt;p&gt;IMHO a modified content-package should be given out (and kept) as that one differs from the input content package!&lt;br/&gt;
Otherwise you would try to install system users/ACLs again when installing the content package which might fail due to missing rights...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13357370">SLING-10127</key>
            <summary>Keep modified content packages of type &quot;content&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Feb 2021 10:26:46 +0000</created>
                <updated>Mon, 17 May 2021 11:38:36 +0000</updated>
                            <resolved>Wed, 14 Apr 2021 08:35:51 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17281414" author="kwin" created="Mon, 8 Feb 2021 22:15:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; What is your opinion on this one? Are the mutable content packages not supposed to be stripped from the parts which are extracted into the feature model? &lt;/p&gt;</comment>
                            <comment id="17299371" author="kwin" created="Thu, 11 Mar 2021 07:26:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt; This is somewhat related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10070&quot; title=&quot;Option to enforce principal-based authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10070&quot;&gt;&lt;del&gt;SLING-10070&lt;/del&gt;&lt;/a&gt;. Is it worth to look into this (given the discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-509&quot; title=&quot;Make DocView import failures fail the whole installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-509&quot;&gt;&lt;del&gt;JCRVLT-509&lt;/del&gt;&lt;/a&gt;)?&lt;/p&gt;</comment>
                            <comment id="17299381" author="anchela" created="Thu, 11 Mar 2021 07:42:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, thanks for highlighting that. very good point. in fact if content packages are installed as originally defined the effect of &apos;enforce principal-based ac-setup&apos; would actually be destroyed if the content packages comes with an import-mode that moves the existing service users.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, i think we briefly touched this topic while fixing security issues with the converter but somehow assume that this is already the case. if it&apos;s not as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; reports this would need to be addressed. wdyt?&lt;/p&gt;</comment>
                            <comment id="17311422" author="kwin" created="Tue, 30 Mar 2021 11:10:04 +0000"  >&lt;p&gt;Currently the &lt;tt&gt;ContentPackage2FeatureModelConverter.dropContent&lt;/tt&gt; field is always set to false. Having it set to &lt;tt&gt;true&lt;/tt&gt; would lead to &lt;br/&gt;
1. including the modified package of type &quot;content&quot; in the artifact repository&lt;br/&gt;
2. referencing the package in the feature model&lt;/p&gt;

&lt;p&gt;What we want is rather to keep the converted package in some other location (replace the original input package, complicated if this is a subpackage of an original package).&lt;br/&gt;
I am not sure if the input file is always writable by the cp2fm process so I think writing the modified files to a dedicated folder makes more sense.&lt;br/&gt;
That would also mean that sub packages would be dissolved and written as flat content packages.&lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="17320804" author="kwin" created="Wed, 14 Apr 2021 08:35:51 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/bacfbd74fad08d1e48d3e813091aac0ded62c7b3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/bacfbd74fad08d1e48d3e813091aac0ded62c7b3&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13363285">JCRVLT-509</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13366001">SLING-10233</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13366023">SLING-10234</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ngoo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10124] OSGi Mock - Service reference order is not correct for Collection field injection</title>
                <link>https://issues.apache.org/jira/browse/SLING-10124</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If I look at the osgi mocks implementation to get back a list of service references, I have the feeling that the order is wrong:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/blob/ef6535bab69562ad3c2276dc84893fa2fab48438/core/src/main/java/org/apache/sling/testing/mock/osgi/MockBundleContext.java#L295&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/blob/ef6535bab69562ad3c2276dc84893fa2fab48438/core/src/main/java/org/apache/sling/testing/mock/osgi/MockBundleContext.java#L295&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It states here that the order is the reverse order, but if I check in the framework itself, the following comment would state the other order (which is what I also experience when debugging in a live instance) :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/felix-dev/blob/c562829a9ffd40af2f165a8b4763b4d6759f3c0f/framework/src/main/java/org/apache/felix/framework/ServiceRegistrationImpl.java#L688&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix-dev/blob/c562829a9ffd40af2f165a8b4763b4d6759f3c0f/framework/src/main/java/org/apache/felix/framework/ServiceRegistrationImpl.java#L688&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13356540">SLING-10124</key>
            <summary>OSGi Mock - Service reference order is not correct for Collection field injection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="royteeuwen">Roy Teeuwen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2021 17:10:17 +0000</created>
                <updated>Fri, 12 Mar 2021 19:55:56 +0000</updated>
                            <resolved>Mon, 8 Mar 2021 12:25:02 +0000</resolved>
                                    <version>Testing OSGi Mock 3.0.0</version>
                                    <fixVersion>Testing OSGi Mock 3.1.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17278216" author="royteeuwen" created="Wed, 3 Feb 2021 17:11:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert&quot; class=&quot;user-hover&quot; rel=&quot;sseifert&quot;&gt;sseifert&lt;/a&gt; I see you committed the code for the ordering, any idea&apos;s about this? I don&apos;t mind opening a PR to put the order back in the natural state but I want confirmation first that I&apos;m not overlooking something&lt;/p&gt;</comment>
                            <comment id="17279069" author="sseifert@pro-vision.de" created="Thu, 4 Feb 2021 18:52:26 +0000"  >&lt;p&gt;this behavior was fixed exactly like this in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7193&quot; title=&quot;osgi-mock: MockServiceReferences.compareTo reverses ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7193&quot;&gt;&lt;del&gt;SLING-7193&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
i&apos;m quite sure the current implementation is correct and in sync with the real framework.&lt;/p&gt;

&lt;p&gt;unfortunately &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7193&quot; title=&quot;osgi-mock: MockServiceReferences.compareTo reverses ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7193&quot;&gt;&lt;del&gt;SLING-7193&lt;/del&gt;&lt;/a&gt; does not contain links to the relevant parts of the OSGI spec.&lt;/p&gt;</comment>
                            <comment id="17279624" author="royteeuwen" created="Fri, 5 Feb 2021 10:44:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert&quot; class=&quot;user-hover&quot; rel=&quot;sseifert&quot;&gt;sseifert&lt;/a&gt; I made a test case to show my use case&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/6&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The first two asserts succeed, but the third one doesn&apos;t, while I would expect that one to give the same result as the second one?&lt;/p&gt;</comment>
                            <comment id="17293409" author="royteeuwen" created="Tue, 2 Mar 2021 06:43:13 +0000"  >&lt;p&gt;Anyone has any time to verify what I did is correct and that this is an actual bug in the OSGi Mock framework?&lt;/p&gt;</comment>
                            <comment id="17297313" author="sseifert@pro-vision.de" created="Mon, 8 Mar 2021 12:23:56 +0000"  >&lt;p&gt;thanks for the PR - i had a deeper look. your test case &amp;amp; fix made it clear that your issue is about injection service references into a collection field (updated ticket title accordingly), which is something different than the implementation of the method BundleContext.getServiceReferences i had in mind.&lt;/p&gt;

&lt;p&gt;both use cases behave differently in felix - interestingly in both cases the OSGi spec does not really define in which order the references should be returned, as far as i&apos;ve seen e.g.:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://docs.osgi.org/specification/osgi.core/7.0.0/framework.api.html#org.osgi.framework.BundleContext.getServiceReferences-String-String-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.osgi.org/specification/osgi.core/7.0.0/framework.api.html#org.osgi.framework.BundleContext.getServiceReferences-String-String-&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://docs.osgi.org/specification/osgi.cmpn/7.0.0/service.component.html#service.component-field.injection&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.osgi.org/specification/osgi.cmpn/7.0.0/service.component.html#service.component-field.injection&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;testing with the actual felix implementation it seems that&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;BundleContext.getServiceReferences returns the service in any order, ignoring the refences&lt;/li&gt;
	&lt;li&gt;injection services references in a collection fields always injects the services in ascending order by rank, just as in your test case&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17297314" author="sseifert@pro-vision.de" created="Mon, 8 Mar 2021 12:25:02 +0000"  >&lt;p&gt;merged the PR with some additional comments in the code linking to the spec&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/commit/055e4f1f6f56908762fb67a4b9c507edcb4000cd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/commit/055e4f1f6f56908762fb67a4b9c507edcb4000cd&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17297316" author="royteeuwen" created="Mon, 8 Mar 2021 12:28:43 +0000"  >&lt;p&gt;Super, thanks for the further digging into the actual OSGi spec! &lt;/p&gt;</comment>
                            <comment id="17297706" author="kwin" created="Mon, 8 Mar 2021 21:14:10 +0000"  >&lt;p&gt;The OSGi spec for the order is at &lt;a href=&quot;https://docs.osgi.org/specification/osgi.cmpn/7.0.0/service.component.html#service.component-reference.field.option&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.osgi.org/specification/osgi.cmpn/7.0.0/service.component.html#service.component-reference.field.option&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Before the component instance is activated, SCR must set the field value with a new mutable collection that must contain the initial set of bound services sorted using the same ordering as ServiceReference.compareTo based upon service ranking and service id.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The order is clarified in &lt;a href=&quot;https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html#compareTo-java.lang.Object-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.osgi.org/javadoc/osgi.core/7.0.0/org/osgi/framework/ServiceReference.html#compareTo-java.lang.Object-&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13108932">SLING-7193</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nbkg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10123] Distribution agent queue processor should implement a backoff in case of retries for processing an item</title>
                <link>https://issues.apache.org/jira/browse/SLING-10123</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case of recoverable exceptions, distribution agent queue processor does not evict the queue item from the processing queue &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;. Rather, the item is retried infinitely until either the distribution of the item is successful or a non-recoverable exception is thrown for the item. However, since there is &quot;something wrong&quot; because of which an exception is thrown in the first place, we should add a cool off period before trying to reattempt to distribute the same item. This can be achieved through a linear or exponential backoff.&lt;/p&gt;

&lt;p&gt;cc - &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashishc&quot; class=&quot;user-hover&quot; rel=&quot;ashishc&quot;&gt;ashishc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/master/src/main/java/org/apache/sling/distribution/agent/impl/SimpleDistributionAgentQueueProcessor.java#L147-L150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/master/src/main/java/org/apache/sling/distribution/agent/impl/SimpleDistributionAgentQueueProcessor.java#L147-L150&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13356482">SLING-10123</key>
            <summary>Distribution agent queue processor should implement a backoff in case of retries for processing an item</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="mohiaror">Mohit Arora</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2021 11:50:05 +0000</created>
                <updated>Tue, 6 Jul 2021 16:05:41 +0000</updated>
                            <resolved>Tue, 16 Mar 2021 09:59:32 +0000</resolved>
                                    <version>Content Distribution Core 0.4.2</version>
                                    <fixVersion>Content Distribution Core 0.4.6</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6000">1h 40m</timespent>
                                <comments>
                            <comment id="17278655" author="marett" created="Thu, 4 Feb 2021 08:27:17 +0000"  >&lt;p&gt;That makes sense. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohiaror&quot; class=&quot;user-hover&quot; rel=&quot;mohiaror&quot;&gt;mohiaror&lt;/a&gt;&#160;would you open a PR ?&lt;/p&gt;</comment>
                            <comment id="17290925" author="mohiaror" created="Thu, 25 Feb 2021 13:54:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashishc&quot; class=&quot;user-hover&quot; rel=&quot;ashishc&quot;&gt;ashishc&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, should we implement an ExponentialBackoff similar to &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; or would a simple Thread.sleep() for a specified time (linear backoff) be sufficient? If we want to use &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, would it make sense to extract it out into a common bundle which both distribution-journal and distribution-core are importing?&lt;/p&gt;

&lt;p&gt;Just to add to this, I think exponential backoff might be an overkill here..mainly because we are not going to limit the reattempts. We can, in theory, have infinite attempts to deliver the queue item (for example, the endpoint is unreachable). Which means even if we implement an exponential backoff, we will have to define a limit and then start over again. This could be over-engineering, unless I am missing a very good reason to use exponential backoff here.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-journal/blob/master/src/main/java/org/apache/sling/distribution/journal/shared/ExponentialBackOff.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-journal/blob/master/src/main/java/org/apache/sling/distribution/journal/shared/ExponentialBackOff.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17299334" author="ashishc" created="Thu, 11 Mar 2021 06:31:30 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohiaror&quot; class=&quot;user-hover&quot; rel=&quot;mohiaror&quot;&gt;mohiaror&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;should we implement an ExponentialBackoff similar to &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If we want to use &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, would it make sense to extract it out into a common bundle which both distribution-journal and distribution-core are importing?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m interested in knowing what would the caller of &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; be doing while &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; waits for back-off time on an executor of its own. If the caller can only wait for it to finish (via a blocking call, or a sleep), then using &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; (or something equivalent) doesn&apos;t seem to make much sense to me.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; is only relevant when the caller can proceed to do something different and return to transport once the back-off duration is over. I don&apos;t think the above is applicable in the case this issue speaks of.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-journal/blob/master/src/main/java/org/apache/sling/distribution/journal/shared/ExponentialBackOff.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-journal/blob/master/src/main/java/org/apache/sling/distribution/journal/shared/ExponentialBackOff.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17299844" author="mohiaror" created="Thu, 11 Mar 2021 20:16:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashishc&quot; class=&quot;user-hover&quot; rel=&quot;ashishc&quot;&gt;ashishc&lt;/a&gt; Yes, makes sense. I have raised a PR to implement linear backoff waiting for random amount of time between 0 to 30 seconds - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/49&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nb7k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10122] A Equal Sign (=) in a set properties instruction makes the Converter fail</title>
                <link>https://issues.apache.org/jira/browse/SLING-10122</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;An entry in a Repository Initializer like this:&lt;/p&gt;

&lt;p&gt;&quot;create path /test&lt;br/&gt;
 set properties on /test&lt;br/&gt;
 set testprop to \&quot;one=two\&quot;&lt;br/&gt;
 end&quot;\&lt;/p&gt;

&lt;p&gt;will make the ConfigurationEntryHandler fail with:&lt;br/&gt;
Tests run: 48, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.036 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.feature.cpconverter.handlers.ConfigurationEntryHandlerTest&lt;br/&gt;
org.apache.sling.feature.cpconverter.handlers.ConfigurationEntryHandlerTest.parseConfiguration&lt;span class=&quot;error&quot;&gt;&amp;#91;13&amp;#93;&lt;/span&gt; Time elapsed: 0.005 s &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.io.IOException: Unexpected token 34; expected: 61 (line=24, pos=9)&lt;br/&gt;
 at org.apache.felix.cm.file.ConfigurationHandler.readFailure(ConfigurationHandler.java:700)&lt;br/&gt;
 at org.apache.felix.cm.file.ConfigurationHandler.readInternal(ConfigurationHandler.java:304)&lt;br/&gt;
 at org.apache.felix.cm.file.ConfigurationHandler.read(ConfigurationHandler.java:267)&lt;br/&gt;
 at org.apache.sling.feature.cpconverter.handlers.ConfigurationEntryHandler.parseConfiguration(ConfigurationEntryHandler.java:33)&lt;br/&gt;
 at org.apache.sling.feature.cpconverter.handlers.AbstractConfigurationEntryHandler.handle(AbstractConfigurationEntryHandler.java:66)&lt;br/&gt;
 at org.apache.sling.feature.cpconverter.handlers.ConfigurationEntryHandlerTest.parseConfiguration(ConfigurationEntryHandlerTest.java:132)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I can fix that by escaping with a backslash but that is not a valid Repository Initializer content.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13356313">SLING-10122</key>
            <summary>A Equal Sign (=) in a set properties instruction makes the Converter fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2021 22:43:51 +0000</created>
                <updated>Tue, 30 Mar 2021 11:00:43 +0000</updated>
                            <resolved>Thu, 4 Feb 2021 16:18:44 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.22</version>
                                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17278339" author="schaefa" created="Wed, 3 Feb 2021 20:11:21 +0000"  >&lt;p&gt;Enhanced the Repository Initializer test to showcase this issue. If the &apos;\=\ is replaced by &apos;=&apos; it will fail the test:&lt;/p&gt;

&lt;p&gt;set properties on /test&lt;br/&gt;
 set testprop to \&quot;one\=two\&quot;&lt;br/&gt;
 end&quot;\&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17278645" author="cziegeler" created="Thu, 4 Feb 2021 08:15:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andysch&quot; class=&quot;user-hover&quot; rel=&quot;andysch&quot;&gt;andysch&lt;/a&gt; What format are you using for the configuration?&lt;/p&gt;

&lt;p&gt;For example for config files you need to escape the equals sign:&lt;br/&gt;
&lt;a href=&quot;https://sling.apache.org/documentation/bundles/configuration-installer-factory.html#configuration-files-config&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/configuration-installer-factory.html#configuration-files-config&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17278939" author="schaefa" created="Thu, 4 Feb 2021 16:18:17 +0000"  >&lt;p&gt;As stated this is not an issue so I closed it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0na60:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10121] Unable to checkout and build org-apache-sling-feature-cpconverter on Windows</title>
                <link>https://issues.apache.org/jira/browse/SLING-10121</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;it&apos;s currently not possible to work with the git repo on Windows:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;due to (on windows FS) illegal chars in file names:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;error: invalid path &apos;src/test/resources/org/apache/sling/feature/cpconverter/handlers/jcr_root/rep:security/rep:authorizables/rep:groups/g/V084LLw1ypl2l9G0e28c/.content.xml&apos;
fatal: unable to checkout working tree
warning: Clone succeeded, but checkout failed.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the test sources &lt;tt&gt;src/test/resources/org/apache/sling/feature/cpconverter/handlers&lt;/tt&gt; seem to use filevault file layout, but in this case the folders/files names are not escaped properly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13356307">SLING-10121</key>
            <summary>Unable to checkout and build org-apache-sling-feature-cpconverter on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2021 22:15:29 +0000</created>
                <updated>Mon, 17 May 2021 11:38:58 +0000</updated>
                            <resolved>Sat, 27 Feb 2021 10:36:19 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.0</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17291775" author="cziegeler" created="Fri, 26 Feb 2021 17:05:19 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/559e583734a30b0e4df427c2e327bc83d9986320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/559e583734a30b0e4df427c2e327bc83d9986320&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17291778" author="sseifert@pro-vision.de" created="Fri, 26 Feb 2021 17:09:11 +0000"  >&lt;p&gt;thanks! checkout works fine now.&lt;/p&gt;

&lt;p&gt;however, i get some error running the unit test (on windows, not tested if it is windows-specific)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failures:
[ERROR]   RepPolicyEntryHandlerTest.parseJackrabbit2Restrictions:274 expected:&amp;lt;...set ACL for service1[
allow jcr:read on /asd/jr2restrictions restriction(rep:glob,*/subtree/*) restriction(sling:customRestriction,sling:value1,sling:value2)
end]
&amp;gt; but was:&amp;lt;...set ACL for service1[
allow jcr:read on /asd/jr2restrictions restriction(rep:glob,*/subtree/*) restriction(sling:customRestriction,sling:value1,sling:value2)
]nd
&amp;gt;
[ERROR]   RepPrincipalPolicyEntryHandlerTest.parseMvRestrictions:94 expected:&amp;lt;...pal ACL for service2[
allow jcr:read on /asd/public restriction(rep:ntNames,nt:folder,sling:Folder) restriction(sling:customRestriction,customRestrictionValue)
end]
&amp;gt; but was:&amp;lt;...pal ACL for service2[
allow jcr:read on /asd/public restriction(rep:ntNames,nt:folder,sling:Folder) restriction(sling:customRestriction,customRestrictionValue)
]nd
&amp;gt;
[ERROR]   RepPrincipalPolicyEntryHandlerTest.parseSimplePolicy:77 expected:&amp;lt;...pal ACL for service1[
allow jcr:read,jcr:readAccessControl on /asd/public
end]
&amp;gt; but was:&amp;lt;...pal ACL for service1[
allow jcr:read,jcr:readAccessControl on /asd/public
]nd
&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17292054" author="cziegeler" created="Sat, 27 Feb 2021 08:33:34 +0000"  >&lt;p&gt;Thanks, I&apos;ll have a look, the tests pass on unix and in WSL &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17292093" author="cziegeler" created="Sat, 27 Feb 2021 10:36:20 +0000"  >&lt;p&gt;There was a wired mixture of line ending handling - sometimes platform dependent, sometimes independent. I changed all of that to be platform independent and also fixed the warnings from the assembly plugin&lt;br/&gt;
Now it builds fine on windows and unix&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/86b412dffc2c9c5654745f5ab1946d758b11004a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/86b412dffc2c9c5654745f5ab1946d758b11004a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17292722" author="sseifert@pro-vision.de" created="Mon, 1 Mar 2021 08:35:08 +0000"  >&lt;p&gt;works, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0na4o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10118] Fully cache the GraphQLSchema objects</title>
                <link>https://issues.apache.org/jira/browse/SLING-10118</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10085&quot; title=&quot;Cache the GraphQL schemas in the DefaultQueryExecutor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10085&quot;&gt;&lt;del&gt;SLING-10085&lt;/del&gt;&lt;/a&gt; the GraphQLSchema couldn&apos;t be cached due to wired resource.&lt;/p&gt;

&lt;p&gt;Thus it still need half the time to spend on building the schema, while generally the resource is only used to be passed later to the fetcher. As that resource then change, I suggested to wrap it via a proxy Resource implementation that would be passed instead of the real resource.&lt;/p&gt;

&lt;p&gt;That proxy will then use a map&#160; to lookup for the current resource used at execute/validate time. The key for the map is to use the current thread.&lt;/p&gt;

&lt;p&gt;I will submit a PR with the solution I suggest to use.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13356192">SLING-10118</key>
            <summary>Fully cache the GraphQLSchema objects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="petitbear68">Thierry Yg&#233;</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2021 12:33:43 +0000</created>
                <updated>Tue, 7 Jun 2022 06:34:38 +0000</updated>
                                            <version>GraphQL Core 0.0.10</version>
                                                    <component>GraphQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17330414" author="bdelacretaz" created="Fri, 23 Apr 2021 12:12:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10085&quot; title=&quot;Cache the GraphQL schemas in the DefaultQueryExecutor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10085&quot;&gt;&lt;del&gt;SLING-10085&lt;/del&gt;&lt;/a&gt; the GraphQLSchema couldn&apos;t be cached due to wired resource....&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t understand, does that mean the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10085&quot; title=&quot;Cache the GraphQL schemas in the DefaultQueryExecutor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10085&quot;&gt;&lt;del&gt;SLING-10085&lt;/del&gt;&lt;/a&gt; caching is not working? Not sure what you mean by &quot;wired resource&quot;, can you clarify?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The key for the map is to use the current thread...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t understand this either, maybe clarifying the &quot;wired resource&quot; term will also clarify this?&lt;/p&gt;</comment>
                            <comment id="17330416" author="petitbear68" created="Fri, 23 Apr 2021 12:18:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&#160;the current implementation is not fully caching the GraphQL Schema, only the first part to extract the type definition is cached, then it need to inject the resource in the buildWiring method, to finally get the schema object ready to be used (execute or validate). Wiring resource is the term used in (1).&lt;/p&gt;

&lt;p&gt;This PR aim to fully cache it, so that we gain the extra time it needs to build the schema (which grows linearly with the size of the SDL).&lt;/p&gt;

&lt;p&gt;(1)&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-graphql-core/blob/master/src/main/java/org/apache/sling/graphql/core/engine/DefaultQueryExecutor.java#L375&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-graphql-core/blob/master/src/main/java/org/apache/sling/graphql/core/engine/DefaultQueryExecutor.java#L375&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17330813" author="bdelacretaz" created="Fri, 23 Apr 2021 14:23:07 +0000"  >&lt;p&gt;Thank you for the clarification, I understand the &quot;wired&quot; part now. I have slightly refactored the schema generation as there was some code duplication, in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-graphql-core/commit/9abddb77904a079a5c3c58de0901ac576fb6b53f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 9abddb77&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As you say the &lt;tt&gt;GraphQLSchema&lt;/tt&gt; object is created in several steps:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; schemaSdl = prepareSchemaDefinition(schemaProvider, queryResource, selectors);
TypeDefinitionRegistry typeDefinitionRegistry = getTypeDefinitionRegistry(schemaSdl, queryResource, selectors);
schema = buildSchema(typeDefinitionRegistry, queryResource);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And currently only the result of &lt;tt&gt;getTypeDefinitionRegistry&lt;/tt&gt; is cached. Caching the &lt;tt&gt;GraphQLSchema&lt;/tt&gt; objects should be more efficient (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tyge&quot; class=&quot;user-hover&quot; rel=&quot;tyge&quot;&gt;tyge&lt;/a&gt; do you have metrics that demonstrate that?).&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;Howaboutcachingbasedona%22vary%22schemaannotation%3F&quot;&gt;&lt;/a&gt;How about caching based on a &quot;vary&quot; schema annotation ?&lt;/h2&gt;

&lt;p&gt;The problem for caching is that the generated schema can potentially depend on many things:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;1) The Resource to which the query applies, including potentially all its attributes&lt;/li&gt;
	&lt;li&gt;2) The Request&apos;s selectors&lt;/li&gt;
	&lt;li&gt;3) The current set of OSGi services and Sling scripts or servlets, which might change at runtime.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, in practice and especially on production systems it can be safe to assume that 3) never changes after startup - which might be expressed by a configuration of the GraphQL Core module (&quot;assume stable OSGi services and scripts&quot;).&lt;/p&gt;

&lt;p&gt;To allow whatever generates the schema to indicate what can cause it to change, we might use a schema comment similar to the HTTP Vary header:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# sling-schema-vary: resource-type, selectors
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This example value indicates that the generated schema depends only on the current resource type and on the request selectors, which is probably true in the vast majority of cases.&lt;/p&gt;

&lt;p&gt;So I think the below rules would allow us to implement caching of the &lt;tt&gt;GraphQLSchema&lt;/tt&gt; in a simple way, using the resource type + selectors as the key:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;To activate the cache, the &quot;assume stable OSGi services and scripts&quot; option must be set. That might actually be a cache lifetime value, where zero disables the cache and N meaning &quot;assume stability for N minutes&quot;. That N value can then define the cache entries time to live.&lt;/li&gt;
	&lt;li&gt;For a specific schema to be cached, it must include the &lt;tt&gt;sling-schema-vary&lt;/tt&gt;&#160;comment (or directive, TBD)&lt;/li&gt;
	&lt;li&gt;We initially recognize only &lt;tt&gt;resource-type&lt;/tt&gt; and &lt;tt&gt;selectors&lt;/tt&gt; in that &quot;vary&quot; value and build the cache keys accordingly.&lt;/li&gt;
	&lt;li&gt;If any of the above conditions are not met, the schema object is not cached&lt;/li&gt;
	&lt;li&gt;Log messages and metrics allow for observing the caching behavior&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this allows for fully caching the schema generation steps up to the creation of the &lt;tt&gt;GraphQLSchema&lt;/tt&gt; object, with constraints that should be acceptable.&lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu&quot; class=&quot;user-hover&quot; rel=&quot;radu&quot;&gt;radu&lt;/a&gt; as I think you wrote the current caching code&lt;/p&gt;</comment>
                            <comment id="17330880" author="petitbear68" created="Fri, 23 Apr 2021 16:01:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&#160;in our tests, caching the schema help to reduce by 25% an initial 17 min test duration.&lt;/p&gt;

&lt;p&gt;In fact at the request level for the generated schema, it saved an extra 200 ms per request, which is the time it need to perform the &quot;buildSchema&quot; code in that specific context independently of the query complexity.&#160; As we need to quickly re-fetch a lot of content that execute GraphQL queries (for example about 33k requests , with 20 parallel worker threads, we saved up to 5 min of computations).&lt;/p&gt;

&lt;p&gt;So for requests that would generally need 400 ms to respond, it will save around 50% , for request that take 20s it save still about 200 ms (as it is the same schema just a more complex query), but since there are more likely requests that served&#160; response in 400 ms, the average saved time was about 25% at the end.&lt;/p&gt;

&lt;p&gt;So the more your Schema (SDL) is large the more time is saved with that extra caching, and the gain is likely to appear on low complexity GraphQL queries.&lt;/p&gt;

&lt;p&gt;Caching or not caching based on some annotation could be an idea, currently we don&apos;t see in our use cases why it wouldn&apos;t need to be cached, but you may have some other use cases in mind.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17331777" author="petitbear68" created="Mon, 26 Apr 2021 06:18:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&#160; Maybe the all design is wrong, meaning that the GraphQL schema object shouldn&apos;t need at this stage the resource when we call the &quot;buildSchema&quot; , I am not sure why it was designed like this, the resource object should be passed as part of the fetching context, WDYT ? that would simplify it all, it wouldn&apos;t need then to have &quot;proxy&quot; object to pass it on.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17331894" author="bdelacretaz" created="Mon, 26 Apr 2021 08:25:24 +0000"  >&lt;p&gt;Building a schema that&apos;s specific to the &lt;tt&gt;sling:resourceType&lt;/tt&gt; of the current Resource and taking request selectors into account is by design. It provides a simple way to define multiple GraphQL endpoints with different schemas.&lt;/p&gt;

&lt;p&gt;However I agree that in general you shouldn&apos;t need other attributes of the resource such as its path or field values in order to generate a meaningful schema.&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;PotentialbreakingAPIchange%3AgetSchema&quot;&gt;&lt;/a&gt;Potential breaking API change: getSchema&lt;/h2&gt;

&lt;p&gt;If users of this module agree to this breaking change (which we should ask on our dev list) we might change the &lt;tt&gt;SchemaProvider&lt;/tt&gt; API from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSchema(Resource r, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; [] selectors)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSchema(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; resourceType, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; slingResourceSuperType, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; [] selectors)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which then allows us to cache the &lt;tt&gt;GraphQLSchema&lt;/tt&gt; using the resourceType, supertype and selectors as a cache key (&lt;em&gt;update: see below for more discussion on this change&lt;/em&gt;)&lt;/p&gt;

&lt;p&gt;Would this change be ok for your use cases? If yes we can ask on the Sling dev list before making this breaking API change. Considering the graphql-core module is version &lt;tt&gt;0.0.9&lt;/tt&gt; such breaking changes can be ok unless someone objects.&lt;/p&gt;</comment>
                            <comment id="17331904" author="radu.cotescu" created="Mon, 26 Apr 2021 08:44:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, I like this approach more. A &lt;tt&gt;Resource&lt;/tt&gt; object should not be cached at all and I think there are hints about this in the &lt;tt&gt;ResourceProvider&lt;/tt&gt; API. The main reason for that is that its associated &lt;tt&gt;ResourceResolver&lt;/tt&gt; can be closed. Another thing is the resource metadata, which could technically change if the system is reconfigured (e.g. new mapping info or aliases).&lt;/p&gt;</comment>
                            <comment id="17331916" author="bdelacretaz" created="Mon, 26 Apr 2021 09:05:53 +0000"  >&lt;p&gt;I agree about not caching any elements of the Resource, however in the meantime I thought that the internal request that builds the schema needs the identity of the current request.&lt;/p&gt;

&lt;p&gt;So I think the &lt;tt&gt;getSchema&lt;/tt&gt; method signature should be&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSchema(ResourceResolver currentResolver, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; resourceType, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; slingResourceSuperType, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; [] selectors)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So that we get everything required to execute a Sling internal request as per &lt;a href=&quot;https://sling.apache.org/documentation/bundles/servlet-helpers.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/servlet-helpers.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n9f4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10115] CMS - Reference - Select Does Not Validate Required</title>
                <link>https://issues.apache.org/jira/browse/SLING-10115</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using a select field the required attribute is not set and the default value is not set to blank so the form will submit the default text if the user does not select a value. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13356091">SLING-10115</key>
            <summary>CMS - Reference - Select Does Not Validate Required</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dklco">Dan Klco</assignee>
                                    <reporter username="dklco">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2021 03:06:53 +0000</created>
                <updated>Fri, 21 May 2021 04:23:15 +0000</updated>
                            <resolved>Tue, 2 Feb 2021 04:10:26 +0000</resolved>
                                    <version>App CMS 0.16.2</version>
                                    <fixVersion>App CMS 1.0.2</fixVersion>
                                    <component>App CMS Reference</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17276847" author="dklco" created="Tue, 2 Feb 2021 04:10:18 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/7f8b3b41056c1026742351af4618bc1c0782496a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/7f8b3b41056c1026742351af4618bc1c0782496a&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n8so:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10113] data-sly-resource throwing RecursionTooDeepException</title>
                <link>https://issues.apache.org/jira/browse/SLING-10113</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;AEM Version 6.5.7&lt;/p&gt;

&lt;p&gt;While using data-sly-resource with a path, I get a RecursionTooDeepException.&lt;br/&gt;
 See &lt;del&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7685&quot; title=&quot;data-sly-resource throws RecursionTooDeepException when used with dynamic variables that are null / empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7685&quot;&gt;&lt;del&gt;SLING-7685&lt;/del&gt;&lt;/a&gt;&lt;/del&gt;&#160;&#160;for Similarity&lt;/p&gt;

&lt;p&gt;I currently cant make hold of the behavior, using&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&amp;lt;div data-sly-resource=&quot;${targetPagePath}&quot;&amp;gt;&amp;lt;/div&amp;gt;&lt;/em&gt;&lt;br/&gt;
 will include the current page infinite times (at least it tries) instead of the target page&lt;br/&gt;
 while using something like this:&lt;br/&gt;
 &lt;em&gt;&amp;lt;sly data-sly-resource=&quot;${targetPagePath @ appendPath=&apos;jcr:content/anyResource&apos;}&quot;&amp;gt;&amp;lt;/sly&amp;gt;&lt;/em&gt;&lt;br/&gt;
 will render the curentPage with the RecursionTooDeepException.&lt;/p&gt;

&lt;p&gt;The HTL Engine I am using is of the following version:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13019795/13019795_image-2021-02-01-17-40-19-873.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13355995">SLING-10113</key>
            <summary>data-sly-resource throwing RecursionTooDeepException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="MFlock">Marvin Flock</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2021 16:46:51 +0000</created>
                <updated>Mon, 15 Mar 2021 16:54:16 +0000</updated>
                                                                            <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17276645" author="paul.bjorkstrand" created="Mon, 1 Feb 2021 20:55:18 +0000"  >&lt;p&gt;Does &lt;tt&gt;targetPagePath&lt;/tt&gt; start with a slash (&lt;tt&gt;/&lt;/tt&gt;)? Per the code &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, the path is appended to the current resource, if it does not&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/org.apache.sling.scripting.sightly-1.1.2-1.4.0/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L212&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/org.apache.sling.scripting.sightly-1.1.2-1.4.0/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L212&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17276974" author="mflock" created="Tue, 2 Feb 2021 09:20:07 +0000"  >&lt;p&gt;Yes, targetPath starts with a slash. It worked in AEM 6.4 but I upgraded, the working versions were&lt;/p&gt;

&lt;p&gt;&quot;name&quot;:&quot;Apache Sling Scripting HTL Compiler&quot;,&quot;fragment&quot;:false,&quot;stateRaw&quot;:32,&quot;state&quot;:&quot;Active&quot;,&quot;version&quot;:&quot;1.0.22.1_4_0&quot;&lt;br/&gt;
&quot;name&quot;:&quot;Apache Sling Scripting HTL Engine&quot;,&quot;fragment&quot;:false,&quot;stateRaw&quot;:32,&quot;state&quot;:&quot;Active&quot;,&quot;version&quot;:&quot;1.0.54.1_4_0&quot;&lt;br/&gt;
&quot;name&quot;:&quot;Apache Sling Scripting HTL Java Compiler&quot;,&quot;fragment&quot;:false,&quot;stateRaw&quot;:32,&quot;state&quot;:&quot;Active&quot;,&quot;version&quot;:&quot;1.0.26.1_4_0&quot;&lt;br/&gt;
&quot;name&quot;:&quot;Apache Sling Scripting HTL JavaScript Use Provider&quot;,&quot;fragment&quot;:false,&quot;stateRaw&quot;:32,&quot;state&quot;:&quot;Active&quot;,&quot;version&quot;:&quot;1.0.26&quot;&lt;br/&gt;
&quot;name&quot;:&quot;Apache Sling Scripting HTL Sling Models Use Provider&quot;,&quot;fragment&quot;:false,&quot;stateRaw&quot;:32,&quot;state&quot;:&quot;Active&quot;,&quot;version&quot;:&quot;1.0.6&quot;&lt;/p&gt;</comment>
                            <comment id="17281795" author="mflock" created="Tue, 9 Feb 2021 13:51:41 +0000"  >&lt;p&gt;Interestingly, the ResourceRuntimeExtension.java is not being called. Tried to debug through it. Wont hit the breakpoint&lt;/p&gt;</comment>
                            <comment id="17281830" author="mflock" created="Tue, 9 Feb 2021 15:11:55 +0000"  >&lt;p&gt;Narrowed it down to a mapped path issue.&lt;br/&gt;
If putting in the non-mapped path of the resource, it works out. Using the mapped path, it will throw the mentioned exception&lt;/p&gt;</comment>
                            <comment id="17301772" author="radu.cotescu" created="Mon, 15 Mar 2021 16:54:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=MFlock&quot; class=&quot;user-hover&quot; rel=&quot;MFlock&quot;&gt;MFlock&lt;/a&gt;, you will have to report AEM bugs to Adobe in order to officially get support and this is due to the fact that AEM provides its own equivalent of the &lt;tt&gt;ResourceRuntimeExtension&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13019795" name="image-2021-02-01-17-40-19-873.png" size="21675" author="MFlock" created="Mon, 1 Feb 2021 16:40:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n87c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10111] data-sly-test: redundant constant value comparison</title>
                <link>https://issues.apache.org/jira/browse/SLING-10111</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The HTL-Maven-Plugin (when set with &lt;em&gt;failOnWarnings = true&lt;/em&gt;) is failing with warnings like these:&lt;br/&gt;
&lt;em&gt;data-sly-test: redundant constant value comparison&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Problem is, this message is not giving a lot of insight, why it is failing.&lt;/p&gt;

&lt;p&gt;e.g.:&lt;/p&gt;

&lt;p&gt;I have a snippet like this:&lt;br/&gt;
&lt;em&gt;data-sly-test=${object.property}&lt;/em&gt;&#160;&lt;/p&gt;

&lt;p&gt;It fails with the mentioned warning and I am fishing in the dark.&lt;br/&gt;
It is a valid test, it checks &lt;em&gt;object.property&lt;/em&gt; for &lt;em&gt;null&lt;/em&gt;, right?&lt;/p&gt;

&lt;p&gt;Is it maybe a false positive?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13355900">SLING-10111</key>
            <summary>data-sly-test: redundant constant value comparison</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="MFlock">Marvin Flock</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2021 11:02:40 +0000</created>
                <updated>Mon, 8 Aug 2022 06:54:14 +0000</updated>
                                            <version>HTL Maven Plugin 2.0.2-1.4.0</version>
                                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17576575" author="simontunnat" created="Mon, 8 Aug 2022 06:44:28 +0000"  >&lt;p&gt;Did you find some solution / inside into what that message means?&lt;/p&gt;


&lt;p&gt;I get the same issue now and could not find a solution to it.&lt;/p&gt;</comment>
                            <comment id="17576577" author="simontunnat" created="Mon, 8 Aug 2022 06:52:31 +0000"  >&lt;p&gt;Okay I had another look and found the issue in my code.&lt;br/&gt;
It seems the warning message is wrong and reports on the wrong line and column.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;!-- reported line --&amp;gt;
&amp;lt;sly data-sly-test=&lt;span class=&quot;code-quote&quot;&gt;&quot;${someObject.property}&quot;&lt;/span&gt;&amp;gt;
 ${someObject.property}
&amp;lt;/sl&amp;gt; 

[...]


&amp;lt;!-- line with an actual issue --&amp;gt;
&amp;lt;sly data-sly-test=&lt;span class=&quot;code-quote&quot;&gt;&quot;someObject.property&quot;&lt;/span&gt;&amp;gt;
${someObject.property}
&amp;lt;/sl&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The htl-maven-plugin reported the first &amp;lt;sly&amp;gt; block but the actual issue was in the second &amp;lt;sly&amp;gt; block (the opening and closing parenthesis &lt;b&gt;${}&lt;/b&gt; where missing).&lt;/p&gt;

&lt;p&gt;After I fixed the issue, the plugin reported no more issues.&lt;/p&gt;

&lt;p&gt;I had the same problem in two different HTL files so it seems to be a general problem.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n7m8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10110] Sling Dynamic Include: ignoreUrlParams with Wildcards do not work</title>
                <link>https://issues.apache.org/jira/browse/SLING-10110</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hello&lt;/p&gt;

&lt;p&gt;i have the following problem in my AEM instance but i think it might be a general problem.&lt;/p&gt;

&lt;p&gt;The issue i am facing is that in my dispatcher configuration there are several parameters defined with a * as wildcard.&lt;br/&gt;
This is configured for our tracking engine where users might get a link to a page with one of these parameters.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
https//www.mypage.com/latest-news?testengine-usergroup=10
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In this case my dispatcher is configured to ignore the paramers that match the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
testengine-*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When i configured this in my SlingDynamicInclude config on the server under the ignoreUrlParams it does not see the above parameter from the url as matching for ignoreUrlParams.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unable to find source-code formatter for language: config.&lt;/span&gt; Available languages are: actionscript, ada, applescript, bash, c, c#, c++, cpp, css, erlang, go, groovy, haskell, html, java, javascript, js, json, lua, none, nyan, objc, perl, php, python, r, rainbow, ruby, scala, sh, sql, swift, visualbasic, xml, yaml&lt;/div&gt;&lt;pre&gt;
include-filter.config.extension=&quot;&quot;
include-filter.config.enabled=B&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
include-filter.config.path=&lt;span class=&quot;code-quote&quot;&gt;&quot;/content&quot;&lt;/span&gt;
include-filter.config.required_header=&lt;span class=&quot;code-quote&quot;&gt;&quot;Server-Agent\=Communique-Dispatcher&quot;&lt;/span&gt;
include-filter.config.include-type=&lt;span class=&quot;code-quote&quot;&gt;&quot;SSI&quot;&lt;/span&gt;
include-filter.config.selector=&lt;span class=&quot;code-quote&quot;&gt;&quot;nocache&quot;&lt;/span&gt;
include-filter.config.add_comment=B&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
include-filter.config.appendSuffix=B&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
include-filter.config.rewrite=B&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;
include-filter.config.ttl=&quot;&quot;
# These are the urlParams from the dispatcher that are ignored by as such and will load from cache (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; tracking etc.)
# If you &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not ignore them then a page with rendered SDI will be cached &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the call contains these parameters
include-filter.config.ignoreUrlParams=[
    &lt;span class=&quot;code-quote&quot;&gt;&quot;gclid&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;testengine-*&quot;&lt;/span&gt;
]
include-filter.config.resource-types=[
    &lt;span class=&quot;code-quote&quot;&gt;&quot;mypage/components/slingdynamic/dynamicbanner&quot;&lt;/span&gt;
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Instead the SDI component will completely render and since my dispatcher was configured to ignore this parameter, the response will be cached with an already rendered SDI-Component instead of the SDI-Tag.&lt;/p&gt;

&lt;p&gt;I hope this information is enough to understand what my problem is.&lt;br/&gt;
If there are some more informations that you need or if something is not clear enough please tell me and i will try to update everything that is needed&lt;/p&gt;</description>
                <environment>AEM 6.3 - AEM 6.5</environment>
        <key id="13355882">SLING-10110</key>
            <summary>Sling Dynamic Include: ignoreUrlParams with Wildcards do not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="SonglessHill">Andreas Bannasch</assignee>
                                    <reporter username="SonglessHill">Andreas Bannasch</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2021 09:54:41 +0000</created>
                <updated>Mon, 17 Feb 2025 08:53:48 +0000</updated>
                            <resolved>Thu, 9 Mar 2023 07:57:14 +0000</resolved>
                                    <version>Dynamic Include 3.2.0</version>
                                    <fixVersion>Dynamic Include 3.3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12600">3.5h</timespent>
                                <comments>
                            <comment id="17634899" author="songlesshill" created="Wed, 16 Nov 2022 15:45:24 +0000"  >&lt;p&gt;I tried to add the functionality myself and wrote Unit-Tests to make sure the existing and new logic work properly.&lt;br/&gt;
I&apos;m not entirely sure if it will work as I used the Stream-API that was introduced in Java8 and i&apos;m not sure that the project is above Java7&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Should i push my local branch and create a Pull-Request?&lt;br/&gt;
&lt;del&gt;Update: It seems i can&apos;t push to the repository as I&apos;m missing permission to do so. What do I have to do to be able to contribute in the git-project?&lt;/del&gt;&lt;br/&gt;
Forget about the above. Just read the guide. I&apos;ll commit to my fork and create a Pull-Request&lt;/p&gt;</comment>
                            <comment id="17634915" author="rombert" created="Wed, 16 Nov 2022 16:17:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SonglessHill&quot; class=&quot;user-hover&quot; rel=&quot;SonglessHill&quot;&gt;SonglessHill&lt;/a&gt; - sounds good!&lt;/p&gt;</comment>
                            <comment id="17634922" author="songlesshill" created="Wed, 16 Nov 2022 16:36:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I just created the pull-request. I&apos;ll wait for someone to review it and if needed I&apos;ll make some adjustments based on feedback.&lt;/p&gt;</comment>
                            <comment id="17646144" author="joerghoh" created="Mon, 12 Dec 2022 15:07:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SonglessHill&quot; class=&quot;user-hover&quot; rel=&quot;SonglessHill&quot;&gt;SonglessHill&lt;/a&gt; can you please assign this ticket to yourself (if possible)? I will take care of the merge and also trigger a release.&lt;/p&gt;</comment>
                            <comment id="17646149" author="rombert" created="Mon, 12 Dec 2022 15:10:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; - you can&apos;t assign this to Andreas as-is, but you can do so once you add him to a special &apos;contributors&apos; group in Jira.&lt;/p&gt;</comment>
                            <comment id="17646459" author="songlesshill" created="Tue, 13 Dec 2022 06:53:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt;, as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; mentioned it is not possible for me to assign it to myself at the moment.&lt;br/&gt;
Could someone please add me to the group?&lt;/p&gt;</comment>
                            <comment id="17646580" author="anchela" created="Tue, 13 Dec 2022 11:25:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SonglessHill&quot; class=&quot;user-hover&quot; rel=&quot;SonglessHill&quot;&gt;SonglessHill&lt;/a&gt;, should be ok now.&lt;/p&gt;</comment>
                            <comment id="17698209" author="songlesshill" created="Thu, 9 Mar 2023 07:01:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt; Thank you. I will take a look at the new release and then close the ticket.&lt;/p&gt;</comment>
                            <comment id="17698229" author="anchela" created="Thu, 9 Mar 2023 07:56:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SonglessHill&quot; class=&quot;user-hover&quot; rel=&quot;SonglessHill&quot;&gt;SonglessHill&lt;/a&gt;, what i meant was: I added you to &apos;contributors&apos; group and you should be able to assign tickets to yourself.... not that the ticket is fixed yet. sorry for the confusion.&lt;/p&gt;

&lt;p&gt;but i quickly checked: your PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-dynamic-include/pull/26&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-dynamic-include/pull/26&lt;/a&gt; has been merged. i am resolving this ticket as fixed. feel free to verify again once the release is out.&lt;/p&gt;</comment>
                            <comment id="17698230" author="anchela" created="Thu, 9 Mar 2023 07:57:14 +0000"  >&lt;p&gt;resolving ticket as PR provided by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SonglessHill&quot; class=&quot;user-hover&quot; rel=&quot;SonglessHill&quot;&gt;SonglessHill&lt;/a&gt; has been merged. thanks for the contribution!&lt;/p&gt;</comment>
                            <comment id="17698232" author="songlesshill" created="Thu, 9 Mar 2023 07:58:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt; Thank you for the clarification. I was wondering why it didn&apos;t work with 3.3.0 when i tested it on a local server and then i noticed that my changes weren&apos;t part of the release when i downloaded the source-code linked to the 3.3.0 Release.&lt;/p&gt;

&lt;p&gt;Can you tell me when the next release is planned?&lt;/p&gt;</comment>
                            <comment id="17698235" author="anchela" created="Thu, 9 Mar 2023 08:01:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SonglessHill&quot; class=&quot;user-hover&quot; rel=&quot;SonglessHill&quot;&gt;SonglessHill&lt;/a&gt;, i don&apos;t know.... but since &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; stated above:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I will take care of the merge and also trigger a release.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;maybe a gentle nudge will do the trick &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt;, wdty?&lt;/p&gt;</comment>
                            <comment id="17926020" author="songlesshill" created="Tue, 11 Feb 2025 14:34:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; Could we please get a release for this? I&apos;d love to have it in Adobe AEM but we can&apos;t tell Adobe to update if there is no Release for it,&lt;/p&gt;</comment>
                            <comment id="17926034" author="JIRAUSER308668" created="Tue, 11 Feb 2025 15:17:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SonglessHill&quot; class=&quot;user-hover&quot; rel=&quot;SonglessHill&quot;&gt;SonglessHill&lt;/a&gt; we are waiting a long time for the next release. At least inform us about the reasons that is blocking the release.&lt;/p&gt;</comment>
                            <comment id="17926058" author="joerghoh" created="Tue, 11 Feb 2025 16:34:33 +0000"  >&lt;p&gt;Thanks for reminding me, I just started the release process for it (see sling-dev list).&lt;/p&gt;</comment>
                            <comment id="17926288" author="songlesshill" created="Wed, 12 Feb 2025 07:20:02 +0000"  >&lt;p&gt;Thank you for the release.&lt;/p&gt;</comment>
                            <comment id="17927079" author="songlesshill" created="Fri, 14 Feb 2025 09:00:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; How long does it usually take until the new version is available on public maven repositories like mvnrepository.com and central.sonatype.com ?&lt;br/&gt;
Or might that be a different process that needs to be triggered for that?&lt;/p&gt;</comment>
                            <comment id="17927641" author="joerghoh" created="Mon, 17 Feb 2025 08:53:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=SonglessHill&quot; class=&quot;user-hover&quot; rel=&quot;SonglessHill&quot;&gt;SonglessHill&lt;/a&gt; the Apache release process requires us to have an least 72h vote window (and of course a positive result of the vote), before we make the binaries public.&lt;/p&gt;

&lt;p&gt;I just completed the release, the binaries should be available via Maven Central within the next hour or so.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n7i8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10103] UserUtil.disableUser throws IllegalArgumentException for null reason</title>
                <link>https://issues.apache.org/jira/browse/SLING-10103</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; disableUser(Session session, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (reason == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;reason can&apos;t be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;);
        }
        ....
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i am not sure why this throws an exception, but i know for sure that a null reason is a valid argument in &lt;tt&gt;User.disable(String&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
     * Disable &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; user thus preventing &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; login &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the &amp;lt;code&amp;gt;reason&amp;lt;/code&amp;gt;
     * is a non-&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.&amp;lt;br&amp;gt;
     * Note however, that &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; user will still be accessible by
     * {@link UserManager#getAuthorizable}.
     *
     * @param reason &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; describing the reason &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; disable &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; user or
     * &amp;lt;code&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;lt;/code&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the user account should be enabled again.
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException If an error occurs.
     */
    void disable(@Nullable &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i would suggest to remove that check.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13355384">SLING-10103</key>
            <summary>UserUtil.disableUser throws IllegalArgumentException for null reason</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jan 2021 08:40:41 +0000</created>
                <updated>Fri, 29 Jan 2021 09:12:37 +0000</updated>
                                                                            <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17274261" author="anchela" created="Fri, 29 Jan 2021 09:12:37 +0000"  >&lt;p&gt;additional comment: the method could be additionally simplified by looking up the user specifying the type in the user manager method. like this (including fixing inconsistent indention):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; disableUser(Session session, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException {
        User user = getUserManager(session).getAuthorizable(id, User.class);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (user != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            user.disable(reason);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n4g0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10101] Sequence of instructions is not always respected</title>
                <link>https://issues.apache.org/jira/browse/SLING-10101</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sling Repoinit doesn&apos;t always seem to respect the sequence of statements specified in a configuration file.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create group Group_A
create group Group_B

set ACL &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Group_A
    allow jcr:read on /content
    deny  jcr:write on /content/example
end

set ACL &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Group_B
    allow jcr:read on /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;
    deny  jcr:write on /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/example
end

delete group Group_A
delete group Group_B

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In the above example, overall execution of script fails because the creation and deletion of groups happen first and only then the &apos;set ACL&apos; instructions are attempted and they&apos;re unable to find the Authorizable.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Not sure if this is a timing / sync issue when the statements are executed or because of the design which takes into account the &apos;type&apos; of statements.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13355353">SLING-10101</key>
            <summary>Sequence of instructions is not always respected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kmrobin">Robin KM</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jan 2021 06:19:22 +0000</created>
                <updated>Fri, 29 Jan 2021 06:22:30 +0000</updated>
                                            <version>Repoinit Parser 1.6.2</version>
                    <version>Repoinit JCR 1.1.30</version>
                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n494:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10100] Internal configuration properties are not handled correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-10100</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a feature model is read from JSON and an OSGi configuration contains an internal key in the form of :configurator:foo then the property ends up with the name &quot;foo&quot; in the dictionary&lt;/p&gt;</description>
                <environment></environment>
        <key id="13355244">SLING-10100</key>
            <summary>Internal configuration properties are not handled correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2021 17:39:05 +0000</created>
                <updated>Mon, 8 Feb 2021 17:32:03 +0000</updated>
                            <resolved>Fri, 29 Jan 2021 13:39:06 +0000</resolved>
                                    <version>Feature Model 1.2.18</version>
                                    <fixVersion>slingfeature-maven-plugin 1.4.24</fixVersion>
                    <fixVersion>Feature Model 1.2.20</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17274443" author="cziegeler" created="Fri, 29 Jan 2021 13:39:06 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/commit/a42dd5c09650cf9261c8063671325a7de625aa06&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/commit/a42dd5c09650cf9261c8063671325a7de625aa06&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n3kw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10092] Deprecate ConfigurationJSONReader and ConfigurationJSONWriter</title>
                <link>https://issues.apache.org/jira/browse/SLING-10092</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;These 2 classes in the core feature model in the org.apache.sling.feature.io.json package are replaced by cm.json and should therefore be deprecated and removed in the future.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354652">SLING-10092</key>
            <summary>Deprecate ConfigurationJSONReader and ConfigurationJSONWriter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="davidb">A. J. David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jan 2021 11:44:45 +0000</created>
                <updated>Tue, 30 Mar 2021 09:08:53 +0000</updated>
                            <resolved>Tue, 30 Mar 2021 09:07:26 +0000</resolved>
                                    <version>Feature Model 1.2.18</version>
                                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17302668" author="cziegeler" created="Tue, 16 Mar 2021 16:20:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davidb&quot; class=&quot;user-hover&quot; rel=&quot;davidb&quot;&gt;davidb&lt;/a&gt; Just looking at this, I think these two classes still have a value, as they bridge the feature object model (Configurations class) with the one used in cm.json. So if you want to read a feature model configurations, you can use this util class instead of using cm.json and then converting objects.&lt;br/&gt;
So I would rather close this as wont fix, wdyt?&lt;/p&gt;</comment>
                            <comment id="17302683" author="davidb" created="Tue, 16 Mar 2021 16:44:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - if I want to read a configuration from a feature model, I could also just parse the whole feature and read it from that? Maybe it&apos;s a little bit less efficient, but not sure if it makes a big difference.&lt;/p&gt;

&lt;p&gt;I don&apos;t see these classes being used anywhere, but I guess they could be used somewhere as they are exported API, so removing them would be backward incompatible in theory. So maybe for that reason we should keep them...&lt;/p&gt;</comment>
                            <comment id="17302693" author="cziegeler" created="Tue, 16 Mar 2021 16:57:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davidb&quot; class=&quot;user-hover&quot; rel=&quot;davidb&quot;&gt;davidb&lt;/a&gt; The use cases are different:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;you have a feature model and want to create a configuration resource for the OSGi configurator. You can do that with cm.json but then you need to write the code that is currently in ConfigurationJSONWriter&lt;/li&gt;
	&lt;li&gt;And ConfigurationJSONReader  is actually the reverse use case. You have an OSGi configuration resource, and want to use it within a feature model (programmatically). Again, you can use cm.json but that requires a little bit of code&lt;br/&gt;
For those use cases these classes are pretty useful&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mzxk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10091] ConfigurationJSONReader returns empty list</title>
                <link>https://issues.apache.org/jira/browse/SLING-10091</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;ConfigurationJSONReader  does not add the configurations to the list, therefore always returning an empty list&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354649">SLING-10091</key>
            <summary>ConfigurationJSONReader returns empty list</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jan 2021 11:20:31 +0000</created>
                <updated>Mon, 8 Feb 2021 17:32:02 +0000</updated>
                            <resolved>Tue, 26 Jan 2021 11:23:06 +0000</resolved>
                                                    <fixVersion>Feature Model 1.2.20</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17272041" author="cziegeler" created="Tue, 26 Jan 2021 11:23:06 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/commit/75c4a034e2e673b06de83737c1d41291fe31963c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/commit/75c4a034e2e673b06de83737c1d41291fe31963c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mzww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10089] PackageInit Extension should fail  when errors occur in ExecutionPlan</title>
                <link>https://issues.apache.org/jira/browse/SLING-10089</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;ExtensionPlanBuilder on execute doesn&apos;t automatically throw an exceptions when one or more of the Tasks Fail to install - therefore it is necessary to crosscheck the hasErrors() method of the resulting ExecutionPlan object.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354497">SLING-10089</key>
            <summary>PackageInit Extension should fail  when errors occur in ExecutionPlan</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="dsuess">Dominik S&#252;&#223;</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jan 2021 17:11:55 +0000</created>
                <updated>Mon, 8 Feb 2021 08:37:20 +0000</updated>
                            <resolved>Tue, 2 Feb 2021 16:52:31 +0000</resolved>
                                                    <fixVersion>JCR Package Init 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17271584" author="dsuess" created="Mon, 25 Jan 2021 18:04:51 +0000"  >&lt;p&gt;Fix proposal at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/pull/3&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13354503">JCRVLT-494</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0myz4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10088] PatternSyntaxException: Unclosed group near index x</title>
                <link>https://issues.apache.org/jira/browse/SLING-10088</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;if a path contains a &quot;(&quot; the following exception will occur when we try to distribute it.&lt;/p&gt;

&lt;p&gt;As far as I can tell the problem is a missing escaping of the path in&#160;org.apache.sling.distribution.serialization.impl.vlt.VltUtils.createFilter.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[org.apache.sling.distribution.core:0.4.3.T20200720-c96d3fb]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.journal.impl.publisher.PackageMessageFactory.createAdd(PackageMessageFactory.java:95) [org.apache.sling.distribution.journal:0.2.0.T202009251421-0284693]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.journal.impl.publisher.PackageMessageFactory.create(PackageMessageFactory.java:86) [org.apache.sling.distribution.journal:0.2.0.T202009251421-0284693]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.journal.impl.publisher.DistributionPublisher.lambda$execute$1(DistributionPublisher.java:271) [org.apache.sling.distribution.journal:0.2.0.T202009251421-0284693]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.journal.shared.DistributionMetricsService.timed(DistributionMetricsService.java:147) [org.apache.sling.distribution.journal:0.2.0.T202009251421-0284693]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.journal.impl.publisher.DistributionPublisher.execute(DistributionPublisher.java:270) [org.apache.sling.distribution.journal:0.2.0.T202009251421-0284693]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.journal.impl.publisher.DistributionPublisher.execute(DistributionPublisher.java:259) [org.apache.sling.distribution.journal:0.2.0.T202009251421-0284693]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.impl.DefaultDistributor.distribute(DefaultDistributor.java:60) [org.apache.sling.distribution.core:0.4.3.T20200720-c96d3fb]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.chunked.ChunkedDistribution.distributeChunk(ChunkedDistribution.java:124) [org.apache.sling.distribution.chunked:0.1.0.20210121164255060]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.chunked.ChunkedDistribution.distribute(ChunkedDistribution.java:102) [org.apache.sling.distribution.chunked:0.1.0.20210121164255060]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.chunked.ChunkedDistribution.process(ChunkedDistribution.java:72) [org.apache.sling.distribution.chunked:0.1.0.20210121164255060]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.event.impl.jobs.queues.JobQueueImpl.startJob(JobQueueImpl.java:293) [org.apache.sling.event:4.2.12]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.event.impl.jobs.queues.JobQueueImpl.access$100(JobQueueImpl.java:60) [org.apache.sling.event:4.2.12]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.event.impl.jobs.queues.JobQueueImpl$1.run(JobQueueImpl.java:229) [org.apache.sling.event:4.2.12]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834)Caused by: 
java.util.regex.PatternSyntaxException: Unclosed group near index 20/nodewith(shouldwork&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.regex.Pattern.error(Pattern.java:2027)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.regex.Pattern.accept(Pattern.java:1877)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.regex.Pattern.group0(Pattern.java:3060)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.regex.Pattern.sequence(Pattern.java:2123)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.regex.Pattern.expr(Pattern.java:2068)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.regex.Pattern.compile(Pattern.java:1782)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.regex.Pattern.&amp;lt;init&amp;gt;(Pattern.java:1428)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.util.regex.Pattern.compile(Pattern.java:1068)&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.jackrabbit.vault.fs.filter.DefaultPathFilter.setPattern(DefaultPathFilter.java:68) [org.apache.jackrabbit.vault:3.4.0]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.jackrabbit.vault.fs.filter.DefaultPathFilter.&amp;lt;init&amp;gt;(DefaultPathFilter.java:48) [org.apache.jackrabbit.vault:3.4.0]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.serialization.impl.vlt.VltUtils.createFilter(VltUtils.java:92) [org.apache.sling.distribution.core:0.4.3.T20200720-c96d3fb]&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.sling.distribution.serialization.impl.vlt.FileVaultContentSerializer.exportToStream(FileVaultContentSerializer.java:115) [org.apache.sling.distribution.core:0.4.3.T20200720-c96d3fb]&#160;&#160;&#160;&#160;&#160;&#160;&#160; ... 21 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354376">SLING-10088</key>
            <summary>PatternSyntaxException: Unclosed group near index x</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cschneider">Christian Schneider</assignee>
                                    <reporter username="cschneider">Christian Schneider</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jan 2021 10:45:11 +0000</created>
                <updated>Tue, 6 Jul 2021 16:05:45 +0000</updated>
                            <resolved>Wed, 3 Feb 2021 09:05:13 +0000</resolved>
                                    <version>Content Distribution Core 0.4.2</version>
                                    <fixVersion>Content Distribution Core 0.4.6</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17275550" author="chris@die-schneider.net" created="Sat, 30 Jan 2021 10:10:41 +0000"  >&lt;p&gt;We found a regression with this fix. Apparently quoting the path might lead single node distributions to contain a lot more nodes than intended.&lt;/p&gt;

&lt;p&gt;I will also cancel the 0.4.4 release because of this.&lt;/p&gt;</comment>
                            <comment id="17275712" author="marett" created="Sat, 30 Jan 2021 20:13:56 +0000"  >&lt;p&gt;PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#46&lt;/a&gt;&#160;changed the way FileVault &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/blob/master/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/filter/DefaultPathFilter.java#L99-L101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DefaultPathFilter#isAbsolute &lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/blob/master/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/filter/DefaultPathFilter.java#L107-L121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DefaultPathFilter#translate&lt;/a&gt; quake. Those methods decide if a path is absolute by checking if the pattern starts with a &lt;tt&gt;/&lt;/tt&gt;. This implementation fails when providing a quoted path like in PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#46&lt;/a&gt;. This should be fixed in FileVault by using a matcher to decide absolute path instead of comparing the pattern string.&lt;/p&gt;

&lt;p&gt;We could work around this issue in Sling while still quoting specials chars (this issue) with something along the lines of&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)) {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + Pattern.quote(path.substring(1));
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Pattern.quote(path);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17275752" author="marett" created="Sun, 31 Jan 2021 01:12:24 +0000"  >&lt;p&gt;Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-500&quot; title=&quot;DefaultPathFilter#isAbsolute fails with quoted patterns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-500&quot;&gt;&lt;del&gt;JCRVLT-500&lt;/del&gt;&lt;/a&gt; to track the issue in Apache Jackrabbit FileVault project&lt;/p&gt;</comment>
                            <comment id="17275763" author="marett" created="Sun, 31 Jan 2021 02:52:15 +0000"  >&lt;p&gt;Opened a PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/47&lt;/a&gt; to apply the workaround in Sling Distribution Core bundle. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cschneider&quot; class=&quot;user-hover&quot; rel=&quot;cschneider&quot;&gt;cschneider&lt;/a&gt; I think we indeed need to cancel the release as &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-500&quot; title=&quot;DefaultPathFilter#isAbsolute fails with quoted patterns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-500&quot;&gt;&lt;del&gt;JCRVLT-500&lt;/del&gt;&lt;/a&gt; may take a while.&lt;/p&gt;</comment>
                            <comment id="17275803" author="chris@die-schneider.net" created="Sun, 31 Jan 2021 07:43:05 +0000"  >&lt;p&gt;Great work Tim. That finally explains the strange behaviour. I guess after the FileVault issue is fixed we can then remove the workaround again.&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13251099">SLING-8639</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13355686">JCRVLT-500</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0my88:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10078] DefaultAclManager does not handle multiple restrictions correctly.</title>
                <link>https://issues.apache.org/jira/browse/SLING-10078</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The converter does combine all restrictions it finds into one repo-init &lt;tt&gt;restriction()&lt;/tt&gt; statement.&lt;/p&gt;

&lt;p&gt;That is not correct - it needs to add one &lt;tt&gt;restriction()&lt;/tt&gt; per restriction found. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13353537">SLING-10078</key>
            <summary>DefaultAclManager does not handle multiple restrictions correctly.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jan 2021 13:59:32 +0000</created>
                <updated>Mon, 17 May 2021 11:39:01 +0000</updated>
                            <resolved>Wed, 20 Jan 2021 14:54:49 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17268626" author="karlpauls" created="Wed, 20 Jan 2021 14:54:49 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/57&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mt1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10073] ErrorHandlingTest.test_errorhandling_POST_operation_SlingPostServlet fails after SLING-10006</title>
                <link>https://issues.apache.org/jira/browse/SLING-10073</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10006&quot; title=&quot;Parameter &amp;quot;:sendError&amp;quot; presence should not replace the PostResponse object&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10006&quot;&gt;&lt;del&gt;SLING-10006&lt;/del&gt;&lt;/a&gt; the Sling ITs fail with&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failures: 
[ERROR]   ErrorHandlingTest.test_errorhandling_POST_operation_SlingPostServlet:177-&amp;gt;assertWithRetries:97-&amp;gt;RenderingTestBase.assertContains:36 Content does not contain &apos;Exception thrown - custom error page&apos; (content=&amp;lt;!--
/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
--&amp;gt;
&amp;lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&amp;gt;
&amp;lt;!-- simple JSP rendering test --&amp;gt;



&amp;lt;html&amp;gt;
	&amp;lt;head&amp;gt;
		&amp;lt;title&amp;gt;500 Internal Server Error&amp;lt;/title&amp;gt;
	&amp;lt;/head&amp;gt;
	&amp;lt;body&amp;gt;
		&amp;lt;h1&amp;gt;Internal Server Error (500) - custom error page&amp;lt;/h1&amp;gt;
	&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like the error handling behaviour has changed in an incompatible manner.&lt;/p&gt;

&lt;p&gt;To reproduce, update to the latest servlets.post in the Sling Starter:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/src/main/features/base.json b/src/main/features/base.json
index 754bf13..f2eb6cf 100644
--- a/src/main/features/base.json
+++ b/src/main/features/base.json
@@ -110,7 +110,7 @@
             &lt;span class=&quot;code-quote&quot;&gt;&quot;start-order&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt;
         },
         {
-            &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling:org.apache.sling.servlets.post:2.3.36&quot;&lt;/span&gt;,
+            &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling:org.apache.sling.servlets.post:2.4.2&quot;&lt;/span&gt;,
             &lt;span class=&quot;code-quote&quot;&gt;&quot;start-order&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt;
         },
         {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13353366">SLING-10073</key>
            <summary>ErrorHandlingTest.test_errorhandling_POST_operation_SlingPostServlet fails after SLING-10006</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jan 2021 21:13:37 +0000</created>
                <updated>Mon, 14 Mar 2022 11:16:16 +0000</updated>
                            <resolved>Tue, 19 Jan 2021 23:27:38 +0000</resolved>
                                    <version>Servlets POST 2.4.2</version>
                                    <fixVersion>Launchpad Integration Tests 12</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17268235" author="rombert" created="Tue, 19 Jan 2021 21:18:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enorman&quot; class=&quot;user-hover&quot; rel=&quot;enorman&quot;&gt;enorman&lt;/a&gt; - I think this was caused by your changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10006&quot; title=&quot;Parameter &amp;quot;:sendError&amp;quot; presence should not replace the PostResponse object&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10006&quot;&gt;&lt;del&gt;SLING-10006&lt;/del&gt;&lt;/a&gt;, can you please check?&lt;/p&gt;</comment>
                            <comment id="17268262" author="enorman" created="Tue, 19 Jan 2021 22:20:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&#160;Yes, I had a fix for that test and a few other new tests on my laptop that were waiting for the starter to update to the new release.&#160;&lt;/p&gt;

&lt;p&gt;That failure is actually an invalid assumption in the test that relied on a NPE bug in the old impl of SlingPostServlet.&#160; &#160;Basically, a post request with an invalid &quot;:operation&quot; and &quot;:sendError=true&quot; should continue to return a 500 error code, but the old impl of SlingPostServlet threw a NPE in the PostResponseWithErrorHandling class while attempting to send the error.&#160; In this case, the operation was not successful, but no exception was thrown so the &quot;this.getError().toString()&quot; statement in that class threw a NPE.&#160; That NPE caused the test response output to be rendered by the &quot;Throwable.jsp&quot; script instead of the &quot;500.jsp&quot; script which have different text.&#160; After the code was changed to no longer throw a NPE then the test had to change to compensate.&lt;/p&gt;</comment>
                            <comment id="17268277" author="enorman" created="Tue, 19 Jan 2021 23:27:38 +0000"  >&lt;p&gt;Fixed at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/aed34f7783352fafc4ad935a8bab9165cc91e7d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/aed34f7783352fafc4ad935a8bab9165cc91e7d8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13346172">SLING-10006</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mrzk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10072] Fix Rewriter Tests on Windows</title>
                <link>https://issues.apache.org/jira/browse/SLING-10072</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Rewriter tests fail when run on windows, with the following message: &lt;/p&gt;

&lt;p&gt;-------------------------------------------------------------------------------&lt;br/&gt;
Test set: org.apache.sling.rewriter.impl.components.Html5SerializerTest&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
Tests run: 11, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.177 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.rewriter.impl.components.Html5SerializerTest&lt;br/&gt;
org.apache.sling.rewriter.impl.components.Html5SerializerTest.testStartDocument  Time elapsed: 0.147 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
org.junit.ComparisonFailure: &lt;br/&gt;
expected:&amp;lt;&amp;lt;!DOCTYPE html&amp;gt;[]&lt;br/&gt;
&amp;gt; but was:&amp;lt;&amp;lt;!DOCTYPE html&amp;gt;[&lt;br/&gt;
]&lt;br/&gt;
&amp;gt;&lt;br/&gt;
        at org.apache.sling.rewriter.impl.components.Html5SerializerTest.testStartDocument(Html5SerializerTest.java:113)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13353356">SLING-10072</key>
            <summary>Fix Rewriter Tests on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dklco">Dan Klco</assignee>
                                    <reporter username="dklco">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jan 2021 20:22:00 +0000</created>
                <updated>Thu, 17 Feb 2022 10:22:51 +0000</updated>
                            <resolved>Wed, 17 Feb 2021 13:06:17 +0000</resolved>
                                    <version>Rewriter 1.3.0</version>
                                    <fixVersion>Rewriter 1.3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17285818" author="dklco" created="Wed, 17 Feb 2021 13:06:17 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-rewriter/commit/09c428d32164921e78d34ff9525d02bc57e74eb8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-rewriter/commit/09c428d32164921e78d34ff9525d02bc57e74eb8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mrxc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10069] The generated features target dir is created in the wrong place</title>
                <link>https://issues.apache.org/jira/browse/SLING-10069</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After switching to the 1.4.22 release version of the plugin, I noticed that the change for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10035&quot; title=&quot;Sling Feature fails when Generated Features Directory is missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10035&quot;&gt;&lt;del&gt;SLING-10035&lt;/del&gt;&lt;/a&gt; appears to be creating a set of empty folders in the wrong place in my linux environment.&lt;/p&gt;

&lt;p&gt;Using a debugger, I see that the targetDir File object is constructed at AbstractFeatureMojo line 244 with the &quot;child&quot; second argument already resolved to be an absolute path.&#160; This appears to append the absolute child path to the parent path rather than checking if &quot;child&quot; is relative or absolute to resolve it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/blob/master/src/main/java/org/apache/sling/feature/maven/mojos/AbstractFeatureMojo.java#L244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/blob/master/src/main/java/org/apache/sling/feature/maven/mojos/AbstractFeatureMojo.java#L244&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Expect the targetDir resolution to&#160;properly resolve the path with something like this:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File targetDir = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.project.getBasedir().toPath().resolve(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.project.getBuild().getDirectory()).toFile();&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13353139">SLING-10069</key>
            <summary>The generated features target dir is created in the wrong place</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2021 21:35:38 +0000</created>
                <updated>Mon, 8 Feb 2021 17:36:29 +0000</updated>
                            <resolved>Fri, 22 Jan 2021 01:04:08 +0000</resolved>
                                    <version>slingfeature-maven-plugin 1.4.22</version>
                                    <fixVersion>slingfeature-maven-plugin 1.4.24</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17267567" author="enorman" created="Mon, 18 Jan 2021 23:42:51 +0000"  >&lt;p&gt;I&apos;ve created a PR at: &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/pull/67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/pull/67&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If there is no negative feedback to the changes in a few days then I will merge the PR to the mainline.&lt;/p&gt;</comment>
                            <comment id="17267774" author="davidb" created="Tue, 19 Jan 2021 09:22:24 +0000"  >&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andysch&quot; class=&quot;user-hover&quot; rel=&quot;andysch&quot;&gt;andysch&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17267971" author="schaefa" created="Tue, 19 Jan 2021 15:34:18 +0000"  >&lt;p&gt;I ran this against the project that caused the issue I tried to resolve in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10035&quot; title=&quot;Sling Feature fails when Generated Features Directory is missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10035&quot;&gt;&lt;del&gt;SLING-10035&lt;/del&gt;&lt;/a&gt;&#160;and it works fine.&lt;/p&gt;</comment>
                            <comment id="17269740" author="enorman" created="Fri, 22 Jan 2021 01:04:08 +0000"  >&lt;p&gt;Merged PR at:&#160;&lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/commit/c07c13af614d5043bacd24a8c55ca8891cb60460&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/commit/c07c13af614d5043bacd24a8c55ca8891cb60460&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13348617">SLING-10035</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mql4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10068] CAConfig Mock Plugin: NPE when using `@Nested` tests</title>
                <link>https://issues.apache.org/jira/browse/SLING-10068</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using the caconfig mocking plugin as per the example here:&#160;&lt;br/&gt;
 &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-caconfig-mock-plugin/blob/master/src/test/java/org/apache/sling/testing/mock/caconfig/ContextPluginsTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-caconfig-mock-plugin/blob/master/src/test/java/org/apache/sling/testing/mock/caconfig/ContextPluginsTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If the tests are located inside an inner class annotated with the `@Nested` annotation, then a NPE occurs:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerExceptionjava.lang.NullPointerException 
    at org.apache.sling.testing.mock.caconfig.MockContextAwareConfig.writeConfiguration(MockContextAwareConfig.java:101) 
    at org.apache.sling.testing.mock.caconfig.MockContextAwareConfig.writeConfiguration(MockContextAwareConfig.java:125) 
    at org.apache.sling.testing.mock.caconfig.MockContextAwareConfig.writeConfiguration(MockContextAwareConfig.java:113)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13352982">SLING-10068</key>
            <summary>CAConfig Mock Plugin: NPE when using `@Nested` tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kylegio">Kyle Giovannetti</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2021 06:39:15 +0000</created>
                <updated>Wed, 7 Jul 2021 19:49:55 +0000</updated>
                                            <version>Context-Aware Configuration Mock Plugin 1.3.2</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17267049" author="sseifert@pro-vision.de" created="Mon, 18 Jan 2021 07:19:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kylegio&quot; class=&quot;user-hover&quot; rel=&quot;kylegio&quot;&gt;kylegio&lt;/a&gt; can you provide a unit test to reproduce the problem?&lt;/p&gt;</comment>
                            <comment id="17376809" author="sseifert@pro-vision.de" created="Wed, 7 Jul 2021 19:49:55 +0000"  >&lt;p&gt;the root cause was probably &lt;a href=&quot;https://wcm-io.atlassian.net/browse/WTES-62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wcm-io.atlassian.net/browse/WTES-62&lt;/a&gt; - or is this really a problem specific to this mock plugin?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mpmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10067] Prototype for chunked deep distribution</title>
                <link>https://issues.apache.org/jira/browse/SLING-10067</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We have a case where a tree distribution could not be applied on oak level as it was too large. As we can not control how large a tree can grow we should have a solution that does not depend on the size of the tree.&lt;/p&gt;

&lt;p&gt;I would like to create a prototype of a chunked deep distribution. It is given a path to distribute and walks through the full tree of resources to collect paths (breadth first).&lt;/p&gt;

&lt;p&gt;Then the list of paths is split into chunks of configurable size. For each chunk we create a distribution with all paths of the chunk. This makes sure the package size will not grow too big.&lt;/p&gt;

&lt;p&gt;The call should be asyncronous and it should be possible to monitor and cancel the progress of package creation. So the idea is to use a sling job with JobExecutor interface. This way the job can report progress and react to cancel requests.&lt;/p&gt;

&lt;p&gt;I plan to create the prototype in the sling whiteboard.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13352760">SLING-10067</key>
            <summary>Prototype for chunked deep distribution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cschneider">Christian Schneider</assignee>
                                    <reporter username="cschneider">Christian Schneider</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Jan 2021 10:01:04 +0000</created>
                <updated>Tue, 26 Jan 2021 12:14:54 +0000</updated>
                            <resolved>Tue, 26 Jan 2021 12:14:54 +0000</resolved>
                                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17266880" author="marett" created="Sun, 17 Jan 2021 18:59:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cschneider&quot; class=&quot;user-hover&quot; rel=&quot;cschneider&quot;&gt;cschneider&lt;/a&gt; for starting this prototype. The idea of using Sling Jobs looks appropriate for this use case. There will be only one Sling Job created per deep distribution action which won&apos;t stress the repository. It also makes sense to use the built in support to report progress and cancel jobs.&lt;/p&gt;

&lt;p&gt;The feature would leverage APIs widely available in the Sling / AEM world: Sling Jobs, Sling Content Distribution and Jackrabbit FileVault. It could serve as a better implementation for AEM &quot;tree activation&quot; feature for on premise and cloud deployments. Toward this goal, the recursive descent should only add the path of hierarchical nodes (node of type nt:hierarchyNode such as sling:Folder or AEM&apos;s cq:Page, dam:Asset types) in the multi-path distribution requests.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I plan to create the prototype in the sling whiteboard.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Nice! I would be glad to have a look.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mo94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10065] make command servlet tests more robust</title>
                <link>https://issues.apache.org/jira/browse/SLING-10065</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert&quot; class=&quot;user-hover&quot; rel=&quot;sseifert&quot;&gt;sseifert&lt;/a&gt; observed a build issue that is probably due to different implementation of EOL in json generation, or/and in test expectation on linux / windows. We should have a more robust way of testing validity of the json response &lt;/p&gt;

&lt;p&gt;&lt;blockquote&gt;&lt;/blockquote&gt;i&apos;ve a problem running the unit tests on windows. surefire output see below.&lt;br/&gt;
 i assume there is a problem with line endings, can you fix the test that it is agnostic of unix/windows line endings?&lt;/p&gt;

&lt;p&gt; stefan&lt;/p&gt;

&lt;p&gt; -------------------------------------------------------------------------------&lt;br/&gt;
 Test set: org.apache.sling.pipes.internal.CommandExecutorImplTest&lt;br/&gt;
 -------------------------------------------------------------------------------&lt;br/&gt;
 Tests run: 17, Failures: 3, Errors: 0, Skipped: 0, Time elapsed: 4.657 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.pipes.internal.CommandExecutorImplTest&lt;br/&gt;
 org.apache.sling.pipes.internal.CommandExecutorImplTest.testFileCommandServlet&#160; Time elapsed: 0.39 s&#160; &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
 org.junit.ComparisonFailure: &lt;br/&gt;
 expected:&amp;lt;...:content&quot;],&quot;size&quot;:5}[]&lt;br/&gt;
 &amp;gt; but was:&amp;lt;...:content&quot;],&quot;size&quot;:5}[&lt;br/&gt;
 ]&lt;br/&gt;
 &amp;gt;&lt;br/&gt;
 &#160; &#160; &#160; &#160; at org.apache.sling.pipes.internal.CommandExecutorImplTest.testFileCommandServlet(CommandExecutorImplTest.java:236)&lt;/p&gt;

&lt;p&gt; org.apache.sling.pipes.internal.CommandExecutorImplTest.testSimpleCommandServlet&#160; Time elapsed: 0.265 s&#160; &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
 org.junit.ComparisonFailure: &lt;br/&gt;
 expected:&amp;lt;...tent/foo&quot;],&quot;size&quot;:1}[]&lt;br/&gt;
 &amp;gt; but was:&amp;lt;...tent/foo&quot;],&quot;size&quot;:1}[&lt;br/&gt;
 ]&lt;br/&gt;
 &amp;gt;&lt;br/&gt;
 &#160; &#160; &#160; &#160; at org.apache.sling.pipes.internal.CommandExecutorImplTest.testSimpleCommandServlet(CommandExecutorImplTest.java:200)&lt;/p&gt;

&lt;p&gt; org.apache.sling.pipes.internal.CommandExecutorImplTest.testChainedCommand&#160; Time elapsed: 0.263 s&#160; &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
 org.junit.ComparisonFailure: &lt;br/&gt;
 expected:&amp;lt;...a/carrot&quot;],&quot;size&quot;:5}[]&lt;br/&gt;
 &amp;gt; but was:&amp;lt;...a/carrot&quot;],&quot;size&quot;:5}[&lt;br/&gt;
 ]&lt;br/&gt;
 &amp;gt;&lt;br/&gt;
 &#160; &#160; &#160; &#160; at org.apache.sling.pipes.internal.CommandExecutorImplTest.testChainedCommand(CommandExecutorImplTest.java:225){Quote}&lt;/p&gt;</description>
                <environment></environment>
        <key id="13352504">SLING-10065</key>
            <summary>make command servlet tests more robust</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2021 15:43:59 +0000</created>
                <updated>Tue, 19 Jan 2021 13:48:20 +0000</updated>
                            <resolved>Fri, 15 Jan 2021 15:51:51 +0000</resolved>
                                    <version>Pipes 4.0.0</version>
                                    <fixVersion>Pipes 4.1.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17266188" author="bdelacretaz" created="Fri, 15 Jan 2021 16:52:55 +0000"  >&lt;p&gt;FWIW, in case you have more similar needs later, in the GraphQL Core module we are &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-graphql-core/blob/3be37e2ef574d6f4da8ecabd147bb9cecef7671d/src/test/java/org/apache/sling/graphql/core/engine/DefaultQueryExecutorTest.java#L106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;using jsonpath matchers&lt;/a&gt; and I find them quite convenient.&lt;/p&gt;</comment>
                            <comment id="17266192" author="npeltier" created="Fri, 15 Jan 2021 16:59:13 +0000"  >&lt;p&gt;interesting &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; ! i had implemented a quick jsonpath feature in json pipe (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/blob/master/src/main/java/org/apache/sling/pipes/internal/inputstream/JsonPipe.java#L140)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-pipes/blob/master/src/main/java/org/apache/sling/pipes/internal/inputstream/JsonPipe.java#L140)&lt;/a&gt; but didn&apos;t think to use any for unit test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mmog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10061] slingUrl configuration parameter is ignored during install-bundle step</title>
                <link>https://issues.apache.org/jira/browse/SLING-10061</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a pom.xml file with the following dependency in it:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;!-- Apache Sling Plugin --&amp;gt;
 &amp;lt;plugin&amp;gt;
&#160; &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;
&#160; &amp;lt;artifactId&amp;gt;maven-sling-plugin&amp;lt;/artifactId&amp;gt;
&#160; &amp;lt;version&amp;gt;2.3.8&amp;lt;/version&amp;gt; &amp;lt;!-- Use 2.4.0 or later seems to cause the slingUrl to be ignored. --&amp;gt;
&#160; &amp;lt;configuration&amp;gt;
&#160; &#160; &amp;lt;slingUrl&amp;gt;http:&lt;span class=&quot;code-comment&quot;&gt;//${aem.host}:${aem.port}/system/console&amp;lt;/slingUrl&amp;gt;
&lt;/span&gt;&#160; &#160; &amp;lt;deploymentMethod&amp;gt;WebConsole&amp;lt;/deploymentMethod&amp;gt;
&#160; &amp;lt;/configuration&amp;gt;
 &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;${aem.host} is set to localhost and ${aem.port} is set to 4502.&lt;/p&gt;

&lt;p&gt;It works fine when the version is set to 2.3.8 but when I moved to 2.4.0 or 2.4.2 I get the following message on the console:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- sling-maven-plugin:2.4.0:install (install-bundle) @ fluentforms.core ---
[INFO] Installing Bundle com._4point.aem.fluentforms.core(C:\Users\Rob.McDougall\OneDrive - 4Point Solutions Ltd\Documents\Eclipse FluentAPI Workspace\fluentforms\core\target\fluentforms.core-0.0.2-SNAPSHOT.jar) to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/system/console via WebConsole
&lt;/span&gt;[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 22.770 s
[INFO] Finished at: 2021-01-12T16:58:35-05:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.sling:sling-maven-plugin:2.4.0:install (install-bundle) on project fluentforms.core: Installation on http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/system/console failed, cause: Installation failed, cause: Not Found -&amp;gt; [Help 1]&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I have tried manipulating the value in &amp;lt;slingUrl&amp;gt; but the plugin appears to be ignoring that setting completely and using the default value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13351871">SLING-10061</key>
            <summary>slingUrl configuration parameter is ignored during install-bundle step</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="RobMcDougall">Rob McDougall</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2021 22:03:18 +0000</created>
                <updated>Tue, 12 Jan 2021 22:03:18 +0000</updated>
                                            <version>Sling Maven Plugin 2.4.0</version>
                    <version>Sling Maven Plugin 2.4.2</version>
                                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mirs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10060] Substitutions for the &quot;replacePropertyVariables&quot; values should prefer the system property value</title>
                <link>https://issues.apache.org/jira/browse/SLING-10060</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Substitutions for the &quot;replacePropertyVariables&quot; values should prefer the system property value (if available) over the project property value.&#160;&#160;&lt;/p&gt;

&lt;p&gt;For example, the use case of a parameterized jenkins job where the users choice should be passed along to maven&#160;and used to configure/prepare the environment to run a set of tests against.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13351832">SLING-10060</key>
            <summary>Substitutions for the &quot;replacePropertyVariables&quot; values should prefer the system property value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2021 19:06:10 +0000</created>
                <updated>Mon, 8 Feb 2021 17:36:29 +0000</updated>
                            <resolved>Mon, 18 Jan 2021 21:30:20 +0000</resolved>
                                                    <fixVersion>slingfeature-maven-plugin 1.4.24</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17263637" author="enorman" created="Tue, 12 Jan 2021 19:30:12 +0000"  >&lt;p&gt;Prepared a fix at: &lt;a href=&quot;https://github.com/enapps-enorman/sling-slingfeature-maven-plugin/commit/d078375a1ce40c3384e12e7325eb501dd4a0219f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/enapps-enorman/sling-slingfeature-maven-plugin/commit/d078375a1ce40c3384e12e7325eb501dd4a0219f&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will wait for the 1.4.22 pending release activities to be completed before creating a pull request.&lt;/p&gt;</comment>
                            <comment id="17263901" author="cziegeler" created="Wed, 13 Jan 2021 06:01:04 +0000"  >&lt;p&gt;Thanks, the fix looks good to me&lt;/p&gt;</comment>
                            <comment id="17267548" author="enorman" created="Mon, 18 Jan 2021 21:30:20 +0000"  >&lt;p&gt;Fixed at:&#160;&lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/commit/0fa01064594c92801bd871882172227728ecda49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/commit/0fa01064594c92801bd871882172227728ecda49&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mij4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10049] CMS Reference - Including Single Breadcrumb Shows Included Page not Current Page</title>
                <link>https://issues.apache.org/jira/browse/SLING-10049</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When including the breadcrumb reference component from another page, it shows the included page&apos;s context, not the current page. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13351118">SLING-10049</key>
            <summary>CMS Reference - Including Single Breadcrumb Shows Included Page not Current Page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dklco">Dan Klco</assignee>
                                    <reporter username="dklco">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jan 2021 16:23:41 +0000</created>
                <updated>Fri, 21 May 2021 04:23:36 +0000</updated>
                            <resolved>Fri, 8 Jan 2021 16:52:14 +0000</resolved>
                                    <version>App CMS 0.16.2</version>
                                    <fixVersion>App CMS 1.0.2</fixVersion>
                                    <component>App CMS Reference</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17261432" author="dklco" created="Fri, 8 Jan 2021 16:52:14 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/f1f98a3eedf0e1446dddd7abb8e115ea816bd37c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/f1f98a3eedf0e1446dddd7abb8e115ea816bd37c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0me4w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10048] Sling Dynamic Include 3.2.0 OSGI Configuration MetaType descriptor missing</title>
                <link>https://issues.apache.org/jira/browse/SLING-10048</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While using Sling Dynamic Include Version 3.2.0 in AEM 6.4 the OSGI Configurations are missing.&lt;/p&gt;

&lt;p&gt;When creating my own Configuration and deploying it to the instance, I am getting the following. Seems like the metadescription is not being picked up.&lt;br/&gt;
Any Ideas?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13018378/13018378_image-2021-01-08-16-36-40-961.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13351109">SLING-10048</key>
            <summary>Sling Dynamic Include 3.2.0 OSGI Configuration MetaType descriptor missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="MFlock">Marvin Flock</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jan 2021 15:37:39 +0000</created>
                <updated>Tue, 11 Feb 2025 15:00:16 +0000</updated>
                                            <version>Dynamic Include 3.2.0</version>
                                    <fixVersion>Dynamic Include 3.3.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17262477" author="rombert" created="Mon, 11 Jan 2021 08:27:08 +0000"  >&lt;p&gt;Thanks for your report &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=MFlock&quot; class=&quot;user-hover&quot; rel=&quot;MFlock&quot;&gt;MFlock&lt;/a&gt;. I just tried this with the Sling Starter 12 and it seems to work just fine ( see below ). Do you have any entries in the error.log file that might be linked to this?&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13018486/13018486_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17262514" author="mflock" created="Mon, 11 Jan 2021 09:23:07 +0000"  >&lt;p&gt;Hey Robert, thanks for your answer.&lt;br/&gt;
I didnt use the Sling Starter, just the DSI Bundle.&lt;/p&gt;

&lt;p&gt;The Sling Starter sounds more like experimental and testcontent, which I dont want to put on our production environment (based on Github Readme):&lt;br/&gt;
&lt;em&gt;It is&#160;&lt;b&gt;not meant to be a production-ready setup&lt;/b&gt;, more as a way to facilitate experimenting and learning Sling.&lt;/em&gt;&lt;br/&gt;
Shouldn&apos;t the DSI Bundle be self sustaining?&lt;br/&gt;
If not, then could you please be so kind and update the DSI Readme? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&#160;__&#160;&lt;/p&gt;</comment>
                            <comment id="17262529" author="rombert" created="Mon, 11 Jan 2021 09:44:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=MFlock&quot; class=&quot;user-hover&quot; rel=&quot;MFlock&quot;&gt;MFlock&lt;/a&gt; - my comment is basically &quot;works on my machine&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; . We use the Sling Starter for testing anything, we don&apos;t test in AEM. So the metatype information not being displayed is probably caused by something missing from AEM or by AEM having an old version of something.&lt;/p&gt;

&lt;p&gt;I was hoping the error.log would point us to the problem.&lt;/p&gt;</comment>
                            <comment id="17262535" author="mflock" created="Mon, 11 Jan 2021 09:57:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&#160;Yeah, checked the error.log, and there is actually an error regarding this:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13018499/13018499_image-2021-01-11-10-55-35-830.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Currently running on AEM 6.4.5&lt;/p&gt;

&lt;p&gt;Text version of error:&lt;/p&gt;

&lt;p&gt;11.01.2021 10:52:20.348 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;qtp1126175818-2088&amp;#93;&lt;/span&gt; org.apache.felix.metatype fromDocuments: Error accessing document bundle://590.0:0/OSGI-INF/metatype/org.apache.sling.dynamicinclude.Configuration$Config.xml : Unsupported Namespace: &apos;http://www.osgi.org/xmlns/metatype/v1.4.0&apos;&lt;/p&gt;</comment>
                            <comment id="17262540" author="rombert" created="Mon, 11 Jan 2021 10:04:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=MFlock&quot; class=&quot;user-hover&quot; rel=&quot;MFlock&quot;&gt;MFlock&lt;/a&gt; - thanks! It seems we are generating a too new version of the metatype descriptor for AEM 6.4 . I am not sure why that happens. I see that we are compiling against &lt;tt&gt;osgi.cmpn&lt;/tt&gt; 6.0.0. which has the 1.3 version of the metatype service, and the metatype annotations package is also at version 1.3 . &lt;/p&gt;

&lt;p&gt;If you would be able to debug/provide a PR with a fix it would greatly increase the chances of getting a speedy fix.&lt;/p&gt;</comment>
                            <comment id="17262553" author="mflock" created="Mon, 11 Jan 2021 10:25:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; &lt;br/&gt;
thanks for clarification! Will give it a try this week.&lt;/p&gt;</comment>
                            <comment id="17262603" author="rombert" created="Mon, 11 Jan 2021 12:01:17 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13018378" name="image-2021-01-08-16-36-40-961.png" size="54847" author="MFlock" created="Fri, 8 Jan 2021 15:36:41 +0000"/>
                            <attachment id="13018499" name="image-2021-01-11-10-55-35-830.png" size="10775" author="MFlock" created="Mon, 11 Jan 2021 09:55:36 +0000"/>
                            <attachment id="13018486" name="screenshot-1.png" size="129595" author="rombert" created="Mon, 11 Jan 2021 08:26:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0me2w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10043] Naming OSGi configs with dashes breaks the OSGi installer</title>
                <link>https://issues.apache.org/jira/browse/SLING-10043</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If you name OSGi configuration files with many dashes in the name it can break the OSGi installer module causing this error &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
10.09.2020 16:57:40.689 *ERROR* [OsgiInstallerImpl] org.apache.sling.installer.core.impl.OsgiInstallerImpl An unexpected error occured in the installer task. Installer is stopped now!
java.lang.ArrayIndexOutOfBoundsException: 0
	at org.apache.sling.installer.factories.configuration.impl.ConfigUpdateHandler.getMiddleDotSplitIndex(ConfigUpdateHandler.java:135)
	at org.apache.sling.installer.factories.configuration.impl.ConfigUpdateHandler.getFactoryPidAndPid(ConfigUpdateHandler.java:115)
	at org.apache.sling.installer.factories.configuration.impl.ConfigUpdateHandler.updateFactoryConfig(ConfigUpdateHandler.java:143)
	at org.apache.sling.installer.factories.configuration.impl.ConfigUpdateHandler.update(ConfigUpdateHandler.java:87)
	at org.apache.sling.installer.factories.configuration.impl.ConfigUpdateHandler.update(ConfigUpdateHandler.java:72)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.handleResourceUpdaters(OsgiInstallerImpl.java:1640)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.run(OsgiInstallerImpl.java:272)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13350819">SLING-10043</key>
            <summary>Naming OSGi configs with dashes breaks the OSGi installer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="akanksha88">Akanksha Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jan 2021 07:44:56 +0000</created>
                <updated>Tue, 19 Jan 2021 17:10:59 +0000</updated>
                            <resolved>Fri, 8 Jan 2021 10:58:23 +0000</resolved>
                                    <version>Installer Configuration Factory 1.2.4</version>
                    <version>Installer Configuration Factory 1.3.0</version>
                    <version>Installer Configuration Factory 1.3.2</version>
                                    <fixVersion>Installer Configuration Factory 1.3.4</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="17260394" author="cziegeler" created="Thu, 7 Jan 2021 10:34:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akanksha88&quot; class=&quot;user-hover&quot; rel=&quot;akanksha88&quot;&gt;akanksha88&lt;/a&gt; Which version of the configuration factory plugin for the OSGi installer are you using? It looks like an old one and I believe this error is fixed in newer versions&lt;/p&gt;</comment>
                            <comment id="17260498" author="akanksha88" created="Thu, 7 Jan 2021 13:37:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for the quick response. We are using org.apache.sling/org.apache.sling.installer.factory.configuration/1.2.4.&lt;/p&gt;

&lt;p&gt;Please let me know if it is fixed in&#160;org.apache.sling/org.apache.sling.installer.factory.configuration/1.3.2(latest version)&lt;/p&gt;</comment>
                            <comment id="17260631" author="cziegeler" created="Thu, 7 Jan 2021 16:36:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akanksha88&quot; class=&quot;user-hover&quot; rel=&quot;akanksha88&quot;&gt;akanksha88&lt;/a&gt; I think so, at least there are some tests with pids with multiple dashes here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/blob/master/src/test/java/org/apache/sling/installer/factories/configuration/impl/ConfigUpdateHandlerTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/blob/master/src/test/java/org/apache/sling/installer/factories/configuration/impl/ConfigUpdateHandlerTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The easiest is probably if you just give it a try&lt;/p&gt;</comment>
                            <comment id="17261038" author="cziegeler" created="Fri, 8 Jan 2021 06:27:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akanksha88&quot; class=&quot;user-hover&quot; rel=&quot;akanksha88&quot;&gt;akanksha88&lt;/a&gt; As the test from your PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/6&lt;/a&gt; fails with latest code, I assume I was wrong and the bug is still there&lt;/p&gt;</comment>
                            <comment id="17261134" author="akanksha88" created="Fri, 8 Jan 2021 08:48:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160;Thank you for reviewing the PR.&lt;/p&gt;

&lt;p&gt;If it looks good, Can we merge it to master as I don&apos;t have commit rights.&lt;/p&gt;</comment>
                            <comment id="17261223" author="rombert" created="Fri, 8 Jan 2021 10:58:23 +0000"  >&lt;p&gt;PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/6&lt;/a&gt; merged, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akanksha88&quot; class=&quot;user-hover&quot; rel=&quot;akanksha88&quot;&gt;akanksha88&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17262606" author="akanksha88" created="Mon, 11 Jan 2021 12:14:51 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&#160;for merging the pull request. Can you please release an updated &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17263332" author="rombert" created="Tue, 12 Jan 2021 13:29:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akanksha88&quot; class=&quot;user-hover&quot; rel=&quot;akanksha88&quot;&gt;akanksha88&lt;/a&gt; - I plan to start a release vote tomorrow, please watch the Sling dev list.&lt;/p&gt;</comment>
                            <comment id="17265901" author="akanksha88" created="Fri, 15 Jan 2021 10:34:54 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mcag:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10037] Jenkins build issue: package sun.misc does not exist</title>
                <link>https://issues.apache.org/jira/browse/SLING-10037</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Jenkins/local build issue:&#160;package sun.misc does not exist&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] /home/jenkins/h49-shared/712657a4/workspace/_apache-sling-models-impl_master/src/test/java/org/apache/sling/models/impl/InjectorSpecificAnnotationTest.java: Recompile with -Xlint:unchecked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/jenkins/h49-shared/712657a4/workspace/_apache-sling-models-impl_master/src/test/java/org/apache/sling/models/impl/AdapterFactoryTest.java:[314,23] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; sun.misc does not exist
[ERROR] /home/jenkins/h49-shared/712657a4/workspace/_apache-sling-models-impl_master/src/test/java/org/apache/sling/models/impl/AdapterFactoryTest.java:[314,54] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; sun.misc does not exist
[ERROR] /home/jenkins/h49-shared/712657a4/workspace/_apache-sling-models-impl_master/src/test/java/org/apache/sling/models/impl/AdapterFactoryTest.java:[317,17] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; sun.misc does not exist
[ERROR] /home/jenkins/h49-shared/712657a4/workspace/_apache-sling-models-impl_master/src/test/java/org/apache/sling/models/impl/AdapterFactoryTest.java:[317,46] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; sun.misc does not exist
[INFO] 4 errors 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Affected version:&#160;1.4.17-SNAPSHOT&lt;/p&gt;

&lt;p&gt;For more build details: &lt;a href=&quot;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-models-impl/job/master/32/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-models-impl/job/master/32/console&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13348786">SLING-10037</key>
            <summary>Jenkins build issue: package sun.misc does not exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ashokmca07@gmail.com">Ashok Pelluru</reporter>
                        <labels>
                            <label>compile-error</label>
                    </labels>
                <created>Sun, 3 Jan 2021 07:53:37 +0000</created>
                <updated>Fri, 10 Dec 2021 09:26:11 +0000</updated>
                            <resolved>Wed, 1 Dec 2021 10:39:24 +0000</resolved>
                                                    <fixVersion>Models Implementation 1.5.0</fixVersion>
                                    <component>Sling Models</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17259558" author="rombert" created="Wed, 6 Jan 2021 09:59:49 +0000"  >&lt;p&gt;Thanks for the report &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashokmca07%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;ashokmca07@gmail.com&quot;&gt;ashokmca07@gmail.com&lt;/a&gt;! The build fails since &lt;a href=&quot;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-models-impl/job/master/32/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-models-impl/job/master/32/&lt;/a&gt;, which in turn points to &lt;a href=&quot;https://github.com/apache/sling-tooling-jenkins/commit/0ae97fc92104c131bc42b1a6993316652447e004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-tooling-jenkins/commit/0ae97fc92104c131bc42b1a6993316652447e004&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - do you have any thoughts about this?&lt;/p&gt;</comment>
                            <comment id="17259663" author="kwin" created="Wed, 6 Jan 2021 12:18:50 +0000"  >&lt;p&gt;This was described in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9839?focusedCommentId=17239944&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17239944&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-9839?focusedCommentId=17239944&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17239944&lt;/a&gt; and only affects the Sonar step. Anyways, we should try to make the build JDK11 compatible... PRs highly welcome.&lt;/p&gt;</comment>
                            <comment id="17259874" author="ashokmca07@gmail.com" created="Wed, 6 Jan 2021 16:50:13 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;PR: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/23&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/23&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Could you re-trigger Jenkins pipeline? &lt;a href=&quot;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-models-impl/job/PR-23/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Sling/job/modules/job/sling-org-apache-sling-models-impl/job/PR-23/&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Looks like a fatal exception from Jenkins:&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- maven-compiler-plugin:3.8.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) @ org.apache.sling.models.impl ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 36 source files to /home/jenkins/jenkins-agent/workspace/g-apache-sling-models-impl_PR-23/target/classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  5.286 s
[INFO] Finished at: 2021-01-06T16:36:23Z
[INFO] ------------------------------------------------------------------------
[WARNING] The requested profile &lt;span class=&quot;code-quote&quot;&gt;&quot;ci&quot;&lt;/span&gt; could not be activated because it does not exist.
[INFO] [jenkins-event-spy] Generated /home/jenkins/jenkins-agent/workspace/g-apache-sling-models-impl_PR-23@tmp/withMaven3848cfa0/maven-spy-20210106-163617-543571905851060205396.log
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project org.apache.sling.models.impl: Fatal error compiling: invalid flag: --release -&amp;gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;.
[ERROR] Re-run Maven using the -X &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; to enable full debug logging.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17259885" author="kwin" created="Wed, 6 Jan 2021 17:07:16 +0000"  >&lt;p&gt;I commented directly on the PR. Jenkins failed because of your changes in the PR.&lt;/p&gt;</comment>
                            <comment id="17259917" author="ashokmca07@gmail.com" created="Wed, 6 Jan 2021 17:29:10 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&#160;thanks for your comments. Now maven build is success. &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/23&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/23&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have fixed your comments as well.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ashok&lt;/p&gt;</comment>
                            <comment id="17451707" author="kwin" created="Wed, 1 Dec 2021 10:37:54 +0000"  >&lt;p&gt;Now fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/commit/251610f58c8c847896ba37eef89ed8c23c3eb104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/commit/251610f58c8c847896ba37eef89ed8c23c3eb104&lt;/a&gt; by merging &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/25.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/25&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashokmca07%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;ashokmca07@gmail.com&quot;&gt;ashokmca07@gmail.com&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paul.bjorkstrand&quot; class=&quot;user-hover&quot; rel=&quot;paul.bjorkstrand&quot;&gt;paul.bjorkstrand&lt;/a&gt; for the efforts.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13414485">SLING-10947</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lzkg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10035] Sling Feature fails when Generated Features Directory is missing</title>
                <link>https://issues.apache.org/jira/browse/SLING-10035</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When I want to aggregate a Feature Model in another module like &apos;all&apos; and there is not attachment or other FM generation task beforehand the Sling Feature Maven Plugin fails in&#160;handleGeneratedFeatures() method. This can be fixed by copying the target folder from the resources but that is a lot of unnecessary work.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I added code to that method that tries to create the folder if it does not exist.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13348617">SLING-10035</key>
            <summary>Sling Feature fails when Generated Features Directory is missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andysch">Andreas Schaefer</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Dec 2020 18:40:05 +0000</created>
                <updated>Mon, 18 Jan 2021 21:40:26 +0000</updated>
                            <resolved>Tue, 12 Jan 2021 10:15:53 +0000</resolved>
                                    <version>slingfeature-maven-plugin 1.4.20</version>
                                    <fixVersion>slingfeature-maven-plugin 1.4.22</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17257077" author="schaefa" created="Thu, 31 Dec 2020 18:47:35 +0000"  >&lt;p&gt;Created a PR for this:&#160;&lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/pull/63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/pull/63&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17266330" author="enorman" created="Fri, 15 Jan 2021 20:13:31 +0000"  >&lt;p&gt;FYI: After switching to the newly release version of the plugin, I just noticed that this change appears to be creating a set of empty folders in the wrong place in my linux environment.&lt;/p&gt;

&lt;p&gt;Using a debugger, I see that the targetDir File object is constructed at AbstractFeatureMojo line 244 with the &quot;child&quot; second argument already resolved to be an absolute path.&#160; This appears to append the absolute child path to the parent path rather than checking if &quot;child&quot; is relative or absolute to resolve it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/blob/master/src/main/java/org/apache/sling/feature/maven/mojos/AbstractFeatureMojo.java#L244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/blob/master/src/main/java/org/apache/sling/feature/maven/mojos/AbstractFeatureMojo.java#L244&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Any objections to changing that line to something like below to properly resolve the 2 paths?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File targetDir = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.project.getBasedir().toPath().resolve(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.project.getBuild().getDirectory()).toFile();&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;UPDATE: I&apos;ve created&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10069&quot; title=&quot;The generated features target dir is created in the wrong place&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10069&quot;&gt;&lt;del&gt;SLING-10069&lt;/del&gt;&lt;/a&gt;&#160; for tracking the problem.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13353139">SLING-10069</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lyiw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10020] importing date property using sling post servlet fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-10020</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The issue happens when the import operation of the sling post servlet(2.3.26) is used:&lt;/p&gt;

&lt;p&gt;An imported data-structure contains a date like &quot;2018-09-18T22:00:00.000+0000&quot; results in a nullpointer beeing thrown without any clear logging.&lt;/p&gt;

&lt;p&gt;This happens because&#160;org.apache.sling.jcr.contentloader.internal.readers.JsonReader(2.2.6) accepts it as a date(line 280) and in org.apache.sling.jcr.contentloader.internal.DefaultContentCreator(2.2.6)&#160; (line 309) it tries to parse the date-string into a calendar object which fails bacause it expects a string like &quot;2018-09-18T22:00:00.000+00:00&quot; or &quot;2018-09-18T22:00:00.000Z&quot;.&lt;br/&gt;
should there be a fallback like in version 2.2.4? This is still present in version 2.4.0.&lt;/p&gt;

&lt;p&gt;I also noticed org.apache.sling.jcr.contentloader.internal.readers.JsonReader(2.2.6) doesnt accept&#160;&quot;2018-09-18T22:00:00.000Z&quot;&#160; as a date string.&#160;Should the regex in&#160;org.apache.sling.jcr.contentloader.internal.readers.JsonReader be adapted to also allow strings like &quot;2018-09-18T22:00:00.000Z&quot;? The regex is still the same in version 2.4.0.&lt;/p&gt;

&lt;p&gt;Should the logging be improved?&lt;/p&gt;</description>
                <environment>AEM 6.5.6</environment>
        <key id="13347381">SLING-10020</key>
            <summary>importing date property using sling post servlet fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jdas">Johannes Das</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Dec 2020 15:42:52 +0000</created>
                <updated>Tue, 12 Jan 2021 23:56:02 +0000</updated>
                                            <version>Servlets Post 2.3.26</version>
                    <version>JCR ContentLoader 2.2.4</version>
                    <version>JCR ContentLoader 2.4.0</version>
                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17260505" author="rombert" created="Thu, 7 Jan 2021 13:49:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdas&quot; class=&quot;user-hover&quot; rel=&quot;jdas&quot;&gt;jdas&lt;/a&gt; - do I understand correctly that this is a regression for the JCR ContentLoader, and that the process worked with 2.2.4 but not anymore with 2.2.6?&lt;/p&gt;</comment>
                            <comment id="17263772" author="enorman" created="Tue, 12 Jan 2021 23:18:43 +0000"  >&lt;p&gt;FYI: The change history shows that the date parsing was changed to the&#160;ISO8601 format for the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7590&quot; title=&quot;Content Loaders not respecting time zone for Dates&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7590&quot;&gt;&lt;del&gt;SLING-7590&lt;/del&gt;&lt;/a&gt; fix.&lt;/p&gt;

&lt;p&gt;Seems like a workaround for the &quot;Legacy ECMA date format&quot; may still be needed in the various content parsers since the DefaultGetServlet still has &quot;ecmaSupport&quot; set as true by default?&lt;/p&gt;

&lt;p&gt;Alternately, you may consider changing the configuration of the DefaultGetServlet in your deployment to turn off the &quot;ecmaSupport&quot; flag which should get you ISO8601 formatted dates in the json output which may make it less confusing.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17263788" author="enorman" created="Tue, 12 Jan 2021 23:56:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7844&quot; title=&quot;Format change in JSON date format due to SLING-7670&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7844&quot;&gt;&lt;del&gt;SLING-7844&lt;/del&gt;&lt;/a&gt; is also related to the discussion&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13153065">SLING-7590</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13180389">SLING-7844</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lqwg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10018] As a developer I want to access the selectionset in my fetcher context</title>
                <link>https://issues.apache.org/jira/browse/SLING-10018</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently we don&apos;t have any object to wrap SelectionSet which we need to optimize result fields.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13347174">SLING-10018</key>
            <summary>As a developer I want to access the selectionset in my fetcher context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="petitbear68">Thierry Yg&#233;</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Dec 2020 16:47:46 +0000</created>
                <updated>Tue, 25 May 2021 11:48:51 +0000</updated>
                            <resolved>Thu, 7 Jan 2021 17:29:32 +0000</resolved>
                                                    <fixVersion>GraphQL Core 0.0.10</fixVersion>
                                    <component>GraphQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17260683" author="radu.cotescu" created="Thu, 7 Jan 2021 17:29:33 +0000"  >&lt;p&gt;Merged in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-graphql-core/commit/1975b40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 1975b40&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lpmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10012] Lookup of precompiled template files does not work</title>
                <link>https://issues.apache.org/jira/browse/SLING-10012</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a resource type &lt;tt&gt;a&lt;/tt&gt; with a bundled script &lt;tt&gt;a.html&lt;/tt&gt; which contains&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;sly data-sly-use.simpleTemplate=&lt;span class=&quot;code-quote&quot;&gt;&quot;simple.html&quot;&lt;/span&gt;
       data-sly-call=&lt;span class=&quot;code-quote&quot;&gt;&quot;${simpleTemplate.simple}&quot;&lt;/span&gt;&amp;gt;&amp;lt;/sly&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;I have an extended resource type &lt;tt&gt;myA&lt;/tt&gt; which has &lt;tt&gt;a&lt;/tt&gt; as resourceSuperType. That one contains &lt;tt&gt;simple.html&lt;/tt&gt; as precompiled script file. Still the lookup when trying to render a resource based on &lt;tt&gt;myA&lt;/tt&gt; fails with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.sling.scripting.sightly.SightlyException: No use provider could resolve identifier simple.html
	at org.apache.sling.scripting.sightly.impl.engine.extension.use.UseRuntimeExtension.call(UseRuntimeExtension.java:79) [org.apache.sling.scripting.sightly:1.4.6.140]
	at org.apache.sling.scripting.sightly.impl.engine.runtime.RenderContextImpl.call(RenderContextImpl.java:72) [org.apache.sling.scripting.sightly:1.4.6.140]
	at org.apache.sling.scripting.sightly.&amp;lt;a&amp;gt;__002e__html.render(container__002e__html.java:62)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It works fine when trying to render a resource directly leveraging &lt;tt&gt;a&lt;/tt&gt;, but in that case obviously the bundled &lt;tt&gt;a/simple.html&lt;/tt&gt; is used&lt;br/&gt;
Seems that the fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9718&quot; title=&quot;Relative paths for bundled HTL template files are not correctly handled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9718&quot;&gt;&lt;del&gt;SLING-9718&lt;/del&gt;&lt;/a&gt; has not yet covered this use case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13346841">SLING-10012</key>
            <summary>Lookup of precompiled template files does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Dec 2020 18:20:23 +0000</created>
                <updated>Tue, 11 May 2021 13:01:33 +0000</updated>
                            <resolved>Thu, 4 Mar 2021 14:36:55 +0000</resolved>
                                    <version>Scripting HTL Engine 1.4.6-1.4.0</version>
                                    <fixVersion>Scripting HTL Engine 1.4.8-1.4.0</fixVersion>
                    <fixVersion>Scripting HTL Testing Content 1.0.28-1.4.0</fixVersion>
                    <fixVersion>Scripting HTL Testing 1.0.30-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17252430" author="kwin" created="Sun, 20 Dec 2020 13:21:15 +0000"  >&lt;p&gt;The problem is that &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/e9ef63d41be9637285d779529e381357a88e7cce/src/main/java/org/apache/sling/scripting/sightly/impl/engine/bundled/BundledUnitManagerImpl.java#L115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/e9ef63d41be9637285d779529e381357a88e7cce/src/main/java/org/apache/sling/scripting/sightly/impl/engine/bundled/BundledUnitManagerImpl.java#L115&lt;/a&gt; is called with &lt;tt&gt;identifier&lt;/tt&gt; &lt;tt&gt;simple.html&lt;/tt&gt; which leads to the &lt;tt&gt;defaultLocations&lt;/tt&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;/apps/myA/simple.html and&lt;/li&gt;
	&lt;li&gt;myA/simple.html&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The problem is that only the bundle containing precompiled source &lt;tt&gt;a.html&lt;/tt&gt; is returned by the &lt;tt&gt;bundleRenderUnit.getTypeProviders().getBundle&lt;/tt&gt;, which doesn&apos;t provide the class with any of the names generated from the &lt;tt&gt;defaultLocations&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The bundle providing the &lt;tt&gt;myA/simple.html&lt;/tt&gt; is never returned by &lt;tt&gt;bundleRenderUnit.getTypeProviders()&lt;/tt&gt;, therefore the right class loader is never tried to load the bundled script &quot;simple.html&quot; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/e9ef63d41be9637285d779529e381357a88e7cce/src/main/java/org/apache/sling/scripting/sightly/impl/engine/bundled/BundledUnitManagerImpl.java#L148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/e9ef63d41be9637285d779529e381357a88e7cce/src/main/java/org/apache/sling/scripting/sightly/impl/engine/bundled/BundledUnitManagerImpl.java#L148&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Also later in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/e9ef63d41be9637285d779529e381357a88e7cce/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/use/RenderUnitProvider.java#L136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/e9ef63d41be9637285d779529e381357a88e7cce/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/use/RenderUnitProvider.java#L136&lt;/a&gt; the &lt;tt&gt;renderUnitResource&lt;/tt&gt; is a wrapper around a &lt;tt&gt;ServletResource&lt;/tt&gt;, which encapsulates a &lt;tt&gt;BundledScriptServlet&lt;/tt&gt; whose &lt;tt&gt;getInputStream()&lt;/tt&gt; is called in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/blob/f33ef4d267240d04b1abbbd9086d3a414532e4d1/src/main/java/org/apache/sling/servlets/resolver/internal/resource/ServletResource.java#L125&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/blob/f33ef4d267240d04b1abbbd9086d3a414532e4d1/src/main/java/org/apache/sling/servlets/resolver/internal/resource/ServletResource.java#L125&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;That will only return anything but null if its executable (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/blob/f33ef4d267240d04b1abbbd9086d3a414532e4d1/src/main/java/org/apache/sling/servlets/resolver/bundle/tracker/internal/BundledScriptServlet.java#L91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/blob/f33ef4d267240d04b1abbbd9086d3a414532e4d1/src/main/java/org/apache/sling/servlets/resolver/bundle/tracker/internal/BundledScriptServlet.java#L91&lt;/a&gt;) is a &lt;tt&gt;Script&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/ace78bd46a4eb2bfe41df15223294aef097a60e9/src/main/java/org/apache/sling/scripting/core/impl/bundled/Script.java#L79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/ace78bd46a4eb2bfe41df15223294aef097a60e9/src/main/java/org/apache/sling/scripting/core/impl/bundled/Script.java#L79&lt;/a&gt;) but not if it is a &lt;tt&gt;PrecompiledScript&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/ace78bd46a4eb2bfe41df15223294aef097a60e9/src/main/java/org/apache/sling/scripting/core/impl/bundled/PrecompiledScript.java#L34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/ace78bd46a4eb2bfe41df15223294aef097a60e9/src/main/java/org/apache/sling/scripting/core/impl/bundled/PrecompiledScript.java#L34&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17252484" author="kwin" created="Sun, 20 Dec 2020 18:16:27 +0000"  >&lt;p&gt;According to &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver#so-how-do-i-deploy-my-scripts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver#so-how-do-i-deploy-my-scripts&lt;/a&gt; I can put the scripts to src/main/scripts to precompile them. It seems that HTL precompiled templates are not supported, so I have to put them to src/main/resources/javax.script to make them discoverable (compare with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/ace78bd46a4eb2bfe41df15223294aef097a60e9/src/main/java/org/apache/sling/scripting/core/impl/bundled/BundleRenderUnitFinderImpl.java#L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/ace78bd46a4eb2bfe41df15223294aef097a60e9/src/main/java/org/apache/sling/scripting/core/impl/bundled/BundleRenderUnitFinderImpl.java#L92&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;If that is a general limitation and not a bug, this should be clearly documented in&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver#so-how-do-i-deploy-my-scripts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver#so-how-do-i-deploy-my-scripts&lt;/a&gt;&lt;br/&gt;
and &lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-scriptingbundle-maven-plugin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-scriptingbundle-maven-plugin&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17252802" author="kwin" created="Mon, 21 Dec 2020 12:21:27 +0000"  >&lt;p&gt;Added failing IT in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-bundle-tracker-it/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-bundle-tracker-it/pull/1&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17258959" author="radu.cotescu" created="Tue, 5 Jan 2021 14:27:37 +0000"  >&lt;p&gt;Back from the winter holidays. Thanks for the investigation, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, I&apos;ll try to have a look at this issue later this afternoon (CET).&lt;/p&gt;</comment>
                            <comment id="17259051" author="radu.cotescu" created="Tue, 5 Jan 2021 17:00:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, I see what the problem is and we&apos;ve encountered something similar in the JS Use Provider too. There are two possibilities when starting a rendering chain:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;the resource type of the accessed resource performs the rendering directly, via its own resource type label script&lt;/li&gt;
	&lt;li&gt;the resource type of the accessed resource delegates the rendering to a parent resource type (&lt;tt&gt;sling:resourceSuperType&lt;/tt&gt; or via the &lt;tt&gt;extends&lt;/tt&gt; file specific to bundled scripts)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Your example falls into the second category. For this there&apos;s indeed a bug in the implementation, in the sense that only the &lt;tt&gt;TypeProvider&lt;/tt&gt; chain of the resource type that drives the rendering is queried for script dependencies. However, the correct approach would be to always start from the &lt;tt&gt;TypeProvider&lt;/tt&gt; chain of the current resource type, rather than the one driving the rendering, and do a fallback to the latter if no dependency was found.&lt;/p&gt;</comment>
                            <comment id="17259865" author="kwin" created="Wed, 6 Jan 2021 16:40:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu&quot; class=&quot;user-hover&quot; rel=&quot;radu&quot;&gt;radu&lt;/a&gt; I was assuming that both &lt;tt&gt;extends&lt;/tt&gt; and &lt;tt&gt;provides&lt;/tt&gt; only drive requirements/capabilities (and therefore are not mandatory to have). This seems to be a case where the extends actually affects the run time functionality. It is worth mentioning that explicitly at &lt;a href=&quot;https://sling.apache.org/components/scriptingbundle-maven-plugin/usage.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/components/scriptingbundle-maven-plugin/usage.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Also mention the case where the &lt;tt&gt;sling:resourceSuperType&lt;/tt&gt; is set as resource property and you are using precompiled scripts. Are precompiled scripts leveraging both the &lt;tt&gt;extends&lt;/tt&gt; file and the property &lt;tt&gt;sling:resourceSuperType&lt;/tt&gt;? Which one takes precedence?&lt;/p&gt;</comment>
                            <comment id="17263223" author="radu.cotescu" created="Tue, 12 Jan 2021 10:34:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was assuming that both extends and provides only drive requirements/capabilities (and therefore are not mandatory to have). This seems to be a case where the extends actually affects the run time functionality. It is worth mentioning that explicitly at &lt;a href=&quot;https://sling.apache.org/components/scriptingbundle-maven-plugin/usage.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/components/scriptingbundle-maven-plugin/usage.html&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &lt;tt&gt;extends&lt;/tt&gt; and &lt;tt&gt;requires&lt;/tt&gt; files are mandatory when using bundled scripts to create the resource type hierarchy:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;extends&lt;/tt&gt; is the equivalent of &lt;tt&gt;sling:resourceSuperType&lt;/tt&gt; when deploying scripts into the resource tree&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;requires&lt;/tt&gt; makes sure to add the correct &lt;tt&gt;TypeProvider&lt;/tt&gt; into the hierarchy when searching for a script to delegate to (e.g. &lt;tt&gt;data-sly-include&lt;/tt&gt;, &lt;tt&gt;sling:call&lt;/tt&gt;)&lt;/li&gt;
&lt;/ol&gt;


&lt;blockquote&gt;&lt;p&gt;Also mention the case where the &lt;tt&gt;sling:resourceSuperType&lt;/tt&gt; is set as resource property and you are using precompiled scripts. Are precompiled scripts leveraging both the &lt;tt&gt;extends&lt;/tt&gt; file and the property &lt;tt&gt;sling:resourceSuperType&lt;/tt&gt;? Which one takes precedence?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What do you mean by leveraging both? Do you have an example?&lt;/p&gt;</comment>
                            <comment id="17263242" author="kwin" created="Tue, 12 Jan 2021 10:53:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;The&#160;&lt;tt&gt;extends&lt;/tt&gt;&#160;and&#160;&lt;tt&gt;requires&lt;/tt&gt;&#160;files are mandatory when using bundled scripts to create the resource type hierarchy:&lt;br/&gt;
 ...&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;requires&lt;/tt&gt;&#160;makes sure to add the correct&#160;&lt;tt&gt;TypeProvider&lt;/tt&gt;&#160;into the hierarchy when searching for a script to delegate to (e.g.&#160;&lt;tt&gt;data-sly-include&lt;/tt&gt;,&#160;&lt;tt&gt;sling:call&lt;/tt&gt;)&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t really follow why this is mandatory, just imagine you combine a non-bundled resource type &lt;tt&gt;myAggregate&lt;/tt&gt; using via &lt;tt&gt;data-sly-include&lt;/tt&gt; to a bundled and precompiled resource type &lt;tt&gt;myBundledResource1&lt;/tt&gt;. In that case you clearly don&apos;t have a &lt;tt&gt;requires&lt;/tt&gt; file for &lt;tt&gt;myAggregate&lt;/tt&gt; and it should still work.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What do you mean by leveraging both? Do you have an example?&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;Having a JCR Resource Provider Factory for &lt;tt&gt;/apps&lt;/tt&gt; and in there having &lt;tt&gt;/apps/my/type/sling:resourceSuperType&lt;/tt&gt; set to some value. In addition have the precompiled script for &lt;tt&gt;/apps/my/type/type.html&lt;/tt&gt;. Why is the &lt;tt&gt;extends&lt;/tt&gt; mandatory in that case, as it would only duplicate the information already provided via &lt;tt&gt;/apps/my/type/sling:resourceSuperType&lt;/tt&gt;? &lt;/p&gt;</comment>
                            <comment id="17263288" author="radu.cotescu" created="Tue, 12 Jan 2021 12:11:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t really follow why this is mandatory, just imagine you combine a non-bundled resource type myAggregate using via data-sly-include to a bundled and precompiled resource type myBundledResource1. In that case you clearly don&apos;t have a requires file for myAggregate and it should still work.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, I was a bit ambiguous: &lt;tt&gt;requires&lt;/tt&gt; is not mandatory, but it helps with creating an explicit dependency chain. &lt;tt&gt;extends&lt;/tt&gt; on the other hand is, otherwise you won&apos;t be able to solve scripts coming from the super type, nor use the super type&apos;s main script to drive the rendering.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Having a JCR Resource Provider Factory for /apps and in there having /apps/my/type/sling:resourceSuperType set to some value. In addition have the precompiled script for /apps/my/type/type.html. Why is the extends mandatory in that case, as it would only duplicate the information already provided via /apps/my/type/sling:resourceSuperType?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In this case the &lt;tt&gt;extends&lt;/tt&gt; file is not mandatory. It would if all the script deployment for your setup would rely solely on bundled scripts, in which case the &lt;tt&gt;extends&lt;/tt&gt; file would basically help the &lt;tt&gt;o.a.s.servlets.resolver&lt;/tt&gt; to correctly define the &lt;tt&gt;ServletResources&lt;/tt&gt; hierarchy. If you have a merged view (e.g. parent folder of the &lt;tt&gt;ServletResource&lt;/tt&gt; defined via JCR and the &lt;tt&gt;ServletResource&lt;/tt&gt; created by the resolver, based on a bundled script), the Servlets Resolver should take into consideration your &lt;tt&gt;sling:resourceSuperType&lt;/tt&gt; value.&lt;/p&gt;</comment>
                            <comment id="17281141" author="radu.cotescu" created="Mon, 8 Feb 2021 15:33:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Slyshkova&quot; class=&quot;user-hover&quot; rel=&quot;Slyshkova&quot;&gt;Slyshkova&lt;/a&gt;, aren&apos;t you in the exact same situation like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; reported, namely 2. from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10012?focusedCommentId=17259051&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17259051&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this&lt;/a&gt; comment?&lt;/p&gt;</comment>
                            <comment id="17284688" author="slyshkova" created="Mon, 15 Feb 2021 12:14:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu&quot; class=&quot;user-hover&quot; rel=&quot;radu&quot;&gt;radu&lt;/a&gt; Yes, you are right. It&apos;s in fact the same scenario. I&apos;m removing the comment since it doesn&apos;t bring any new details.&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17284760" author="radu.cotescu" created="Mon, 15 Feb 2021 14:50:19 +0000"  >&lt;p&gt;As soon as &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9999&quot; title=&quot;Remove cyclic dependency between scripting and servlets features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9999&quot;&gt;&lt;del&gt;SLING-9999&lt;/del&gt;&lt;/a&gt; is addressed I&apos;ll proceed with a fix for this issue too. They&apos;re unrelated, but I cannot release a new HTL engine version since the engine consumes APIs under discussion.&lt;/p&gt;</comment>
                            <comment id="17295306" author="radu.cotescu" created="Thu, 4 Mar 2021 14:36:55 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/192d953&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 192d953&lt;/a&gt;. Depends on the fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10185&quot; title=&quot;Allow a ServletResource to adapt to a BundledRenderUnit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10185&quot;&gt;&lt;del&gt;SLING-10185&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13345632">SLING-9999</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13362278">SLING-10185</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13325948">SLING-9718</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lnkg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10006] Parameter &quot;:sendError&quot; presence should not replace the PostResponse object</title>
                <link>https://issues.apache.org/jira/browse/SLING-10006</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The&#160;PostResponseWithErrorHandling implementation is hardcoded to an HtmlResponse when the &quot;:sendError&quot; parameter is &quot;true&quot;.&#160; This breaks the use cases where a Json response is expected.&#160; It also breaks the use case where a custom PostResponseCreator component needs to do something different without changing the error handling behavior.&lt;/p&gt;

&lt;p&gt;For example, this request should return a JSON success response instead of HTML:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl -i -H &lt;span class=&quot;code-quote&quot;&gt;&quot;Accept: application/json&quot;&lt;/span&gt; -F:sendError=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; -F:nameHint=&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt; -Ftext=&lt;span class=&quot;code-quote&quot;&gt;&quot;some body text content&quot;&lt;/span&gt; http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/content&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13346172">SLING-10006</key>
            <summary>Parameter &quot;:sendError&quot; presence should not replace the PostResponse object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Dec 2020 18:06:15 +0000</created>
                <updated>Tue, 19 Jan 2021 21:18:01 +0000</updated>
                            <resolved>Tue, 12 Jan 2021 19:38:31 +0000</resolved>
                                                    <fixVersion>Servlets POST 2.4.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                                        <aggregatetimeremainingestimate seconds="0">0h</aggregatetimeremainingestimate>
                                        <aggregatetimespent seconds="4200">1h 10m</aggregatetimespent>
                                    <comments>
                            <comment id="17249908" author="enorman" created="Tue, 15 Dec 2020 20:06:55 +0000"  >&lt;p&gt;I prepared a fix in the PR at: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/pull/8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If there is no negative feedback in a few days then I will merge the fix into the mainline.&lt;/p&gt;</comment>
                            <comment id="17263643" author="enorman" created="Tue, 12 Jan 2021 19:38:31 +0000"  >&lt;p&gt;Merged PR to fix it at:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-post/commit/c820ce9c746f7cd15b2a418255d1face91b60975&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-post/commit/c820ce9c746f7cd15b2a418255d1face91b60975&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13353366">SLING-10073</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="13353384">SLING-10074</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ljfs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-10004] Feature extension feature-internal-data should not be required</title>
                <link>https://issues.apache.org/jira/browse/SLING-10004</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The new introduced extension feature-internal-data for managing feature model internal data like origins of properties/variables should not be required&lt;/p&gt;</description>
                <environment></environment>
        <key id="13346140">SLING-10004</key>
            <summary>Feature extension feature-internal-data should not be required</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Dec 2020 15:14:51 +0000</created>
                <updated>Wed, 6 Jan 2021 15:05:41 +0000</updated>
                            <resolved>Tue, 15 Dec 2020 15:31:52 +0000</resolved>
                                    <version>Feature Model 1.2.16</version>
                                    <fixVersion>Feature Model 1.2.18</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17249749" author="cziegeler" created="Tue, 15 Dec 2020 15:31:52 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/commit/b96c13d9668c2ba0880ff3ddb77687f07416e941&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/commit/b96c13d9668c2ba0880ff3ddb77687f07416e941&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lj8o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9992] RepoInit: no documentation regarding privilege registration</title>
                <link>https://issues.apache.org/jira/browse/SLING-9992</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;documentation &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/repository-initialization.html&lt;/a&gt; doesn&apos;t describe how to register privileges. support for custom privileges has been added with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7227&quot; title=&quot;Repo Init: Add ability to register custom privileges&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7227&quot;&gt;&lt;del&gt;SLING-7227&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;if test-99.txt with repoinit-parse is correct the format is as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
register privilege crx:replicate
register privilege priv
register &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; privilege abstract_priv
register privilege priv with declared_aggregate_priv
register privilege priv with declared_aggregate_priv1,declared_aggregate_priv2
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13345299">SLING-9992</key>
            <summary>RepoInit: no documentation regarding privilege registration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Dec 2020 13:16:53 +0000</created>
                <updated>Thu, 10 Dec 2020 13:21:14 +0000</updated>
                                                                            <component>Documentation</component>
                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13275701">SLING-8942</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0le20:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9990] Typo in repoinit configuration PID</title>
                <link>https://issues.apache.org/jira/browse/SLING-9990</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandler.java#L32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandler.java#L32&lt;/a&gt; contains a typo (space at the end)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13345057">SLING-9990</key>
            <summary>Typo in repoinit configuration PID</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Dec 2020 11:51:26 +0000</created>
                <updated>Mon, 17 May 2021 11:38:57 +0000</updated>
                            <resolved>Wed, 9 Dec 2020 13:16:22 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lckg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9988] Stream not closed</title>
                <link>https://issues.apache.org/jira/browse/SLING-9988</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;ConfigurationEntryHandler and JsonConfigurationEntryHandler are not closing streams when reading configurations&lt;/p&gt;</description>
                <environment></environment>
        <key id="13345001">SLING-9988</key>
            <summary>Stream not closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Dec 2020 06:53:40 +0000</created>
                <updated>Wed, 9 Dec 2020 06:55:56 +0000</updated>
                            <resolved>Wed, 9 Dec 2020 06:55:56 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.24</version>
                                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lc80:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9987] Converter throws a ClassCastException for RepoInit without scripts or references field</title>
                <link>https://issues.apache.org/jira/browse/SLING-9987</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Converter fails with a ClassCastException on encountering a RepoInit script that doesn&apos;t have a &quot;&lt;b&gt;scripts&lt;/b&gt;&quot;&#160;or &quot;&lt;b&gt;references&lt;/b&gt;&quot; field.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.sling:sling-feature-converter-maven-plugin:1.0.10:convert-cp (convert-cp) on project com.adobe.fmdita: Content Package Converter Exception
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
&#160; &#160; at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
&#160; &#160; at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
&#160; &#160; at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
&#160; &#160; at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
&#160; &#160; at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)
&#160; &#160; at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)
&#160; &#160; at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)
&#160; &#160; at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
&#160; &#160; at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
&#160; &#160; at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
&#160; &#160; at java.lang.reflect.Method.invoke (Method.java:498)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
Caused by: org.apache.maven.plugin.MojoExecutionException: Content Package Converter Exception
&#160; &#160; at org.apache.sling.cpconverter.maven.mojos.ConvertCPMojo.execute (ConvertCPMojo.java:291)
&#160; &#160; at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
&#160; &#160; at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
&#160; &#160; at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
&#160; &#160; at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
&#160; &#160; at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
&#160; &#160; at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)
&#160; &#160; at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)
&#160; &#160; at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)
&#160; &#160; at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
&#160; &#160; at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
&#160; &#160; at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
&#160; &#160; at java.lang.reflect.Method.invoke (Method.java:498)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
Caused by: java.lang.ClassCastException: [Ljava.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;; cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to [Ljava.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&#160; &#160; at org.apache.sling.feature.cpconverter.handlers.AbstractConfigurationEntryHandler.handle (AbstractConfigurationEntryHandler.java:83)
&#160; &#160; at org.apache.sling.feature.cpconverter.ContentPackage2FeatureModelConverter.onFile (ContentPackage2FeatureModelConverter.java:366)
&#160; &#160; at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse (BaseVaultPackageScanner.java:108)
&#160; &#160; at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse (BaseVaultPackageScanner.java:100)
&#160; &#160; at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse (BaseVaultPackageScanner.java:100)
&#160; &#160; at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse (BaseVaultPackageScanner.java:100)
&#160; &#160; at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse (BaseVaultPackageScanner.java:100)
&#160; &#160; at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse (BaseVaultPackageScanner.java:100)
&#160; &#160; at org.apache.sling.feature.cpconverter.vltpkg.BaseVaultPackageScanner.traverse (BaseVaultPackageScanner.java:87)
&#160; &#160; at org.apache.sling.feature.cpconverter.ContentPackage2FeatureModelConverter.secondPass (ContentPackage2FeatureModelConverter.java:211)
&#160; &#160; at org.apache.sling.feature.cpconverter.ContentPackage2FeatureModelConverter.convert (ContentPackage2FeatureModelConverter.java:159)
&#160; &#160; at org.apache.sling.cpconverter.maven.mojos.ConvertCPMojo.execute (ConvertCPMojo.java:257)
&#160; &#160; at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
&#160; &#160; at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
&#160; &#160; at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
&#160; &#160; at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
&#160; &#160; at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
&#160; &#160; at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
&#160; &#160; at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
&#160; &#160; at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)
&#160; &#160; at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)
&#160; &#160; at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)
&#160; &#160; at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
&#160; &#160; at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
&#160; &#160; at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
&#160; &#160; at java.lang.reflect.Method.invoke (Method.java:498)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
&#160; &#160; at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http:&lt;span class=&quot;code-comment&quot;&gt;//cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
&lt;/span&gt;[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR] &#160; mvn &amp;lt;args&amp;gt; -rf :com.adobe.fmdita&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13344897">SLING-9987</key>
            <summary>Converter throws a ClassCastException for RepoInit without scripts or references field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="ankitr42">Ankit Rajpoot</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Dec 2020 18:55:57 +0000</created>
                <updated>Fri, 15 Jan 2021 21:51:52 +0000</updated>
                            <resolved>Wed, 9 Dec 2020 06:39:42 +0000</resolved>
                                    <version>Feature Model Converter Plugin 1.0.10</version>
                                    <fixVersion>Feature Model Converter Plugin 1.0.12</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17246262" author="ankitr42" created="Wed, 9 Dec 2020 03:06:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/38&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/38&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17246306" author="cziegeler" created="Wed, 9 Dec 2020 06:26:10 +0000"  >&lt;p&gt;This looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-6100&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FELIX-6100&lt;/a&gt; - so for some reason an old Apache Felix Converter is used here&lt;/p&gt;</comment>
                            <comment id="17246311" author="cziegeler" created="Wed, 9 Dec 2020 06:39:36 +0000"  >&lt;p&gt;I explicitely added a dependency to the latest converter : &lt;a href=&quot;https://github.com/apache/sling-feature-converter-maven-plugin/commit/8a0ae81ff7cefc239057911c65c84b7580f6212e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-feature-converter-maven-plugin/commit/8a0ae81ff7cefc239057911c65c84b7580f6212e&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lbkw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9984] HTL Testing: Errors in date and currency formatting tests with Java 11</title>
                <link>https://issues.apache.org/jira/browse/SLING-9984</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With Java 11 on Mac OS&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn --version
Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)
Maven home: /usr/local/Cellar/maven/3.6.3/libexec
Java version: 11.0.9.1, vendor: AdoptOpenJDK, runtime: /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home
Default locale: en_DE, platform encoding: UTF-8
OS name: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac os x&quot;&lt;/span&gt;, version: &lt;span class=&quot;code-quote&quot;&gt;&quot;10.16&quot;&lt;/span&gt;, arch: &lt;span class=&quot;code-quote&quot;&gt;&quot;x86_64&quot;&lt;/span&gt;, family: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; I get the following errors when running &lt;tt&gt;mvn verify&lt;/tt&gt; on &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running io.sightly.tck.TestsRunner
Tests run: 518, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 1.977 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in io.sightly.tck.TestsRunner
Expression Filters: @format - #format-date-12(io.sightly.tck.tests.TestBuilder$1)  Time elapsed: 0.004 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: Expected value &lt;span class=&quot;code-quote&quot;&gt;&apos;Sonntag, 1 Dez 1918&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; selector &lt;span class=&quot;code-quote&quot;&gt;&apos;#format-date-12&apos;&lt;/span&gt;. Instead we got &lt;span class=&quot;code-quote&quot;&gt;&apos;Sonntag, 1 Dez. 1918&apos;&lt;/span&gt;. Please check the expected markup from /testfiles/output/exprlang/filters.html.
	at io.sightly.tck.tests.TestBuilder$1.runTest(TestBuilder.java:146)
...
Expression Filters: @format - #format-number-11(io.sightly.tck.tests.TestBuilder$1)  Time elapsed: 0.001 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: Expected value &lt;span class=&quot;code-quote&quot;&gt;&apos;CHF 1&apos;&lt;/span&gt;000.14&lt;span class=&quot;code-quote&quot;&gt;&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; selector &apos;&lt;/span&gt;#format-number-11&lt;span class=&quot;code-quote&quot;&gt;&apos;. Instead we got &apos;&lt;/span&gt;CHF 1&#8217;000.14&apos;. Please check the expected markup from /testfiles/output/exprlang/filters.html.
	at io.sightly.tck.tests.TestBuilder$1.runTest(TestBuilder.java:146)

Failed tests:
  TestBuilder$1.runTest:146 Expected value &lt;span class=&quot;code-quote&quot;&gt;&apos;Sonntag, 1 Dez 1918&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; selector &lt;span class=&quot;code-quote&quot;&gt;&apos;#format-date-12&apos;&lt;/span&gt;. Instead we got &lt;span class=&quot;code-quote&quot;&gt;&apos;Sonntag, 1 Dez. 1918&apos;&lt;/span&gt;. Please check the expected markup from /testfiles/output/exprlang/filters.html.
  TestBuilder$1.runTest:146 Expected value &lt;span class=&quot;code-quote&quot;&gt;&apos;CHF 1&apos;&lt;/span&gt;000.14&lt;span class=&quot;code-quote&quot;&gt;&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; selector &apos;&lt;/span&gt;#format-number-11&lt;span class=&quot;code-quote&quot;&gt;&apos;. Instead we got &apos;&lt;/span&gt;CHF 1&#8217;000.14&apos;. Please check the expected markup from /testfiles/output/exprlang/filters.html.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13344821">SLING-9984</key>
            <summary>HTL Testing: Errors in date and currency formatting tests with Java 11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Dec 2020 12:14:42 +0000</created>
                <updated>Tue, 11 May 2021 13:01:35 +0000</updated>
                            <resolved>Tue, 8 Dec 2020 12:36:00 +0000</resolved>
                                    <version>Scripting HTL Testing 1.0.28-1.4.0</version>
                                    <fixVersion>Scripting HTL Testing 1.0.30-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17245858" author="kwin" created="Tue, 8 Dec 2020 12:20:34 +0000"  >&lt;p&gt;The test are part of the HTL TCK in &lt;a href=&quot;https://github.com/adobe/htl-tck/blob/e5495b59902cfdf0e40dcbee92eb529733e1a889/src/main/resources/testfiles/output/exprlang/filters.html#L57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/adobe/htl-tck/blob/e5495b59902cfdf0e40dcbee92eb529733e1a889/src/main/resources/testfiles/output/exprlang/filters.html#L57&lt;/a&gt;&#160;and &lt;a href=&quot;https://github.com/adobe/htl-tck/blob/e5495b59902cfdf0e40dcbee92eb529733e1a889/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L57.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/adobe/htl-tck/blob/e5495b59902cfdf0e40dcbee92eb529733e1a889/src/main/resources/testfiles/scripts/exprlang/filters/filters.html#L57.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The former assumes that the Locale DE formats pattern &lt;tt&gt;MMM&lt;/tt&gt; without the trailing dot. The latter assumes that thousands separator for Locale &quot;de_CH&quot; is &lt;tt&gt;&apos;&lt;/tt&gt; but in fact it is &lt;tt&gt;&#8217;&lt;/tt&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17245861" author="kwin" created="Tue, 8 Dec 2020 12:22:21 +0000"  >&lt;p&gt;It seems the formatting has changed &lt;a href=&quot;https://stackoverflow.com/questions/50411064/simpledateformat-with-german-locale-java-8-vs-java-10/50412644&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/50411064/simpledateformat-with-german-locale-java-8-vs-java-10/50412644&lt;/a&gt; in the context of &lt;a href=&quot;http://openjdk.java.net/jeps/252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/252&lt;/a&gt; with Java 9. It would probably be good to enforce either Java 8 or Java 11 for running the IT and don&apos;t allow the other version! Alternatively one can leverage the system property &lt;tt&gt;java.locale.providers=COMPAT&lt;/tt&gt; to fall back even in Java 11 to the Java 8 behaviour.&lt;/p&gt;</comment>
                            <comment id="17245864" author="kwin" created="Tue, 8 Dec 2020 12:36:00 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/commit/09b67343e22d06db7cbe01e8c3e8342df1d01d63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/commit/09b67343e22d06db7cbe01e8c3e8342df1d01d63&lt;/a&gt; by setting the system property to enforce Java 8 formatting even on Java &amp;gt;= 9&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13336012">SLING-9839</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lb48:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9975] RepPolicyEntryHandler ignores restrictions defined in jackrabbit2 format</title>
                <link>https://issues.apache.org/jira/browse/SLING-9975</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;RepPolicyEntryHandler&lt;/tt&gt; will read restrictions only from the &lt;tt&gt;rep:restrictions&lt;/tt&gt; child node (primarytype &lt;tt&gt;rep:Restrictions&lt;/tt&gt;):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/ffc6bb990dfaf82c477a28ad4b87b0c12859b743/src/main/java/org/apache/sling/feature/cpconverter/handlers/RepPolicyEntryHandler.java#L179-L188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/ffc6bb990dfaf82c477a28ad4b87b0c12859b743/src/main/java/org/apache/sling/feature/cpconverter/handlers/RepPolicyEntryHandler.java#L179-L188&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;according to the documentation in Jackrabbit Oak the old jackrabbit2-variant of defining restrictions is still supported from the node type definition of an access control entry:&lt;br/&gt;
&lt;a href=&quot;http://jackrabbit.apache.org/oak/docs/security/authorization/restriction.html#representation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/oak/docs/security/authorization/restriction.html#representation&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;this should be reflected in the handler in order not to generate repo-init statements that unintentionally create a different access control setup and ultimately alter the effective permissions present in the given repository.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13344013">SLING-9975</key>
            <summary>RepPolicyEntryHandler ignores restrictions defined in jackrabbit2 format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2020 13:14:26 +0000</created>
                <updated>Mon, 17 May 2021 11:38:40 +0000</updated>
                            <resolved>Wed, 20 Jan 2021 14:55:32 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l64w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9972] Sling parent pom references SNAPSHOT</title>
                <link>https://issues.apache.org/jira/browse/SLING-9972</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://repo1.maven.org/maven2/org/apache/sling/sling/40/sling-40.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo1.maven.org/maven2/org/apache/sling/sling/40/sling-40.pom&lt;/a&gt; references org.apache.sling:apache-sling-jar-resource-bundle:1.0.3-SNAPSHOT&lt;/p&gt;

&lt;p&gt;Latest 41-SNAPSHOT has still this snapshot reference&lt;/p&gt;

&lt;p&gt;We must make sure that releases are not referencing any snapshot dependencies&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343942">SLING-9972</key>
            <summary>Sling parent pom references SNAPSHOT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2020 08:42:20 +0000</created>
                <updated>Wed, 19 May 2021 12:53:53 +0000</updated>
                            <resolved>Thu, 3 Dec 2020 10:46:45 +0000</resolved>
                                    <version>Parent 40</version>
                                    <fixVersion>Parent 41</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="40800">11h 20m</timespent>
                                <comments>
                            <comment id="17243018" author="cziegeler" created="Thu, 3 Dec 2020 08:43:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; It seems &lt;a href=&quot;https://github.com/apache/sling-parent/commit/47b700f123098de9b77d8b746b2b2d9b211ca0c8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-parent/commit/47b700f123098de9b77d8b746b2b2d9b211ca0c8&lt;/a&gt; introduced this - which interestingly suggests an update to 1.0.2 in the comment&lt;/p&gt;</comment>
                            <comment id="17243103" author="rombert" created="Thu, 3 Dec 2020 10:46:45 +0000"  >&lt;p&gt;Oops &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Fixed with &lt;a href=&quot;https://github.com/apache/sling-parent/pull/12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-parent/pull/12&lt;/a&gt;, thanks for the heads-up &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; .&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13304028">SLING-9439</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l5p4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9970] SystemUser.getPath doesn&apos;t reflect the repository path</title>
                <link>https://issues.apache.org/jira/browse/SLING-9970</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I tried to find out why &lt;tt&gt;AccessControlEntry&lt;/tt&gt; is constructed with 2 different &lt;tt&gt;RepoPath}}s one reflecting the path as obtained from the parser and one containing the path converted to &apos;repository path&apos; using {{PlatformNameFormat.getRepositoryPath(resourcePath)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;from what i see the &apos;repository&apos; path contained in the entry is later used to create the hierarchy down to access controlled nodes that hold the resource-based access control policy with the entries.&lt;/p&gt;

&lt;p&gt;but looking at the usages of the &apos;path&apos; field i found that it is only used in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/accesscontrol/DefaultAclManager.java#L152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/accesscontrol/DefaultAclManager.java#L152&lt;/a&gt; (see also &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9953&quot; title=&quot;ACEs on/below user nodes are ignored upon conversion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9953&quot;&gt;&lt;del&gt;SLING-9953&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-comment&quot;&gt;// clean the unneeded ACLs, see SLING-8561
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (authorizations != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            Iterator&amp;lt;AccessControlEntry&amp;gt; authorizationsIterator = authorizations.iterator();
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (authorizationsIterator.hasNext()) {
                AccessControlEntry acl = authorizationsIterator.next();

                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (acl.getPath().startsWith(systemUser.getPath())) {
                    authorizationsIterator.remove();
                }
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this finding lead me to the conclusion that the &lt;tt&gt;SystemUser&lt;/tt&gt; object is in fact created with a path that doesn&apos;t actually represent the JCR path as found in the repository.&lt;/p&gt;

&lt;p&gt;so, all usages of &lt;tt&gt;SystemUser.getPath&lt;/tt&gt; used to create the system user will potentially use the &apos;wrong&apos; path. for example:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/accesscontrol/DefaultAclManager.java#L105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/accesscontrol/DefaultAclManager.java#L105&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     &lt;span class=&quot;code-comment&quot;&gt;// TODO does it harm?!?
&lt;/span&gt;     addSystemUserPath(formatter, systemUser.getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which the issues the following repo-init statement&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;create path (rep:AuthorizableFolder) %s%n&quot;&lt;/span&gt;, path);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/accesscontrol/DefaultAclManager.java#L109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/accesscontrol/DefaultAclManager.java#L109&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;create service user %s with path %s%n&quot;&lt;/span&gt;, systemUser.getId(), systemUser.getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;upon a quick (but maybe incomplete) search I didn&apos;t find any usage of &lt;tt&gt;SystemUser.getPath()&lt;/tt&gt; that would require it to reflect the path as extracted from the content package.... if that was true, the method should be renamed to &apos;getRepositoryPath&apos; and should return the converted  path (see above).&lt;/p&gt;

&lt;p&gt;Having this addressed would IMO subsequently allow to drop the duplicated path argument from the &lt;tt&gt;AccessControlEntry&lt;/tt&gt; and drop the &lt;tt&gt;getPath&lt;/tt&gt; method altogether. which anyway seems a bit confusing to have. let me know if i should create a separate issue for this follow up clean up.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343936">SLING-9970</key>
            <summary>SystemUser.getPath doesn&apos;t reflect the repository path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2020 08:07:34 +0000</created>
                <updated>Mon, 17 May 2021 11:38:36 +0000</updated>
                            <resolved>Wed, 9 Dec 2020 14:51:53 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17243079" author="anchela" created="Thu, 3 Dec 2020 10:26:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, patch at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/tree/SLING-9970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/tree/SLING-9970&lt;/a&gt;. I decided not to change the name of &lt;tt&gt;SystemUser.getPath()&lt;/tt&gt; in order to keep the number of modifications as limited as possible.&lt;/p&gt;

&lt;p&gt;hope it helps. but please be aware that i have very limited insight into the usage and the intentions of the converter tool... so careful review is needed from someone in the sling team that is familiar and in charge of this code.&lt;/p&gt;</comment>
                            <comment id="17246582" author="karlpauls" created="Wed, 9 Dec 2020 14:51:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;Angela&lt;/a&gt; - I merged your patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l5ns:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9969] UsersEntryHandler and GroupEntryHandler contain hardcoded users/groups home path and doesn&apos;t include system-rel-path</title>
                <link>https://issues.apache.org/jira/browse/SLING-9969</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the constructor of &lt;tt&gt;SystemUsersEntryHandler&lt;/tt&gt; looks as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; SystemUsersEntryHandler() {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;/jcr_root(/home/users/.*/)\\.content.xml&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i.e. it hardcodes the path to the users home node to the Adobe AEM specific configuration. The default in Jackrabbit and Jackrabbit Oak is different (as you can see in &lt;a href=&quot;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/UserConstants.java?view=markup#l119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/UserConstants.java?view=markup#l119&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;instead of hardcoding the path it should be extracted from a configuration file in order to make the converter independent of Adobe AEM.&lt;/p&gt;

&lt;p&gt;in addition: oak comes with an addition configuration option that defines the relative path below which all service users must be located (see &lt;a href=&quot;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/UserConstants.java?view=markup#l141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/UserConstants.java?view=markup#l141&lt;/a&gt;). instead of traversing all user nodes (which may be quite a lot in a productive enviroment), it would be better to fix the pattern such that it is limited to the path, which is known to contain system users.&lt;/p&gt;

&lt;p&gt;note: there is no validator in place that prevents other users from co-existing with system users.... so verifying the primary type would still be needed, but at least the system-user-handler would be limited to a usually fairly limited sub-tree of the whole user store.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343931">SLING-9969</key>
            <summary>UsersEntryHandler and GroupEntryHandler contain hardcoded users/groups home path and doesn&apos;t include system-rel-path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2020 07:38:57 +0000</created>
                <updated>Mon, 17 May 2021 11:38:58 +0000</updated>
                            <resolved>Tue, 19 Jan 2021 10:21:07 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13343622">SLING-9959</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l5mo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9964] The bundle-nativecode analyser can&apos;t be discovered via ServiceLoader mechanism</title>
                <link>https://issues.apache.org/jira/browse/SLING-9964</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The bundle-nativecode analyser is not listed in the META-INF/resources/org.apache.sling.feature.analyser.task.AnalyserTask file and therefore can&apos;t be found by the ServiceLoader used for the local analysers.&lt;/p&gt;

&lt;p&gt;A typicaly error you get because of this is: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Configured analyser task(s) not found: [bundle-nativecode] -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13343737">SLING-9964</key>
            <summary>The bundle-nativecode analyser can&apos;t be discovered via ServiceLoader mechanism</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidb">A. J. David Bosschaert</assignee>
                                    <reporter username="davidb">A. J. David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2020 10:53:24 +0000</created>
                <updated>Wed, 6 Jan 2021 15:05:54 +0000</updated>
                            <resolved>Wed, 2 Dec 2020 11:50:16 +0000</resolved>
                                    <version>Feature Model Analyser 1.3.14</version>
                                    <fixVersion>Feature Model Analyser 1.3.16</fixVersion>
                                    <component>Feature Model Analyser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l4fk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9962] DefaultAclManager#addPaths prone to causing ConstraintViolationException</title>
                <link>https://issues.apache.org/jira/browse/SLING-9962</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9961&quot; title=&quot;DefaultAclManager: redundant creation of intermediate path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9961&quot;&gt;&lt;del&gt;SLING-9961&lt;/del&gt;&lt;/a&gt; I suspect that &lt;tt&gt;DefaultAclManager.addPaths&lt;/tt&gt; is prone to cause &lt;tt&gt;ConstraintViolationException&lt;/tt&gt; for the following reason:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;method &lt;tt&gt;computePathType&lt;/tt&gt; returns a default type (in this case &lt;em&gt;sling:Folder&lt;/em&gt;) if no primary type can be detected from the content package, without verifying if that node type was legal at the target destination.&lt;/li&gt;
	&lt;li&gt;method &lt;tt&gt;addPaths&lt;/tt&gt; generates the following repo-init statements: &lt;tt&gt;formatter.format(&quot;create path (%s) %s%n&quot;, type, path)&lt;/tt&gt; thus attempting to create all intermediate paths with the same primary type.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;as far as i know Jackrabbit fVault content packages may leave out definitions of intermediate nodes if those are known to already exist (or be created by another package) and only start adding &lt;em&gt;.content.xml&lt;/em&gt; for those nodes that actually need to be created.&lt;/p&gt;

&lt;p&gt;i haven&apos;t tested it but IMO, the converter should refrain from using a default primary type if the content package doesn&apos;t define it. instead it should probably generated repo-init statements as follows or (alternatively) omit paths for which the content packages doesn&apos;t allow to unambiguously create the right content structure.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;create path %s(%s) %n&quot;&lt;/span&gt;, path, type)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;also creation of intermediate paths could be simplified by using the following repo-init structure, that allows to specify the type of each node in the hierarchy to be created:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create path /content/subtree(nt:unstructured)/example.com(sling:Folder mixin mix:referenceable)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13343712">SLING-9962</key>
            <summary>DefaultAclManager#addPaths prone to causing ConstraintViolationException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2020 08:47:03 +0000</created>
                <updated>Mon, 17 May 2021 11:38:44 +0000</updated>
                            <resolved>Wed, 13 Jan 2021 17:00:09 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13343629">SLING-9961</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l4a0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9961] DefaultAclManager: redundant creation of intermediate path</title>
                <link>https://issues.apache.org/jira/browse/SLING-9961</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// TODO does it harm?!?
&lt;/span&gt;addSystemUserPath(formatter, systemUser.getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where the method looks as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; void addSystemUserPath(Formatter formatter, RepoPath path) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (preProvidedSystemPaths.add(path)) {
            formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;create path (rep:AuthorizableFolder) %s%n&quot;&lt;/span&gt;, path);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i would strong recommend to drop that. the content-package-feature-model-converter already has quite some hardcoded stuff.... how the intermediate path argument passed to &lt;tt&gt;UserManager.createSystemUser(String id, String intermediatePath)&lt;/tt&gt; is used and what node types are used to create the hierarchy should be considered an implementation detail and it doesn&apos;t make sense IMHO to eagerly create the tree structure in a feature like this. in fact i would consider this a bug that may sooner or later cause the converter to fail during repo-init execution.&lt;/p&gt;

&lt;p&gt;btw: the comment already implies that the author was not sure of the usefulness.... why not verifying and fixing the code or dropping the TODO before releasing the module?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13343629">SLING-9961</key>
            <summary>DefaultAclManager: redundant creation of intermediate path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 18:13:35 +0000</created>
                <updated>Mon, 17 May 2021 11:39:01 +0000</updated>
                            <resolved>Wed, 13 Jan 2021 16:57:54 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17241858" author="cziegeler" created="Tue, 1 Dec 2020 20:43:05 +0000"  >&lt;p&gt;Agreed, I think we should simply drop that code&lt;/p&gt;</comment>
                            <comment id="17242128" author="anchela" created="Wed, 2 Dec 2020 07:59:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, i investigated a bit further while trying to work on an initial draft for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9692&quot; title=&quot;Add support for principal-based access control entries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9692&quot;&gt;&lt;del&gt;SLING-9692&lt;/del&gt;&lt;/a&gt;. i found that is was an attempt to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8586&quot; title=&quot;[cp2fm] &amp;quot;create service user&amp;quot; repoinit instruction throws javax.jcr.nodetype.ConstraintViolationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8586&quot;&gt;&lt;del&gt;SLING-8586&lt;/del&gt;&lt;/a&gt; &lt;em&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;cp2fm&amp;#93;&lt;/span&gt; &quot;create service user&quot; repoinit instruction throws javax.jcr.nodetype.ConstraintViolationException&lt;/em&gt;. IMHO that exception was caused by another bug as the exception mentioned in the description indicates that an attempt was made to create  a node named &lt;em&gt;replication-user&lt;/em&gt; with type &lt;em&gt;sling:Folder&lt;/em&gt;. the node name suggests that this should actually be a node of type &lt;em&gt;rep:User&lt;/em&gt; or &lt;em&gt;rep:SystemUser&lt;/em&gt; and the mentioned exception would be raised if one would attempt to create a node with type &lt;em&gt;sling:Folder&lt;/em&gt; below a parent node with primary type &lt;em&gt;rep:AuthorizableFolder&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;looking at the usage of &lt;em&gt;sling:Folder&lt;/em&gt; in the converter code i found &lt;tt&gt;DefaultAclManager.computePathType&lt;/tt&gt; which returns it as default path. this method is used here &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/accesscontrol/DefaultAclManager.java#L160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/accesscontrol/DefaultAclManager.java#L160&lt;/a&gt;. that might again be a side effect of the missing/wrong handling of access control entries located below or at the user node (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9953&quot; title=&quot;ACEs on/below user nodes are ignored upon conversion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9953&quot;&gt;&lt;del&gt;SLING-9953&lt;/del&gt;&lt;/a&gt;). in other words: IMO there needs to be code in place that properly detects special paths like any user home node or the repo-level &apos;null&apos; path and doing so may actually fix the root cause for the exception.&lt;/p&gt;

&lt;p&gt;one final note regarding the &lt;tt&gt;addPaths&lt;/tt&gt; method: when addressing &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9692&quot; title=&quot;Add support for principal-based access control entries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9692&quot;&gt;&lt;del&gt;SLING-9692&lt;/del&gt;&lt;/a&gt; the creation of access control paths where a given ACE will take effect anyway should be limited to resource-based access control. with principal-based access control it&apos;s not longer required that the effective path actually exists as the entries are not stored there &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://jackrabbit.apache.org/oak/docs/security/authorization/principalbased.html#Implementation_Details&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/oak/docs/security/authorization/principalbased.html#Implementation_Details&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13324463">SLING-9692</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13343712">SLING-9962</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l3rk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9960] AclManagerTest/RepPolicyEntryHandlerTest should use realistic service user path</title>
                <link>https://issues.apache.org/jira/browse/SLING-9960</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the code lines to add service users in &lt;tt&gt;AclManagerTest&lt;/tt&gt; like &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/test/java/org/apache/sling/feature/cpconverter/acl/AclManagerTest.java#L74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/test/java/org/apache/sling/feature/cpconverter/acl/AclManagerTest.java#L74&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;or &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/test/java/org/apache/sling/feature/cpconverter/acl/AclManagerTest.java#L79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/test/java/org/apache/sling/feature/cpconverter/acl/AclManagerTest.java#L79&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;are a bit confusing to read. the path &lt;tt&gt;&quot;/asd/public&quot;&lt;/tt&gt; would neither with a default jackrabbit/oak repository nor with Adobe AEM represent a valid path for a service user.... this makes it hard to understand the intention behind the code (see also &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9959&quot; title=&quot;SystemUser.getPath must reveal the path of the original user node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9959&quot;&gt;&lt;del&gt;SLING-9959&lt;/del&gt;&lt;/a&gt; for why this matters).&lt;/p&gt;

&lt;p&gt;i would suggest to either use an absolute path starting with &quot;/home/users/system&quot; or the corresponding default path in Jackrabbit Oak concatenated with some arbitrary node name for the user node itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343623">SLING-9960</key>
            <summary>AclManagerTest/RepPolicyEntryHandlerTest should use realistic service user path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 17:46:48 +0000</created>
                <updated>Mon, 17 May 2021 11:38:51 +0000</updated>
                            <resolved>Thu, 10 Dec 2020 15:01:23 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17242209" author="anchela" created="Wed, 2 Dec 2020 09:53:39 +0000"  >&lt;p&gt;the same is true for &lt;tt&gt;RepPolicyEntryHandlerTest&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17247294" author="karlpauls" created="Thu, 10 Dec 2020 15:01:23 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;Angela&lt;/a&gt; for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l3q8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9959] SystemUser.getPath must reveal the path of the original user node</title>
                <link>https://issues.apache.org/jira/browse/SLING-9959</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;del&gt;found the following repo-init statement to create system users:&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L109&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;which states:&lt;/del&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;create service user %s with path %s%n&quot;&lt;/span&gt;, systemUser.getId(), systemUser.getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;del&gt;now.... i might be mistaken, but if my reading of the &lt;tt&gt;SystemUserParser&lt;/tt&gt; is correct, the path defined with the &lt;tt&gt;SystemUser&lt;/tt&gt; instance actually reflects the path of the system user node itself:&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/SystemUsersEntryHandler.java#L70-L75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/SystemUsersEntryHandler.java#L70-L75&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;if that was true the repo-init statements would be wrong, because the path argument doesn&apos;t specify that path of the user node itself but rather the intermediate path to be used.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;so the statement should probably read:&lt;/del&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;create service user %s with path %s%n&quot;&lt;/span&gt;, systemUser.getId(), systemUser.getParent().getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343622">SLING-9959</key>
            <summary>SystemUser.getPath must reveal the path of the original user node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 17:37:53 +0000</created>
                <updated>Mon, 17 May 2021 11:38:33 +0000</updated>
                            <resolved>Wed, 9 Dec 2020 21:15:56 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17243161" author="anchela" created="Thu, 3 Dec 2020 12:39:51 +0000"  >&lt;p&gt;update: i verified this again with using the test-content from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9970&quot; title=&quot;SystemUser.getPath doesn&amp;#39;t reflect the repository path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9970&quot;&gt;&lt;del&gt;SLING-9970&lt;/del&gt;&lt;/a&gt;.... &lt;tt&gt;SystemUser.getPath&lt;/tt&gt; in fact does point to the parent node, which IMHO is quite confusing given the name of the method.&lt;/p&gt;

&lt;p&gt;but the following line in &lt;tt&gt;SystemUserEntryHandler&lt;/tt&gt; makes it point to the parent folder node:&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/SystemUsersEntryHandler.java#L45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/SystemUsersEntryHandler.java#L45&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
RepoPath currentPath = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RepoPath(path).getParent(); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to make this less confusing i would suggest to&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;create &lt;tt&gt;SystemUser&lt;/tt&gt; with the actual user path&lt;/li&gt;
	&lt;li&gt;let &lt;tt&gt;SystemUser.getPath&lt;/tt&gt; return the user path&lt;/li&gt;
	&lt;li&gt;add &lt;tt&gt;SystemUser.getIntermediatePath()&lt;/tt&gt; to make sure the right path is used for the &apos;intermediate path&apos; statement of the &apos;create system user&apos; repo-init statement.&lt;/li&gt;
	&lt;li&gt;verify which usages of &lt;tt&gt;SystemUser.getPath&lt;/tt&gt; are actually intended to use the intermediate path and which intended to use the actually user path....&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17243385" author="anchela" created="Thu, 3 Dec 2020 17:24:41 +0000"  >&lt;p&gt;additional note: in order to be able to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9953&quot; title=&quot;ACEs on/below user nodes are ignored upon conversion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9953&quot;&gt;&lt;del&gt;SLING-9953&lt;/del&gt;&lt;/a&gt; there must be a way to determine if a given access controlled path actually is located on the user home or in the subtree below. this is not possible if &lt;tt&gt;SystemUser.getPath()&lt;/tt&gt; reflects the path of the parent node used as &apos;intermediate path&apos; argument for repo-init.&lt;/p&gt;

&lt;p&gt;Adjusting subject accordingly.&lt;/p&gt;</comment>
                            <comment id="17246584" author="karlpauls" created="Wed, 9 Dec 2020 14:56:01 +0000"  >&lt;p&gt;I created a PR of what I understand the proposal is: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/40&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17246682" author="karlpauls" created="Wed, 9 Dec 2020 17:10:09 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/40&lt;/a&gt; - thanks a lot for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13343515">SLING-9953</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13343931">SLING-9969</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13324463">SLING-9692</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l3q0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9957] Hardcoded list of restriction names in RepPolicyEntryHandler.RepPolicyParser</title>
                <link>https://issues.apache.org/jira/browse/SLING-9957</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the code at&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/RepPolicyEntryHandler.java#L121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/RepPolicyEntryHandler.java#L121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;hardcodes the names of the supported restrictions. while those listed are the restrictions currently supported by oak out of the box, oak allows for customization (see jackrabbit.apache.org/oak/docs/security/authorization/restriction.html) and the set of supported restrictions may also evolve in oak.&lt;/p&gt;

&lt;p&gt;therefore the list should not be hardcoded. if obtaining the list of supported restrictions from oak is not an option, it might be better to assume that all child-properties of the protected &lt;tt&gt;rep:restrictions&lt;/tt&gt; (primary type &lt;tt&gt;rep:Restrictions&lt;/tt&gt;) node below a given access control entry are actually restrictions and treat them accordingly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343599">SLING-9957</key>
            <summary>Hardcoded list of restriction names in RepPolicyEntryHandler.RepPolicyParser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 16:20:08 +0000</created>
                <updated>Mon, 17 May 2021 11:38:56 +0000</updated>
                            <resolved>Wed, 20 Jan 2021 14:55:49 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l3kw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9956] RepPolicyEntryHandler ignores ACEs on repository level</title>
                <link>https://issues.apache.org/jira/browse/SLING-9956</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;based on my reading of &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/RepPolicyEntryHandler.java#L56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/RepPolicyEntryHandler.java#L56&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;i don&apos;t see how the converter would handle service user permissions that are defined for the repository level that in JCR access control management API are defined using a &lt;tt&gt;null&lt;/tt&gt; path.&lt;/p&gt;

&lt;p&gt;with the default authorization module in oak the corresponding ACL is stored at the root node with a dedicated policy node named &lt;tt&gt;rep:repoPolicy&lt;/tt&gt; (see &lt;a href=&quot;http://jackrabbit.apache.org/oak/docs/security/accesscontrol/default.html#representation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/oak/docs/security/accesscontrol/default.html#representation&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;i guess this bug requires 3 steps:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;adjust the regexp in the handler&lt;/li&gt;
	&lt;li&gt;adjust &quot;Acl&quot; class (which reprents an Ace) to make sure repo-level aces are properly identified (e.g. extra method isRepositoryLevel or set the correct path field to null)&lt;/li&gt;
	&lt;li&gt;adjust &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L242&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L242&lt;/a&gt; to proper create repository level entries with repo-init. according to &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/repository-initialization.html&lt;/a&gt; this is achieved using the following special path:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
set ACL &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; alice,bob
    allow jcr:namespaceManagement on :repository
end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13343566">SLING-9956</key>
            <summary>RepPolicyEntryHandler ignores ACEs on repository level</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 13:37:05 +0000</created>
                <updated>Mon, 17 May 2021 11:38:48 +0000</updated>
                            <resolved>Wed, 13 Jan 2021 15:56:45 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17263974" author="anchela" created="Wed, 13 Jan 2021 08:10:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, proposed patch attached. i will create a PR once changes from &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/46&lt;/a&gt; are successfully merged into the main branch and i have any conflicts resolved.&lt;/p&gt;

&lt;p&gt;a few notes/questions regarding the patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the regex in the new RepRepoPolicyEntryHandler looks a rather ugly to me.... if you have a better idea on how to do this without changing too much of the logic in RepPolicyEntryHandler, please let me know.&lt;/li&gt;
	&lt;li&gt;RepoPath: should isRepositoryPath be reflected in the equals/hashcode methods?&lt;/li&gt;
	&lt;li&gt;DefaultAclManager: the method getRepoInitPath introduced in the patch has a param SystemUser which is not used yet.... but will it be needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9692&quot; title=&quot;Add support for principal-based access control entries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9692&quot;&gt;&lt;del&gt;SLING-9692&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9953&quot; title=&quot;ACEs on/below user nodes are ignored upon conversion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9953&quot;&gt;&lt;del&gt;SLING-9953&lt;/del&gt;&lt;/a&gt;. since i derived the patch from some initial work done for those issues i decided to leave it in.&lt;/li&gt;
	&lt;li&gt;TestUtils: i noticed that quite some test copy the logic on how to mock the fvault parts. i didn&apos;t yet replace all copies (just the one in the SystemUserHandlerTest). should i rather create a separate improvement for that?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17264135" author="anchela" created="Wed, 13 Jan 2021 13:12:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, i think the fix should in addition make sure that no &lt;tt&gt;create path .....&lt;/tt&gt; repo-init statements are issued for entries pointing to the repository level. that is still missing. reopening.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13343791">SLING-9966</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13324463">SLING-9692</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="13344016">SLING-9976</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13018666" name="SLING-9956.patch" size="21487" author="angela" created="Wed, 13 Jan 2021 07:58:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l3dk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9955] misleading class name: Acl should be Ace</title>
                <link>https://issues.apache.org/jira/browse/SLING-9955</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The access control part of the &lt;tt&gt;Content-Package to Feature Model Converter&lt;/tt&gt; is a bit confusing to read.... one reason for this: class and method names are misleading.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;ACL&lt;/tt&gt; stands for &lt;em&gt;Access Control List&lt;/em&gt; but the class &lt;em&gt;org.apache.sling.feature.cpconverter.acl.Acl&lt;/em&gt; actually captures the information that is stored in a singular &lt;em&gt;Access Control Entry&lt;/em&gt; (aka ACE), which is the type of objects that go into an ACL.&lt;/p&gt;

&lt;p&gt;btw: i am also not sure the usage of &lt;em&gt;acl&lt;/em&gt; in the package name is correct.... what was probably intended was &lt;em&gt;accesscontrol&lt;/em&gt; in general.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343555">SLING-9955</key>
            <summary>misleading class name: Acl should be Ace</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 12:52:19 +0000</created>
                <updated>Fri, 11 Dec 2020 11:17:59 +0000</updated>
                            <resolved>Tue, 1 Dec 2020 20:53:34 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.0.24</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17241867" author="cziegeler" created="Tue, 1 Dec 2020 20:53:34 +0000"  >&lt;p&gt;I renamed the package to accesscontrol and ACL to AccessControlEntry&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l3b4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9954] Validation errors not reported by analyser</title>
                <link>https://issues.apache.org/jira/browse/SLING-9954</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Validation errors in configuration properties are not correctly reported as errors but warnings&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343518">SLING-9954</key>
            <summary>Validation errors not reported by analyser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 10:40:21 +0000</created>
                <updated>Wed, 6 Jan 2021 15:06:23 +0000</updated>
                            <resolved>Tue, 1 Dec 2020 10:41:27 +0000</resolved>
                                    <version>Feature Model API Regions Extension 1.1.14</version>
                                    <fixVersion>Feature Model API Regions Extension 1.1.16</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17241431" author="cziegeler" created="Tue, 1 Dec 2020 10:41:27 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/d05abdcc2c881f9d2dd8a4ad402d28ac508f3b17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-extension-apiregions/commit/d05abdcc2c881f9d2dd8a4ad402d28ac508f3b17&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l32w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9953] ACEs on/below user nodes are ignored upon conversion</title>
                <link>https://issues.apache.org/jira/browse/SLING-9953</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I had a look at the cp-feature-model-converter in the light of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9692&quot; title=&quot;Add support for principal-based access control entries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9692&quot;&gt;&lt;del&gt;SLING-9692&lt;/del&gt;&lt;/a&gt; and found a surprising comment pointing to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8561&quot; title=&quot;ACLs on service users should be ignored because of randomised node names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8561&quot;&gt;&lt;del&gt;SLING-8561&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// clean the unneeded ACLs, see SLING-8561&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;code here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L146-L153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L146-L153&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;what it does in fact is omit any kind of permission setup that is defined for the service users home node. that&apos;s quite a serious bug IMHO.... and on top of that unnecessary because Sling repo-init allows to define those kind of ACEs using the &lt;tt&gt;home(userid)&lt;/tt&gt; notation (see &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/repository-initialization.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;and btw: what does &lt;em&gt;unneeded ACLs&lt;/em&gt; mean? they are for sure not &apos;unneeded&apos; and omitting them will essentially result in an invalid permission setup (and thus break the feature using the service login).&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343515">SLING-9953</key>
            <summary>ACEs on/below user nodes are ignored upon conversion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 10:24:42 +0000</created>
                <updated>Mon, 17 May 2021 11:38:45 +0000</updated>
                            <resolved>Thu, 14 Jan 2021 17:31:08 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17241493" author="dsuess" created="Tue, 1 Dec 2020 12:45:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt; - IIRC the background of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8561&quot; title=&quot;ACLs on service users should be ignored because of randomised node names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8561&quot;&gt;&lt;del&gt;SLING-8561&lt;/del&gt;&lt;/a&gt; was about legacy users from old AEM versions predating system users which due to the way these users were created in the past contained acls for the access on the service user itself (esp to be able to modify profile, manipulate password or set impersonators).&lt;br/&gt;
I am not sure how ommitting dedicated creation of those ACLs would cause a broken login feature as those ACLs are not set for other service users - this code does not remove ACLs that are generated by the service user creation it just ommits explicit acl creation found on the service users node.&lt;/p&gt;</comment>
                            <comment id="17241502" author="anchela" created="Tue, 1 Dec 2020 12:58:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt;, service users by default don&apos;t have any access control setup created upon user-creation in the user manager (the corresponding action ignores service users). howeveer, some service users actually do need some sort of access to their home (read or write or full access), because of the nature of the tasks the corresponding service is performing. it has nothing to do with login.....&lt;br/&gt;
that&apos;s why i think it&apos;s a bug to ignore those entries.&lt;/p&gt;</comment>
                            <comment id="17242135" author="anchela" created="Wed, 2 Dec 2020 08:11:29 +0000"  >&lt;p&gt;note: i have the impression that this actually not only applies to the target service user home itself (e.g. a service user being granted access to its own home node). it might go further if a given service user was granted access to some other user/group home.... while this might not be super common, i suspect that this was the reason for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8586&quot; title=&quot;[cp2fm] &amp;quot;create service user&amp;quot; repoinit instruction throws javax.jcr.nodetype.ConstraintViolationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8586&quot;&gt;&lt;del&gt;SLING-8586&lt;/del&gt;&lt;/a&gt;  that lead to the bogus intermediate path creation (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9961&quot; title=&quot;DefaultAclManager: redundant creation of intermediate path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9961&quot;&gt;&lt;del&gt;SLING-9961&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;if it is not possible during execution of the converter to determine the ID of another user to properly construct the &lt;tt&gt;home(userId)subpath&lt;/tt&gt; statements (the name of the user node usually is an arbitrary string and doesn&apos;t reflect the identifier), the converter either has to abort or log an error and omit the entries that cannot be processed.&lt;/p&gt;

&lt;p&gt;so: user/group nodes need to be identified as such and treated accordingly. also note that the path to all user/group nodes is a configuration option in Jackrabbit Oak that must not be hardcoded (unless the feature is designed to only work with one specific application or setup.... in this case it needs to be documented).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13324463">SLING-9692</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13343622">SLING-9959</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13343791">SLING-9966</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l328:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9943] Make Report methods public</title>
                <link>https://issues.apache.org/jira/browse/SLING-9943</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The getKey() and getValue() method in the AnalyseResult.Result class are not public and therefore not accessible for code calling the analyser (outside of this package)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342861">SLING-9943</key>
            <summary>Make Report methods public</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Nov 2020 16:30:42 +0000</created>
                <updated>Mon, 30 Nov 2020 15:55:22 +0000</updated>
                            <resolved>Thu, 26 Nov 2020 16:36:27 +0000</resolved>
                                                    <fixVersion>Feature Model Analyser 1.3.14</fixVersion>
                                    <component>Feature Model Analyser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17239336" author="cziegeler" created="Thu, 26 Nov 2020 16:36:27 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-analyser/commit/2a461c4cb06fcea3f72b2019855a699b9429f493&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-analyser/commit/2a461c4cb06fcea3f72b2019855a699b9429f493&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kz14:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9935] NoClassDefFoundError org/junit/platform/engine/TestEngine</title>
                <link>https://issues.apache.org/jira/browse/SLING-9935</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When starting Sling with org.apache.sling.junit.core v&#160;1.1.1-SNAPSHOT, standard output shows many exceptions related to an optional import upon startup.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;ERROR: Bundle org.apache.sling.junit.core &lt;span class=&quot;error&quot;&gt;&amp;#91;189&amp;#93;&lt;/span&gt; EventDispatcher: Error during dispatch. (java.lang.NoClassDefFoundError: org/junit/platform/engine/TestEngine)&lt;/p&gt;

&lt;p&gt;ERROR: Bundle org.apache.sling.junit.core &lt;span class=&quot;error&quot;&gt;&amp;#91;189&amp;#93;&lt;/span&gt; EventDispatcher: Error during dispatch. (java.lang.NoClassDefFoundError: org/junit/platform/engine/TestEngine)java.lang.NoClassDefFoundError: org/junit/platform/engine/TestEngine at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.getTestEnginesForBundle(TestEngineTracker.java:83) at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.addingBundle(TestEngineTracker.java:67) at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.addingBundle(TestEngineTracker.java:63) at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:475) at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:420) at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256) at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229) at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:450) at org.apache.felix.framework.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:915) at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:834) at org.apache.felix.framework.EventDispatcher.fireBundleEvent(EventDispatcher.java:516) at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4817) at org.apache.felix.framework.Felix.startBundle(Felix.java:2336) at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1539) at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308) at java.base/java.lang.Thread.run(Thread.java:834)&lt;/p&gt;

&lt;p&gt;ERROR: Bundle org.apache.sling.junit.core &lt;span class=&quot;error&quot;&gt;&amp;#91;189&amp;#93;&lt;/span&gt; EventDispatcher: Error during dispatch. (java.lang.NoClassDefFoundError: org/junit/platform/engine/TestEngine)java.lang.NoClassDefFoundError: org/junit/platform/engine/TestEngine at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.getTestEnginesForBundle(TestEngineTracker.java:83) at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.addingBundle(TestEngineTracker.java:67) at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.addingBundle(TestEngineTracker.java:63) at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:475) at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:420) at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256) at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229) at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:450) at org.apache.felix.framework.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:915) at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:834) at org.apache.felix.framework.EventDispatcher.fireBundleEvent(EventDispatcher.java:516) at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4817) at org.apache.felix.framework.Felix.startBundle(Felix.java:2336) at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1539) at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308) at java.base/java.lang.Thread.run(Thread.java:834)&lt;/p&gt;

&lt;p&gt;ERROR: Bundle org.apache.sling.junit.core &lt;span class=&quot;error&quot;&gt;&amp;#91;189&amp;#93;&lt;/span&gt; EventDispatcher: Error during dispatch. (java.lang.NoClassDefFoundError: org/junit/platform/engine/TestEngine)java.lang.NoClassDefFoundError: org/junit/platform/engine/TestEngine at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.getTestEnginesForBundle(TestEngineTracker.java:83) at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.addingBundle(TestEngineTracker.java:67) at org.apache.sling.junit.impl.servlet.junit5.TestEngineTracker$Customizer.addingBundle(TestEngineTracker.java:63) at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:475) at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:420) at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256) at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229) at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:450) at org.apache.felix.framework.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:915) at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:834) at org.apache.felix.framework.EventDispatcher.fireBundleEvent(EventDispatcher.java:516) at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4817) at org.apache.felix.framework.Felix.start(Felix.java:1116) at org.apache.sling.feature.launcher.impl.launchers.AbstractRunner$4.call(AbstractRunner.java:232) at org.apache.sling.feature.launcher.impl.launchers.AbstractRunner$4.call(AbstractRunner.java:228) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Framework started&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For instances which do not&#160;provide the Junit 5 option, would it be possible to avoid printing (repeatedly) this exception to the console?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342428">SLING-9935</key>
            <summary>NoClassDefFoundError org/junit/platform/engine/TestEngine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="cris">Cris Rockwell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2020 17:03:55 +0000</created>
                <updated>Mon, 7 Dec 2020 22:21:56 +0000</updated>
                            <resolved>Mon, 7 Dec 2020 22:21:56 +0000</resolved>
                                    <version>JUnit Core 1.1.2</version>
                                    <fixVersion>JUnit Core 1.1.2</fixVersion>
                                    <component>JUnit Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17243022" author="jsedding" created="Thu, 3 Dec 2020 08:52:42 +0000"  >&lt;p&gt;The switch between JUnit 5 and JUnit 4 is implemented as a failover. This assumes that loading the &lt;tt&gt;JUnit5TestExecutionStrategy&lt;/tt&gt; causes a &lt;tt&gt;NoClassDefFoundError&lt;/tt&gt;. However, it seems that none of the optional classes from the package &lt;tt&gt;org.junit.platform.*&lt;/tt&gt; are loaded until much later. Thus the fallback to JUnit 4 does not work at all.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cris&quot; class=&quot;user-hover&quot; rel=&quot;cris&quot;&gt;cris&lt;/a&gt; I assume you did not deploy any of the JUnit 5 bundles. Correct? Were you able to run any of the JUnit 4 tests? I would assume not.&lt;/p&gt;</comment>
                            <comment id="17244233" author="cris" created="Fri, 4 Dec 2020 18:55:08 +0000"  >&lt;p&gt;If I understand the questions properly, no JUnit 5 bundles are not installed. Yes Junit 4 seems to work fine.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Image shows many Junit 4 bundles&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13016505/13016505_Screen+Shot+2020-12-04+at+1.49.06+PM.png&quot; height=&quot;535&quot; width=&quot;654&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here it shows Junit Tests after executing&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13016506/13016506_Screen+Shot+2020-12-04+at+1.49.45+PM.png&quot; height=&quot;281&quot; width=&quot;584&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17245557" author="jsedding" created="Mon, 7 Dec 2020 22:21:56 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-junit-core/commit/9744c2d808732867993a7f771e515a7fc4790758&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 9744c2d&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13016505" name="Screen Shot 2020-12-04 at 1.49.06 PM.png" size="763851" author="cris" created="Fri, 4 Dec 2020 18:52:47 +0000"/>
                            <attachment id="13016506" name="Screen Shot 2020-12-04 at 1.49.45 PM.png" size="188525" author="cris" created="Fri, 4 Dec 2020 18:53:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12312720" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Docs Text</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://sling.apache.org/documentation/bundles/org-apache-sling-junit-bundles.html#junit-5-support-since-version-110-1&quot;&gt;https://sling.apache.org/documentation/bundles/org-apache-sling-junit-bundles.html#junit-5-support-since-version-110-1&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kwdc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9932] Sling Installer Configuration: Calling the configuration dumper web console might bind a configuration to the wrong bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-9932</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In certain conditions (i.e. when a configuration has been changed, but is not yet bound to any other bundle), the code at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-console/blob/a087b18fc681e3d62c597bd4a1ef3166399d899b/src/main/java/org/apache/sling/installer/core/impl/console/ConfigurationSerializerWebConsolePlugin.java#L151&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-console/blob/a087b18fc681e3d62c597bd4a1ef3166399d899b/src/main/java/org/apache/sling/installer/core/impl/console/ConfigurationSerializerWebConsolePlugin.java#L151&lt;/a&gt; might lead to the configuration getting bound to the wrong bundle.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342346">SLING-9932</key>
            <summary>Sling Installer Configuration: Calling the configuration dumper web console might bind a configuration to the wrong bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2020 11:32:39 +0000</created>
                <updated>Fri, 19 May 2023 13:33:10 +0000</updated>
                            <resolved>Tue, 24 Nov 2020 12:36:38 +0000</resolved>
                                    <version>Installer Console 1.1.0</version>
                                    <fixVersion>Installer Console 1.1.2</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17238089" author="kwin" created="Tue, 24 Nov 2020 12:36:38 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-console/commit/7780d9b22da491b3932a9fbc36c425a61b9a5aa9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-console/commit/7780d9b22da491b3932a9fbc36c425a61b9a5aa9&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kvv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9928] Sling el-api embeds vulnerable version of el-api</title>
                <link>https://issues.apache.org/jira/browse/SLING-9928</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;b&gt;Issue summary :&lt;/b&gt;&#160;Security issues reported under org.apache.tomcat&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Vulnerabilities&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;CVE-2014-7810 5.0 org.apache.tomcat : el-api : 6.0.14&lt;br/&gt;
&lt;a href=&quot;https://nvd.nist.gov/vuln/detail/CVE-2014-7810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://nvd.nist.gov/vuln/detail/CVE-2014-7810&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;el-api-6.0.14 is embedded by org.apache.sling.scripting.el-api.&lt;/p&gt;

&lt;p&gt;Expected: Need to update&#160;el-api version in&#160;org.apache.sling.scripting.el-api.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342282">SLING-9928</key>
            <summary>Sling el-api embeds vulnerable version of el-api</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="akanksha88">Akanksha Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2020 06:14:26 +0000</created>
                <updated>Fri, 27 Nov 2020 08:09:29 +0000</updated>
                            <resolved>Tue, 24 Nov 2020 07:37:23 +0000</resolved>
                                                    <fixVersion>Scripting EL API Wrapper 1.0.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17237905" author="akanksha88" created="Tue, 24 Nov 2020 06:57:30 +0000"  >&lt;p&gt;As per&#160;&lt;a href=&quot;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7810&lt;/a&gt;&#160;the vulnerability is fixed in versions greater than 6.0.44 of el-api.&lt;/p&gt;

&lt;p&gt;I have updated el-api version to the latest i.e. 6.0.53 in the below PR.&lt;/p&gt;

&lt;p&gt;PR: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-el-api/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-el-api/pull/2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;: please review the PR and if everything looks fine, merge it to master.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17237926" author="cziegeler" created="Tue, 24 Nov 2020 07:37:23 +0000"  >&lt;p&gt;Thanks for the PR, its applied&lt;/p&gt;</comment>
                            <comment id="17237942" author="akanksha88" created="Tue, 24 Nov 2020 08:04:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&#160; Thank you for merging the PR.&lt;/p&gt;

&lt;p&gt;Can you please release this updated &apos;org.apache.sling.scripting.el-api&apos;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kvgw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9927] Allow java.* imports to be defined, in line with OSGi R7</title>
                <link>https://issues.apache.org/jira/browse/SLING-9927</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The default Sling analysers seem to not allow &lt;tt&gt;java.*&lt;/tt&gt; imports:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failed to execute goal org.apache.sling:slingfeature-maven-plugin:1.4.16:analyse-features (analyze) on project &amp;lt;redacted&amp;gt;: Exception during analysing feature &amp;lt;redacted&amp;gt; : org.osgi.framework.BundleException: Unable to build resource for null: Importing java.* packages not allowed: java.awt -&amp;gt; [Help 1] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13342151">SLING-9927</key>
            <summary>Allow java.* imports to be defined, in line with OSGi R7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidb">A. J. David Bosschaert</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2020 15:15:05 +0000</created>
                <updated>Mon, 30 Nov 2020 15:55:21 +0000</updated>
                            <resolved>Fri, 27 Nov 2020 10:19:31 +0000</resolved>
                                    <version>Feature Model Analyser 1.3.12</version>
                                    <fixVersion>Feature Model Analyser 1.3.14</fixVersion>
                                    <component>Feature Model Analyser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17237442" author="karlpauls" created="Mon, 23 Nov 2020 15:41:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;, the problem is in the used Felix util ResourceBuilder:&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/felix-dev/blob/master/utils/src/main/java/org/apache/felix/utils/resource/ResourceBuilder.java#L316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix-dev/blob/master/utils/src/main/java/org/apache/felix/utils/resource/ResourceBuilder.java#L316&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It needs to be dragged into the post R6 world &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17237502" author="davidb" created="Mon, 23 Nov 2020 16:57:43 +0000"  >&lt;p&gt;PR: &lt;a href=&quot;https://github.com/apache/felix-dev/pull/62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix-dev/pull/62&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17237986" author="davidb" created="Tue, 24 Nov 2020 09:24:19 +0000"  >&lt;p&gt;The feature model analyser needs to be updated to pick up Felix Utils 1.11.6 once its release is out.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13342167">FELIX-6362</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kuog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9926] Wrong PID if configuration is in a nested folder</title>
                <link>https://issues.apache.org/jira/browse/SLING-9926</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a configuration is contained in a subfolder like /apps/config/foo/myconfig.xml the resulting PID is currently foo/myconfig instead of just myconfig&lt;br/&gt;
This is probably due to how the PID is derived from the patch using the regex&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342144">SLING-9926</key>
            <summary>Wrong PID if configuration is in a nested folder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2020 14:22:48 +0000</created>
                <updated>Fri, 11 Dec 2020 11:17:58 +0000</updated>
                            <resolved>Mon, 7 Dec 2020 08:20:59 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.18</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.0.24</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kumw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9925] ArrayIndexOutOfBoundsException in AbstractSlingFilterChain</title>
                <link>https://issues.apache.org/jira/browse/SLING-9925</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Apparently, it is possible for an AIOOB Exception to happen in the AbstractSlingFilterChain. Unclear to me why but it looks like this:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
rg.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught Throwable
java.lang.ArrayIndexOutOfBoundsException: Index 29 out of bounds &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; length 29
        at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:86) [org.apache.sling.engine:2.7.2]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13342112">SLING-9925</key>
            <summary>ArrayIndexOutOfBoundsException in AbstractSlingFilterChain</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2020 12:14:01 +0000</created>
                <updated>Tue, 2 Mar 2021 09:57:58 +0000</updated>
                            <resolved>Mon, 23 Nov 2020 17:44:43 +0000</resolved>
                                    <version>Engine 2.7.2</version>
                                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17237354" author="cziegeler" created="Mon, 23 Nov 2020 13:07:25 +0000"  >&lt;p&gt;This sounds like an abuse in the invocation pattern. My guess is that a custom filter is catching an exception and when doing so, invoking the filter chain again - which means that the filter chain is invoked more often than anticipated.&lt;/p&gt;

&lt;p&gt;However, we can probably easily fix this by decrementing this.current in the finally block of the doFilter method, restoring the state to the same values as before the invokation. &lt;br/&gt;
We probably need to think about how to handle the timing of the filter method. So probably instead of setting times&lt;span class=&quot;error&quot;&gt;&amp;#91;filterIdx&amp;#93;&lt;/span&gt; in the filter method, incrementing it.&lt;/p&gt;

&lt;p&gt;Interestingly, both Tomcat as well as Jetty have similar code for their filter chain implementation - which has the same underlying problem. So even the reference implementation does not expect that the filter chain is called twice from a filter&lt;/p&gt;</comment>
                            <comment id="17237372" author="cziegeler" created="Mon, 23 Nov 2020 13:36:52 +0000"  >&lt;p&gt;Reading the servlet spec and taking the reference implementation into account, the current implementation in the Sling engine seems to have the correct expectation, that it is only invoked once - and if an exception occurs it must not be invoked for another time.&lt;/p&gt;

&lt;p&gt;However, an AIOOB exception is maybe not the nicest way of indicating this, an IllegalStateException might be more appropriate&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13361806">SLING-10179</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kufs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9924] Feature Model Converter Maven Plugin does not consult remote repositories to resolve artifacts</title>
                <link>https://issues.apache.org/jira/browse/SLING-9924</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When resolving artifacts the sling-feature-converter-maven-plugin does not consult remote repositories.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342111">SLING-9924</key>
            <summary>Feature Model Converter Maven Plugin does not consult remote repositories to resolve artifacts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidb">A. J. David Bosschaert</assignee>
                                    <reporter username="davidb">A. J. David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2020 11:59:14 +0000</created>
                <updated>Mon, 30 Nov 2020 15:56:31 +0000</updated>
                            <resolved>Mon, 23 Nov 2020 13:35:24 +0000</resolved>
                                    <version>Feature Model Converter Plugin 1.0.8</version>
                                    <fixVersion>Feature Model Converter Plugin 1.0.10</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kufk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9919] Display context allows to inject malicious code in &lt;style&gt; element</title>
                <link>https://issues.apache.org/jira/browse/SLING-9919</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/adobe/htl-spec/blob/master/SPECIFICATION.md#113-context-sensitive&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/adobe/htl-spec/blob/master/SPECIFICATION.md#113-context-sensitive&lt;/a&gt;&#160;says:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;For style and script contexts, it is mandatory to set a context. &lt;b&gt;If the context isn&apos;t set, the expression shouldn&apos;t output anything.&lt;/b&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Consider this code:&lt;/p&gt;

&lt;p&gt;logic.js:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;
use(&lt;span class=&quot;code-keyword&quot;&gt;function&lt;/span&gt; () {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; {
        weight: &lt;span class=&quot;code-quote&quot;&gt;&apos;bold&apos;&lt;/span&gt;,
        xss: &lt;span class=&quot;code-quote&quot;&gt;&apos;bold;} html {background-image: url(http:&lt;span class=&quot;code-comment&quot;&gt;//example.com/xss)&apos;&lt;/span&gt;
&lt;/span&gt;    };
});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;HTL template:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;head data-sly-use.obj=&lt;span class=&quot;code-quote&quot;&gt;&quot;logic.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;XSS&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;meta charset=&lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;style&amp;gt;&lt;/span&gt;
        p {font-weight: ${&lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;};} /* OK: &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt; is not printed */
        p {font-weight: ${obj.weight};} /* OK: value is not printed */
        p {font-weight: ${obj.xss};} /* OK: value is not printed */
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sly data-sly-test.test=&lt;span class=&quot;code-quote&quot;&gt;&quot;${obj.xss}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
            p {font-weight: ${test};} /* ERROR: malicious background is rendered */
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sly&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Hello world&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;lt;style&amp;gt; element is not supposed to contain HTML elements, but &amp;lt;sly&amp;gt; is sometimes used this way.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13341396">SLING-9919</key>
            <summary>Display context allows to inject malicious code in &lt;style&gt; element</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="karol.lewandowski">Karol Lewandowski</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Nov 2020 17:21:30 +0000</created>
                <updated>Wed, 18 Nov 2020 17:30:32 +0000</updated>
                                                                            <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kq14:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9916] Content package converter produces broken configs for typed configuration entries.</title>
                <link>https://issues.apache.org/jira/browse/SLING-9916</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The converter converts configurations from jcr trying to respect their types but in doing so it (unnecessarily) adds the type information to the keys. That wouldn&apos;t be a problem, however, it doesn&apos;t do it correctly for multiple of type String. In that case, it ends up adding just &quot;[]&quot; to the key - which changes the keyname. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13341087">SLING-9916</key>
            <summary>Content package converter produces broken configs for typed configuration entries.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Nov 2020 15:23:07 +0000</created>
                <updated>Fri, 27 Nov 2020 12:07:16 +0000</updated>
                            <resolved>Tue, 17 Nov 2020 15:25:14 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.0.18</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.0.20</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17233665" author="cziegeler" created="Tue, 17 Nov 2020 15:25:14 +0000"  >&lt;p&gt;Fixed in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; by removing all type information - the conversion to the JSON format will take care of it as the values have the right type&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/006316617b1784f33283fec92c224275b73a4f01&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/006316617b1784f33283fec92c224275b73a4f01&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13339167">SLING-9881</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ko4g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9914] If no tag is specified, HEAD is used as default branch</title>
                <link>https://issues.apache.org/jira/browse/SLING-9914</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9912&quot; title=&quot;ApiMojo is not checking out the right tag for source lookup &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9912&quot;&gt;&lt;del&gt;SLING-9912&lt;/del&gt;&lt;/a&gt;, a new problem might occur: if the pom has no &quot;tag&quot; set in the scm info, Maven by default uses &quot;HEAD&quot;  refering to the main branch - that tag is then used to checkout the source code which fails as HEAD does not exist as a branch&lt;/p&gt;</description>
                <environment></environment>
        <key id="13340879">SLING-9914</key>
            <summary>If no tag is specified, HEAD is used as default branch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Nov 2020 17:26:53 +0000</created>
                <updated>Tue, 24 Nov 2020 09:15:18 +0000</updated>
                            <resolved>Mon, 16 Nov 2020 17:33:33 +0000</resolved>
                                    <version>slingfeature-maven-plugin 1.4.14</version>
                                    <fixVersion>slingfeature-maven-plugin 1.4.16</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17232947" author="cziegeler" created="Mon, 16 Nov 2020 17:33:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/commit/f8c4b88dd332e96841007de11e18f9183b071c6a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/commit/f8c4b88dd332e96841007de11e18f9183b071c6a&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kmu8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9912] ApiMojo is not checking out the right tag for source lookup </title>
                <link>https://issues.apache.org/jira/browse/SLING-9912</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The ApiMojo in the Sling Feature Maven Plugin needs to get the source for artifacts. If it can&apos;t get it from maven, it is trying to check it out from scm. However, if there is a tag given in the scm info it is right now ignoring that info due to a bug. It should not.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13340848">SLING-9912</key>
            <summary>ApiMojo is not checking out the right tag for source lookup </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Nov 2020 14:56:17 +0000</created>
                <updated>Mon, 16 Nov 2020 15:02:30 +0000</updated>
                            <resolved>Mon, 16 Nov 2020 15:02:30 +0000</resolved>
                                    <version>slingfeature-maven-plugin 1.4.12</version>
                                    <fixVersion>slingfeature-maven-plugin 1.4.14</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17232808" author="karlpauls" created="Mon, 16 Nov 2020 15:02:30 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/commit/b71b02b91d336106de1b9355e6923c4f5b0c1ff2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/commit/b71b02b91d336106de1b9355e6923c4f5b0c1ff2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kmnc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-9902] Merging with policy HIGHEST should take alias version into account.</title>
                <link>https://issues.apache.org/jira/browse/SLING-9902</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When an artifact has an alias and that alias is clashing with a different artifact the merge policy should take the version of the alias for the selection of the highest version.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13340260">SLING-9902</key>
            <summary>Merging with policy HIGHEST should take alias version into account.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Nov 2020 14:21:10 +0000</created>
                <updated>Tue, 24 Nov 2020 09:12:13 +0000</updated>
                            <resolved>Thu, 12 Nov 2020 14:23:55 +0000</resolved>
                                    <version>Feature Model 1.2.12</version>
                                    <fixVersion>Feature Model 1.2.14</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17230657" author="karlpauls" created="Thu, 12 Nov 2020 14:23:56 +0000"  >&lt;p&gt;Done in f5cfdfb..b8833b5&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kj0o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>