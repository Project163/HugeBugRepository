<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:40:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22VFS%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="200" total="526"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[VFS-860] commons-vfs2-bom breaks dependency management</title>
                <link>https://issues.apache.org/jira/browse/VFS-860</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;b&gt;Expected behaviour:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;When you import commons-vfs2-bom, you will import the dependency management for commons-vfs2 artifacts and nothing else.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Actual behaviour:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;commons-vfs2-bom has commons-vfs2-project as parent. Therefore, it inherits the dependency-management sections of commons-vfs2-project, commons-parent and apache POMs, which will also be inadvertently imported together with the BOM itself. Moreover, and unless you make sure that commons-vfs2-bom is last in the dependency-management section of your resolved POM, these imported dependencies may override explicit dependencies that come after them in your dependency-management section. Examples of such dependencies are junit, mockito, slf4j.....&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Suggested solution:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Bill_of_Materials_.28BOM.29_POMs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Introduction to the Dependency Mechanism &#8211; Maven&lt;/a&gt;: &quot;The root of the project is the BOM POM. (...) The parent subproject has the BOM POM as its parent. It is a normal multiproject pom.&quot;.&lt;/p&gt;

&lt;p&gt;Following the recommendations, commons-vfs2-bom would have no parent. This is the same that other Apache-Commons projects do, such as in commons-numbers-bom, commons-rng-bom or commons-statistics-bom. commons-vfs2-parent wouldn&apos;t have the bom as parent, because it needs to inherit from commons-parent. Instead, commons-vfs2-parent could import commons-vfs2-bom into its own dependency-management section. Note that commons-vfs2-parent&apos;s dependency-management section contains the dependency to commons-vfs2-sandbox, which isn&apos;t included in the bom. You may want to include it in the bom and remove it from the parent (or not).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Workaround:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;With Maven 4, it&apos;s possible to excluded the undesired managed dependencies from the import. The exclusion list has around 342 lines (85 exclusions) or more, which is pretty difficult to manage.&lt;/p&gt;

&lt;p&gt;Of course, it&apos;s always possible just not to use the BOM and directly declare each managed dependency.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13619117">VFS-860</key>
            <summary>commons-vfs2-bom breaks dependency management</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jfarre">Juan Farr&#233;</reporter>
                        <labels>
                    </labels>
                <created>Sun, 25 May 2025 02:10:22 +0000</created>
                <updated>Sun, 6 Jul 2025 20:47:31 +0000</updated>
                                            <version>2.10.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18001249" author="garydgregory" created="Sun, 6 Jul 2025 18:11:17 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jfarre&quot; class=&quot;user-hover&quot; rel=&quot;jfarre&quot;&gt;jfarre&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;Yep, that&apos;s a problem that needs fixing. Do you feel like creating a pull request on GitHub?&lt;/p&gt;</comment>
                            <comment id="18001250" author="JIRAUSER308727" created="Sun, 6 Jul 2025 18:20:10 +0000"  >&lt;p&gt;Sure &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;. Should the dependency commons-vfs2-sandbox be moved to the BOM or is it something internal and not intended to be published in the BOM?&lt;/p&gt;</comment>
                            <comment id="18001345" author="garydgregory" created="Sun, 6 Jul 2025 20:08:49 +0000"  >&lt;p&gt;The sandbox contains work in progress unsuitable for publication.&lt;/p&gt;</comment>
                            <comment id="18001346" author="JIRAUSER308727" created="Sun, 6 Jul 2025 20:47:31 +0000"  >&lt;p&gt;Hello, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, I created a draft pull request: &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/698&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/698&lt;/a&gt;&lt;br/&gt;
As you can see, I had to copy a significant portion of the parent POM into the BOM itself for the default mvn build to succeed.&lt;br/&gt;
As explained in the PR, an alternative approach would be to remove the BOM from the reactor. This would allow for a much simpler pom.xml, and we could also import the BOM into the parent for project-wide management of internal dependencies. However, that would require building the BOM module separately, and I&apos;m unsure if that&apos;s acceptable.&lt;br/&gt;
Feedback is much appreciated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1w0vc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-858] Cannot use authentication with the HTTP5 provider</title>
                <link>https://issues.apache.org/jira/browse/VFS-858</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Congrats on the new release!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/blob/rel/commons-vfs-2.10.0/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/http5/Http5FileProvider.java#L236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;This line&lt;/a&gt; gets the password from the &lt;b&gt;UserAuthenticationData&lt;/b&gt; directly, without copying, and saves it in an array. The method is called from &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/rel/commons-vfs-2.10.0/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/http5/Http5FileProvider.java#L341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. Then, a &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/rel/commons-vfs-2.10.0/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/http5/Http5FileProvider.java#L344&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;few lines down&lt;/a&gt;, the authentication data is nulled which also cleans it in the credentials-provider that was passed to the http-client. And then the requests don&apos;t work.&lt;/p&gt;

&lt;p&gt;P.S. Actually, I can&apos;t seem to be able to use authentication with the HTTP4 provider either where &lt;b&gt;String&lt;/b&gt; is used for the password so I guess there is another problem. I&apos;m only able to use that with the oldest HTTP provider.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13608631">VFS-858</key>
            <summary>Cannot use authentication with the HTTP5 provider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="boris-petrov">Boris Petrov</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Feb 2025 13:57:59 +0000</created>
                <updated>Sat, 15 Feb 2025 15:44:17 +0000</updated>
                                            <version>2.10.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17927409" author="garydgregory" created="Sat, 15 Feb 2025 15:44:17 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=boris-petrov&quot; class=&quot;user-hover&quot; rel=&quot;boris-petrov&quot;&gt;boris-petrov&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;I can see how the HC5 provider could have an issue but not the HC4 one since creating a String should make a copy of the char array input.&lt;/p&gt;

&lt;p&gt;It would be helpful if you could update the existing unit tests to demonstrate the issue in HC5 and HC4.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1u8lk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-857] listFiles() fails if the FTP Server (IIS based) contains any file with name in non-ascii Unicode character</title>
                <link>https://issues.apache.org/jira/browse/VFS-857</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;FTPClient method listFiles() fails if the FTP Server contains a file with name in non-ascii Unicode character. This is mainly reported if the server is &lt;b&gt;Microsoft IIS based&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;VFS2 is not sending &quot;OPTS UTF8 true&quot; in the request for list files.&lt;/p&gt;

&lt;p&gt;The following code does not have any effect in case the FTP Server is IIS.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
confBuilder.setControlEncoding(options, StandardCharsets.UTF_8.displayName());
confBuilder.setAutodetectUtf8(options, &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.TRUE);
confBuilder.setFileType(options, FtpFileType.BINARY);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;org.apache.commons.vfs2.FileSystemException: Could not find files in &quot;ftp://192.168.100.8/&quot;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.example;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileObject;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileSystemManager;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileSystemOptions;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.VFS;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.provider.ftp.FtpFileSystemConfigBuilder;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Main {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        &lt;span class=&quot;code-comment&quot;&gt;// FTP server details
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; host = &lt;span class=&quot;code-quote&quot;&gt;&quot;192.168.100.8&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username = &lt;span class=&quot;code-quote&quot;&gt;&quot;imran&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password = &lt;span class=&quot;code-quote&quot;&gt;&quot;xxxxxxx&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; remoteDir = &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;file.encoding&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);
            FileSystemManager fsManager = VFS.getManager();
            FileSystemOptions opts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
            FtpFileSystemConfigBuilder.getInstance().setAutodetectUtf8(opts, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
            FtpFileSystemConfigBuilder.getInstance().setControlEncoding(opts, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);
            FtpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
            FtpFileSystemConfigBuilder.getInstance().setPassiveMode(opts, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ftpUrl = &lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + username + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + password + &lt;span class=&quot;code-quote&quot;&gt;&quot;@&quot;&lt;/span&gt; + host + remoteDir;
&lt;/span&gt;            FileObject remoteFolder = fsManager.resolveFile(ftpUrl, opts);
            FileObject[] files = remoteFolder.getChildren();
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Files in &quot;&lt;/span&gt; + remoteDir + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (FileObject file : files) {
                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileName = file.getName().getBaseName();
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(fileName);
            }
            remoteFolder.close();
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            e.printStackTrace();
        }
    }
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;project xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//maven.apache.org/POM/4.0.0&quot;&lt;/span&gt;
&lt;/span&gt;         xmlns:xsi=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;
&lt;/span&gt;         xsi:schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
    &amp;lt;parent&amp;gt;
        &amp;lt;groupId&amp;gt;org.example&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;VFS2Test&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;
    &amp;lt;/parent&amp;gt;

    &amp;lt;artifactId&amp;gt;Test&amp;lt;/artifactId&amp;gt;

    &amp;lt;properties&amp;gt;
        &amp;lt;maven.compiler.source&amp;gt;17&amp;lt;/maven.compiler.source&amp;gt;
        &amp;lt;maven.compiler.target&amp;gt;17&amp;lt;/maven.compiler.target&amp;gt;
        &amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;
    &amp;lt;/properties&amp;gt;
    &amp;lt;dependencies&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;commons-net&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;commons-net&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;3.12.0-SNAPSHOT&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;commons-vfs2&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;2.10.1-SNAPSHOT&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;
&amp;lt;/project&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Stack Trace&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;Caused by: org.apache.commons.vfs2.FileSystemException: Could not find files in &quot;ftp://192.168.100.8/&quot;.&lt;br/&gt;
&#160; &#160; at org.apache.commons.vfs2//org.apache.commons.vfs2.provider.AbstractFileObject.findFiles(AbstractFileObject.java:1016)&lt;br/&gt;
&#160; &#160; at org.apache.commons.vfs2//org.apache.commons.vfs2.provider.AbstractFileObject.listFiles(AbstractFileObject.java:1664)&lt;br/&gt;
&#160; &#160; at org.apache.commons.vfs2//org.apache.commons.vfs2.provider.AbstractFileObject.findFiles(AbstractFileObject.java:991)&lt;br/&gt;
&#160; &#160; ... 18 more&lt;br/&gt;
Caused by: java.nio.file.InvalidPathException: Illegal char &amp;lt;?&amp;gt; at index 49: /Best Practices &amp;amp; Guidelines/???? ???? ????? ???? ?? ???? ?? ????? ???? ?????.docx&lt;br/&gt;
&#160; &#160; at java.base/sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)&lt;br/&gt;
&#160; &#160; at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)&lt;br/&gt;
&#160; &#160; at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)&lt;br/&gt;
&#160; &#160; at java.base/sun.nio.fs.WindowsPath.parse(WindowsPath.java:92)&lt;br/&gt;
&#160; &#160; at java.base/sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:232)&lt;br/&gt;
&#160; &#160; at java.base/java.nio.file.Path.of(Path.java:147)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Microsoft IIS based FTP Server&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13074745/13074745_image-2025-02-14-19-24-23-511.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</environment>
        <key id="13608562">VFS-857</key>
            <summary>listFiles() fails if the FTP Server (IIS based) contains any file with name in non-ascii Unicode character</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="imranansari">imran ansari</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Feb 2025 14:24:29 +0000</created>
                <updated>Wed, 26 Feb 2025 11:44:02 +0000</updated>
                                            <version>2.9.0</version>
                    <version>2.10.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17927144" author="garydgregory" created="Fri, 14 Feb 2025 14:51:38 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imranansari&quot; class=&quot;user-hover&quot; rel=&quot;imranansari&quot;&gt;imranansari&lt;/a&gt;&lt;br/&gt;
We just released 2.10.0, would you check with this new version, please?&lt;/p&gt;</comment>
                            <comment id="17927146" author="michael-o" created="Fri, 14 Feb 2025 15:03:23 +0000"  >&lt;p&gt;I bet it uses some Windows encoding...&lt;/p&gt;</comment>
                            <comment id="17927164" author="JIRAUSER308700" created="Fri, 14 Feb 2025 16:22:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; The problem is reproduced with version 2.10.0. Other FTP clients like WinSCP shows the correct file names if we enable AutoUTF8 from client side in WinSCP.&lt;/p&gt;

&lt;p&gt;VFS2 works fine with other FTP Servers like FileZilla but not works with IIS.&lt;/p&gt;</comment>
                            <comment id="17927321" author="garydgregory" created="Sat, 15 Feb 2025 02:49:01 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imranansari&quot; class=&quot;user-hover&quot; rel=&quot;imranansari&quot;&gt;imranansari&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is it possible that the &quot;OPTS UTF8 true&quot; syntax is specific to your server?&lt;/p&gt;

&lt;p&gt;There is an expired RFC for &quot;UTF-8 Option for FTP&quot; here: &lt;a href=&quot;https://datatracker.ietf.org/doc/html/draft-ietf-ftpext-utf-8-option-00&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://datatracker.ietf.org/doc/html/draft-ietf-ftpext-utf-8-option-00&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The syntax in the RFC is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
OPTS &amp;lt;SP&amp;gt; UTF-8 [ &amp;lt;SP&amp;gt; NLST ] &amp;lt;CRLF&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This feature should be handled in Commons Net since Commons VFS configures a Net FTP client.&lt;/p&gt;

&lt;p&gt;This needs more research...&lt;/p&gt;

</comment>
                            <comment id="17927326" author="JIRAUSER308700" created="Sat, 15 Feb 2025 03:41:15 +0000"  >&lt;p&gt;Syntax &quot;OPTS UTF8&quot; will work and can be dev tested. Standard RFC syntax is ok.&lt;/p&gt;

&lt;p&gt;Secondly, do you mean that the ticket is in wrong place and it should be opened under commons-net instead of commons-vfs?&lt;/p&gt;</comment>
                            <comment id="17927340" author="garydgregory" created="Sat, 15 Feb 2025 05:55:37 +0000"  >&lt;p&gt;The ticket is not wrong, since something needs changing, which might end up being updating to a new version of Commons Net. It sure seems like a new Commons Net ticket should be created for this issue, please do so.&lt;/p&gt;</comment>
                            <comment id="17927557" author="garydgregory" created="Sun, 16 Feb 2025 19:30:57 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imranansari&quot; class=&quot;user-hover&quot; rel=&quot;imranansari&quot;&gt;imranansari&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I updated Commons Net to support the OPTS command through an API and also a change to allow an FTP error response without a message (which I needed for local testing).&lt;/p&gt;

&lt;p&gt;Please try this experiment:&lt;/p&gt;

&lt;p&gt;Update your POM or dependency management to use:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Apache Commons Net 3.12.0-SNAPSHOT &lt;b&gt;This must be before Commons VFS on your classpath&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;Apache Commons VFS 2.10.1-SNAPSHOT&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        ...
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject remoteFolder = manager.resolveFile(uri, options);
        FtpFileObject ftpFileObject = (FtpFileObject) remoteFolder;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FtpFileSystem ftpFileSystem = (FtpFileSystem) ftpFileObject.getFileSystem();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FTPClientWrapper client = (FTPClientWrapper) ftpFileSystem.getClient();
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; result = client.sendOptions(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;NLST&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; that the result code makes sense &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; your server!
&lt;/span&gt;        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If the above works, we can see how to make it simpler and easier.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17927624" author="JIRAUSER308700" created="Mon, 17 Feb 2025 07:38:26 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;br/&gt;
The library version update did not work. It is same as old and your Java code has an issue at line number 5.&lt;br/&gt;
int result = client.sendOptions(&quot;UTF-8&quot;, &quot;NLST&quot;);&lt;/p&gt;

&lt;p&gt;I did not find any method sendOptions() in the library classes like FTPClient. Therefore, I am unable to compile this code.&lt;br/&gt;
&quot;Cannot resolve method &apos;sendOptions&apos; in &apos;FTPClientWrapper&apos;&quot;&lt;/p&gt;</comment>
                            <comment id="17927740" author="garydgregory" created="Mon, 17 Feb 2025 12:05:23 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imranansari&quot; class=&quot;user-hover&quot; rel=&quot;imranansari&quot;&gt;imranansari&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;And yet it&apos;s there: &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/9d12984f25f6a78e72483a62b87bcbdda3dd6728/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/ftp/FTPClientWrapper.java#L348&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/9d12984f25f6a78e72483a62b87bcbdda3dd6728/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/ftp/FTPClientWrapper.java#L348&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Did you build from git master?&lt;/p&gt;

&lt;p&gt;I pushed a snapshot to &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17927786" author="JIRAUSER308700" created="Mon, 17 Feb 2025 14:41:18 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;br/&gt;
I built the code and the new code compiled and executed. The code returned by sendOptions() is 501. Changing option this way or time is not successful. I checked that FTP 501 is a kind of syntax error. I tried different syntax of command but not worked. I see the see the same ? ? ? ? question marks in the place of actual file name.&lt;/p&gt;</comment>
                            <comment id="17927800" author="garydgregory" created="Mon, 17 Feb 2025 15:29:55 +0000"  >&lt;p&gt;FYI:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;IIS FTP return codes: &lt;a href=&quot;https://learn.microsoft.com/en-us/troubleshoot/developer/webapps/iis/ftp-administration-management/ftp-status-codes-iis-7-and-later-versions#the-ftp-status-codes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://learn.microsoft.com/en-us/troubleshoot/developer/webapps/iis/ftp-administration-management/ftp-status-codes-iis-7-and-later-versions#the-ftp-status-codes&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Commands Supported IIS FTP: &lt;a href=&quot;https://learn.microsoft.com/en-us/archive/blogs/lexli/commands-supported-by-ftpwebrequest-and-iis-ftp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://learn.microsoft.com/en-us/archive/blogs/lexli/commands-supported-by-ftpwebrequest-and-iis-ftp&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Windows Server FTP command: &lt;a href=&quot;https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/ftp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/ftp&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;I could only find a non-Microsoft page for the OPTS command: &lt;a href=&quot;https://www.solarwinds.com/serv-u/tutorials/feat-opts-help-stat-nlst-xcup-xcwd-ftp-command&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.solarwinds.com/serv-u/tutorials/feat-opts-help-stat-nlst-xcup-xcwd-ftp-command&lt;/a&gt;
&lt;blockquote&gt;&lt;p&gt;UTF8 &#8211; Configures the server to enable (ON) or disable (OFF) UTF-8 encoding which is useful for non-ANSI character sets. This is very useful for Asian file names and paths.&lt;/p&gt;&lt;/blockquote&gt;&lt;/li&gt;
	&lt;li&gt;Do you have a link to Microsoft docs for the OPTS command?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Based on the above, I would try:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; result = client.sendOptions(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF8&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ON&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17928058" author="JIRAUSER308700" created="Tue, 18 Feb 2025 12:20:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;br/&gt;
This line&#160;client.sendOptions(&quot;UTF8&quot;, &quot;ON&quot;); returns 200 but the names are not correct. Following is the output&lt;/p&gt;

&lt;p&gt;Files in /:&lt;br/&gt;
???? ???? ????? ???? ?? ???? ?? ????? ???? ?????.docx&lt;br/&gt;
Concreting&lt;br/&gt;
Guidelines- Legal.pdf&lt;br/&gt;
Guidelines.pdf&lt;br/&gt;
Shuttering&lt;br/&gt;
Steel Calculation&lt;br/&gt;
Zedem&lt;br/&gt;
csv&lt;br/&gt;
tips.txt&lt;/p&gt;</comment>
                            <comment id="17928090" author="garydgregory" created="Tue, 18 Feb 2025 13:58:17 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imranansari&quot; class=&quot;user-hover&quot; rel=&quot;imranansari&quot;&gt;imranansari&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Would you run your use case for your server in a debugger and see if you can see what goes wrong?&lt;/p&gt;

&lt;p&gt;I can&apos;t tell if this could be a bug in Commons VFS, Commons NET, or an unexpected, or unaccounted for behavior in either.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="17928103" author="michael-o" created="Tue, 18 Feb 2025 14:24:48 +0000"  >&lt;p&gt;Tcpdump&lt;/p&gt;</comment>
                            <comment id="17928285" author="JIRAUSER308700" created="Wed, 19 Feb 2025 06:47:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;br/&gt;
I configured VFS code locally and tried different ways but nothing worked.&#160;&lt;/p&gt;

&lt;p&gt;Following code gets executed but in the filenames there are question marks. client.sendCommand(&quot;OPTS UTF8 ON&quot;); responses 200&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
client.setCharset(StandardCharsets.UTF_8);
client.connect(hostname, port);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;((autodetectUTF8 != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &amp;amp;&amp;amp; (autodetectUTF8)) {
    client.sendCommand(&lt;span class=&quot;code-quote&quot;&gt;&quot;OPTS UTF8 ON&quot;&lt;/span&gt;);
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;output:&lt;/p&gt;

&lt;p&gt;Files in /:&lt;br/&gt;
Concreting&lt;br/&gt;
Guidelines- Legal.pdf&lt;br/&gt;
Guidelines.pdf&lt;br/&gt;
Shuttering&lt;br/&gt;
Steel Calculation&lt;br/&gt;
Zedem&lt;br/&gt;
csv&lt;br/&gt;
tips.txt&lt;br/&gt;
???? ???? ????? ???? ?? ???? ?? ????? ???? ?????.docx&lt;/p&gt;</comment>
                            <comment id="17928466" author="garydgregory" created="Wed, 19 Feb 2025 15:51:55 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imranansari&quot; class=&quot;user-hover&quot; rel=&quot;imranansari&quot;&gt;imranansari&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Is your IIS configured with &quot;Allow UTF8&quot; set to &quot;true&quot; as in the screenshot below?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13074877/13074877_image-2025-02-19-10-51-08-913.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17928481" author="JIRAUSER308700" created="Wed, 19 Feb 2025 16:02:35 +0000"  >&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13074879/13074879_image-2025-02-19-21-01-43-836.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13074880/13074880_image-2025-02-19-21-02-31-727.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17928571" author="garydgregory" created="Wed, 19 Feb 2025 21:18:27 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imranansari&quot; class=&quot;user-hover&quot; rel=&quot;imranansari&quot;&gt;imranansari&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please try this:&lt;/p&gt;

&lt;p&gt;Make sure you depend on Apache Commons Net 3.12.0-SNAPSHOT either from:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/commons-net/commons-net/3.12.0-SNAPSHOT&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/commons-net/commons-net/3.12.0-SNAPSHOT&lt;/a&gt; or&lt;/li&gt;
	&lt;li&gt;a local build from the git repository &lt;a href=&quot;https://github.com/apache/commons-net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-net/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Run the class &lt;tt&gt;org.apache.commons.net.examples.ftp.FTPClientExample&lt;/tt&gt; with the arguments:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-A -n -E UTF-8 --OPTS &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF8 ON&quot;&lt;/span&gt; localhost /unicode
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where &quot;/unicode&quot; is a path to the folder on your FTP server that contains the files that contain the UTF-8 characters.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17928660" author="JIRAUSER308700" created="Thu, 20 Feb 2025 06:47:52 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;br/&gt;
I checked out the code repo and built locally. &lt;br/&gt;
Then ran the example client with parameters.&lt;br/&gt;
Changed to local user as anonymous user was not able to access.&lt;br/&gt;
Ran the example successfully and the output is correct.&lt;/p&gt;


&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Output&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;220 Microsoft FTP Service&lt;br/&gt;
Connected to localhost on 21&lt;br/&gt;
USER *******&lt;br/&gt;
331 Password required&lt;br/&gt;
PASS *******&lt;br/&gt;
230 User logged in.&lt;br/&gt;
SYST&lt;br/&gt;
215 Windows_NT&lt;br/&gt;
Remote system is Windows_NT&lt;br/&gt;
OPTS UTF8 ON&lt;br/&gt;
200 OPTS UTF8 command successful - UTF8 encoding now ON.&lt;br/&gt;
TYPE A&lt;br/&gt;
200 Type set to A.&lt;br/&gt;
PASV&lt;br/&gt;
227 Entering Passive Mode (127,0,0,1,197,53).&lt;br/&gt;
NLST /&lt;br/&gt;
125 Data connection already open; Transfer starting.&lt;br/&gt;
226 Transfer complete.&lt;br/&gt;
/Concreting&lt;br/&gt;
/csv&lt;br/&gt;
/Guidelines- Legal.pdf&lt;br/&gt;
/Guidelines.pdf&lt;br/&gt;
/Shuttering&lt;br/&gt;
/Steel Calculation&lt;br/&gt;
/tips.txt&lt;br/&gt;
/Zedem&lt;br/&gt;
&lt;b&gt;/&#1575;&#1662;&#1606;&#1575; &#1605;&#1705;&#1575;&#1606; &#1578;&#1593;&#1605;&#1740;&#1585; &#1705;&#1585;&#1606;&#1746; &#1587;&#1746; &#1662;&#1729;&#1604;&#1746; &#1740;&#1729; &#1605;&#1590;&#1605;&#1608;&#1606; &#1590;&#1585;&#1608;&#1585; &#1662;&#1681;&#1726;&#1740;&#1722;.docx&lt;/b&gt;&lt;br/&gt;
NOOP&lt;br/&gt;
200 NOOP command successful.&lt;br/&gt;
QUIT&lt;br/&gt;
221 Goodbye.&lt;/p&gt;

&lt;p&gt;Process finished with exit code 0&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17928753" author="garydgregory" created="Thu, 20 Feb 2025 11:29:11 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=imranansari&quot; class=&quot;user-hover&quot; rel=&quot;imranansari&quot;&gt;imranansari&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;OK, good. How about with a lower case &quot;L&quot; instead of &quot;n&quot;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-A -l -E UTF-8 --OPTS &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF8 ON&quot;&lt;/span&gt; localhost /unicode
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;?&lt;br/&gt;
The &quot;l&quot; is for a list of files instead of a list of names.&lt;/p&gt;
</comment>
                            <comment id="17928802" author="JIRAUSER308700" created="Thu, 20 Feb 2025 13:47:53 +0000"  >&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Following is the output with -A -l -E UTF-8 --OPTS &quot;UTF8 ON&quot; localhost /unicode&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;220 Microsoft FTP Service&lt;br/&gt;
Connected to localhost on 21&lt;br/&gt;
USER *******&lt;br/&gt;
331 Password required&lt;br/&gt;
PASS *******&lt;br/&gt;
230 User logged in.&lt;br/&gt;
SYST&lt;br/&gt;
215 Windows_NT&lt;br/&gt;
Remote system is Windows_NT&lt;br/&gt;
OPTS UTF8 ON&lt;br/&gt;
200 OPTS UTF8 command successful - UTF8 encoding now ON.&lt;br/&gt;
TYPE A&lt;br/&gt;
200 Type set to A.&lt;br/&gt;
PASV&lt;br/&gt;
227 Entering Passive Mode (127,0,0,1,229,8).&lt;br/&gt;
LIST /&lt;br/&gt;
125 Data connection already open; Transfer starting.&lt;br/&gt;
226 Transfer complete.&lt;br/&gt;
04-15-23 &#160;08:42AM &#160; &#160; &#160; &amp;lt;DIR&amp;gt; &#160; &#160; &#160; &#160; &#160;Concreting&lt;br/&gt;
d--------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;0 2023-04-15 08:42 PKT Concreting&lt;br/&gt;
01-31-25 &#160;11:08AM &#160; &#160; &#160; &amp;lt;DIR&amp;gt; &#160; &#160; &#160; &#160; &#160;csv&lt;br/&gt;
d--------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;0 2025-01-31 11:08 PKT csv&lt;br/&gt;
04-08-23 &#160;09:23AM &#160; &#160; &#160; &#160; &#160; &#160; &#160; 740337 Guidelines- Legal.pdf&lt;br/&gt;
---------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 740337 2023-04-08 09:23 PKT Guidelines- Legal.pdf&lt;br/&gt;
04-08-23 &#160;09:22AM &#160; &#160; &#160; &#160; &#160; &#160; &#160; 744905 Guidelines.pdf&lt;br/&gt;
---------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 744905 2023-04-08 09:22 PKT Guidelines.pdf&lt;br/&gt;
04-15-23 &#160;08:04AM &#160; &#160; &#160; &amp;lt;DIR&amp;gt; &#160; &#160; &#160; &#160; &#160;Shuttering&lt;br/&gt;
d--------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;0 2023-04-15 08:04 PKT Shuttering&lt;br/&gt;
04-15-23 &#160;08:42AM &#160; &#160; &#160; &amp;lt;DIR&amp;gt; &#160; &#160; &#160; &#160; &#160;Steel Calculation&lt;br/&gt;
d--------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;0 2023-04-15 08:42 PKT Steel Calculation&lt;br/&gt;
03-16-23 &#160;10:23AM &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;63505 tips.txt&lt;br/&gt;
---------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;63505 2023-03-16 10:23 PKT tips.txt&lt;br/&gt;
03-23-23 &#160;11:21AM &#160; &#160; &#160; &amp;lt;DIR&amp;gt; &#160; &#160; &#160; &#160; &#160;Zedem&lt;br/&gt;
d--------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;0 2023-03-23 11:21 PKT Zedem&lt;br/&gt;
04-08-23 &#160;09:23AM &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;89068 &#1575;&#1662;&#1606;&#1575; &#1605;&#1705;&#1575;&#1606; &#1578;&#1593;&#1605;&#1740;&#1585; &#1705;&#1585;&#1606;&#1746; &#1587;&#1746; &#1662;&#1729;&#1604;&#1746; &#1740;&#1729; &#1605;&#1590;&#1605;&#1608;&#1606; &#1590;&#1585;&#1608;&#1585; &#1662;&#1681;&#1726;&#1740;&#1722;.docx&lt;br/&gt;
---------- &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;89068 2023-04-08 09:23 PKT &#1575;&#1662;&#1606;&#1575; &#1605;&#1705;&#1575;&#1606; &#1578;&#1593;&#1605;&#1740;&#1585; &#1705;&#1585;&#1606;&#1746; &#1587;&#1746; &#1662;&#1729;&#1604;&#1746; &#1740;&#1729; &#1605;&#1590;&#1605;&#1608;&#1606; &#1590;&#1585;&#1608;&#1585; &#1662;&#1681;&#1726;&#1740;&#1722;.docx&lt;br/&gt;
NOOP&lt;br/&gt;
200 NOOP command successful.&lt;br/&gt;
QUIT&lt;br/&gt;
221 Goodbye.&lt;/p&gt;

&lt;p&gt;Process finished with exit code 0&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17928882" author="garydgregory" created="Thu, 20 Feb 2025 18:21:03 +0000"  >&lt;p&gt;OK, so it looks like processing at the Commons Net level is OK, so it must be something in how Commons VFS uses the Net API...&lt;/p&gt;</comment>
                            <comment id="17928884" author="JIRAUSER308700" created="Thu, 20 Feb 2025 18:24:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;br/&gt;
Yes the response from the commons-net example is correct.&lt;br/&gt;
You figured it out that Commons-VFS needed to be fixed.&lt;br/&gt;
What will be the next action.&lt;/p&gt;</comment>
                            <comment id="17930647" author="JIRAUSER308700" created="Wed, 26 Feb 2025 10:48:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;br/&gt;
Any luck for me to get the fix in near future?&lt;/p&gt;</comment>
                            <comment id="17930656" author="garydgregory" created="Wed, 26 Feb 2025 11:44:02 +0000"  >&lt;p&gt;I&apos;ve not found a fix yet but you are welcome to provide a pull request on GitHub with a fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13074746" name="Output.png" size="26005" author="imranansari" created="Fri, 14 Feb 2025 16:19:33 +0000"/>
                            <attachment id="13074745" name="image-2025-02-14-19-24-23-511.png" size="42348" author="imranansari" created="Fri, 14 Feb 2025 14:24:23 +0000"/>
                            <attachment id="13074877" name="image-2025-02-19-10-51-08-913.png" size="73452" author="ggregory" created="Wed, 19 Feb 2025 15:51:09 +0000"/>
                            <attachment id="13074879" name="image-2025-02-19-21-01-43-836.png" size="17881" author="imranansari" created="Wed, 19 Feb 2025 16:01:44 +0000"/>
                            <attachment id="13074880" name="image-2025-02-19-21-02-31-727.png" size="87451" author="imranansari" created="Wed, 19 Feb 2025 16:02:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1u868:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-854] SoftRefFilesCache logs password when FS is closed</title>
                <link>https://issues.apache.org/jira/browse/VFS-854</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;We use DEBUG logging enabled for VFS to diagnose integration problems with external connections.&lt;br/&gt;
Unfortunately it leads to logging of clear text password in logs if use basic auth with SFTP/HTTP4S connectors&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;D 240526 060013.993 [ScheduledIpfSynchronizer_Worker-1] SoftRefFilesCache - Close FileSystem: http4s://mylogin:mypassword@my.company.com:8443/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13580708">VFS-854</key>
            <summary>SoftRefFilesCache logs password when FS is closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="turbanoff">Andrey Turbanov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 May 2024 14:12:02 +0000</created>
                <updated>Tue, 23 Jul 2024 13:59:44 +0000</updated>
                            <resolved>Tue, 28 May 2024 16:43:22 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17850081" author="michael-o" created="Tue, 28 May 2024 16:09:40 +0000"  >&lt;p&gt;Well, it does log the URL, not the password. You should maybe provide the creds separately. Using auth info is deprecated in recent RFCs.&lt;/p&gt;</comment>
                            <comment id="17850087" author="b.eckenfels" created="Tue, 28 May 2024 16:22:38 +0000"  >&lt;p&gt;&amp;gt; You should maybe provide the creds separately&lt;/p&gt;

&lt;p&gt;Agreed, however I propose that this debug log is changed to getRootName().getFriendlyURL() instead. Same for the throw in SftpFileSystem getChannel.&lt;/p&gt;

&lt;p&gt;Unfortunatelly we cant change that for AbstractFileObject.toString() easily, anymore.&lt;/p&gt;</comment>
                            <comment id="17868078" author="turbanoff" created="Tue, 23 Jul 2024 13:53:40 +0000"  >&lt;p&gt;Is there any plans to release 2.10.0 version?&lt;/p&gt;</comment>
                            <comment id="17868079" author="garydgregory" created="Tue, 23 Jul 2024 13:59:44 +0000"  >&lt;p&gt;Yes! It&apos;s next on my list.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1pgug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-853] Due to double weak references the file listener are not executed</title>
                <link>https://issues.apache.org/jira/browse/VFS-853</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;On DelegatedFileObjects the Listener is registered with a WeakReference listener. The original code which did that has a (errounous) duplication of listeners. This leads to the problem that the &quot;middle&quot; listener is never referenced and therefore imediatelly collected, which in turn leads to removal of the &quot;outer&quot; listener.&lt;/p&gt;

&lt;p&gt;I have added a testcase which reproduces the problem and does not fail when duplication is removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13580588">VFS-853</key>
            <summary>Due to double weak references the file listener are not executed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 May 2024 15:24:46 +0000</created>
                <updated>Tue, 28 May 2024 20:06:15 +0000</updated>
                            <resolved>Tue, 28 May 2024 20:06:15 +0000</resolved>
                                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17850162" author="garydgregory" created="Tue, 28 May 2024 20:06:15 +0000"  >&lt;p&gt;PR merged.&lt;br/&gt;
TY &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1pg3s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-852] webdav4s is not working with multiple TLS Record Layer segments</title>
                <link>https://issues.apache.org/jira/browse/VFS-852</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;We&apos;re trying to use webdav over SSL using webdav4s provider. We&apos;re running into connection closed error because the connection had been released from the finally block as part of org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject#executeRequest method. The issue becomes visible from org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject#getProperties(org.apache.commons.vfs2.provider.GenericURLFileName, int, org.apache.jackrabbit.webdav.property.DavPropertyNameSet, boolean) method which we&apos;re using. I would imagine it&apos;d also be an issue from org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject#doListChildrenResolved method. As both of these methods try to get the body of the response after the connection had been released from executeRequest method.&lt;/p&gt;

&lt;p&gt;The design assumption was that the entire data (http response) was consumed before closing. However while debugging the issue we have found that TLS transmission containing the application data had been broken up into multiple TLS Record Layer Segments (Fragments as designed). While filling up the buffer from SSL Socket it stopped after the 1st TLS record layer, which only contained the http headers as it hit the end of that stream (fragment). Non-ssl transaction doesn&apos;t have fragmentation so buffer fills up entire response at once thus doesn&apos;t cause the connection closed error.&lt;/p&gt;

&lt;p&gt;I&apos;d imagine the fix would be to implement an overloading executeRequest method for keeping the connection open and close it after retrieving the body of the response from getProperties and doListChildrenResolved method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13562250">VFS-852</key>
            <summary>webdav4s is not working with multiple TLS Record Layer segments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sodrul.bhuiyan">Sodrul Bhuiyan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Dec 2023 18:23:33 +0000</created>
                <updated>Tue, 14 May 2024 15:08:11 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17798314" author="reschke" created="Mon, 18 Dec 2023 18:38:10 +0000"  >&lt;p&gt;Could you clarify why you think this is a bug in Jackrabbit? (As opposed to the layers above or Apache HttpClient?).&lt;/p&gt;

&lt;p&gt;Could you attach a test case, or at least a stack trace?&lt;/p&gt;</comment>
                            <comment id="17798315" author="JIRAUSER303553" created="Mon, 18 Dec 2023 18:41:55 +0000"  >&lt;p&gt;Sorry I thought it&apos;s part of Jackrabbit project but the webdav4s provider is coming from VFS2 jackrabbit2 2.9.0. Please let me know if it belongs to another project.&lt;/p&gt;</comment>
                            <comment id="17798318" author="reschke" created="Mon, 18 Dec 2023 18:44:29 +0000"  >&lt;p&gt;Moved. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=woonsan&quot; class=&quot;user-hover&quot; rel=&quot;woonsan&quot;&gt;woonsan&lt;/a&gt; - maybe you can have a look?&lt;/p&gt;</comment>
                            <comment id="17798319" author="michael-o" created="Mon, 18 Dec 2023 18:48:51 +0000"  >&lt;p&gt;This sounds like a HTTP client error, no?&lt;/p&gt;</comment>
                            <comment id="17798320" author="JIRAUSER303553" created="Mon, 18 Dec 2023 18:56:03 +0000"  >&lt;p&gt;It&apos;s not Http client error because org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.executeRequest method is releasing the connection assuming entire http response had been consumed (copied in buffer). As stated in the problem the code works fine for non-ssl.&lt;/p&gt;

&lt;p&gt;&#160; &#160; private HttpResponse executeRequest(HttpUriRequest request) throws FileSystemException {&lt;br/&gt;
&#160; &#160; &#160; &#160; HttpResponse var4;&lt;br/&gt;
&#160; &#160; &#160; &#160; try {&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; HttpResponse response = this.executeHttpUriRequest(request);&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; int status = response.getStatusLine().getStatusCode();&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; if (status == 404 || status == 410) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; throw new FileNotFoundException(request.getURI());
&#160; &#160; &#160; &#160; &#160; &#160; }

&lt;p&gt;&#160; &#160; &#160; &#160; &#160; &#160; if (request instanceof BaseDavRequest) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; ((BaseDavRequest)request).checkSuccess(response);
&#160; &#160; &#160; &#160; &#160; &#160; }

&lt;p&gt;&#160; &#160; &#160; &#160; &#160; &#160; var4 = response;&lt;br/&gt;
&#160; &#160; &#160; &#160; } catch (FileSystemException var10) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; throw var10;
&#160; &#160; &#160; &#160; }
&lt;p&gt; catch (IOException var11) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; throw new FileSystemException(var11);
&#160; &#160; &#160; &#160; }
&lt;p&gt; catch (DavException var12) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; throw ExceptionConverter.generate(var12);
&#160; &#160; &#160; &#160; }
&lt;p&gt; finally {&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; if (request instanceof HttpRequestBase) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; ((HttpRequestBase)request).releaseConnection();
&#160; &#160; &#160; &#160; &#160; &#160; }

&lt;p&gt;&#160; &#160; &#160; &#160; }&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; return var4;&lt;br/&gt;
&#160; &#160; }&lt;/p&gt;</comment>
                            <comment id="17798702" author="JIRAUSER303553" created="Tue, 19 Dec 2023 18:47:30 +0000"  >&lt;p&gt;The statck trace doesn&apos;t highlight the issue but here it&apos;s. This trace is from a Mock up class simulating getProperties and executeRequest methods. From the http headers it knows the content length is 306 byte but read 0 byte of the body so far. Since the connection had been released, it throws exception.&lt;/p&gt;

&lt;p&gt;org.apache.jackrabbit.webdav.DavException&lt;br/&gt;
&#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsMultiStatus(BaseDavRequest.java:93)&lt;br/&gt;
&#160; &#160; at com.sodrul.webdav.TestWebDav4s.main(TestWebDav4s.java:36)&lt;br/&gt;
Caused by: org.apache.http.ConnectionClosedException: Premature end of Content-Length delimited message body (expected: 306; received: 0)&lt;br/&gt;
&#160; &#160; at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:140)&lt;br/&gt;
&#160; &#160; at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:118)&lt;br/&gt;
&#160; &#160; at com.sun.org.apache.xerces.internal.impl.XMLEntityManager$RewindableInputStream.read(XMLEntityManager.java:2958)&lt;br/&gt;
&#160; &#160; at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:675)&lt;br/&gt;
&#160; &#160; at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:148)&lt;br/&gt;
&#160; &#160; at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:805)&lt;br/&gt;
&#160; &#160; at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:770)&lt;br/&gt;
&#160; &#160; at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)&lt;br/&gt;
&#160; &#160; at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:243)&lt;br/&gt;
&#160; &#160; at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:338)&lt;br/&gt;
&#160; &#160; at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:121)&lt;br/&gt;
&#160; &#160; at org.apache.jackrabbit.webdav.xml.DomUtil.parseDocument(DomUtil.java:104)&lt;br/&gt;
&#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsDocument(BaseDavRequest.java:69)&lt;br/&gt;
&#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsMultiStatus(BaseDavRequest.java:87)&lt;/p&gt;

&lt;p&gt;The reason I don&apos;t think it&apos;s a http client issue is because it&apos;s appeared to be designed that way so that the responsibility of retrieving the http body is on the consumer who&apos;s calling it. I do see doReceiveResponse method retrieving the header&apos;s only and setting the HttpEntity (InputStream) for the body (see below)&lt;/p&gt;

&lt;p&gt;org.apache.http.protocol.HttpRequestExecutor#doReceiveResponse&lt;br/&gt;
protected HttpResponse doReceiveResponse(HttpRequest request, HttpClientConnection conn, HttpContext context) throws HttpException, IOException {&lt;br/&gt;
&#160; &#160; &#160; &#160; Args.notNull(request, &quot;HTTP request&quot;);&lt;br/&gt;
&#160; &#160; &#160; &#160; Args.notNull(conn, &quot;Client connection&quot;);&lt;br/&gt;
&#160; &#160; &#160; &#160; Args.notNull(context, &quot;HTTP context&quot;);&lt;br/&gt;
&#160; &#160; &#160; &#160; HttpResponse response = null;&lt;br/&gt;
&#160; &#160; &#160; &#160; int statusCode = 0;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; while(response == null || statusCode &amp;lt; 200) {&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; response = conn.receiveResponseHeader();&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; statusCode = response.getStatusLine().getStatusCode();&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; if (statusCode &amp;lt; 100) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; throw new ProtocolException(&quot;Invalid response: &quot; + response.getStatusLine());
&#160; &#160; &#160; &#160; &#160; &#160; }

&lt;p&gt;&#160; &#160; &#160; &#160; &#160; &#160; if (this.canResponseHaveBody(request, response)) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; conn.receiveResponseEntity(response);
&#160; &#160; &#160; &#160; &#160; &#160; }
&lt;p&gt;&#160; &#160; &#160; &#160; }&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; return response;&lt;br/&gt;
&#160; &#160; }&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I stepped through the debugger and here&apos;s what actually happens. While retrieving the response headers, SessionInputBufferImpl fills up the buffer but since the 1st TLS Record Layer only has the headers it has byte length for the headers only. So buffer only fills up with headers. After releasing the connection when it tries to retrieve the body using the HttpEntity the intput stream is already closed thus throws the exception.&lt;/p&gt;</comment>
                            <comment id="17799445" author="JIRAUSER303553" created="Thu, 21 Dec 2023 15:14:08 +0000"  >&lt;p&gt;Here&apos;s the stack trace of actually using the webdav4s provider. I masked the webdav url below.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLSocketInputRecord.java:249|READ: TLSv1.2 application_data, length = 277&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLCipher.java:1622|Plaintext after DECRYPTION (&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0000: 48 54 54 50 2F 31 2E 31 &#160; 20 32 30 37 20 4D 75 6C &#160;HTTP/1.1 207 Mul&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0010: 74 69 2D 53 74 61 74 75 &#160; 73 0D 0A 44 61 74 65 3A &#160;ti-Status..Date:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0020: 20 54 68 75 2C 20 30 39 &#160; 20 4E 6F 76 20 32 30 32 &#160; Thu, 09 Nov 202&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0030: 33 20 31 34 3A 30 39 3A &#160; 33 39 20 47 4D 54 0D 0A &#160;3 14:09:39 GMT..&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0040: 53 65 72 76 65 72 3A 20 &#160; 41 70 61 63 68 65 2F 32 &#160;Server: Apache/2&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0050: 2E 34 2E 36 20 28 52 65 &#160; 64 20 48 61 74 20 45 6E &#160;.4.6 (Red Hat En&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0060: 74 65 72 70 72 69 73 65 &#160; 20 4C 69 6E 75 78 29 20 &#160;terprise Linux)&#160;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0070: 4F 70 65 6E 53 53 4C 2F &#160; 31 2E 30 2E 32 6B 2D 66 &#160;OpenSSL/1.0.2k-f&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0080: 69 70 73 0D 0A 43 6F 6E &#160; 74 65 6E 74 2D 4C 65 6E &#160;ips..Content-Len&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0090: 67 74 68 3A 20 33 30 36 &#160; 0D 0A 4B 65 65 70 2D 41 &#160;gth: 306..Keep-A&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 00A0: 6C 69 76 65 3A 20 74 69 &#160; 6D 65 6F 75 74 3D 35 2C &#160;live: timeout=5,&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 00B0: 20 6D 61 78 3D 31 30 30 &#160; 0D 0A 43 6F 6E 6E 65 63 &#160; max=100..Connec&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 00C0: 74 69 6F 6E 3A 20 4B 65 &#160; 65 70 2D 41 6C 69 76 65 &#160;tion: Keep-Alive&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 00D0: 0D 0A 43 6F 6E 74 65 6E &#160; 74 2D 54 79 70 65 3A 20 &#160;..Content-Type:&#160;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 00E0: 74 65 78 74 2F 78 6D 6C &#160; 3B 20 63 68 61 72 73 65 &#160;text/xml; charse&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 00F0: 74 3D 22 75 74 66 2D 38 &#160; 22 0D 0A 0D 0A &#160; &#160; &#160; &#160; &#160; t=&quot;utf-8&quot;....&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; )&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLSocketImpl.java:553|duplex close of SSLSocket&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLSocketOutputRecord.java:71|WRITE: TLS12 alert(close_notify), length = 10&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLCipher.java:1720|Plaintext before ENCRYPTION (&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0000: 01 00 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;..&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; )&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLSocketOutputRecord.java:85|Raw write (&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0000: 15 03 03 00 1A 00 00 00 &#160; 00 00 00 00 02 72 58 1B &#160;.............rX.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; 0010: 15 E2 72 BE 5D 1A 11 39 &#160; 5F AD 38 FE C4 27 1E &#160; &#160; ..r.]..9_.8..&apos;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; )&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLSocketImpl.java:1615|close the underlying socket&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLSocketImpl.java:1634|close the SSL connection (initiative)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|FINE|01|main|2023-11-09 09:09:39.316 EST|SSLSocketImpl.java:731|close inbound of SSLSocket&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; javax.net.ssl|WARNING|01|main|2023-11-09 09:09:39.316 EST|SSLSocketImpl.java:571|SSLSocket duplex close failed (&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &quot;throwable&quot; : &lt;/p&gt;
{
[ivy:publish] &#160; java.net.SocketException: Socket is closed
[ivy:publish] &#160; &#160; &#160; at java.net.Socket.shutdownInput(Socket.java:1539)
[ivy:publish] &#160; &#160; &#160; at sun.security.ssl.BaseSSLSocketImpl.shutdownInput(BaseSSLSocketImpl.java:218)
[ivy:publish] &#160; &#160; &#160; at sun.security.ssl.SSLSocketImpl.shutdownInput(SSLSocketImpl.java:746)
[ivy:publish] &#160; &#160; &#160; at sun.security.ssl.SSLSocketImpl.bruteForceCloseInput(SSLSocketImpl.java:696)
[ivy:publish] &#160; &#160; &#160; at sun.security.ssl.SSLSocketImpl.duplexCloseOutput(SSLSocketImpl.java:655)
[ivy:publish] &#160; &#160; &#160; at sun.security.ssl.SSLSocketImpl.close(SSLSocketImpl.java:560)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.impl.BHttpConnectionBase.shutdown(BHttpConnectionBase.java:307)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.impl.conn.DefaultManagedHttpClientConnection.shutdown(DefaultManagedHttpClientConnection.java:95)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.impl.conn.LoggingManagedHttpClientConnection.shutdown(LoggingManagedHttpClientConnection.java:98)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.impl.conn.CPoolEntry.shutdownConnection(CPoolEntry.java:75)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.impl.conn.CPoolProxy.shutdown(CPoolProxy.java:94)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.impl.execchain.ConnectionHolder.abortConnection(ConnectionHolder.java:128)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.impl.execchain.ConnectionHolder.cancel(ConnectionHolder.java:146)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.client.methods.AbstractExecutionAwareRequest.reset(AbstractExecutionAwareRequest.java:144)
[ivy:publish] &#160; &#160; &#160; at org.apache.http.client.methods.HttpRequestBase.releaseConnection(HttpRequestBase.java:119)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.executeRequest(Webdav4FileObject.java:481)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:506)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:497)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:531)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:536)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.isDirectory(Webdav4FileObject.java:569)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.doGetType(Webdav4FileObject.java:340)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1375)
[ivy:publish] &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.exists(AbstractFileObject.java:965)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.plugins.repository.vfs.VfsResource.physicallyExists(VfsResource.java:181)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.plugins.repository.vfs.VfsRepository.put(VfsRepository.java:204)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.plugins.repository.AbstractRepository.put(AbstractRepository.java:146)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.plugins.resolver.RepositoryResolver.put(RepositoryResolver.java:238)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.plugins.resolver.RepositoryResolver.publish(RepositoryResolver.java:219)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.core.publish.PublishEngine.publish(PublishEngine.java:275)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.core.publish.PublishEngine.publish(PublishEngine.java:254)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.core.publish.PublishEngine.publish(PublishEngine.java:177)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.Ivy.publish(Ivy.java:622)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.ant.IvyPublish.doExecute(IvyPublish.java:316)
[ivy:publish] &#160; &#160; &#160; at org.apache.ivy.ant.IvyTask.execute(IvyTask.java:259)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)
[ivy:publish] &#160; &#160; &#160; at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
[ivy:publish] &#160; &#160; &#160; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ivy:publish] &#160; &#160; &#160; at java.lang.reflect.Method.invoke(Method.java:498)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:99)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.Task.perform(Task.java:350)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.Target.execute(Target.java:449)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.Target.performTasks(Target.java:470)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1391)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.Project.executeTarget(Project.java:1364)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.Project.executeTargets(Project.java:1254)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.Main.runBuild(Main.java:830)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.Main.startAnt(Main.java:223)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.launch.Launcher.run(Launcher.java:284)
[ivy:publish] &#160; &#160; &#160; at org.apache.tools.ant.launch.Launcher.main(Launcher.java:101)}
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt;&#160;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; )&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; 09:09:39.316 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG org.apache.jackrabbit.webdav.DavException - DavException: (207) null&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; Fail to check the existence of the resource webdav4s://******&lt;b&gt;url&lt;/b&gt;*****&lt;b&gt;&quot; (org.apache.commons.vfs2.FileSystemException: Could not determine the type of file &quot;webdav4s://&lt;/b&gt;*****&lt;b&gt;url&lt;/b&gt;******&quot;&quot;.)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; org.apache.commons.vfs2.FileSystemException: Could not determine the type of file &quot;webdav4s://******&lt;b&gt;url&lt;/b&gt;******&quot;&quot;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1381)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.exists(AbstractFileObject.java:965)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.plugins.repository.vfs.VfsResource.physicallyExists(VfsResource.java:181)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.plugins.repository.vfs.VfsRepository.put(VfsRepository.java:204)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.plugins.repository.AbstractRepository.put(AbstractRepository.java:146)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.plugins.resolver.RepositoryResolver.put(RepositoryResolver.java:238)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.plugins.resolver.RepositoryResolver.publish(RepositoryResolver.java:219)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.core.publish.PublishEngine.publish(PublishEngine.java:275)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.core.publish.PublishEngine.publish(PublishEngine.java:254)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.core.publish.PublishEngine.publish(PublishEngine.java:177)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.Ivy.publish(Ivy.java:622)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.ant.IvyPublish.doExecute(IvyPublish.java:316)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.ivy.ant.IvyTask.execute(IvyTask.java:259)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:99)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.Task.perform(Task.java:350)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.Target.execute(Target.java:449)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.Target.performTasks(Target.java:470)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1391)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.Project.executeTarget(Project.java:1364)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.Project.executeTargets(Project.java:1254)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.Main.runBuild(Main.java:830)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.Main.startAnt(Main.java:223)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.launch.Launcher.run(Launcher.java:284)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.tools.ant.launch.Launcher.main(Launcher.java:101)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; Caused by: org.apache.commons.vfs2.FileSystemException: Could not get property for: &quot;webdav4s://******&lt;b&gt;url&lt;/b&gt;*****&lt;b&gt;&quot;&quot;, name=&quot;webdav4s://&lt;/b&gt;*****&lt;b&gt;url&lt;/b&gt;******&quot;&quot;, type=&quot;0&quot;, nameSet=&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;\{DAV:}resourcetype&amp;#93;&lt;/span&gt;&quot;, addEncoding=&quot;false&quot;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:524)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:497)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:531)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:536)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.isDirectory(Webdav4FileObject.java:569)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.doGetType(Webdav4FileObject.java:340)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1375)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; ... 28 more&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; Caused by: org.apache.jackrabbit.webdav.DavException&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsMultiStatus(BaseDavRequest.java:93)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:508)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; ... 34 more&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; Caused by: org.apache.http.ConnectionClosedException: Premature end of Content-Length delimited message body (expected: 306; received: 0)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:140)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:118)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at com.sun.org.apache.xerces.internal.impl.XMLEntityManager$RewindableInputStream.read(XMLEntityManager.java:2958)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:675)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:148)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:805)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:770)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:243)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:338)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:121)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.jackrabbit.webdav.xml.DomUtil.parseDocument(DomUtil.java:104)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsDocument(BaseDavRequest.java:69)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsMultiStatus(BaseDavRequest.java:87)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:publish&amp;#93;&lt;/span&gt; &#160; &#160; ... 35 more&lt;/p&gt;</comment>
                            <comment id="17799869" author="garydgregory" created="Fri, 22 Dec 2023 16:23:53 +0000"  >&lt;p&gt;I think this has been addressed already in git master.&lt;/p&gt;

&lt;p&gt;Would you please try a 2.10.0-SNAPSHOT build (or local build from git master)?&lt;/p&gt;

&lt;p&gt;The builds in the snapshot Maven repository are rooted here: &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17802177" author="JIRAUSER303553" created="Wed, 3 Jan 2024 13:43:40 +0000"  >&lt;p&gt;Thanks, I&apos;ve tested 2.10.0-SNAPSHOT build and the issue has been fixed. Any idea when the build will go to GA?&lt;/p&gt;</comment>
                            <comment id="17802193" author="garydgregory" created="Wed, 3 Jan 2024 14:04:37 +0000"  >&lt;p&gt;I should be able to cut a release candidate at the end of the week or this weekend, it&apos;s overdue.&lt;/p&gt;</comment>
                            <comment id="17807762" author="JIRAUSER303553" created="Wed, 17 Jan 2024 15:10:15 +0000"  >&lt;p&gt;Gary - can you please cut the release candidate for this? I&apos;m keeping this issue opened until we get a new release. Thank you.&lt;/p&gt;</comment>
                            <comment id="17808201" author="garydgregory" created="Thu, 18 Jan 2024 13:27:16 +0000"  >&lt;p&gt;It&apos;s on my to-do list &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sodrul.bhuiyan&quot; class=&quot;user-hover&quot; rel=&quot;sodrul.bhuiyan&quot;&gt;sodrul.bhuiyan&lt;/a&gt;, hopefully, I can create a release candidate at the end of the week (or so).&lt;/p&gt;</comment>
                            <comment id="17814847" author="JIRAUSER303553" created="Tue, 6 Feb 2024 14:52:35 +0000"  >&lt;p&gt;Gary D. Gregory - I&apos;ve been waiting for the release. Can you please cut the release candidate? I&apos;d appreciate if you could give me an practical ETA at least, that way I could plan accordingly. Thanks a lot for helping.&lt;/p&gt;</comment>
                            <comment id="17841114" author="in-fke" created="Fri, 26 Apr 2024 09:07:33 +0000"  >&lt;p&gt;Is this the same issue?&lt;br/&gt;
Though we are not using TLS.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method) ~[?:?]
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:115) ~[?:?]
	at java.net.SocketInputStream.read(SocketInputStream.java:168) ~[?:?]
	at java.net.SocketInputStream.read(SocketInputStream.java:140) ~[?:?]
	at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137) ~[httpcore-4.4.13.jar:4.4.13]
	at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153) ~[httpcore-4.4.13.jar:4.4.13]
	at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280) ~[httpcore-4.4.13.jar:4.4.13]
	at org.apache.http.impl.io.ChunkedInputStream.getChunkSize(ChunkedInputStream.java:248) ~[httpcore-4.4.13.jar:4.4.13]
	at org.apache.http.impl.io.ChunkedInputStream.nextChunk(ChunkedInputStream.java:222) ~[httpcore-4.4.13.jar:4.4.13]
	at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:183) ~[httpcore-4.4.13.jar:4.4.13]
	at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135) ~[httpclient-4.5.13.jar:4.5.13]
	at org.apache.xerces.impl.XMLEntityManager$RewindableInputStream.read(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.impl.io.UTF8Reader.read(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.impl.XMLEntityScanner.load(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.impl.XMLEntityScanner.skipSpaces(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.impl.XMLDocumentScannerImpl$TrailingMiscDispatcher.dispatch(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.parsers.DOMParser.parse(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source) ~[org.apache.xerces-2.9.0.jar:?]
	at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:122) ~[?:?]
	at org.apache.jackrabbit.webdav.xml.DomUtil.parseDocument(DomUtil.java:104) ~[jackrabbit-webdav-2.21.25.jar:?]
	at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsDocument(BaseDavRequest.java:69) ~[jackrabbit-webdav-2.21.25.jar:?]
	at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsMultiStatus(BaseDavRequest.java:87) ~[jackrabbit-webdav-2.21.25.jar:?]
	at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:508) ~[commons-vfs2-jackrabbit2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:497) ~[commons-vfs2-jackrabbit2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:531) ~[commons-vfs2-jackrabbit2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:536) ~[commons-vfs2-jackrabbit2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.isDirectory(Webdav4FileObject.java:569) ~[commons-vfs2-jackrabbit2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.doGetType(Webdav4FileObject.java:340) ~[commons-vfs2-jackrabbit2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1375) ~[commons-vfs2-2.9.0.jar:2.9.0]
	... 31 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17846305" author="JIRAUSER303553" created="Tue, 14 May 2024 12:54:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=in-fke&quot; class=&quot;user-hover&quot; rel=&quot;in-fke&quot;&gt;in-fke&lt;/a&gt; yes looks that way. I don&apos;t remember whether I&apos;ve tested using webdav4 provider which is non-tls but is new provider that executes similar code. The main issue with what I&apos;ve described was that the socket gets closed before reading the body from the entity.&lt;/p&gt;</comment>
                            <comment id="17846308" author="JIRAUSER303553" created="Tue, 14 May 2024 12:57:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; any chance of getting the release being cut? I understand you may be busy, so I appreciate spending some time on this. Thanks&lt;/p&gt;</comment>
                            <comment id="17846311" author="garydgregory" created="Tue, 14 May 2024 13:04:54 +0000"  >&lt;p&gt;Releasing is definitively on my to-do list. Maybe within a week or two.&lt;/p&gt;</comment>
                            <comment id="17846341" author="in-fke" created="Tue, 14 May 2024 15:08:11 +0000"  >&lt;p&gt;Something weird about reading the InputStream from the Entity. Maybe even a bug in &lt;tt&gt;org.apache.http&lt;/tt&gt; ?&lt;br/&gt;
Kind of hacky, but I made a workaround that pre-reads the InputStream into BAIS while ignoring the Exception.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    Document getResponseBodyAsDocument(HttpEntity entity) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entity == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            InputStream in = entity.getContent();
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                ByteArrayOutputStream bos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                	IOUtils.copy(in, bos);
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (SocketException e) {
                	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (logger.isDebugEnabled()) {
                		logger.debug(e.toString(), e);
                	}
                }
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; DomUtil.parseDocument(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(bos.toByteArray()));
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ParserConfigurationException ex) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;XML parser configuration error&quot;&lt;/span&gt;, ex);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (SAXException ex) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;XML parsing error&quot;&lt;/span&gt;, ex);
            } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
                in.close();
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It does not address the actual problem, though.	&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mbyw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-850] Instantiate wrong ProviderTestSuite in Webdav4ProviderTestCase</title>
                <link>https://issues.apache.org/jira/browse/VFS-850</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs2.provider.webdav4.test.Webdav4ProviderTestCase&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we should instantiate &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs2.provider.webdav4.test.Webdav4ProviderTestSuite&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;instead of&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs2.ProviderTestSuite&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13551253">VFS-850</key>
            <summary>Instantiate wrong ProviderTestSuite in Webdav4ProviderTestCase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="beisetho">Thorsten Beise</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2023 15:14:20 +0000</created>
                <updated>Wed, 20 Sep 2023 14:37:06 +0000</updated>
                            <resolved>Wed, 20 Sep 2023 14:37:06 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17766874" author="garydgregory" created="Tue, 19 Sep 2023 16:34:58 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=beisetho&quot; class=&quot;user-hover&quot; rel=&quot;beisetho&quot;&gt;beisetho&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;Note that a pain point here is that we are still running on top of some Junit 3 scaffolding. We need help migrating to JUnit 5.&lt;/p&gt;</comment>
                            <comment id="17767141" author="garydgregory" created="Wed, 20 Sep 2023 14:37:01 +0000"  >&lt;p&gt;Merged PR &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/427&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/427&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TY &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=beisetho&quot; class=&quot;user-hover&quot; rel=&quot;beisetho&quot;&gt;beisetho&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/427]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kghk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-849] HttpConnection resources not properly cleaned up in webdav request</title>
                <link>https://issues.apache.org/jira/browse/VFS-849</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In the 2 cases where we decide to throw an exception from&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Webdav4FileObject.executeRequest(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HttpUriRequest request)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the outer try-with-resource statements cannot cleanup the connection resource properly, because no request is returned and instead an exception is thrown.&lt;/p&gt;

&lt;p&gt;After some webdav operations the connections are not returned to the underlying connection pool which results in a deadlock situation.&lt;/p&gt;

&lt;p&gt;The following exception is forced via Thread.interrupt(...) from another monitoring thread.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs2.FileSystemException: Could not create file &lt;span class=&quot;code-quote&quot;&gt;&quot;webdav4s:&lt;span class=&quot;code-comment&quot;&gt;//localhost/webdav/myFile8&quot;&lt;/span&gt;.
&lt;/span&gt;&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.createFile(AbstractFileObject.java:335)
&#160; &#160; at org.apache.commons.vfs2.FileObject$createFile.call(Unknown Source)
&#160; &#160; at de.bwinvest.esb.jbi.bc.file.test.Webdav4sConnectionTest$_testWebdav4sConnection_closure1.doCall(Webdav4sConnectionTest.groovy:94)
&#160; &#160; at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&#160; &#160; at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
&#160; &#160; at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#160; &#160; at java.base/java.lang.reflect.Method.invoke(Method.java:566)
&#160; &#160; at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
&#160; &#160; at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
&#160; &#160; at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
&#160; &#160; at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:37)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
&#160; &#160; at de.bwinvest.esb.jbi.bc.file.component.util.VFSFileSystemManagerFactory.process(VFSFileSystemManagerFactory.groovy:48)
&#160; &#160; at de.bwinvest.esb.jbi.bc.file.component.util.VFSFileSystemManagerFactory$process.call(Unknown Source)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135)
&#160; &#160; at de.bwinvest.esb.jbi.bc.file.test.Webdav4sConnectionTest.testWebdav4sConnection(Webdav4sConnectionTest.groovy:77)
&#160; &#160; at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&#160; &#160; at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
&#160; &#160; at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#160; &#160; at java.base/java.lang.reflect.Method.invoke(Method.java:566)
&#160; &#160; at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
&#160; &#160; at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
&#160; &#160; at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
&#160; &#160; at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
&#160; &#160; at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
&#160; &#160; at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
&#160; &#160; at org.testng.TestRunner.privateRun(TestRunner.java:767)
&#160; &#160; at org.testng.TestRunner.run(TestRunner.java:617)
&#160; &#160; at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
&#160; &#160; at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
&#160; &#160; at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
&#160; &#160; at org.testng.SuiteRunner.run(SuiteRunner.java:240)
&#160; &#160; at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
&#160; &#160; at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
&#160; &#160; at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
&#160; &#160; at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
&#160; &#160; at org.testng.TestNG.run(TestNG.java:1031)
&#160; &#160; at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:155)
&#160; &#160; at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeSingleClass(TestNGDirectoryTestSuite.java:102)
&#160; &#160; at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:91)
&#160; &#160; at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:137)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.apache.commons.vfs2.FileSystemException: Could not determine the type of file &lt;span class=&quot;code-quote&quot;&gt;&quot;webdav4s:&lt;span class=&quot;code-comment&quot;&gt;//localhost/webdav&quot;&lt;/span&gt;.
&lt;/span&gt;&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1390)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.createFolder(AbstractFileObject.java:349)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1277)
&#160; &#160; at org.apache.commons.vfs2.provider.DefaultFileContent.buildOutputStream(DefaultFileContent.java:293)
&#160; &#160; at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:583)
&#160; &#160; at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:571)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.createFile(AbstractFileObject.java:326)
&#160; &#160; ... 49 more
Caused by: org.apache.commons.vfs2.FileSystemException: Unknown message with code &lt;span class=&quot;code-quote&quot;&gt;&quot;Request aborted&quot;&lt;/span&gt;.
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.executeRequest(Webdav4FileObject.java:501)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:526)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:518)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:552)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:557)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.isDirectory(Webdav4FileObject.java:590)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.doGetType(Webdav4FileObject.java:364)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1384)
&#160; &#160; ... 55 more
Caused by: org.apache.http.impl.execchain.RequestAbortedException: Request aborted
&#160; &#160; at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:193)
&#160; &#160; at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
&#160; &#160; at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
&#160; &#160; at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
&#160; &#160; at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
&#160; &#160; at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
&#160; &#160; at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
&#160; &#160; at org.apache.commons.vfs2.provider.http4.Http4FileObject.executeHttpUriRequest(Http4FileObject.java:191)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.executeRequest(Webdav4FileObject.java:487)
&#160; &#160; ... 62 more
Caused by: java.lang.InterruptedException
&#160; &#160; at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2076)
&#160; &#160; at org.apache.http.pool.AbstractConnPool.getPoolEntryBlocking(AbstractConnPool.java:391)
&#160; &#160; at org.apache.http.pool.AbstractConnPool.access$300(AbstractConnPool.java:70)
&#160; &#160; at org.apache.http.pool.AbstractConnPool$2.get(AbstractConnPool.java:253)
&#160; &#160; at org.apache.http.pool.AbstractConnPool$2.get(AbstractConnPool.java:198)
&#160; &#160; at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.leaseConnection(PoolingHttpClientConnectionManager.java:306)
&#160; &#160; at org.apache.http.impl.conn.PoolingHttpClientConnectionManager$1.get(PoolingHttpClientConnectionManager.java:282)
&#160; &#160; at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:190)
&#160; &#160; ... 70 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I can not reproduce this behaviour with the webdav server which is part of the testcases.&lt;/p&gt;

&lt;p&gt;Fix is underway.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13551239">VFS-849</key>
            <summary>HttpConnection resources not properly cleaned up in webdav request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="beisetho">Thorsten Beise</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2023 14:19:31 +0000</created>
                <updated>Thu, 21 Sep 2023 10:21:23 +0000</updated>
                            <resolved>Wed, 20 Sep 2023 14:36:17 +0000</resolved>
                                    <version>2.10.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17767092" author="beisetho" created="Wed, 20 Sep 2023 11:26:31 +0000"  >&lt;p&gt;The reason why I am not able to reproduce the deadlock situation ( and &#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-843&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS-843&lt;/a&gt;) in tests is:&lt;/p&gt;

&lt;p&gt;The HTTP-Response from the testcases&apos; webdav server is different then those form production/manual tests with docker. This leads to the http4 implementation utilizing different HttpEntity classes based on the type of response.&lt;/p&gt;

&lt;p&gt;For example&lt;/p&gt;

&lt;p&gt;&lt;b&gt;WEBDAV from unit test:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HttpResponseProxy{HTTP/1.1 207 Multi-Status [Date: Wed, 20 Sep 2023 10:09:38 GMT, Accept-Encoding: deflate, gzip, Content-Type: text/xml;charset=utf-8, Server: Jetty(9.4.51.v20230217)] org.apache.http.client.entity.DecompressingEntity@28b7646}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Results in HttpEntity class of:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.http.client.entity.DecompressingEntity&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;WEBDAV from production:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HttpResponseProxy{HTTP/1.1 207 Multi-Status [Date: Wed, 20 Sep 2023 10:24:34 GMT, Server: Apache/2.4.37 (Unix), Content-Length: 276, Keep-Alive: timeout=5, max=100, Connection: Keep-Alive, Content-Type: text/xml; charset=&lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;] ResponseEntityProxy{[Content-Type: text/xml; charset=&lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;,Content-Length: 276,Chunked: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;]}}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Results in HttpEntity class of:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.http.impl.execchain.ResponseEntityProxy&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Conclusion:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The &lt;em&gt;org.apache.http.impl.execchain.ResponseEntityProxy&lt;/em&gt; needs to be fully consumed before it releases the connection resources.&lt;/p&gt;</comment>
                            <comment id="17767094" author="beisetho" created="Wed, 20 Sep 2023 11:32:38 +0000"  >&lt;p&gt;Alternative solution suggestion to &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/426&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/426&lt;/a&gt; :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/428&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17767139" author="garydgregory" created="Wed, 20 Sep 2023 14:36:09 +0000"  >&lt;p&gt;Merged PR &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/428&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TY &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=beisetho&quot; class=&quot;user-hover&quot; rel=&quot;beisetho&quot;&gt;beisetho&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/426]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kgeg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-847] DefaultFileSystemManager resolves some directories to wrong FileType</title>
                <link>https://issues.apache.org/jira/browse/VFS-847</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Some FileName&apos;s that indicates a directory are resolved to FileType.FILE in &apos;resolveName(final FileName root, final String path)&apos; of org.apache.commons.vfs2.impl.DefaultFileSystemManager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13550958">VFS-847</key>
            <summary>DefaultFileSystemManager resolves some directories to wrong FileType</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="beisetho">Thorsten Beise</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Sep 2023 08:10:03 +0000</created>
                <updated>Sun, 17 Sep 2023 08:14:02 +0000</updated>
                            <resolved>Sun, 17 Sep 2023 08:14:02 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17766052" author="beisetho" created="Sun, 17 Sep 2023 08:14:02 +0000"  >&lt;p&gt;Duplictae &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-846&quot; title=&quot;DefaultFileSystemManager resolves some directories to wrong FileType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-846&quot;&gt;&lt;del&gt;VFS-846&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1keo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-846] DefaultFileSystemManager resolves some directories to wrong FileType</title>
                <link>https://issues.apache.org/jira/browse/VFS-846</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Some FileName&apos;s that indicates a directory are resolved to FileType.FILE in &apos;&lt;font color=&quot;#00627a&quot;&gt;resolveName&lt;/font&gt;(&lt;font color=&quot;#0033b3&quot;&gt;final &lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;FileName &lt;/font&gt;root, &lt;font color=&quot;#0033b3&quot;&gt;final &lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;String &lt;/font&gt;path)&apos; of &lt;font color=&quot;#000000&quot;&gt;org.apache.commons.vfs2.impl&lt;/font&gt;.DefaultFileSystemManager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13550956">VFS-846</key>
            <summary>DefaultFileSystemManager resolves some directories to wrong FileType</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="beisetho">Thorsten Beise</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Sep 2023 08:02:56 +0000</created>
                <updated>Sun, 17 Sep 2023 11:44:27 +0000</updated>
                            <resolved>Sun, 17 Sep 2023 11:41:16 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17766076" author="garydgregory" created="Sun, 17 Sep 2023 11:44:27 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=beisetho&quot; class=&quot;user-hover&quot; rel=&quot;beisetho&quot;&gt;beisetho&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;In git master and snapshot builds on &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/424]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kenk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-845] DefaultFileSystemManager resolves some directories to wrong FileType</title>
                <link>https://issues.apache.org/jira/browse/VFS-845</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Some FileName&apos;s that indicates a directory are resolved to FileType.FILE in &apos;&lt;font color=&quot;#00627a&quot;&gt;resolveName&lt;/font&gt;(&lt;font color=&quot;#0033b3&quot;&gt;final &lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;FileName &lt;/font&gt;root, &lt;font color=&quot;#0033b3&quot;&gt;final &lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;String &lt;/font&gt;path)&apos; of &lt;font color=&quot;#000000&quot;&gt;org.apache.commons.vfs2.impl&lt;/font&gt;.DefaultFileSystemManager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13550955">VFS-845</key>
            <summary>DefaultFileSystemManager resolves some directories to wrong FileType</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="beisetho">Thorsten Beise</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Sep 2023 08:02:48 +0000</created>
                <updated>Sun, 17 Sep 2023 08:28:59 +0000</updated>
                            <resolved>Sun, 17 Sep 2023 08:28:59 +0000</resolved>
                                    <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17766057" author="beisetho" created="Sun, 17 Sep 2023 08:28:59 +0000"  >&lt;p&gt;Accidently created. Duplicate to &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-846&quot; title=&quot;DefaultFileSystemManager resolves some directories to wrong FileType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-846&quot;&gt;&lt;del&gt;VFS-846&lt;/del&gt;&lt;/a&gt;. Sorry&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kenc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-844] UriString of webdav-filename is twice URLEncoded in moveTo operation</title>
                <link>https://issues.apache.org/jira/browse/VFS-844</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Twice URL encoding a filename which contains a blank results in invalid uriString.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs2.FileSystemException: Could not rename &lt;span class=&quot;code-quote&quot;&gt;&quot;webdav4:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:53109/repository/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/write-tests/file%20space.txt&quot;&lt;/span&gt; to &lt;span class=&quot;code-quote&quot;&gt;&quot;webdav4://admin:admin@localhost:53109/repository/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/write-tests/file1move.txt&quot;&lt;/span&gt;.
&lt;/span&gt;&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1715)
&#160; &#160; at org.apache.commons.vfs2.ProviderRenameTests.moveFile(ProviderRenameTests.java:70)
&#160; &#160; at org.apache.commons.vfs2.ProviderRenameTests.testRenameFileWithSpaces(ProviderRenameTests.java:113)
&#160; &#160; at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
&#160; &#160; at java.base/java.lang.reflect.Method.invoke(Method.java:578)
&#160; &#160; at org.apache.commons.vfs2.AbstractProviderTestCase.runTest(AbstractProviderTestCase.java:305)
&#160; &#160; at junit.framework.TestCase.runBare(TestCase.java:142)
&#160; &#160; at junit.framework.TestResult$1.protect(TestResult.java:122)
&#160; &#160; at junit.framework.TestResult.runProtected(TestResult.java:142)
&#160; &#160; at junit.framework.TestResult.run(TestResult.java:125)
&#160; &#160; at junit.framework.TestCase.run(TestCase.java:130)
&#160; &#160; at junit.framework.TestSuite.runTest(TestSuite.java:241)
&#160; &#160; at junit.framework.TestSuite.run(TestSuite.java:236)
&#160; &#160; at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)
&#160; &#160; at org.apache.commons.vfs2.AbstractTestSuite.lambda$run$0(AbstractTestSuite.java:235)
&#160; &#160; at junit.framework.TestResult.runProtected(TestResult.java:142)
&#160; &#160; at org.apache.commons.vfs2.AbstractTestSuite.run(AbstractTestSuite.java:239)
&#160; &#160; at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:90)
&#160; &#160; at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
&#160; &#160; at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
&#160; &#160; at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:42)
&#160; &#160; at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:80)
&#160; &#160; at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:72)
&#160; &#160; at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
&#160; &#160; at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
&#160; &#160; at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
&#160; &#160; at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
&#160; &#160; at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
&#160; &#160; at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
&#160; &#160; at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
&#160; &#160; at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
&#160; &#160; at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
&#160; &#160; at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50)
&#160; &#160; at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
&#160; &#160; at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
&#160; &#160; at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.apache.commons.vfs2.FileNotFoundException: Could not read from &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//admin:***@localhost:53109/repository/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/write-tests/file%2520space.txt&quot;&lt;/span&gt; because it is not a file.
&lt;/span&gt;&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.executeRequest(Webdav4FileObject.java:498)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.doRename(Webdav4FileObject.java:453)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1706)
&#160; &#160; ... 39 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13550923">VFS-844</key>
            <summary>UriString of webdav-filename is twice URLEncoded in moveTo operation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="beisetho">Thorsten Beise</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 Sep 2023 10:36:17 +0000</created>
                <updated>Sat, 16 Sep 2023 12:58:14 +0000</updated>
                            <resolved>Sat, 16 Sep 2023 12:58:14 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17765950" author="garydgregory" created="Sat, 16 Sep 2023 11:17:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=beisetho&quot; class=&quot;user-hover&quot; rel=&quot;beisetho&quot;&gt;beisetho&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;If you can provide a failing unit test that reproduces this issue, I can take a look.&lt;/p&gt;</comment>
                            <comment id="17765951" author="beisetho" created="Sat, 16 Sep 2023 11:20:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I hope this helps: &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/423&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/423&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17765964" author="garydgregory" created="Sat, 16 Sep 2023 12:58:14 +0000"  >&lt;p&gt;Please verify your use case with a local build from the git master branch or a snapshot build from &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/423&quot;&gt;https://github.com/apache/commons-vfs/pull/423&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1keg8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-843] HttpConnection is closed prior to consuming the whole HttpEntity</title>
                <link>https://issues.apache.org/jira/browse/VFS-843</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;It happens for example if you call&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
findFiles(...)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;on a webdav-folder with a lot of files&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs2.FileSystemException: Could not find files in &lt;span class=&quot;code-quote&quot;&gt;&quot;webdav4s:&lt;span class=&quot;code-comment&quot;&gt;//localhost/vfs/indexdata/current&quot;&lt;/span&gt;.
&lt;/span&gt;&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.findFiles(AbstractFileObject.java:1022)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.listFiles(AbstractFileObject.java:1673)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.findFiles(AbstractFileObject.java:997)
&#160; &#160; at org.apache.commons.vfs2.FileObject$findFiles$5.call(Unknown Source)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
&#160; &#160; at de.bwinvest.esb.jbi.bc.file.test.Webdav4sConnectionTest$_testWebdav4sConnection_closure2.doCall(Webdav4sConnectionTest.groovy:148)
&#160; &#160; at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&#160; &#160; at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
&#160; &#160; at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#160; &#160; at java.base/java.lang.reflect.Method.invoke(Method.java:566)
&#160; &#160; at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)
&#160; &#160; at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
&#160; &#160; at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)
&#160; &#160; at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:37)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:52)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:127)
&#160; &#160; at de.bwinvest.esb.jbi.bc.file.component.util.VFSFileSystemManagerFactory.process(VFSFileSystemManagerFactory.groovy:45)
&#160; &#160; at de.bwinvest.esb.jbi.bc.file.component.util.VFSFileSystemManagerFactory$process.call(Unknown Source)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)
&#160; &#160; at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135)
&#160; &#160; at de.bwinvest.esb.jbi.bc.file.test.Webdav4sConnectionTest.testWebdav4sConnection(Webdav4sConnectionTest.groovy:141)
&#160; &#160; at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&#160; &#160; at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
&#160; &#160; at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#160; &#160; at java.base/java.lang.reflect.Method.invoke(Method.java:566)
&#160; &#160; at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
&#160; &#160; at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
&#160; &#160; at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
&#160; &#160; at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
&#160; &#160; at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
&#160; &#160; at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
&#160; &#160; at org.testng.TestRunner.privateRun(TestRunner.java:767)
&#160; &#160; at org.testng.TestRunner.run(TestRunner.java:617)
&#160; &#160; at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
&#160; &#160; at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
&#160; &#160; at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
&#160; &#160; at org.testng.SuiteRunner.run(SuiteRunner.java:240)
&#160; &#160; at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
&#160; &#160; at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
&#160; &#160; at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
&#160; &#160; at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
&#160; &#160; at org.testng.TestNG.run(TestNG.java:1031)
&#160; &#160; at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:155)
&#160; &#160; at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeSingleClass(TestNGDirectoryTestSuite.java:102)
&#160; &#160; at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:91)
&#160; &#160; at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:137)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
&#160; &#160; at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.apache.commons.vfs2.FileSystemException
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.doListChildrenResolved(Webdav4FileObject.java:427)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.getChildren(AbstractFileObject.java:1085)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.traverse(AbstractFileObject.java:129)
&#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.findFiles(AbstractFileObject.java:1019)
&#160; &#160; ... 54 more
Caused by: org.apache.jackrabbit.webdav.DavException
&#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsMultiStatus(BaseDavRequest.java:93)
&#160; &#160; at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.doListChildrenResolved(Webdav4FileObject.java:405)
&#160; &#160; ... 57 more
Caused by: org.apache.http.ConnectionClosedException: Premature end of Content-Length delimited message body (expected: 41.396; received: 7.647)
&#160; &#160; at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:178)
&#160; &#160; at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.XMLEntityManager$RewindableInputStream.read(XMLEntityManager.java:3085)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(UTF8Reader.java:303)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load(XMLEntityScanner.java:1904)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.scanData(XMLEntityScanner.java:1377)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanCDATASection(XMLDocumentFragmentScannerImpl.java:1618)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2930)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:534)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:888)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:824)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:246)
&#160; &#160; at java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)
&#160; &#160; at java.xml/javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:122)
&#160; &#160; at org.apache.jackrabbit.webdav.xml.DomUtil.parseDocument(DomUtil.java:104)
&#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsDocument(BaseDavRequest.java:69)
&#160; &#160; at org.apache.jackrabbit.webdav.client.methods.BaseDavRequest.getResponseBodyAsMultiStatus(BaseDavRequest.java:87)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/421&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/421&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JDK 11/1.8&lt;/li&gt;
&lt;/ul&gt;
</environment>
        <key id="13550713">VFS-843</key>
            <summary>HttpConnection is closed prior to consuming the whole HttpEntity</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="beisetho">Thorsten Beise</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Sep 2023 15:49:14 +0000</created>
                <updated>Sun, 17 Sep 2023 14:21:42 +0000</updated>
                            <resolved>Sun, 17 Sep 2023 14:21:42 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>JAVA</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kd5k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-842] CopyFrom method doesn&apos;t update File Size after replacing file</title>
                <link>https://issues.apache.org/jira/browse/VFS-842</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Consider the scenario where we have two folders source and destination both have file with SAME NAME use copyFrom method file will be copied (replaced) in the destination folder alright but size of the file WILL NOT BE UPDATED IF THE SIZE OF DESTINATION FILE BEFORE COPY WAS GREATER THAN THE SIZE OF SOURCE FILE. In order to produce this issue. Use following code. and also take 2 image files in two different folders. Also make sure the destination folder contains image with higher size.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&lt;font color=&quot;#7f0055&quot;&gt;public&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;static&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;void&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; main(String[] &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;args&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;) &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;throws&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; FileSystemException, UnsupportedEncodingException {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;try&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; String &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;source&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;C:&lt;br/&gt;
SourceFolder&lt;br/&gt;
Usman.jpg&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; String &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;destination&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;C:&lt;br/&gt;
TargetFolder&lt;br/&gt;
Usman.jpg&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; FileSystemManager &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fsManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = VFS.&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;getManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; FileObject &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileToCopy&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fsManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.resolveFile(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;source&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; FileObject &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;destinationFilePath&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fsManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.resolveFile(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;destination&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; System.&lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;out&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.println(&lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;Source File Size: &quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;+&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileToCopy&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.getContent().getSize());&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; System.&lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;out&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.println(&lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;Destination File Size Before Copy: &quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;+&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;destinationFilePath&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.getContent().getSize());&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;destinationFilePath&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.copyFrom(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileToCopy&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;, Selectors.&lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;SELECT_ALL&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; System.&lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;out&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.println(&lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;Destination File Size After Copy: &quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;+&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;destinationFilePath&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.getContent().getSize());&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;catch&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(Exception &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;ex&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;) {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;ex&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.printStackTrace();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; } &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt;The output it shows :&#160;&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#000000&quot;&gt;Source File Size: 17259&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt;Destination File Size Before Copy: 110696&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt;Destination File Size After Copy: 110696&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt;I have verified the file is successfully copied but on File explorer the old size is showing. It seems there is some issue while we write the content of the file. Please let me know if you need any information. The documentation &lt;a href=&quot;https://commons.apache.org/proper/commons-vfs/commons-vfs2/apidocs/org/apache/commons/vfs2/FileObject.html#copyFrom-org.apache.commons.vfs2.FileObject-org.apache.commons.vfs2.FileSelector-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here &lt;/a&gt;says the destination file is deleted first but i don&apos;t see in code while debugging that file is actually deleting. or I am missing something but issue is definitely&#160;there.&lt;/font&gt;&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13546514">VFS-842</key>
            <summary>CopyFrom method doesn&apos;t update File Size after replacing file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="usman.bajwah">Usman Ashraf Bajwah</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Aug 2023 10:02:32 +0000</created>
                <updated>Wed, 27 Sep 2023 11:47:31 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17767144" author="garydgregory" created="Wed, 20 Sep 2023 14:44:25 +0000"  >&lt;p&gt;FileObjects are cached. Manage each with a try-with-resources block. For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileObject fileToCopy = fsManager.resolveFile(source);
       FileObject destinationFilePath = fsManager.resolveFile(destination)) {
       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Source File Size: &quot;&lt;/span&gt;+fileToCopy.getContent().getSize());
       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Destination File Size Before Copy: &quot;&lt;/span&gt;+destinationFilePath.getContent().getSize());
       destinationFilePath.copyFrom(fileToCopy, Selectors.SELECT_ALL);
}

&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileObject destinationFilePath = fsManager.resolveFile(destination)) {
   &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Destination File Size After Copy: &quot;&lt;/span&gt;+destinationFilePath.getContent().getSize());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
If that does not do it, alternatively, try calling &lt;tt&gt;org.apache.commons.vfs2.FilesCache.clear(FileSystem)&lt;/tt&gt; before calling &lt;tt&gt;fsManager.resolveFile(destination)&lt;/tt&gt; again.&lt;/p&gt;

&lt;p&gt;You can also provide a reproducible failing unit test as a patch file or GitHub PR.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17769561" author="JIRAUSER301519" created="Wed, 27 Sep 2023 11:47:31 +0000"  >&lt;p&gt;I have tried both but it didn&apos;t work. I assume that while creating copy the size is not setup in new object instead old information is preserved. The wrong size is also displayed by File System&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jnm0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-840] IllegalArgumentException when using special characters in filename eg [ or ] and calling FileObject.getPath method</title>
                <link>https://issues.apache.org/jira/browse/VFS-840</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When special characters ([ or ] for example there might be others also) are used in filename FileObject resolve it alright but calling its getPath method fails with following exception.&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&lt;ins&gt;java.lang.IllegalArgumentException&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;: Illegal character in path at index 17: &lt;a href=&quot;file:///D:/citrus[1].jpg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///D:/citrus[1].jpg&lt;/a&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at java.base/java.net.URI.create(&lt;/font&gt;&lt;ins&gt;URI.java:906&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at org.apache.commons.vfs2.FileObject.getURI(&lt;/font&gt;&lt;ins&gt;FileObject.java:310&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at org.apache.commons.vfs2.FileObject.getPath(&lt;/font&gt;&lt;ins&gt;FileObject.java:320&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at com.gallerysystems.tms.common.util.FileUtil.main(&lt;/font&gt;&lt;ins&gt;FileUtil.java:859&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt;Caused by: &lt;/font&gt;&lt;ins&gt;java.net.URISyntaxException&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;: Illegal character in path at index 17: &lt;a href=&quot;file:///D:/citrus[1].jpg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///D:/citrus[1].jpg&lt;/a&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at java.base/java.net.URI$Parser.fail(&lt;/font&gt;&lt;ins&gt;URI.java:2974&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at java.base/java.net.URI$Parser.checkChars(&lt;/font&gt;&lt;ins&gt;URI.java:3145&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at java.base/java.net.URI$Parser.parseHierarchical(&lt;/font&gt;&lt;ins&gt;URI.java:3227&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at java.base/java.net.URI$Parser.parse(&lt;/font&gt;&lt;ins&gt;URI.java:3175&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at java.base/java.net.URI.&amp;lt;init&amp;gt;(&lt;/font&gt;&lt;ins&gt;URI.java:623&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at java.base/java.net.URI.create(&lt;/font&gt;&lt;ins&gt;URI.java:904&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; ... 3 more&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Following is the code to reproduce the issue.&lt;br/&gt;
&lt;font color=&quot;#7f0055&quot;&gt;try&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; String &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileName&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;D:&lt;br class=&quot;atl-forced-newline&quot; /&gt;citrus&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.jpg&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; FileSystemManager &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fsManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = VFS.&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;getManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; FileObject &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileObject&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fsManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.resolveFile(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileName&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; System.&lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;out&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.println(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileObject&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.getPath());&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;catch&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(Exception &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;ex&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;) {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;ex&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.printStackTrace();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10&lt;/p&gt;

&lt;p&gt;Java 17&lt;/p&gt;

&lt;p&gt;Apache VFS 2.9.0&lt;/p&gt;</environment>
        <key id="13544835">VFS-840</key>
            <summary>IllegalArgumentException when using special characters in filename eg [ or ] and calling FileObject.getPath method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="usman.bajwah">Usman Ashraf Bajwah</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jul 2023 15:37:00 +0000</created>
                <updated>Mon, 23 Sep 2024 21:06:23 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17747053" author="b.eckenfels" created="Tue, 25 Jul 2023 16:07:24 +0000"  >&lt;p&gt;In VFS2 you must url encode the resolveFile(argument). &lt;/p&gt;

&lt;p&gt;Not sure if the error can maybe be thrown in another way.&lt;/p&gt;</comment>
                            <comment id="17747061" author="JIRAUSER301519" created="Tue, 25 Jul 2023 16:32:56 +0000"  >&lt;p&gt;Tried that and it was another error with FileNotFoundException. used&#160;&lt;br/&gt;
&lt;font color=&quot;#000000&quot;&gt;String &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;encodedFileName&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = java.net.URLEncoder.&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;encode&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileName&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;,&lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;UTF-8&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&lt;ins&gt;org.apache.commons.vfs2.FileSystemException&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;: Could not find file with URI &quot;D%3A%5Ccitrus%5B1%5D.jpg&quot; because it is a relative path, and no base URI was provided.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at org.apache.commons.vfs2.FileSystemException.requireNonNull(&lt;/font&gt;&lt;ins&gt;FileSystemException.java:88&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(&lt;/font&gt;&lt;ins&gt;DefaultFileSystemManager.java:805&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(&lt;/font&gt;&lt;ins&gt;DefaultFileSystemManager.java:754&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(&lt;/font&gt;&lt;ins&gt;DefaultFileSystemManager.java:819&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ff0000&quot;&gt; at com.gallerysystems.tms.common.util.FileUtil.main(&lt;/font&gt;&lt;ins&gt;FileUtil.java:859&lt;/ins&gt;&lt;font color=&quot;#ff0000&quot;&gt;)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17747070" author="b.eckenfels" created="Tue, 25 Jul 2023 16:52:22 +0000"  >&lt;p&gt;The resolve always needs a base of you don&#8217;t set a base url. For example you can use  `cwd = fsm.toFileObject(new File(&quot;.&quot;)); jpg = fsm.resovleFile(cwd, &quot;test%5B1%5D.jpg&quot;);`&lt;/p&gt;

&lt;p&gt;Btw also beware, fo.getChildre(fn) on the other hand does not work with url encoding.&lt;/p&gt;</comment>
                            <comment id="17747078" author="JIRAUSER301519" created="Tue, 25 Jul 2023 17:09:37 +0000"  >&lt;p&gt;Not understanding the proposed solution. How we can create cwd ? and in my application i am not specifying base url seprately and its working fine apart from these special characters. There should be a simple solution for this problem.&lt;/p&gt;

&lt;p&gt;used this code but still its erroring out.&lt;br/&gt;
&lt;font color=&quot;#7f0055&quot;&gt;try&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; String &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileName&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;citrus&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.jpg&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; String &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;encodedFileName&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = URLEncoder.&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;encode&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileName&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;,&lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;UTF-8&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; FileSystemManager &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fsManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = VFS.&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;getManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; FileObject &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;baseObject&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fsManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.resolveFile(&lt;/font&gt;&lt;font color=&quot;#2a00ff&quot;&gt;&quot;D:\ \&quot;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;); &#8211; No spaces just to avoid JIRA&apos;s styling&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; FileObject &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileObject&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fsManager&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.resolveFile(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;baseObject&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;, &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;encodedFileName&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;);&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; System.&lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;out&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.println(&lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;fileObject&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.getPath());&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;catch&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(Exception &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;ex&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;) {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;ex&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.printStackTrace();&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17747216" author="b.eckenfels" created="Tue, 25 Jul 2023 23:59:38 +0000"  >&lt;p&gt;I would suggest to discuss usage questions on the commons-user mailing list. The rules are annoying but simple:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;filenames have to be url encoded in most API (exception like getChild)&lt;/li&gt;
	&lt;li&gt;fsm.resolveFile needs a fully qualified name or a base name or a base url&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In you example I would try &quot;/D:&quot; as an absolute filename (I am not completely sure bout the semantics, as I normally just use the before mentioned convenient method to convert java.io.File into FileObject).&lt;/p&gt;</comment>
                            <comment id="17747408" author="JIRAUSER301519" created="Wed, 26 Jul 2023 09:23:11 +0000"  >&lt;p&gt;The problem here is not with resolvefile method. it is correctly working as per my understanding. The issue lies with getPath() method which is not encoding the URI while converting it to get the Path. Resolving with your method may be good if we have known directory from which we need to get the files. But my scenario is different.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If I use your method still getPath giving me same error.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A path is given to the application which can be a local file system path, over the network or UNC path. I have to get all the folders and files and collect the information and then pass some of the files to another program/api for further processing. Using apache VFS so we could include other schemes as well in future. The easiest way for me is to give this path to get FileObject and then hierarchically get the Path and other information. It is working fine but when there are special characters in that its failing.&lt;/p&gt;</comment>
                            <comment id="17747415" author="garydgregory" created="Wed, 26 Jul 2023 09:31:56 +0000"  >&lt;p&gt;It&apos;s likely the underlying issue is that the JDK URI and URL classes are hopelessly broken, which is a well known issue (garbage in, garbage out), as they can hold illegal values, non-encoded values that is.&lt;/p&gt;

&lt;p&gt;It would be nice for us to work around that, and this might be one of those spots. I&apos;m not sure we should introduce our own URI builder like HttpComponents had to, but that might be the solution. &lt;/p&gt;</comment>
                            <comment id="17747432" author="JIRAUSER301519" created="Wed, 26 Jul 2023 10:03:02 +0000"  >&lt;p&gt;So what would be the workaround for this problem until we have some official fix for this (if we consider this as a bug)&lt;/p&gt;</comment>
                            <comment id="17747440" author="b.eckenfels" created="Wed, 26 Jul 2023 10:20:58 +0000"  >&lt;p&gt;You could try getName().toString() or variations thereof, basically anything which avoids getURI().&lt;/p&gt;</comment>
                            <comment id="17747443" author="JIRAUSER301519" created="Wed, 26 Jul 2023 10:29:52 +0000"  >&lt;p&gt;That would append &lt;font color=&quot;#000000&quot;&gt;&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;&lt;/font&gt; with name which i have to remove manually. If there is no other option then may be i have to do this way. and then create Path using &lt;font color=&quot;#7f0055&quot;&gt;public&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;static&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; Path &lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;get&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(String &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;first&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;, String... &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;more&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;).&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17883403" author="mbellew" created="Fri, 20 Sep 2024 20:22:22 +0000"  >&lt;p&gt;I&apos;ve just hit this, in trying to sort this out I discovered various JDK and VFS inconsistencies (alluded to above).&#160; In trying to make the simplest repro I found 5 chars that are poison to LocalFIle.getPath().&#160; They are ?[]{}&lt;/p&gt;

&lt;p&gt;This is a challenge for adopting VFS because I&apos;d have to somehow enforce that across the entire codebase no one uses FileObject.getPath() and always use FileObject.getName().&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.util.List&amp;lt;String&amp;gt; bad = java.util.Arrays.asList(&lt;br/&gt;
&#160; &#160; &quot;file:///%3F&quot;, &#160; &#160;// &#160;/? &#160; &#160; &#160; &#160;this fails differently than the others (getURI() is OK)&lt;br/&gt;
&#160; &#160; &quot;file:///%5B&quot;, &#160; &#160;// &#160;/[&lt;br/&gt;
&#160; &#160; &quot;file:///%5D&quot;, &#160; &#160;// &#160;/]&lt;br/&gt;
&#160; &#160; &quot;file:///%7B&quot;, &#160; &#160;// &#160;/}&lt;/p&gt;

&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;for (String uriString : bad)&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {
&#160; &#160; // TRY ENCODED
&#160; &#160; out.println(uriString);
&#160; &#160; try
&#160; &#160;
&#160;{ &#160; &#160; &#160; &#160; FileObject fo = VFS.getManager().resolveFile(uriString); &#160; &#160; &#160; &#160; fo.getName().getPathDecoded(); &#160; &#160; &#160; &#160; fo.getURI(); &#160; &#160; &#160; &#160; fo.getPath(); &#160; &#160; }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;&#160; &#160; catch (Exception x)&lt;br/&gt;
&#160; &#160;&lt;br/&gt;
&#160;{ &#160; &#160; &#160; &#160; out.println(x.getClass().getName() + &quot; &quot; + x.getMessage()); &#160; &#160; }&lt;br/&gt;
&#160; &#160; // TRY DECODED&lt;br/&gt;
&#160; &#160; out.println(URI.create(uriString).getPath());&lt;br/&gt;
&#160; &#160; try&lt;/p&gt;

&lt;p&gt;&#160; &#160;&lt;br/&gt;
&#160;{ &#160; &#160; &#160; &#160; FileObject fo = VFS.getManager().resolveFile(URI.create(uriString).getPath()); &#160; &#160; &#160; &#160; fo.getName().getPathDecoded(); &#160; &#160; &#160; &#160; fo.getURI(); &#160; &#160; &#160; &#160; fo.getPath(); &#160; &#160; }&lt;br/&gt;
&#160; &#160; catch (Exception x)&lt;br/&gt;
&#160;{ &#160; &#160; &#160; &#160; out.println(x.getClass().getName() + &quot; &quot; + x.getMessage()); &#160; &#160; }&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17883442" author="garydgregory" created="Sat, 21 Sep 2024 02:20:11 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbellew&quot; class=&quot;user-hover&quot; rel=&quot;mbellew&quot;&gt;mbellew&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please try 2.10.0-SNAPSHOT from git master or the snapshot repository: &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TY&lt;/p&gt;</comment>
                            <comment id="17884049" author="mbellew" created="Mon, 23 Sep 2024 20:52:14 +0000"  >&lt;p&gt;2.10.0 fails in the same way.&#160; E.g.&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Illegal character in path at index 8: &lt;a href=&quot;file:///[&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///[&lt;/a&gt;&lt;br/&gt;
&#160; &#160; at java.base/java.net.URI.create(URI.java:906)&lt;br/&gt;
&#160; &#160; at org.apache.commons.vfs2.FileObject.getURI(FileObject.java:321)&lt;br/&gt;
&#160; &#160; at org.apache.commons.vfs2.FileObject.getPath(FileObject.java:296)&lt;br/&gt;
&#160; &#160; at Main.main(Main.java:22)&lt;br/&gt;
Caused by: java.net.URISyntaxException: Illegal character in path at index 8: &lt;a href=&quot;file:///[&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///[&lt;/a&gt;&lt;br/&gt;
&#160; &#160; at java.base/java.net.URI$Parser.fail(URI.java:2976)&lt;br/&gt;
&#160; &#160; at java.base/java.net.URI$Parser.checkChars(URI.java:3147)&lt;br/&gt;
&#160; &#160; at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3229)&lt;br/&gt;
&#160; &#160; at java.base/java.net.URI$Parser.parse(URI.java:3177)&lt;br/&gt;
&#160; &#160; at java.base/java.net.URI.&amp;lt;init&amp;gt;(URI.java:623)&lt;br/&gt;
&#160; &#160; at java.base/java.net.URI.create(URI.java:904)&lt;br/&gt;
&#160; &#160; ... 3 more&lt;/p&gt;</comment>
                            <comment id="17884051" author="mbellew" created="Mon, 23 Sep 2024 21:06:23 +0000"  >&lt;p&gt;The problem seems to be that UriParser.encode(uri, RESERVED_URI_CHARS) as called from AbstractFileName.handleURISpecialCharacters() does not encode these 5 characters, causing an error later when java.net.URI.create() is called.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13071731" name="Main.java" size="773" author="mbellew" created="Mon, 23 Sep 2024 20:56:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jd9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-839] SoftRefReleaseThread&#32447;&#31243;close&#21518;&#65292;&#19981;&#33021;&#20877;&#27425;&#33258;&#21160;&#21551;&#21160;</title>
                <link>https://issues.apache.org/jira/browse/VFS-839</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&#24403;&#32531;&#23384;&#30340;&#25991;&#20214;&#34987;&#20840;&#37096;&#28165;&#29702;&#21518;&#65292;&#20250;&#33258;&#21160;&#20572;&#27490;SoftRefReleaseThread&#32447;&#31243;&#65292;&#20572;&#27490;&#32447;&#31243;&#20250;&#28165;&#31354;fileSystemCache&#65292;softRefReleaseThread&#21464;&#37327;&#35774;&#20026;null&#65292;&#20877;&#23558;&#21407;&#26469;&#30340;&#32447;&#31243;&#20013;&#26029;&#65292;&#19988;&#32447;&#31243;&#23433;&#20840;&#65307;&#20294;&#26159;&#22312;&#20572;&#27490;SoftRefReleaseThread&#32447;&#31243;&#36807;&#31243;&#20013;&#65292;&#21487;&#33021;&#26377;&#26032;&#30340;&#32447;&#31243;&#20174;&#32531;&#23384;&#33719;&#21462;&#25991;&#20214;&#65292;&#22312;&lt;/p&gt;

&lt;p&gt;getOrCreateFilesystemCache&#26041;&#27861;&#20013;&#65292;&#24403;fileSystemCache&#20026;&#31354;&#26102;&#65292;&#20250;&#21435;&#21551;&#21160;&#26032;&#30340;SoftRefReleaseThread&#32447;&#31243;&#65292;&#20294;&#20013;&#26029;&#32447;&#31243;&#30340;&#26041;&#27861;&#36824;&#26410;&#23558;softRefReleaseThread&#21464;&#37327;&#35774;&#20026;null&#65292;&#32447;&#31243;&#19981;&#33021;&#34987;&#21551;&#21160;&#65292;&#19988;&#23558;fileSystem&#20316;&#20026;key&#25918;&#21040;fileSystemCache&#21464;&#37327;&#65292;&#38750;&#32447;&#31243;&#23433;&#20840;&#65307;&#23548;&#33268;SoftRefReleaseThread&#32447;&#31243;&#20877;&#20063;&#19981;&#33021;&#33258;&#21160;&#21551;&#21160;&#65307;&lt;/p&gt;

&lt;p&gt;&#25972;&#20307;&#25191;&#34892;&#27493;&#39588;&#35265;&#19979;&#22270;&#65306;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13061216/13061216_image-2023-07-11-10-07-44-143.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS 7.4&lt;/p&gt;

&lt;p&gt;JDK 1.8&lt;/p&gt;</environment>
        <key id="13543093">VFS-839</key>
            <summary>SoftRefReleaseThread&#32447;&#31243;close&#21518;&#65292;&#19981;&#33021;&#20877;&#27425;&#33258;&#21160;&#21551;&#21160;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fanshu">fanshu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jul 2023 02:03:25 +0000</created>
                <updated>Tue, 11 Jul 2023 22:10:32 +0000</updated>
                                            <version>2.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17742200" author="garydgregory" created="Tue, 11 Jul 2023 22:10:32 +0000"  >&lt;p&gt;Google translate says:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When all the cached files are cleared, the SoftRefReleaseThread thread will be automatically stopped, the fileSystemCache will be cleared when the thread is stopped, the softRefReleaseThread variable will be set to null, and the original thread will be interrupted, and the thread is safe; but during the process of stopping the SoftRefReleaseThread thread, there may be new The thread fetches the file from the cache, in&lt;/p&gt;

&lt;p&gt;In the getOrCreateFilesystemCache method, when the fileSystemCache is empty, a new SoftRefReleaseThread thread will be started, but the method of interrupting the thread has not yet set the softRefReleaseThread variable to null, the thread cannot be started, and the fileSystem is used as the key in the fileSystemCache variable, which is not thread-safe ;cause the SoftRefReleaseThread thread can no longer be automatically started;&lt;/p&gt;

&lt;p&gt;The overall execution steps are shown in the figure below:&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13061216" name="image-2023-07-11-10-07-44-143.png" size="151342" author="fanshu" created="Tue, 11 Jul 2023 02:07:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1j2io:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-838] Port from Jsch to Apache Mina</title>
                <link>https://issues.apache.org/jira/browse/VFS-838</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Port from Jsch to Apache Mina&lt;/p&gt;

&lt;p&gt;JSch seems unmaintained.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mina.apache.org/downloads-sshd.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mina.apache.org/downloads-sshd.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13537652">VFS-838</key>
            <summary>Port from Jsch to Apache Mina</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 May 2023 11:50:51 +0000</created>
                <updated>Thu, 17 Jul 2025 12:03:58 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17726184" author="michael-o" created="Thu, 25 May 2023 11:59:00 +0000"  >&lt;p&gt;Strongly support this. I have expressed the same for the Wagon SSH Provider, but lack the time to do so. I will remove JSch based provider in the next major version.&lt;/p&gt;</comment>
                            <comment id="17726797" author="spoor" created="Sat, 27 May 2023 11:38:20 +0000"  >&lt;p&gt;I had a quick look at this, but I found some references to JSch in the API. For instance, in public interface &lt;tt&gt;IdentityProvider&lt;/tt&gt; there is method &lt;tt&gt;void addIdentity(JSch jsch) throws JSchException&lt;/tt&gt;, and in public class &lt;tt&gt;SftpClientFactory&lt;/tt&gt; there&apos;s method &lt;tt&gt;createConnection&lt;/tt&gt; that returns a JSch &lt;tt&gt;Session&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I see four possibilities:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Do nothing&lt;/li&gt;
	&lt;li&gt;Switch to &lt;a href=&quot;https://github.com/mwiede/jsch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mwiede/jsch&lt;/a&gt;. However, its license (LGPL) is an issue.&lt;/li&gt;
	&lt;li&gt;Create a second package for a Mina-backed file system implementation, and deprecate everything from the existing package.&lt;/li&gt;
	&lt;li&gt;Break stuff and go for a new major version.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17726799" author="spoor" created="Sat, 27 May 2023 12:19:34 +0000"  >&lt;p&gt;I tihnk option 2 is actually the best option. Its &lt;a href=&quot;https://github.com/mwiede/jsch/blob/master/LICENSE.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;license&lt;/a&gt; is no longer LGPL but BSD:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;JSch 0.0.* was released under the GNU LGPL license.  Later, we have switched &lt;br/&gt;
over to a BSD-style license. &lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------------&lt;br/&gt;
Copyright (c) 2002-2015 Atsuhiko Yamanaka, JCraft,Inc. &lt;br/&gt;
All rights reserved.&lt;/p&gt;

&lt;p&gt;Redistribution and use in source and binary forms, with or without&lt;br/&gt;
modification, are permitted provided that the following conditions are met:&lt;/p&gt;

&lt;p&gt;  1. Redistributions of source code must retain the above copyright notice,&lt;br/&gt;
     this list of conditions and the following disclaimer.&lt;/p&gt;

&lt;p&gt;  2. Redistributions in binary form must reproduce the above copyright &lt;br/&gt;
     notice, this list of conditions and the following disclaimer in &lt;br/&gt;
     the documentation and/or other materials provided with the distribution.&lt;/p&gt;

&lt;p&gt;  3. The names of the authors may not be used to endorse or promote products&lt;br/&gt;
     derived from this software without specific prior written permission.&lt;/p&gt;

&lt;p&gt;THIS SOFTWARE IS PROVIDED ``AS IS&apos;&apos; AND ANY EXPRESSED OR IMPLIED WARRANTIES,&lt;br/&gt;
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND&lt;br/&gt;
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,&lt;br/&gt;
INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,&lt;br/&gt;
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT&lt;br/&gt;
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,&lt;br/&gt;
OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF&lt;br/&gt;
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING&lt;br/&gt;
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,&lt;br/&gt;
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And from &lt;a href=&quot;https://github.com/mwiede/jsch/blob/master/README&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;README&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Description&lt;br/&gt;
===========&lt;br/&gt;
JSch is a pure Java implementation of SSH2.  JSch allows you to &lt;br/&gt;
connect to an sshd server and use port forwarding, X11 forwarding, &lt;br/&gt;
file transfer, etc., and you can integrate its functionality&lt;br/&gt;
into your own Java programs. JSch is licensed under BSD style license.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17726803" author="spoor" created="Sat, 27 May 2023 13:26:54 +0000"  >&lt;p&gt;A quick attempt to simply replace the dependency gives the following error during testing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: com.jcraft.jsch.JSchAlgoNegoFailException: Algorithm negotiation fail: algorithmName=&lt;span class=&quot;code-quote&quot;&gt;&quot;kex&quot;&lt;/span&gt; jschProposal=&lt;span class=&quot;code-quote&quot;&gt;&quot;ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-c&quot;&lt;/span&gt; serverProposal=&lt;span class=&quot;code-quote&quot;&gt;&quot;diffie-hellman-group14-sha1,diffie-hellman-group1-sha1&quot;&lt;/span&gt;
        at com.jcraft.jsch.KeyExchange.guess(KeyExchange.java:155)
        at com.jcraft.jsch.Session.receive_kexinit(Session.java:569)
        at com.jcraft.jsch.Session.connect(Session.java:320)
        at com.jcraft.jsch.Session.connect(Session.java:187)
        at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:235)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have solved similar issues for my own project by changing sshd-core to sshd-sftp with a newer version, but that comes with its own (quite large) set of compiler errors.&lt;br/&gt;
An alternative could be to change the JSch configuration to add either &lt;tt&gt;diffie-hellman-group14-sha1&lt;/tt&gt; or &lt;tt&gt;diffie-hellman-group1-sha1&lt;/tt&gt; as supported algorithm.&lt;/p&gt;</comment>
                            <comment id="17726839" author="michael-o" created="Sat, 27 May 2023 18:54:33 +0000"  >&lt;p&gt;I prefer first 3, then 4.&lt;/p&gt;</comment>
                            <comment id="17727411" author="JIRAUSER300571" created="Tue, 30 May 2023 08:50:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Spoor&quot; class=&quot;user-hover&quot; rel=&quot;Spoor&quot;&gt;Spoor&lt;/a&gt;, that seems less like an error than an outdated SSH server. SHA1-based signature algorithms have been deprecated in (Open)SSH for a couple of years now.&lt;/p&gt;

&lt;p&gt;The JSCH-fork disabled them by default in 2021: &lt;a href=&quot;https://github.com/mwiede/jsch/issues/75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mwiede/jsch/issues/75&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17727575" author="spoor" created="Tue, 30 May 2023 15:14:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christiangfk&quot; class=&quot;user-hover&quot; rel=&quot;christiangfk&quot;&gt;christiangfk&lt;/a&gt;, I know it&apos;s an outdated SSH server. Like I said, updating the SSH test server fixed it for my own project. However, I couldn&apos;t quite get the updated dependency to work for VFS in the short time I spent on it.&lt;/p&gt;</comment>
                            <comment id="18007797" author="garydgregory" created="Thu, 17 Jul 2025 12:03:58 +0000"  >&lt;p&gt;I like option 3, more specifically:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Create a new Maven module commons-vfs2-ssh-jsch and move the current code there, same package, all code is deprecated.&lt;/li&gt;
	&lt;li&gt;Create a new Maven module commons-vfs2-ssh-mina and make this the default (via our configuration file)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1i534:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-836] VFS Class Loader resource issues across multiple threads</title>
                <link>https://issues.apache.org/jira/browse/VFS-836</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;It appears that if you have multiple threads reading the same resource from multiple threads using the VFSClassLoader, we can still have failures where the underlying zip file is closed out from underneath.&#160; I have been able to create this issue in a unit test case and am working on the resolution.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13534862">VFS-836</key>
            <summary>VFS Class Loader resource issues across multiple threads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ibella">Ivan Bella</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 May 2023 17:10:33 +0000</created>
                <updated>Wed, 3 May 2023 17:11:04 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17719001" author="ibella" created="Wed, 3 May 2023 17:11:04 +0000"  >&lt;p&gt;I am working on a pull/merge request.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ho28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-835] Severe Performance Issue - FileObject.copyFrom()</title>
                <link>https://issues.apache.org/jira/browse/VFS-835</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;We are facing severe performance with the FileObject.copyFrom() method, this method is taking 28 minutes for 20 MB file, its faster for un encrypted files (less than a minute), but with encryption on it is taking 28 minutes for 20 MB.&#160; We don&apos;t have any way to trace further, can you help?&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13531785">VFS-835</key>
            <summary>Severe Performance Issue - FileObject.copyFrom()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mahesh537">Mahesh</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Apr 2023 20:42:28 +0000</created>
                <updated>Thu, 25 May 2023 11:51:58 +0000</updated>
                                            <version>2.6.0</version>
                                    <fixVersion>2.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17709497" author="mahesh537" created="Thu, 6 Apr 2023 20:51:28 +0000"  >&lt;p&gt;Any quick help would be appreciated.&#160;&lt;/p&gt;</comment>
                            <comment id="17709706" author="garydgregory" created="Fri, 7 Apr 2023 14:53:42 +0000"  >&lt;p&gt;How do you expect any help when you provide no information to reproduce your use case?&lt;/p&gt;</comment>
                            <comment id="17709710" author="mahesh537" created="Fri, 7 Apr 2023 15:14:08 +0000"  >&lt;p&gt;Thank you Gary, we have started facing this issue after enabling encryption on the shared storage network, below is our code, do you have any insight how we can debug to identify where most of the time is being spent? Same document can be downloaded quickly by using native Linux features.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;FileObject localFile = manager.resolveFile(localFilePath);&lt;br/&gt;
System.out.println(&quot;Time Taken resolveLocalFile()- &quot; + (System.currentTimeMillis() - tMilli1));&lt;br/&gt;
tMilli1 = System.currentTimeMillis();&lt;br/&gt;
FileObject remoteFile = null;&lt;br/&gt;
remoteFile = manager.resolveFile(&quot;sftp://&quot; + userName + &quot;@&quot; + hostName + &quot;:&quot; + portno + &quot;/&quot; + remoteFilePath,createDefaultOptions(kkeypath, ppassphrase));&lt;br/&gt;
System.out.println(&quot;Time Taken resolveRemoteFile()- &quot; + (System.currentTimeMillis() - tMilli1));&lt;br/&gt;
tMilli1 = System.currentTimeMillis();&lt;br/&gt;
&lt;b&gt;localFile.copyFrom(remoteFile, Selectors.SELECT_SELF);&lt;/b&gt;&lt;br/&gt;
System.out.println(&quot;Time Taken Copy()- &quot; + (System.currentTimeMillis() - tMilli1));&lt;br/&gt;
tMilli1 = System.currentTimeMillis();&lt;br/&gt;
System.out.println(&quot;File download success &quot;);&lt;/p&gt;</comment>
                            <comment id="17709733" author="mahesh537" created="Fri, 7 Apr 2023 16:19:14 +0000"  >&lt;p&gt;Please let us know if any way we can add trace or debug to &lt;b&gt;copyFrom&lt;/b&gt; method to investigate further, looks like download is happening immediately but the call is not coming back from this method immediately.&#160;&lt;/p&gt;</comment>
                            <comment id="17709739" author="garydgregory" created="Fri, 7 Apr 2023 16:31:26 +0000"  >&lt;p&gt;You&apos;ll have to step into the code with a debugger or use a tool like VisualVM to see where time is being spent.&#160;&lt;/p&gt;</comment>
                            <comment id="17709745" author="b.eckenfels" created="Fri, 7 Apr 2023 17:04:56 +0000"  >&lt;p&gt;Do native sftp clients have roughly the same speed, then I don&#8217;t think it is related to VFS. The sftp library is certainly not the best optimized, but that kind of performance sounds like a deeper rooted issue. When you say encryption, what kind of sftp server and file encryption is that? The only thing the sftp client can influence here might be the blocksize of the copy operation, but even that should normally not affect it this hard.&lt;/p&gt;

&lt;p&gt;Maybe try to start with test code which only reads your source or only Writer your destination, to see which one is the issue.&lt;/p&gt;</comment>
                            <comment id="17712082" author="mahesh537" created="Thu, 13 Apr 2023 21:04:25 +0000"  >&lt;p&gt;When looked at SFTP Trace logs, we see repeated &quot;sent status End Of File&quot; messages when FileObject.&lt;b&gt;copyFrom()&lt;/b&gt; method was used and at the end this was force closed. Incase of Native SFTP, we see only one&#160; &quot;sent status End Of File&quot; and graceful closure of call. Looks like when encryption is enabled, API call seems to be not able to read or get End OF File immediately. Any thoughts here?&lt;/p&gt;</comment>
                            <comment id="17712099" author="b.eckenfels" created="Thu, 13 Apr 2023 21:41:09 +0000"  >&lt;p&gt;That sounds like a good and likely point, it can be problems with file length padding/recognition, eof character or even block alignment. That would all correlate with encryption layers.&lt;br/&gt;
(And is all easier to find than overall resource consumption or network bandwith problems)&lt;br/&gt;
To get to the bottom of this we need a bit more details. What is the server what kind of encryption, are all files affected or only with a certain size (multiple of 2^n-7 or such.&lt;/p&gt;

&lt;p&gt;I also wonder if it is related to VFS (especially loop logic, buffer size and file metadata) or if it&#8217;s a general problem of the ssh lib. Can you maybe check a Mina demo client?&lt;/p&gt;

&lt;p&gt;or, Can you are a test account accessible?&lt;/p&gt;</comment>
                            <comment id="17712104" author="mahesh537" created="Thu, 13 Apr 2023 21:57:20 +0000"  >&lt;p&gt;Thanks for quick response, below are the details about encryption mechanism, behavior is similar for all sizes, for 24 kb file it took 15 seconds and 20 MB file it took 28 min. PDFs seems to be taking more time compared to word, we can get more info.&#160;&lt;/p&gt;

&lt;p&gt;Encryption Details:&lt;/p&gt;

&lt;p&gt;RHEL&lt;/p&gt;

&lt;p&gt;Vormetric encryption with VTE agent version 7.3.0.158 AES256-CBC&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13537619">VFS-837</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h568:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-834] input streams prematurely closed</title>
                <link>https://issues.apache.org/jira/browse/VFS-834</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;This was discovered while using Spring with an underlying VFSClassLoader.&#160; If one created a Spring context uses &quot;classpath*:/MyFile.xml&quot; then everything works smoothly.&#160; However if using &quot;classpath:/MyFile.xml&quot; then it would result in a failure to get the contents of the file manifested as a sax parse exception at line 0, character 0.&#160; The workaround was easy (use classpath*:/...) however trying to figure out why this was occuring took some time.&lt;/p&gt;

&lt;p&gt;The underlying reason was that the VFSClassLoader.loadResource method changed in version 2.4 to wrap the FileObject returned by resolveFile in a try in this commit:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit 3b2de84556b88a51af42d38b99ce6bf81b970cb5
Author: Gary Gregory &amp;lt;gardgregory@gmail.com&amp;gt;
Date:&#160;&#160; Thu Jun 27 11:23:14 2019 -0400&#160;&#160;&#160;&#160;[VFS-719] Add methods to get the contents of file objects as strings.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As it turns out closing a FileObject subsequently closes input streams created within the same thread for that same file.&lt;/p&gt;

&lt;p&gt;The reason this broke Spring is that in one of those paths, an object was created that did a lazy loading of the resource which ended up closing an input stream that was still in use by that same thread (yes spring opens and reads the file twice, once for validation and once to resolve the configured beans).&lt;/p&gt;

&lt;p&gt;It does not appear there is a good reason to close the FileObject in this case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13529855">VFS-834</key>
            <summary>input streams prematurely closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ibella">Ivan Bella</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Mar 2023 19:20:03 +0000</created>
                <updated>Wed, 3 May 2023 17:08:05 +0000</updated>
                            <resolved>Wed, 3 May 2023 17:08:05 +0000</resolved>
                                    <version>2.4</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17704330" author="ibella" created="Thu, 23 Mar 2023 19:22:42 +0000"  >&lt;p&gt;I will be putting up a pull request momentarily for this ticket.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1gtao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-833] Make constructor FileSystemOptions(Map) public</title>
                <link>https://issues.apache.org/jira/browse/VFS-833</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;b&gt;Problem:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The map `org.apache.commons.vfs2.FileSystemOptions#options` is TreeMap. The datastructure is&#160; not thread-safe and resulting in situations like &lt;a href=&quot;https://ivoanjo.me/blog/2018/07/21/writing-to-a-java-treemap-concurrently-can-lead-to-an-infinite-loop-during-reads/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt;&#160; when used in multithreaded environments.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Workaround:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;As a workaround, we have to synchronize the `FileSystemOptions` in all the places of the code.&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&#160;If there is no issue, the constructor `&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;protected FileSystemOptions(Map&amp;lt;FileSystemOptionKey, Object&amp;gt; options)` can be made public, so that users will have an option to pass a synchronized map when they have to. * Or, wrap the `TreeMap` instance with `java.util.Collections#synchronizedMap`, ensuring thread safety at the core.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13529555">VFS-833</key>
            <summary>Make constructor FileSystemOptions(Map) public</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kannangce">Kannan Ramamoorthy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Mar 2023 07:39:44 +0000</created>
                <updated>Fri, 24 Mar 2023 13:02:32 +0000</updated>
                            <resolved>Fri, 24 Mar 2023 13:02:32 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17703793" author="b.eckenfels" created="Wed, 22 Mar 2023 20:52:16 +0000"  >&lt;p&gt;Thanks for the report. Can you give an example when this actually happens - I.e. who changes why fs options. This does not really work very well since they are part of the Idendity of a filesystem instance. So I would say most of the time they have to be immutable. At least this is what VFS assumes why it does not synchronize. Maybe it&#8217;s enough if we do a defensive copy?&lt;/p&gt;</comment>
                            <comment id="17704140" author="garydgregory" created="Thu, 23 Mar 2023 13:14:06 +0000"  >&lt;p&gt;I would be OK with making the Map ctor public but you should not expect VFS to be thread-safe, it was not designed with thread-safety in mind, and while some changes have been made over time to make some corners of the code thread-safe, most of it is not. IOW, unless something is documented as thread-safe, assume it is not.&lt;/p&gt;

&lt;p&gt;The blog post seems pointless since TreeMap is documented as thread-unsafe, from the TreeMap Javadoc (in Java 8) and it&apos;s been documented as such since Java 1.2 (when TreeMap was introduced):&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&lt;font color=&quot;#808080&quot;&gt; * &lt;/font&gt;&lt;font color=&quot;#1e789b&quot;&gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;&lt;/font&gt;&lt;font color=&quot;#808080&quot;&gt;Note that this implementation is not synchronized.&lt;/font&gt;&lt;font color=&quot;#1e789b&quot;&gt;&amp;lt;/strong&amp;gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * If multiple threads access a map concurrently, and at least one of the&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * threads modifies the map structurally, it &lt;/font&gt;&lt;font color=&quot;#1e789b&quot;&gt;&amp;lt;em&amp;gt;&lt;/font&gt;&lt;font color=&quot;#808080&quot;&gt;must&lt;/font&gt;&lt;font color=&quot;#1e789b&quot;&gt;&amp;lt;/em&amp;gt;&lt;/font&gt;&lt;font color=&quot;#808080&quot;&gt; be synchronized&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * externally. (A structural modification is any operation that adds or&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * deletes one or more mappings; merely changing the value associated&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * with an existing key is not a structural modification.) This is&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * typically accomplished by synchronizing on some object that naturally&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * encapsulates the map.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * If no such object exists, the map should be &quot;wrapped&quot; using the&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * &lt;/font&gt;&lt;font color=&quot;#a99c8c&quot;&gt;{@link Collections#synchronizedSortedMap Collections.synchronizedSortedMap}&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * method. This is best done at creation time, to prevent accidental&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * unsynchronized access to the map: &lt;/font&gt;&lt;font color=&quot;#1e789b&quot;&gt;&amp;lt;pre&amp;gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#808080&quot;&gt; * SortedMap m = Collections.synchronizedSortedMap(new TreeMap(...));&lt;/font&gt;&lt;font color=&quot;#1e789b&quot;&gt;&amp;lt;/pre&amp;gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17704597" author="garydgregory" created="Fri, 24 Mar 2023 13:02:32 +0000"  >&lt;p&gt;In git master and the snapshot repository.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1grg0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-832] Sftp channel not put back in doGetInputStream</title>
                <link>https://issues.apache.org/jira/browse/VFS-832</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;b&gt;since &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-210&quot; title=&quot;Wrapper-Mode VFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-210&quot;&gt;VFS-210&lt;/a&gt; added this in SftpFileObject.java:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
InputStream is;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
{
    &lt;span class=&quot;code-comment&quot;&gt;// VFS-210: sftp allows to gather an input stream even from a directory and will
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// fail on first read. So we need to check the type anyway
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getType().hasContent())
    {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider/read-not-file.error&quot;&lt;/span&gt;, getName());
    }

    is = channel.get(relPath);
}
&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (SftpException e)
{
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileNotFoundException(getName());
    }

    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(e);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;when throw an exception(such as file not exists or get input stream from a directory), the channel&#160; is not called with putChannel() and not be closed. when this happen several times (normally 10 times due to sshd default MaxSession is 10), getChannel() will always throws exception(Channel is not opened), because server will not response the open request.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;It can be reproduced in this way:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;//Setup our SFTP configuration
&lt;/span&gt;FileSystemOptions opts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
SftpFileSystemConfigBuilder instance = SftpFileSystemConfigBuilder.getInstance();
instance.setStrictHostKeyChecking(opts, &lt;span class=&quot;code-quote&quot;&gt;&quot;no&quot;&lt;/span&gt;);
instance.setUserDirIsRoot(opts, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
instance.setConnectTimeout(opts, Duration.ofSeconds(30));
instance.setSessionTimeout(opts, Duration.ofSeconds(30));
instance.setDisableDetectExecChannel(opts, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);

&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 15; i++) {
  &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileObject fileObject = VFS.getManager().resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//foo@example.com/path_not_exists.txt&quot;&lt;/span&gt;, opts)) {
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream inputStream = fileObject.getContent().getInputStream()) {
        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; something
&lt;/span&gt;      }
    }
  } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
    e.printStackTrace();
  }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;first 10 times will be &quot;Could not read from &quot;xxx&quot; because it is not a file.&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;then will be&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: com.jcraft.jsch.JSchException: channel is not opened.
&#160; &#160; at com.jcraft.jsch.Channel.sendChannelOpen(Channel.java:768)
&#160; &#160; at com.jcraft.jsch.Channel.connect(Channel.java:151)
&#160; &#160; at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getChannel(SftpFileSystem.java:213)
&#160; &#160; ... 6 more &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I will commit a pr to fix this&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13522745">VFS-832</key>
            <summary>Sftp channel not put back in doGetInputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wangerry">wangerry</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Feb 2023 09:23:52 +0000</created>
                <updated>Sat, 4 Feb 2023 14:38:10 +0000</updated>
                            <resolved>Sat, 4 Feb 2023 14:38:10 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="17684173" author="garydgregory" created="Sat, 4 Feb 2023 14:38:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wangerry&quot; class=&quot;user-hover&quot; rel=&quot;wangerry&quot;&gt;wangerry&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report and PR. Please verify git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1flgw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-831] No such file or directory</title>
                <link>https://issues.apache.org/jira/browse/VFS-831</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;% ls -l /var/tmp/reminders.json.xz&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 ec2-user  wheel  32 Jan 25 19:28 /var/tmp/reminders.json.xz&lt;br/&gt;
% hostname&lt;br/&gt;
FileContent content = manager.resolveFile(&quot;/var/tmp/reminders.json.xz&quot;).getContent();&lt;/p&gt;

&lt;p&gt;throws an &quot;org.apache.commons.vfs2.FileNotFoundException: Could not read from &quot;file:///var/tmp/reminders.json.xz&quot; because it is not a file.&quot;&lt;/p&gt;

&lt;p&gt;When I try accessing it with &quot;sftp&quot;, it gives:&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.FileSystemException: Could not find file with URI &quot;sftp://ec2-user@hasan.d8u.us//var/tmp/reminders.json.xz&quot; because it is a relative path, and no base URI was provided.&lt;/p&gt;

&lt;p&gt;It gives the same if I eliminate the double slash in the URL as well.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OpenJDK 14 FreeBSD 13.1-RELEASE&lt;/p&gt;</environment>
        <key id="13521555">VFS-831</key>
            <summary>No such file or directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hd1">Hasan Diwan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jan 2023 19:40:46 +0000</created>
                <updated>Thu, 26 Jan 2023 00:54:00 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17680796" author="garydgregory" created="Wed, 25 Jan 2023 20:52:52 +0000"  >&lt;p&gt;I&apos;m not sure what you expect we can do without a reproducible use case or better yet, a unit test.&lt;/p&gt;</comment>
                            <comment id="17680823" author="hd1" created="Wed, 25 Jan 2023 22:17:55 +0000"  >&lt;p&gt;Ok... test enclosed:&lt;/p&gt;

&lt;p&gt;@Test&lt;br/&gt;
public void testRetrieve() {&lt;br/&gt;
FileContent content = null;&lt;br/&gt;
try &lt;/p&gt;
{
.  content = manager.resolveFile(&quot;sftp://ec2-user@hasan.d8u.us//var/tmp/reminders.json.xz&quot;).getContent();
}
&lt;p&gt; catch (org.apache.commons.vfs2.FileSystemException e) &lt;/p&gt;
{
 content = manager.resolveFile(&quot;/var/tmp/reminders.json.xz&quot;).getContent();
}

&lt;p&gt;Assert.assertNotNull(&quot;Retrieval from remote falled!&quot;, content);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;The relevant public key is attached to this comment.&lt;/p&gt;</comment>
                            <comment id="17680837" author="hd1" created="Wed, 25 Jan 2023 23:56:43 +0000"  >&lt;p&gt;A little more investigation showed I didn&apos;t have Jcsh in pom.xml. Inserted it, the same error message lead me to add commons-lang3 3.12, overriding the managed version 3.10, as it was complaining about DurationUtils. Added this, and it&apos;s complaining about LONG_INT_MIN_VALUE. This appears to be indicating NumberUtils.LONG_INT_MIN_VALUE, which is shown as being &lt;span class=&quot;error&quot;&gt;&amp;#91;equivalent to Long.valueOf(Integer.MAX_VALUE)&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/commons-lang/blob/master/src/main/java/org/apache/commons/lang3/math/NumberUtils.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-lang/blob/master/src/main/java/org/apache/commons/lang3/math/NumberUtils.java&lt;/a&gt;). And, now I&apos;m stuck and am giving up for today.&lt;/p&gt;</comment>
                            <comment id="17680839" author="garydgregory" created="Thu, 26 Jan 2023 00:23:32 +0000"  >&lt;p&gt;You create a PR on GitHub with a failing test, then you would not have to deal with editing whatever pom.xml you are now editing.&#160;&lt;/p&gt;</comment>
                            <comment id="17680843" author="hd1" created="Thu, 26 Jan 2023 00:32:37 +0000"  >&lt;p&gt;Gary,&lt;br/&gt;
Your first comment asked for a &quot;failing test&quot;, my response provided one. &lt;/p&gt;

&lt;p&gt;I then did a deeper dive into the issue, reporting my findings in my 3rd. comment. Now., you have ignored everything in my 3rd comment, other than the pom.xml file, which is, IMO, completely irrelevant to VFS. What I am concluding is that VFS&apos; pom.xml is missing (at least 2) dependencies &amp;#8211; which I have added to my code &amp;#8211; and may have further issues. &lt;/p&gt;

&lt;p&gt;Lastly, the issue tracker linked to from &lt;span class=&quot;error&quot;&gt;&amp;#91;github&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/commons-vfs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs&lt;/a&gt;) is the &lt;span class=&quot;error&quot;&gt;&amp;#91;one I&amp;#39;ve used&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17680845" author="b.eckenfels" created="Thu, 26 Jan 2023 00:42:13 +0000"  >&lt;p&gt;I am somewhat confused, how is a FileNotFound error related to maven dependencies?&lt;/p&gt;</comment>
                            <comment id="17680847" author="hdiwan" created="Thu, 26 Jan 2023 00:54:00 +0000"  >&lt;p&gt;The original issue was that the URL given &amp;#8211; sftp://&lt;br/&gt;
ec2-user@hasan.d8u.us/var/tmp/reminders.json.xz - threw an Exception, so&lt;br/&gt;
the VM fell through to /var/tmp/reminders.json.xz, which was then not&lt;br/&gt;
found, the reason being that the file exists at the remote location &amp;#8211;&lt;br/&gt;
shown by the ls listing. The jscp dependency isn&apos;t automatically fetched &amp;#8211;&lt;br/&gt;
I added it to my pom manually, ditto commons-lang3, The JVM is now throwing&lt;br/&gt;
problem with NumberUtils&apos; constants. &amp;#8211; H&lt;/p&gt;

&lt;p&gt;On Wed, 25 Jan 2023 at 16:43, Bernd Eckenfels (Jira) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;



&lt;p&gt;&amp;#8211; &lt;br/&gt;
OpenPGP: &lt;a href=&quot;https://hasan.d8u.us/openpgp.asc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hasan.d8u.us/openpgp.asc&lt;/a&gt;&lt;br/&gt;
If you wish to request my time, please do so using&lt;br/&gt;
*bit.ly/hd1AppointmentRequest&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://bit.ly/hd1AppointmentRequest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bit.ly/hd1AppointmentRequest&lt;/a&gt;&amp;gt;*.&lt;br/&gt;
Si vous voudrais faire connnaisance, allez a *bit.ly/hd1AppointmentRequest&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://bit.ly/hd1AppointmentRequest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bit.ly/hd1AppointmentRequest&lt;/a&gt;&amp;gt;*.&lt;/p&gt;

&lt;p&gt;&amp;lt;&lt;a href=&quot;https://sks-keyservers.net/pks/lookup?op=get&amp;amp;search=0xFEBAD7FFD041BBA1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sks-keyservers.net/pks/lookup?op=get&amp;amp;search=0xFEBAD7FFD041BBA1&lt;/a&gt;&amp;gt;Sent&lt;br/&gt;
from my mobile device&lt;br/&gt;
Envoye de mon portable&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13054810" name="id_ecdsa.pub" size="196" author="hd1" created="Wed, 25 Jan 2023 22:17:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1fe80:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-830] SFTP - moveto() throws FileSystemException: Could not set the last modified timestamp</title>
                <link>https://issues.apache.org/jira/browse/VFS-830</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I am uploading a file via a temp file, by using the following code:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FileSystemOptions opts = createDefaultOptions();
BytesIdentityInfo identityInfo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BytesIdentityInfo(sshKey.getBytes(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
SftpFileSystemConfigBuilder.getInstance().setIdentityProvider(opts, identityInfo);
SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
SftpFileSystemConfigBuilder.getInstance().setSessionTimeout(opts, Duration.ofMillis(10000));&#160;
SftpFileSystemConfigBuilder.getInstance().setDisableDetectExecChannel(opts, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);

&lt;span class=&quot;code-comment&quot;&gt;// Create temp remote file object
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tempFilePath = remoteFolder + FilePathSeparator + tempFileName;
tempFileObject = remoteManager.resolveFile(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(&lt;span class=&quot;code-quote&quot;&gt;&quot;sftp&quot;&lt;/span&gt;,server.getServerInfo(),server.HostName,server.Port,tempFilePath,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;).toString(), opts);
tempFileObject.copyFrom(sourceFileObject, Selectors.SELECT_SELF);
&lt;span class=&quot;code-comment&quot;&gt;// rename to the correct name 
&lt;/span&gt;tempFileObject.moveTo(remoteFileObject);} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In this code, `sourceFileObject` is on a remote linux server; and `tempFileObject` and `remoteFileObject` are on the AWS SFTP Transfer server.&lt;/p&gt;

&lt;p&gt;The exec channel is disabled on the server, so I&apos;ve disabled its use here.&lt;/p&gt;

&lt;p&gt;When I run this code, the creation of the temp file runs successfully (using `copyFrom()`), but then the `moveTo()` call fails with the following exception:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;java.io.IOException: copyFileBetweenServersUsingTempFile() - Could not set the last modified timestamp of &quot;testRemoteFileName.txt&quot;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I was trying to understand why the moveTo() call would fail in this way, so I started digging into the Apache code. As far as I can see, the call to `setLastModifiedTime()` only happens if the code thinks that the source and target filesystems are different - see &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/83514069293cbf80644f1d47dd3eceaaf4e6954b/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/AbstractFileObject.java#L1726&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commons-vfs/AbstractFileObject.java at 83514069293cbf80644f1d47dd3eceaaf4e6954b &#183; apache/commons-vfs &#183; GitHub&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fileSystem == newfile.getFileSystem()) &lt;span class=&quot;code-comment&quot;&gt;// canRenameTo()
&lt;/span&gt;{
 ...
}
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
{
 ...
destFile.getContent().setLastModifiedTime(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getContent().getLastModifiedTime());
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The issue, I think, is the `==` in the canRenameTo() method - because I am actually moving from the temp file to the final file on the same file system, which means this should be returning true not false, right? presumably we should be using `.equals()` here, and overriding equals in the appropriate type of `FileSystem` object?&lt;/p&gt;</description>
                <environment>&lt;p&gt;RHEL Linux server connecting to AWS Transfer SFTP Server&lt;/p&gt;</environment>
        <key id="13520160">VFS-830</key>
            <summary>SFTP - moveto() throws FileSystemException: Could not set the last modified timestamp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="salexander">Simon Alexander</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jan 2023 09:26:05 +0000</created>
                <updated>Fri, 20 Jan 2023 20:22:26 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17678639" author="garydgregory" created="Thu, 19 Jan 2023 11:17:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=salexander&quot; class=&quot;user-hover&quot; rel=&quot;salexander&quot;&gt;salexander&lt;/a&gt;&lt;br/&gt;
The best path forward would be to add a failing unit test to our SFTP tests in a PR on GitHub.&lt;/p&gt;</comment>
                            <comment id="17678655" author="JIRAUSER298709" created="Thu, 19 Jan 2023 11:46:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160; as in, add a test to this folder &lt;a href=&quot;https://github.com/apache/commons-vfs/tree/83514069293cbf80644f1d47dd3eceaaf4e6954b/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/sftp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commons-vfs/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/sftp at 83514069293cbf80644f1d47dd3eceaaf4e6954b &#183; apache/commons-vfs &#183; GitHub&lt;/a&gt; and add it to the Test Suite defined there in &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/83514069293cbf80644f1d47dd3eceaaf4e6954b/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/sftp/SftpProviderTestCase.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SftpProviderTestCase.java&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17678704" author="garydgregory" created="Thu, 19 Jan 2023 13:38:00 +0000"  >&lt;p&gt;The best thing to do IMO is to create a new test class specific to your use case. What you found is older code IIRC that was based on Junit 3. You&apos;ll want your new test to use Junit 5. Unfortunately the tests have not all been updated to Junit 5 so they can be hard to follow.&lt;/p&gt;</comment>
                            <comment id="17679305" author="garydgregory" created="Fri, 20 Jan 2023 20:22:26 +0000"  >&lt;p&gt;If you can provide a PR I can review over the weekend, otherwise, it will be on my back-back-burner.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1f5nk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-829] Fix for SFTP memory leak committed on 2022-07-12 missing from 2.9.0 release on 2022-07-16</title>
                <link>https://issues.apache.org/jira/browse/VFS-829</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;While debugging some JVM heap dump file I noticed that it was caused by the same problem I reported &amp;amp; provided a fix for in &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/272.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/272.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Those changes have already been merged into the &apos;master&apos; branch on 2022-07-12&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
d745442a 2022-07-12 12:07:24 -0400 Gary Gregory SFTP: Memory leak because AbstractFileProvider#findFileSystem.
bd75c2cd 2022-07-12 12:05:01 -0400 Tobias Gierke SFTP: Memory leak because AbstractFileProvider#findFileSystem fails to detect equality of SFTP FileSystemOptions #272&#160; 
0737dc9b 2022-07-12 12:03:02 -0400 Gary Gregory SFTP: Memory leak because AbstractFileProvider#findFileSystem fails to detect equality of SFTP FileSystemOptions #272 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but for some reason never made it into the 2.9.0 release on 2022-07-16&lt;/p&gt;

&lt;p&gt;Are there any plans to release a 2.10.0 that includes these fixes ?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13518221">VFS-829</key>
            <summary>Fix for SFTP memory leak committed on 2022-07-12 missing from 2.9.0 release on 2022-07-16</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tgierke2342">Tobias Gierke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jan 2023 07:38:42 +0000</created>
                <updated>Fri, 13 Jan 2023 14:40:43 +0000</updated>
                            <resolved>Fri, 13 Jan 2023 14:40:43 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17676627" author="garydgregory" created="Fri, 13 Jan 2023 13:45:31 +0000"  >&lt;p&gt;Would you test/check git master? Maybe the change made it in post release.&#160;&lt;/p&gt;</comment>
                            <comment id="17676634" author="tgierke2342" created="Fri, 13 Jan 2023 14:06:51 +0000"  >&lt;p&gt;Like I wrote in the description - it&apos;s present on the &apos;master&apos; branch but missing from the &apos;rel/commons-vfs-2.9.0&apos; /&#160; &apos;commons-vfs-2.9.0-RC1&apos; tag.&lt;/p&gt;</comment>
                            <comment id="17676654" author="garydgregory" created="Fri, 13 Jan 2023 14:40:26 +0000"  >&lt;p&gt;So it will be in the next release.&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1etqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-826] SFTP file get content issue for some servers</title>
                <link>https://issues.apache.org/jira/browse/VFS-826</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Some SFTP servers does not allow multiple channels open at same time,&lt;/p&gt;

&lt;p&gt;but SftpFileObject always open two if no hacks applied - at first just creates channel, then creates new channel to fetch type.&#160;&lt;/p&gt;

&lt;p&gt;Thus it is not possible to read the file in straightforward manner.&lt;/p&gt;

&lt;p&gt;Possible solution is to move file type check on top, so underlying code of getType will &apos;park&apos; channel and then it will be reused.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; InputStream doGetInputStream(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bufferSize) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt;((SftpFileSystem)&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getAbstractFileSystem()) {
        ChannelSftp channel = ((SftpFileSystem)&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getAbstractFileSystem()).getChannel();

        InputStream inputStream;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getType().hasContent()) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider/read-not-file.error&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getName());
            }

            inputStream = channel.get(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.relPath);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (SftpException var7) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (var7.id == 2) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileNotFoundException(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getName());
            }

            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(var7);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SftpInputStream(channel, inputStream, bufferSize);
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13492128">VFS-826</key>
            <summary>SFTP file get content issue for some servers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Babin">Dmitry</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2022 21:56:00 +0000</created>
                <updated>Wed, 26 Oct 2022 23:31:25 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17624789" author="garydgregory" created="Wed, 26 Oct 2022 23:31:25 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Babin&quot; class=&quot;user-hover&quot; rel=&quot;Babin&quot;&gt;Babin&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Feel free to propose a PR on GitHub.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ad54:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-825] GZip input and output stream results in StackOverflowError</title>
                <link>https://issues.apache.org/jira/browse/VFS-825</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The methods GZipFileObject#doGetInputStream and GZipFileObject#doGetOuputStream generate a StackOverflowError.&lt;/p&gt;

&lt;p&gt;The loops are &lt;em&gt;GZipFileObject#doGetInputStream(int) &amp;gt; AbstractFileObject#getInputStream() &amp;gt; AbstractFileObject#getInputStream(int) &amp;gt; GZipFileObject#doGetInputStream(int)&lt;/em&gt;&lt;br/&gt;
and &lt;em&gt;GZipFileObject#doGetOutputStream(boolean) &amp;gt;&lt;/em&gt; &lt;em&gt;AbstractFileObject&lt;/em&gt;&lt;em&gt;#getOutputStream(boolean) &amp;gt; GZipFileObject#doGetOutputStream(boolean)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;This is probably due to the commit &lt;a href=&quot;https://github.com/apache/commons-vfs/commit/a1aa1de2f981f624bb1022b94ceb05aa1a09f650&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/commit/a1aa1de2f981f624bb1022b94ceb05aa1a09f650&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13486796">VFS-825</key>
            <summary>GZip input and output stream results in StackOverflowError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="agoubard">Anthony Goubard</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Oct 2022 09:04:01 +0000</created>
                <updated>Mon, 5 Dec 2022 08:45:59 +0000</updated>
                            <resolved>Sun, 4 Dec 2022 21:30:00 +0000</resolved>
                                    <version>2.10.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17619412" author="agoubard" created="Tue, 18 Oct 2022 09:51:17 +0000"  >&lt;p&gt;Bug fix pull request: &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/322&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17643075" author="garydgregory" created="Sun, 4 Dec 2022 21:30:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=agoubard&quot; class=&quot;user-hover&quot; rel=&quot;agoubard&quot;&gt;agoubard&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report and PR. Please verify git master and close.&lt;/p&gt;

&lt;p&gt;You can also point your POM to &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;to resolve SNAPSHOT jars.&lt;/p&gt;</comment>
                            <comment id="17643163" author="agoubard" created="Mon, 5 Dec 2022 08:45:59 +0000"  >&lt;p&gt;Merge verified in the master branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19gco:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-824] Http4FileSystem - Connection pool shut down</title>
                <link>https://issues.apache.org/jira/browse/VFS-824</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;import org.apache.commons.vfs2.FileObject;&lt;br/&gt;
import org.apache.commons.vfs2.FileSystemException;&lt;br/&gt;
import org.apache.commons.vfs2.FileSystemManager;&lt;br/&gt;
import org.apache.commons.vfs2.cache.WeakRefFilesCache;&lt;br/&gt;
import org.apache.commons.vfs2.impl.StandardFileSystemManager;&lt;br/&gt;
import org.apache.commons.vfs2.provider.AbstractFileSystem;&lt;/p&gt;

&lt;p&gt;import java.io.IOException;&lt;/p&gt;

&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@Date 2022&#24180;09&#26376;01&#26085; 14:10&lt;/li&gt;
	&lt;li&gt;@Description TODO&lt;br/&gt;
*/&lt;br/&gt;
public class TestHttpFileSystem {&lt;br/&gt;
public static void main(String[] args) throws IOException, InterruptedException {&lt;br/&gt;
try (StandardFileSystemManager fileSystemManager = new StandardFileSystemManager()) {&lt;br/&gt;
fileSystemManager.setConfiguration(StandardFileSystemManager.class.getResource(&quot;providers.xml&quot;));&lt;br/&gt;
fileSystemManager.setFilesCache(new WeakRefFilesCache());&lt;br/&gt;
// fileSystemManager.setFilesCache(new SoftRefFilesCache());&lt;br/&gt;
fileSystemManager.init();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;String path = &quot;http4://images5.alphacoders.com/796/796745.png&quot;;&lt;br/&gt;
AbstractFileSystem http4FileSystem = getFile(fileSystemManager, path);&lt;br/&gt;
System.out.println(http4FileSystem.isReleaseable());&lt;/p&gt;

&lt;p&gt;while (!http4FileSystem.isReleaseable()) &lt;/p&gt;
{
System.out.println(&quot;Try GC&quot;);
// GC
System.gc();
}
&lt;p&gt;// free resource&lt;br/&gt;
// http4FileSystem.httpclient is closed&lt;br/&gt;
fileSystemManager.freeUnusedResources();&lt;br/&gt;
// fileSystemManager.closeFileSystem(http4FileSystem);&lt;/p&gt;

&lt;p&gt;// get file again&lt;br/&gt;
getFile(fileSystemManager, path);&lt;br/&gt;
// Caused by: java.lang.IllegalStateException: Connection pool shut down&lt;br/&gt;
// at org.apache.http.util.Asserts.check(Asserts.java:34)&lt;br/&gt;
// at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.requestConnection(PoolingHttpClientConnectionManager.java:269)&lt;br/&gt;
// at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:176)&lt;br/&gt;
// at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)&lt;br/&gt;
// at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)&lt;br/&gt;
// at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)&lt;br/&gt;
// at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)&lt;br/&gt;
// at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)&lt;br/&gt;
// at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)&lt;br/&gt;
// at org.apache.commons.vfs2.provider.http4.Http4FileObject.executeHttpUriRequest(Http4FileObject.java:191)&lt;br/&gt;
// at org.apache.commons.vfs2.provider.http4.Http4FileObject.doGetType(Http4FileObject.java:156)&lt;br/&gt;
// at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1375)&lt;br/&gt;
// ... 2 more&lt;br/&gt;
}&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;private static AbstractFileSystem getFile(FileSystemManager fileSystemManager, String path) throws FileSystemException &lt;/p&gt;
{
FileObject fileObject = fileSystemManager.resolveFile(path);
System.out.println(&quot;File Type Is &quot; + fileObject.getType());

return (AbstractFileSystem) fileObject.getFileSystem();
}
&lt;p&gt;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java8&lt;/p&gt;

&lt;p&gt;windows&lt;/p&gt;</environment>
        <key id="13479628">VFS-824</key>
            <summary>Http4FileSystem - Connection pool shut down</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Destiny">&#35874;&#35029;&#20142;</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Sep 2022 09:17:48 +0000</created>
                <updated>Mon, 30 Jan 2023 04:13:07 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17599921" author="garydgregory" created="Sat, 3 Sep 2022 13:17:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Destiny&quot; class=&quot;user-hover&quot; rel=&quot;Destiny&quot;&gt;Destiny&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;You might get speedier help if you provide your use case as a failing unit test as a PR on GitHub.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12312720" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Docs Text</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&#20351;&#29992;Http4FileSystem &#33719;&#21462;&#25991;&#20214;&#21518;,&#20027;&#21160;&#37322;&#25918;&#26410;&#20351;&#29992;&#30340;&#36164;&#28304;,&#20250;&#23548;&#33268;httpclient&#34987;&#20851;&#38381;,&#20877;&#27425;&#35843;&#29992;&#20986;&#29616;&#24322;&#24120;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z188hk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-823] Deadlock in SFTP file system</title>
                <link>https://issues.apache.org/jira/browse/VFS-823</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Two threads accessing the same (cached) file (SftpFileObject) through the same cached SftpFileSystem can cause a deadlock due to the sequence of locks:&lt;/p&gt;

&lt;p&gt;Thread 1: locks SftpFileSystem object followed by attempted lock on SftpFileObject object&lt;br/&gt;
Thread 2: locks SftpFileObject object followed by attempted lock on SftpFileSystem object&lt;/p&gt;

&lt;p&gt;In the example below Thread 1 does a resolveFile call while Thread 2 does a moveTo call in VFS.&lt;/p&gt;

&lt;p&gt;Example stack trace:&lt;br/&gt;
{{}}&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Found one Java-level deadlock:
=============================
&lt;span class=&quot;code-quote&quot;&gt;&quot;STARS Scheduler_Worker-1&quot;&lt;/span&gt;:
&#160; waiting to lock monitor 0x000001a2550ccbb0 (object 0x000000008c239030, a org.apache.commons.vfs2.provider.sftp.SftpFileObject),
&#160; which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;STARS Scheduler_Worker-4&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;STARS Scheduler_Worker-4&quot;&lt;/span&gt;:
&#160; waiting to lock monitor 0x000001a248620b70 (object 0x000000008a9806b8, a org.apache.commons.vfs2.provider.sftp.SftpFileSystem),
&#160; which is held by &lt;span class=&quot;code-quote&quot;&gt;&quot;STARS Scheduler_Worker-1&quot;&lt;/span&gt;Java stack information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the threads listed above:
===================================================
&lt;span class=&quot;code-quote&quot;&gt;&quot;STARS Scheduler_Worker-1&quot;&lt;/span&gt;:
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doDetach(SftpFileObject.java:140)
&#160; &#160; &#160; &#160; - waiting to lock &amp;lt;0x000000008c239030&amp;gt; (a org.apache.commons.vfs2.provider.sftp.SftpFileObject)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.detach(AbstractFileObject.java:484)
&#160; &#160; &#160; &#160; - locked &amp;lt;0x000000008a9806b8&amp;gt; (a org.apache.commons.vfs2.provider.sftp.SftpFileSystem)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.refresh(AbstractFileObject.java:1790)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile(AbstractFileSystem.java:344)
&#160; &#160; &#160; &#160; - locked &amp;lt;0x000000008a9806b8&amp;gt; (a org.apache.commons.vfs2.provider.sftp.SftpFileSystem)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile(AbstractFileSystem.java:307)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.resolveFile(AbstractFileObject.java:1815)
&#160; &#160; &#160; &#160; at au.net.synergy.wts.business.scheduled.services.grms.FileHandlingSupport.findIncomingElectronicFiles(FileHandlingSupport.java:120)
...

&lt;span class=&quot;code-quote&quot;&gt;&quot;STARS Scheduler_Worker-4&quot;&lt;/span&gt;:
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.putChannel(SftpFileSystem.java:350)
&#160; &#160; &#160; &#160; - waiting to lock &amp;lt;0x000000008a9806b8&amp;gt; (a org.apache.commons.vfs2.provider.sftp.SftpFileSystem)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.sftp.SftpFileObject.statSelf(SftpFileObject.java:527)
&#160; &#160; &#160; &#160; - locked &amp;lt;0x000000008c239030&amp;gt; (a org.apache.commons.vfs2.provider.sftp.SftpFileObject)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.sftp.SftpFileObject.getPermissions(SftpFileObject.java:457)
&#160; &#160; &#160; &#160; - locked &amp;lt;0x000000008c239030&amp;gt; (a org.apache.commons.vfs2.provider.sftp.SftpFileObject)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doIsWriteable(SftpFileObject.java:262)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.isWriteable(AbstractFileObject.java:1625)
&#160; &#160; &#160; &#160; at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1677)
&#160; &#160; &#160; &#160; at au.net.synergy.wts.application.server.grms.GrmsSimulator.publishAsZip(GrmsSimulator.java:295)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13478159">VFS-823</key>
            <summary>Deadlock in SFTP file system</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manuel">Manuel Mall</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Aug 2022 08:11:49 +0000</created>
                <updated>Tue, 23 Aug 2022 08:11:49 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17zi0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-822] [SFTP] getGroupIds() throws NumberFormatException when a user has no groups</title>
                <link>https://issues.apache.org/jira/browse/VFS-822</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileSystem.java#L258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileSystem.java#L258&lt;/a&gt; the groupIds are retrieved using the command id -G. If a user has no groups (gid=0 for example) then the result is that:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileSystem.java#L264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileSystem.java#L264&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;will have an array with one entry being an empty string. This results in a NumberFormatException.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13473740">VFS-822</key>
            <summary>[SFTP] getGroupIds() throws NumberFormatException when a user has no groups</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="van der Walle">Mark van der Walle</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2022 09:28:32 +0000</created>
                <updated>Thu, 1 Sep 2022 10:35:26 +0000</updated>
                            <resolved>Thu, 28 Jul 2022 19:27:36 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17571835" author="garydgregory" created="Wed, 27 Jul 2022 10:37:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=van+der+Walle&quot; class=&quot;user-hover&quot; rel=&quot;van der Walle&quot;&gt;van der Walle&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;Would you mind posting a stack trace?&lt;/p&gt;

&lt;p&gt;Does your use case also touch &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/e538088c2f8cc9c31d742e39cc0f6b5d316f3474/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileSystem.java#L319&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/e538088c2f8cc9c31d742e39cc0f6b5d316f3474/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileSystem.java#L319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;?&lt;/p&gt;</comment>
                            <comment id="17571840" author="JIRAUSER293479" created="Wed, 27 Jul 2022 10:53:17 +0000"  >&lt;p&gt;i will post a stack trace shortly and also working on a PR. I will try id -u aswell, however I think that is unaffected by this.&lt;/p&gt;</comment>
                            <comment id="17571847" author="JIRAUSER293479" created="Wed, 27 Jul 2022 11:11:38 +0000"  >&lt;p&gt;I created a bare minimum example. i omitted the URI to the file as I am not allowed to share that.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO: Authentication succeeded (password).
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.commons.vfs2.FileSystemException: Could not determine &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; file &lt;span class=&quot;code-quote&quot;&gt;&quot;omittedforprivacyreasons&quot;&lt;/span&gt;&#160;is readable.
&#160;&#160; &#160;at org.apache.commons.vfs2.provider.AbstractFileObject.isReadable(AbstractFileObject.java:1582)
&#160;&#160; &#160;at nl.ocwduo.sftptest.VFSTest.main(VFSTest.java:39)
Caused by: java.lang.NumberFormatException: For input string: &quot;&quot;
&#160;&#160; &#160;at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
&#160;&#160; &#160;at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.java:662)
&#160;&#160; &#160;at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.java:770)
&#160;&#160; &#160;at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getGroupsIds(SftpFileSystem.java:267)
&#160;&#160; &#160;at org.apache.commons.vfs2.provider.sftp.SftpFileObject.getPermissions(SftpFileObject.java:467)
&#160;&#160; &#160;at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doIsReadable(SftpFileObject.java:257)
&#160;&#160; &#160;at org.apache.commons.vfs2.provider.AbstractFileObject.isReadable(AbstractFileObject.java:1580)
&#160;&#160; &#160;... 1 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17571850" author="JIRAUSER293479" created="Wed, 27 Jul 2022 11:16:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; I created a PR to address the issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/280&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/280&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17572618" author="garydgregory" created="Thu, 28 Jul 2022 19:27:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=van+der+Walle&quot; class=&quot;user-hover&quot; rel=&quot;van der Walle&quot;&gt;van der Walle&lt;/a&gt;&lt;br/&gt;
Thank you for your PR, changes are in Git master now and  &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                            <comment id="17572806" author="JIRAUSER293479" created="Fri, 29 Jul 2022 07:57:34 +0000"  >&lt;p&gt;I have verified the changes and confirm that our issue is resolved with the latest version&lt;/p&gt;</comment>
                            <comment id="17598810" author="JIRAUSER293479" created="Thu, 1 Sep 2022 08:27:58 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I was wondering when we could expect a 2.10 release of commons-vfs2 that incorporates this fix?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Mark&lt;/p&gt;</comment>
                            <comment id="17598875" author="garydgregory" created="Thu, 1 Sep 2022 10:35:26 +0000"  >&lt;p&gt;Within a month or so. I am waiting on the release of the Apache RAT plugin, so I can release Commons Parent, and then I can start releasing components again...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z178dk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-820] FileObject.copyFrom leaves extra bytes when copying from a smaller file</title>
                <link>https://issues.apache.org/jira/browse/VFS-820</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;If you copy a file using the &lt;em&gt;FileObject.copyFrom&lt;/em&gt; method and the destination file is larger than the source file, the destination will contain the bytes of the source file and the remaining bytes of the destination (See example).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.charset.StandardCharsets;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileObject;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.Selectors;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.VFS;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BugCopyToLargerFile {
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; LARGE_TEXT = &lt;span class=&quot;code-quote&quot;&gt;&quot;This is a larger text.\nTo show that the extra bytes are remining after a copy of a small file&quot;&lt;/span&gt;;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; SHORT_TEXT = &lt;span class=&quot;code-quote&quot;&gt;&quot;This is a &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; text.&quot;&lt;/span&gt;;

&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; args[]) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&#160; &#160; &#160; &#160; File largeFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.tmpdir&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;large.txt&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; File shortFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.tmpdir&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;.txt&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; FileObject largeFileObject = VFS.getManager().toFileObject(largeFile);
&#160; &#160; &#160; &#160; Files.writeString(largeFile.toPath(), LARGE_TEXT, StandardCharsets.UTF_8);
&#160; &#160; &#160; &#160; FileObject shortFileObject = VFS.getManager().toFileObject(shortFile);
&#160; &#160; &#160; &#160; Files.writeString(shortFile.toPath(), SHORT_TEXT, StandardCharsets.UTF_8);

&#160; &#160; &#160; &#160; checkFileContent(shortFile, SHORT_TEXT);
&#160; &#160; &#160; &#160; checkFileContent(largeFile, LARGE_TEXT);
&#160; &#160; &#160; &#160; largeFileObject.copyFrom(shortFileObject, Selectors.SELECT_ALL);
&#160; &#160; &#160; &#160; checkFileContent(largeFile, SHORT_TEXT);
&#160; &#160; }&#160; &#160; 

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void checkFileContent(File file, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; content) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileContent = Files.readString(file.toPath(), StandardCharsets.UTF_8);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fileContent.equals(content)) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(file.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot; correct&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(file.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot; incorrect content: &quot;&lt;/span&gt; + fileContent);
&#160; &#160; &#160; &#160; }
&#160; &#160; }
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;short.txt correct
large.txt correct
large.txt incorrect content: This is a short text..
To show that the extra bytes are remining after a copy of a small file
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note that the javadoc of copyFrom contains &quot;If this file does exist, it is deleted first.&quot; but it doesn&apos;t happen in the code.&lt;/p&gt;

&lt;p&gt;One solution would be to delete the file like in &lt;em&gt;FileObject.moveTo&lt;/em&gt; method&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (exists() &amp;amp;&amp;amp; !isSameFile(file)) {
 &#160; &#160; &#160; &#160; &#160; &#160;  deleteSelf();
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But I think that the problem is in the &lt;em&gt;DefaultFileContent.write&lt;/em&gt; methods&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tested on Windows 10&lt;/p&gt;</environment>
        <key id="13447671">VFS-820</key>
            <summary>FileObject.copyFrom leaves extra bytes when copying from a smaller file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="agoubard">Anthony Goubard</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 May 2022 10:12:00 +0000</created>
                <updated>Tue, 31 May 2022 15:15:44 +0000</updated>
                            <resolved>Tue, 31 May 2022 14:48:36 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17544424" author="garydgregory" created="Tue, 31 May 2022 14:32:38 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=agoubard&quot; class=&quot;user-hover&quot; rel=&quot;agoubard&quot;&gt;agoubard&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think commit &lt;tt&gt;34efda6b7c932d671012e5ff11c58e1ddd17a95d&lt;/tt&gt; fixed the issue. Would you test 2.10-SNAPSHOT from &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17544435" author="agoubard" created="Tue, 31 May 2022 14:47:12 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;,&lt;br/&gt;
 Yes, retested with 2.10-SNAPSHOT and it no longer has the problem.&lt;br/&gt;
output is now:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;short.txt correct
large.txt correct
large.txt correct
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17544453" author="garydgregory" created="Tue, 31 May 2022 15:15:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=agoubard&quot; class=&quot;user-hover&quot; rel=&quot;agoubard&quot;&gt;agoubard&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for confirming the fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13392714">VFS-807</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12tqo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-819] VFSClassLoader ClassNotFoundException JDK 17</title>
                <link>https://issues.apache.org/jira/browse/VFS-819</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;We (Accumulo) are seeing the VFSClassLoader failing in JDK 17. We have very simple tests, that are all failing when trying to use it to load classes from the classpath.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] Running org.apache.accumulo.start.classloader.vfs.providers.VfsClassLoaderTest
[ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 26.367 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.accumulo.start.classloader.vfs.providers.VfsClassLoaderTest
[ERROR] org.apache.accumulo.start.classloader.vfs.providers.VfsClassLoaderTest.testGetClass &#160;Time elapsed: 0.02 s &#160;&amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.ClassNotFoundException: test.HelloWorld
&#160; &#160; at org.apache.commons.vfs2.impl.VFSClassLoader.findClass(VFSClassLoader.java:150)
&#160; &#160; at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)
&#160; &#160; at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
&#160; &#160; at org.apache.accumulo.start.classloader.vfs.providers.VfsClassLoaderTest.testGetClass(VfsClassLoaderTest.java:66)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here is an example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VFSClassLoader(dirContents, vfs);

@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testGetClass() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
  &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; helloWorldClass = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cl.loadClass(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.HelloWorld&quot;&lt;/span&gt;);
  &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = helloWorldClass.getDeclaredConstructor().newInstance();
  assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Hello World!&quot;&lt;/span&gt;, o.toString());
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/apache/accumulo/blob/main/start/src/test/java/org/apache/accumulo/start/classloader/vfs/providers/VfsClassLoaderTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/accumulo/blob/main/start/src/test/java/org/apache/accumulo/start/classloader/vfs/providers/VfsClassLoaderTest.java&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;OpenJDK 17 version &quot;17.0.3&quot; 2022-04-19&lt;/p&gt;

&lt;p&gt;Apache Maven 3.8.5&lt;/p&gt;

&lt;p&gt;Multiple Linux&lt;/p&gt;</environment>
        <key id="13443662">VFS-819</key>
            <summary>VFSClassLoader ClassNotFoundException JDK 17</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mmiller">Mike Miller</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 May 2022 15:04:33 +0000</created>
                <updated>Mon, 9 May 2022 13:40:40 +0000</updated>
                            <resolved>Mon, 9 May 2022 13:40:40 +0000</resolved>
                                    <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17532966" author="ctubbsii" created="Fri, 6 May 2022 16:27:34 +0000"  >&lt;p&gt;These worked on JDK 17 until recently. It&apos;s not clear what changed. We noticed the failures occurred first in Temurin, then when we switched to Adoptium, it started occuring there a few weeks later. So, it seems like there may be a classloading behavior change upstream in Java that VFS is depending on.&lt;/p&gt;</comment>
                            <comment id="17533069" author="b.eckenfels" created="Fri, 6 May 2022 20:00:43 +0000"  >&lt;p&gt;In a similar situation I got this problem due to the April Java update which introduced a JAR file mime type. You can remove it in your types.properties if it helps. In case this is the reason for your Problem a better handling of known file types is already in master, see my comment here: &lt;a href=&quot;https://github.com/apache/commons-vfs/commit/f3b7a06f28aab2db829806e0e857c05b71a14305#comments&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/commit/f3b7a06f28aab2db829806e0e857c05b71a14305#comments&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you might be able to register the JARFileSystem with the new mimetype, that should also work.&lt;/p&gt;</comment>
                            <comment id="17533164" author="ctubbsii" created="Sat, 7 May 2022 00:30:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;, Thanks to your hint, I was able to work around the bug by simply adding a new mime mapping to VFS when constructing a new DefaultFileSystemManager (See &lt;a href=&quot;https://github.com/apache/accumulo/pull/2683/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/accumulo/pull/2683/files&lt;/a&gt;). I tested one case, and it seems work. We&apos;ll wait for all CI tasks to finish to see if it fixes the problem completely.&lt;/p&gt;</comment>
                            <comment id="17533165" author="ctubbsii" created="Sat, 7 May 2022 00:49:18 +0000"  >&lt;p&gt;All tests pass. So, this is an easy fix for us. I don&apos;t think this is a bug in VFS. This can be closed. See also &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-770&quot; title=&quot;FileSystemManager.createFileSystem(FileObject) fails on Gzip files.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-770&quot;&gt;&lt;del&gt;VFS-770&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13297050">VFS-770</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1255s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-818] SftpFileObject.isReadable may return false for user root</title>
                <link>https://issues.apache.org/jira/browse/VFS-818</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I got the following exception when trying to call &lt;tt&gt;org.apache.commons.vfs2.FileContent.getRandomAccessContent(READ)&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; org.apache.commons.vfs2.FileSystemException: File &quot;sftp://root:***@host/var/log/myFile.log&quot; is not readable.
    at org.apache.commons.vfs2.provider.AbstractFileObject.getRandomAccessContent(AbstractFileObject.java:1340)
    at org.apache.commons.vfs2.provider.DefaultFileContent.getRandomAccessContent(DefaultFileContent.java:373)
    at Main.main(Main.java:&amp;lt;&amp;gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem seems to be located in the PosixPermissions check introduced with this commit:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-vfs/commit/3b73cc3a9bba6c25520d20f83d7f68f69e2ba911&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/commit/3b73cc3a9bba6c25520d20f83d7f68f69e2ba911&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-405&quot; title=&quot;Get/set the file permissions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-405&quot;&gt;&lt;del&gt;VFS-405&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;


&lt;p&gt;See example code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.apache.commons.vfs2.util.RandomAccessMode.READ;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileObject;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileSystemManager;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileSystemOptions;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.RandomAccessContent;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.VFS;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.provider.sftp.SftpFileSystemConfigBuilder;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Main{

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    FileSystemManager fsManager = VFS.getManager();
    FileSystemOptions opts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
    SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(opts, &lt;span class=&quot;code-quote&quot;&gt;&quot;no&quot;&lt;/span&gt;);
    SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileUri = &lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//root:pw@host/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/log/myFile.log&quot;&lt;/span&gt;;
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// my file has following permissions:
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// root@host:/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/log# ls -lah myFile.log
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// -rw-r----- 1 tomcat tomcat 8.5M Apr 19 15:02 myFile.log
&lt;/span&gt;    FileObject myFile = fsManager.resolveFile(fileUri, opts);
    RandomAccessContent randomAccessContent = myFile.getContent().getRandomAccessContent(READ);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(randomAccessContent.length());
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As one can see user tomcat can read, group tomcat can read. But not &lt;em&gt;everyone&lt;/em&gt; is allowed to read. In my case i authenticated with user &lt;tt&gt;root&lt;/tt&gt; (&lt;tt&gt;uid=0, gid=0&lt;/tt&gt;).&lt;br/&gt;
In that case &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java#L456-L476&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java#L456-L476&lt;/a&gt; creates PosixPermissions with the &lt;em&gt;hints&lt;/em&gt; not owner, not in group. The method &lt;tt&gt;org.apache.commons.vfs2.util.PosixPermissions.isReadable()&lt;/tt&gt; will than just check if &lt;em&gt;anyone&lt;/em&gt; (/other) is able to read the file, which is not granted (mask is &lt;tt&gt;0640&lt;/tt&gt;)&lt;/p&gt;


&lt;p&gt;I guess there should be an extra check for &lt;tt&gt;root&lt;/tt&gt; which is always granted access.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13440440">VFS-818</key>
            <summary>SftpFileObject.isReadable may return false for user root</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cnuessgens">Christian N&#252;ssgens</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Apr 2022 13:30:29 +0000</created>
                <updated>Wed, 20 Apr 2022 07:34:51 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17524308" author="JIRAUSER288303" created="Tue, 19 Apr 2022 13:34:03 +0000"  >&lt;p&gt;There is &lt;em&gt;a kind&lt;/em&gt; of a workaround:&lt;/p&gt;

&lt;p&gt;One can set &lt;tt&gt;SftpFileSystemConfigBuilder.getInstance().setDisableDetectExecChannel(opts, true)&lt;/tt&gt;&lt;br/&gt;
Than the &lt;tt&gt;uid&lt;/tt&gt; and &lt;tt&gt;gid&lt;/tt&gt; will not be determined and via &lt;tt&gt;org.apache.commons.vfs2.provider.sftp.UserIsOwnerPosixPermissions&lt;/tt&gt; it is &lt;em&gt;assumed&lt;/em&gt; that the user is always owner and in group. &lt;/p&gt;</comment>
                            <comment id="17524312" author="garydgregory" created="Tue, 19 Apr 2022 13:38:33 +0000"  >&lt;p&gt;Thank you for the information. Feel free to provide a PR on GitHub &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17524541" author="JIRAUSER288315" created="Tue, 19 Apr 2022 19:01:13 +0000"  >&lt;p&gt;I have the same Problem when I&apos;m using my software based on vfs: &lt;a href=&quot;https://github.com/otros-systems/otroslogviewer/issues/607&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/otros-systems/otroslogviewer/issues/607&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17524556" author="JIRAUSER288303" created="Tue, 19 Apr 2022 19:23:10 +0000"  >&lt;p&gt;I have no deep knowledge on Linux FS privileges.&lt;/p&gt;

&lt;p&gt;Would it be sufficient to assume that &quot;root&quot; is always able to read/write/execute? &lt;/p&gt;

&lt;p&gt;Furthermore is it required to have UID=0 &lt;b&gt;and&lt;/b&gt; GID=0 to identify as &quot;root&quot; or is one of the two sufficient?&lt;/p&gt;</comment>
                            <comment id="17524574" author="JIRAUSER288315" created="Tue, 19 Apr 2022 20:30:13 +0000"  >&lt;p&gt;I have create a pull request: See &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/257&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think if the user has the ID 0 it is root. I don&apos;t think the group root (GID=0) has read permissions to every file.&lt;/p&gt;</comment>
                            <comment id="17524580" author="b.eckenfels" created="Tue, 19 Apr 2022 20:37:29 +0000"  >&lt;p&gt;I don&#8217;t think this can be actually won, there is no way for a client to deduce permissions for all semantics which could be at play here (think ACL, root squash, readonly filesystem, SELinux, etc). Therefore (again) I find it not a good idea to try to deduce access errors, instead we should just try the operation.&lt;/p&gt;

&lt;p&gt;Having said that people should really not use root user and I would not encourage it by adding a specific workaround for it. Having said that.. it probably also does not hurt, it&#8217;s not a security critical permission enforcement.&lt;/p&gt;</comment>
                            <comment id="17524594" author="JIRAUSER288315" created="Tue, 19 Apr 2022 21:17:36 +0000"  >&lt;p&gt;I changed my pull request. I only remove the permission check.&lt;/p&gt;</comment>
                            <comment id="17524780" author="JIRAUSER288303" created="Wed, 20 Apr 2022 07:34:51 +0000"  >&lt;p&gt;I think we should only change the behaviour of SftpFileObject (not for all implementations via AbstractFileObject)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Furthermore the isReadable mehtod did check if the file &quot;exists&quot; and (currently) does check if the user has read-permission.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think the exists check could remain (to fail-fast)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11leo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-817] DeadLock on SftpFileObject</title>
                <link>https://issues.apache.org/jira/browse/VFS-817</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Deadlock happens on SftpFileObject.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt;No matter using shared between threads StandardFileSystemManager or separate manager for each thread (different stack trace in core, but still deadlock)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;Not reproduced on 2.8.0.&lt;/p&gt;

&lt;p&gt;Core files in attach (one for separate &lt;font color=&quot;#000000&quot;&gt;StandardFileSystemManager &lt;/font&gt;, one for shared between threads)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13433685">VFS-817</key>
            <summary>DeadLock on SftpFileObject</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Mykhailoz">Mykhailo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Mar 2022 16:19:32 +0000</created>
                <updated>Thu, 17 Mar 2022 10:25:59 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17506425" author="garydgregory" created="Mon, 14 Mar 2022 18:26:26 +0000"  >&lt;p&gt;Can you capture and post a thread dump (ctrl+break on Windows console IIRC)&lt;/p&gt;</comment>
                            <comment id="17506868" author="JIRAUSER286567" created="Tue, 15 Mar 2022 11:48:43 +0000"  >&lt;p&gt;Not sure what should i do, please provide more detailed instructions,&lt;/p&gt;

&lt;p&gt;Attached core files contains deadlock information and all threads dump with call stacks&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;1LKDEADLOCK &#160; &#160;Deadlock detected !!!&lt;br/&gt;
NULL &#160; &#160; &#160; &#160; &#160; ---------------------&lt;br/&gt;
NULL&lt;br/&gt;
2LKDEADLOCKTHR &#160;Thread &quot;pool-flow.seda.scc-route-thread-7,SA=PATHW_sftp,TR=7:f89c076e-88f3-45ba-8e7a-65ade0985e50&quot; (0x0000000031CA1700)&lt;br/&gt;
3LKDEADLOCKWTR &#160; &#160;is waiting for:&lt;br/&gt;
4LKDEADLOCKMON &#160; &#160; &#160;sys_mon_t:0x000001002DE42530 infl_mon_t: 0x000001002DE42580:&lt;br/&gt;
4LKDEADLOCKOBJ &#160; &#160; &#160;org/apache/commons/vfs2/provider/sftp/SftpFileObject@0x00000000EF515468&lt;br/&gt;
3LKDEADLOCKOWN &#160; &#160;which is owned by:&lt;br/&gt;
2LKDEADLOCKTHR &#160;Thread &quot;pool-flow.seda.scc-route-thread-1,SA=PATHW_sftp,TR=8:83e21c98-1a45-45f3-9766-893868cac245&quot; (0x0000000031B3DA00)&lt;br/&gt;
3LKDEADLOCKWTR &#160; &#160;which is waiting for:&lt;br/&gt;
4LKDEADLOCKMON &#160; &#160; &#160;sys_mon_t:0x000001002A397F18 infl_mon_t: 0x000001002A397F68:&lt;br/&gt;
4LKDEADLOCKOBJ &#160; &#160; &#160;org/apache/commons/vfs2/provider/sftp/SftpFileSystem@0x00000000B28E18A0&lt;br/&gt;
3LKDEADLOCKOWN &#160; &#160;which is owned by:&lt;br/&gt;
2LKDEADLOCKTHR &#160;Thread &quot;pool-flow.seda.scc-route-thread-7,SA=PATHW_sftp,TR=7:f89c076e-88f3-45ba-8e7a-65ade0985e50&quot; (0x0000000031CA1700)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Java callstack&#160; for &quot;pool-flow.seda.scc-route-thread-7,SA=PATHW_sftp,TR=7:f89c076e-88f3-45ba-8e7a-65ade0985e50&quot; :&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/sftp/SftpFileObject.doDetach(SftpFileObject.java:140)&lt;br/&gt;
5XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; (entered lock: org/apache/commons/vfs2/provider/sftp/SftpFileObject@0x00000000EF515468, entry count: 1)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/AbstractFileObject.detach(AbstractFileObject.java:484)&lt;br/&gt;
5XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; (entered lock: org/apache/commons/vfs2/provider/sftp/SftpFileSystem@0x00000000B28E18A0, entry count: 2)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/AbstractFileObject.refresh(AbstractFileObject.java:1790)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/AbstractFileSystem.resolveFile(AbstractFileSystem.java:344)&lt;br/&gt;
5XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; (entered lock: org/apache/commons/vfs2/provider/sftp/SftpFileSystem@0x00000000B28E18A0, entry count: 1)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/AbstractFileSystem.resolveFile(AbstractFileSystem.java:307)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:75)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:55)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/impl/DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:788)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/impl/DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:835)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at com/scc/smx/components/file/vfs/FileProxyFactory.createVFSFileObjectFileProxy(FileProxyFactory.java:190)&lt;/p&gt;

&lt;p&gt;Java callstack for &quot;pool-flow.seda.scc-route-thread-1,SA=PATHW_sftp,TR=8:83e21c98-1a45-45f3-9766-893868cac245&quot;:&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/sftp/SftpFileSystem.putChannel(SftpFileSystem.java:350)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/sftp/SftpFileObject.statSelf(SftpFileObject.java:527)&lt;br/&gt;
5XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; (entered lock: org/apache/commons/vfs2/provider/sftp/SftpFileObject@0x00000000EF515468, entry count: 2)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/sftp/SftpFileObject.getPermissions(SftpFileObject.java:457)&lt;br/&gt;
5XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; (entered lock: org/apache/commons/vfs2/provider/sftp/SftpFileObject@0x00000000EF515468, entry count: 1)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/sftp/SftpFileObject.doIsWriteable(SftpFileObject.java:262)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/AbstractFileObject.isWriteable(AbstractFileObject.java:1625)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at org/apache/commons/vfs2/provider/AbstractFileObject.moveTo(AbstractFileObject.java:1677)&lt;br/&gt;
4XESTACKTRACE &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;at com/scc/smx/components/file/vfs/VFSFileObjectFileProxy.moveTo(VFSFileObjectFileProxy.java:298)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;as for me problem may be caused by added 11 synchronized`s on methods to work with &apos;private SftpATTRS attrs&apos; in SftpFileObject.java, but i`m not sure&lt;/p&gt;</comment>
                            <comment id="17507690" author="JIRAUSER286567" created="Wed, 16 Mar 2022 15:50:42 +0000"  >&lt;p&gt;I think i have a fix, not sure if its optimal or not, but i&apos;ve get rid of deadlocks.&lt;/p&gt;

&lt;p&gt;Way to fix : analyze all synchronized methods on SftpFileObject and if FileSystem is used inside of method remove synchronized from method and put logic inside synchronized block that synchronized on FileSystem and than on FileObject&lt;/p&gt;

&lt;p&gt;Main idea - always have lock on FileSystem before lock on FileObject&lt;/p&gt;

&lt;p&gt;eg&lt;/p&gt;

&lt;p&gt;original&lt;/p&gt;

&lt;p&gt;&#160; &#160; private synchronized void flushStat() throws IOException, SftpException {&lt;br/&gt;
&#160; &#160; final ChannelSftp channel = getAbstractFileSystem().getChannel();&lt;br/&gt;
&#160; &#160; &#160; &#160; try&lt;/p&gt;

{ &#160; &#160; &#160; &#160; &#160; &#160; channel.setStat(relPath, attrs); &#160; &#160; &#160; &#160; }

&lt;p&gt;finally&lt;/p&gt;

{ &#160; &#160; &#160; &#160; &#160; &#160; getAbstractFileSystem().putChannel(channel); &#160; &#160; &#160; &#160; }

&lt;p&gt;&#160; &#160; }&lt;/p&gt;

&lt;p&gt;replaced by&lt;/p&gt;

&lt;p&gt;&#160; &#160; private void flushStat() throws IOException, SftpException {&lt;br/&gt;
&#160; &#160; &#160; &#160; synchronized (getAbstractFileSystem()) {&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; synchronized (this) {&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; final ChannelSftp channel = getAbstractFileSystem().getChannel();&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; try&lt;/p&gt;

{ &#160;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; channel.setStat(relPath, attrs); &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; }

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; finally&lt;/p&gt;

{ &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; getAbstractFileSystem().putChannel(channel); &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; }

&lt;p&gt;&#160; &#160; &#160; &#160; &#160; &#160; }&lt;br/&gt;
&#160; &#160; &#160; &#160; }&lt;br/&gt;
&#160; &#160; }&lt;/p&gt;</comment>
                            <comment id="17507815" author="garydgregory" created="Wed, 16 Mar 2022 19:00:18 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Mykhailoz&quot; class=&quot;user-hover&quot; rel=&quot;Mykhailoz&quot;&gt;Mykhailoz&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;I am leary of this type of change ATM, especially without a PR on GitHub with a test proving it solves anything. The simplest solution is for the app to serialize access to VFS objects. One issue in VFS is that each provider does not mostly make claims regarding thread safety, single-thread access is usually assumed and it only in the fairly recent past that we&apos;ve made any attempts to help multi-threaded apps here and there. It also doubtful that changing just this one method will be enough even if your empirical evidence shows your current issue possibly resovled.&lt;/p&gt;

&lt;p&gt;So step one for any progress would be to provide a PR on GitHub.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="17508113" author="JIRAUSER286567" created="Thu, 17 Mar 2022 10:25:59 +0000"  >&lt;p&gt;Hello, Gary,&lt;/p&gt;

&lt;p&gt;i didn&apos;t wrote about changing only one method, i wrote about all methods on SftpFileObject&#160; marked with synchronized with locks on FileSystem in their logic. Provided example is just to make clear what i meant. This is not a solution. Unfortunately i have no time as for now to provide complete, clear and tested solution.&lt;/p&gt;

&lt;p&gt;Our application works with ftp/sftp in 10 parallel threads by default using commons-vfs2 (versions 2.4, 2.6.0) for at least 2-3 years on many environments, and we haven&apos;t had such problems until update to 2.9.0.&lt;/p&gt;

&lt;p&gt;Thank You.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13041058" name="cores.zip" size="581439" author="Mykhailoz" created="Mon, 14 Mar 2022 16:18:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10gqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-816] Apache commons VFS2 code is taking 5 min to resolve the file in SFTP</title>
                <link>https://issues.apache.org/jira/browse/VFS-816</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Hi Team, when i used the commons-vfs2-2.7.0.jar file in my application it is taking around 5 min to resolve the file for 1kb as well.&lt;/p&gt;

&lt;p&gt;when the same code is used by changing the packages from vf2 -&amp;gt; vfs and using the jar commons-vfs-2.0.jar&#160; it is working normally and the same step is coming out within milliseconds.&lt;/p&gt;

&lt;p&gt;Could you please check the same and let me know if i am missing anything here. For reference i am attaching reference java code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13428277">VFS-816</key>
            <summary>Apache commons VFS2 code is taking 5 min to resolve the file in SFTP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Veeraswamy Naidu">Veeraswamy Naidu Pulaparti</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Feb 2022 09:25:55 +0000</created>
                <updated>Mon, 28 Mar 2022 17:20:18 +0000</updated>
                                            <version>2.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17491962" author="garydgregory" created="Mon, 14 Feb 2022 12:37:16 +0000"  >&lt;p&gt;What is in the RTF file?&lt;/p&gt;</comment>
                            <comment id="17491963" author="garydgregory" created="Mon, 14 Feb 2022 12:41:09 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Veeraswamy+Naidu&quot; class=&quot;user-hover&quot; rel=&quot;Veeraswamy Naidu&quot;&gt;Veeraswamy Naidu&lt;/a&gt;&lt;br/&gt;
Vfs1 and 2 are different code bases that depend on different version of other libraries, so who knows what is really going on, you&apos;ll have to fire up your debugger or visualvm to see where time is being spent &#128577;&lt;/p&gt;</comment>
                            <comment id="17492470" author="JIRAUSER285166" created="Tue, 15 Feb 2022 09:23:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160; i added my sample java code used to test the same in RTF file with line by line comments.&#160; There i observed in resolveFile it is taking 5 min time .&lt;/p&gt;</comment>
                            <comment id="17510734" author="JIRAUSER285166" created="Tue, 22 Mar 2022 16:29:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160; After deep dive of the jstack and vfs code base , it is blocking at detectExecDisabled()&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.provider.sftp.SftpFileSystem.executeCommand(SftpFileSystem.java:322).&lt;/p&gt;

&lt;p&gt;If i set the filesystem options&#160; to&lt;/p&gt;

&lt;p&gt;SftpFileSystemConfigBuilder.getInstance().setDisableDetectExecChannel(opts, true); It is working fine .&lt;/p&gt;

&lt;p&gt;May i know the functionality of this check implemented in 2.7.0 and what will happen if i always go with setting this option as true like above?&lt;/p&gt;

&lt;p&gt;Thanks in advance.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17510748" author="garydgregory" created="Tue, 22 Mar 2022 16:45:05 +0000"  >&lt;p&gt;I see that &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-757&quot; title=&quot;[SFTP] Configure whether exec detection is enabled #80&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-757&quot;&gt;&lt;del&gt;VFS-757&lt;/del&gt;&lt;/a&gt; seems related to this.&lt;/p&gt;</comment>
                            <comment id="17513154" author="JIRAUSER285166" created="Mon, 28 Mar 2022 05:50:06 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; , i want to understand&#160; the logic of why exec permission check required for VFS system. Is there any functionality is there depends on this permission basis?&lt;/p&gt;</comment>
                            <comment id="17513509" author="garydgregory" created="Mon, 28 Mar 2022 17:20:18 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Veeraswamy+Naidu&quot; class=&quot;user-hover&quot; rel=&quot;Veeraswamy Naidu&quot;&gt;Veeraswamy Naidu&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please read the linked ticket I provided and its associated pull request. That&apos;s all I have unless someone else has more to say.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13284140">VFS-757</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13039975" name="SFTPTest.rtf" size="9516" author="Veeraswamy Naidu" created="Mon, 14 Feb 2022 09:25:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0zjjc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-815] Windows - Browsing for files and selecting a folder or no file throws exception</title>
                <link>https://issues.apache.org/jira/browse/VFS-815</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In Windows in many steps like Excel or &quot;Get file names&quot; the UI encourages people to click the browse button and search for files.&#160; Whenever I select a folder, &quot;to get files from&quot;, an exception is thrown that the &quot;Argument&quot; cannot be null.&lt;/p&gt;

&lt;p&gt;The code is expecting a filename all the time even if specifying a folder is a valid thing to do.&lt;/p&gt;

&lt;p&gt;What I expected to have happen was the file path would be returned as an input.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13039935/13039935_image-2022-02-11-09-38-56-155.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13428061">VFS-815</key>
            <summary>Windows - Browsing for files and selecting a folder or no file throws exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="usbrandon">Brandon Jackson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Feb 2022 15:41:31 +0000</created>
                <updated>Fri, 11 Feb 2022 15:42:59 +0000</updated>
                            <resolved>Fri, 11 Feb 2022 15:42:59 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17490988" author="usbrandon" created="Fri, 11 Feb 2022 15:42:59 +0000"  >&lt;p&gt;Wrong project.&#160; So very sorry!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13039935" name="image-2022-02-11-09-38-56-155.png" size="53304" author="usbrandon" created="Fri, 11 Feb 2022 15:38:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0zi7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-814] FtpFileObject: re-fetch MDTM after refresh</title>
                <link>https://issues.apache.org/jira/browse/VFS-814</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;tt&gt;FtpFileObject.getTimestampMillis&lt;/tt&gt; stores last modification time using &lt;tt&gt;FTPFile.setTimestamp&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;doDetach()&lt;/tt&gt; nulls out the underling &lt;tt&gt;FTPFile&lt;/tt&gt;, but doesn&apos;t set &lt;tt&gt;mdtmSet = false&lt;/tt&gt; this means later calls to &lt;tt&gt;FtpFileObject.getTimestampMillis&lt;/tt&gt; fail to refresh mdtm and default to LIST timestamp.&lt;/p&gt;

&lt;p&gt;Suggested fix:&lt;/p&gt;

&lt;p&gt;Add &lt;tt&gt;mdtmSet = false&lt;/tt&gt; to &lt;tt&gt;FtpFileObject.doDetach()&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13425818">VFS-814</key>
            <summary>FtpFileObject: re-fetch MDTM after refresh</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lukewpc">Luke Wood</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Mon, 31 Jan 2022 16:42:29 +0000</created>
                <updated>Mon, 14 Feb 2022 02:36:01 +0000</updated>
                            <resolved>Tue, 8 Feb 2022 14:13:49 +0000</resolved>
                                    <version>2.8.0</version>
                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17484803" author="garydgregory" created="Mon, 31 Jan 2022 17:20:04 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lukewpc&quot; class=&quot;user-hover&quot; rel=&quot;lukewpc&quot;&gt;lukewpc&lt;/a&gt;&lt;br/&gt;
Feel free to provide a PR on GitHub.&lt;/p&gt;</comment>
                            <comment id="17488871" author="garydgregory" created="Tue, 8 Feb 2022 14:13:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lukewpc&quot; class=&quot;user-hover&quot; rel=&quot;lukewpc&quot;&gt;lukewpc&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report and PR. Please verify git master and close this ticket.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17489040" author="JIRAUSER284499" created="Tue, 8 Feb 2022 18:00:52 +0000"  >&lt;p&gt;Merged to master, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0z4gw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-813] NullPointerException needs a better message in SftpClientFactory when connect with private key</title>
                <link>https://issues.apache.org/jira/browse/VFS-813</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I&apos;m trying to use common-vfs2 to load files from sftp server.&lt;br/&gt;
Got NPE inside SftpClientFactory, when trying to connect to server.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;W 211222 162440.053 [ST3-Def] DxReconciliationFileLoader -
org.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://sftp.myhost.com/&quot;.
	at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:72) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.doCreateFileSystem(SftpFileProvider.java:92) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:92) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:71) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:55) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:788) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:835) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at com.tools.DxReconciliationFileLoader.downloadFiles(DxReconciliationFileLoader.java:118) ~[classes/:?]
Caused by: org.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp.myhost.com&quot;.
	at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:228) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:65) ~[commons-vfs2-2.9.0.jar:2.9.0]
	... 16 more
Caused by: java.lang.NullPointerException
	at java.lang.String.&amp;lt;init&amp;gt;(String.java:251) ~[?:?]
	at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:159) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:65) ~[commons-vfs2-2.9.0.jar:2.9.0]
	... 16 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;char[] username&lt;/tt&gt; is &lt;b&gt;null&lt;/b&gt;.&lt;br/&gt;
Looks like I should specify username somewhere.&lt;br/&gt;
I think if username is required for key-based auth, then library should handle it better, than throwing NPE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13419020">VFS-813</key>
            <summary>NullPointerException needs a better message in SftpClientFactory when connect with private key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="turbanoff">Andrey Turbanov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Dec 2021 13:33:54 +0000</created>
                <updated>Wed, 22 Dec 2021 15:41:34 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17463810" author="michael-o" created="Wed, 22 Dec 2021 13:40:26 +0000"  >&lt;p&gt;I wonder whether it should derive the username from the system or throw an appropriate exception. I wonder also why the username is a char array at all.&lt;/p&gt;</comment>
                            <comment id="17463836" author="garydgregory" created="Wed, 22 Dec 2021 14:13:43 +0000"  >&lt;p&gt;One can/should use char[] for credentials instead of String to avoid problems like String&apos;s being interned dumped/captured, you can&apos;t intern a char[]. char[] toString() also removes the chance of credentials being revealed in logs as opposed to String.toString().&lt;/p&gt;</comment>
                            <comment id="17463848" author="michael-o" created="Wed, 22 Dec 2021 14:35:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, username isn&apos;t a credential. There isn&apos;t any secret.&lt;/p&gt;</comment>
                            <comment id="17463854" author="garydgregory" created="Wed, 22 Dec 2021 14:42:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;michael-o&lt;/a&gt; Don&apos;t tell that to some of my customers that want to follow GDPR and PII rules.&lt;/p&gt;</comment>
                            <comment id="17463866" author="garydgregory" created="Wed, 22 Dec 2021 14:50:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=turbanoff&quot; class=&quot;user-hover&quot; rel=&quot;turbanoff&quot;&gt;turbanoff&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;The method &lt;tt&gt;SftpClientFactory.createConnection(String, int, char[], char[], FileSystemOptions)&lt;/tt&gt; does indeed require a non-null &lt;tt&gt;username&lt;/tt&gt;; I&apos;ve added an explicit check &lt;tt&gt;Objects.requireNonNull(username, &quot;username&quot;);&lt;/tt&gt; at the start of the method. Please test git master or a snapshot build from our snapshot repo to see &quot;&lt;tt&gt;Caused by: java.lang.NullPointerException: username&lt;/tt&gt;&quot;&lt;/p&gt;</comment>
                            <comment id="17463880" author="michael-o" created="Wed, 22 Dec 2021 15:00:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, you made my day. Very little APIs treat usernames as char arrays.&lt;/p&gt;</comment>
                            <comment id="17463881" author="turbanoff" created="Wed, 22 Dec 2021 15:01:40 +0000"  >&lt;p&gt;It would be nice to have some explanation, how to specify username for SFTP connection. I think this explanation can be added to exception message text.&lt;/p&gt;</comment>
                            <comment id="17463908" author="garydgregory" created="Wed, 22 Dec 2021 15:41:34 +0000"  >&lt;p&gt;I do not think exception messages should become programming guides, that&apos;s a job for Javadoc comments IMO.&lt;/p&gt;

&lt;p&gt;I am happy to welcome PRs on GitHub for better comments, more tests, anything that can improve the component &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xync:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-810] Percent encoded backslashes in authority of URLs aren&apos;t allowed for WebDav</title>
                <link>https://issues.apache.org/jira/browse/VFS-810</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The following urls fail to resolve due to illegal character &quot;\&quot; in the authority&lt;/p&gt;

&lt;p&gt;webdav://test%5Calice:secret@example.com:80&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://testalice:secret@example.com:80/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://test%5Calice:secret@example.com:80&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This can be resolved by using a different URI parser instead of the default URI.create(...)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Created a PR on GitHub&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/222&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13413791">VFS-810</key>
            <summary>Percent encoded backslashes in authority of URLs aren&apos;t allowed for WebDav</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Jan_">Jan Aelbrecht</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Nov 2021 09:00:43 +0000</created>
                <updated>Fri, 26 Nov 2021 08:37:58 +0000</updated>
                            <resolved>Thu, 25 Nov 2021 18:34:15 +0000</resolved>
                                    <version>2.8.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="17449280" author="garydgregory" created="Thu, 25 Nov 2021 18:34:15 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jan_&quot; class=&quot;user-hover&quot; rel=&quot;Jan_&quot;&gt;Jan_&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thank you for your report and efforts with PR 222. I think I&apos;ve been able to solve this for all providers instead of a select few, in git master. Please git it a try and close this PR if your use case works.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13361143">VFS-793</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0x2wg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-808] SFTPFileObject getChildren taking forever for large number of files</title>
                <link>https://issues.apache.org/jira/browse/VFS-808</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I need to list the files present in a folder on remote server. As of now, there are 27k (1KB) files present there. However, it is taking forever to get the result.&lt;/p&gt;

&lt;p&gt;Sample code:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FileSystemOptions fsOptions = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
StandardFileSystemManager fsManager = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;span class=&quot;code-comment&quot;&gt;// Initialize both fsOptions and fsmanager
&lt;/span&gt;FileObject remoteFile= fsManager.resolveFile(sourceURI, fsOptions);
FileObject[] allAckFiles = remoteFile.getChildren();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Further, i tried debugging it. Surprisingly, the response from ftp server only takes 90 seconds. Its the java loop present at &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java#L329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line&#160;&lt;/a&gt;which is taking forever to complete. Even after 5 minutes, its only able to traverse 1000 FileObjects. Why is it so?&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13399555">VFS-808</key>
            <summary>SFTPFileObject getChildren taking forever for large number of files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manishbansal8843">Manish Bansal</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Sep 2021 10:11:54 +0000</created>
                <updated>Mon, 6 Sep 2021 10:11:54 +0000</updated>
                                            <version>2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0un8w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-807] LocalFile migration to NIO is not done correctly</title>
                <link>https://issues.apache.org/jira/browse/VFS-807</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;According to release notes (&lt;a href=&quot;https://archive.apache.org/dist/commons/vfs/RELEASE-NOTES.txt),&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://archive.apache.org/dist/commons/vfs/RELEASE-NOTES.txt),&lt;/a&gt; version 2.9.0 includes the following change:&lt;/p&gt;

&lt;p&gt;Replace construction of FileInputStream and FileOutputStream objects with Files NIO APIs. #164. Thanks to Arturo Bernal.&lt;/p&gt;

&lt;p&gt;Strangely, it was not completed: LocalFlie.java has the following now, even in master:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Creates an input stream to read the content from.
 */
 @Override
 &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; InputStream doGetInputStream(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bufferSize) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(file);
 }&#160;


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;But what is worse, doGetOutputStream is &lt;b&gt;completely&lt;/b&gt; broken:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Creates an output stream to write the file content to.
     */
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; OutputStream doGetOutputStream(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; bAppend) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Files.newOutputStream(file.toPath(), bAppend ? StandardOpenOption.APPEND : StandardOpenOption.CREATE);
    }&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This can be demonstrated with a small java program, see attachment. The program just tries to write to a local file (into the same directory), using different ways to do it:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Java IO, how it was done before VFS 2.9.0&lt;/li&gt;
	&lt;li&gt;Java NIO the way VFS 2.9.0 does it&lt;/li&gt;
	&lt;li&gt;Java NIO the way it must be done&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;What is important, the program also verifies the result.&lt;/p&gt;

&lt;p&gt;VFS 2.9.0 fails in 2 cases: &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;When the file does not exist and append must be performed:&#160; java.nio.file.NoSuchFileException is thrown in this case.&lt;/li&gt;
	&lt;li&gt;When the file exists and no append must be performed: the file is not truncated, so whatever is written overwrites the beginning of the file, keeping the rest.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13392714">VFS-807</key>
            <summary>LocalFile migration to NIO is not done correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jul 2021 09:48:56 +0000</created>
                <updated>Tue, 31 May 2022 14:51:23 +0000</updated>
                            <resolved>Fri, 26 Nov 2021 12:35:08 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17390484" author="garydgregory" created="Fri, 30 Jul 2021 10:34:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&#160;&lt;/p&gt;

&lt;p&gt;Feel free to provide a PR on GitHub.&lt;/p&gt;</comment>
                            <comment id="17390642" author="garydgregory" created="Fri, 30 Jul 2021 15:30:58 +0000"  >&lt;p&gt;The problem is also like &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-744&quot; title=&quot;FileWriterWithEncoding for an existing file no longer truncates the file.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-744&quot;&gt;&lt;del&gt;IO-744&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17390771" author="garydgregory" created="Fri, 30 Jul 2021 20:06:27 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please try git master. I did not try your Java app as it is not runnable as a unit test. If you want to provide something we can use, feel free to provide a PR on GitHub for a unit test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17391431" author="klv_m72" created="Mon, 2 Aug 2021 08:27:55 +0000"  >&lt;p&gt;Reopening: the fix is not complete.&lt;/p&gt;

&lt;p&gt;It fixes only part of the problem: overwriting the existing file.&lt;/p&gt;

&lt;p&gt;The second part: appending to a non-existing file still fails&lt;/p&gt;</comment>
                            <comment id="17391433" author="klv_m72" created="Mon, 2 Aug 2021 08:31:33 +0000"  >&lt;p&gt;I have added some tests verifying the bug.&#160; I did not succeed creating a PR.&lt;/p&gt;

&lt;p&gt;The attached file (vfs-807.diff) contains the test changes and the correct fix for this issue.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;ProviderWriteTests.testOverwriteContent() fails with 2.9.0 and works in the latest master.&lt;/li&gt;
	&lt;li&gt;ProviderWriteAppendTests.testAppendToNonExsiting() fails with 2.9.0 and in the latest master.&lt;/li&gt;
	&lt;li&gt;They both succeed with the changes to LocalFile done in the patch.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17393448" author="garydgregory" created="Wed, 4 Aug 2021 21:19:55 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please don&apos;t delete comments (&quot;// TODO Reuse Apache Commons IO&quot;) in your patch because that&apos;s where the implementation will be coming from as soon as Apache Commons IO is released, you can see git master for Commons IO which I just updated. My plan is to release Commons IO and then to reuse its PathUtils.newOutputStream() method from here.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17393510" author="garydgregory" created="Thu, 5 Aug 2021 00:08:00 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please provide your diff as a PR on GitHub such that the GitHub Actions builds kick in for all of the OSs and JDKs we check.&lt;/p&gt;</comment>
                            <comment id="17394206" author="garydgregory" created="Thu, 5 Aug 2021 17:03:33 +0000"  >&lt;p&gt;i &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I pushed your tests and the same fix as Commons IO BUT for me, on Windows 10 and Java 8, the tests pass without the change to &lt;tt&gt;LocalFile&lt;/tt&gt; but you seem to report otherwise so this might be OS and Java version dependent.&lt;/p&gt;</comment>
                            <comment id="17394536" author="klv_m72" created="Fri, 6 Aug 2021 05:55:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;: thanks for pushing the tests.&lt;/p&gt;

&lt;p&gt;As for &quot;the tests pass without the change to &lt;tt&gt;LocalFile&lt;/tt&gt; &quot;: of course they pass now since you &lt;b&gt;have changed&lt;/b&gt; LocalFile (the same fix as Commons IO) finally fixing the problem. My comment with diff file was posted several days ago when LocalFile in master was still buggy.&lt;/p&gt;</comment>
                            <comment id="17394675" author="garydgregory" created="Fri, 6 Aug 2021 10:13:06 +0000"  >&lt;p&gt;That was a typo on my end, sorry, the tests passed without the change to main. What OS/JRE are you on?&lt;/p&gt;</comment>
                            <comment id="17394676" author="garydgregory" created="Fri, 6 Aug 2021 10:13:56 +0000"  >&lt;p&gt;Also note that the change to use Files NIO to create the input stream is not in.&lt;/p&gt;</comment>
                            <comment id="17394698" author="klv_m72" created="Fri, 6 Aug 2021 10:50:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am using Windows 10 and jdk 8 as well.&lt;/p&gt;

&lt;p&gt;The thing is: you did not correctly pushed my test changes, namely, ProviderWriteAppendTests.java:&lt;/p&gt;

&lt;p&gt;Mine code:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (OutputStream os = file.getContent().getOutputStream(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)) {
&#160;&#160;&#160; os.write(content1.getBytes(StandardCharsets.UTF_8));
}&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Code in master:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileContent fileContent = file.getContent(); OutputStream os = fileContent.getOutputStream()) {
&#160;&#160;&#160; os.write(content1.getBytes(StandardCharsets.UTF_8));
}&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Your code does not perform &quot;append&quot;. It must be fileContent.getOutputStream(&lt;b&gt;true&lt;/b&gt;)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17394809" author="garydgregory" created="Fri, 6 Aug 2021 14:47:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;My mistake. Fixed in git master.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="17449284" author="garydgregory" created="Thu, 25 Nov 2021 18:38:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Can this ticket be closed?&lt;/p&gt;</comment>
                            <comment id="17449396" author="klv_m72" created="Fri, 26 Nov 2021 06:45:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; : yes, it can be closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13447671">VFS-820</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13399781">HOP-3255</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13031259" name="TestJdkWriteFile.java" size="4810" author="klv_m72" created="Fri, 30 Jul 2021 09:43:43 +0000"/>
                            <attachment id="13031371" name="vfs-807.diff" size="3929" author="klv_m72" created="Mon, 2 Aug 2021 08:31:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0th1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-806] org.apache.commons.vfs2.FileContent.getLastModifiedTime() is losing milliseconds (always ends in 000)</title>
                <link>https://issues.apache.org/jira/browse/VFS-806</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;org.apache.commons.vfs2.FileContent.getLastModifiedTime() is losing milliseconds (always ends in 000) when running on Linux:&#160;Ubuntu 16.04.5 LTS&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux:&#160;Ubuntu 16.04.5 LTS&lt;/p&gt;</environment>
        <key id="13382825">VFS-806</key>
            <summary>org.apache.commons.vfs2.FileContent.getLastModifiedTime() is losing milliseconds (always ends in 000)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lucboudreau">Luc Boudreau</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jun 2021 03:12:42 +0000</created>
                <updated>Sat, 27 Nov 2021 12:51:16 +0000</updated>
                            <resolved>Sat, 27 Nov 2021 12:51:16 +0000</resolved>
                                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17359818" author="michael-o" created="Wed, 9 Jun 2021 07:07:28 +0000"  >&lt;p&gt;Which Java version?&lt;/p&gt;</comment>
                            <comment id="17360259" author="gkuntsevich" created="Wed, 9 Jun 2021 18:04:56 +0000"  >&lt;p&gt;It is:&lt;/p&gt;

&lt;p&gt;java version &quot;1.8.0_211&quot;&lt;/p&gt;

&lt;p&gt;Java(TM) SE Runtime Environment (build 1.8.0_211-b12)&lt;/p&gt;

&lt;p&gt;Java HotSpot(TM) 64-Bit Server VM (build 25.211-b12, mixed mode)&lt;/p&gt;</comment>
                            <comment id="17360365" author="michael-o" created="Wed, 9 Jun 2021 20:43:12 +0000"  >&lt;p&gt;The File class does not resolve to milliseconds in some constellations while Files does.&lt;/p&gt;</comment>
                            <comment id="17360458" author="garydgregory" created="Wed, 9 Jun 2021 22:50:43 +0000"  >&lt;p&gt;Please try 2.8.0 as it might help.&lt;/p&gt;</comment>
                            <comment id="17361035" author="gkuntsevich" created="Thu, 10 Jun 2021 15:40:52 +0000"  >&lt;p&gt;OK, I will try. Thank you&lt;/p&gt;</comment>
                            <comment id="17362920" author="gkuntsevich" created="Mon, 14 Jun 2021 12:23:24 +0000"  >&lt;p&gt;Tried version 2.8.0 - got the same result:&lt;br/&gt;
lastmodifiedtime = 2021/06/14 08:13:01.&lt;b&gt;000&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="17363654" author="garydgregory" created="Tue, 15 Jun 2021 13:51:02 +0000"  >&lt;p&gt;What VFS provider do you use? Also, may you please try git master. Note the fix is in already here for the lical fe provider &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/9d6f24c4a139e81325c884822b6081c2035f2f07/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFile.java#L118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/9d6f24c4a139e81325c884822b6081c2035f2f07/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFile.java#L118&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17363691" author="gkuntsevich" created="Tue, 15 Jun 2021 14:45:24 +0000"  >&lt;p&gt;Here is how it is used in the code:&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.FileContent.getLastModifiedTime()&lt;/p&gt;

&lt;p&gt;It returns:&#160;2018/05/04 12:34:56.000&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17363695" author="garydgregory" created="Tue, 15 Jun 2021 15:00:16 +0000"  >&lt;p&gt;What provider?&lt;/p&gt;</comment>
                            <comment id="17374837" author="lucboudreau" created="Mon, 5 Jul 2021 13:37:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;- Good day sir. Gary Kuntsevich does not work for us anymore, but we&apos;d like to make sure this does not fall between the cracks. Is there a possibility to change the reporter to my account please?&lt;/p&gt;

&lt;p&gt;To answer your question, I believe this was the local file provider.&lt;/p&gt;</comment>
                            <comment id="17374977" author="garydgregory" created="Mon, 5 Jul 2021 19:43:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lucboudreau&quot; class=&quot;user-hover&quot; rel=&quot;lucboudreau&quot;&gt;lucboudreau&lt;/a&gt;&lt;br/&gt;
 May you please double check that you are using 2.8.0? This exact bug was fixed (actually a JRE bug) in 2.8.0 here:&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs/blob/0e65f7332251163a4bafc63db3ccf3e2e1f1e6b0/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFile.java#L114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/0e65f7332251163a4bafc63db3ccf3e2e1f1e6b0/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFile.java#L114&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See the inline comments for a reference to the JRE bug.&lt;/p&gt;</comment>
                            <comment id="17374983" author="lucboudreau" created="Mon, 5 Jul 2021 19:57:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;- We&apos;ll get someone to test this again and confirm some time this week with y&apos;all. Thanks.&lt;/p&gt;</comment>
                            <comment id="17375913" author="lucboudreau" created="Tue, 6 Jul 2021 18:02:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;- We have confirmed that an upgrade to 2.7 seems to fix this issue for us. We can close this. Thanks for your time, and have a great day.&lt;/p&gt;</comment>
                            <comment id="17375919" author="garydgregory" created="Tue, 6 Jul 2021 18:05:48 +0000"  >&lt;p&gt;Double checking FTR: Do you mean an update to 2.7.0 or 2.8.0?&lt;/p&gt;</comment>
                            <comment id="17375922" author="lucboudreau" created="Tue, 6 Jul 2021 18:09:01 +0000"  >&lt;p&gt;I meant 2.7 indeed. We tried to bump our maintenance release to the current version we use on the mainline (2.7) and we get the milliseconds. I didn&apos;t believe it at first because of your earlier comment, but since it fixes it for us, we&apos;re calling it done on our end. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rs40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-805] HTTP seek always exhausts response</title>
                <link>https://issues.apache.org/jira/browse/VFS-805</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Seeking on an HTTP resource always downloads ALL content if a Content-Length header is present. The problem is that seeking closes the current input stream which eventually ends up in ContentLengthInputStream.close() of the (ancient) http client library.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To be clear, the problem is actually not with the seek itself, but with the underlying close implementation that always exhausts the HTTP response body. See the example below.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;My use case is to perform binary search on sorted datasets on the Web (RDF data in sorted ntriple syntax) - the binary search works locally and &lt;b&gt;in principle&lt;/b&gt; works on HTTP resources abstracted with VFS2, but the seek implementation that downloads &lt;b&gt;ALL&lt;/b&gt; data (in my case several GBs) unfortunately defeats the purpose &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;From org.apache.commons.httpclient.ContentLengthInputStream (commons-httpclient-3.1):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!closed) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                ChunkedInputStream.exhaustInputStream(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
            } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
                &lt;span class=&quot;code-comment&quot;&gt;// close after above so that we don&apos;t &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; an exception trying
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// to read after closed!
&lt;/span&gt;                closed = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost/large-file-2gb.txt&quot;&lt;/span&gt;;
&lt;/span&gt;		FileSystemManager fsManager = VFS.getManager();
		
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileObject file = fsManager.resolveFile(url)) {	
			&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (RandomAccessContent r = file.getContent().getRandomAccessContent(RandomAccessMode.READ)) {
				
				StopWatch sw1 = StopWatch.createStarted();
				r.seek(20);
				&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Initial seek: &quot;&lt;/span&gt; + sw1.getTime(TimeUnit.MILLISECONDS));

				StopWatch sw2 = StopWatch.createStarted();
				&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[100];
				r.readFully(bytes);
				&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Read: &quot;&lt;/span&gt; + sw2.getTime(TimeUnit.MILLISECONDS));
				
				StopWatch sw3 = StopWatch.createStarted();
				r.seek(100);
				&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Subsequent seek: &quot;&lt;/span&gt; + sw3.getTime(TimeUnit.MILLISECONDS));
			}
		}
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Done&quot;&lt;/span&gt;);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output (times in milliseconds):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Initial seek: 0
Read: 4
Subsequent seek: 2538
Done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377531">VFS-805</key>
            <summary>HTTP seek always exhausts response</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Aklakan">Claus Stadler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 May 2021 00:43:42 +0000</created>
                <updated>Thu, 15 Jul 2021 19:58:03 +0000</updated>
                            <resolved>Thu, 15 Jul 2021 19:57:57 +0000</resolved>
                                    <version>2.8.0</version>
                                    <fixVersion>2.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17353342" author="aklakan" created="Fri, 28 May 2021 13:15:47 +0000"  >&lt;p&gt;A possible solution might be to simply upgrade the httpclient library to a recent one - but I haven&apos;t yet checked how much code would have to be upgraded and I wonder whether a PR with such a breaking change would have any chance of getting through.&lt;/p&gt;</comment>
                            <comment id="17353460" author="garydgregory" created="Fri, 28 May 2021 17:01:08 +0000"  >&lt;p&gt;By default, VFS HTTP&lt;span class=&quot;error&quot;&gt;&amp;#91;S&amp;#93;&lt;/span&gt; runs on HttpClient 3, but there is support for HC 4 and 5 through the http4&lt;span class=&quot;error&quot;&gt;&amp;#91;s&amp;#93;&lt;/span&gt; and http5&lt;span class=&quot;error&quot;&gt;&amp;#91;s&amp;#93;&lt;/span&gt; schemes. We&apos;ve kept the HTTP scheme on HC3 to guarantee compatibility but it might be time to toggle the VFS &quot;HTTP&quot; scheme to HC 4 or 5. Feel free to experiment using these schemes to see if you run into any compatibility issues.&lt;/p&gt;</comment>
                            <comment id="17353634" author="aklakan" created="Fri, 28 May 2021 23:37:19 +0000"  >&lt;p&gt;Thanks for the hint with http4/5!&lt;br/&gt;
 I can see in the debugger that now HC4/5 is used, however unfortunately the problem still persists.&lt;br/&gt;
 The reason seems to be that HC (at least in VFS2&apos;s default configuration) wants to keep the connection open for further requests and therefore unconditionally prefers to consume even arbitrarily large responses (this is what ContentLengthInputStream does) rather than closing the connection.&lt;/p&gt;

&lt;p&gt;The stack traces to ContentLengthInputStream&apos;s contructor in HC are based on the &quot;r.readFully(bytes);&quot; statement in the example above.&lt;br/&gt;
 Not sure whether HC can be reconfigured to avoid running into this issue :/&lt;/p&gt;

&lt;p&gt;&lt;b&gt;HC5&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ContentLengthInputStream.&amp;lt;init&amp;gt;(SessionInputBuffer, InputStream, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) line: 82	
DefaultManagedHttpClientConnection(BHttpConnectionBase).createContentInputStream(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, SessionInputBuffer, InputStream) line: 171	
...
HttpRequestExecutor.execute(ClassicHttpRequest, HttpClientConnection, HttpResponseInformationCallback, HttpContext) line: 192	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;HC4&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ContentLengthInputStream.&amp;lt;init&amp;gt;(SessionInputBuffer, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) line: 83	
LoggingManagedHttpClientConnection(BHttpConnectionBase).createInputStream(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, SessionInputBuffer) line: 213	
...
CPoolProxy.receiveResponseEntity(HttpResponse) line: 162	
HttpRequestExecutor.doReceiveResponse(HttpRequest, HttpClientConnection, HttpContext) line: 279	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17354474" author="aklakan" created="Mon, 31 May 2021 13:56:46 +0000"  >&lt;p&gt;Overriding the close method in the DataInputStream returned by Http(4)RandomAccessContent such that the http response &lt;b&gt;directly&lt;/b&gt; is closed (rather than the content) seems to fix the issue. Its based on &lt;a href=&quot;https://stackoverflow.com/questions/40947622/java-interrupt-inputstream-without-close-method&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this stackoverflow answer&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; Solution: Instead of calling res.getEntity().getContent().close(), try res.close() or req.abort()&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
 The DataInputStream created in &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/ca5a27dab0aaef84f9cf5e10debfa5827f2a873f/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/http4/Http4RandomAccessContent.java#L84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Http4RandomAccessContent&#160;&lt;/a&gt;needs to be extended with this snippet:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Override
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    ((Closeable)httpResponse).close();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The slightly ugly part is that httpResponse itself provides no close method - but the returned instance is a subclass of CloseableHttpResponse which extends Closeable.&lt;/p&gt;

&lt;p&gt;Updated test example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Seek randomly to arbitrary positions within a given range and fill a &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; buffer
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void mainVfsHttpTest(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url = &lt;span class=&quot;code-quote&quot;&gt;&quot;http4:&lt;span class=&quot;code-comment&quot;&gt;//localhost/webdav/testfile-2gb.txt&quot;&lt;/span&gt;;
&lt;/span&gt;  FileSystemManager fsManager = VFS.getManager();

  Random rand = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Random();
  &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileObject file = fsManager.resolveFile(url)) {		
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (RandomAccessContent r = file.getContent().getRandomAccessContent(RandomAccessMode.READ)) {

      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 1000; ++i) {
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; pos = rand.nextInt(1000000000);
        StopWatch sw = StopWatch.createStarted(); 
        r.seek(pos);
	&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[100];
	r.readFully(bytes);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Read at &quot;&lt;/span&gt; + pos + &lt;span class=&quot;code-quote&quot;&gt;&quot; took &quot;&lt;/span&gt; + sw.getTime(TimeUnit.MILLISECONDS));
        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(bytes));					
&lt;/span&gt;      }
    }
  }
  &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Done&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
 Output shows that seeking and reading works instantly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 Read at 447632760 took 1 ms
 Read at 18244737 took 1 ms
 Read at 147992025 took 0 ms
 Read at 751592604 took 0 ms
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17354480" author="aklakan" created="Mon, 31 May 2021 14:14:50 +0000"  >&lt;p&gt;A small update: I see that &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/ca5a27dab0aaef84f9cf5e10debfa5827f2a873f/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/http4/MonitoredHttpResponseContentInputStream.java#L44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MonitoredHttpResponseContentInputStream&#160;&lt;/a&gt; actually does exactly this kind of closing in an &lt;b&gt;onClose&lt;/b&gt; method - however, &lt;b&gt;onClose&lt;/b&gt; is invoked by &lt;b&gt;close&lt;/b&gt; on its superclass only after the input stream has been consumed.&lt;/p&gt;

&lt;p&gt;Hence, turning &lt;b&gt;onClose&lt;/b&gt; to an override of &lt;b&gt;close&lt;/b&gt; might be a nicer solution.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17358615" author="aklakan" created="Mon, 7 Jun 2021 13:51:38 +0000"  >&lt;p&gt;So would it be possible to add changes in the sprit of the following?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MonitorInputStream &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; BufferedInputStream {
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
...
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        closeSuper(); &lt;span class=&quot;code-comment&quot;&gt;// Introduce a method that allows &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; overriding &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.close()&apos;&lt;/span&gt;
&lt;/span&gt;      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; IOException ioe) 
...
  }

  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void closeSuper() {
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.close();
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MonitoredHttpResponseContentInputStream &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MonitorInputStream {
  /**
   * If the http response is closeable then close the response rather than the underlying stream
   * in order to avoid potentially consuming all remaining data
   */
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void closeSuper() {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!(httpResponse &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; CloseableHttpResponse)) { &lt;span class=&quot;code-comment&quot;&gt;// Or just &lt;span class=&quot;code-quote&quot;&gt;&apos;Closeable&apos;&lt;/span&gt;
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.closeSuper();
    }
  }

  &lt;span class=&quot;code-comment&quot;&gt;// onClose remains unchanged:
&lt;/span&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void onClose() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (httpResponse &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; CloseableHttpResponse) {
      ((CloseableHttpResponse) httpResponse).close();
    }
  }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17359301" author="garydgregory" created="Tue, 8 Jun 2021 11:57:28 +0000"  >&lt;p&gt;Feel free to provide a PR on GitHub with tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17360318" author="aklakan" created="Wed, 9 Jun 2021 19:55:40 +0000"  >&lt;p&gt;I created the &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/186&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;. Providing a dedicated test it is somewhat difficult because its not a change in function but in performance; and it seems difficult to add tracking about how much data was actually retrieved.&lt;/p&gt;</comment>
                            <comment id="17367792" author="aklakan" created="Wed, 23 Jun 2021 00:53:21 +0000"  >&lt;p&gt;Hi, any suggestions on how to proceed with this PR?  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qvj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-797] JIRA Fix VFS-741 is causing an error in reading the files from azure host using azsb protocol.        Error is: org.apache.commons.vfs2.FileSystemException: Invalid descendent file name &quot;.//somepath/subfolder/file.txt&quot;</title>
                <link>https://issues.apache.org/jira/browse/VFS-797</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I have updated the VFS version to from 2.2 to 2.7.0. Since then I have been getting an error for my&#160; application in reading the files from azure host using &apos;azsb&apos; protocol. By default, it adds the prefix&#160;./ in the filename which is throwing an exception in resolving the filename.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The error that is thrown is as below:&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.commons.vfs2.FileSystemException: Could not find files in &quot;azsb://somehost/somepath/subfolder&quot;.Caused by: org.apache.commons.vfs2.FileSystemException: Could not find files in &quot;azsb://somehost/somepath/subfolder&quot;. at org.apache.commons.vfs2.provider.AbstractFileObject.findFiles(AbstractFileObject.java:1015) at org.apache.commons.vfs2.provider.AbstractFileObject.listFiles(AbstractFileObject.java:1663) at org.apache.commons.vfs2.provider.AbstractFileObject.findFiles(AbstractFileObject.java:990)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.commons.vfs2.FileSystemException: Invalid descendent file name &quot;.//somepath/subfolder/file.txt&quot;. at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveName(DefaultFileSystemManager.java:806) at org.apache.commons.vfs2.provider.AbstractFileObject.getChildren(AbstractFileObject.java:1116) at org.apache.commons.vfs2.provider.AbstractFileObject.traverse(AbstractFileObject.java:93) at org.apache.commons.vfs2.provider.AbstractFileObject.findFiles(AbstractFileObject.java:1012) ... 7 common frames omitted&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13363875">VFS-797</key>
            <summary>JIRA Fix VFS-741 is causing an error in reading the files from azure host using azsb protocol.        Error is: org.apache.commons.vfs2.FileSystemException: Invalid descendent file name &quot;.//somepath/subfolder/file.txt&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10008">Information Provided</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="alir3">New User</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Mar 2021 15:03:06 +0000</created>
                <updated>Wed, 6 Jul 2022 11:41:34 +0000</updated>
                            <resolved>Wed, 6 Jul 2022 11:41:34 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17299812" author="garydgregory" created="Thu, 11 Mar 2021 18:55:25 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alir3&quot; class=&quot;user-hover&quot; rel=&quot;alir3&quot;&gt;alir3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Do you have a reproducible test we can run?&lt;/p&gt;

&lt;p&gt;Is&#160;com.bsc.intg.svcs.core.vfs.BSCVFSProvider your code or is the source available?&lt;/p&gt;

&lt;p&gt;2.2 to 2.7.0 is a big jump, may you try intermediate versions to narrow it down?&lt;/p&gt;

&lt;p&gt;TY for your report.&lt;/p&gt;</comment>
                            <comment id="17300497" author="garydgregory" created="Fri, 12 Mar 2021 17:44:01 +0000"  >&lt;p&gt;&#160;If you look at &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-741&quot; title=&quot;Listing files with known prefix still fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-741&quot;&gt;&lt;del&gt;VFS-741&lt;/del&gt;&lt;/a&gt;&#160;you will see it is marked resolved in &lt;tt&gt;2.5.0&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17300499" author="alir3" created="Fri, 12 Mar 2021 17:49:02 +0000"  >&lt;p&gt;you mean to say that in version 2.5.0, we are not adding the &apos;./&apos; prefix in file name by default?.&#160;&lt;/p&gt;</comment>
                            <comment id="17300556" author="garydgregory" created="Fri, 12 Mar 2021 19:00:20 +0000"  >&lt;p&gt;I did not say that. You asked &quot;I am not sure in which version of vfs the fix&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-741&quot; title=&quot;Listing files with known prefix still fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-741&quot;&gt;&lt;del&gt;VFS-741&lt;/del&gt;&lt;/a&gt;&#160;was made.&quot; All I did is look at the ticked and pointed out what you can see as well: the ticket is marked as 2.5.0. So you probably can start testing with 2.5.0 and up if you want &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-741&quot; title=&quot;Listing files with known prefix still fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-741&quot;&gt;&lt;del&gt;VFS-741&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It would be easier to help if you could provide a test that any one can run to reproduce the issue you are seeing.&#160;&lt;/p&gt;

&lt;p&gt;I understand this may be a challenge since you have custom code in the middle of the stack.&lt;/p&gt;

&lt;p&gt;Note that we just released 2.8.0.&lt;/p&gt;</comment>
                            <comment id="17449286" author="garydgregory" created="Thu, 25 Nov 2021 18:39:35 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alir3&quot; class=&quot;user-hover&quot; rel=&quot;alir3&quot;&gt;alir3&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Do you have an update on this issue? Note that our current release is 2.9.0.&lt;/p&gt;</comment>
                            <comment id="17563166" author="garydgregory" created="Wed, 6 Jul 2022 11:41:34 +0000"  >&lt;p&gt;Closing: no more feedback. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ok5c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-796] DefaultFilesystemManager.close: not all components are closed</title>
                <link>https://issues.apache.org/jira/browse/VFS-796</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;As I mentioned in this comment:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/commit/fcfc067da075a6ec3ff255986a562de9beb6511d#r48090402&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/commit/fcfc067da075a6ec3ff255986a562de9beb6511d#r48090402&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Since version 2.8.0, &lt;b&gt;every time&lt;/b&gt; a VFS manager is closed, there is a &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DefaultFilesystemManager.close: not all components are closed&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; error in the console because &quot;filesCache&quot; is not closed before the line with the check. This change must be reverted or fixed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13363775">VFS-796</key>
            <summary>DefaultFilesystemManager.close: not all components are closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="boris-petrov">Boris Petrov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Mar 2021 08:08:46 +0000</created>
                <updated>Fri, 9 Jul 2021 11:10:28 +0000</updated>
                            <resolved>Mon, 15 Mar 2021 16:53:45 +0000</resolved>
                                    <version>2.8.0</version>
                                    <fixVersion>2.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17299557" author="garydgregory" created="Thu, 11 Mar 2021 13:18:32 +0000"  >&lt;p&gt;PRs welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17299559" author="boris-petrov" created="Thu, 11 Mar 2021 13:24:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/165&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/165&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17377687" author="dukethrash" created="Fri, 9 Jul 2021 01:48:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;this issue is affecting me as well. Can you push a 2.8.1 release to maven central?&lt;/p&gt;</comment>
                            <comment id="17377688" author="garydgregory" created="Fri, 9 Jul 2021 01:52:28 +0000"  >&lt;p&gt;It&apos;s not that simple, we have to go through the release process, for which I don&apos;t have time ATM; you can use a SNAPSHOT build in the interim or a local build from git master.&lt;/p&gt;</comment>
                            <comment id="17377719" author="dukethrash" created="Fri, 9 Jul 2021 02:25:25 +0000"  >&lt;p&gt;Considering this was fixed back in March do you have an idea of when you&apos;ll have time or it&apos;s a no go?&lt;/p&gt;</comment>
                            <comment id="17378002" author="garydgregory" created="Fri, 9 Jul 2021 11:10:28 +0000"  >&lt;p&gt;I will happen, but ai have to guarantee as to when. We are volunteers here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Maybe within a month.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ojj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-794] Fix file resource leak in CombinedResources (properties file) which keeps the Commons VFS jar file open.</title>
                <link>https://issues.apache.org/jira/browse/VFS-794</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Fix file resource leak in &lt;tt&gt;CombinedResources&lt;/tt&gt;&#160;(properties file) which keeps the Commons VFS jar file open.&lt;/p&gt;

&lt;p&gt;When you undeploy a web app that uses Commons VFS from Tomcat, Tomcat will not be able to delete the Commons VFS jar file.&lt;/p&gt;

&lt;p&gt;Tomcat reports the following FAIL from the manager UI:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;FAIL - Unable to delete &lt;span class=&quot;error&quot;&gt;&amp;#91;C:\Java\apache-tomcat-9.0.43\webapps\WebAppNameHere&amp;#93;&lt;/span&gt;. The continued presence of this file may cause problems.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Then the only file left on disk is:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;C:\Java\apache-tomcat-9.0.43\webapps\WebAppNameHere\WEB-INF\lib\commons-vfs2-2.7.0.jar&lt;/b&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13361237">VFS-794</key>
            <summary>Fix file resource leak in CombinedResources (properties file) which keeps the Commons VFS jar file open.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Feb 2021 17:57:00 +0000</created>
                <updated>Fri, 26 Feb 2021 17:58:36 +0000</updated>
                            <resolved>Fri, 26 Feb 2021 17:58:36 +0000</resolved>
                                                    <fixVersion>2.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o3w0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-793] GenericFileName.getURI() returns invalid URI.</title>
                <link>https://issues.apache.org/jira/browse/VFS-793</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The following test case demonstrates the problem&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testGenericFileName() 
	&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
{
	{
	        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri = &lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//blanks:blanks@localhost/path/file_b%20lanks&quot;&lt;/span&gt;;
&lt;/span&gt;		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileName n = FtpFileNameParser.getInstance().parseUri(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, uri);
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; n &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; GenericFileName;
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; genericUri = n.getURI();
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; genericUri.equals(uri.toString());
	}
		
	{
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri = &lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//b%20lanks:b%20lanks@localhost/path/file&quot;&lt;/span&gt;;
&lt;/span&gt;		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileName n = FtpFileNameParser.getInstance().parseUri(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, uri);
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; n &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; GenericFileName;
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; genericUri = n.getURI();
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; genericUri.equals(uri.toString());
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The blanks in authority are not properly encoded.&lt;br/&gt;
As a result the following fragment does not work either&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URI uri = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//b%20lanks:b%20lanks@localhost:21/path/file&quot;&lt;/span&gt;);
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileSystemManager m = VFS.getManager() )
{
	&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject f = m.resolveFile(uri) )
	{
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; f &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; FtpFileObject;
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URI vfsUri = f.getURI();
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; uri.equals(vfsUri);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The call &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;f.getURI();&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;throws exception&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: Illegal character in authority at index 6: ftp://b lanks:b lanks@localhost/path/file
	at java.net.URI.create(Unknown Source)
	at org.apache.commons.vfs2.FileObject.getURI(FileObject.java:303)
	at GetUriTest.testGetUri_ftp(GetUriTest.java:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.util.ArrayList.forEach(Unknown Source)
	at org.testng.TestRunner.privateRun(TestRunner.java:764)
	at org.testng.TestRunner.run(TestRunner.java:585)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
	at org.testng.TestNG.runSuites(TestNG.java:1069)
	at org.testng.TestNG.run(TestNG.java:1037)
	at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)
	at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)
	at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)
Caused by: java.net.URISyntaxException: Illegal character in authority at index 6: ftp://b lanks:b lanks@localhost/path/file
	at java.net.URI$Parser.fail(Unknown Source)
	at java.net.URI$Parser.parseAuthority(Unknown Source)
	at java.net.URI$Parser.parseHierarchical(Unknown Source)
	at java.net.URI$Parser.parse(Unknown Source)
	at java.net.URI.&amp;lt;init&amp;gt;(Unknown Source)
	... 31 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="13361143">VFS-793</key>
            <summary>GenericFileName.getURI() returns invalid URI.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vnashkev">Vitali Nashkevich</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Feb 2021 09:23:25 +0000</created>
                <updated>Fri, 26 Nov 2021 12:56:42 +0000</updated>
                            <resolved>Thu, 25 Nov 2021 18:50:56 +0000</resolved>
                                    <version>2.7.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17291651" author="garydgregory" created="Fri, 26 Feb 2021 13:45:27 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vnashkev&quot; class=&quot;user-hover&quot; rel=&quot;vnashkev&quot;&gt;vnashkev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;May you please try with git master to verify if this is still an issue?&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="17291652" author="woonsan" created="Fri, 26 Feb 2021 13:45:30 +0000"  >&lt;p&gt;It looks like related to &lt;tt&gt;org.apache.commons.vfs2.provider.HostFileNameParser.parseUri(VfsComponentContext, FileName, String)&lt;/tt&gt;, not to &lt;tt&gt;GenericFileName&lt;/tt&gt;. So, the title could be better with something like &quot;URI parsing error with HostFileNameParser.&quot;&lt;br/&gt;
The related unit test is &lt;tt&gt;org.apache.commons.vfs2.provider.UriParserTestCase&lt;/tt&gt;, where I cannot find an example with blanks at the moment.&lt;/p&gt;</comment>
                            <comment id="17449287" author="garydgregory" created="Thu, 25 Nov 2021 18:50:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vnashkev&quot; class=&quot;user-hover&quot; rel=&quot;vnashkev&quot;&gt;vnashkev&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=woonsan&quot; class=&quot;user-hover&quot; rel=&quot;woonsan&quot;&gt;woonsan&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I addressed this in &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-810&quot; title=&quot;Percent encoded backslashes in authority of URLs aren&amp;#39;t allowed for WebDav&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-810&quot;&gt;&lt;del&gt;VFS-810&lt;/del&gt;&lt;/a&gt;. See also the new test &lt;tt&gt;org.apache.commons.vfs2.provider.ftp.FtpFileNameParserTestCase&lt;/tt&gt;.&lt;br/&gt;
May you please verify and close if appropriate?&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="17449556" author="woonsan" created="Fri, 26 Nov 2021 12:56:42 +0000"  >&lt;p&gt;Looks great! Thank you so much, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;!&lt;br/&gt;
+1 on closing this ticket.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13413791">VFS-810</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o3b4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-791] Apache VFS (FileObjectUtils.writeContent) - org.apache.commons.vfs2.FileSystemException: Unknown message with code &quot; &quot;.</title>
                <link>https://issues.apache.org/jira/browse/VFS-791</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I&apos;am attempting to download file from remote sftp server by using &quot;FileObjectUtils.writeContent(FileObject src, FileObject dest)&quot;. Usually it works fine, but sometimes an error &quot;Unknown message with code &apos; &apos; &quot; returns:&lt;br/&gt;
{&lt;br/&gt;
&quot;@timestamp&quot;: &quot;2020-12-01T11:19:01.432+08:00&quot;,&lt;br/&gt;
&quot;sequence&quot;: 25296,&lt;br/&gt;
&quot;loggerClassName&quot;: &quot;org.slf4j.impl.Slf4jLogger&quot;,&lt;br/&gt;
&quot;loggerName&quot;: ,&lt;br/&gt;
&quot;level&quot;: &quot;ERROR&quot;,&lt;br/&gt;
&quot;message&quot;: &quot;Unknown message with code \&quot;\&quot;.&quot;,&lt;br/&gt;
&quot;threadName&quot;: &quot;default task-40&quot;,&lt;br/&gt;
&quot;threadId&quot;: 5673,&lt;br/&gt;
&quot;mdc&quot;: {},&lt;br/&gt;
&quot;ndc&quot;: &quot;&quot;,&lt;br/&gt;
&quot;processName&quot;: &quot;jboss-modules.jar&quot;,&lt;br/&gt;
&quot;processId&quot;: 1026,&lt;br/&gt;
&quot;stackTrace&quot;: &quot;org.apache.commons.vfs2.FileSystemException: Unknown message with code \&quot;\&quot;.&lt;br/&gt;
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:460)&lt;br/&gt;
at org.apache.commons.vfs2.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1198)&lt;br/&gt;
at org.apache.commons.vfs2.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1185)&lt;br/&gt;
at org.apache.commons.vfs2.provider.DefaultFileContent.buildInputStream(DefaultFileContent.java:503)&lt;br/&gt;
at org.apache.commons.vfs2.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:345)&lt;br/&gt;
at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:857)&lt;br/&gt;
at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:843)&lt;br/&gt;
at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:816)&lt;br/&gt;
at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:830)&lt;br/&gt;
at org.apache.commons.vfs2.util.FileObjectUtils.writeContent(FileObjectUtils.java:203)&lt;br/&gt;
at org.apache.commons.vfs2.FileUtil.copyContent(FileUtil.java:44)&lt;br/&gt;
at hk.housingauthority.slis.controller.SearchDownloadController.getClauseDoc(SearchDownloadController.java:490)&lt;br/&gt;
at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java: 62)&lt;br/&gt;
at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 43)&lt;br/&gt;
at java.base/java.lang.reflect.Method.invoke(Method.java: 566)&lt;br/&gt;
at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)&lt;br/&gt;
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)&lt;br/&gt;
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)&lt;br/&gt;
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)&lt;br/&gt;
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)&lt;br/&gt;
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)&lt;br/&gt;
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)&lt;br/&gt;
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)&lt;br/&gt;
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)&lt;br/&gt;
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)&lt;br/&gt;
at javax.servlet.http.HttpServlet.service(HttpServlet.java:523)&lt;br/&gt;
at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)&lt;br/&gt;
at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)&lt;br/&gt;
at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)&lt;br/&gt;
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)&lt;br/&gt;
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)&lt;br/&gt;
at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)&lt;br/&gt;
at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)&lt;br/&gt;
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)&lt;br/&gt;
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:155)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:199)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:94)&lt;br/&gt;
at hk.housingauthority.slis.security.WebSEALAuthenticationFilter.doFilter(WebSEALAuthenticationFilter.java:95)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)&lt;br/&gt;
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)&lt;br/&gt;
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)&lt;br/&gt;
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)&lt;br/&gt;
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)&lt;br/&gt;
at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)&lt;br/&gt;
at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)&lt;br/&gt;
at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)&lt;br/&gt;
at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)&lt;br/&gt;
at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)&lt;br/&gt;
at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)&lt;br/&gt;
at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)&lt;br/&gt;
at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)&lt;br/&gt;
at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)&lt;br/&gt;
at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)&lt;br/&gt;
at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)&lt;br/&gt;
at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)&lt;br/&gt;
at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)&lt;br/&gt;
at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)&lt;br/&gt;
at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)&lt;br/&gt;
at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)&lt;br/&gt;
at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)&lt;br/&gt;
at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)&lt;br/&gt;
at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)&lt;br/&gt;
at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)&lt;br/&gt;
at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)&lt;br/&gt;
at io.undertow.server.handlers.MetricsHandler.handleRequest(MetricsHandler.java:64)&lt;br/&gt;
at io.undertow.servlet.core.MetricsChainHandler.handleRequest(MetricsChainHandler.java:59)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)&lt;br/&gt;
at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)&lt;br/&gt;
at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)&lt;br/&gt;
at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)&lt;br/&gt;
at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)&lt;br/&gt;
at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)&lt;br/&gt;
at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)&lt;br/&gt;
at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)&lt;br/&gt;
at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)&lt;br/&gt;
at io.undertow.server.Connectors.executeRootHandler(Connectors.java:390)&lt;br/&gt;
at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)&lt;br/&gt;
at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)&lt;br/&gt;
at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)&lt;br/&gt;
at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)&lt;br/&gt;
at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)&lt;br/&gt;
at java.base/java.lang.Thread.run(Thread.java: 834)&lt;br/&gt;
Caused by: 4:&lt;br/&gt;
at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:1540)&lt;br/&gt;
at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:1290)&lt;br/&gt;
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:454)&lt;br/&gt;
... 116 more&lt;br/&gt;
Caused by: java.io.IOException: Pipe closed&lt;br/&gt;
at java.base/java.io.PipedInputStream.read(PipedInputStream.java: 307)&lt;br/&gt;
at com.jcraft.jsch.Channel$MyPipedInputStream.updateReadSide(Channel.java:362)&lt;br/&gt;
at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:1311)&lt;br/&gt;
... 118 more&lt;br/&gt;
&quot;,&quot;@version&quot;:&quot;1&quot;,&quot;log-handler&quot;:&quot;CONSOLE&quot;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;common-vfs 2.7.0,&lt;/p&gt;

&lt;p&gt;openJDK 11&lt;/p&gt;

&lt;p&gt;jsch 0.1.55,&lt;/p&gt;

&lt;p&gt;jboss eap 7.2&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13344196">VFS-791</key>
            <summary>Apache VFS (FileObjectUtils.writeContent) - org.apache.commons.vfs2.FileSystemException: Unknown message with code &quot; &quot;.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jessica.qiu">JessicaQ</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Dec 2020 09:11:55 +0000</created>
                <updated>Thu, 28 Jul 2022 21:14:02 +0000</updated>
                                            <version>2.5.0</version>
                    <version>2.6.0</version>
                    <version>2.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17449829" author="garydgregory" created="Sat, 27 Nov 2021 12:55:44 +0000"  >&lt;p&gt;May you please try 2.9.0? &lt;br/&gt;
Is the issue with the same file name? &lt;br/&gt;
If not, is there a file name pattern in common?&lt;/p&gt;</comment>
                            <comment id="17572663" author="garydgregory" created="Thu, 28 Jul 2022 21:14:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jessica.qiu&quot; class=&quot;user-hover&quot; rel=&quot;jessica.qiu&quot;&gt;jessica.qiu&lt;/a&gt; ping?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l79k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-790] VFS2 handles files with special characters incorrectly</title>
                <link>https://issues.apache.org/jira/browse/VFS-790</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The following Testcase fails :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void testLocalFile() 
	&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
{
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefix = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[] { &lt;span class=&quot;code-quote&quot;&gt;&apos;\u0074&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;\u0065&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;\u00a0&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;\u0074&apos;&lt;/span&gt; });
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File f = File.createTempFile(prefix + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; , &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; + prefix);
	&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; f.exists();
		
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URI uri = f.toURI();
		
	&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileSystemManager m = VFS.getManager() )
	{
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject s = m.resolveFile(uri) )
		{
			&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileContent sourceContent = s.getContent() )
			{
				&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size = sourceContent.getSize();
				&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; size==f.length();
			}
		}
	}	
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;windows 10&lt;/p&gt;

&lt;p&gt;java 8&lt;/p&gt;

&lt;p&gt;vfs 2.7&lt;/p&gt;</environment>
        <key id="13344073">VFS-790</key>
            <summary>VFS2 handles files with special characters incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vnashkev">Vitali Nashkevich</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2020 18:04:03 +0000</created>
                <updated>Tue, 8 Dec 2020 20:46:44 +0000</updated>
                                            <version>2.2</version>
                    <version>2.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17243557" author="garydgregory" created="Thu, 3 Dec 2020 22:36:01 +0000"  >&lt;p&gt;Please show the failure in your description.&#160;&lt;/p&gt;</comment>
                            <comment id="17243835" author="vnashkev" created="Fri, 4 Dec 2020 08:34:56 +0000"  >
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.commons.vfs2.FileSystemException: Could not determine the size of &quot;file:///C:/Users/NASHKE~1/AppData/Local/Temp/te&#194;&#160;t-7766545175922765294-te&#194;&#160;t&quot; because it is not a file.
	at org.apache.commons.vfs2.provider.DefaultFileContent.getSize(DefaultFileContent.java:125)
	at LocalFileProviderTest.testLocalFile(LocalFileProviderTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:124)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:571)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:707)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:979)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.privateRun(TestRunner.java:648)
	at org.testng.TestRunner.run(TestRunner.java:505)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:455)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:450)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:415)
	at org.testng.SuiteRunner.run(SuiteRunner.java:364)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:84)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1116)
	at org.testng.TestNG.runSuites(TestNG.java:1028)
	at org.testng.TestNG.run(TestNG.java:996)
	at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)
	at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)
	at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17244514" author="garydgregory" created="Sat, 5 Dec 2020 15:09:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vnashkev&quot; class=&quot;user-hover&quot; rel=&quot;vnashkev&quot;&gt;vnashkev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I added a different version of this test case here: &lt;tt&gt;org.apache.commons.vfs2.provider.local.test.FileNameTests.testLocalFile()&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Note that the above new test method creates a legal URI, it does not contain a NB-SP char (0xA0).&lt;/p&gt;

&lt;p&gt;Sadly, the URI class lets you create URIs with paths which contains character that are not escaped which end up causing havoc later when you try to use them as actual legal URIs when in fact they are not.&lt;/p&gt;

&lt;p&gt;The bottom line is that one must sanitize URI input before creating them.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17245149" author="vnashkev" created="Mon, 7 Dec 2020 11:45:54 +0000"  >&lt;p&gt;Thanks a lot for your attention,&lt;/p&gt;

&lt;p&gt;I think VFS must be conform to JDK URI class regardless of RIGHT-definition.&lt;br/&gt;
 As several sources ( &lt;a href=&quot;https://www.w3.org/International/O-URL-code.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/International/O-URL-code.html&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Percent-encoding&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Percent-encoding&lt;/a&gt; ) suggest that&lt;br/&gt;
 java character &apos;\u00a0&apos; must be&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;converted to 0xC2A0 UTF-8 character and then&lt;/li&gt;
	&lt;li&gt;encoded to &apos;%C2%A0&apos; URI-fragment&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Many online URI-encoders works this way. (&lt;a href=&quot;https://meyerweb.com/eric/tools/dencoder/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://meyerweb.com/eric/tools/dencoder/&lt;/a&gt;).&lt;br/&gt;
 Java URI does the same as well.&lt;/p&gt;

&lt;p&gt;VFS decodes &apos;%C2%A0&apos; sequence into 2-characters string&lt;/p&gt;

{ &apos;\u00C2&apos;, &apos;\u00A0&apos; }

&lt;p&gt;instead of 1-character string&lt;/p&gt;

{ &apos;\u00A0&apos;}

&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="17245154" author="vnashkev" created="Mon, 7 Dec 2020 11:49:44 +0000"  >&lt;p&gt;Another interesting link&#160;[|&lt;a href=&quot;https://en.wikipedia.org/wiki/Internationalized_Resource_Identifier&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Internationalized_Resource_Identifier&lt;/a&gt;]&lt;/p&gt;</comment>
                            <comment id="17246135" author="garydgregory" created="Tue, 8 Dec 2020 20:46:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vnashkev&quot; class=&quot;user-hover&quot; rel=&quot;vnashkev&quot;&gt;vnashkev&lt;/a&gt;&lt;br/&gt;
Feel free to provide a PR so we can see what you are proposing. However, it is not clear to me that VFS should sanitize any input. Let&apos;s see if there are other opinions. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13016432" name="LocalFileProviderTest.java" size="873" author="vnashkev" created="Thu, 3 Dec 2020 18:02:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l6i8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-789] HttpFileObject.doGetInputStream() does not release connection when an exception is thrown, such as the http method return status code is not 200</title>
                <link>https://issues.apache.org/jira/browse/VFS-789</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;org.apache.commons.vfs2.provider.http.HttpFileObject.doGetInputStream() does not release connection when an exception is thrown, such as the http method return status code is not 200.&lt;/p&gt;

&lt;p&gt;When throw the&#160;FileSystemException, the connection was not released.&lt;/p&gt;

&lt;p&gt;The return status code of 404&#65292;can be released by&#160;garbage collector in&#160;MultiThreadedHttpConnectionManager. But 403 can&apos;t.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// org.apache.commons.vfs2.provider.http.HttpFileObject
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// version 2.6.0
&lt;/span&gt;@Override
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; InputStream doGetInputStream(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bufferSize) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GetMethod getMethod = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GetMethod();
    setupMethod(getMethod);
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; status = getAbstractFileSystem().getClient().executeMethod(getMethod);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (status == HttpURLConnection.HTTP_NOT_FOUND) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileNotFoundException(getName());
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (status != HttpURLConnection.HTTP_OK) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider.http/get.error&quot;&lt;/span&gt;, getName(), &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.valueOf(status));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpInputStream(getMethod, bufferSize);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// org.apache.commons.vfs2.provider.http.HttpFileObject
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// version 2.3
&lt;/span&gt;@Override
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; InputStream doGetInputStream() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GetMethod getMethod = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GetMethod();
    setupMethod(getMethod);
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; status = getAbstractFileSystem().getClient().executeMethod(getMethod);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (status == HttpURLConnection.HTTP_NOT_FOUND) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileNotFoundException(getName());
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (status != HttpURLConnection.HTTP_OK) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider.http/get.error&quot;&lt;/span&gt;, getName(), &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.valueOf(status));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpInputStream(getMethod);
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13329949">VFS-789</key>
            <summary>HttpFileObject.doGetInputStream() does not release connection when an exception is thrown, such as the http method return status code is not 200</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mick1992">Mick Woo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Sep 2020 13:50:55 +0000</created>
                <updated>Thu, 25 May 2023 11:49:13 +0000</updated>
                                            <version>2.4</version>
                    <version>2.3</version>
                    <version>2.4.1</version>
                    <version>2.5.0</version>
                    <version>2.6.0</version>
                                    <fixVersion>2.4</fixVersion>
                    <fixVersion>2.3</fixVersion>
                    <fixVersion>2.4.1</fixVersion>
                    <fixVersion>2.5.0</fixVersion>
                    <fixVersion>2.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17206227" author="garydgregory" created="Fri, 2 Oct 2020 14:44:57 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mick1992&quot; class=&quot;user-hover&quot; rel=&quot;mick1992&quot;&gt;mick1992&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what you are proposing to do here. May you provide a PR on GitHub that demonstrates the problem in a unit test? If you have a fix, please do include it in your PR.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0j0e0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-788] [webdav/webdav4]Jackrabbit1 and jackrabbit2 modules getting same osgi symbolic name</title>
                <link>https://issues.apache.org/jira/browse/VFS-788</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description></description>
                <environment></environment>
        <key id="13325278">VFS-788</key>
            <summary>[webdav/webdav4]Jackrabbit1 and jackrabbit2 modules getting same osgi symbolic name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="satish.bhor">satish bhor</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Aug 2020 06:54:55 +0000</created>
                <updated>Sun, 6 Sep 2020 21:45:34 +0000</updated>
                            <resolved>Sun, 6 Sep 2020 21:45:34 +0000</resolved>
                                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17187498" author="satish.bhor" created="Mon, 31 Aug 2020 06:55:17 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Bundle-SymbolicName: org.apache.commons.vfs2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17187509" author="satish.bhor" created="Mon, 31 Aug 2020 07:15:35 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;commons.componentid&amp;gt;vfs-jackrabbit1&amp;lt;/commons.componentid&amp;gt;
&amp;lt;commons.packageId&amp;gt;vfs-jackrabbit1&amp;lt;/commons.packageId&amp;gt;
&amp;lt;commons.module.name&amp;gt;org.apache.commons.vfs2.jackrabbit1&amp;lt;/commons.module.name&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;these configs should fix issue&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i7m0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-785] Credentials conflict when root and proxy hosts are same name but different ports</title>
                <link>https://issues.apache.org/jira/browse/VFS-785</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AuthScope(rootName.getHostName(), AuthScope.ANY_PORT)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;any scope leading to authentication credential gets overridden between proxy and and target server&lt;/p&gt;</description>
                <environment></environment>
        <key id="13325231">VFS-785</key>
            <summary>Credentials conflict when root and proxy hosts are same name but different ports</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="satish.bhor">satish bhor</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Aug 2020 18:46:02 +0000</created>
                <updated>Mon, 1 Mar 2021 15:45:56 +0000</updated>
                            <resolved>Mon, 1 Mar 2021 15:31:25 +0000</resolved>
                                                    <fixVersion>2.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17292973" author="garydgregory" created="Mon, 1 Mar 2021 15:45:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=satish.bhor&quot; class=&quot;user-hover&quot; rel=&quot;satish.bhor&quot;&gt;satish.bhor&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please verify in git master and close this ticket if it works for your use case.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i7bk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-784] SSL Connection failing with http4 provider with squid proxy nginx combination</title>
                <link>https://issues.apache.org/jira/browse/VFS-784</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Below error throw with nginx/squid configs&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1383) at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1383) at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1265) at org.apache.commons.vfs2.provider.DefaultFileContent.buildOutputStream(DefaultFileContent.java:540) at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:406) at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:394) at org.apache.commons.vfs2.provider.VFSExample.main(VFSExample.java:44)Caused by: org.apache.commons.vfs2.FileSystemException: Unknown message with code &lt;span class=&quot;code-quote&quot;&gt;&quot;sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;&lt;/span&gt;. at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.executeRequest(Webdav4FileObject.java:473) at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:503) at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperties(Webdav4FileObject.java:494) at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:528) at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.getProperty(Webdav4FileObject.java:533) at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.isDirectory(Webdav4FileObject.java:567) at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.doGetType(Webdav4FileObject.java:333) at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1377) ... 5 moreCaused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target at sun.security.ssl.Alerts.getSSLException(Alerts.java:192) at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1946) at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:316) at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:310) at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1639) at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:223) at sun.security.ssl.Handshaker.processLoop(Handshaker.java:1037) at sun.security.ssl.Handshaker.process_record(Handshaker.java:965) at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1064) at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1367) at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1395) at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1379) at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:436) at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.upgrade(DefaultHttpClientConnectionOperator.java:191) at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.upgrade(PoolingHttpClientConnectionManager.java:392) at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:428) at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236) at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) at org.apache.commons.vfs2.provider.http4.Http4FileObject.executeHttpUriRequest(Http4FileObject.java:231) at org.apache.commons.vfs2.provider.webdav4.Webdav4FileObject.executeRequest(Webdav4FileObject.java:459) ... 12 moreCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:450) at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:317) at sun.security.validator.Validator.validate(Validator.java:262) at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:330) at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:237) at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:132) at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1621) ... 31 moreCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target at sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141) at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126) at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280) at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:445) ... 37 more
&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; finished with exit code 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13325229">VFS-784</key>
            <summary>SSL Connection failing with http4 provider with squid proxy nginx combination</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="satish.bhor">satish bhor</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Aug 2020 18:19:38 +0000</created>
                <updated>Thu, 15 Jul 2021 17:06:49 +0000</updated>
                            <resolved>Thu, 15 Jul 2021 17:06:49 +0000</resolved>
                                                    <fixVersion>2.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i7b4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-783] WEBDAV4 GenericURLFileName hardcoded scheme(&quot;http&quot;) won&apos;t work for https connection</title>
                <link>https://issues.apache.org/jira/browse/VFS-783</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;WEBDAV4 GenericURLFileName hardcoded scheme(&quot;http&quot;) won&apos;t work for https connection&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GenericURLFileName newFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericURLFileName(&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt;, name.getHostName(), name.getPort(), name.getDefaultPort(),
 user, password, name.getPath(), name.getType(), name.getQueryString());&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13325228">VFS-783</key>
            <summary>WEBDAV4 GenericURLFileName hardcoded scheme(&quot;http&quot;) won&apos;t work for https connection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="satish.bhor">satish bhor</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Aug 2020 17:49:47 +0000</created>
                <updated>Fri, 11 Dec 2020 03:10:34 +0000</updated>
                            <resolved>Thu, 10 Dec 2020 22:15:32 +0000</resolved>
                                                    <fixVersion>2.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17247534" author="garydgregory" created="Thu, 10 Dec 2020 22:15:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=satish.bhor&quot; class=&quot;user-hover&quot; rel=&quot;satish.bhor&quot;&gt;satish.bhor&lt;/a&gt;&lt;br/&gt;
In git master, please verify and close this ticket.&lt;br/&gt;
Thank you!&lt;/p&gt;</comment>
                            <comment id="17247611" author="woonsan" created="Fri, 11 Dec 2020 03:09:45 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=satish.bhor&quot; class=&quot;user-hover&quot; rel=&quot;satish.bhor&quot;&gt;satish.bhor&lt;/a&gt;! It looks good!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13285367">VFS-758</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i7aw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-782] Wrong Proxy Credentials set for http4/http5 client</title>
                <link>https://issues.apache.org/jira/browse/VFS-782</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
f (proxyAuthData != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
 &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; UsernamePasswordCredentials proxyCreds = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UsernamePasswordCredentials(
 UserAuthenticatorUtils.toString(
 UserAuthenticatorUtils.getData(authData, UserAuthenticationData.USERNAME, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)),
 UserAuthenticatorUtils.toString(
 UserAuthenticatorUtils.getData(authData, UserAuthenticationData.PASSWORD, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)));

 credsProvider.setCredentials(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AuthScope(proxyHost.getHostName(), AuthScope.ANY_PORT),
 proxyCreds);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;proxy credentials should be taken from&#160;proxyAuthData&#160; instead of authData&lt;/p&gt;</description>
                <environment></environment>
        <key id="13325226">VFS-782</key>
            <summary>Wrong Proxy Credentials set for http4/http5 client</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="satish.bhor">satish bhor</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Aug 2020 17:27:18 +0000</created>
                <updated>Fri, 5 Mar 2021 22:33:24 +0000</updated>
                            <resolved>Fri, 5 Mar 2021 22:33:24 +0000</resolved>
                                                    <fixVersion>2.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17296375" author="garydgregory" created="Fri, 5 Mar 2021 22:33:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=satish.bhor&quot; class=&quot;user-hover&quot; rel=&quot;satish.bhor&quot;&gt;satish.bhor&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In git master. Please verify and close this ticket if your use case works.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i7ag:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-781] WEBDAV4/HTTP4/5 Client issues</title>
                <link>https://issues.apache.org/jira/browse/VFS-781</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;1. WEBDAV4 GenericURLFileName hardcoded scheme won&apos;t work for https connection&lt;br/&gt;
2. Htt4/Http5 proxy authentication details are not set correctly default user auth set to proxy auth which is wrong&lt;br/&gt;
3. SSL connection setting keystore type should be supported&lt;br/&gt;
4. NGINX(WEBDAV)/SQUID breaking with SSL connection when socketfactory not set&lt;br/&gt;
5. allow user to set proxy scheme&lt;/p&gt;</description>
                <environment></environment>
        <key id="13325219">VFS-781</key>
            <summary>WEBDAV4/HTTP4/5 Client issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="satish.bhor">satish bhor</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Aug 2020 14:34:05 +0000</created>
                <updated>Sun, 30 Aug 2020 17:24:52 +0000</updated>
                            <resolved>Sun, 30 Aug 2020 17:24:52 +0000</resolved>
                                    <version>2.6.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17187299" author="satish.bhor" created="Sun, 30 Aug 2020 17:24:52 +0000"  >&lt;p&gt;Creating seperate issue&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i78w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-780] SftpFileSystem returns null channel and produce NPE</title>
                <link>https://issues.apache.org/jira/browse/VFS-780</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I caught NPE in case of parallel operations with files:&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.putChannel(SftpFileSystem.java:183)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doRename(SftpFileObject.java:215)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1668)&lt;/p&gt;

&lt;p&gt;After short investigation I see issue in SftpFileSystem#getChannel&lt;/p&gt;</description>
                <environment></environment>
        <key id="13321945">VFS-780</key>
            <summary>SftpFileSystem returns null channel and produce NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Nikita T">Nikita Tolstunov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Aug 2020 07:27:12 +0000</created>
                <updated>Thu, 20 Aug 2020 07:07:11 +0000</updated>
                            <resolved>Thu, 20 Aug 2020 07:06:44 +0000</resolved>
                                    <version>2.4</version>
                    <version>2.6.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17175315" author="nikita t" created="Tue, 11 Aug 2020 07:43:17 +0000"  >&lt;p&gt;PR with fix created, patch with fix also attached.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13009419" name="VFS-780_SftpFileSystem_returns_null_channel_and_produce_NPE_-_fix_getChannel_logic_.patch" size="943" author="Nikita T" created="Tue, 11 Aug 2020 07:39:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hn34:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-779] Possible null pointer dereference in org.apache.commons.vfs2.impl.DefaultFileReplicator.close() due to return value of called method</title>
                <link>https://issues.apache.org/jira/browse/VFS-779</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In &lt;tt&gt;org.apache.commons.vfs2.impl.DefaultFileReplicator.close()&lt;/tt&gt;:&lt;/p&gt;

&lt;p&gt;Possible null pointer dereference in &lt;tt&gt;org.apache.commons.vfs2.impl.DefaultFileReplicator.close(&lt;/tt&gt;) due to return value of called method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13320060">VFS-779</key>
            <summary>Possible null pointer dereference in org.apache.commons.vfs2.impl.DefaultFileReplicator.close() due to return value of called method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2020 20:40:19 +0000</created>
                <updated>Wed, 29 Jul 2020 21:01:24 +0000</updated>
                            <resolved>Wed, 29 Jul 2020 21:01:24 +0000</resolved>
                                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hbk0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-778] SftpFileSystem returning null channel</title>
                <link>https://issues.apache.org/jira/browse/VFS-778</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I tested v2.4.1 jar with 8 threads. The purpose was to upload 1.3TB of data on FTP via sftp protocol. There were 850 folders with varying sizes from 10 MB to 25GB. After the job was finished, It was observed that 50 folders failed to upload due to null pointer exception as below.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetOutputStream(SftpFileObject.java:475)
        at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1239)
        at org.apache.commons.vfs2.provider.DefaultFileContent.buildOutputStream(DefaultFileContent.java:518)
        at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:404)
        at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:392)
        at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:753)
        at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:771)
        at org.apache.commons.vfs2.FileUtil.copyContent(FileUtil.java:37)
        at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:295)
        at com.infy.task.helper.FTPUploader.uploadToFTP(FTPUploader.java:173)
        at com.infy.task.helper.FTPUploader.upload(FTPUploader.java:90)
        at com.infy.task.AssetDownloadAndUploadTask.run(AssetDownloadAndUploadTask.java:57)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Further, I have analysed the code, it is very highly likely that it will return null due to below piece of code.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; ChannelSftp getChannel() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;// Use the pooled channel, or create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; one
&lt;/span&gt;            ChannelSftp channel = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (idleChannel != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) {
            &lt;span class=&quot;code-comment&quot;&gt;// What will happen &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; my code comes here and idleChannel is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (idleChannel != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                        channel = idleChannel;
                        idleChannel = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
                    }
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                  channel= .. &lt;span class=&quot;code-comment&quot;&gt;//create channel
&lt;/span&gt;            }
            &lt;span class=&quot;code-comment&quot;&gt;// some more code
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; channel;
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13316277">VFS-778</key>
            <summary>SftpFileSystem returning null channel</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manishbansal8843">Manish Bansal</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 11 Jul 2020 10:17:13 +0000</created>
                <updated>Wed, 20 Apr 2022 23:15:37 +0000</updated>
                                            <version>2.4.1</version>
                    <version>2.5.0</version>
                    <version>2.6.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17156341" author="manishbansal8843" created="Sun, 12 Jul 2020 16:56:42 +0000"  >&lt;p&gt;Just an update. I have tested this fix on the same use-case as mentioned in the issue description. No issues found.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="17449289" author="garydgregory" created="Thu, 25 Nov 2021 18:53:36 +0000"  >&lt;p&gt;I&apos;m not sure where we are with this issue. May someone check 2.9.0 or/and git master?&lt;/p&gt;</comment>
                            <comment id="17449831" author="garydgregory" created="Sat, 27 Nov 2021 13:05:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=manishbansal8843&quot; class=&quot;user-hover&quot; rel=&quot;manishbansal8843&quot;&gt;manishbansal8843&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;I think this was recently fixed in git master by commit&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-vfs/commit/d2f6f34f9700bd66a226d2ceb1495ac0d4c8f223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d2f6f34f9700bd66a226d2ceb1495ac0d4c8f223&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;May you please try git master or a 2.10.0-SNAPSHOT build?&lt;/p&gt;</comment>
                            <comment id="17525346" author="garydgregory" created="Wed, 20 Apr 2022 23:15:37 +0000"  >&lt;p&gt;Ping?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0go8o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-777] &quot;NoSuchMethodErrors&quot; due to multiple versions of commons-codec:commons-codec:jar</title>
                <link>https://issues.apache.org/jira/browse/VFS-777</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;h1&gt;&lt;a name=&quot;Issuedescription&quot;&gt;&lt;/a&gt;Issue description&lt;/h1&gt;

&lt;p&gt;Hi, there are multiple versions of &lt;em&gt;&lt;b&gt;commons-codec:commons-codec&lt;/b&gt;&lt;/em&gt; in &lt;b&gt;&lt;em&gt;commons-vfs(commons-vfs2 module)&lt;/em&gt;&lt;/b&gt;. As shown in the following dependency tree, according to Maven&apos;s &quot;nearest wins&quot; strategy, only &lt;em&gt;&lt;b&gt;commons-codec:commons-codec:1.2&lt;/b&gt;&lt;/em&gt; can be loaded,&#160;&lt;em&gt;&lt;b&gt;commons-codec:commons-codec:1.11&lt;/b&gt;&lt;/em&gt;&#160;and &lt;em&gt;&lt;b&gt;commons-codec:commons-codec:1.13&lt;/b&gt;&lt;/em&gt;&#160;will be shadowed.&lt;/p&gt;

&lt;p&gt;However, one method defined in shadowed version&#160;&lt;em&gt;&lt;b&gt;commons-codec:commons-codec:1.11&lt;/b&gt;&lt;/em&gt; is referenced by client project via&#160;&lt;em&gt;&lt;b&gt;org.apache.httpcomponents:httpclient:4.5.12&lt;/b&gt;&lt;/em&gt;, but missing in the actually loaded version&#160;&lt;em&gt;&lt;b&gt;commons-codec:commons-codec:1.2&lt;/b&gt;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;For instance, the following missing method(defined in&#160;&lt;em&gt;&lt;b&gt;commons-codec:commons-codec:1.11&lt;/b&gt;&lt;/em&gt;) is actually referenced by &lt;b&gt;&lt;em&gt;commons-vfs(commons-vfs2 module)&lt;/em&gt;&lt;/b&gt;, which will introduce a runtime error(i.e., &quot;NoSuchMethodError&quot;) into &lt;b&gt;&lt;em&gt;commons-vfs(commons-vfs2 module)&lt;/em&gt;&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;&lt;em&gt;Missing method:&#160;org.apache.commons.codec.binary.Base64: void init (int)&lt;/em&gt;&lt;/b&gt; is invoked by &lt;b&gt;&lt;em&gt;commons-vfs(commons-vfs2 module)&lt;/em&gt;&lt;/b&gt; via the following path:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;paths------
&amp;lt;org.apache.commons.vfs2.provider.http4.Http4FileObject: org.apache.http.HttpResponse executeHttpUriRequest(org.apache.http.client.methods.HttpUriRequest)&amp;gt; commons-vfs-master\commons-vfs2\target\classes
&amp;lt;org.apache.http.impl.client.DecompressingHttpClient: org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.protocol.HttpContext)&amp;gt; Repositories\org\apache\httpcomponents\httpclient\4.5.12\httpclient-4.5.12.jar
&amp;lt;org.apache.http.impl.client.DecompressingHttpClient: org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)&amp;gt; Repositories\org\apache\httpcomponents\httpclient\4.5.12\httpclient-4.5.12.jar
&amp;lt;org.apache.http.client.protocol.RequestTargetAuthentication: void process(org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)&amp;gt; Repositories\org\apache\httpcomponents\httpclient\4.5.12\httpclient-4.5.12.jar
&amp;lt;org.apache.http.client.protocol.RequestAuthenticationBase: void process(org.apache.http.auth.AuthState,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)&amp;gt; Repositories\org\apache\httpcomponents\httpclient\4.5.12\httpclient-4.5.12.jar
&amp;lt;org.apache.http.client.protocol.RequestAuthenticationBase: org.apache.http.Header authenticate(org.apache.http.auth.AuthScheme,org.apache.http.auth.Credentials,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)&amp;gt; Repositories\org\apache\httpcomponents\httpclient\4.5.12\httpclient-4.5.12.jar
&amp;lt;org.apache.http.impl.auth.BasicScheme: org.apache.http.Header authenticate(org.apache.http.auth.Credentials,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)&amp;gt; Repositories\org\apache\httpcomponents\httpclient\4.5.12\httpclient-4.5.12.jar
&amp;lt;org.apache.commons.codec.binary.Base64: void &amp;lt;init&amp;gt;(int)&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h1&gt;&lt;a name=&quot;Suggestedfixingsolutions&quot;&gt;&lt;/a&gt;Suggested fixing solutions&lt;/h1&gt;
&lt;p&gt;1.Use configuration attribute &amp;lt;dependencyManagement&amp;gt; to unify the version of library &lt;em&gt;&lt;b&gt;commons-codec:commons-codec&lt;/b&gt;&lt;/em&gt;&#160;to be&#160;&lt;b&gt;&lt;em&gt;1.11&lt;/em&gt;&lt;/b&gt;&#160;in commons-vfs(commons-vfs2 module)&apos;s pom file.&lt;br/&gt;
2. Declare a direct dependency&#160;&lt;em&gt;&lt;b&gt;commons-codec:commons-codec1.11&lt;/b&gt;&lt;/em&gt; to upgrade version&#160;from&#160;&lt;em&gt;&lt;b&gt;1.2&lt;/b&gt;&lt;/em&gt;&#160;to&#160;&lt;em&gt;&lt;b&gt;1.11&lt;/b&gt;&lt;/em&gt;.&lt;br/&gt;
3.use &amp;lt;exclude&amp;gt; to exclude&#160;&lt;em&gt;&lt;b&gt;commons-codec:commons-codec:1.2&lt;/b&gt;&lt;/em&gt;&#160;from the dependency tree, so that version &lt;em&gt;&lt;b&gt;1.11&lt;/b&gt;&lt;/em&gt; will be loaded.&lt;/p&gt;

&lt;p&gt;Please let me know which solution do you prefer? I can submit a PR to fix it.&lt;/p&gt;

&lt;p&gt;Thank you very much for your attention.&lt;br/&gt;
 Best regards,&lt;/p&gt;

&lt;h1&gt;&lt;a name=&quot;Dependencytree&quot;&gt;&lt;/a&gt;Dependency tree----&lt;/h1&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] org.apache.commons:commons-vfs2:jar:2.7.0-SNAPSHOT
 [INFO] +- commons-httpclient:commons-httpclient:jar:3.1:compile
 [INFO] | - *commons-codec:commons-codec:jar:1.2:compile*
 [INFO] +- org.apache.httpcomponents:httpclient:jar:4.5.12:compile
 [INFO] | - *(commons-codec:commons-codec:jar:1.11:compile - omitted for conflict with 1.2)*
 [INFO] +- org.apache.httpcomponents.client5:httpclient5:jar:5.0:compile
 [INFO] | - *(commons-codec:commons-codec:jar:1.13:compile - omitted for conflict with 1.2)*
 [INFO] +- org.apache.hadoop:hadoop-common:test-jar:tests:3.2.1:test
 [INFO] | +- (commons-codec:commons-codec:jar:1.11:test - omitted for conflict with 1.2)
 [INFO] | - org.apache.hadoop:hadoop-auth:jar:3.2.1:test
 [INFO] | - (commons-codec:commons-codec:jar:1.11:test - omitted for conflict with 1.2)
 [INFO] - org.apache.hadoop:hadoop-hdfs:test-jar:tests:3.2.1:test
 [INFO] - (commons-codec:commons-codec:jar:1.11:test - omitted for conflict with 1.2)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13315861">VFS-777</key>
            <summary>&quot;NoSuchMethodErrors&quot; due to multiple versions of commons-codec:commons-codec:jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Bing-ok">Bing-ok</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jul 2020 10:28:30 +0000</created>
                <updated>Tue, 15 Sep 2020 01:02:26 +0000</updated>
                            <resolved>Mon, 14 Sep 2020 14:52:12 +0000</resolved>
                                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17187553" author="bing-ok" created="Mon, 31 Aug 2020 08:22:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;Could you help me review this issue? Thx&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17195506" author="garydgregory" created="Mon, 14 Sep 2020 14:52:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bing-ok&quot; class=&quot;user-hover&quot; rel=&quot;Bing-ok&quot;&gt;Bing-ok&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In git master, please verify and close. Also please update this ticket with an actual stack trace.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="17195796" author="bing-ok" created="Tue, 15 Sep 2020 01:02:26 +0000"  >&lt;p&gt;Thanks for your support!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0glo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-776] Random Times i am receiving file not found error</title>
                <link>https://issues.apache.org/jira/browse/VFS-776</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Note removed sensitve information and replaced with (...)&lt;br/&gt;
Caused by: org.apache.commons.vfs2.FileSystemException: Could not copy &quot;file:///(...)&quot; to &quot;sftp://(...)&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:300)&lt;br/&gt;
Caused by: org.apache.commons.vfs2.FileSystemException: Could not write to &quot;sftp://(...)&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1243)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.DefaultFileContent.buildOutputStream(DefaultFileContent.java:518)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:404)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:392)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:753)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:771)&lt;br/&gt;
	at org.apache.commons.vfs2.FileUtil.copyContent(FileUtil.java:37)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:295)&lt;br/&gt;
	... 37 common frames omitted&lt;br/&gt;
Caused by: com.jcraft.jsch.SftpException: No such file&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.throwStatusError(ChannelSftp.java:2873)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:768)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:709)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.put(ChannelSftp.java:706)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetOutputStream(SftpFileObject.java:475)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1239)&lt;br/&gt;
	... 44 common frames omitted&lt;/p&gt;</description>
                <environment></environment>
        <key id="13312210">VFS-776</key>
            <summary>Random Times i am receiving file not found error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akhil_surapuram">Akhil Surapuram</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jun 2020 12:04:24 +0000</created>
                <updated>Thu, 25 Nov 2021 18:54:51 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17449291" author="garydgregory" created="Thu, 25 Nov 2021 18:54:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akhil_surapuram&quot; class=&quot;user-hover&quot; rel=&quot;akhil_surapuram&quot;&gt;akhil_surapuram&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m not sure how we can help unless you can provide a reproducer... in the form of a unit test, or standalone Maven project. Whatever works for you.&lt;/p&gt;

&lt;p&gt;TY.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fzcw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-775] SFTP Uplaod is successfull but getting Exceptions</title>
                <link>https://issues.apache.org/jira/browse/VFS-775</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;ache.commons.vfs2.FileSystemException: Could not determine the type of file &quot;sftp://........&quot;. at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1347) at org.apache.commons.vfs2.provider.AbstractFileObject.exists(AbstractFileObject.java:945) at org.apache.commons.vfs2.util.FileObjectUtils.exists(FileObjectUtils.java:45) at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:285)&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://2500009874_U:***@sftp.cdslindia.com/&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getChannel(SftpFileSystem.java:151)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileObject.statSelf(SftpFileObject.java:114)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetType(SftpFileObject.java:76)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1341)&lt;br/&gt;
	... 40 common frames omitted&lt;br/&gt;
Caused by: com.jcraft.jsch.JSchException: session is down&lt;br/&gt;
	at com.jcraft.jsch.Session.openChannel(Session.java:861)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getChannel(SftpFileSystem.java:124)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13311626">VFS-775</key>
            <summary>SFTP Uplaod is successfull but getting Exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="akhil_surapuram">Akhil Surapuram</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2020 04:33:50 +0000</created>
                <updated>Thu, 25 Nov 2021 18:55:13 +0000</updated>
                                            <version>2.4</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17449292" author="garydgregory" created="Thu, 25 Nov 2021 18:55:13 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akhil_surapuram&quot; class=&quot;user-hover&quot; rel=&quot;akhil_surapuram&quot;&gt;akhil_surapuram&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I&apos;m not sure how we can help unless you can provide a reproducer... in the form of a unit test, or standalone Maven project. Whatever works for you.&lt;/p&gt;

&lt;p&gt;TY.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fvrc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-773] Could not find file with URI &quot;sftp://max_s_maeder@35.232.72.5:22/hi.html&quot; because it is a relative path, and no base URI was provided.</title>
                <link>https://issues.apache.org/jira/browse/VFS-773</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I&apos;ve been pulling my hair out over this issue, I&apos;ve searched the interwebs and this issue tracker for someone having a similar issue, but to no avail.&lt;/p&gt;

&lt;p&gt;Every time I run the following code, I get this error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs2.FileSystemException: Could not find file with URI &lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//max_s_maeder@35.232.72.5:22/hi.html&quot;&lt;/span&gt; because it is a relative path, and no base URI was provided.
&lt;/span&gt;[01:58:12] [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14/WARN]:    at org.apache.commons.vfs2.FileSystemException.requireNonNull(FileSystemException.java:87)
[01:58:12] [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14/WARN]:    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:734)
[01:58:12] [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14/WARN]:    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:683)
[01:58:12] [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14/WARN]:    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:638)
[01:58:12] [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14/WARN]:    at ratismal.drivebackup.ftp.SFTPUploader.uploadFile(SFTPUploader.java:55)
[01:58:12] [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14/WARN]:    at ratismal.drivebackup.ftp.FTPUploader.uploadFile(FTPUploader.java:37)
[01:58:12] [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14/WARN]:    at ratismal.drivebackup.UploadThread.run(UploadThread.java:96)
[01:58:12] [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14/WARN]:    at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;&#160;ratismal.drivebackup.ftp;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&#160;org.apache.commons.vfs2.FileObject;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&#160;org.apache.commons.vfs2.FileSystemManager;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&#160;org.apache.commons.vfs2.VFS;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&#160;ratismal.drivebackup.config.Config;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&#160;ratismal.drivebackup.util.MessageUtil;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&#160;java.io.File;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;&#160;java.util.*;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;&#160;&lt;span class=&quot;code-keyword&quot;&gt;class&#160;&lt;/span&gt;SFTPUploader&#160;{
&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;&#160;&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;&#160;void&#160;uploadFile()&#160;&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt;&#160;Exception&#160;{&#160;&#160;&#160;&#160;FileSystemManager&#160;manager&#160;=&#160;VFS.getManager();
&#160;&#160;&#160;&#160;FileObject&#160;remoteFolder&#160;=&#160;manager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//max_s_maeder@35.232.72.5:22/hi.html&quot;&lt;/span&gt;);
&lt;/span&gt;&#160;&#160;&#160;&#160;remoteFolder.close();&#160;&#160;}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m sorry if this is the wrong place to ask.&lt;/p&gt;

&lt;p&gt;Also, the credentials above aren&apos;t going to get you into my server &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Google Cloud Engine instance with default firewall settings&lt;/p&gt;</environment>
        <key id="13306352">VFS-773</key>
            <summary>Could not find file with URI &quot;sftp://max_s_maeder@35.232.72.5:22/hi.html&quot; because it is a relative path, and no base URI was provided.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="MaxTheGinus">Max Maeder</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 May 2020 02:02:47 +0000</created>
                <updated>Thu, 8 Jul 2021 04:11:34 +0000</updated>
                            <resolved>Thu, 8 Jul 2021 04:11:21 +0000</resolved>
                                    <version>2.6.0</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="120">2m</timeoriginalestimate>
                            <timeestimate seconds="120">2m</timeestimate>
                                        <comments>
                            <comment id="17113221" author="garydgregory" created="Thu, 21 May 2020 14:24:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=MaxTheGinus&quot; class=&quot;user-hover&quot; rel=&quot;MaxTheGinus&quot;&gt;MaxTheGinus&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What happens if you provide both a user name and a password instead of just a user name?&lt;/p&gt;</comment>
                            <comment id="17376690" author="ramjia2z" created="Wed, 7 Jul 2021 16:43:32 +0000"  >&lt;p&gt;Any resolution/fix related to this issue?&lt;/p&gt;</comment>
                            <comment id="17376739" author="b.eckenfels" created="Wed, 7 Jul 2021 17:33:08 +0000"  >&lt;p&gt;The error most likely means the `sftp` scheme/provider is not registered, Since you are using the default manager this is normally caused by missing dependencies. You need at least JSch, commons-logging and commons-Lang on the classpath. I think the easiest to debug this is to actually try to instantiate the provider yourself.&lt;/p&gt;</comment>
                            <comment id="17376921" author="maxtheginus" created="Thu, 8 Jul 2021 00:37:54 +0000"  >&lt;p&gt;That is most likely the issue. A little more documentation in regards to this would be much appreciated.&lt;/p&gt;

&lt;p&gt;I ended up using another SFTP library, but I appreciate the help regardless!&lt;/p&gt;

&lt;p&gt;Thanks, Max&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ezc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-772] SFTP resolveFile() can freeze while testing if the server disabled the exec channel</title>
                <link>https://issues.apache.org/jira/browse/VFS-772</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Since 2.5.0 (&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-590&quot; title=&quot;SFTP moveTo operation might fail on permission checks even if the operation itself might succeed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-590&quot;&gt;&lt;del&gt;VFS-590&lt;/del&gt;&lt;/a&gt;) the SftpFileSystem constructor checks if it can execute commands by testing &quot;id -u&quot; (see SftpFileSystem#detectExecDisabled()), but with some servers the call stay blocked in SftpFileSystem#executeCommand(&quot;id -u&quot;, output).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13304881">VFS-772</key>
            <summary>SFTP resolveFile() can freeze while testing if the server disabled the exec channel</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="remi.ville">R&#233;mi Vill&#233;</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 May 2020 08:48:04 +0000</created>
                <updated>Thu, 25 Nov 2021 18:56:03 +0000</updated>
                                            <version>2.6.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17107418" author="garydgregory" created="Thu, 14 May 2020 15:44:12 +0000"  >&lt;p&gt;Please try &lt;tt&gt;org.apache.commons.vfs2.provider.sftp.SftpFileSystemConfigBuilder.setDisableDetectExecChannel(FileSystemOptions, boolean)&lt;/tt&gt; in git master or a SNAPSHOT build from &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-vfs2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-vfs2/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17449294" author="garydgregory" created="Thu, 25 Nov 2021 18:56:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remi.ville&quot; class=&quot;user-hover&quot; rel=&quot;remi.ville&quot;&gt;remi.ville&lt;/a&gt;&lt;br/&gt;
Ping?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12916933">VFS-590</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0eq8w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-771] SFTP multiple get bad performances if copyFrom() called after findFiles()</title>
                <link>https://issues.apache.org/jira/browse/VFS-771</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Similar to&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-698&quot; title=&quot;SFTP file attributes are fetched multiple times leading to very slow directory listing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-698&quot;&gt;&lt;del&gt;VFS-698&lt;/del&gt;&lt;/a&gt;: if you call&#160;sftpFile.findFiles(selector) before localFile.copyFrom(sftpFile, selector) the second call reset file stats in the cache (in .AbstractFileSystem#resolveFile() =&amp;gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getFileSystemManager().getCacheStrategy().equals(CacheStrategy.ON_RESOLVE)) {
 file.refresh();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;)&lt;br/&gt;
Then the stats are retrieved one by one which result in poor performances.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13304878">VFS-771</key>
            <summary>SFTP multiple get bad performances if copyFrom() called after findFiles()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="remi.ville">R&#233;mi Vill&#233;</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 May 2020 08:38:40 +0000</created>
                <updated>Mon, 18 May 2020 07:30:43 +0000</updated>
                                            <version>2.4.1</version>
                    <version>2.6.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17107465" author="garydgregory" created="Thu, 14 May 2020 16:52:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remi.ville&quot; class=&quot;user-hover&quot; rel=&quot;remi.ville&quot;&gt;remi.ville&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Feel free to provide a PR on GitHub.&lt;/p&gt;</comment>
                            <comment id="17108058" author="remi.ville" created="Fri, 15 May 2020 08:01:34 +0000"  >&lt;p&gt;I don&apos;t know what would be the good solution.&lt;/p&gt;

&lt;p&gt;Maybe adding an option to FileSystemOptions to not set FileSystemObject.attr to null during&#160;FileSystemObject.refresh() (attr == null causes the call to getStat() during file.getType() of AbstractFileObject#traverse())&lt;/p&gt;</comment>
                            <comment id="17108615" author="b.eckenfels" created="Fri, 15 May 2020 20:04:01 +0000"  >&lt;p&gt;Just set the cache strategy to ON_DEMAND?&lt;/p&gt;

&lt;p&gt;(Optimizations would be to avoid resolves, like some of the getChildren methods do)&lt;/p&gt;</comment>
                            <comment id="17109974" author="remi.ville" created="Mon, 18 May 2020 07:30:43 +0000"  >&lt;p&gt;setCacheStrategy() forbids to change the cache strategy if the FileSystemManager has been initialized.&lt;br/&gt;
When I use VFS.getManager() this call initialize the default&#160;FileSystemManager so I cannot change the strategy.&lt;br/&gt;
I tried to create my own manager by extending&#160;FileSystemManager (and then VFS.setManager(customFSManager)), but after that I use&#160;DefaultFileSystemConfigBuilder.getInstance() and&#160;SftpFileSystemConfigBuilder.getInstance() to set some SFTP settings like authenticator, userinfo, identityinfo, etc, unfortunately these calls seem to still use the old default FileSystemManager.&lt;/p&gt;

&lt;p&gt;My workaroud is to remove the first call to sftpFile.findFiles(selector) as I only used it to compare the number of downloaded files with the call to&#160;localFile.copyFrom(sftpFile, selector).&lt;br/&gt;
In fact I&apos;m not sure of the relevance of such a test as if an issue occurs during copyFrom() it should throw an exception.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13226854">VFS-698</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0eq88:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-770] FileSystemManager.createFileSystem(FileObject) fails on Gzip files.</title>
                <link>https://issues.apache.org/jira/browse/VFS-770</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Stack trace :&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; org.apache.commons.vfs2.FileSystemException: Could not find a file provider that can handle file &quot;file:///C:/DIR/00-test.gz&quot;.
	at org.apache.commons.vfs2.FileSystemException.requireNonNull(FileSystemException.java:87)
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.createFileSystem(DefaultFileSystemManager.java:909)
	at MyClass.test(MyClass.java:77)
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)
	at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at one.util.streamex.AbstractStreamEx.forEach(AbstractStreamEx.java:314)
	at MyClass.main(MyClass.java:45)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Caused by : &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=commons-vfs.git;a=blob;f=commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/FileContentInfoFilenameFactory.java;h=2888ff6545055c8d00cbd73412671d17560b2592;hb=HEAD#l42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fileNameMap.getContentTypeFor(name);&lt;/a&gt; which delegates content type resolution to Java&apos;s URLConnection.getFileNameMap() which in turn resolves GZip to a generic application/octet-stream hence leading to this exception.&lt;br/&gt;
 If the resolution had triggered a null or an application/x-gzip it would not have lead to this problem.&lt;/p&gt;

&lt;p&gt;Forcing resolution with fsManager.createFileSystem(&quot;gz&quot;,f) is a workaround&lt;/p&gt;</description>
                <environment>&lt;p&gt;Both Java 8 and Java 13&lt;/p&gt;</environment>
        <key id="13297050">VFS-770</key>
            <summary>FileSystemManager.createFileSystem(FileObject) fails on Gzip files.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thomas.belot">Thomas BELOT</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Apr 2020 11:39:37 +0000</created>
                <updated>Sat, 7 May 2022 00:49:18 +0000</updated>
                            <resolved>Wed, 20 Apr 2022 23:02:45 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17525342" author="garydgregory" created="Wed, 20 Apr 2022 23:02:45 +0000"  >&lt;p&gt;A fix is in git master. Please verify and close.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17527834" author="b.eckenfels" created="Tue, 26 Apr 2022 01:53:01 +0000"  >&lt;p&gt;BTW just FYI April 22 Update of Java 17 (and others) introduced new Mime types including the ones for `.gz` (`application/gzip`) and `.jar` (`application/java-archive`).&lt;/p&gt;

&lt;p&gt;This bugfix helps with these new types in a way that it will consider the file extensions when the new types are not registered. It therefore would have prevented a regression for us.&lt;/p&gt;

&lt;p&gt;Backports are here: &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8273655&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8273655&lt;/a&gt;&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13443662">VFS-819</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0del4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-769] TGZ fsManager.createFileSystem fails</title>
                <link>https://issues.apache.org/jira/browse/VFS-769</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FileSystemManager fsManager = VFS.getManager();
FileObject f1 = fsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;///C:/DIR&quot;&lt;/span&gt;);
&lt;/span&gt;FileObject f2 = f1.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.tgz&quot;&lt;/span&gt;);
FileObject res = fsManager.createFileSystem(f2);
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(res);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Fails with this stack trace :&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.IllegalStateException: org.apache.commons.vfs2.FileSystemException: Unknown message with code &quot;Error detected parsing the header&quot;.
	at MyClass.main(MyClass.java:30)
Caused by: org.apache.commons.vfs2.FileSystemException: Unknown message with code &quot;Error detected parsing the header&quot;.
	at org.apache.commons.vfs2.provider.tar.TarFileSystem.init(TarFileSystem.java:117)
	at org.apache.commons.vfs2.provider.AbstractVfsContainer.addComponent(AbstractVfsContainer.java:51)
	at org.apache.commons.vfs2.provider.AbstractFileProvider.addFileSystem(AbstractFileProvider.java:98)
	at org.apache.commons.vfs2.provider.AbstractLayeredFileProvider.createFileSystem(AbstractLayeredFileProvider.java:81)
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.createFileSystem(DefaultFileSystemManager.java:896)
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.createFileSystem(DefaultFileSystemManager.java:910)
	at MyClass.main(MyClass.java:27)
Caused by: java.io.IOException: Error detected parsing the header
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:371)
	at org.apache.commons.vfs2.provider.tar.TarFileSystem.init(TarFileSystem.java:80)
	... 6 more
Caused by: java.lang.IllegalArgumentException: At offset 124, 12 byte binary number exceeds maximum signed long value
	at org.apache.commons.compress.archivers.tar.TarUtils.parseBinaryBigInteger(TarUtils.java:215)
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctalOrBinary(TarUtils.java:179)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:1350)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:438)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:369)
	... 7 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but if I explicitly states that this is &lt;b&gt;tgz&lt;/b&gt; scheme, it works fine&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FileObject res = fsManager.createFileSystem(&lt;span class=&quot;code-quote&quot;&gt;&quot;tgz&quot;&lt;/span&gt;,f2);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This seems linked to the following lines :&lt;br/&gt;
&lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=commons-vfs.git;a=blob;f=commons-vfs2/src/main/resources/org/apache/commons/vfs2/impl/providers.xml;h=332f2ffa6fad2bbe0a377fcd2c5d93df1f3cac7b;hb=HEAD#l162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;default FS manager disables TGZ scheme and convert it to TAR scheme&lt;/a&gt; and &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=commons-vfs.git;a=blob;f=commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/tar/TarFileSystem.java;h=739cc797bd553f2cbc995e31bc744fb7f8780659;hb=HEAD#l171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;checks for TGZ scheme&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13297037">VFS-769</key>
            <summary>TGZ fsManager.createFileSystem fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thomas.belot">Thomas BELOT</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Apr 2020 10:20:44 +0000</created>
                <updated>Sun, 6 Sep 2020 22:49:43 +0000</updated>
                            <resolved>Sun, 6 Sep 2020 22:49:43 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0dei8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-766] SftpClientFactory hangs at FileSystemManager.resolveFile(...)</title>
                <link>https://issues.apache.org/jira/browse/VFS-766</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Issue: When trying to sftp, it hangs inside FileSystemManager.resolveFile(...).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Libs in classpath used for testing:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;commons-vfs2-2.6.0.jar /&#160;commons-vfs2-2.5.0.jar&lt;/li&gt;
	&lt;li&gt;commons-vfs2-jackrabbit2-2.5.0.jar&lt;/li&gt;
	&lt;li&gt;jackrabbit-webdav-2.20.0.jar&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Issue Log file (2.5.0 + Server X):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;25 Mar, 20:00:37,825 INFO  main [SftpClientFactory$JSchLogger.log()] [65017ms] Connection established
25 Mar, 20:00:38,013 INFO  main [SftpClientFactory$JSchLogger.log()] [65205ms] Remote version string: SSH-2.0-ProVide
25 Mar, 20:00:38,017 INFO  main [SftpClientFactory$JSchLogger.log()] [65209ms] Local version string: SSH-2.0-JSCH-0.1.52

 ...snip...

25 Mar, 20:01:02,802 INFO  main [SftpClientFactory$JSchLogger.log()] [89994ms] kex: server-&amp;gt;client aes128-ctr hmac-md5 none
25 Mar, 20:01:02,809 INFO  main [SftpClientFactory$JSchLogger.log()] [90001ms] kex: client-&amp;gt;server aes128-ctr hmac-md5 none
25 Mar, 20:01:06,359 INFO  main [SftpClientFactory$JSchLogger.log()] [93551ms] SSH_MSG_KEXDH_INIT sent
25 Mar, 20:01:06,363 INFO  main [SftpClientFactory$JSchLogger.log()] [93555ms] expecting SSH_MSG_KEXDH_REPLY
25 Mar, 20:01:10,410 INFO  main [SftpClientFactory$JSchLogger.log()] [97602ms] ssh_rsa_verify: signature true
25 Mar, 20:01:10,427 WARN  main [SftpClientFactory$JSchLogger.log()] [97619ms] Permanently added &apos;mask.mask.mask&apos; (RSA) to the list of known hosts.
25 Mar, 20:01:10,438 INFO  main [SftpClientFactory$JSchLogger.log()] [97630ms] SSH_MSG_NEWKEYS sent
25 Mar, 20:01:10,625 INFO  main [SftpClientFactory$JSchLogger.log()] [97817ms] SSH_MSG_NEWKEYS received
25 Mar, 20:01:10,709 INFO  main [SftpClientFactory$JSchLogger.log()] [97901ms] SSH_MSG_SERVICE_REQUEST sent
25 Mar, 20:01:10,897 INFO  main [SftpClientFactory$JSchLogger.log()] [98089ms] SSH_MSG_SERVICE_ACCEPT received
25 Mar, 20:01:11,098 INFO  main [SftpClientFactory$JSchLogger.log()] [98290ms] Authentications that can continue: publickey,keyboard-interactive,password
25 Mar, 20:01:11,102 INFO  main [SftpClientFactory$JSchLogger.log()] [98294ms] Next authentication method: publickey
25 Mar, 20:01:11,114 INFO  main [SftpClientFactory$JSchLogger.log()] [98306ms] Authentications that can continue: password
25 Mar, 20:01:11,119 INFO  main [SftpClientFactory$JSchLogger.log()] [98311ms] Next authentication method: password
25 Mar, 20:01:11,735 INFO  main [SftpClientFactory$JSchLogger.log()] [98927ms] Authentication succeeded (password).&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Issue Log file (2.6.0 + Server X):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;26 Mar, 09:42:07,781 INFO  main [SftpClientFactory$JSchLogger.log()] [20400ms] Connection established
26 Mar, 09:42:07,971 INFO  main [SftpClientFactory$JSchLogger.log()] [20590ms] Remote version string: SSH-2.0-ProVide
26 Mar, 09:42:07,975 INFO  main [SftpClientFactory$JSchLogger.log()] [20594ms] Local version string: SSH-2.0-JSCH-0.1.52

 ...snip...

26 Mar, 09:42:33,250 INFO  main [SftpClientFactory$JSchLogger.log()] [45869ms] kex: server-&amp;gt;client aes128-ctr hmac-md5 none
26 Mar, 09:42:33,258 INFO  main [SftpClientFactory$JSchLogger.log()] [45877ms] kex: client-&amp;gt;server aes128-ctr hmac-md5 none
26 Mar, 09:42:36,710 INFO  main [SftpClientFactory$JSchLogger.log()] [49329ms] SSH_MSG_KEXDH_INIT sent
26 Mar, 09:42:36,716 INFO  main [SftpClientFactory$JSchLogger.log()] [49335ms] expecting SSH_MSG_KEXDH_REPLY
26 Mar, 09:42:40,635 INFO  main [SftpClientFactory$JSchLogger.log()] [53254ms] ssh_rsa_verify: signature true
26 Mar, 09:42:40,653 INFO  main [SftpClientFactory$JSchLogger.log()] [53272ms] Host &apos;mask.mask.mask&apos; is known and matches the RSA host key
26 Mar, 09:42:40,660 INFO  main [SftpClientFactory$JSchLogger.log()] [53279ms] SSH_MSG_NEWKEYS sent
26 Mar, 09:42:40,845 INFO  main [SftpClientFactory$JSchLogger.log()] [53464ms] SSH_MSG_NEWKEYS received
26 Mar, 09:42:40,953 INFO  main [SftpClientFactory$JSchLogger.log()] [53572ms] SSH_MSG_SERVICE_REQUEST sent
26 Mar, 09:42:41,153 INFO  main [SftpClientFactory$JSchLogger.log()] [53772ms] SSH_MSG_SERVICE_ACCEPT received
26 Mar, 09:42:41,356 INFO  main [SftpClientFactory$JSchLogger.log()] [53975ms] Authentications that can continue: publickey,keyboard-interactive,password
26 Mar, 09:42:41,359 INFO  main [SftpClientFactory$JSchLogger.log()] [53978ms] Next authentication method: publickey
26 Mar, 09:42:41,370 INFO  main [SftpClientFactory$JSchLogger.log()] [53989ms] Authentications that can continue: password
26 Mar, 09:42:41,374 INFO  main [SftpClientFactory$JSchLogger.log()] [53993ms] Next authentication method: password
26 Mar, 09:42:42,388 INFO  main [SftpClientFactory$JSchLogger.log()] [55007ms] Authentication succeeded (password).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Additional Important Notes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;commons-vfs2-2.4.1.jar works&lt;/li&gt;
	&lt;li&gt;issues can only be reproduced on certain sftp servers&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Non issue log file (2.4.1 + Server X):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;26 Mar, 09:56:29,747 INFO  main [SftpClientFactory$JSchLogger.log()] [25083ms] Connection established
26 Mar, 09:56:29,948 INFO  main [SftpClientFactory$JSchLogger.log()] [25284ms] Remote version string: SSH-2.0-ProVide
26 Mar, 09:56:29,961 INFO  main [SftpClientFactory$JSchLogger.log()] [25297ms] Local version string: SSH-2.0-JSCH-0.1.52

 ...snip...

26 Mar, 09:56:57,870 INFO  main [SftpClientFactory$JSchLogger.log()] [53206ms] kex: server-&amp;gt;client aes128-ctr hmac-md5 none
26 Mar, 09:56:57,874 INFO  main [SftpClientFactory$JSchLogger.log()] [53210ms] kex: client-&amp;gt;server aes128-ctr hmac-md5 none
26 Mar, 09:57:01,314 INFO  main [SftpClientFactory$JSchLogger.log()] [56650ms] SSH_MSG_KEXDH_INIT sent
26 Mar, 09:57:01,318 INFO  main [SftpClientFactory$JSchLogger.log()] [56654ms] expecting SSH_MSG_KEXDH_REPLY
26 Mar, 09:57:05,237 INFO  main [SftpClientFactory$JSchLogger.log()] [60573ms] ssh_rsa_verify: signature true
26 Mar, 09:57:05,253 INFO  main [SftpClientFactory$JSchLogger.log()] [60589ms] Host &apos;mask.mask.mask&apos; is known and matches the RSA host key
26 Mar, 09:57:05,258 INFO  main [SftpClientFactory$JSchLogger.log()] [60594ms] SSH_MSG_NEWKEYS sent
26 Mar, 09:57:05,444 INFO  main [SftpClientFactory$JSchLogger.log()] [60780ms] SSH_MSG_NEWKEYS received
26 Mar, 09:57:05,526 INFO  main [SftpClientFactory$JSchLogger.log()] [60862ms] SSH_MSG_SERVICE_REQUEST sent
26 Mar, 09:57:05,713 INFO  main [SftpClientFactory$JSchLogger.log()] [61049ms] SSH_MSG_SERVICE_ACCEPT received
26 Mar, 09:57:05,911 INFO  main [SftpClientFactory$JSchLogger.log()] [61247ms] Authentications that can continue: publickey,keyboard-interactive,password
26 Mar, 09:57:05,915 INFO  main [SftpClientFactory$JSchLogger.log()] [61251ms] Next authentication method: publickey
26 Mar, 09:57:05,927 INFO  main [SftpClientFactory$JSchLogger.log()] [61263ms] Authentications that can continue: password
26 Mar, 09:57:05,931 INFO  main [SftpClientFactory$JSchLogger.log()] [61267ms] Next authentication method: password
26 Mar, 09:57:06,567 INFO  main [SftpClientFactory$JSchLogger.log()] [61903ms] Authentication succeeded (password).&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Non issue log file (2.6.0 + Server A):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;26 Mar, 09:47:39,035 INFO  main [SftpClientFactory$JSchLogger.log()] [1778ms] Connection established
26 Mar, 09:47:39,045 INFO  main [SftpClientFactory$JSchLogger.log()] [1788ms] Remote version string: SSH-2.0-OpenSSH_6.2
26 Mar, 09:47:39,045 INFO  main [SftpClientFactory$JSchLogger.log()] [1788ms] Local version string: SSH-2.0-JSCH-0.1.52

 ...snip...

26 Mar, 09:47:41,603 INFO  main [SftpClientFactory$JSchLogger.log()] [4346ms] kex: server-&amp;gt;client aes128-ctr hmac-md5 none
26 Mar, 09:47:41,604 INFO  main [SftpClientFactory$JSchLogger.log()] [4347ms] kex: client-&amp;gt;server aes128-ctr hmac-md5 none
26 Mar, 09:47:41,607 INFO  main [SftpClientFactory$JSchLogger.log()] [4350ms] SSH_MSG_KEXDH_INIT sent
26 Mar, 09:47:41,607 INFO  main [SftpClientFactory$JSchLogger.log()] [4350ms] expecting SSH_MSG_KEXDH_REPLY
26 Mar, 09:47:41,615 INFO  main [SftpClientFactory$JSchLogger.log()] [4358ms] ssh_rsa_verify: signature true
26 Mar, 09:47:41,616 INFO  main [SftpClientFactory$JSchLogger.log()] [4359ms] Host &apos;mask.mask.mask&apos; is known and matches the RSA host key
26 Mar, 09:47:41,616 INFO  main [SftpClientFactory$JSchLogger.log()] [4359ms] SSH_MSG_NEWKEYS sent
26 Mar, 09:47:41,616 INFO  main [SftpClientFactory$JSchLogger.log()] [4359ms] SSH_MSG_NEWKEYS received
26 Mar, 09:47:41,621 INFO  main [SftpClientFactory$JSchLogger.log()] [4364ms] SSH_MSG_SERVICE_REQUEST sent
26 Mar, 09:47:41,621 INFO  main [SftpClientFactory$JSchLogger.log()] [4364ms] SSH_MSG_SERVICE_ACCEPT received
26 Mar, 09:47:41,626 INFO  main [SftpClientFactory$JSchLogger.log()] [4369ms] Authentications that can continue: publickey,keyboard-interactive,password
26 Mar, 09:47:41,626 INFO  main [SftpClientFactory$JSchLogger.log()] [4369ms] Next authentication method: publickey
26 Mar, 09:47:41,627 INFO  main [SftpClientFactory$JSchLogger.log()] [4370ms] Authentications that can continue: keyboard-interactive,password
26 Mar, 09:47:41,627 INFO  main [SftpClientFactory$JSchLogger.log()] [4370ms] Next authentication method: keyboard-interactive
26 Mar, 09:47:41,635 INFO  main [SftpClientFactory$JSchLogger.log()] [4378ms] Authentication succeeded (keyboard-interactive).&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13293810">VFS-766</key>
            <summary>SftpClientFactory hangs at FileSystemManager.resolveFile(...)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jasper.teng">Jasper Teng</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Mar 2020 13:03:20 +0000</created>
                <updated>Sat, 2 Apr 2022 12:18:27 +0000</updated>
                            <resolved>Sun, 6 Sep 2020 13:50:37 +0000</resolved>
                                    <version>2.5.0</version>
                    <version>2.6.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="17066665" author="garydgregory" created="Wed, 25 Mar 2020 13:13:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasper.teng&quot; class=&quot;user-hover&quot; rel=&quot;jasper.teng&quot;&gt;jasper.teng&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please try version 2.6.0.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17067290" author="jasper.teng" created="Thu, 26 Mar 2020 01:53:38 +0000"  >&lt;p&gt;Tested. Also not working.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17067301" author="jasper.teng" created="Thu, 26 Mar 2020 02:13:29 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Codes that can be used to reproduce issue on 2.6.0.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; usr = &lt;span class=&quot;code-quote&quot;&gt;&quot;myuser&quot;&lt;/span&gt;;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pwd = &lt;span class=&quot;code-quote&quot;&gt;&quot;mypass&quot;&lt;/span&gt;;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url = &lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//mask.mask.mask:22&quot;&lt;/span&gt;; 
&lt;/span&gt;
FileSystemManager fsManager = VFS.getManager();
FileSystemOptions fsOptions = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
StaticUserAuthenticator auth = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StaticUserAuthenticator(&quot;&quot;, usr, pwd);
DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(fsOptions, auth);
SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(fsOptions, &lt;span class=&quot;code-quote&quot;&gt;&quot;no&quot;&lt;/span&gt;);
SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(fsOptions, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
URI uri = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(url);

FileObject vfsFile = fsManager.resolveFile(uri.toString(), fsOptions);
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; should print, but it doesn&apos;t&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17085415" author="texasaggie" created="Fri, 17 Apr 2020 04:04:28 +0000"  >&lt;p&gt;Using 2.6 and JSch 0.1.55&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I had this same issue and was able to narrow it down to JSch usage under the covers in my situation. In org.apache.commons.vfs2.provider.sftp.SftpFileSystem, the constructor has a call to detectExecDisabled(), which attempts to use the exec channel to determine if it is enabled and calls getUid(). getUid() attempts to execute &quot;id -u&quot; and get the response. In my case, this is where it hung up (confirmed on an RHEL server and locally in Windows running in the Eclipse debugger).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;My organization normally locks down sftp accounts so that they do not have interactive login capabilities. Every time I try with one of these accounts, I get past password negotiation and then hang at this point. When I switched to my normal login on the same server that does have interactive access, it worked just fine and there was no delay.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have been digging around in the source looking for a toggle/default way to set execDisabled without having to make a call. I went so far as to clone the code temporarily, hardcode the boolean to false and remove the call and re-ran it. Lo and behold, it worked.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I can&apos;t say that this is related but the symptoms are the same. I would love to contribute some mechanism to either skip the exec check or force a default to false for cases where I know the exec channel is disabled. Since I&apos;m new to the codebase, not sure where to being here or what the best way might be.&lt;/p&gt;</comment>
                            <comment id="17085719" author="garydgregory" created="Fri, 17 Apr 2020 13:00:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=texasaggie&quot; class=&quot;user-hover&quot; rel=&quot;texasaggie&quot;&gt;texasaggie&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The best path IMO is to Fork our GitHub repository (git master branch), clone it locally and offer up a PR. Two items to keep in mind: First, don&apos;t break binary compatibility which should not be an issue for this issue. Second, providing a test can be challenging but possible since a lot of tests embed and manage their own servers.&lt;/p&gt;

&lt;p&gt;Each provider can be its own world of details and complexity so hopefully someone will be available here or on the dev ML to help (&lt;a href=&quot;https://commons.apache.org/mail-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/mail-lists.html&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17132895" author="menukad" created="Thu, 11 Jun 2020 03:59:08 +0000"  >&lt;p&gt;I had the same issue after I upgraded from 2.0 to 2.6.0 version.&#160;&lt;/p&gt;</comment>
                            <comment id="17133234" author="garydgregory" created="Thu, 11 Jun 2020 12:53:26 +0000"  >&lt;p&gt;Feel free to provide a PR on GitHub.&lt;/p&gt;</comment>
                            <comment id="17136054" author="manishbansal8843" created="Mon, 15 Jun 2020 17:29:33 +0000"  >&lt;p&gt;Same issue. I upgraded from 2.2 to 2.6 along with some intricate application changes. And when we observed sftp hanging, it gave us all mini cardiac arrest. Luckily the I had an epiphany and tried lower version of library and it worked.&lt;/p&gt;

&lt;p&gt;&#160;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=texasaggie&quot; class=&quot;user-hover&quot; rel=&quot;texasaggie&quot;&gt;texasaggie&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Are you going to work on this? If not, would like to pick it up.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Manish&#160;&lt;/p&gt;</comment>
                            <comment id="17137916" author="texasaggie" created="Tue, 16 Jun 2020 20:40:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=manishbansal8843&quot; class=&quot;user-hover&quot; rel=&quot;manishbansal8843&quot;&gt;manishbansal8843&lt;/a&gt; I have not started on making changes, so please do. If you want someone to test it, let me know.&lt;/p&gt;</comment>
                            <comment id="17156033" author="manishbansal8843" created="Sat, 11 Jul 2020 15:51:12 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=texasaggie&quot; class=&quot;user-hover&quot; rel=&quot;texasaggie&quot;&gt;texasaggie&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I was going through the code again. Won&apos;t this PR will fix this issue?&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/80&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I mean things have been made configurable here. Same is code is not present in 2.6.0 release. So i believe it will get fixed in next release.&lt;/p&gt;</comment>
                            <comment id="17156340" author="manishbansal8843" created="Sun, 12 Jul 2020 16:54:42 +0000"  >&lt;p&gt;Hi All,&lt;/p&gt;

&lt;p&gt;Just an update. I have tested 2.7.0-SNAPSHOT for this issue after disabling exec call. No issues found.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17157150" author="texasaggie" created="Tue, 14 Jul 2020 05:10:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=manishbansal8843&quot; class=&quot;user-hover&quot; rel=&quot;manishbansal8843&quot;&gt;manishbansal8843&lt;/a&gt;In reviewing the changes, I agree that it will fix it. Thanks for catching that. I&apos;ll see about pulling the snapshot in the meantime.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17163872" author="azavrin" created="Thu, 23 Jul 2020 19:02:02 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;is there an estimate for when 2.7 goes production? This bug is causing us a lot of production grade grief.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17163880" author="garydgregory" created="Thu, 23 Jul 2020 19:08:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azavrin&quot; class=&quot;user-hover&quot; rel=&quot;azavrin&quot;&gt;azavrin&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is a volunteer based free and open source project with no schedule beyond the good will and intentions of its contributors &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;That said, I am managing the release of various components here and there so I&apos;ll add this one to my growing to-do list.&lt;/p&gt;</comment>
                            <comment id="17164536" author="azavrin" created="Fri, 24 Jul 2020 17:02:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;- much appreciate your input and response here.&lt;/p&gt;

&lt;p&gt;I will be checking in here periodically, we are truly hopeful that this release will resolve our issue!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks again&lt;/p&gt;</comment>
                            <comment id="17177243" author="azavrin" created="Thu, 13 Aug 2020 18:22:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, hope all is well. Any plans to have new version released soon?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you&lt;/p&gt;</comment>
                            <comment id="17177279" author="garydgregory" created="Thu, 13 Aug 2020 19:02:12 +0000"  >&lt;p&gt;I can shoot for the end of the month.&lt;/p&gt;</comment>
                            <comment id="17185474" author="azavrin" created="Wed, 26 Aug 2020 20:53:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;Hi Gary, how is it looking at this point of time? Will we have redemption at the end of&#160; the month &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you&#160;&lt;/p&gt;</comment>
                            <comment id="17189608" author="azavrin" created="Wed, 2 Sep 2020 18:08:34 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, any news?&lt;/p&gt;</comment>
                            <comment id="17189676" author="garydgregory" created="Wed, 2 Sep 2020 19:49:40 +0000"  >&lt;p&gt;Maybe next week or the following.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17190405" author="azavrin" created="Thu, 3 Sep 2020 21:51:19 +0000"  >&lt;p&gt;ouch..&lt;/p&gt;</comment>
                            <comment id="17190766" author="rubensa" created="Fri, 4 Sep 2020 15:06:36 +0000"  >&lt;p&gt;I ended downgrading from version 2.6.0 to version 2.4.1 waiting for version 2.7.0 to be released.&lt;/p&gt;</comment>
                            <comment id="17191276" author="garydgregory" created="Sun, 6 Sep 2020 13:50:38 +0000"  >&lt;p&gt;Resolving for 2.7.0 per &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-766?focusedCommentId=17156340&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17156340&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS-766?focusedCommentId=17156340&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17156340&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17195602" author="azavrin" created="Mon, 14 Sep 2020 16:57:40 +0000"  >&lt;p&gt;Thanks much &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, would you have any insight as to when we can expect the actual jar in here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repo1.maven.org/maven2/org/apache/commons/commons-vfs2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo1.maven.org/maven2/org/apache/commons/commons-vfs2/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;?&lt;/p&gt;</comment>
                            <comment id="17201343" author="rubensa" created="Thu, 24 Sep 2020 07:53:22 +0000"  >&lt;p&gt;Looks like version 2.7.0 is not released yet (so It&apos;s not in maven repo yet).&lt;/p&gt;</comment>
                            <comment id="17201585" author="azavrin" created="Thu, 24 Sep 2020 15:23:17 +0000"  >&lt;p&gt;does anyone know or have a page where release dates are being discussed/tracked ?&lt;/p&gt;</comment>
                            <comment id="17201591" author="b.eckenfels" created="Thu, 24 Sep 2020 15:31:54 +0000"  >&lt;p&gt;Release matters are discussed on the developers mailing list. There are no fixed release schedules, it depends on volunteer availability. Historic dates should be visible in the changes.xml metadata inside the repository &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/master/src/changes/changes.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/master/src/changes/changes.xml&lt;/a&gt; some stuff is also in the wiki but not very active as the canonical release happens on the distribution servers and is announced by the mailing list.&lt;/p&gt;</comment>
                            <comment id="17516052" author="JIRAUSER287473" created="Fri, 1 Apr 2022 17:58:48 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt; &#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I am not seeing &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-766&quot; title=&quot;SftpClientFactory hangs at FileSystemManager.resolveFile(...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-766&quot;&gt;&lt;del&gt;VFS-766&lt;/del&gt;&lt;/a&gt; in the list of fixed bugs though it shows fixed in JIRA. Just need confirmation the fix made it to commons-vfs2&#160; / 2.9.0 as we are seeing the hang with version 2.9.0 / StandardFileSystemManager&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/blob/master/src/changes/changes.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/master/src/changes/changes.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Can someone volunteer to please merge the fix ? It is blocking a project. Appreciate all the help.&lt;/p&gt;</comment>
                            <comment id="17516281" author="garydgregory" created="Sat, 2 Apr 2022 12:18:27 +0000"  >&lt;p&gt;Hello all,&lt;/p&gt;

&lt;p&gt;The PR &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/80&lt;/a&gt; was merged as documented in this ticket in an earlier comment. You might have to try to use the different values for DISABLE_DETECT_EXEC_CHANEL to see if that helps your use case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0cw1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-765] [webdav][tests] jackrabit1 module webdav tests fail with IllegalStateException on java 15-ea</title>
                <link>https://issues.apache.org/jira/browse/VFS-765</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The tests of the kackrabit1 module fail on Travis-CI when using java 15-ea builds:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Running org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase&lt;/tt&gt;&lt;br/&gt;
{{ 4826SLF4J: Class path contains multiple SLF4J bindings.}}&lt;br/&gt;
{{ 4827SLF4J: Found binding in &lt;span class=&quot;error&quot;&gt;&amp;#91;jar:file:/home/travis/.m2/repository/org/slf4j/slf4j-log4j12/1.5.11/slf4j-log4j12-1.5.11.jar!/org/slf4j/impl/StaticLoggerBinder.class&amp;#93;&lt;/span&gt;}}&lt;br/&gt;
{{ 4828SLF4J: Found binding in &lt;span class=&quot;error&quot;&gt;&amp;#91;jar:file:/home/travis/.m2/repository/org/apache/jackrabbit/jackrabbit-standalone/1.6.5/jackrabbit-standalone-1.6.5.jar!/org/slf4j/impl/StaticLoggerBinder.class&amp;#93;&lt;/span&gt;}}&lt;br/&gt;
{{ 4829SLF4J: See &lt;a href=&quot;http://www.slf4j.org/codes.html#multiple_bindings&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.slf4j.org/codes.html#multiple_bindings&lt;/a&gt; for an explanation.}}&lt;br/&gt;
{{ 4830Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 4.282 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase}}&lt;br/&gt;
{{ 4831junit.framework.TestSuite@5c73f672(org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase$1) Time elapsed: 4.282 sec &amp;lt;&amp;lt;&amp;lt; ERROR!}}&lt;br/&gt;
{{ 4832java.lang.IllegalStateException: Not initialized}}&lt;br/&gt;
{{ 4833 at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase$1.setUp(WebdavProviderTestCase.java:244)}}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;This is fixed by&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/87&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/87&lt;/a&gt;&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13286999">VFS-765</key>
            <summary>[webdav][tests] jackrabit1 module webdav tests fail with IllegalStateException on java 15-ea</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Feb 2020 16:54:46 +0000</created>
                <updated>Sat, 27 Nov 2021 13:08:52 +0000</updated>
                            <resolved>Sat, 27 Nov 2021 13:08:10 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="17449833" author="garydgregory" created="Sat, 27 Nov 2021 13:08:38 +0000"  >&lt;p&gt;The build currently passes on GitHub with Java 8, 11, and 17.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13286998">VFS-764</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bsc8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-764] [webdav][tests] testing fails on java 15-ea with travis</title>
                <link>https://issues.apache.org/jira/browse/VFS-764</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description></description>
                <environment></environment>
        <key id="13286998">VFS-764</key>
            <summary>[webdav][tests] testing fails on java 15-ea with travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Feb 2020 16:50:40 +0000</created>
                <updated>Sat, 22 Feb 2020 17:09:44 +0000</updated>
                            <resolved>Sat, 22 Feb 2020 17:07:19 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13286999">VFS-765</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bsc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-759] WebDAV providers should loaded only when commons-vfs2-jackrabbit* jars are available</title>
                <link>https://issues.apache.org/jira/browse/VFS-759</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In corner cases, VFS loading may fail totally due to webdav provider loading issues.&lt;/p&gt;

&lt;p&gt;One corner case reported by Xeno Amess &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The (a) webdav4(s) file system providers requires (b) jackrabbit-webdav jar, which requires (c) httpclient4 library.&lt;/li&gt;
	&lt;li&gt;The standard providers.xml checks classes from (b) and (c) only, so if (a) doesn&apos;t exist in the system, the VFS core library fails to load itself.&lt;br/&gt;
  For example, the reporter found out that versions-maven-plugin pulls in (b) and (c).&lt;br/&gt;
  So, when the VFS core is only used in their system, it just fails because it does not have (a).&lt;/li&gt;
	&lt;li&gt;A workaround is to just install commons-vfs2-jackrabbit* jar as well in the system.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It would be cleaner if the standard providers.xml checked a class in (a) as well, to avoid this kind of problems.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://lists.apache.org/thread.html/rbe64575979ef5f6a677e301d109dbea81c81ba82db556128fe917986%40%3Cdev.commons.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/rbe64575979ef5f6a677e301d109dbea81c81ba82db556128fe917986%40%3Cdev.commons.apache.org%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13285651">VFS-759</key>
            <summary>WebDAV providers should loaded only when commons-vfs2-jackrabbit* jars are available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="woonsan">Woonsan Ko</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Feb 2020 21:59:06 +0000</created>
                <updated>Fri, 16 Jul 2021 12:32:40 +0000</updated>
                            <resolved>Fri, 16 Jul 2021 12:32:40 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="17037988" author="woonsan" created="Sun, 16 Feb 2020 22:16:05 +0000"  >&lt;p&gt;Please see the PR: &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/84&lt;/a&gt;&lt;br/&gt;
I think it is simpler and safer just to check if a provider-specific class is available as well because (a) this solution is more provider-specific without any other unnecessary changes in core, and (b) we don&apos;t need to abandon &quot;fail-fast&quot; behavior by checking provider class&apos;s availability itself.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bk0w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-758] Webdav4s provider does not make https requests</title>
                <link>https://issues.apache.org/jira/browse/VFS-758</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Reported by &lt;a href=&quot;https://github.com/ddg-igh:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ddg-igh:&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/81&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;
&lt;p&gt;When using webdav4s the requests will be send as &quot;http&quot; and not &quot;https&quot;.&lt;br/&gt;
So this will always fail when the webdav server does not allow &quot;http&quot; requests.&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was also able to reproduce through shell:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ cd commons-vfs2-examples
$ mvn -Pshell -Dwebdav4
VFS Shell null
cd webdav4s://localhost
Command failed:
...
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused (Connection refused)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;which shows that it makes an http (port 80), not https (port 443).&lt;/li&gt;
	&lt;li&gt;it should have made &lt;b&gt;https&lt;/b&gt; requests for &apos;webdav4s&apos;.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13285367">VFS-758</key>
            <summary>Webdav4s provider does not make https requests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="woonsan">Woonsan Ko</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Feb 2020 16:14:24 +0000</created>
                <updated>Sat, 31 Oct 2020 23:53:49 +0000</updated>
                            <resolved>Sat, 31 Oct 2020 23:53:49 +0000</resolved>
                                    <version>2.6.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="17037913" author="woonsan" created="Sun, 16 Feb 2020 18:44:04 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I think this will be fixed by &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/83&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Basically this issue was caused by the hard-coded &quot;http&quot; in &lt;tt&gt;Webdav4FileObject#toUrlString(GenericURLFileName, boolean)&lt;/tt&gt;, by which some webdav specific http invocation is done by resolving &quot;internal&quot; http(s) urls.&lt;br/&gt;
As all &lt;tt&gt;Http4FileObject&lt;/tt&gt; objects have an internally-resolved URLs, converted from logical url names to physical ones, the code should have simply used &lt;tt&gt;#getInternalURI().getScheme()&lt;/tt&gt; instead of the hard-coded one.&lt;br/&gt;
I&apos;ve also added unit tests for the simple http/https url checking in http4, http5 and webdav4.&lt;/p&gt;

&lt;p&gt;Using the shell test, I now see http (443) being invoked too.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="17224202" author="woonsan" created="Sat, 31 Oct 2020 23:01:42 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I think you can close this as duplicated by &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-783&quot; title=&quot;WEBDAV4 GenericURLFileName hardcoded scheme(&amp;quot;http&amp;quot;) won&amp;#39;t work for https connection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-783&quot;&gt;&lt;del&gt;VFS-783&lt;/del&gt;&lt;/a&gt; which has active PRs. (I&apos;ve closed the PR #83 linked here).&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="17224205" author="garydgregory" created="Sat, 31 Oct 2020 23:53:49 +0000"  >&lt;p&gt;Closing as requested.&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13325228">VFS-783</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bi9s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-753] NumberFormatException in SftpFileSystem::getUId</title>
                <link>https://issues.apache.org/jira/browse/VFS-753</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When calling&#160;FileSystemManager::resolveFile(...) connecting to a specific sftp server a NumberFormat exception is thrown and a FileObject is not returned.&lt;/p&gt;

&lt;p&gt;When the&#160;SftpFileSystem constructor is called there is a call to&#160;detectExecDisabled which in turn calls getUid.&#160;SftpFileSystem::getUId assumes that executeCommand(...) will always return non zero (the channel exit status) for execution failure.&lt;/p&gt;

&lt;p&gt;In the case of the sftp server that we are connecting to, the channel exit status remains zero however the returned buffer contains the string &quot;This server does not provide shell access, only SFTP. Goodbye.&quot;. This causes a NumberFormatException in getUId.&lt;/p&gt;

&lt;p&gt;This behaviour does not occur in version 2.4.1&lt;/p&gt;

&lt;p&gt;Here is the relevent snippet from the stack trace:&lt;br/&gt;
java.lang.NumberFormatException: For input string: &quot;This server does not provide shell access, only SFTP. Goodbye.&quot;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at java.lang.Integer.parseInt(Integer.java:580)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at java.lang.Integer.parseInt(Integer.java:615)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getUId(SftpFileSystem.java:281)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.detectExecDisabled(SftpFileSystem.java:344)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.&amp;lt;init&amp;gt;(SftpFileSystem.java:94)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.doCreateFileSystem(SftpFileProvider.java:93)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:93)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:72)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:56)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:717)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:654)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at com.shortcuts.lambda.google_reserve_sftp.util.SFTPUtil.ls(SFTPUtil.java:68)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at com.shortcuts.lambda.google_reserve_sftp.util.SFTPUtilTest.testConnectToGoogle(SFTPUtilTest.java:48)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13283379">VFS-753</key>
            <summary>NumberFormatException in SftpFileSystem::getUId</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="JohnWebb">John Webb</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Feb 2020 06:12:30 +0000</created>
                <updated>Fri, 7 Feb 2020 03:18:11 +0000</updated>
                            <resolved>Wed, 5 Feb 2020 15:40:18 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17030747" author="garydgregory" created="Wed, 5 Feb 2020 15:40:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JohnWebb&quot; class=&quot;user-hover&quot; rel=&quot;JohnWebb&quot;&gt;JohnWebb&lt;/a&gt;&lt;br/&gt;
Thank you for your report.&lt;/p&gt;

&lt;p&gt;Please try the latest from git or a snapshot build from&#160;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17031078" author="johnwebb" created="Wed, 5 Feb 2020 22:07:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I suspect the fix has the side effect of telling the class that execution is enabled on the server when it isn&apos;t. detectExecDisabled relies on a throw to return true however the fix simply catches and logs. I obviously don&apos;t know the code as well as you but worry that a false negative from&#160;detectExecDisabled may lead to undesirable behaviour.&lt;/p&gt;</comment>
                            <comment id="17031103" author="garydgregory" created="Wed, 5 Feb 2020 22:52:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JohnWebb&quot; class=&quot;user-hover&quot; rel=&quot;JohnWebb&quot;&gt;JohnWebb&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I adjusted the test in &lt;tt&gt;detectExecDisabled&lt;/tt&gt; to check for a return value from&#160;&lt;tt&gt;getUId()&lt;/tt&gt; that corresponds to the internal call having failed.&lt;/p&gt;

&lt;p&gt;If you can think of something better, please provide a PR on GitHub. If you think this fix is still too risky, I can back it out.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17031112" author="johnwebb" created="Wed, 5 Feb 2020 23:11:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The new test in&#160;&lt;tt&gt;detectExecDisabled&lt;/tt&gt;&#160;looks good to me.&lt;/p&gt;

&lt;p&gt;Thanks for you help mate.&lt;/p&gt;</comment>
                            <comment id="17031182" author="garydgregory" created="Thu, 6 Feb 2020 01:39:35 +0000"  >&lt;p&gt;YW. Please make a note here if this addresses your issue in your actual testing (beyond reviewing in the code.)&lt;/p&gt;</comment>
                            <comment id="17032078" author="johnwebb" created="Fri, 7 Feb 2020 03:11:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I downloaded&#160;commons-vfs2-2.6.1-20200205.225124-2.jar and built and tested against this. Works fine.&lt;/p&gt;</comment>
                            <comment id="17032082" author="garydgregory" created="Fri, 7 Feb 2020 03:16:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JohnWebb&quot; class=&quot;user-hover&quot; rel=&quot;JohnWebb&quot;&gt;JohnWebb&lt;/a&gt;&#160;Great, thanks for the update.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b5zs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-752] AbstractFileProvider close should close all fileSystems before clearing the cache</title>
                <link>https://issues.apache.org/jira/browse/VFS-752</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The close method of AbstractFileProvider currently only clears the cache of FileSystem references without closing them first. This can cause open connections (e.g. with the SFTPProvider) if each FileSystem&#160; is not explicitly closed via closeFileSystem. This is a bit error prone.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13278130">VFS-752</key>
            <summary>AbstractFileProvider close should close all fileSystems before clearing the cache</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="harald.kuhn@gmail.com">Harald Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2020 10:42:26 +0000</created>
                <updated>Wed, 8 Jan 2020 16:28:12 +0000</updated>
                                            <version>2.5.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17010563" author="harald.kuhn@gmail.com" created="Wed, 8 Jan 2020 10:44:04 +0000"  >&lt;p&gt;A possible fix would be to call closeFileSystem for every FileSystem in the cache inside the close method.&lt;/p&gt;</comment>
                            <comment id="17010651" author="garydgregory" created="Wed, 8 Jan 2020 12:40:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=harald.kuhn%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;harald.kuhn@gmail.com&quot;&gt;harald.kuhn@gmail.com&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Feel free to provide a PR on GitHub that includes a unit test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17010803" author="b.eckenfels" created="Wed, 8 Jan 2020 16:23:06 +0000"  >&lt;p&gt;We might also need a different close method on FileObject, because the current one only closes the thread local part of file content and then forgets the filecontent so it can never be closed for the other threads.&lt;/p&gt;

&lt;p&gt;But I think this severity can be scaled down, it should be unlikely that the provider instead of the Filesystem is closed (because that would have a lot of splash damage in multithreaded apps).&lt;/p&gt;</comment>
                            <comment id="17010810" author="b.eckenfels" created="Wed, 8 Jan 2020 16:28:12 +0000"  >&lt;p&gt;(And i think the File Provider does close all of it&apos;s components, which is the file system, so maybe the problem is more in the (missing) close method of file systems?)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0aam8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-750] [2.5.0] AbstractFileObject is backwards-incompatible</title>
                <link>https://issues.apache.org/jira/browse/VFS-750</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;This is a show-stopper issue.&lt;/p&gt;

&lt;p&gt;This commit:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/commit/953aa407df78f0d10da54e29323d404cda3e4f6b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/commit/953aa407df78f0d10da54e29323d404cda3e4f6b&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Made the abstract (mandatory) method `doGetInputStream()` into a protected method that calls `doGetInputStream(int bufferSize)` which throws an exception.&lt;/p&gt;

&lt;p&gt;All current implementations implement only `doGetInputStream()` (because that was the API in `2.4.1`) which is actually not called anywhere in the class -&#160; only `doGetInputStream(int bufferSize)` is. This means that &lt;b&gt;ALL&lt;/b&gt; VFS plugins break on `2.5.0`.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13277264">VFS-750</key>
            <summary>[2.5.0] AbstractFileObject is backwards-incompatible</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="boris-petrov">Boris Petrov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jan 2020 20:20:47 +0000</created>
                <updated>Sun, 5 Jan 2020 15:29:52 +0000</updated>
                            <resolved>Sat, 4 Jan 2020 18:27:10 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17007102" author="garydgregory" created="Thu, 2 Jan 2020 21:56:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=boris-petrov&quot; class=&quot;user-hover&quot; rel=&quot;boris-petrov&quot;&gt;boris-petrov&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;May you provide a test case please?&lt;/p&gt;

&lt;p&gt;Doc:&#160;&lt;a href=&quot;https://commons.apache.org/proper/commons-vfs/commons-vfs2/japicmp.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-vfs/commons-vfs2/japicmp.html&lt;/a&gt;&#160;does not flag this as binary incompatible.&lt;/p&gt;</comment>
                            <comment id="17007108" author="boris-petrov" created="Thu, 2 Jan 2020 22:19:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; - well, just change in &quot;commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/ram/RamFileObject.java&quot; line 94 which says:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;protected InputStream doGetInputStream(final int bufferSize) throws Exception {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;protected InputStream doGetInputStream() throws Exception {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(as a 3rd party provider would have because it doesn&apos;t know of the method with the argument)&lt;br/&gt;
and then run &quot;mvn test -Dtest=RamProviderTestCase&quot; - you&apos;ll see the tests fail. Which is normal as VFS 2.5.0 never calls the method without the argument.&lt;/p&gt;

&lt;p&gt;P.S. The change is not binary-incompatible (because the method exists in the base type and is overridable) but is a breaking one because this method is no longer called by anything.&lt;/p&gt;</comment>
                            <comment id="17008114" author="garydgregory" created="Sat, 4 Jan 2020 18:26:37 +0000"  >&lt;p&gt;A fix is now in git master. Please verify and close.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0a5a0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-748] TarProvider Incorrectly marks file IMAGINARY after garbage collection with WeakRefFilesCache</title>
                <link>https://issues.apache.org/jira/browse/VFS-748</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;A Tar FileObject becomes unusable once it is removed from the filesCache.&#160; The example provided here uses the the WeakRefFilesCache but I suspect the bug is not limited to this cache type only, since it is the recreation of the entry after removal that is flawed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The following code snippet will repeatedly access the the tarball until garbage collection occurs.&#160; When this happens the cache entry is dropped but upon reaccess, a new cache entry is created that incorrectly marks the file as &quot;IMAGINARY&quot;.&#160; All subsequent access to this file is are not possible in the VM.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Output from the class provided looks like this....&lt;/p&gt;

&lt;p&gt;97&lt;br/&gt;
 98&lt;br/&gt;
 99&lt;br/&gt;
 100&lt;br/&gt;
 tgz:&lt;a href=&quot;file:///C:/env/ws/vfsTarBug/target/classes/test.tar.gz!/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///C:/env/ws/vfsTarBug/target/classes/test.tar.gz!/&lt;/a&gt; did not exist&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The number of successful iterations may vary depending upon the behavior of the GC.&lt;/p&gt;

&lt;p&gt;Tracing the run, the culprit appears to be a createFile method which hard codes the tarExists argument to false when it should be true.&#160; The stack trace for this appears below.&#160;&lt;/p&gt;

&lt;p&gt;at org.apache.commons.vfs2.provider.tar.TarFileSystem.createFile(TarFileSystem.java:210)at org.apache.commons.vfs2.provider.tar.TarFileSystem.createFile(TarFileSystem.java:210) &#160; at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile(AbstractFileSystem.java:320) &#160; - locked &amp;lt;0x53d2&amp;gt; (a org.apache.commons.vfs2.provider.tar.TarFileSystem) &#160; at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile(AbstractFileSystem.java:300) &#160; at org.apache.commons.vfs2.provider.AbstractFileSystem.getRoot(AbstractFileSystem.java:274) &#160; at org.apache.commons.vfs2.provider.AbstractLayeredFileProvider.createFileSystem(AbstractLayeredFileProvider.java:82) &#160; - locked &amp;lt;0x53e2&amp;gt; (a org.apache.commons.vfs2.provider.tar.TarFileProvider) &#160; at org.apache.commons.vfs2.provider.AbstractLayeredFileProvider.findFile(AbstractLayeredFileProvider.java:56) &#160; at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:711) &#160; at org.pentaho.di.core.vfs.ConcurrentFileSystemManager.resolveFile(ConcurrentFileSystemManager.java:91) &#160; at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:648)&lt;/p&gt;</description>
                <environment>&lt;p&gt;commons-vfs2.2.jar&lt;/p&gt;

&lt;p&gt;commons-compress-1.18.jar&lt;/p&gt;</environment>
        <key id="13272018">VFS-748</key>
            <summary>TarProvider Incorrectly marks file IMAGINARY after garbage collection with WeakRefFilesCache</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Kafalas">Tim</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Dec 2019 17:48:25 +0000</created>
                <updated>Mon, 2 Nov 2020 02:07:53 +0000</updated>
                            <resolved>Mon, 2 Nov 2020 02:07:52 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.8.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17001201" author="garydgregory" created="Fri, 20 Dec 2019 20:25:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Kafalas&quot; class=&quot;user-hover&quot; rel=&quot;Kafalas&quot;&gt;Kafalas&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;The best way forward here would be to provide a PR on GitHub which includes your test.&lt;/p&gt;</comment>
                            <comment id="17224108" author="garydgregory" created="Sat, 31 Oct 2020 16:03:38 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://github.com/PeterAlfredLee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;@PeterAlfredLee&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I could not apply this patch cleanly from a patch file for some reason, but I did bring in the changes with expanded tests. Please see git master and close this PR and&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-748&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS-748&lt;/a&gt;&#160;if all is well for your use case.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12987390" name="TarBug.java" size="1851" author="Kafalas" created="Tue, 3 Dec 2019 17:38:40 +0000"/>
                            <attachment id="12987389" name="test.tar.gz" size="101" author="Kafalas" created="Tue, 3 Dec 2019 17:39:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z098wo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-747] org.apache.commons.vfs2.FileSystemException: Could not determine if file &quot;sftp://!!!!!:***@XXXXX/C:/folder1&quot; is writeable.</title>
                <link>https://issues.apache.org/jira/browse/VFS-747</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Below simple code using moveTo Api from vfs2 use to work with&#160;commons-vfs2-2.0.jar but it doesn&#8217;t work with version commons-vfs2-2.2.jar&lt;/p&gt;

&lt;p&gt;it works perfectly fine with SFTP server running on LINUX, only it failse on SFTP server running on windows server.&lt;/p&gt;

&lt;p&gt;Please any suggestions.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;ls command show as below on both server:&lt;/p&gt;

&lt;p&gt;Windows :&lt;/p&gt;

&lt;p&gt;sftp&amp;gt; ls -l&lt;br/&gt;
 &lt;del&gt;rw-rw&lt;/del&gt;--- 1 no-user no-group 86 Nov 20 11:03 test.txt&lt;/p&gt;

&lt;p&gt;Linux:&lt;/p&gt;

&lt;p&gt;sftp&amp;gt; ls -l&lt;br/&gt;
 -rwxr-xr-x 1 userttest dba 86 Nov 20 11:05 test.txt&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Code sample:&lt;/p&gt;

&lt;p&gt;public static boolean move(String hostName, String username, String password, String remoteSrcFilePath, String remoteDestFilePath){&lt;br/&gt;
 StandardFileSystemManager manager = new StandardFileSystemManager();&lt;/p&gt;

&lt;p&gt;try {&lt;br/&gt;
 manager.init();&lt;/p&gt;

&lt;p&gt;// Create remote object&lt;br/&gt;
 FileObject remoteFile = manager.resolveFile(createConnectionString(hostName, username, password, remoteSrcFilePath), createDefaultOptions());&lt;br/&gt;
 FileObject remoteDestFile = manager.resolveFile(createConnectionString(hostName, username, password, remoteDestFilePath), createDefaultOptions());&lt;/p&gt;

&lt;p&gt;if (remoteFile.exists())&lt;/p&gt;
{ remoteFile.moveTo(remoteDestFile);; System.out.println(&quot;Move remote file success&quot;); return true; }
&lt;p&gt;else&lt;/p&gt;
{ System.out.println(&quot;Source file doesn&apos;t exist&quot;); return false; }
&lt;p&gt;} catch (Exception e)&lt;/p&gt;
{ throw new RuntimeException(e); }
&lt;p&gt;finally&lt;/p&gt;
{ manager.close(); }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Error:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO org.apache.commons.vfs2.provider.sftp.SftpClientFactory - Authentication succeeded (keyboard-interactive).&lt;br/&gt;
 &apos;id&apos; is not recognized as an internal or external command,&lt;br/&gt;
 operable program or batch file.&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO org.apache.commons.vfs2.provider.sftp.SftpClientFactory - Disconnecting from XXXXX port 22&lt;br/&gt;
 Exception in thread &quot;main&quot; java.lang.RuntimeException: org.apache.commons.vfs2.FileSystemException: Could not determine if file &quot;sftp://!!!!!:***@XXXXX/C:/folder1&quot; is writeable.&lt;br/&gt;
 at com.test.SFTPUtility.move(SFTPUtility.java:107)&lt;br/&gt;
 at com.test.SFTPUtility.main(SFTPUtility.java:35)&lt;br/&gt;
 Caused by: org.apache.commons.vfs2.FileSystemException: Could not determine if file &quot;sftp://!!!!!:***@XXXXX/C:/folder1&quot; is writeable.&lt;br/&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.isWriteable(AbstractFileObject.java:1602)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1646)&lt;br/&gt;
 at com.test.SFTPUtility.move(SFTPUtility.java:98)&lt;br/&gt;
 ... 1 more&lt;br/&gt;
 Caused by: com.jcraft.jsch.JSchException: Could not get the groups id of the current user (error code: 1)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getGroupsIds(SftpFileSystem.java:237)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileObject.getPermissions(SftpFileObject.java:231)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doIsWriteable(SftpFileObject.java:263)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.isWriteable(AbstractFileObject.java:1594)&lt;br/&gt;
 ... 3 more&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13269739">VFS-747</key>
            <summary>org.apache.commons.vfs2.FileSystemException: Could not determine if file &quot;sftp://!!!!!:***@XXXXX/C:/folder1&quot; is writeable.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gwarawate">Gopal Warawate</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Nov 2019 06:25:03 +0000</created>
                <updated>Thu, 2 Jan 2020 21:45:40 +0000</updated>
                                            <version>2.2</version>
                    <version>2.4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17007100" author="paul sistare" created="Thu, 2 Jan 2020 21:45:40 +0000"  >&lt;p&gt;Issue appears to be fixed in the&#160;commons-vfs2-2.5.0 update (24-DEC-2019) which includes&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-617&quot; title=&quot;SFTP isReadable fails if unable to determine group identity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-617&quot;&gt;&lt;del&gt;VFS-617&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12312720" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Docs Text</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-617&quot;&gt;https://issues.apache.org/jira/browse/VFS-617&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08uug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-745] GetOrCreateFilesystemCaches might return unused Map</title>
                <link>https://issues.apache.org/jira/browse/VFS-745</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The LRauFilesCache implementations contains a `getOrCreateFilesystemCache` which uses putIfAbsent, however the returned cache might not be the one (not) put into the filesystemCaches map.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/blob/b6fb9a392d9510ce039e55a26a47ed85750a4386/commons-vfs2/src/main/java/org/apache/commons/vfs2/cache/LRUFilesCache.java#L192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/b6fb9a392d9510ce039e55a26a47ed85750a4386/commons-vfs2/src/main/java/org/apache/commons/vfs2/cache/LRUFilesCache.java#L192&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also this should be probably inside the write lock, and the getFile should have the optimization not to create a filesystem entry like DefaultFilesCache does.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="13267105">VFS-745</key>
            <summary>GetOrCreateFilesystemCaches might return unused Map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Nov 2019 13:32:04 +0000</created>
                <updated>Fri, 8 Nov 2019 13:32:04 +0000</updated>
                                            <version>2.4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08elk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-741] Listing files with known prefix still fails</title>
                <link>https://issues.apache.org/jira/browse/VFS-741</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Efen after &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-298&quot; title=&quot;FTP: Exception is thrown when renaming a file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-298&quot;&gt;VFS-298&lt;/a&gt; the listing of files in a directory may fail with &quot;FileSystemException: Invalid descendent file name&quot; if the filename contains a known/registered scheme.&lt;/p&gt;

&lt;p&gt;A trivial fix is in AFO to simply resolve the children names with a ./ prefix, which makes them parse without a scheme.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13262845">VFS-741</key>
            <summary>Listing files with known prefix still fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Oct 2019 12:15:03 +0000</created>
                <updated>Thu, 17 Oct 2019 13:50:21 +0000</updated>
                            <resolved>Thu, 17 Oct 2019 13:50:21 +0000</resolved>
                                    <version>2.4.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16953735" author="garydgregory" created="Thu, 17 Oct 2019 13:21:29 +0000"  >&lt;p&gt;Can this issue be closed now ?&lt;/p&gt;</comment>
                            <comment id="16953759" author="b.eckenfels" created="Thu, 17 Oct 2019 13:50:21 +0000"  >&lt;p&gt;Fixed on master &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=commons-vfs.git;a=commit;h=d79524d567f4bbd9e9b8e056451ede70e89abd35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=commons-vfs.git;a=commit;h=d79524d567f4bbd9e9b8e056451ede70e89abd35&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07os0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-740] WebdavVersioningTests are not executed regularly and failing</title>
                <link>https://issues.apache.org/jira/browse/VFS-740</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Tests which are named &lt;tt&gt;*Tests.java&lt;/tt&gt; are not executed by the Surefire version in use:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://maven.apache.org/surefire-archives/surefire-2.19.1/maven-surefire-plugin/examples/inclusion-exclusion.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://maven.apache.org/surefire-archives/surefire-2.19.1/maven-surefire-plugin/examples/inclusion-exclusion.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is not a problem as long as these classes are contained in test suites. However, there are instances of &lt;tt&gt;*Tests&lt;/tt&gt; classes which are not in suites, and which subsequently are &lt;em&gt;not&lt;/em&gt; executed during &lt;tt&gt;mvn test&lt;/tt&gt;.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;DefaultFileMonitorTests&lt;/tt&gt;, which I will mention / fix during &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-299&quot; title=&quot;Listeners on DefaultFileMonitor not deregistered on stop()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-299&quot;&gt;VFS-299&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;The test class &lt;tt&gt;WebdavVersioningTests&lt;/tt&gt; is not executed and has two failing test methods after adding it to a suite, e.g., in &lt;tt&gt;WebdavProviderTestCase#suite&lt;/tt&gt;. The &lt;tt&gt;WebdavProviderTestSuite&lt;/tt&gt; is currently not used and looks like a duplicate of &lt;tt&gt;ProviderTestSuite&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;These are my findings after finding out that I could arbitrarily mutate &lt;tt&gt;DefaultFileMonitorTests&lt;/tt&gt; without making &lt;tt&gt;mvn test&lt;/tt&gt; report errors. I think my analysis is exhaustive.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13261249">VFS-740</key>
            <summary>WebdavVersioningTests are not executed regularly and failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="falcod">Falco</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Wed, 9 Oct 2019 06:50:57 +0000</created>
                <updated>Wed, 9 Oct 2019 06:50:57 +0000</updated>
                                            <version>2.5.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07exc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-739] Changes to parseUri breaks backward compatibility by throwing NullPointerException in some cases</title>
                <link>https://issues.apache.org/jira/browse/VFS-739</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When I try to update VFS from 2.2 to the newer version. The changes of parseUri breaks the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException{
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; URI = &lt;span class=&quot;code-quote&quot;&gt;&quot;maprfs:&lt;span class=&quot;code-comment&quot;&gt;///&quot;&lt;/span&gt;;
&lt;/span&gt;    UrlFileNameParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UrlFileNameParser();
    FileName name = parser.parseUri(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, URI);
    assertEquals(URI, name.getURI());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I got an error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
    at org.apache.commons.vfs2.provider.local.LocalFileNameParser.parseUri(LocalFileNameParser.java:65)
    at org.apache.commons.vfs2.provider.url.UrlFileNameParser.parseUri(UrlFileNameParser.java:61)
    at BBI.BugDetection.TestCommonsVFS.test(TestCommonsVFS.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13260948">VFS-739</key>
            <summary>Changes to parseUri breaks backward compatibility by throwing NullPointerException in some cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lingchao">xia0c</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Oct 2019 18:52:13 +0000</created>
                <updated>Mon, 7 Oct 2019 22:13:43 +0000</updated>
                            <resolved>Mon, 7 Oct 2019 21:46:07 +0000</resolved>
                                    <version>2.4</version>
                    <version>2.3</version>
                    <version>2.4.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16946277" author="garydgregory" created="Mon, 7 Oct 2019 21:46:51 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lingchao&quot; class=&quot;user-hover&quot; rel=&quot;lingchao&quot;&gt;lingchao&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;A fix is in git master, please verify and close this ticket.&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="16946295" author="lingchao" created="Mon, 7 Oct 2019 22:12:39 +0000"  >&lt;p&gt;Hi Gary,&lt;/p&gt;

&lt;p&gt;Thanks for your quick confirmation and fix. &lt;br/&gt;
It can be successfully fixed and I will close this ticket.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07d2o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-733] Parent layer of ZipFileSystem set to null through OnCallRefreshFileObject and DecoratedFileObject.refresh()</title>
                <link>https://issues.apache.org/jira/browse/VFS-733</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When using &lt;tt&gt;FileObject#exists&lt;/tt&gt; and &lt;tt&gt;FileObject#getContent&lt;/tt&gt; on a ZIP file (in any order), the reference to the parent file system is set to &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject zippedFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OnCallRefreshFileObject(fileInZip());
assertNotNull(zippedFile.getFileSystem().getParentLayer());

zippedFile.exists();
zippedFile.getContent();

assertNotNull(zippedFile.getFileSystem().getParentLayer()); &lt;span class=&quot;code-comment&quot;&gt;// fails&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For an executable example, refer to &lt;a href=&quot;https://github.com/f4lco/vfs-repro/blob/master/src/test/java/vfs/ZipParentLayerTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/f4lco/vfs-repro/blob/master/src/test/java/vfs/ZipParentLayerTest.java&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I come to believe this does not work as intended. I&apos;m also relatively clueless about a potential fix or workaround. For me, this bug blocks upgrading from VFS 2.1.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="13260551">VFS-733</key>
            <summary>Parent layer of ZipFileSystem set to null through OnCallRefreshFileObject and DecoratedFileObject.refresh()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="falcod">Falco</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Oct 2019 10:45:33 +0000</created>
                <updated>Tue, 8 Oct 2019 16:17:59 +0000</updated>
                            <resolved>Mon, 7 Oct 2019 15:46:59 +0000</resolved>
                                    <version>2.2</version>
                    <version>2.4</version>
                    <version>2.3</version>
                    <version>2.4.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16945184" author="garydgregory" created="Sat, 5 Oct 2019 23:44:17 +0000"  >&lt;p&gt;Please see the new (failing and ignored) unit test &lt;tt&gt;org.apache.commons.vfs2.provider.zip.Jira733TestCase&lt;/tt&gt;. You or anyone willing to help can test any PRs based on this test and the whole build.&lt;/p&gt;

&lt;p&gt;The simplest way I found to fix this test and allow the whole build to pass of course, is to not clear the &lt;tt&gt;FileObject&lt;/tt&gt;&#160;for the parent layer, which seems OK at first glance since closing other {{FileObject}}s &lt;em&gt;should&lt;/em&gt; be done elsewhere in VFS or in application code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
diff --git a/commons-vfs2/dummy.txt b/commons-vfs2/dummy.txt
new file mode 100644
index 0000000..47d2739
--- /dev/null
+++ b/commons-vfs2/dummy.txt
@@ -0,0 +1 @@
+new content
\ No newline at end of file
diff --git a/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/AbstractFileSystem.java b/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/AbstractFileSystem.java
index 8132328..6f538e5 100644
--- a/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/AbstractFileSystem.java
+++ b/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/AbstractFileSystem.java
@@ -123,8 +123,6 @@
     @Override
     public void close() {
         closeCommunicationLink();
-
-        parentLayer = null;
     }
 
     /**
diff --git a/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/zip/Jira733TestCase.java b/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/zip/Jira733TestCase.java
index 84d03e2..6d6f73f 100644
--- a/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/zip/Jira733TestCase.java
+++ b/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/zip/Jira733TestCase.java
@@ -30,7 +30,6 @@
 import org.junit.Ignore;
 import org.junit.Test;
 
-@Ignore
 public class Jira733TestCase {
 
     @After
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Either:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this fix is fine since we have no unit test failures as I mentioned, including the new test I added.&lt;/li&gt;
	&lt;li&gt;this fix is not fine but we do not know because our unit tests are missing a use case.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Anyone care to opine?&lt;/p&gt;

&lt;p&gt;Gary&lt;br/&gt;
 &#160;&lt;/p&gt;</comment>
                            <comment id="16945554" author="kinow" created="Mon, 7 Oct 2019 02:44:02 +0000"  >&lt;p&gt;Don&apos;t know the component and its codebase well enough to have a good opinion on whether it&apos;s safe to remove it or not. But at least looking at the git blame with GitHub&apos;s interface, it doesn&apos;t seem to have been added to fix a security bug.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/commit/5e5a5eaeba244bde97283135ee3f6d1730850563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/commit/5e5a5eaeba244bde97283135ee3f6d1730850563&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The commit message seems to be related to GC collection for soft references. But given other class attributes are not set to null, maybe it that line where parentLayer is set to null could be removed. I wonder if it could also be made a `private final FileObject` as the `rootName`?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16945976" author="garydgregory" created="Mon, 7 Oct 2019 15:46:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=falcod&quot; class=&quot;user-hover&quot; rel=&quot;falcod&quot;&gt;falcod&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;In git master. Please verify and close.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16946978" author="falcod" created="Tue, 8 Oct 2019 15:23:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; Looks good to me. You may want to un-ignore&#160;&lt;tt&gt;org.apache.commons.vfs2.provider.zip.Jira733TestCase&lt;/tt&gt;, it&apos;s passing now.&lt;/p&gt;</comment>
                            <comment id="16947030" author="garydgregory" created="Tue, 8 Oct 2019 16:17:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=falcod&quot; class=&quot;user-hover&quot; rel=&quot;falcod&quot;&gt;falcod&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oops, I forgot to enable that test indeed. Fixed!&lt;/p&gt;

&lt;p&gt;Thank you!&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07amg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-730] Error while creating a file/folder on a shared network folder using StaticUserAuthenticator</title>
                <link>https://issues.apache.org/jira/browse/VFS-730</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The following code is failing to create the target file:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void copyUsingCredentials(Path sourcePath, Path targetPath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; domain = &lt;span class=&quot;code-quote&quot;&gt;&quot;domain&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; domain = &lt;span class=&quot;code-quote&quot;&gt;&quot;192.168.1.1&quot;&lt;/span&gt;; 
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username = &lt;span class=&quot;code-quote&quot;&gt;&quot;username&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password = &lt;span class=&quot;code-quote&quot;&gt;&quot;1234&quot;&lt;/span&gt;;
        
	    FileObject sourceFile = VFS.getManager().resolveFile(sourcePath.toFile().getAbsolutePath());

	    StaticUserAuthenticator auth = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StaticUserAuthenticator(domain, username, password);
	    FileSystemOptions opts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
	    DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(opts, auth);

	    FileObject targetFile = VFS.getManager().resolveFile(targetPath.toFile().getAbsolutePath(), opts);

	    targetFile.copyFrom(sourceFile, Selectors.SELECT_SELF);
	    targetFile.close();

	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
sourcePath = file:&lt;span class=&quot;code-comment&quot;&gt;///C:/localpath/file.txt
&lt;/span&gt;
targetPath = file:&lt;span class=&quot;code-comment&quot;&gt;////192.168.1.1/targetFolder/file.txt&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;The code works fine on develomnet environment where the user running tomcat is a local user, but fails when the user running tomcat is the SYSTEM user.&#160;&lt;/p&gt;

&lt;p&gt;Our guess is that in the first situation copyFrom is not using the Authenticator and therefore works fine.&#160;&lt;/p&gt;

&lt;p&gt;The&#160;targetPath is in a shared folder on a server with Windows 2008 R2 standard, The folder has permissions to read and write and we already check that is accesible from the computer running apache.&lt;/p&gt;

&lt;p&gt;When the execution reach the copyFrom line is fire a&#160;FileSystemException:&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.FileSystemException: Could not copy &quot;file:///C:/localpath/file.txt&quot; to &quot;file:////192.168.1.1/targetFolder/file.txt&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;The code works fine on develomnet environment where the user running tomcat is a local user, but fails when the user running tomcat is the SYSTEM user.&#160;&lt;/p&gt;

&lt;p&gt;Our guess is that in the first situation copyFrom is not using the Authenticator and therefore works fine.&#160;&lt;/p&gt;

&lt;p&gt;The&#160;targetPath is in a shared folder on a server with W&lt;font color=&quot;#000000&quot;&gt;indows 2008 R2 standard, The folder has permissions to read and write and we already check that is accesible from the computer running apache.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;When the execution reach the copyFrom line is fire a&#160;FileSystemException:&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.FileSystemException: Could not copy &quot;file:///C:/localpath/file.txt&quot; to &quot;file:////192.168.1.1/targetFolder/file.txt&quot;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13259237">VFS-730</key>
            <summary>Error while creating a file/folder on a shared network folder using StaticUserAuthenticator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jfernandez.sfm">Jorge</reporter>
                        <labels>
                            <label>StaticUserAuthenticator</label>
                            <label>copyFrom</label>
                    </labels>
                <created>Fri, 27 Sep 2019 10:44:07 +0000</created>
                <updated>Fri, 27 Sep 2019 10:48:45 +0000</updated>
                                            <version>2.4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z072ww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-729] Upgrade hadoop to 2.7.4 or later; will use current 3.2.0</title>
                <link>https://issues.apache.org/jira/browse/VFS-729</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The reason why the Travis builds currently fail for JDK 13/EA is due to this Hadoop issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-14586&quot; title=&quot;StringIndexOutOfBoundsException breaks org.apache.hadoop.util.Shell on 2.7.x with Java 9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-14586&quot;&gt;&lt;del&gt;HADOOP-14586&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve tested it locally (JDK 13, Build 33) with Hadoop 2.7.4 and all tests pass. As this does bump the Hadoop dependency from 2.6 to &amp;gt;=2.7.4 you probably want to do this for a VFS 2.5 release and in the mean time disable the 13/EA builds in Travis.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13253866">VFS-729</key>
            <summary>Upgrade hadoop to 2.7.4 or later; will use current 3.2.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="elmuerte">Michiel Hendriks</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Aug 2019 08:30:47 +0000</created>
                <updated>Thu, 5 Sep 2019 08:26:39 +0000</updated>
                            <resolved>Mon, 2 Sep 2019 00:09:57 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16920540" author="garydgregory" created="Mon, 2 Sep 2019 00:09:57 +0000"  >&lt;p&gt;Updated to 3.2.0. All better all the way to Java 13.&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;

&lt;p&gt;Java 14-EA fails in a different place which we can take up elsewhere:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 89, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.35 sec - in org.apache.commons.vfs2.provider.jar.test.NestedJarTestCase

Running org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase

Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 3.826 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase

junit.framework.TestSuite@ab2e887(org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase$1)  Time elapsed: 3.826 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!

java.lang.IllegalStateException: Not initialized

	at org.apache.jackrabbit.core.security.simple.SimpleSecurityManager.checkInitialized(SimpleSecurityManager.java:265)

	at org.apache.jackrabbit.core.security.simple.SimpleSecurityManager.close(SimpleSecurityManager.java:169)

	at org.apache.jackrabbit.core.RepositoryImpl.doShutdown(RepositoryImpl.java:1101)

	at org.apache.jackrabbit.core.RepositoryImpl.shutdown(RepositoryImpl.java:1081)

	at org.apache.jackrabbit.core.TransientRepository.stopRepository(TransientRepository.java:261)

	at org.apache.jackrabbit.core.TransientRepository.login(TransientRepository.java:334)

	at org.apache.jackrabbit.core.TransientRepository.login(TransientRepository.java:349)

	at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase.getSession(WebdavProviderTestCase.java:146)

	at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase.importFiles(WebdavProviderTestCase.java:163)

	at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase.setUpClass(WebdavProviderTestCase.java:213)

	at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase.access$100(WebdavProviderTestCase.java:55)

	at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase$1.setUp(WebdavProviderTestCase.java:245)

	at org.apache.commons.vfs2.test.AbstractTestSuite$1.protect(AbstractTestSuite.java:131)

	at junit.framework.TestResult.runProtected(TestResult.java:142)

	at org.apache.commons.vfs2.test.AbstractTestSuite.run(AbstractTestSuite.java:137)

	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)

	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)

	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)

	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)

	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)

	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)

	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)

	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16923182" author="elmuerte" created="Thu, 5 Sep 2019 08:26:39 +0000"  >&lt;p&gt;Verified.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z066nc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-727] Creation of singleton file system manager from providers</title>
                <link>https://issues.apache.org/jira/browse/VFS-727</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;A lot of file provides have a call to VFS.getManager() in their findFile(...) implemention, mostly to strip of the scheme.&lt;/p&gt;

&lt;p&gt;This is bad in two ways.&lt;/p&gt;

&lt;p&gt;1) it creates a global FileSystemManager if it does not exist yet, and could result in an exception because not all default providers can be loaded (e.g. no commons http results in class not found exceptions). This obviously also introduces a global state.&lt;/p&gt;

&lt;p&gt;2) the result of VFS.getManager().getSchemes() is not the same as the schemes registered in the file system manager that contains the registered provider.&lt;/p&gt;

&lt;p&gt;All calls to VFS.getManager().getSchemes() should be replaced by calls to getContext().getFileSystemManager().getSchemes()&lt;/p&gt;</description>
                <environment></environment>
        <key id="13253056">VFS-727</key>
            <summary>Creation of singleton file system manager from providers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="elmuerte">Michiel Hendriks</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Aug 2019 14:42:30 +0000</created>
                <updated>Tue, 27 Aug 2019 17:46:24 +0000</updated>
                            <resolved>Tue, 27 Aug 2019 17:46:24 +0000</resolved>
                                    <version>2.4.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16915869" author="garydgregory" created="Mon, 26 Aug 2019 14:56:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elmuerte&quot; class=&quot;user-hover&quot; rel=&quot;elmuerte&quot;&gt;elmuerte&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;We welcome patches on GitHub &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16915882" author="elmuerte" created="Mon, 26 Aug 2019 15:12:17 +0000"  >&lt;p&gt;Already ahead of you, wanted to create a ticket number to refer to. I created a PR which fixes all but 1 location: &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/69&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixing HostFileNameParser is kind of trivial, except that it breaks the following test case:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;org.apache.commons.vfs2.provider.test.GenericFileNameTestCase&lt;/li&gt;
	&lt;li&gt;org.apache.commons.vfs2.provider.smb.test.FileNameTestCase&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As they do not pass a context in the parseUri call, and I haven&apos;t figured out the preferred way to pass a context in case of unit tests. Am I right that in normal operation the context passed to parseUri cannot be null?&lt;/p&gt;</comment>
                            <comment id="16916171" author="garydgregory" created="Mon, 26 Aug 2019 22:06:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elmuerte&quot; class=&quot;user-hover&quot; rel=&quot;elmuerte&quot;&gt;elmuerte&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I merged the PR. TY.&lt;/p&gt;

&lt;p&gt;Let&apos;s keep using this Jira for more PRs.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16916520" author="elmuerte" created="Tue, 27 Aug 2019 08:39:28 +0000"  >&lt;p&gt;Created a new PR to resolve the HostFileNameParser change. Resorted to just check if context is null in the call, and if so then just use VFS.getManager(), otherwise use the more local FSM: &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/70&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/70&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The VFS.getManager() would basically only be called in the unit tests.&lt;/p&gt;

&lt;p&gt;With that change I think this issue can be considered resolved.&lt;/p&gt;</comment>
                            <comment id="16916914" author="garydgregory" created="Tue, 27 Aug 2019 17:46:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elmuerte&quot; class=&quot;user-hover&quot; rel=&quot;elmuerte&quot;&gt;elmuerte&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for your PRs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;In git master. Please verify and close.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z061nk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-726] getInputStream(int bufferSize) on SftpFileObject effectively ignores buffer size</title>
                <link>https://issues.apache.org/jira/browse/VFS-726</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When calling&#160;getInputStream(int bufferSize) on an SftpFileObject&lt;/p&gt;

&lt;p&gt;the callstack looks like this :&lt;/p&gt;

&lt;p&gt;at java.io.BufferedInputStream.&amp;lt;init&amp;gt;(BufferedInputStream.java:199)&lt;br/&gt;
 at java.io.BufferedInputStream.&amp;lt;init&amp;gt;(BufferedInputStream.java:183)&lt;br/&gt;
 at org.apache.commons.vfs2.util.MonitorInputStream.&amp;lt;init&amp;gt;(MonitorInputStream.java:40)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileObject$SftpInputStream.&amp;lt;init&amp;gt;(SftpFileObject.java:485)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:455)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1175)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.DefaultFileContent.buildInputStream(DefaultFileContent.java:495)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:356)&lt;/p&gt;

&lt;p&gt;The problem is that when initialising the BufferedInputstream it is done with the DEFAULT_BUFFER_SIZE of 8192.&lt;/p&gt;

&lt;p&gt;The problem seems to be that in DefaultFileContent.buildInputStream(final Integer bufferSize) the it tries to get a raw InputStream and then wrap it into a&#160;FileContentInputStream but in reality the&#160;fileObject.getInputStream() in line 495 already returns a BufferedInputStream instead of a raw InputStream. It is effectively double buffered.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13251230">VFS-726</key>
            <summary>getInputStream(int bufferSize) on SftpFileObject effectively ignores buffer size</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="GeeGee">Cornelius H&#246;fig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Aug 2019 11:39:02 +0000</created>
                <updated>Tue, 5 Nov 2019 15:53:04 +0000</updated>
                            <resolved>Mon, 19 Aug 2019 22:08:06 +0000</resolved>
                                    <version>2.4.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="16909369" author="garydgregory" created="Fri, 16 Aug 2019 20:19:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=GeeGee&quot; class=&quot;user-hover&quot; rel=&quot;GeeGee&quot;&gt;GeeGee&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Please see git master for a change set that passes down the buffer size down to the lower levels. There still can be double buffering but I am looking for a solution or a suggestion.&lt;/p&gt;</comment>
                            <comment id="16909606" author="boris-petrov" created="Sat, 17 Aug 2019 06:20:35 +0000"  >&lt;p&gt;I think this issue is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-704&quot; title=&quot;Some providers wrap their input/output streams twice in a BufferedInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-704&quot;&gt;&lt;del&gt;VFS-704&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16910786" author="garydgregory" created="Mon, 19 Aug 2019 22:08:06 +0000"  >&lt;p&gt;In git master. Please verify and close. See also &lt;del&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-704&quot; title=&quot;Some providers wrap their input/output streams twice in a BufferedInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-704&quot;&gt;&lt;del&gt;VFS-704&lt;/del&gt;&lt;/a&gt;.&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="16967622" author="geegee" created="Tue, 5 Nov 2019 15:53:04 +0000"  >&lt;p&gt;Code verified, looks good&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13229677">VFS-704</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05qio:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-725] [Local] org.apache.commons.vfs2.FileContent.getLastModifiedTime() is losing milliseconds (always ends in 000)</title>
                <link>https://issues.apache.org/jira/browse/VFS-725</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The &lt;span class=&quot;error&quot;&gt;&amp;#91;Local&amp;#93;&lt;/span&gt; file system, &lt;tt&gt;org.apache.commons.vfs2.FileContent.getLastModifiedTime()&lt;/tt&gt; method is losing milliseconds (always ends in 000).&lt;/p&gt;

&lt;p&gt;This is because &lt;tt&gt;File.lastModified()&lt;/tt&gt; is losing milliseconds (always ends in 000)&lt;/p&gt;

&lt;p&gt;This is only on OpenJDK 8 and 9: &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8177809&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8177809&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The workaround is for &lt;tt&gt;org.apache.commons.vfs2.provider.local.LocalFile&lt;/tt&gt; to call &lt;tt&gt;Files.getLastModifiedTime&lt;/tt&gt; instead of &lt;tt&gt;File.lastModified()&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13249980">VFS-725</key>
            <summary>[Local] org.apache.commons.vfs2.FileContent.getLastModifiedTime() is losing milliseconds (always ends in 000)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Aug 2019 21:52:31 +0000</created>
                <updated>Fri, 9 Aug 2019 21:56:33 +0000</updated>
                            <resolved>Fri, 9 Aug 2019 21:56:33 +0000</resolved>
                                                    <fixVersion>2.4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16904211" author="garydgregory" created="Fri, 9 Aug 2019 21:54:18 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05it4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-724] FileContent#getByteArray() throws IllegalArgumentException: Buffer size &lt;= 0 when file size is 0</title>
                <link>https://issues.apache.org/jira/browse/VFS-724</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The current code only checks for a size bigger than 2MB but ignores when the returned size is 0 or negative. &lt;tt&gt;sizeL&lt;/tt&gt; will be typically equals to zero if the request is made to a WebServer and the response generated live (like PHP). Then the &lt;tt&gt;getInputStream(size)&lt;/tt&gt; will fail in this case when the size is really used by the implementation.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] getByteArray() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; sizeL = getSize();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sizeL &amp;gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;File content is too large &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; array: %,d&quot;&lt;/span&gt;, sizeL));
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13249970">VFS-724</key>
            <summary>FileContent#getByteArray() throws IllegalArgumentException: Buffer size &lt;= 0 when file size is 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wrey75">William Rey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Aug 2019 20:49:12 +0000</created>
                <updated>Sat, 10 Aug 2019 13:29:37 +0000</updated>
                            <resolved>Sat, 10 Aug 2019 13:29:37 +0000</resolved>
                                    <version>2.4</version>
                                    <fixVersion>2.4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16904178" author="garydgregory" created="Fri, 9 Aug 2019 20:52:35 +0000"  >&lt;p&gt;Size 0 sounds legal to me since it represents an empty file. Otherwise a negative size seems bogus. We welcome PRs on GitHub; -)&lt;/p&gt;</comment>
                            <comment id="16904186" author="wrey75" created="Fri, 9 Aug 2019 21:09:54 +0000"  >&lt;p&gt;I have added the following test in &lt;tt&gt;org.apache.commons.vfs2.provider.http4.test.Http4GetContentInfoTest&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testGetZeroContents() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileSystemManager fsManager = VFS.getManager();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject fo = fsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;http4:&lt;span class=&quot;code-comment&quot;&gt;//monpremierlivre.home.blog/&quot;&lt;/span&gt;);
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileContent content = fo.getContent();
        Assert.assertNotNull(content.getString(StandardCharsets.UTF_8));
        &lt;span class=&quot;code-comment&quot;&gt;// Used to NPE before fix:
&lt;/span&gt;        content.getContentInfo();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and fails with the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;


java.lang.IllegalArgumentException: Buffer size &amp;lt;= 0

	at java.io.BufferedInputStream.&amp;lt;init&amp;gt;(BufferedInputStream.java:201)
	at org.apache.commons.vfs2.util.MonitorInputStream.&amp;lt;init&amp;gt;(MonitorInputStream.java:51)
	at org.apache.commons.vfs2.provider.DefaultFileContent$FileContentInputStream.&amp;lt;init&amp;gt;(DefaultFileContent.java:619)
	at org.apache.commons.vfs2.provider.DefaultFileContent.buildInputStream(DefaultFileContent.java:499)
	at org.apache.commons.vfs2.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:356)
	at org.apache.commons.vfs2.FileContent.getByteArray(FileContent.java:134)
	at org.apache.commons.vfs2.FileContent.getString(FileContent.java:283)
	at org.apache.commons.vfs2.provider.http4.test.Http4GetContentInfoTest.testGetZeroContents(Http4GetContentInfoTest.java:73)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at junit.framework.TestCase.runTest(TestCase.java:176)
	at junit.framework.TestCase.runBare(TestCase.java:141)
	at junit.framework.TestResult$1.protect(TestResult.java:122)
	at junit.framework.TestResult.runProtected(TestResult.java:142)
	at junit.framework.TestResult.run(TestResult.java:125)
	at junit.framework.TestCase.run(TestCase.java:129)
	at junit.framework.TestSuite.runTest(TestSuite.java:252)
	at junit.framework.TestSuite.run(TestSuite.java:247)
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note the page requested is a Wordpress generated-page (not a static one) then the {Content-length}} is zero (not given) then of course trying to read in an empty buffer raises an exception. I don&apos;t know the best way to fix it.&lt;/p&gt;

&lt;p&gt;I try to open an issue in GitHub with a fix.&lt;/p&gt;
</comment>
                            <comment id="16904203" author="wrey75" created="Fri, 9 Aug 2019 21:30:52 +0000"  >&lt;p&gt;PR#68 (&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/68&lt;/a&gt;) submitted.&lt;/p&gt;</comment>
                            <comment id="16904421" author="garydgregory" created="Sat, 10 Aug 2019 13:29:37 +0000"  >&lt;p&gt;I pushed a different fix and test for this issue. Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05iqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-723] commons-vfs loads id-rsa if present even if not required</title>
                <link>https://issues.apache.org/jira/browse/VFS-723</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;commons-vfs loads id-rsa if present even if not required.&lt;/p&gt;

&lt;p&gt;Even if id-rsa is present, it should not be loaded automatically. This causes the SFTP connection to fail if id-rsa key file is present but the content is invalid.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Failed with error Invalid private key format.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13244080">VFS-723</key>
            <summary>commons-vfs loads id-rsa if present even if not required</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ChiragPai">Chirag Pai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Jul 2019 10:59:07 +0000</created>
                <updated>Wed, 10 Jul 2019 10:59:07 +0000</updated>
                                            <version>2.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04j00:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-718] MonitorInputStream should not close the stream in &quot;read&quot; #67</title>
                <link>https://issues.apache.org/jira/browse/VFS-718</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;MonitorInputStream should not close the stream in &quot;read&quot; #67&lt;/p&gt;</description>
                <environment></environment>
        <key id="13240212">VFS-718</key>
            <summary>MonitorInputStream should not close the stream in &quot;read&quot; #67</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jun 2019 14:06:09 +0000</created>
                <updated>Tue, 18 Jun 2019 14:08:21 +0000</updated>
                            <resolved>Tue, 18 Jun 2019 14:08:21 +0000</resolved>
                                    <version>2.3</version>
                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16866632" author="garydgregory" created="Tue, 18 Jun 2019 14:08:21 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>67</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/67]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03v6g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-717] Update org.apache.httpcomponents:httpclient from 4.5.8 to 4.5.9.</title>
                <link>https://issues.apache.org/jira/browse/VFS-717</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Update org.apache.httpcomponents:httpclient from 4.5.8 to 4.5.9.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13239836">VFS-717</key>
            <summary>Update org.apache.httpcomponents:httpclient from 4.5.8 to 4.5.9.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Jun 2019 22:29:12 +0000</created>
                <updated>Mon, 6 Dec 2021 12:23:46 +0000</updated>
                            <resolved>Mon, 6 Dec 2021 12:23:46 +0000</resolved>
                                    <version>2.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17453980" author="garydgregory" created="Mon, 6 Dec 2021 12:23:46 +0000"  >&lt;p&gt;Done a long time ago.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03svk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-714] FileObject.deleteAll doesn&apos;t work on a NullFilesCache</title>
                <link>https://issues.apache.org/jira/browse/VFS-714</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;If one tries to call `folder.deleteAll` on a folder which has children and a `NullFilesCache` is setup on the file system manager, this call fails to delete the folder.&lt;/p&gt;

&lt;p&gt;This is due to the `file.getChildren().length != 0` call returning `true` for the folder - the children are cached for it and the cache is not cleared even though a child is deleted because a `NullFilesCache` is used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13232471">VFS-714</key>
            <summary>FileObject.deleteAll doesn&apos;t work on a NullFilesCache</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="boris-petrov">Boris Petrov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 May 2019 13:30:59 +0000</created>
                <updated>Fri, 10 May 2019 13:17:22 +0000</updated>
                                            <version>2.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16837268" author="garydgregory" created="Fri, 10 May 2019 13:17:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=boris-petrov&quot; class=&quot;user-hover&quot; rel=&quot;boris-petrov&quot;&gt;boris-petrov&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;Feel free to submit a PR on GitHub &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02jjc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-711] [SFTP] SftpFileSystem can initialize underlying Session more than once while multithreading</title>
                <link>https://issues.apache.org/jira/browse/VFS-711</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SFTP&amp;#93;&lt;/span&gt; SftpFileSystem.getUid() can initialize underlying data more than once while multithreading.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13230703">VFS-711</key>
            <summary>[SFTP] SftpFileSystem can initialize underlying Session more than once while multithreading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2019 13:52:27 +0000</created>
                <updated>Mon, 29 Apr 2019 14:02:09 +0000</updated>
                            <resolved>Mon, 29 Apr 2019 14:02:09 +0000</resolved>
                                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16829284" author="garydgregory" created="Mon, 29 Apr 2019 14:02:09 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13230689">VFS-710</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z028nk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-710] [SFTP] SftpFileSystem.getUid() can initialize underlying data more than once while multithreading</title>
                <link>https://issues.apache.org/jira/browse/VFS-710</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SFTP&amp;#93;&lt;/span&gt; SftpFileSystem.getUid() can initialize underlying data more than once while multithreading.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13230689">VFS-710</key>
            <summary>[SFTP] SftpFileSystem.getUid() can initialize underlying data more than once while multithreading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2019 13:04:50 +0000</created>
                <updated>Mon, 29 Apr 2019 13:52:27 +0000</updated>
                            <resolved>Mon, 29 Apr 2019 13:16:22 +0000</resolved>
                                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16829255" author="garydgregory" created="Mon, 29 Apr 2019 13:16:22 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13230688">VFS-709</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13230703">VFS-711</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z028kg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-709] [SFTP] SftpFileSystem.getGroupsIds() can initialize underlying data more than once while multithreading</title>
                <link>https://issues.apache.org/jira/browse/VFS-709</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SFTP&amp;#93;&lt;/span&gt; SftpFileSystem.getGroupsIds() can initialize underlying data more than once while multithreading.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13230688">VFS-709</key>
            <summary>[SFTP] SftpFileSystem.getGroupsIds() can initialize underlying data more than once while multithreading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2019 12:53:40 +0000</created>
                <updated>Mon, 29 Apr 2019 13:04:50 +0000</updated>
                            <resolved>Mon, 29 Apr 2019 12:57:35 +0000</resolved>
                                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16829235" author="garydgregory" created="Mon, 29 Apr 2019 12:57:35 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13230689">VFS-710</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z028k8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-708] [SFTP] SftpFileSystem.executeCommand(String, StringBuilder) can leak ChannelExec objects</title>
                <link>https://issues.apache.org/jira/browse/VFS-708</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;If an exception is thrown in the guts of &lt;tt&gt;SftpFileSystem.executeCommand(String, StringBuilder)&lt;/tt&gt;, the&#160;ChannelExec it created is not disconnected.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13230493">VFS-708</key>
            <summary>[SFTP] SftpFileSystem.executeCommand(String, StringBuilder) can leak ChannelExec objects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Apr 2019 17:37:02 +0000</created>
                <updated>Sat, 27 Apr 2019 22:08:48 +0000</updated>
                            <resolved>Sat, 27 Apr 2019 22:08:48 +0000</resolved>
                                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16827760" author="garydgregory" created="Sat, 27 Apr 2019 22:08:48 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z027cw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-702] Simplify adding files to DefaultFileMonitor #57</title>
                <link>https://issues.apache.org/jira/browse/VFS-702</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Simplify adding files to DefaultFileMonitor #57&lt;/p&gt;</description>
                <environment></environment>
        <key id="13227967">VFS-702</key>
            <summary>Simplify adding files to DefaultFileMonitor #57</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Apr 2019 19:17:01 +0000</created>
                <updated>Sat, 17 Jul 2021 10:14:59 +0000</updated>
                            <resolved>Mon, 15 Apr 2019 00:24:02 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16817486" author="garydgregory" created="Mon, 15 Apr 2019 00:24:02 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                            <comment id="16949224" author="falcod" created="Fri, 11 Oct 2019 07:42:56 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, I assume there has been an inadvertent change in behavior. I provide further details the linked GitHub pull request.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/57]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01ru8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-701] Make array declaration in ThresholdingOutputStream consistent with other array declarations in the library #77</title>
                <link>https://issues.apache.org/jira/browse/VFS-701</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Make array declaration in ThresholdingOutputStream consistent with other array declarations in the library #77&lt;/p&gt;</description>
                <environment></environment>
        <key id="13227945">VFS-701</key>
            <summary>Make array declaration in ThresholdingOutputStream consistent with other array declarations in the library #77</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Apr 2019 14:46:51 +0000</created>
                <updated>Sun, 14 Apr 2019 17:14:05 +0000</updated>
                            <resolved>Sun, 14 Apr 2019 17:14:05 +0000</resolved>
                                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16817364" author="garydgregory" created="Sun, 14 Apr 2019 17:14:05 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>77</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-io/pull/77]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01rpc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-700] Some tests fail on Java 11 and above</title>
                <link>https://issues.apache.org/jira/browse/VFS-700</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Some tests fail on Java 11 and above: &lt;a href=&quot;https://travis-ci.org/apache/commons-vfs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/commons-vfs&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests in error: 
  AbstractFtpsProviderTestCase$FtpProviderTestSuite&amp;gt;AbstractTestSuite.run:137-&amp;gt;setUp:153-&amp;gt;AbstractTestSuite.setUp:166 &#194;&#187; FileSystem
  AbstractFtpsProviderTestCase$FtpProviderTestSuite&amp;gt;AbstractTestSuite.run:137-&amp;gt;setUp:153-&amp;gt;AbstractTestSuite.setUp:166 &#194;&#187; FileSystem
  MultipleConnectionTestCase.testConnectRoot:55-&amp;gt;resolveRoot:49 &#194;&#187; FileSystem Cou...
  MultipleConnectionTestCase.testUnderlyingConnect:65 &#194;&#187; SSL Unsupported or unrec...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13227687">VFS-700</key>
            <summary>Some tests fail on Java 11 and above</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Apr 2019 11:42:32 +0000</created>
                <updated>Mon, 6 Dec 2021 12:24:20 +0000</updated>
                            <resolved>Mon, 6 Dec 2021 12:24:20 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16823358" author="mkrio" created="Mon, 22 Apr 2019 19:17:06 +0000"  >&lt;p&gt;This seems to be&#160;related to the FTPS server cert (in src/test/resources/org.apache.ftpsserver/ftpserver.jks) using DSA which is no longer supported with TLS 1.3 (which is the default with JDK11).&lt;/p&gt;

&lt;p&gt;The following succeeds with&#160;openjdk64-11.0.2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn -Drat.skip=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Djdk.tls.server.protocols=TLSv1.2 clean test&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See also:&#160;JDK-8211426.&lt;/p&gt;</comment>
                            <comment id="16823566" author="garydgregory" created="Mon, 22 Apr 2019 23:25:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkrio&quot; class=&quot;user-hover&quot; rel=&quot;mkrio&quot;&gt;mkrio&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Is it possible to use a new test cert that would work across all Java versions?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="17042639" author="b.eckenfels" created="Sat, 22 Feb 2020 17:04:39 +0000"  >&lt;p&gt;This does not fail anymore, not sure if by accident or intentional, the system property is set.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;i will leave that open till the certificate ismchecked/renewed and the property is therefore removed.&lt;/p&gt;</comment>
                            <comment id="17453982" author="garydgregory" created="Mon, 6 Dec 2021 12:24:20 +0000"  >&lt;p&gt;Fixed a long time ago.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01q40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-698] SFTP file attributes are fetched multiple times leading to very slow directory listing</title>
                <link>https://issues.apache.org/jira/browse/VFS-698</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;getChildren()&#160;applied on&#160;SftpFileObject is very slow compared to JSCH implementation. This is because, the&#160;SftpATTRS which is readily available for the children after an &quot;ls&quot; call is again fetched for each child file since they are independently resolved. So if a directory contains 10 files, it results in 1 (ls) + 10 (stat) calls to server.&lt;/p&gt;

&lt;p&gt;For a folder with 100 files (AWS), it took about 35 secs&#160;instead of 1.5 secs to&#160; getChildren().&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;doListChildrenResolved:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;final FileObject fo = getFileSystem().resolveFile(getFileSystem().getFileSystemManager()&lt;/tt&gt;&lt;br/&gt;
 {{ .resolveName(getName(), UriParser.encode(name), NameScope.CHILD));}}&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&lt;font color=&quot;#ff0000&quot;&gt;((SftpFileObject) FileObjectUtils.getAbstractFileObject(fo)).setStat(stat.getAttrs());&lt;/font&gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The resolveFile call, creates a SftpFileObject and calls its resolve method, which results in getting the (stats) SftpATTRS for each child file. This stat is already available as part of the &apos;ls&apos; call we made. The setStat call above (highlighted is red) is redundant, since stat for each child file is already fetched one at a time.&lt;/p&gt;

&lt;p&gt;The solution would be to avoid getting the stat for each child file after an &apos;ls&apos; call. May be, the framework makes it difficult to do this easily.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13226854">VFS-698</key>
            <summary>SFTP file attributes are fetched multiple times leading to very slow directory listing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="krishnanmms">krishnan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Apr 2019 06:06:26 +0000</created>
                <updated>Thu, 14 May 2020 16:52:10 +0000</updated>
                            <resolved>Sun, 16 Jun 2019 23:43:40 +0000</resolved>
                                    <version>2.3</version>
                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16814514" author="garydgregory" created="Wed, 10 Apr 2019 14:51:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krishnanmms&quot; class=&quot;user-hover&quot; rel=&quot;krishnanmms&quot;&gt;krishnanmms&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;It would be best if you could provide this as a PR on GitHub, which would then allow Travis to run a build on your branch/PR.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16865060" author="davidseptimus" created="Sun, 16 Jun 2019 15:45:00 +0000"  >&lt;p&gt;I just ran into this issue myself trying to list a directory of ~200,000 files. The call to getChildren() ran for over an hour before I killed it whereas the underlying call to Channel.ls(...) ran for ~30 seconds for the same directory.&lt;/p&gt;

&lt;p&gt;Due to time constraints, I went with a workaround &#8211; extending the FileObject interface with a streamChildren() method that returns a Stream&amp;lt;FileObject&amp;gt; and&#160; an SftpFileObject implementation of that method to lazily convert LsEntry instances to SftpFileObject as needed.&lt;/p&gt;</comment>
                            <comment id="16865089" author="davidseptimus" created="Sun, 16 Jun 2019 17:25:03 +0000"  >&lt;p&gt;As far as I can tell, this is only an issue when your &lt;tt&gt;FileSystem&lt;/tt&gt;&#160;is using &lt;tt&gt;CacheStrategy.ON_RESOLVE&lt;/tt&gt;.&#160;This forces the &lt;tt&gt;FileSystem&lt;/tt&gt; to call &lt;tt&gt;refresh()&lt;/tt&gt; on the newly created &lt;tt&gt;SftpFileObject&lt;/tt&gt; (see: &lt;tt&gt;AbstractFileSystem.resolveFile(...)&lt;/tt&gt;)&#160; and because &lt;tt&gt;attrs&lt;/tt&gt; is null at the the time of resolution, a call is made to the server in order to determine the file&apos;s &lt;tt&gt;FileType&lt;/tt&gt; (see: &lt;tt&gt;SftpFileObject.refresh()&lt;/tt&gt; and&#160;&lt;tt&gt;SftpFileObject.doGetType()&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="16865112" author="davidseptimus" created="Sun, 16 Jun 2019 18:43:44 +0000"  >&lt;p&gt;This issue is cause by a call to &lt;tt&gt;getType()&lt;/tt&gt; inside from &lt;tt&gt;SftpFileObject&lt;/tt&gt;&apos;s implementation of &lt;tt&gt;FileObject.refresh()&lt;/tt&gt;. This forces a &lt;tt&gt;stat&lt;/tt&gt; call to the SFTP server to refresh the instance&apos;s &lt;tt&gt;FileType&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Based on my understanding of the refresh process, the primary purpose of &lt;tt&gt;refresh()&lt;/tt&gt; is to clear the internal state of the &lt;tt&gt;FileObject&lt;/tt&gt; instance, so the next operation called on the instance is forced to refresh its state from the underlying file sytstem. &lt;tt&gt;SftpFileObject.refresh()&lt;/tt&gt; is the only implementation that&#160; actually makes a file system call.&lt;/p&gt;</comment>
                            <comment id="16865152" author="davidseptimus" created="Sun, 16 Jun 2019 20:24:57 +0000"  >&lt;p&gt;PR raised:&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/65&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17107079" author="remi.ville" created="Thu, 14 May 2020 08:34:02 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;There&apos;s a similar issue if you call&#160;sftpFile.findFiles(selector) before localFile.copyFrom(sftpFile, selector) because the second call reset file stats in the cache (in .AbstractFileSystem#resolveFile() =&amp;gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getFileSystemManager().getCacheStrategy().equals(CacheStrategy.ON_RESOLVE)) {
 file.refresh();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;)&lt;br/&gt;
Then the stats are retrieved one by one.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12375681">VFS-172</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13304878">VFS-771</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01l0g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-694] Fix inability to start the DefaultFileMonitor after it has been stopped</title>
                <link>https://issues.apache.org/jira/browse/VFS-694</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Fix inability to start the DefaultFileMonitor after it has been stopped.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13223088">VFS-694</key>
            <summary>Fix inability to start the DefaultFileMonitor after it has been stopped</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Mar 2019 14:24:42 +0000</created>
                <updated>Thu, 21 Mar 2019 14:50:44 +0000</updated>
                            <resolved>Thu, 21 Mar 2019 14:50:44 +0000</resolved>
                                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16798155" author="garydgregory" created="Thu, 21 Mar 2019 14:50:44 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>55</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/55]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z00y7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-689] org.apache.commons.vfs2.provider.http.HttpFileObject.getHeadMethod() does not release connection when an exception is thrown</title>
                <link>https://issues.apache.org/jira/browse/VFS-689</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The method &lt;tt&gt;org.apache.commons.vfs2.provider.http.HttpFileObject.getHeadMethod()&lt;/tt&gt; does not release connection when an exception is thrown.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13213312">VFS-689</key>
            <summary>org.apache.commons.vfs2.provider.http.HttpFileObject.getHeadMethod() does not release connection when an exception is thrown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Feb 2019 13:26:45 +0000</created>
                <updated>Fri, 1 Feb 2019 13:32:52 +0000</updated>
                            <resolved>Fri, 1 Feb 2019 13:32:52 +0000</resolved>
                                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0kg0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-685] Test classes should be public so test suits can be extended</title>
                <link>https://issues.apache.org/jira/browse/VFS-685</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;FileInfo and possibly other classes should be public, that way someone can write tests for their providers that extend and are close to the same as the project tests&lt;/p&gt;</description>
                <environment></environment>
        <key id="13203128">VFS-685</key>
            <summary>Test classes should be public so test suits can be extended</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="otto">Otto Fowler</assignee>
                                    <reporter username="otto">Otto Fowler</reporter>
                        <labels>
                            <label>patch-available</label>
                    </labels>
                <created>Fri, 7 Dec 2018 19:05:05 +0000</created>
                <updated>Wed, 16 Jan 2019 14:13:46 +0000</updated>
                            <resolved>Wed, 16 Jan 2019 14:13:46 +0000</resolved>
                                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16713202" author="b.eckenfels" created="Fri, 7 Dec 2018 19:21:45 +0000"  >&lt;p&gt;Just a FYI, I have an provider which runs the whole provider testsuite from the main project by ways of depending on the test jar. However it has some problems with resources and the `code.*` classes. And the logic is really really hard to understand at all. &lt;a href=&quot;https://github.com/ecki/seeburger-vfs2/blob/master/vfs2provider-jdbctable/src/test/java/com/seeburger/vfs2/provider/jdbctable/test/H2ProviderTestCase.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ecki/seeburger-vfs2/blob/master/vfs2provider-jdbctable/src/test/java/com/seeburger/vfs2/provider/jdbctable/test/H2ProviderTestCase.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16713205" author="ottobackwards" created="Fri, 7 Dec 2018 19:24:46 +0000"  >&lt;p&gt;Understood.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I wrote a provider for zookeeper, original in project. &#160;I was going to submit it but I&apos;m going to release it outside the project. &#160;In order to get a FILE_OR_FOLDER type to work with the test cases, I needed to create FileOrFolder versions of a couple of the standard test cases, those classes now in my project and not in the vfs package. &#160;I cannot use these classes that extend the abstract test classes without FileInfo.&lt;/p&gt;

&lt;p&gt;Outside provider writers should be able to both run the tests, and add new tests.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16713304" author="garydgregory" created="Fri, 7 Dec 2018 21:37:05 +0000"  >&lt;p&gt;So should this PR still be merged?&lt;/p&gt;

&lt;p&gt;If so, the new non-trivial public methods should be&#160;Javadoc&apos;d IMO.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16713329" author="ottobackwards" created="Fri, 7 Dec 2018 22:02:45 +0000"  >&lt;p&gt;Of course it should be. &#160;Not all providers will be submitted, and it is inconsistent to have the ability to extend the classes but not have all the types available.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ll javadoc them.&#160;&lt;/p&gt;</comment>
                            <comment id="16713330" author="ottobackwards" created="Fri, 7 Dec 2018 22:03:17 +0000"  >&lt;p&gt;What would be great is if we could land this and the other things in review and get a release out.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16713385" author="ottobackwards" created="Fri, 7 Dec 2018 22:52:33 +0000"  >&lt;p&gt;If we wanted to say, look at reviewing a couple of in q pr&apos;s to fill out the release i would be up for helping with that&lt;/p&gt;</comment>
                            <comment id="16718898" author="ottobackwards" created="Wed, 12 Dec 2018 12:11:04 +0000"  >&lt;p&gt;They should be all set now &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16726198" author="ottobackwards" created="Thu, 20 Dec 2018 20:26:13 +0000"  >&lt;p&gt;ping&lt;/p&gt;</comment>
                            <comment id="16734630" author="ottobackwards" created="Fri, 4 Jan 2019 22:21:31 +0000"  >&lt;p&gt;I have updated the javadoc. &#160;Anything else needed?&lt;/p&gt;</comment>
                            <comment id="16744079" author="garydgregory" created="Wed, 16 Jan 2019 14:13:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Patch GH 47 applied to svn trunk. Please verify and close.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01aq0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-684] Missing thread-safety information in API documentation</title>
                <link>https://issues.apache.org/jira/browse/VFS-684</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The API documentation for VFS is missing advisory information about the safety (or danger) of&#160;sharing&#160;class instances across multiple threads. Refer to bugs &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-253&quot; title=&quot;AbstractFileObject: wrong synchronization of content-related code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-253&quot;&gt;VFS-253&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-683&quot; title=&quot;Thread safety issue in VFSClassLoader - NullPointerException thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-683&quot;&gt;&lt;del&gt;VFS-683&lt;/del&gt;&lt;/a&gt; for examples of what can happen when the same &lt;tt&gt;FileObject&lt;/tt&gt;&#160;instance is accessed in more than one thread. However, there is caching that&apos;s happening in &lt;tt&gt;org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile&lt;/tt&gt;. &lt;a href=&quot;https://svn.apache.org/viewvc/commons/proper/vfs/tags/commons-vfs2-project-2.2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/AbstractFileSystem.java?revision=1811361&amp;amp;view=markup#l303&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Source code is here&lt;/a&gt;. This will definitely result in the same &lt;tt&gt;FileObject&lt;/tt&gt; being referenced from distinct threads if both threads call &lt;tt&gt;resolveFile&lt;/tt&gt; on the same instance of a &lt;tt&gt;FileSystem&lt;/tt&gt; that extends &lt;tt&gt;AbstractFileSystem&lt;/tt&gt;. So, it&apos;s unclear where applications that use VFS are required to apply synchronization and/or whether each thread is required to use a distinct &lt;tt&gt;FileSystem&lt;/tt&gt; instance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13200682">VFS-684</key>
            <summary>Missing thread-safety information in API documentation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="daryl.odnert">Daryl Odnert</reporter>
                        <labels>
                            <label>documentation</label>
                    </labels>
                <created>Mon, 26 Nov 2018 21:21:45 +0000</created>
                <updated>Mon, 26 Nov 2018 22:17:38 +0000</updated>
                                            <version>2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12424815">VFS-253</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="13199700">VFS-683</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00vr4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-683] Thread safety issue in VFSClassLoader - NullPointerException thrown</title>
                <link>https://issues.apache.org/jira/browse/VFS-683</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In my application, I&#160;have two instances of the &lt;tt&gt;VFSClassLoader&lt;/tt&gt;, each of which&#160;is being used in a distinct thread. Both &lt;tt&gt;VFSClassLoader&lt;/tt&gt;&#160;instances refer to the same&#160;compressed file resource described by a &lt;tt&gt;FileObject&lt;/tt&gt; that is passed to the class loader&apos;s constructor.&#160;Intermittently, the application throws an exception with the stack trace shown below. So, there seems to be either a race condition in the code or an undocumented assumption here. If it is unsupported for two &lt;tt&gt;VFSClassLoader&lt;/tt&gt;&#160;instances to refer to the same resource (file), then that assumption should be documented. But if that is not the case, then there is a race condition bug in the implementation.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;43789 WARN  {} c.a.e.u.PreferredPathClassLoader - While loading class org.apache.hive.jdbc.HiveDatabaseMetaData, rethrowing unexpected java.lang.NullPointerException: Inflater has been closed
java.lang.NullPointerException: Inflater has been closed
	at java.util.zip.Inflater.ensureOpen(Inflater.java:389)
	at java.util.zip.Inflater.inflate(Inflater.java:257)
	at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:152)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:284)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345)
	at org.apache.commons.vfs2.util.MonitorInputStream.read(MonitorInputStream.java:91)
	at org.apache.commons.vfs2.FileUtil.getContent(FileUtil.java:47)
	at org.apache.commons.vfs2.impl.Resource.getBytes(Resource.java:102)
	at org.apache.commons.vfs2.impl.VFSClassLoader.defineClass(VFSClassLoader.java:179)
	at org.apache.commons.vfs2.impl.VFSClassLoader.findClass(VFSClassLoader.java:150)
        at com.atscale.engine.utils.PreferredPathClassLoader.findClass(PreferredPathClassLoader.scala:54)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13199700">VFS-683</key>
            <summary>Thread safety issue in VFSClassLoader - NullPointerException thrown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="daryl.odnert">Daryl Odnert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Nov 2018 21:50:08 +0000</created>
                <updated>Thu, 19 Jan 2023 18:50:15 +0000</updated>
                            <resolved>Wed, 18 Jan 2023 17:06:38 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="16693974" author="ottobackwards" created="Wed, 21 Nov 2018 01:08:39 +0000"  >&lt;p&gt;any kind of small sample project that can reproduce the issue would be helpful.&lt;/p&gt;

&lt;p&gt;what the provider is, what the file is etc.&lt;/p&gt;</comment>
                            <comment id="16693981" author="ottobackwards" created="Wed, 21 Nov 2018 01:23:00 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Returns an input stream &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; reading the file&apos;s content.
 * &amp;lt;p&amp;gt;
 * There may only be a single input or output stream open &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the file at any time.
 *
 * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; An input stream to read the file&apos;s content from. The input stream is buffered, so there is no need to
 *         wrap it in a {@code BufferedInputStream}.
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException If the file does not exist, or is being read, or is being written, or on error
 *             opening the stream.
 */
InputStream getInputStream() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Just from looking through things, It doesn&apos;t seem correct to have two threads going through here.&lt;/p&gt;

&lt;p&gt;The Resource.getBytes() call explicitly CLOSES the stream. &#160; So, it isn&apos;t thread safe for two readers if there is only ever one stream from the same object&lt;/p&gt;</comment>
                            <comment id="16694097" author="daryl.odnert" created="Wed, 21 Nov 2018 01:53:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt; - In general, are &lt;tt&gt;FileObject&lt;/tt&gt; instances supposed to be thread-safe? The documentation is unclear about this.&lt;/p&gt;

&lt;p&gt;My colleague and I&#160;are suspicious of the caching that&apos;s happening in &lt;tt&gt;org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile&lt;/tt&gt;. &lt;a href=&quot;https://svn.apache.org/viewvc/commons/proper/vfs/tags/commons-vfs2-project-2.2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/AbstractFileSystem.java?revision=1811361&amp;amp;view=markup#l303&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Source code is here&lt;/a&gt;. With caching&#160;happening here,&#160;the same &lt;tt&gt;FileObject&lt;/tt&gt; instance could be returned to multiple threads, which&#160;would lead to a problem if&#160;more than one of those threads try to read the contents simultaneously.&lt;/p&gt;</comment>
                            <comment id="16694189" author="ottobackwards" created="Wed, 21 Nov 2018 03:57:13 +0000"  >&lt;p&gt;I can&apos;t speak to the intent, I&apos;m not one of the original authors, and have only worked with the library myself as you probably have in a couple of projects, as well as trying to fix a couple of bugs. &#160;And I am wrong a lot &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Further investigation:&lt;/p&gt;

&lt;p&gt;If you look at DefaultFileContent, it looks like we create multiple input streams and store them per thread in thread local. &#160;And then they are closed as such. &#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;BUT: &#160; If this is a ZipFileObject: &#160; The java util zip library says:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Returns an input stream &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; reading the contents of the specified
 * zip file entry.
 *
 * &amp;lt;p&amp;gt; Closing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; ZIP file will, in turn, close all input
 * streams that have been returned by invocations of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; method.
 *
 * @param entry the zip file entry
 * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the input stream &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; reading the contents of the specified
 * zip file entry.
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ZipException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a ZIP format error has occurred
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; an I/O error has occurred
 * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IllegalStateException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the zip file has been closed
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; InputStream getInputStream(ZipEntry entry) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which doesn&apos;t seem good.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Still would need to reproduce....&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16694200" author="ottobackwards" created="Wed, 21 Nov 2018 04:12:12 +0000"  >&lt;p&gt;As to in general... &#160;The interface for FileObject is pretty clear that there should be only one input stream opened for any one file at any one time, at least that is my take. &#160; It would be nice if it where more explicit from a higher level.&lt;/p&gt;

&lt;p&gt;You may want to send something to the commons list with a &lt;span class=&quot;error&quot;&gt;&amp;#91;VFS&amp;#93;&lt;/span&gt; subject.&lt;/p&gt;</comment>
                            <comment id="16695032" author="daryl.odnert" created="Wed, 21 Nov 2018 17:51:09 +0000"  >&lt;p&gt;All of your comments are consistent with my concern that the caching mechanism in &lt;tt&gt;AbstractFileSystem.resolveFile&lt;/tt&gt;&#160;is returning the same &lt;tt&gt;FileObject&lt;/tt&gt; instance to two different threads, which is apparently a dangerous thing to do. I&apos;ll try to put together a small sample application that reproduces the problem soon.&lt;/p&gt;</comment>
                            <comment id="16695202" author="b.eckenfels" created="Wed, 21 Nov 2018 19:55:32 +0000"  >&lt;p&gt;Just FYI, I had similiar problems. In my case I made sure that the overlay filesystem I was using had a different filesystem instance, so it was not closing for other threads. But there are definitly a few concurrency problems (and if there are not concurrency problems then there are cleanup/excessive-clone problems). Let me see if I can find the details of my research in that area.&lt;/p&gt;</comment>
                            <comment id="16695425" author="daryl.odnert" created="Thu, 22 Nov 2018 00:37:39 +0000"  >&lt;p&gt;Here is a Java program that demonstrates a problem where if you have more than one thread attempting to read the contents of the children of the same archive file, you will get exceptions thrown. The exceptions this applications receives from VFS are not identical to the &lt;tt&gt;NullPointerException&lt;/tt&gt; that&#160;is listed in&#160;the original problem description, but I think this does demonstrate that there is either a thread-safety issue that needs to be fixed, or some documentation that needs to be clarified.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12949128/12949128_Main.java&quot; title=&quot;Main.java attached to VFS-683&quot;&gt;Main.java&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16696134" author="ottobackwards" created="Thu, 22 Nov 2018 17:15:26 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daryl.odnert&quot; class=&quot;user-hover&quot; rel=&quot;daryl.odnert&quot;&gt;daryl.odnert&lt;/a&gt;, I&apos;ll take a peek and see if there is anything obvious, that is non-usage, that can be done.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16696177" author="ottobackwards" created="Thu, 22 Nov 2018 18:20:11 +0000"  >&lt;p&gt;Ok,&lt;/p&gt;

&lt;p&gt;So, with your example the issue is that each time you get the tar archive input stream, it needs to create a new stream, closing the old, so they are taking each other out, which is because as you state the sample File object is resolving.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In the end, the file object content and streams are not going to be thread safe. &#160;The issue, as you thought is the cache.&lt;/p&gt;

&lt;p&gt;Let me see what I can come up with.&lt;/p&gt;</comment>
                            <comment id="16696181" author="ottobackwards" created="Thu, 22 Nov 2018 18:22:11 +0000"  >&lt;p&gt;I wonder if using the static vfs default manager can be an approach. &#160;So instead of using the static, create your own per thread.&lt;/p&gt;</comment>
                            <comment id="16696193" author="ottobackwards" created="Thu, 22 Nov 2018 18:41:56 +0000"  >&lt;p&gt;For example -&amp;gt; your code works, with the following modifications:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.ottobackwards;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileObject;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileSystemManager;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileType;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileUtil;
&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.VFS;
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.impl.DefaultFileSystemManager;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.impl.StandardFileSystemManager;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.provider.tar.TarFileProvider;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Main {

  /**
   * The first parameter (args[0]) should be an directory within an archive file. For example:
   * tgz:file:&lt;span class=&quot;code-comment&quot;&gt;//Users/daryl/zookeeper-3.4.13.tgz!zookeeper-3.4.13/docs
&lt;/span&gt;   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;File selected is &quot;&lt;/span&gt; + args[0]);
      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[] threads = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[2];
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; threads.length; i++) {
        threads[i] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileObjectReadingThread(args[0]), &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;THREAD--(%d)--&amp;gt;&quot;&lt;/span&gt;,i));
        threads[i].start();
      }
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; threads.length; i++) {
        threads[i].join(0);
      }
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Main caught &quot;&lt;/span&gt; + ex.getClass().getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt; + ex.getMessage());
      ex.printStackTrace(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out);
    }
  }

  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FileObjectReadingThread &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt; {

    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; filePath;

    FileObjectReadingThread(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pathname) {
      filePath = pathname;
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        FileSystemManager fileSystemManager = createFileSystemManager();
        FileObject fileObject = fileSystemManager.resolveFile(filePath);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot; running with FileObject &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.identityHashCode(fileObject));
        FileObject[] children = fileObject.getChildren();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (FileObject child : children) {
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (child.getType() == FileType.FILE &amp;amp;&amp;amp; child.isReadable()) {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot; is reading &quot;&lt;/span&gt; + child);
            FileUtil.getContent(child);
          }
          &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1); &lt;span class=&quot;code-comment&quot;&gt;// force a yield to other threads
&lt;/span&gt;        }
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot; caught &quot;&lt;/span&gt; + ex.getClass().getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt; + ex.getMessage());
        ex.printStackTrace(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out);
      }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; FileSystemManager createFileSystemManager() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
      DefaultFileSystemManager fileSystemManager = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StandardFileSystemManager();
      fileSystemManager.init();
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fileSystemManager;
    }
  }


}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16696194" author="ottobackwards" created="Thu, 22 Nov 2018 18:44:49 +0000"  >&lt;p&gt;The things you are dealing with here:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Static FileSystemManager&lt;/li&gt;
	&lt;li&gt;Threads&lt;/li&gt;
	&lt;li&gt;Non-Thread Safe Content&lt;/li&gt;
	&lt;li&gt;Cache&lt;/li&gt;
	&lt;li&gt;Using the FileSystem abstractly ( not having to &quot;know&quot; the fs type )&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There a number of different approaches, all with trade-offs, I&apos;m sure you all have thought of some as well.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16699478" author="daryl.odnert" created="Mon, 26 Nov 2018 19:43:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt; - Yes, I know there are a number of different approaches to work around the problem. I logged this bug report as a request to either fix the software (if there is agreement that there is a defect) or fix the documentation if my multi-threaded application is using VFS&#160;incorrectly.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16699541" author="ottobackwards" created="Mon, 26 Nov 2018 20:27:39 +0000"  >&lt;p&gt;From what I can see in past issues, this is not a defect. &#160;That is why they are not documented as thread safe or immutable. &#160;You can look at &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-253&quot; title=&quot;AbstractFileObject: wrong synchronization of content-related code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-253&quot;&gt;VFS-253&lt;/a&gt; as well, which I just found.&lt;/p&gt;

&lt;p&gt;I would suggest creating a Jira to explicitly state in documentation what is and is not thread safe.&lt;/p&gt;

&lt;p&gt;You may also want to start a &lt;span class=&quot;error&quot;&gt;&amp;#91;DISCUSS&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;VFS&amp;#93;&lt;/span&gt; thread on the commons dev mailing list about the issue.&lt;/p&gt;

&lt;p&gt;I am sorry if I have frustrated you, basically working through the issue to get back to where you started.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16699602" author="daryl.odnert" created="Mon, 26 Nov 2018 21:31:57 +0000"  >&lt;p&gt;I have logged&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-684&quot; title=&quot;Missing thread-safety information in API documentation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-684&quot;&gt;VFS-684&lt;/a&gt; requesting that the documentation should be fixed. I&apos;m reluctant to start a discussion on the mailing list about the issue as I&apos;m not currently a subscriber and don&apos;t want to subscribe just for the purpose of raising this issue. If you think it&apos;s the right thing to do, we can close this issue as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-684&quot; title=&quot;Missing thread-safety information in API documentation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-684&quot;&gt;VFS-684&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17575316" author="JIRAUSER293862" created="Thu, 4 Aug 2022 15:29:41 +0000"  >&lt;p&gt;Is there any consensus on what to do about the concurrency problem with &lt;tt&gt;org.apache.commons.vfs2.impl.VFSClassLoader&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;Removing implementations of ZipFileObject#doAttach and ZipFileObject#doDetach prevents the error indicated in the issue description, but I&apos;m not sure that is a reasonable long-term fix.&lt;/p&gt;</comment>
                            <comment id="17575401" author="garydgregory" created="Thu, 4 Aug 2022 18:45:11 +0000"  >&lt;p&gt;The best thing to do IMO is to document the behavior as not thread safe.&lt;/p&gt;</comment>
                            <comment id="17577602" author="JIRAUSER293862" created="Tue, 9 Aug 2022 19:33:58 +0000"  >&lt;p&gt;I created a &lt;a href=&quot;https://github.com/davem62210/commons-vfs/compare/threads-and-classloading&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt; with a new test case to show the failure.&lt;/p&gt;

&lt;p&gt;Are you saying this case is expected to fail? If so that is surprising.&lt;/p&gt;</comment>
                            <comment id="17600074" author="garydgregory" created="Sun, 4 Sep 2022 15:37:45 +0000"  >&lt;p&gt;I don&apos;t think there is an expectation of failure, but I do not think multi-threading was baked in the design and coding initially. While we have changed the code in an ad-hoc manner here and there over the years to avoid multi-threading issues, it is still the case unless something is actually documented as thread-safe and/or immutable, you should not assume it is safe to use in a multi-threading context.&lt;/p&gt;</comment>
                            <comment id="17676766" author="ibella" created="Fri, 13 Jan 2023 20:57:43 +0000"  >&lt;p&gt;I just submitted a PR that fixes this issue.&#160; Using the VFSClassLoader is not the only way to demonstrate this particular issue.&#160; I think my solution is relatively simple and will alleviate a good set of thread safety issues.&lt;/p&gt;</comment>
                            <comment id="17676792" author="garydgregory" created="Sat, 14 Jan 2023 00:01:43 +0000"  >&lt;p&gt;Except that there are failures in builds that seem random but must be related.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12424815">VFS-253</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13200682">VFS-684</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12949128" name="Main.java" size="2043" author="daryl.odnert" created="Thu, 22 Nov 2018 00:33:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00ps0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-679] NullPointerException in FtpFileObject.doGetLastModifiedTime()</title>
                <link>https://issues.apache.org/jira/browse/VFS-679</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;This is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-294&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS-294&lt;/a&gt;&#160;but it is very old so I&apos;m not sure how relevant it is.&lt;/p&gt;

&lt;p&gt;We&apos;re getting numerous exceptions like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.commons.vfs2.FileSystemException: Could not determine the size of file &quot;ftp://ftp.pbteu.com/VMRType.reg&quot;.
 at org.apache.commons.vfs2.provider.DefaultFileContent.getSize(DefaultFileContent.java:134)
 ...
 at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1135)
 at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
 at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: java.lang.NullPointerException: null
 at org.apache.commons.vfs2.provider.ftp.FtpFileObject.doGetContentSize(FtpFileObject.java:449)
 at org.apache.commons.vfs2.provider.DefaultFileContent.getSize(DefaultFileContent.java:132)
 ... 13 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;10:21:15.427 [Thread-20] ERROR o.a.c.vfs2.impl.DefaultFileMonitor - Could not determine the last modified timestamp of &quot;ftp://ftp.pbteu.com/VMRType.reg&quot;.
org.apache.commons.vfs2.FileSystemException: Could not determine the last modified timestamp of &quot;ftp://ftp.pbteu.com/VMRType.reg&quot;.
 at org.apache.commons.vfs2.provider.DefaultFileContent.getLastModifiedTime(DefaultFileContent.java:156)
 at org.apache.commons.vfs2.impl.DefaultFileMonitor$FileMonitorAgent.check(DefaultFileMonitor.java:526)
 at org.apache.commons.vfs2.impl.DefaultFileMonitor$FileMonitorAgent.access$200(DefaultFileMonitor.java:367)
 at org.apache.commons.vfs2.impl.DefaultFileMonitor.run(DefaultFileMonitor.java:330)
 at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: java.lang.NullPointerException: null
 at org.apache.commons.vfs2.provider.ftp.FtpFileObject.doGetLastModifiedTime(FtpFileObject.java:469)
 at org.apache.commons.vfs2.provider.DefaultFileContent.getLastModifiedTime(DefaultFileContent.java:154)
 ... 4 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is happening on 2.2 and on the current trunk. I&apos;m not sure where to start digging from but this is a show-stopper for us. Any help is appreciated!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13196774">VFS-679</key>
            <summary>NullPointerException in FtpFileObject.doGetLastModifiedTime()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="boris-petrov">Boris Petrov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Nov 2018 09:27:43 +0000</created>
                <updated>Tue, 20 Nov 2018 21:31:18 +0000</updated>
                            <resolved>Tue, 20 Nov 2018 21:31:18 +0000</resolved>
                                    <version>Nightly Builds</version>
                    <version>2.2</version>
                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16693803" author="garydgregory" created="Tue, 20 Nov 2018 21:31:18 +0000"  >&lt;p&gt;Committed to svn trunk.&lt;/p&gt;

&lt;p&gt;Please try 2.3-SNAPSHOT.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s007s8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-678] LGTM (automatic code review) issues</title>
                <link>https://issues.apache.org/jira/browse/VFS-678</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The LGTM.com code review system has some issues with VFS2 code:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lgtm.com/projects/g/apache/commons-vfs/alerts/?mode=list&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lgtm.com/projects/g/apache/commons-vfs/alerts/?mode=list&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Namely: &lt;/p&gt;

&lt;p&gt;DefaultCryptor.java: 111,114 - index might be equal to array length&lt;br/&gt;
MonitorInputStream.java: 60, 86 - method overwrites a synchronized method&lt;br/&gt;
UserAuthenticationData.java: 132 - test always false&lt;br/&gt;
Shell.java: 157 - array to string&lt;br/&gt;
DefaultFileMonitor.java: 493: - may be null&lt;br/&gt;
ShowFileTask.java: 126 - resource leak&lt;br/&gt;
FileName.java: 144 - javadoc&lt;br/&gt;
CompressedFileFileProvider.java: 42 - javadoc&lt;/p&gt;</description>
                <environment></environment>
        <key id="13195760">VFS-678</key>
            <summary>LGTM (automatic code review) issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Nov 2018 21:57:01 +0000</created>
                <updated>Wed, 7 Nov 2018 17:57:12 +0000</updated>
                            <resolved>Fri, 2 Nov 2018 23:02:28 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16672360" author="b.eckenfels" created="Thu, 1 Nov 2018 23:27:11 +0000"  >&lt;p&gt;Hopefully fixed with&#160;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1845521&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1845521&amp;amp;view=rev&lt;/a&gt;&#160;(amended by &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1845523&amp;amp;view=rev).&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1845523&amp;amp;view=rev).&lt;/a&gt;&#160;Waiting for git-mirror and LGTM.com to catch up before I close this.&#160;&lt;/p&gt;</comment>
                            <comment id="16673796" author="b.eckenfels" created="Fri, 2 Nov 2018 23:02:28 +0000"  >&lt;p&gt;Ok, no LGTM alerts left.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s001jk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-677] [SFTP] Add support for append mode.</title>
                <link>https://issues.apache.org/jira/browse/VFS-677</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I am trying to append content to a sftp file. but vfs seems not supports that.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;My test code:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FileObject file = fsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//root:xxx@192.168.1.1:22/sftpappend.txt&quot;&lt;/span&gt; );
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!file.exists()) {
    file.createFile();
}

FileContent content = file.getContent();
OutputStream outputStream = content.getOutputStream(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Error info :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs2.FileSystemException: The file type does not support append mode.

at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1180)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:413)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I checked the source code. seems its easy to support APPEND option in sftp. &lt;font color=&quot;#FF0000&quot;&gt;Why commons-vfs doesn&apos;t do that?&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.provider.sftp.SftpFileObject#doGetOutputStream&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12945512/12945512_image-2018-10-25-11-10-10-799.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;commons-vfs2&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.2&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="13194032">VFS-677</key>
            <summary>[SFTP] Add support for append mode.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dingxb">dingxbcn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Oct 2018 03:12:09 +0000</created>
                <updated>Mon, 1 Apr 2019 20:34:06 +0000</updated>
                            <resolved>Thu, 24 Jan 2019 23:47:27 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16663276" author="dingxb" created="Thu, 25 Oct 2018 05:50:17 +0000"  >&lt;p&gt;I changed 2 class then sftp APPEND mode works well.&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12945536/12945536_image-2018-10-25-13-48-58-673.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12945537/12945537_image-2018-10-25-13-49-13-334.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16671636" author="boris-petrov" created="Thu, 1 Nov 2018 13:51:49 +0000"  >&lt;p&gt;Could you create a pull-request for that on&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GitHub&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16683114" author="dingxb" created="Mon, 12 Nov 2018 01:40:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=boris-petrov&quot; class=&quot;user-hover&quot; rel=&quot;boris-petrov&quot;&gt;boris-petrov&lt;/a&gt; &lt;br/&gt;
Glad to do that&lt;/p&gt;</comment>
                            <comment id="16683121" author="dingxb" created="Mon, 12 Nov 2018 01:52:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Pull request committed.&lt;/p&gt;</comment>
                            <comment id="16751702" author="garydgregory" created="Thu, 24 Jan 2019 23:47:27 +0000"  >&lt;p&gt;In svn trunk. Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12945512" name="image-2018-10-25-11-10-10-799.png" size="64179" author="dingxb" created="Thu, 25 Oct 2018 03:10:27 +0000"/>
                            <attachment id="12945536" name="image-2018-10-25-13-48-58-673.png" size="91895" author="dingxb" created="Thu, 25 Oct 2018 05:49:01 +0000"/>
                            <attachment id="12945537" name="image-2018-10-25-13-49-13-334.png" size="175100" author="dingxb" created="Thu, 25 Oct 2018 05:49:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/42]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zm5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-675] NullPointerException at AbstractFileObject.java:221</title>
                <link>https://issues.apache.org/jira/browse/VFS-675</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I am seeing random instance in my app&apos;s tests of:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
&#160;&#160; &#160;at org.apache.commons.vfs2.provider.AbstractFileObject.close(AbstractFileObject.java:221)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I can only attribute this to multiple threads closing the same file object.&lt;br/&gt;
I will add a sync block.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13186182">VFS-675</key>
            <summary>NullPointerException at AbstractFileObject.java:221</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Sep 2018 22:27:41 +0000</created>
                <updated>Wed, 7 Nov 2018 17:57:09 +0000</updated>
                            <resolved>Wed, 19 Sep 2018 22:34:50 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y9zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-674] Cannot close an FTP input stream without an exception</title>
                <link>https://issues.apache.org/jira/browse/VFS-674</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The FTP server is FileZilla.&lt;/p&gt;

&lt;p&gt;1. Get a stream instance from an FtpFileObject via the `getInputStream` method.&lt;br/&gt;
 2. Read some bytes from the stream.&lt;br/&gt;
 3. Close the stream via `stream.close()`.&lt;br/&gt;
 4. If the stream has not been completely read, the FTP server sends a `426 Connection closed; transfer aborted` response code.&lt;br/&gt;
 5. `FtpFileObject::onClose` is called.&lt;br/&gt;
 6. Eventually `FTPReply::isPositiveCompletion` is called.&lt;br/&gt;
 7. Since the response code is outside the [200; 300) range it is considered an error.&lt;br/&gt;
 8. A `FileSystemException` is thrown.&lt;/p&gt;

&lt;p&gt;The overall result is that when closing a stream that is not completely read an exception is thrown. Which is obviously wrong.&lt;/p&gt;

&lt;p&gt;A similar things happens with this piece of code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileContent content = ftpFileObject.getContent()) {
    &lt;span class=&quot;code-comment&quot;&gt;// ......
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is there an easy way we can patch this in VFS as this is a showstopper for us?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183989">VFS-674</key>
            <summary>Cannot close an FTP input stream without an exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="boris-petrov">Boris Petrov</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 10 Sep 2018 09:44:12 +0000</created>
                <updated>Tue, 20 Nov 2018 15:04:13 +0000</updated>
                            <resolved>Tue, 20 Nov 2018 15:04:13 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16676880" author="boris-petrov" created="Tue, 6 Nov 2018 15:15:45 +0000"  >&lt;p&gt;I&apos;ve added a pull-request&#160;that fixes&#160;this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/41&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16693343" author="garydgregory" created="Tue, 20 Nov 2018 15:04:13 +0000"  >&lt;p&gt;Applied a modified patch from Boris Petrov to avoid breaking binary compatibility. &lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xwjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-669] org.apache.commons.vfs2.util.CombinedResources.loadResources(String) should not throw an NPE for the system class loader is null</title>
                <link>https://issues.apache.org/jira/browse/VFS-669</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The method &lt;tt&gt;org.apache.commons.vfs2.util.CombinedResources.loadResources(String)&lt;/tt&gt; should not throw an NPE for the system classs loader is null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13173850">VFS-669</key>
            <summary>org.apache.commons.vfs2.util.CombinedResources.loadResources(String) should not throw an NPE for the system class loader is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jul 2018 15:56:55 +0000</created>
                <updated>Wed, 7 Nov 2018 17:57:10 +0000</updated>
                            <resolved>Mon, 23 Jul 2018 16:00:00 +0000</resolved>
                                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16553031" author="garydgregory" created="Mon, 23 Jul 2018 16:00:00 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w6jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-665] Apache VFS FileObject copyFrom() Exception</title>
                <link>https://issues.apache.org/jira/browse/VFS-665</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&#160;&lt;br/&gt;
 I am using the below class to transfer a file from one folder to another on a server I am using commons-vfs-2.0 jar. :&lt;/p&gt;

&lt;p&gt;import org.apache.commons.vfs.FileObject;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.vfs.FileSystemException;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.vfs.FileSystemOptions;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.vfs.Selectors;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.vfs.impl.StandardFileSystemManager;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.vfs.provider.sftp.SftpFileSystemConfigBuilder;&lt;/p&gt;

&lt;p&gt;public class SFTPTest {&lt;/p&gt;

&lt;p&gt;public static void main(String args[]) {&lt;/p&gt;

&lt;p&gt;try&lt;/p&gt;

{ String ftpUrlSrc = &quot;sftp.host.address&quot; + &quot;:&quot; + &quot;8022&quot; + &quot;/SRC_FOLDER&quot;; String sftpUriSrc = &quot;sftp://&quot; + &quot;sftpUser&quot; + &quot;:&quot; + &quot;pass$123&quot; + &quot;@&quot; + ftpUrlSrc;

String ftpUrlDest = &quot;sftp.host.address&quot; + &quot;:&quot; + &quot;8022&quot; + &quot;/DEST_FOLDER&quot;; String sftpUriDest = &quot;sftp://&quot; + &quot;sftpUser&quot; + &quot;:&quot; + &quot;pass$123&quot; + &quot;@&quot; + ftpUrlDest; StandardFileSystemManager manager = new StandardFileSystemManager(); FileSystemOptions opts = new FileSystemOptions(); SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(opts, &quot;no&quot;); manager.init();

FileObject fileObjectSrc = manager.resolveFile(sftpUriSrc + &quot;/&quot; + &quot;trial_file.tar.gz&quot;, opts); FileObject fileObjectDest = manager.resolveFile(sftpUriDest + &quot;/&quot; + &quot;trial_file.tar.gz&quot;, opts); fileObjectDest.copyFrom(fileObjectSrc, Selectors.SELECT_SELF);

//The below moveTo() call works without any issue.

fileObjectSrc.moveTo(fileObjectDest);

}

&lt;p&gt;catch (FileSystemException e)&lt;/p&gt;

{ // TODO Auto-generated catch block e.printStackTrace(); }

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;The below exception is being thrown:&lt;/p&gt;

&lt;p&gt;&#160;org.apache.commons.vfs.FileSystemException: Could not copy &quot;sftp://sftpUser:**&lt;b&gt;@sftp.host.address:8022/SRC_FOLDER/trial_file.tar.gz&quot; to &quot;sftp://sftpUser:&lt;/b&gt;*&lt;b&gt;@sftp.host.address:8022/DEST_FOLDER/trial_file.tar.gz&quot;. at org.apache.commons.vfs.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:1032) at SFTPTest.main(SFTPTest.java:27)&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;&lt;b&gt;Caused by: org.apache.commons.vfs.FileSystemException: Could not close the output stream for file &quot;sftp://sftpUser:&lt;/b&gt;**@sftp.host.address:8022/DEST_FOLDER/trial_file.tar.gz&quot;. at org.apache.commons.vfs.provider.DefaultFileContent$FileContentOutputStream.close(DefaultFileContent.java:686) at org.apache.commons.vfs.FileUtil.copyContent(FileUtil.java:119) at org.apache.commons.vfs.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:1023) ... 1 more&lt;/p&gt;

&lt;p&gt;Caused by: java.io.IOException: 4: Transfer failed possibly due to access restrictions. at com.jcraft.jsch.ChannelSftp$1.flush(ChannelSftp.java:858) at com.jcraft.jsch.ChannelSftp$1.close(ChannelSftp.java:867) at java.io.FilterOutputStream.close(FilterOutputStream.java:160) at org.apache.commons.vfs.util.MonitorOutputStream.close(MonitorOutputStream.java:56) at java.io.FilterOutputStream.close(FilterOutputStream.java:160) at org.apache.commons.vfs.util.MonitorOutputStream.close(MonitorOutputStream.java:56) at org.apache.commons.vfs.provider.DefaultFileContent$FileContentOutputStream.close(DefaultFileContent.java:682) ... 3 more}}{{}}&lt;/p&gt;</description>
                <environment></environment>
        <key id="13170301">VFS-665</key>
            <summary>Apache VFS FileObject copyFrom() Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="norva">Yogesh Kumar</reporter>
                        <labels>
                            <label>FileObject</label>
                            <label>vfs</label>
                    </labels>
                <created>Thu, 5 Jul 2018 15:38:37 +0000</created>
                <updated>Thu, 5 Jul 2018 16:10:33 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16533844" author="garydgregory" created="Thu, 5 Jul 2018 15:57:42 +0000"  >&lt;p&gt;What happens when you try the current version of Commons VFS: 2.2?&lt;/p&gt;</comment>
                            <comment id="16533857" author="norva" created="Thu, 5 Jul 2018 16:10:33 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;, in the current version 2.2 also i am getting the same exception.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vkyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-664] ZipFileObject can&apos;t list children file with exclamation mark in name.</title>
                <link>https://issues.apache.org/jira/browse/VFS-664</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;if zip file contains exclamation mark, ZipFileObject#getChildren() doesn&apos;t contain that file.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
StandardFileSystemManager sfm = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StandardFileSystemManager();
sfm.init();
FileObject fileObject = sfm.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;zip:zip-with-file-contains-exclamation.zip&quot;&lt;/span&gt;);
FileObject[] children = fileObject.getChildren();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (children != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; children.length; i++) {
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(children[i].getName().toString());
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;if zip-with-file-contains-exclamation.zip contains files &quot;00&quot;, &quot;0!1&quot;, &quot;02&quot;, this code will output &quot;00&quot; and &quot;02&quot; without &quot;0!1&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13169717">VFS-664</key>
            <summary>ZipFileObject can&apos;t list children file with exclamation mark in name.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lijunwu001">Lijun Wu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jul 2018 07:36:51 +0000</created>
                <updated>Mon, 2 Nov 2020 02:24:01 +0000</updated>
                            <resolved>Mon, 2 Nov 2020 02:24:01 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16752252" author="garydgregory" created="Fri, 25 Jan 2019 13:25:31 +0000"  >&lt;p&gt;Patches and units tests are welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12408453">VFS-225</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vhcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-663] SftpClientFactory does not pass proxyUser or proxyPassword to non-PROXY_STREAM types</title>
                <link>https://issues.apache.org/jira/browse/VFS-663</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I&apos;ve discovered that while version 2.1 added `setProxyUser` and `setProxyPassword`&#160;to `SftpFileSystemConfigBuilder`, these properties are only read via `getProxyUser` and `getProxyPassword` for the `ProxyType` `PROXY_STREAM`.&#160;They are not, however, used for the other two supported proxy types (`PROXY_HTTP` and `PROXY_SOCKS5`)&lt;/p&gt;

&lt;p&gt;The fix for this is reasonably straightforward, as both `com.jcraft.jsch.ProxyHTTP` and `com.jcraft.jsch.ProxySOCKS5` support a `setUserPasswd` function and utilization of a username and password for connection.&lt;/p&gt;

&lt;p&gt;I&apos;ve created a fork with the changes I would propose to fix the bug, but am open to changes with it if I have missed any style guidelines. I am unsure how to go about writing a clear test for this and would love some assistance in doing so, however I have built the fork and imported it into a project my client is working on, and it seems to have solved the issue we were having (an exception was being thrown, &apos;Proxy Authentication Required&apos;).&lt;/p&gt;

&lt;p&gt;I would welcome feedback and hope to resolve this issue so that other users of the library will be able to connect to authenticated proxies easily!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156228">VFS-663</key>
            <summary>SftpClientFactory does not pass proxyUser or proxyPassword to non-PROXY_STREAM types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="willbuck">Will Buck</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Apr 2018 21:34:28 +0000</created>
                <updated>Wed, 1 May 2019 20:45:10 +0000</updated>
                                            <version>2.1</version>
                    <version>2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16459108" author="willbuck" created="Mon, 30 Apr 2018 21:36:35 +0000"  >&lt;p&gt;Link to the PR of my forked branch to trunk:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/37&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/37&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/37]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t71r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-662] SftpFileSystem  has Thread-safe issue about idleChannel</title>
                <link>https://issues.apache.org/jira/browse/VFS-662</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{code:java}
Caused by: org.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at
at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getChannel (SftpFileSystem.java:149)
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.statSelf (SftpFileObject.java:152)
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetType (SftpFileObject.java:113)
at org.apache.commons.vfs2.provider.AbstractFileObject.getType (AbstractFileObject.java:1517)
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.refresh (SftpFileObject.java:90)
at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile (AbstractFileSystem.java:364)
at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile (AbstractFileSystem.java:317)
at org.apache.commons.vfs2.provider.AbstractFileObject.resolveFile (AbstractFileObject.java:2039)
at org.apache.commons.vfs2.FileObject$resolveFile$23.call (Unknown Source)



Caused by: com.jcraft.jsch.JSchException: java.io.IOException: channel is broken
at com.jcraft.jsch.ChannelSftp.start (ChannelSftp.java:315)
at com.jcraft.jsch.Channel.connect (Channel.java:152)
at com.jcraft.jsch.Channel.connect (Channel.java:145)
at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getChannel (SftpFileSystem.java:113)
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetOutputStream (SftpFileObject.java:635)
at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream (AbstractFileObject.java:1399)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream (DefaultFileContent.java:479)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream (DefaultFileContent.java:457)



Caused by: com.jcraft.jsch.JSchException: java.net.SocketException: Broken pipe (Write failed)
at com.jcraft.jsch.Channel.connect (Channel.java:159)
at com.jcraft.jsch.Channel.connect (Channel.java:145)
at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getChannel (SftpFileSystem.java:113)
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetOutputStream (SftpFileObject.java:635)
at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream (AbstractFileObject.java:1399)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream (DefaultFileContent.java:479)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream (DefaultFileContent.java:457)


Caused by: java.io.IOException: inputstream is closed
at com.jcraft.jsch.ChannelSftp.fill (ChannelSftp.java:2911)
at com.jcraft.jsch.ChannelSftp.header (ChannelSftp.java:2935)
at com.jcraft.jsch.ChannelSftp.checkStatus (ChannelSftp.java:2473)
at com.jcraft.jsch.ChannelSftp.access$300 (ChannelSftp.java:36)
at com.jcraft.jsch.ChannelSftp$1.flush (ChannelSftp.java:851)
at java.io.BufferedOutputStream.flush (BufferedOutputStream.java:141)
at org.apache.commons.vfs2.util.MonitorOutputStream.flush (MonitorOutputStream.java:134)
at java.io.BufferedOutputStream.flush (BufferedOutputStream.java:141)
at org.apache.commons.vfs2.util.MonitorOutputStream.flush (MonitorOutputStream.java:134)




Caused by: com.jcraft.jsch.JSchException: session is down
at com.jcraft.jsch.Channel.sendChannelOpen (Channel.java:762)
at com.jcraft.jsch.Channel.connect (Channel.java:151)
at com.jcraft.jsch.Channel.connect (Channel.java:145)
at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getChannel (SftpFileSystem.java:113)
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetOutputStream (SftpFileObject.java:635)
at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream (AbstractFileObject.java:1399)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream (DefaultFileContent.java:479)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream (DefaultFileContent.java:457)


Caused by: java.net.SocketException: Broken pipe (Write failed)
at java.net.SocketOutputStream.socketWrite0 (Native Method)
at java.net.SocketOutputStream.socketWrite (SocketOutputStream.java:111)
at java.net.SocketOutputStream.write (SocketOutputStream.java:155)
at com.jcraft.jsch.IO.put (IO.java:60)
at com.jcraft.jsch.Session._write (Session.java:1379)
at com.jcraft.jsch.Session.write (Session.java:1343)
at com.jcraft.jsch.ChannelSftp.sendOPEN (ChannelSftp.java:2583)
at com.jcraft.jsch.ChannelSftp.sendOPENW (ChannelSftp.java:2571)
at com.jcraft.jsch.ChannelSftp.put (ChannelSftp.java:753)
at com.jcraft.jsch.ChannelSftp.put (ChannelSftp.java:709)
at com.jcraft.jsch.ChannelSftp.put (ChannelSftp.java:703)
at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetOutputStream (SftpFileObject.java:636)
at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream (AbstractFileObject.java:1399)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream (DefaultFileContent.java:479)
at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream (DefaultFileContent.java:457)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the patch code : &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/36&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/36&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13154700">VFS-662</key>
            <summary>SftpFileSystem  has Thread-safe issue about idleChannel</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qxo">qxo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2018 05:20:55 +0000</created>
                <updated>Wed, 5 Aug 2020 16:58:29 +0000</updated>
                            <resolved>Mon, 29 Apr 2019 15:50:36 +0000</resolved>
                                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16829369" author="garydgregory" created="Mon, 29 Apr 2019 15:50:36 +0000"  >&lt;p&gt;In git master. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="17170858" author="manishbansal8843" created="Tue, 4 Aug 2020 15:02:50 +0000"  >&lt;p&gt;This issue is still not fixed. Although author made correct changes, but the changes merged were not proper. Can anyone please check. I have raised the same issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-778&quot; title=&quot;SftpFileSystem returning null channel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-778&quot;&gt;VFS-778&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17170874" author="garydgregory" created="Tue, 4 Aug 2020 15:20:42 +0000"  >&lt;p&gt;Feel free to provide a fresh PR &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17171620" author="manishbansal8843" created="Wed, 5 Aug 2020 16:58:29 +0000"  >&lt;p&gt;Already did. &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/98&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/98&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/36]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sxpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-659] Inconsistent behavior with VFS.isUriStyle setting</title>
                <link>https://issues.apache.org/jira/browse/VFS-659</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When enabling the VFS.isUriStyle setting to have URI formats containing a trailing SEPARATOR_CHAR when the FileObject points to a directory, I discovered that filename parsing would not work as expected.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;getParent() does not seem to return the correct parent in the URI.&lt;/li&gt;
	&lt;li&gt;getPath() would sometimes lead to a double SEPARATOR_CHAR returned (I am not sure but this patch could possible issues in SMB parsing?)&lt;/li&gt;
	&lt;li&gt;createURI() would also return an invalid value, but maybe this patch might break the non URI style configuration.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have included the patch in attachment, maybe it will be of some use to someone, but please double check it before applying, as my objective was to make it work in my use-case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13151787">VFS-659</key>
            <summary>Inconsistent behavior with VFS.isUriStyle setting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cecodere">Carl Eric Codere</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Apr 2018 21:20:06 +0000</created>
                <updated>Wed, 11 Apr 2018 21:20:06 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                            <attachment id="12918627" name="AbstractFileName.patch" size="2398" author="cecodere" created="Wed, 11 Apr 2018 21:18:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sfun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-658] org.apache.commons.vfs2.util.CombinedResources.getKeys() fail</title>
                <link>https://issues.apache.org/jira/browse/VFS-658</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Invoke CombinedResource.getKeys()&#160;could lead to a dead cycle. source code :&lt;/p&gt;

&lt;p&gt;@Override&lt;br/&gt;
 public Enumeration&amp;lt;String&amp;gt; getKeys() {&lt;br/&gt;
 if (!inited)&lt;/p&gt;

{ init(); }

&lt;p&gt;&lt;b&gt;return new Enumeration&amp;lt;String&amp;gt;() {&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;@Override&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;public boolean hasMoreElements() {&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;return properties.keys().hasMoreElements();&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;}&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;@Override&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;public String nextElement() {&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;// We know that our properties will only ever contain Strings&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;return (String) properties.keys().nextElement();&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;}&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;}&lt;/b&gt;;&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt;The bold code above has bugs, the right code may be like below:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;return new Enumeration&amp;lt;String&amp;gt;() {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;Enumeration&amp;lt;Object&amp;gt; proEnums = CombinedResources.this.properties.keys();&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;@Override&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;public boolean hasMoreElements() {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;return this.proEnums.hasMoreElements();&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;@Override&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;public String nextElement() {&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;// We know that our properties will only ever contain Strings&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;return (String) this.proEnums.nextElement();&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;}&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;};&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13149877">VFS-658</key>
            <summary>org.apache.commons.vfs2.util.CombinedResources.getKeys() fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Bingo">binchen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Apr 2018 02:32:24 +0000</created>
                <updated>Wed, 1 May 2019 20:45:10 +0000</updated>
                                            <version>2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16427537" author="garydgregory" created="Thu, 5 Apr 2018 20:25:54 +0000"  >&lt;p&gt;Thank you for your report &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bingo&quot; class=&quot;user-hover&quot; rel=&quot;Bingo&quot;&gt;Bingo&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Can you provide a PR with a unit test on GitHub? &lt;a href=&quot;https://github.com/apache/commons-vfs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It is best if the unit test fails without the main code changes.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3s43z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-657] FileSelector implementations like FileDepthSelector should throw Exception</title>
                <link>https://issues.apache.org/jira/browse/VFS-657</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.commons.vfs2.FileDepthSelector&lt;/tt&gt; should throw an &lt;tt&gt;Exception&lt;/tt&gt; as stated in the interface &lt;tt&gt;org.apache.commons.vfs2.FileSelector&lt;/tt&gt;, otherwise if you try to extend it the child class cannot throw an exception.&lt;/p&gt;

&lt;p&gt;I tried to create a class combining the functionality of the &lt;tt&gt;FileDepthSelector&lt;/tt&gt; and &lt;tt&gt;FileTypeSelector&lt;/tt&gt; but couldn&apos;t because checking the file type throws an exception.&lt;/p&gt;

&lt;p&gt;Another issue: Why is the depth of &lt;tt&gt;FileFilterSelector&lt;/tt&gt; hard coded?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13148586">VFS-657</key>
            <summary>FileSelector implementations like FileDepthSelector should throw Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="eputz">Elias Putz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Mar 2018 14:27:29 +0000</created>
                <updated>Wed, 7 Nov 2018 17:57:06 +0000</updated>
                            <resolved>Thu, 29 Mar 2018 19:16:34 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16419038" author="garydgregory" created="Thu, 29 Mar 2018 14:00:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eputz&quot; class=&quot;user-hover&quot; rel=&quot;eputz&quot;&gt;eputz&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;It seems this affects all implementations of &lt;tt&gt;org.apache.commons.vfs2.FileSelector&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;We welcome patches &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;
</comment>
                            <comment id="16419251" author="eputz" created="Thu, 29 Mar 2018 16:02:37 +0000"  >&lt;p&gt;Created a pull request:&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/33&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16419615" author="garydgregory" created="Thu, 29 Mar 2018 19:16:34 +0000"  >&lt;p&gt;Fixed in svn trunk. Please verify and close this ticket.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit -m &quot;[VFS-657] FileSelector implementations like FileDepthSelector should throw Exception.&quot; -N (7 paths specified)
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/main/java/org/apache/commons/vfs2/AllFileSelector.java
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/main/java/org/apache/commons/vfs2/FileDepthSelector.java
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/main/java/org/apache/commons/vfs2/FileExtensionSelector.java
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/main/java/org/apache/commons/vfs2/FileFilterSelector.java
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/main/java/org/apache/commons/vfs2/FileTypeSelector.java
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/main/java/org/apache/commons/vfs2/PatternFileSelector.java
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/src/changes/changes.xml
Transmitting file data ...
Unknown action received: commit finalizing
Committed revision 1828015.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16423594" author="eputz" created="Tue, 3 Apr 2018 07:41:03 +0000"  >&lt;p&gt;The pull request is still open? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16424777" author="garydgregory" created="Tue, 3 Apr 2018 23:47:59 +0000"  >&lt;p&gt;Please do close it. If forgot to say &quot;Closes #33&quot; in the commit comment which would have closed the PR. Can you do it manually as the creator of the PR?&lt;/p&gt;</comment>
                            <comment id="16425128" author="eputz" created="Wed, 4 Apr 2018 07:32:38 +0000"  >&lt;p&gt;I could close the PR and will close this issue as well, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rw6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-656] Allow to support Explicit key exchange algorithm SFTP with SftpFileSystemConfigBuilder</title>
                <link>https://issues.apache.org/jira/browse/VFS-656</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I&apos;m working with SFTP and&#160;SftpFileSystemConfigBuilder&lt;/p&gt;

&lt;p&gt;While I would like to set specific Key exchange algorithm - but it&apos;s not possible&#160;due to protected/private access.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think you should have a method for&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setKeyExchangeAlgorithm(FileSystemOptions opts, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; keyExchangeAlgoritm) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException
{
setParam(opts, &lt;span class=&quot;code-quote&quot;&gt;&quot;kex&quot;&lt;/span&gt;, keyExchangeAlgoritm);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Just like you have a method you already have.&#160; setStrictHostKeyChecking&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/EsupPortail/commons-vfs2-project-2.0/compare/master...KedemBarak:master&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/EsupPortail/commons-vfs2-project-2.0/compare/master...KedemBarak:master&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146181">VFS-656</key>
            <summary>Allow to support Explicit key exchange algorithm SFTP with SftpFileSystemConfigBuilder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Barak066">Barak Kedem</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2018 10:16:12 +0000</created>
                <updated>Fri, 25 Jan 2019 00:14:51 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16751727" author="garydgregory" created="Fri, 25 Jan 2019 00:14:51 +0000"  >&lt;p&gt;Patches on GitHub are welcome, as usual &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rhen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-655] OSGI MANIFEST.MF &quot;Import-Package&quot; should be &quot;;resolution:=optional&quot; for Maven &quot;optional&quot; dependencies</title>
                <link>https://issues.apache.org/jira/browse/VFS-655</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In the Maven &quot;pom.xml&quot; there are several &quot;optional&quot; dependencies&lt;/p&gt;

&lt;p&gt;In the &quot;Import-Package&quot; section of the MANIFEST.MF it should also be &quot;optional&quot;&lt;/p&gt;

&lt;p&gt;It is something that was fixed in 2.1 by &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-498&quot; title=&quot;OSGI MANIFEST.MF &amp;quot;Import-Package&amp;quot; should be &amp;quot;;resolution:=optional&amp;quot; for Maven &amp;quot;optional&amp;quot; dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-498&quot;&gt;&lt;del&gt;VFS-498&lt;/del&gt;&lt;/a&gt;, but for some reasons there is a regression in 2.2 for these dependencies, that came back as mandatory:&lt;br/&gt;
 org.apache.hadoop.xxx&lt;br/&gt;
 org.apache.jackrabbit.xxx&lt;br/&gt;
 org.apache.tools.ant&lt;br/&gt;
 &#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13142468">VFS-655</key>
            <summary>OSGI MANIFEST.MF &quot;Import-Package&quot; should be &quot;;resolution:=optional&quot; for Maven &quot;optional&quot; dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="amergey">Arnaud MERGEY</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Mon, 5 Mar 2018 11:01:36 +0000</created>
                <updated>Wed, 1 May 2019 20:45:10 +0000</updated>
                            <resolved>Mon, 12 Mar 2018 16:38:58 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="4"/>
                                    <progress percentage="4">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="4" backgroundColor="#51a825"/>
                                                    <row percentage="96" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="4">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="4" backgroundColor="#51a825"/>
                                                    <row percentage="96" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="13800">3h 50m</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16389016" author="garydgregory" created="Wed, 7 Mar 2018 04:36:56 +0000"  >&lt;p&gt;We welcome patches, for example as a PR on GitHub:&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16389341" author="amergey" created="Wed, 7 Mar 2018 10:03:09 +0000"  >&lt;p&gt;I have&#160;created pull request #31 on github&#160;&lt;/p&gt;</comment>
                            <comment id="16395480" author="garydgregory" created="Mon, 12 Mar 2018 16:38:58 +0000"  >&lt;p&gt;In svn trunk. Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12675995">VFS-498</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/31]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3quxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-652] PatternFileSelector inner workings in disagreement with documentation</title>
                <link>https://issues.apache.org/jira/browse/VFS-652</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Javadoc on class declaration defines:&lt;/p&gt;

&lt;p&gt;&quot;A {@link FileSelector} that selects based on regular expressions matched against &lt;b&gt;base filename&lt;/b&gt;.&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;But code uses &quot;path&quot; and not base filename on includeFile method:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;return this.pattern.matcher(fileInfo.getFile().getName().&lt;b&gt;getPath()&lt;/b&gt;).matches();&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13138876">VFS-652</key>
            <summary>PatternFileSelector inner workings in disagreement with documentation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="ivancruz">Ivan Camilo da Cruz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Feb 2018 19:37:01 +0000</created>
                <updated>Wed, 7 Nov 2018 17:57:10 +0000</updated>
                            <resolved>Sun, 18 Feb 2018 19:34:28 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16368647" author="b.eckenfels" created="Sun, 18 Feb 2018 19:34:28 +0000"  >&lt;p&gt;Since the behavior has not changed since it initial commit and the tests agree with the matching against `getPath()` I changed the documentation (and expanded the tests). Will be shipped with 2.2.1 and is commited as&#160;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1824691&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1824691&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16368654" author="garydgregory" created="Sun, 18 Feb 2018 19:50:35 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for the help! Do you feel like reviewing Jira and the ML for any low-hanging fruits and push out a 2.2.1? It seems like we&apos;ve had renewed interest recently on the ML...&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q8u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-651] SftpFileSystem Should not switch to root directory when not absolutely needed</title>
                <link>https://issues.apache.org/jira/browse/VFS-651</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Consider a user X only has read/write access to let&apos;s say /sftp and /sftp/abc directory on a sftp server. And&#160;default directory for user is /sftp&lt;br/&gt;
In this case, we have to set userDirIsRoot to false, and thus vfs will try to switch to root directory, which will fail due to lack of read permission.&lt;/p&gt;

&lt;p&gt;Consider following code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void uploadFile(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; localFilePath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException {    
    FileSystemManager manager = VFS.getManager();
    FileObject localFile = manager.resolveFile(localFilePath);

    FileSystemOptions opts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
    SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    &lt;span class=&quot;code-comment&quot;&gt;// I set it to &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// because user &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; dir is /sftp and it is obviously not root directory.
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// As a workaround, If I set it to &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, it will work after also tweaking with
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// the file path &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; resolving a file, but semantics will be wrong, since 
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// the user directory is not root.
&lt;/span&gt;
    SftpFileSystemConfigBuilder.getInstance().setTimeout(opts, 90000);

    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; remoteFilePath = &lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//myuser:mypass@myurl.sftpexample.com/sftp/abc/abc.txt&quot;&lt;/span&gt;;
&lt;/span&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// Exception at the following line
&lt;/span&gt;    FileObject remoteFile = manager.resolveFile(remoteFilePath, opts);
    &lt;span class=&quot;code-comment&quot;&gt;// Exception at the line above line. Because &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line tries to &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; to 
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// root directory of sftp file system, whichfails due to lack of read 
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// permission on root directory. Switching to root directory is not 
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// needed here at all. This is bug, although it works in most scenarios,
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// since most of times, permissions are available.
&lt;/span&gt;

    remoteFile.copyFrom(localFile, Selectors.SELECT_SELF);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;This is the underlying code responsible in&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.vfs.provider.sftp.SftpFileSystem
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; userDirIsRoot = SftpFileSystemConfigBuilder.getInstance().getUserDirIsRoot(getFileSystemOptions());
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; workingDirectory = getRootName().getPath();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (workingDirectory != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; (userDirIsRoot == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || !userDirIsRoot.booleanValue())) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        channel.cd(workingDirectory); 
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (SftpException e) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider.sftp/change-work-directory.error&quot;&lt;/span&gt;, workingDirectory);
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It purposelessly switches to root directory of filesystem. There is a fair use-case that root directory doesn&apos;t have read access.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Possible Fix:&lt;/b&gt; It should not switch to root directory, rather it should switch to actual final directory. This approach would be the safest. E.g. if the needed directory is &apos;/sftp/abc&apos; then it can switch to that directory in above code, rather than switching to root.&lt;/p&gt;

&lt;p&gt;Please also see related SO question:&lt;br/&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/48709971/why-apache-vfs-sftp-tries-to-switch-to-root-directory-even-when-not-needed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/48709971/why-apache-vfs-sftp-tries-to-switch-to-root-directory-even-when-not-needed&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13138250">VFS-651</key>
            <summary>SftpFileSystem Should not switch to root directory when not absolutely needed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aqeel613">Syed Aqeel Ashiq</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Feb 2018 17:23:36 +0000</created>
                <updated>Sat, 31 Oct 2020 20:08:52 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16363129" author="garydgregory" created="Tue, 13 Feb 2018 22:12:25 +0000"  >&lt;p&gt;We gladly accept PRs on GitHub &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16363225" author="ottobackwards" created="Tue, 13 Feb 2018 23:29:50 +0000"  >&lt;p&gt;Are we sure that this is not working correctly?&lt;/p&gt;

&lt;p&gt;Can you post a small snippet of code or a description of how you configure can connect? &#160;And what you are trying to do that does not work if you set it to true?&lt;/p&gt;</comment>
                            <comment id="16365483" author="aqeel613" created="Thu, 15 Feb 2018 12:47:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt; I have added sample source code, and some explanation in code comments above. Please have another look. Thanks in advance!!&lt;/p&gt;</comment>
                            <comment id="16365522" author="ottobackwards" created="Thu, 15 Feb 2018 13:30:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-vfs/filesystems.html#SFTP&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-vfs/filesystems.html#SFTP&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;URI Format&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;sftp://[ &lt;em&gt;username&lt;/em&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;: _password_&amp;#93;&lt;/span&gt;@] &lt;em&gt;hostname&lt;/em&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;: _port_&amp;#93;&lt;/span&gt;[ &lt;em&gt;relative-path&lt;/em&gt;]&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&quot;By default, the path is relative to the user&apos;s home directory&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Can you try setting the user dir is root to TRUE, and making your path relative?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16365822" author="ottobackwards" created="Thu, 15 Feb 2018 16:20:48 +0000"  >&lt;p&gt;UserDirIsRoot should be taken as &quot;The user directory is the &quot;root&quot; of all the paths.&lt;/p&gt;

&lt;p&gt;/home/foo -&amp;gt; user dir&lt;/p&gt;

&lt;p&gt;userDirIsRoot = true&lt;/p&gt;

&lt;p&gt;/folder/file.txt is passed in&lt;/p&gt;

&lt;p&gt;/home/foo/folder/file.txt is what you are going to get&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16366636" author="aqeel613" created="Fri, 16 Feb 2018 06:24:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt; Did you read the comments in the code snippet I shared? In comments I mentioned that setting userDirIsRoot = true and giving relative path relative to user&apos;s home directory can work as a hack-y workaround. But it has two problems:&lt;br/&gt;
1. When you set userDirIsRoot = true, although it works as a workaround, it means that you are saying that user directory is root directory. Which is logically incorrect, since user directory is not root directory in my case. Rather user dir is &quot;/sftp&quot;, and not root &quot;/&quot;.&lt;br/&gt;
2. It does not work when let&apos;s say user default dir is /sftp/abc/def. In that case, if you set userDirIsRoot = true, then we can never upload to /sftp/abc or /sftp.&lt;/p&gt;

&lt;p&gt;So, I would say, even if you can make it to work in some cases by incorrectly using userDirIsRoot = true, even then it doesn&apos;t change the fact that it is a flawed design in api(if not a bug) and should be corrected.&lt;/p&gt;</comment>
                            <comment id="16366859" author="ottobackwards" created="Fri, 16 Feb 2018 11:19:57 +0000"  >&lt;p&gt;Oh, tweaking. &#160;Right.&lt;/p&gt;

&lt;p&gt;I&apos;m sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aqeel613&quot; class=&quot;user-hover&quot; rel=&quot;aqeel613&quot;&gt;aqeel613&lt;/a&gt;, I&apos;m not a committer or even a contributor on this project. &#160;I use it on my apache project and saw your mail on the list and was curious so I thought I would take a look.&lt;/p&gt;

&lt;p&gt;As far as I can see it is working as designed. &#160;It makes sense to me for a file system to work like this, but if this where just a sftp client maybe it would be different.&lt;/p&gt;

&lt;p&gt;Maybe someone who participated in the design will be able to explain the reasons better than what I can say just from going through the code and documentation.&lt;/p&gt;</comment>
                            <comment id="16366899" author="aqeel613" created="Fri, 16 Feb 2018 11:58:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt; Thanks for your time an input. Really appreciated. It might be working as designed, but as I said it is flawed design.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q4z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-648] &#8220;Invalid descendent file name&#8221; with Cleo Managed file transfer (MFT) FTP server</title>
                <link>https://issues.apache.org/jira/browse/VFS-648</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;getChildren on sub directory method returns &#8220;Invalid descendent file name&#8221; with Cleo Managed file transfer (MFT) FTP server. Where I was able to use getChildren on root folder without any issues.&lt;/p&gt;


&lt;p&gt;//Code&lt;br/&gt;
FileObject outboundDirectory = sftpFile.resolveFile(remoteDir);&lt;br/&gt;
children = outboundDirectory.getChildren();&lt;/p&gt;

&lt;p&gt;//Exception thrown &lt;br/&gt;
org.apache.commons.vfs2.FileSystemException: Invalid descendent file name&lt;/p&gt;

&lt;p&gt;I was able to use FTP clients like FileZill etc to connect and get list of files from the same server.&lt;/p&gt;</description>
                <environment>&lt;p&gt;VLTrader by Cleo on CentOS6&lt;/p&gt;</environment>
        <key id="13116608">VFS-648</key>
            <summary>&#8220;Invalid descendent file name&#8221; with Cleo Managed file transfer (MFT) FTP server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sanivella">Sudhakar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Nov 2017 09:28:47 +0000</created>
                <updated>Tue, 14 Nov 2017 04:07:11 +0000</updated>
                                            <version>2.0</version>
                    <version>2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16242746" author="b.eckenfels" created="Tue, 7 Nov 2017 19:44:43 +0000"  >&lt;p&gt;Do you have a test endpoint, do you have a network trace/dump or trace/log from the server? Can you please paste the complete Stacktrace of the Exception &lt;/p&gt;</comment>
                            <comment id="16242779" author="sanivella" created="Tue, 7 Nov 2017 20:01:57 +0000"  >&lt;p&gt;Stack trace from sample program&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.FileSystemException: Invalid descendent file name &quot;inbound/test.txt&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveName(DefaultFileSystemManager.java:796)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getChildren(AbstractFileObject.java:1045)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.getChildren(FtpFileObject.java:420)&lt;br/&gt;
	at com.rnd.App.process(App.java:158)&lt;br/&gt;
	at com.rnd.App.main(App.java:81)&lt;/p&gt;

&lt;p&gt;Since this server endpoint belongs to a customer, I won&apos;t be able to share. FTP folder hierarchy is as follows &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/
|-----inbound 
          |-----input.txt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16242874" author="b.eckenfels" created="Tue, 7 Nov 2017 21:05:53 +0000"  >&lt;p&gt;Thanks for the details, don&#8217;t worry about the formatting, we can read it.&lt;br/&gt;
Just for completeness, doess remoteDir contain &#8222;/inbound&#8220; and is sftpFile a sftp URL with no path component?&lt;/p&gt;</comment>
                            <comment id="16243177" author="sanivella" created="Wed, 8 Nov 2017 00:42:32 +0000"  >&lt;p&gt;Yes remote directory value is &quot;/inbound&quot;&lt;br/&gt;
String remoteDir = &quot;/inbound&quot;;&lt;/p&gt;

&lt;p&gt;URL for FTP server is created as follows &lt;br/&gt;
String startPath = &quot;ftp://&quot; + this.host + &quot;:&quot; + this.port;&lt;/p&gt;

&lt;p&gt;//FileObject for root folder is created as follows&lt;br/&gt;
FileObject sftpFile  = this.fsManager.resolveFile(startPath, opts);&lt;/p&gt;

&lt;p&gt;//Directory listing&lt;br/&gt;
FileObject outboundDirectory = sftpFile.resolveFile(remoteDir);&lt;br/&gt;
FileObject[] children = outboundDirectory.getChildren();&lt;/p&gt;

&lt;p&gt;Notes: I also tried above directory listing by enabiling passive mode, but without any success &lt;br/&gt;
FtpFileSystemConfigBuilder.getInstance().setPassiveMode(opts, true);&lt;/p&gt;</comment>
                            <comment id="16243196" author="sanivella" created="Wed, 8 Nov 2017 00:58:25 +0000"  >&lt;p&gt;Originally this code is written for testing sftp that is why the variable is named as sftp, but this issue is with ftp.&lt;/p&gt;</comment>
                            <comment id="16243448" author="sanivella" created="Wed, 8 Nov 2017 06:40:09 +0000"  >&lt;p&gt;Sharing list of commands implemented by the server (as per FTP HELP command), might come handy for our invistigation&lt;/p&gt;

&lt;p&gt;Command:	HELP&lt;br/&gt;
Response: 	214-The following commands are implemented:&lt;br/&gt;
Response: 	   ABOR    ACCT    APPE    AUTH    CCC     CDUP    CWD     DELE    &lt;br/&gt;
Response: 	   EPRT    EPSV    FEAT    HELP    LIST    MDTM    MKD     MODE    &lt;br/&gt;
Response: 	   NLST    NOOP    OPTS    PASS    PASV    PBSZ    PORT    PROT    &lt;br/&gt;
Response: 	   PWD     QUIT    REST    RETR    RMD     RNFR    RNTO    SIZE    &lt;br/&gt;
Response: 	   STAT    STOR    STOU    STRU    SYST    TYPE    USER    XMKD    &lt;br/&gt;
Response: 	   XPWD    &lt;br/&gt;
Response: 	214 Use &apos;HELP command&apos; for more information.&lt;/p&gt;</comment>
                            <comment id="16245183" author="sanivella" created="Thu, 9 Nov 2017 04:26:07 +0000"  >&lt;p&gt;Directory name appearing multiple times in path variable&lt;/p&gt;</comment>
                            <comment id="16245185" author="sanivella" created="Thu, 9 Nov 2017 04:26:42 +0000"  >&lt;p&gt;Tried digging little deep into the issue, found an interesting situation where I could see directory name &apos;inbound&apos; appearing multiple times in path variable. Refer attached screenshot for more details.&lt;br/&gt;
&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12896801/12896801__Debug_-_AbstractFileName_.jpg&quot; title=&quot;_Debug_-_AbstractFileName_.jpg attached to VFS-648&quot;&gt;&lt;em&gt;Debug&lt;/em&gt;-&lt;em&gt;AbstractFileName&lt;/em&gt;.jpg&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16245207" author="sanivella" created="Thu, 9 Nov 2017 05:01:55 +0000"  >&lt;p&gt;Refer another screenshot where FTP file list showing name of the directory as part of the file name.&lt;br/&gt;
&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12896805/12896805_FTP+File+list.jpg&quot; title=&quot;FTP File list.jpg attached to VFS-648&quot;&gt;FTP File list.jpg&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16250804" author="sanivella" created="Tue, 14 Nov 2017 04:07:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt; Let me know if you need any more details. Looking forward for your inputs.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12896805" name="FTP File list.jpg" size="22730" author="sanivella" created="Thu, 9 Nov 2017 05:01:13 +0000"/>
                            <attachment id="12896801" name="_Debug_-_AbstractFileName_.jpg" size="318124" author="sanivella" created="Thu, 9 Nov 2017 04:25:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mhaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-647] calling findFiles() causes copyFrom() to fail with a partially downloaded file.</title>
                <link>https://issues.apache.org/jira/browse/VFS-647</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Edit: The problem isn&apos;t specific to findFiles. All I need to do is have 1 thread downloads the file, and the other thread just log in, have a while loop for x seconds where x &amp;lt; download time (using Thread.sleep&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; causes interruption to happen immediately). Once x seconds passed, the download will get interupted with pipe closed. Using the same hostname but different username and password does not cause interruption.&lt;/p&gt;

&lt;p&gt;Original description:&lt;br/&gt;
When using FileObject.copyFrom(remote, new AllFileSelector()) to download file from remote to local directory. If SftpFileObject.findFiles(new FileDepthSelector(1,1)) is called and finished, then the copyFrom will get interrupted with error pipe closed.&lt;/p&gt;

&lt;p&gt;Below are test codes and stack trace error. In real scenario, this all happens within 1 or 2 second time frame. However, with test scenario, I wasn&apos;t able to reproduce it easily therefore I had to choose a file that takes around 10 seconds to download and have Thread.sleep(5000) after findFiles() call. Only tested jsch-0.1.52, jsch-0.1.54, commons-vfs2-2.0 and commons-vfs2-2.2.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FtpClient {
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (args.length &amp;lt; 5) {
			&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;args: host user pass local remote&quot;&lt;/span&gt;);
		}
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; hostname = args[0];
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username = args[1];
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password = args[2];
		&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; port = 22;
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; local = args[3];
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; remote = args[4];
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; remoteDir = remote.substring(0, &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.max(0, remote.lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)));


		&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; t0 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;() {
			&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
				&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (Ftp ftp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Ftp(hostname, port)) {
					ftp.login(username, password);
					ftp.list(remoteDir);
					&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;findFiles() completed.&quot;&lt;/span&gt;);
				} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
					e.printStackTrace();
				}

			}
		};
		
		&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; ti = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;() {
			&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
				&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (Ftp ftp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Ftp(hostname, port)) {
					ftp.login(username, password);
					ftp.download(local, remote);
				} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
					e.printStackTrace();
				}
			}
		};

		t0.start();
		ti.start();	
	}

}


&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Ftp &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; AutoCloseable {

	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; timeout = 0;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; StaticUserAuthenticator userAuth;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; FileSystemOptions fileSysOpts;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; FileObject scr = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; FileSystemManager fsm = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; hostName;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; port = 0;


	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Ftp(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; remoteHost, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; controlPort) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException {
		hostName = remoteHost;
		port = controlPort;
		fsm = VFS.getManager();
	}

	&lt;span class=&quot;code-comment&quot;&gt;//login into a server with a valid account
&lt;/span&gt;	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void login(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; user, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
		userAuth = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StaticUserAuthenticator(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, user, password); 
		fileSysOpts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
		DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(fileSysOpts, userAuth);

		SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(fileSysOpts, &lt;span class=&quot;code-quote&quot;&gt;&quot;no&quot;&lt;/span&gt;);
		SftpFileSystemConfigBuilder.getInstance().setTimeout(fileSysOpts, timeout);
		SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(fileSysOpts, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
		scr = (FileObject)fsm.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + hostName, fileSysOpts);
&lt;/span&gt;		
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;login successfully.&quot;&lt;/span&gt;);
	}


	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void list(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; dirName) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		SftpFileObject RemoteFo = (SftpFileObject)fsm.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + hostName + dirName, fileSysOpts);			
&lt;/span&gt;		FileObject[] afo = RemoteFo.findFiles(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileDepthSelector(1,1));		
		&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000); &lt;span class=&quot;code-comment&quot;&gt;//key. &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; must be here (or some other processing that takes time) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; error to reproduce consistently.
&lt;/span&gt;	}

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void download(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; localPath, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; remoteFile) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException {
		SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(fileSysOpts, &lt;span class=&quot;code-quote&quot;&gt;&quot;no&quot;&lt;/span&gt;);
		SftpFileObject RemoteFo = (SftpFileObject)fsm.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + hostName + remoteFile ,fileSysOpts);
&lt;/span&gt;		scr = fsm.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&quot;&lt;/span&gt; + localPath);
		scr.copyFrom(RemoteFo, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AllFileSelector());
	}
	
	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close() {
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;{
			FileSystem fs = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.scr!=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;){
				&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.scr.close();
				fs = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.scr.getFileSystem();
				&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fsm.closeFileSystem(fs);
			}
		}&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(Exception e){
			&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;unable to release ftp connection.&quot;&lt;/span&gt;);
			e.printStackTrace();
		}
	}


}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;StackTrace:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Oct 18, 2017 12:42:51 PM org.apache.commons.vfs2.VfsLog info
INFO: Using &quot;C:\Users\kenji\AppData\Local\Temp\vfs_cache&quot; as temporary files stor
e.
login successfully.
login successfully.
findFiles() completed.
org.apache.commons.vfs2.FileSystemException: Could not copy &quot;sftp://hostname/path/to/file/FILE1&quot; to &quot;file:///C:/test/ftp/FILE1&quot;.
        at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(Abstract
FileObject.java:1062)
        at Ftp.download(Ftp.java:59)
        at FtpClient$2.run(FtpClient.java:36)
Caused by: org.apache.commons.vfs2.FileSystemException: Could not close the inpu
t stream for file &quot;sftp://hostname/path/to/file/FILE1&quot;.
        at org.apache.commons.vfs2.provider.DefaultFileContent$FileContentInputS
tream.close(DefaultFileContent.java:611)
        at org.apache.commons.vfs2.FileUtil.writeContent(FileUtil.java:95)
        at org.apache.commons.vfs2.FileUtil.copyContent(FileUtil.java:114)
        at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(Abstract
FileObject.java:1053)
        ... 2 more
Caused by: java.io.IOException: Pipe closed
        at java.io.PipedInputStream.read(PipedInputStream.java:307)
        at java.io.PipedInputStream.read(PipedInputStream.java:377)
        at com.jcraft.jsch.ChannelSftp.fill(ChannelSftp.java:2882)
        at com.jcraft.jsch.ChannelSftp.header(ChannelSftp.java:2908)
        at com.jcraft.jsch.ChannelSftp.access$500(ChannelSftp.java:36)
        at com.jcraft.jsch.ChannelSftp$RequestQueue.cancel(ChannelSftp.java:1238
)
        at com.jcraft.jsch.ChannelSftp$2.close(ChannelSftp.java:1503)
        at java.io.BufferedInputStream.close(BufferedInputStream.java:483)
        at org.apache.commons.vfs2.util.MonitorInputStream.close(MonitorInputStr
eam.java:129)
        at java.io.BufferedInputStream.close(BufferedInputStream.java:483)
        at org.apache.commons.vfs2.util.MonitorInputStream.close(MonitorInputStr
eam.java:129)
        at org.apache.commons.vfs2.provider.DefaultFileContent$FileContentInputS
tream.close(DefaultFileContent.java:607)
        ... 5 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows 7 and Linux Red Hat.&lt;/p&gt;</environment>
        <key id="13110366">VFS-647</key>
            <summary>calling findFiles() causes copyFrom() to fail with a partially downloaded file.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kenji84">Kenji</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Oct 2017 17:56:19 +0000</created>
                <updated>Sat, 4 Nov 2017 15:58:38 +0000</updated>
                                            <version>2.0</version>
                    <version>2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16238470" author="b.eckenfels" created="Fri, 3 Nov 2017 22:08:58 +0000"  >&lt;p&gt;It looks like your two threads both close the filesystems  concurrently. You need to wait for all filesystems operations to be finished. Fsm is a singleton and getFilesystem() is also shared if it has the same parameters on resolve.&lt;br/&gt;
There are,warnings in Javadoc, you are not the first to step on this:&lt;br/&gt;
&lt;a href=&quot;https://commons.apache.org/proper/commons-vfs/apidocs/org/apache/commons/vfs2/FileSystemManager.html#closeFileSystem-org.apache.commons.vfs2.FileSystem-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-vfs/apidocs/org/apache/commons/vfs2/FileSystemManager.html#closeFileSystem-org.apache.commons.vfs2.FileSystem-&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://commons.apache.org/proper/commons-vfs/apidocs/org/apache/commons/vfs2/VFS.html#getManager--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-vfs/apidocs/org/apache/commons/vfs2/VFS.html#getManager--&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="16238710" author="kenji84" created="Sat, 4 Nov 2017 02:18:03 +0000"  >&lt;p&gt;If it&apos;s a singleton, how is it I can close an instance of Ftp object safely without affecting other instances if they&apos;re different users or different hosts? Does it save the object and return the same object base on host username combination?&lt;/p&gt;

&lt;p&gt;If so, I guess can do the same thing and have each instance referenced by hostname and username and close it only when all instances with the same user and host are done. Judging by the error I&apos;m getting, I guess that&apos;s it...&lt;/p&gt;

&lt;p&gt;And what does it mean &quot;if you use it as a singleton&quot;? It&apos;s not singleton in the API&apos;s implementation? Because I&apos;m not using it as singleton. &lt;/p&gt;</comment>
                            <comment id="16239069" author="b.eckenfels" created="Sat, 4 Nov 2017 15:56:00 +0000"  >&lt;p&gt;The filesystems instance is the same when the parameter (incl options and base URL) are the same. This is part of how the caching works. (VFS.getManager() is a Singleton, but I removed that part of the comment as your code does not close it)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lf8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-645] VfsClassLoaderTests and JarProviderTestCase fails on Java 9 and up</title>
                <link>https://issues.apache.org/jira/browse/VFS-645</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Running the build with Oracle Java 9 on Windows 10 fails. The same failures happen with version 2.1.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 84, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 4.01 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.vfs2.provider.jar.test.NestedJarTestCase
testSealing(org.apache.commons.vfs2.impl.test.VfsClassLoaderTests)  Time elapsed: 0 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.ClassNotFoundException: code.sealed.AnotherClass
        at org.apache.commons.vfs2.impl.VFSClassLoader.findClass(VFSClassLoader.java:152)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:563)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)
        at org.apache.commons.vfs2.impl.test.VfsClassLoaderTests.testSealing(VfsClassLoaderTests.java:88)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at org.apache.commons.vfs2.test.AbstractProviderTestCase.runTest(AbstractProviderTestCase.java:190)
        at junit.framework.TestCase.runBare(TestCase.java:141)
        at junit.framework.TestResult$1.protect(TestResult.java:122)
        at junit.framework.TestResult.runProtected(TestResult.java:142)
        at junit.framework.TestResult.run(TestResult.java:125)
        at junit.framework.TestCase.run(TestCase.java:129)
        at junit.framework.TestSuite.runTest(TestSuite.java:252)
        at junit.framework.TestSuite.run(TestSuite.java:247)
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:23)
        at org.apache.commons.vfs2.test.AbstractTestSuite$1.protect(AbstractTestSuite.java:132)
        at junit.framework.TestResult.runProtected(TestResult.java:142)
        at org.apache.commons.vfs2.test.AbstractTestSuite.run(AbstractTestSuite.java:137)
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: org.apache.commons.vfs2.FileSystemException: Could not retrieve the certificates of &quot;jar:jar:file:///C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/target/test-classes/test-data/nested.jar!/test.jar!/code/sealed/AnotherClass.class&quot;.
        at org.apache.commons.vfs2.provider.DefaultFileContent.getCertificates(DefaultFileContent.java:331)
        at org.apache.commons.vfs2.impl.VFSClassLoader.defineClass(VFSClassLoader.java:180)
        at org.apache.commons.vfs2.impl.VFSClassLoader.findClass(VFSClassLoader.java:150)
        ... 27 more
Caused by: java.lang.IllegalStateException: zip file closed
        at java.base/java.util.zip.ZipFile.ensureOpen(ZipFile.java:664)
        at java.base/java.util.zip.ZipFile.getInputStream(ZipFile.java:334)
        at java.base/java.util.jar.JarFile.getBytes(JarFile.java:761)
        at java.base/java.util.jar.JarFile.checkForSpecialAttributes(JarFile.java:970)
        at java.base/java.util.jar.JarFile.isMultiRelease(JarFile.java:366)
        at java.base/java.util.jar.JarFile$JarFileEntry.realEntry(JarFile.java:642)
        at java.base/java.util.jar.JarFile$JarFileEntry.getCertificates(JarFile.java:626)
        at org.apache.commons.vfs2.provider.jar.JarFileObject.doGetCertificates(JarFileObject.java:120)
        at org.apache.commons.vfs2.provider.DefaultFileContent.getCertificates(DefaultFileContent.java:325)
        ... 29 more

testLoadClass(org.apache.commons.vfs2.impl.test.VfsClassLoaderTests)  Time elapsed: 0 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.ClassNotFoundException: code.ClassToLoad
        at org.apache.commons.vfs2.impl.VFSClassLoader.findClass(VFSClassLoader.java:152)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:563)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)
        at org.apache.commons.vfs2.impl.test.VfsClassLoaderTests.testLoadClass(VfsClassLoaderTests.java:61)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at org.apache.commons.vfs2.test.AbstractProviderTestCase.runTest(AbstractProviderTestCase.java:190)
        at junit.framework.TestCase.runBare(TestCase.java:141)
        at junit.framework.TestResult$1.protect(TestResult.java:122)
        at junit.framework.TestResult.runProtected(TestResult.java:142)
        at junit.framework.TestResult.run(TestResult.java:125)
        at junit.framework.TestCase.run(TestCase.java:129)
        at junit.framework.TestSuite.runTest(TestSuite.java:252)
        at junit.framework.TestSuite.run(TestSuite.java:247)
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:23)
        at org.apache.commons.vfs2.test.AbstractTestSuite$1.protect(AbstractTestSuite.java:132)
        at junit.framework.TestResult.runProtected(TestResult.java:142)
        at org.apache.commons.vfs2.test.AbstractTestSuite.run(AbstractTestSuite.java:137)
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: org.apache.commons.vfs2.FileSystemException: Could not retrieve the certificates of &quot;jar:jar:file:///C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/target/test-classes/test-data/nested.jar!/test.jar!/code/ClassToLoad.class&quot;.
        at org.apache.commons.vfs2.provider.DefaultFileContent.getCertificates(DefaultFileContent.java:331)
        at org.apache.commons.vfs2.impl.VFSClassLoader.defineClass(VFSClassLoader.java:180)
        at org.apache.commons.vfs2.impl.VFSClassLoader.findClass(VFSClassLoader.java:150)
        ... 27 more
Caused by: java.lang.IllegalStateException: zip file closed
        at java.base/java.util.zip.ZipFile.ensureOpen(ZipFile.java:664)
        at java.base/java.util.zip.ZipFile.getInputStream(ZipFile.java:334)
        at java.base/java.util.jar.JarFile.getBytes(JarFile.java:761)
        at java.base/java.util.jar.JarFile.checkForSpecialAttributes(JarFile.java:970)
        at java.base/java.util.jar.JarFile.isMultiRelease(JarFile.java:366)
        at java.base/java.util.jar.JarFile$JarFileEntry.realEntry(JarFile.java:642)
        at java.base/java.util.jar.JarFile$JarFileEntry.getCertificates(JarFile.java:626)
        at org.apache.commons.vfs2.provider.jar.JarFileObject.doGetCertificates(JarFileObject.java:120)
        at org.apache.commons.vfs2.provider.DefaultFileContent.getCertificates(DefaultFileContent.java:325)
        ... 29 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, we get these warnings:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.commons.vfs2.test.AbstractTestSuite (file:/C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/target/test-classes/) to field java.lang.Thread.target
WARNING: Please consider reporting this to the maintainers of org.apache.commons.vfs2.test.AbstractTestSuite
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We get the same kind of failures on Java 11 using:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-24T14:41:47-04:00)
Maven home: C:\Java\apache-maven-3.6.0\bin\..
Java version: 11.0.1, vendor: Oracle Corporation, runtime: C:\Program Files\Java\jdk-11.0.1
Default locale: en_US, platform encoding: Cp1252
OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test &lt;tt&gt;org.apache.commons.vfs2.provider.jar.test.JarProviderTestCase&lt;/tt&gt; also fails.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T13:39:06-06:00)&lt;br/&gt;
Maven home: C:\Java\apache-maven-3.5.0\bin\..&lt;br/&gt;
Java version: 9, vendor: Oracle Corporation&lt;br/&gt;
Java home: C:\Program Files\Java\jdk-9&lt;br/&gt;
Default locale: en_US, platform encoding: Cp1252&lt;br/&gt;
OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;&lt;/p&gt;</environment>
        <key id="13106566">VFS-645</key>
            <summary>VfsClassLoaderTests and JarProviderTestCase fails on Java 9 and up</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Oct 2017 22:18:22 +0000</created>
                <updated>Thu, 17 Jan 2019 22:38:40 +0000</updated>
                            <resolved>Thu, 17 Jan 2019 15:33:07 +0000</resolved>
                                    <version>Nightly Builds</version>
                    <version>2.1</version>
                    <version>2.2</version>
                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16745208" author="garydgregory" created="Thu, 17 Jan 2019 15:33:07 +0000"  >&lt;p&gt;In svn trunk.&lt;/p&gt;</comment>
                            <comment id="16745258" author="ottobackwards" created="Thu, 17 Jan 2019 16:24:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; I was going to test this, but found I could not install java9 and had to use java11.&lt;/p&gt;

&lt;p&gt;With java 11 after these fixes there are still errors. &#160;Should I open up another jira?&lt;/p&gt;</comment>
                            <comment id="16745259" author="ottobackwards" created="Thu, 17 Jan 2019 16:24:44 +0000"  >&lt;p&gt;note they are not the same errors&lt;/p&gt;</comment>
                            <comment id="16745287" author="ottobackwards" created="Thu, 17 Jan 2019 16:58:08 +0000"  >&lt;p&gt;OK, I managed to get java9 from AdoptOpenJDK installed, and testing fails there too:&lt;/p&gt;

&lt;p&gt;Tests in error:&lt;br/&gt;
 AbstractFtpsProviderTestCase$FtpProviderTestSuite&amp;gt;AbstractTestSuite.run:137-&amp;gt;setUp:153-&amp;gt;AbstractTestSuite.setUp:166 &#187; FileSystem&lt;br/&gt;
 AbstractFtpsProviderTestCase$FtpProviderTestSuite&amp;gt;AbstractTestSuite.run:137-&amp;gt;setUp:153-&amp;gt;AbstractTestSuite.setUp:166 &#187; FileSystem&lt;br/&gt;
 MultipleConnectionTestCase.testConnectRoot:55-&amp;gt;resolveRoot:49 &#187; FileSystem Cou...&lt;br/&gt;
 MultipleConnectionTestCase.testUnderlyingConnect:65 &#187; SSL Unsupported or unrec...&lt;br/&gt;
org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTest.org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTest&lt;br/&gt;
 Run 1: HdfsFileProviderTest.setUp:91 &#187; NoClassDefFound Could not initialize class org...&lt;br/&gt;
 Run 2: HdfsFileProviderTest.tearDown:135 NullPointer&lt;/p&gt;

&lt;p&gt;HdfsFileProviderTestCase$HdfsProviderTestSuite&amp;gt;AbstractTestSuite.run:137-&amp;gt;setUp:98 &#187; ExceptionInInitializer&lt;/p&gt;

&lt;p&gt;Tests run: 2177, Failures: 0, Errors: 6, Skipped: 4&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;sample:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Running org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTestCase&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.22 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTestCase&lt;br/&gt;
junit.framework.TestSuite@51ec2856(org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTestCase$HdfsProviderTestSuite) Time elapsed: 0.22 sec &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.ExceptionInInitializerError&lt;br/&gt;
 at org.apache.hadoop.util.StringUtils.&amp;lt;clinit&amp;gt;(StringUtils.java:79)&lt;br/&gt;
 at org.apache.hadoop.conf.Configuration.getTrimmedStringCollection(Configuration.java:1747)&lt;br/&gt;
 at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getStorageDirs(FSNamesystem.java:1407)&lt;br/&gt;
 at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getNamespaceDirs(FSNamesystem.java:1388)&lt;br/&gt;
 at org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:931)&lt;br/&gt;
 at org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:807)&lt;br/&gt;
 at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:738)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTestCase$HdfsProviderTestSuite.setUp(HdfsFileProviderTestCase.java:98)&lt;br/&gt;
 at org.apache.commons.vfs2.test.AbstractTestSuite$1.protect(AbstractTestSuite.java:131)&lt;br/&gt;
 at junit.framework.TestResult.runProtected(TestResult.java:142)&lt;br/&gt;
 at org.apache.commons.vfs2.test.AbstractTestSuite.run(AbstractTestSuite.java:137)&lt;br/&gt;
 at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)&lt;br/&gt;
Caused by: java.lang.StringIndexOutOfBoundsException: begin 0, end 3, length 2&lt;br/&gt;
 at java.base/java.lang.String.checkBoundsBeginEnd(String.java:3319)&lt;br/&gt;
 at java.base/java.lang.String.substring(String.java:1874)&lt;br/&gt;
 at org.apache.hadoop.util.Shell.&amp;lt;clinit&amp;gt;(Shell.java:49)&lt;br/&gt;
 ... 19 more&lt;/p&gt;

&lt;p&gt;Running org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTest&lt;br/&gt;
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.03 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTest&lt;br/&gt;
org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTest Time elapsed: 0.03 sec &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NoClassDefFoundError: Could not initialize class org.apache.hadoop.util.StringUtils&lt;br/&gt;
 at org.apache.hadoop.conf.Configuration.getTrimmedStringCollection(Configuration.java:1747)&lt;br/&gt;
 at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getStorageDirs(FSNamesystem.java:1407)&lt;br/&gt;
 at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getNamespaceDirs(FSNamesystem.java:1388)&lt;br/&gt;
 at org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:931)&lt;br/&gt;
 at org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:807)&lt;br/&gt;
 at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:738)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTest.setUp(HdfsFileProviderTest.java:91)&lt;br/&gt;
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)&lt;br/&gt;
 at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)&lt;br/&gt;
 at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)&lt;br/&gt;
 at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)&lt;br/&gt;
 at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)&lt;br/&gt;
 at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)&lt;br/&gt;
 at org.junit.runners.ParentRunner.run(ParentRunner.java:363)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTest Time elapsed: 0.03 sec &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
 at org.apache.commons.vfs2.provider.hdfs.test.HdfsFileProviderTest.tearDown(HdfsFileProviderTest.java:135)&lt;br/&gt;
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)&lt;br/&gt;
 at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)&lt;br/&gt;
 at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)&lt;br/&gt;
 at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)&lt;br/&gt;
 at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)&lt;br/&gt;
 at org.junit.runners.ParentRunner.run(ParentRunner.java:363)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)&lt;/p&gt;

&lt;p&gt;Running org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase&lt;br/&gt;
2019-01-17 11:49:59,741 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR: unavailable&lt;br/&gt;
java.lang.ClassCastException: class jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to class java.net.URLClassLoader (jdk.internal.loader.ClassLoaders$AppClassLoader and java.net.URLClassLoader are in module java.base of loader &apos;bootstrap&apos;)&lt;br/&gt;
 at org.apache.jasper.compiler.JspRuntimeContext.&amp;lt;init&amp;gt;(JspRuntimeContext.java:174)&lt;br/&gt;
 at org.apache.jasper.servlet.JspServlet.init(JspServlet.java:150)&lt;br/&gt;
 at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:431)&lt;br/&gt;
 at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)&lt;br/&gt;
 at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)&lt;br/&gt;
 at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:643)&lt;br/&gt;
 at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)&lt;br/&gt;
 at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1234)&lt;br/&gt;
 at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)&lt;br/&gt;
 at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:460)&lt;br/&gt;
 at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)&lt;br/&gt;
 at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)&lt;br/&gt;
 at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)&lt;br/&gt;
 at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)&lt;br/&gt;
 at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)&lt;br/&gt;
 at org.mortbay.jetty.Server.doStart(Server.java:222)&lt;br/&gt;
 at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.webdav.test.JackrabbitMain.run(JackrabbitMain.java:232)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase.startJackrabbit(WebdavProviderTestCase.java:237)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase.setUpClass(WebdavProviderTestCase.java:216)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase.access$100(WebdavProviderTestCase.java:55)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.webdav.test.WebdavProviderTestCase$1.setUp(WebdavProviderTestCase.java:245)&lt;br/&gt;
 at org.apache.commons.vfs2.test.AbstractTestSuite$1.protect(AbstractTestSuite.java:131)&lt;br/&gt;
 at junit.framework.TestResult.runProtected(TestResult.java:142)&lt;br/&gt;
 at org.apache.commons.vfs2.test.AbstractTestSuite.run(AbstractTestSuite.java:137)&lt;br/&gt;
 at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)&lt;br/&gt;
 at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)&lt;br/&gt;
 at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)&lt;/p&gt;</comment>
                            <comment id="16745288" author="ottobackwards" created="Thu, 17 Jan 2019 16:58:36 +0000"  >&lt;p&gt;java -version&lt;br/&gt;
openjdk version &quot;9&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 9+181)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 9+181, mixed mode)&lt;/p&gt;</comment>
                            <comment id="16745563" author="ottobackwards" created="Thu, 17 Jan 2019 22:20:15 +0000"  >&lt;p&gt;I apologize. &#160;Please ignore. &#160;I believe that the additional failures are java 11 only.&lt;/p&gt;

&lt;p&gt;Even though I had set my env to java 9, my $JAVA_HOME was still 11.&lt;/p&gt;

&lt;p&gt;Sorry&lt;/p&gt;</comment>
                            <comment id="16745583" author="garydgregory" created="Thu, 17 Jan 2019 22:38:40 +0000"  >&lt;p&gt;This ticket only addressed the two tests mentioned. There are indeed other failures on Java 11.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ksx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-644] AbstractFileSystem.streamClosed() always sets openStream count to zero</title>
                <link>https://issues.apache.org/jira/browse/VFS-644</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The method &lt;tt&gt;AbstractFileSystem.streamClosed()&lt;/tt&gt; always sets its &lt;tt&gt;openStreams&lt;/tt&gt; count to zero.&lt;/p&gt;

&lt;p&gt;Unit test: &lt;tt&gt;org.apache.commons.vfs2.provider.zip.test.ZipFileObjectTestCase.testReadingOneAfterClosingAnotherStream()&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13103339">VFS-644</key>
            <summary>AbstractFileSystem.streamClosed() always sets openStream count to zero</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2017 19:47:54 +0000</created>
                <updated>Tue, 19 Sep 2017 20:02:59 +0000</updated>
                            <resolved>Tue, 19 Sep 2017 20:02:59 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k947:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-640] Synchronized AbstractOriginatingFileProvider.getFileSystem is too broad</title>
                <link>https://issues.apache.org/jira/browse/VFS-640</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Currently (rev. 1802455) this method looks like this:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; FileSystem getFileSystem(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileName rootName, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileSystemOptions fileSystemOptions)
        &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException
    {
        FileSystem fs = findFileSystem(rootName, fileSystemOptions);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            &lt;span class=&quot;code-comment&quot;&gt;// Need to create the file system, and cache it
&lt;/span&gt;            fs = doCreateFileSystem(rootName, fileSystemOptions);
            addFileSystem(rootName, fs);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fs;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Given that there is a single instance of a provider per scheme, a very slow server that is being accessed first time will block &lt;b&gt;all&lt;/b&gt; other threads trying to access some other resources via the same provider.&lt;br/&gt;
We have a server that takes sometimes 20-30 seconds in doCreateFileSystem. We do not mind the thread trying to access this method taking that long, but because of that &quot;synchronized&quot; we end up having multiple threads accessing unrelated servers for the same scheme blocked.&lt;/p&gt;

&lt;p&gt;PS. Actually, it is not only AbstractOriginatingFileProvider. The same &quot;provider-scoped&quot; lock is present in AbstractLayeredFileProvider, TemporaryFileProvider, and UrlFileProvider&lt;/p&gt;</description>
                <environment></environment>
        <key id="13091859">VFS-640</key>
            <summary>Synchronized AbstractOriginatingFileProvider.getFileSystem is too broad</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Aug 2017 11:27:48 +0000</created>
                <updated>Thu, 24 Aug 2017 08:07:44 +0000</updated>
                                            <version>2.0</version>
                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16138447" author="garydgregory" created="Wed, 23 Aug 2017 14:56:21 +0000"  >&lt;p&gt;What solution do you propose that would still provide thread safety?&lt;/p&gt;</comment>
                            <comment id="16138728" author="b.eckenfels" created="Wed, 23 Aug 2017 17:39:15 +0000"  >&lt;p&gt;One option would be to avoid slow server connections in the createFilesystem. A more general solution could be having a lock keyed by serverendpoint.&lt;/p&gt;</comment>
                            <comment id="16138770" author="garydgregory" created="Wed, 23 Aug 2017 17:57:38 +0000"  >&lt;p&gt;Bernd,&lt;/p&gt;

&lt;p&gt;Are you available to implement this?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16139687" author="klv_m72" created="Thu, 24 Aug 2017 07:15:53 +0000"  >&lt;p&gt;Avoiding slow connection would be nice but unfortunately we do not have that luxury.&lt;/p&gt;

&lt;p&gt;I have created a patch for our internal use, see attachment. Some notes:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The patch is based on 2.1 release and not on trunk.&lt;/li&gt;
	&lt;li&gt;I tried to keep the code style but I did not verify it.&lt;/li&gt;
	&lt;li&gt;It is indeed a lock keyed by the same key as the FileSystem. Its lifetime is almost the same as lifetime of the corresponding FileSystem: it is created before the FileSystem but is normally destroyed together with the FileSystem in AbstractFileProvider.closeFileSystem()&lt;/li&gt;
	&lt;li&gt;The lock is ref-counted to support scenarios when creating a FileSystem fails. In this case the lock is destroyed when ref count goes to 0.&lt;/li&gt;
	&lt;li&gt;All the lock management happens under in AbstractFileProvider synchronized (fileSystems), no new synchronization objects are created.&lt;/li&gt;
	&lt;li&gt;There is no deadlock. There are only two lock patterns: either &quot;synchronized (fileSystems)&quot; or &quot;synchronized (newLock), synchronized (fileSystems)&quot;&lt;/li&gt;
	&lt;li&gt;There is also a test (ParallelConnTest.java). The test has two methods, to test the sequential behavior (the same key) and the parallel behavior (different keys).&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16139689" author="klv_m72" created="Thu, 24 Aug 2017 07:17:17 +0000"  >&lt;p&gt;patch_VFS640.diff: the patch&lt;br/&gt;
ParallelConnTest.java: the test&lt;/p&gt;</comment>
                            <comment id="16139696" author="b.eckenfels" created="Thu, 24 Aug 2017 07:21:50 +0000"  >&lt;p&gt;We need to be careful in case it is called recursively for layered filesystems.&lt;/p&gt;</comment>
                            <comment id="16139702" author="b.eckenfels" created="Thu, 24 Aug 2017 07:23:31 +0000"  >&lt;p&gt;@L can younger us what provider in your original case caused the delay, maybe we should fix that anyway and move the connect to doAttach&lt;/p&gt;</comment>
                            <comment id="16139746" author="klv_m72" created="Thu, 24 Aug 2017 08:07:44 +0000"  >&lt;p&gt;Well, if it is called recursively for layered filesystems, it is &lt;b&gt;different&lt;/b&gt; provider, I guess. &lt;/p&gt;

&lt;p&gt;And as for the original case: it was an SFTP provider where the server had a lot of files (like more than 2000) in the root directory for the user. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12883502" name="ParallelConnTest.java" size="6935" author="klv_m72" created="Thu, 24 Aug 2017 07:16:59 +0000"/>
                            <attachment id="12883503" name="patch_VFS640.diff" size="12826" author="klv_m72" created="Thu, 24 Aug 2017 07:16:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ibhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-637] Zip files with legacy encoding and special characters let VFS crash</title>
                <link>https://issues.apache.org/jira/browse/VFS-637</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Oracle has reworked the ZipFile object with Java 7. Since then the default constructor used by commons-vfs2 2.1 is more restrictive than with Java 6. The ZipFile constructor has got a second parameter (Charset) now for specification of the legacy charset to be used explicitly if the ZipFile doesn&apos;t state its UTF-8 compliance internally. This affects all ZIP files using a legacy charset for filename encoding but not using UTF-8 is it is common today. This could be a ZIP file with files containing german umlauts or russian characters in archived file&apos;s filenames, for example.&lt;/p&gt;

&lt;p&gt;To support this new parameter with (more or less) default values, the class org.apache.commons.vfs2.provider.zip.ZipFileSystem has to be extended by a default charset parameter, getter or setter (as you like) to forward this setting to the java.util.zip.ZipFile constructor.&lt;/p&gt;

&lt;p&gt;Quick workaround for me was to create a new OwnZipFileProvider referring to the even new OwnZipFileSystem (extending ZipFileSystem) with the following modified function. Change has been highlighted:&lt;/p&gt;

&lt;p&gt;{{	protected ZipFile createZipFile(final File file) throws FileSystemException {&lt;br/&gt;
		try {&lt;br/&gt;
			return new ZipFile(file&lt;font color=&quot;red&quot;&gt;&lt;b&gt;, Charset.forName(&quot;IBM437&quot;)&lt;/b&gt;&lt;/font&gt;);&lt;br/&gt;
		} catch (final IOException ioe) &lt;/p&gt;
{
			throw new FileSystemException(&quot;vfs.provider.zip/open-zip-file.error&quot;, file, ioe);
		}
&lt;p&gt;	}&lt;br/&gt;
}}&lt;/p&gt;

&lt;p&gt;Presetting to charset 437 as legacy default charset seems to be a a good workaround as stated in appendix D here: &lt;a href=&quot;https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT&lt;/a&gt; :&lt;/p&gt;

&lt;p&gt;&quot;D.1 The ZIP format has historically supported only the original IBM PC character encoding set, commonly referred to as IBM Code Page 437.  This limits storing file name characters to only those within the original MS-DOS range of values and does not properly support file names in other character encodings, or  languages. &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&quot;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows 10 64 Bit, Java 8&lt;/p&gt;</environment>
        <key id="13081433">VFS-637</key>
            <summary>Zip files with legacy encoding and special characters let VFS crash</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gschnepp">Guido Schnepp</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Wed, 21 Jun 2017 14:04:35 +0000</created>
                <updated>Fri, 25 Jan 2019 16:11:09 +0000</updated>
                            <resolved>Fri, 25 Jan 2019 16:11:09 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="16057955" author="b.eckenfels" created="Wed, 21 Jun 2017 18:13:41 +0000"  >&lt;p&gt;What do you think about StandardCharSet.ASCII or LATIN1 as default or would you use absent (which throws for non UTF8 marked archives?)&lt;/p&gt;</comment>
                            <comment id="16058831" author="gschnepp" created="Thu, 22 Jun 2017 06:29:31 +0000"  >&lt;p&gt;Not much, because both encodings differ from IBM437 in bigger parts: &lt;/p&gt;

&lt;p&gt;java.nio.charset.StandardCharsets.US-ASCII is a 7 bit charset only, so all characters 0x80 and above are missing. That&apos;s the most interesting part of codepage 437 for non-US people, where you also find the german umlauts for example.&lt;/p&gt;

&lt;p&gt;ASCII (any) and ANSI (most) are 8 bit charsets which base on US-ASCII but have codepoints 0x80-0xFF defined - differently! On a sample with german umlaut &#196; (Latin capital letter A with diaeresis) and &#228; (Latin small letter a with diaeresis):&lt;br/&gt;
IBM437:        &#196; on 0x8E, &#228; on 0x84 ( &lt;a href=&quot;https://de.wikipedia.org/wiki/Codepage_437&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://de.wikipedia.org/wiki/Codepage_437&lt;/a&gt; )&lt;br/&gt;
ISO-8859-1: &#196; on 0xC4, &#228; on 0xE4 ( &lt;a href=&quot;https://de.wikipedia.org/wiki/ISO_8859-1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://de.wikipedia.org/wiki/ISO_8859-1&lt;/a&gt; )&lt;br/&gt;
UNICODE:    &#196; on U+00C4, &#228; on U+00E4 ( &lt;a href=&quot;https://de.wikipedia.org/wiki/Umlaut&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://de.wikipedia.org/wiki/Umlaut&lt;/a&gt; )&lt;br/&gt;
US-ASCII:     &#196; non existent, &#228; non existent&lt;/p&gt;

&lt;p&gt;PKWare is only a vendor of ZIP aware products, but with pkzip one of the first, far before zip support has been added to operating systems or Java runtime natively. I by myself trust their expertise here. BUT: I&apos;ve also read on other pages, that on development of the ZIP format, encoding was &lt;ins&gt;not defined&lt;/ins&gt; (or not in mind) in any way. The language encoding bit has been added later. So some functionality is required long-term to set the desired encoding as user like, because you can also find ZIP files with native russian characters inside potentially - which are even not supported by IBM437.&lt;/p&gt;

&lt;p&gt;Another interesting source is the new Oracle Java Zip package javadoc: &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/util/zip/package-summary.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/util/zip/package-summary.html&lt;/a&gt; . The, in turn, refer to PKWare Appendix D already mentioned on Ticket above.&lt;/p&gt;</comment>
                            <comment id="16064341" author="gschnepp" created="Tue, 27 Jun 2017 06:19:39 +0000"  >&lt;p&gt;A small update: I have another ZIP file here compressed in a method java.util.zip isn&apos;t aware of. Search for error message &quot;java.util.zip.ZipException: invalid CEN header (bad signature)&quot;. Despite the message this file is fully correct, but stored with an unsupported method (by j.u.zip) only. Any bug report reagarding this is closed immediately with the not so helpful answer, java.util.zip only supports compression methods DEFLATE und STORE, it seems. No other comments. There are a lot more compression methods defined unfortunately, Wikipedia says.&lt;/p&gt;

&lt;p&gt;I will have a look for the option to switch to commons-compress even for my alternate OwnZipFileSystem.&lt;/p&gt;</comment>
                            <comment id="16077704" author="garydgregory" created="Fri, 7 Jul 2017 06:50:34 +0000"  >&lt;p&gt;Removing the &apos;Fix Version&apos; since there is no change applied to the code.&lt;/p&gt;</comment>
                            <comment id="16752392" author="garydgregory" created="Fri, 25 Jan 2019 16:11:09 +0000"  >&lt;p&gt;Changes in svn trunk now allows you to do this the VFS way with a new build class called &lt;tt&gt;ZipFileSystemConfigBuilder&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ZipFileSystemConfigBuilder builder = ZipFileSystemConfigBuilder.getInstance();
        &lt;span class=&quot;code-comment&quot;&gt;// Tests the same charset as the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; but we exercise having a Charset set.
&lt;/span&gt;        builder.setCharset(opts, StandardCharsets.UTF_8);
        FileObject resolvedFile = manager.resolveFile(uri, opts);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gjr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-634] DefaultFileReplicator fails to clean all local files on close()</title>
                <link>https://issues.apache.org/jira/browse/VFS-634</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
We face an issue when we use the DefaultFileSystemManager.&lt;br/&gt;
With this example :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileObject;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.FileSystemException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.Selectors;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.VFS;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.vfs2.impl.DefaultFileSystemManager;

/**
 * @author GHALOUIN
 *
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestVFS {

    /**
     * @param args
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DefaultFileSystemManager vfsManager = (DefaultFileSystemManager) VFS.getManager();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject tempDir = vfsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;tmp:&lt;span class=&quot;code-comment&quot;&gt;//simulation&quot;&lt;/span&gt;);
&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject fileSrc = vfsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/toto.txt&quot;&lt;/span&gt;);
        tempDir.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;toto&quot;&lt;/span&gt;).copyFrom(fileSrc, Selectors.SELECT_SELF);

        vfsManager.close();
    }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At the close call we have the following error :&lt;/p&gt;

&lt;p&gt;INFOS: Using &quot;C:\Users\ghalouin\AppData\Local\Temp\vfs_cache&quot; as temporary files store.&lt;br/&gt;
avr. 21, 2017 4:21:27 PM org.apache.commons.vfs2.impl.StandardFileSystemManager warn&lt;br/&gt;
AVERTISSEMENT: Could not clean up temporary file &quot;tmp_382_tempfs&quot;.&lt;br/&gt;
org.apache.commons.vfs2.FileSystemException: Incorrect file system URI &quot;file:///C:/&quot; in name &quot;file:///C:/Users/ghalouin/AppData/Local/Temp/vfs_cache/tmp_382_tempfs&quot;, was expecting &quot;file:///C:&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile(AbstractFileSystem.java:324)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile(AbstractFileSystem.java:317)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:84)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.local.DefaultLocalFileProvider.findLocalFile(DefaultLocalFileProvider.java:106)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.local.DefaultLocalFileProvider.findLocalFile(DefaultLocalFileProvider.java:119)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.toFileObject(DefaultFileSystemManager.java:1003)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultVfsComponentContext.toFileObject(DefaultVfsComponentContext.java:78)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileReplicator.deleteFile(DefaultFileReplicator.java:172)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileReplicator.close(DefaultFileReplicator.java:111)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.PrivilegedFileReplicator$CloseAction.run(PrivilegedFileReplicator.java:195)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.PrivilegedFileReplicator.close(PrivilegedFileReplicator.java:113)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.closeComponent(DefaultFileSystemManager.java:500)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.close(DefaultFileSystemManager.java:604)&lt;br/&gt;
	at testVFS.TestVFS.main(TestVFS.java:29)&lt;/p&gt;
</description>
                <environment>&lt;p&gt;windows&lt;/p&gt;</environment>
        <key id="13065899">VFS-634</key>
            <summary>DefaultFileReplicator fails to clean all local files on close()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="GilianHalouin">Gilian HALOUIN</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Apr 2017 14:34:09 +0000</created>
                <updated>Fri, 22 Dec 2017 22:46:14 +0000</updated>
                                            <version>2.1</version>
                    <version>2.2</version>
                                                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15984282" author="b.eckenfels" created="Wed, 26 Apr 2017 07:07:43 +0000"  >&lt;p&gt;Hm, test code works here. It generates the replicated directory and removes it.&lt;br/&gt;
Do you get an exception or only the warning? Is the (replicated) directoy gone after termination?&lt;/p&gt;</comment>
                            <comment id="15986142" author="gilianhalouin" created="Thu, 27 Apr 2017 07:24:53 +0000"  >&lt;p&gt;Only the warning, but the replicated directory isn&apos;t delete after termination.&lt;/p&gt;</comment>
                            <comment id="16017100" author="djeanprost" created="Fri, 19 May 2017 09:12:57 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I work with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=GilianHalouin&quot; class=&quot;user-hover&quot; rel=&quot;GilianHalouin&quot;&gt;GilianHalouin&lt;/a&gt;. Is there a piece of information I should give to you so that it can help you to diagnose ? Thank you.&lt;/p&gt;</comment>
                            <comment id="16298617" author="djeanprost" created="Wed, 20 Dec 2017 15:07:59 +0000"  >&lt;p&gt;hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;is there something we should provide to you so that you can diagnose the problem ?&lt;br/&gt;
thank you&lt;/p&gt;</comment>
                            <comment id="16302035" author="b.eckenfels" created="Fri, 22 Dec 2017 22:42:26 +0000"  >&lt;p&gt;I found out what the reaso is, but nut sure how to fix it best:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;when the manager is closed it will start by closing and removing all file providers (including &quot;file&quot;).&lt;/li&gt;
	&lt;li&gt;Then it will close the fileReplicator and temporaryFileStore. Both have a list of `File` objects which it wants to remove and therefore invokes `context.toFileObject()` on those.&lt;/li&gt;
	&lt;li&gt;This will trigger parsing of the name via the still remembered existing DefaultLocalFileProvider.findFile.&lt;/li&gt;
	&lt;li&gt;This will invoke DefaultFileSystemManager.resolveName, but this does not find the FileProvider for the file scheme anymore.&lt;/li&gt;
	&lt;li&gt;Therefore it does fails through to the defaultProvider.parseURI which does basically work, however it decides that C: is not a slash-terminated URL and therefore declares it file.&lt;/li&gt;
	&lt;li&gt;On the next findFilesystem it will insert a new file: filesystem with a broken root file (missing C: as it called getParent() on it)&lt;/li&gt;
	&lt;li&gt;with that broken filesystem the shown exception is generated&lt;/li&gt;
	&lt;li&gt;the exception does not actually list the rootURIs it actually compared&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One option is to close the file replicator before the fileproviders. However this might lead to a unclear shutdown if some threads still resolve files.&lt;/p&gt;

&lt;p&gt;Another option would be to not close/remove the file provider or add it after the providers are cleared:&lt;/p&gt;

&lt;p&gt;        providers.clear();&lt;br/&gt;
        providers.put(&quot;file&quot;, localFileProvider);&lt;/p&gt;

&lt;p&gt;this does work as well, has less impact on the rest of the code but is also not very clear.&lt;/p&gt;

&lt;p&gt;A last option would be to make the replicant delete the java File objects without the help of VFS. They are already stored as file objects so this is not a big abstraction leak (but it does require to code some recursive delete it seems).&lt;/p&gt;

&lt;p&gt;Any ideas?&lt;/p&gt;

&lt;p&gt;I guess we also need to add a close() test which mocks the logger and verifies we dont get new warnings.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12903468" name="VFS-634-draft1.patch" size="2280" author="b.eckenfels" created="Fri, 22 Dec 2017 22:45:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dxm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-633] Memory/reference leak when handling tar.gz-files</title>
                <link>https://issues.apache.org/jira/browse/VFS-633</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When using VFS to process a large amount of tar.gz-archives there is a memory leak occurring where the references to a lot of TarArchiveEntry and TarFileObject objects are never released. This ultimately leads to an OutOfMemoryError.&lt;/p&gt;

&lt;p&gt;After using NetBeans profiler to trace where the persistent objects are created, it seems like they originate from calls to `VFS.getManager().resolveFile(&quot;tgz://&quot; + filePath)`. The method traces returned from the profiler are shown below:&lt;/p&gt;

&lt;p&gt;org.apache.commons.compress.archivers.tar.TarArchiveEntry&lt;br/&gt;
org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry ()&lt;br/&gt;
org.apache.commons.vfs2.provider.tar.TarFileSystem.init ()&lt;br/&gt;
org.apache.commons.vfs2.provider.AbstractVfsContainer.addComponent (Object)&lt;br/&gt;
org.apache.commons.vfs2.provider.AbstractFileProvider.addFileSystem (Comparable, org.apache.commons.vfs2.FileSystem)&lt;br/&gt;
org.apache.commons.vfs2.provider.AbstractLayeredFileProvider.createFileSystem (String, org.apache.commons.vfs2.FileObject, org.apache.commons.vfs2.FileSystemOptions)&lt;br/&gt;
org.apache.commons.vfs2.provider.AbstractLayeredFileProvider.findFile (org.apache.commons.vfs2.FileObject, String, org.apache.commons.vfs2.FileSystemOptions)&lt;br/&gt;
org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile (org.apache.commons.vfs2.FileObject, String, org.apache.commons.vfs2.FileSystemOptions)&lt;br/&gt;
org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile (org.apache.commons.vfs2.FileObject, String)&lt;br/&gt;
org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile (String)&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.provider.tar.TarFileObject&lt;br/&gt;
org.apache.commons.vfs2.provider.tar.TarFileSystem.createTarFileObject (org.apache.commons.vfs2.provider.AbstractFileName, org.apache.commons.compress.archivers.tar.TarArchiveEntry)&lt;br/&gt;
org.apache.commons.vfs2.provider.tar.TarFileSystem.init ()&lt;br/&gt;
org.apache.commons.vfs2.provider.AbstractVfsContainer.addComponent (Object)&lt;br/&gt;
org.apache.commons.vfs2.provider.AbstractFileProvider.addFileSystem (Comparable, org.apache.commons.vfs2.FileSystem)&lt;br/&gt;
org.apache.commons.vfs2.provider.AbstractLayeredFileProvider.createFileSystem (String, org.apache.commons.vfs2.FileObject, org.apache.commons.vfs2.FileSystemOptions)&lt;br/&gt;
org.apache.commons.vfs2.provider.AbstractLayeredFileProvider.findFile (org.apache.commons.vfs2.FileObject, String, org.apache.commons.vfs2.FileSystemOptions)&lt;br/&gt;
org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile (org.apache.commons.vfs2.FileObject, String, org.apache.commons.vfs2.FileSystemOptions)&lt;br/&gt;
org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile (org.apache.commons.vfs2.FileObject, String)&lt;br/&gt;
org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile (String)&lt;/p&gt;


&lt;p&gt;I have tried to explicitly close the TarFileSystems after the processing is done by calling `VFS.getManager().closeFileSystem(archiveFileObject.getFileSystem())` but I see no difference in the amount of live persistent objects.&lt;br/&gt;
I have also tried calling `((DefaultFileSystemManager) VFS.getManager()).freeUnusedResources()` but no difference there either.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows, Red Hat Linux&lt;/p&gt;</environment>
        <key id="13064623">VFS-633</key>
            <summary>Memory/reference leak when handling tar.gz-files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Plankton555">Bj&#246;rn Persson Mattsson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Apr 2017 08:17:32 +0000</created>
                <updated>Tue, 18 Apr 2017 13:25:36 +0000</updated>
                            <resolved>Tue, 18 Apr 2017 13:25:36 +0000</resolved>
                                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15972653" author="plankton555" created="Tue, 18 Apr 2017 13:24:30 +0000"  >&lt;p&gt;After more troubleshooting it turned out that the problem was ultimately caused by readers that were never closed. Closing those readers/inputstreams before going out of scope allowed for the previously persistent TarFileObject and TarFileEntry objects to be cleaned up during garbage collection.&lt;/p&gt;

&lt;p&gt;Closing this issue.&lt;/p&gt;</comment>
                            <comment id="15972659" author="plankton555" created="Tue, 18 Apr 2017 13:25:36 +0000"  >&lt;p&gt;See previous comment. The problem turned out to be caused by something else.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dqbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-630] Sftp code assumes that exec channels are available and *nix server</title>
                <link>https://issues.apache.org/jira/browse/VFS-630</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In working with VFS using SFTP there&apos;s an assumption in the code that creates a problem if the remote server is locked down or it&apos;s not *nix based.  I hit this when working with a server that had exec commands disabled and attempting to do a moveTo command on a remote file object renaming it to the same server as a remote file object.  At one point the VFS code attempts to execute an &quot;id -G&quot; command on a JSch &quot;exec&quot; channel. Since the remote server disallows the exec command the subsequent read from the input stream blocks until the O/S default socket timeout occurs, it basically hangs.&lt;br/&gt;
I tested this same scenario against a Linux server, it worked fine.  I also tested a Windows server which doesn&apos;t have an id command, it failed.&lt;/p&gt;

&lt;p&gt;Since JSch deals with this natively, I would recommend getting rid of the exec commands altogether and letting the client deal with those issues outside of the framework, i.e., moveTo in this case doesn&apos;t need to worry about permissions but rather throws the underlying exceptions from JSch.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Any client running VFS 2.1/JSch 1.51 and later using remote sftp server that&apos;s locked down or not *nix based.&lt;/p&gt;</environment>
        <key id="13056344">VFS-630</key>
            <summary>Sftp code assumes that exec channels are available and *nix server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wkwood61">Will Wood</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Mar 2017 16:30:59 +0000</created>
                <updated>Fri, 17 Apr 2020 16:47:56 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15931624" author="garydgregory" created="Sun, 19 Mar 2017 09:34:24 +0000"  >&lt;p&gt;Patches welcome!&lt;/p&gt;</comment>
                            <comment id="15956456" author="klv_m72" created="Wed, 5 Apr 2017 07:42:26 +0000"  >&lt;p&gt;It is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-590&quot; title=&quot;SFTP moveTo operation might fail on permission checks even if the operation itself might succeed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-590&quot;&gt;&lt;del&gt;VFS-590&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17085417" author="texasaggie" created="Fri, 17 Apr 2020 04:08:45 +0000"  >&lt;p&gt;I&apos;d be happy to try and create a patch but I&apos;d like some thoughts from someone in the know who can suggest a way to provide a toggle or default for this behavior. It seemed to me to be less intrusive to leave the existing code and skip it when you want to rather than rip it out. Also, what is the preferred patch format? Standard *nix diff?&lt;/p&gt;</comment>
                            <comment id="17085928" author="garydgregory" created="Fri, 17 Apr 2020 16:47:41 +0000"  >&lt;p&gt;Definitively do not &quot;rip it out&quot;, you&apos;ll want to add a toggle, see &lt;tt&gt;org.apache.commons.vfs2.provider.sftp.SftpFileSystemConfigBuilder&lt;/tt&gt; and the &lt;tt&gt;DISABLE_DETECT_EXEC_CHANNEL&lt;/tt&gt; option.&lt;/p&gt;

&lt;p&gt;The preferred format is a PR on GitHub at&#160;&lt;a href=&quot;https://github.com/apache/commons-vfs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs&#160;&lt;/a&gt;on top of git master.&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12312720" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Docs Text</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>SftpFileSystem in getGroupIds:&lt;br/&gt;
&amp;nbsp;final int code = executeCommand(&amp;quot;id -G&amp;quot;, output);&lt;br/&gt;
SftpFileSystem in getUid:&lt;br/&gt;
&amp;nbsp;final int code = executeCommand(&amp;quot;id -u&amp;quot;, output);&lt;br/&gt;
&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cb9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-627] SFTP randomly hangs when copying a file on remote server</title>
                <link>https://issues.apache.org/jira/browse/VFS-627</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I have a process where a file is first copied over SFTP to local server and then on the remote server the file is copied to another location on that server for archiving. Both are done using &lt;tt&gt;FileObject#copyFrom&lt;/tt&gt;. Now I&apos;ve encountered twice the situation where during archiving (on remote server) the copy action hangs indefinitely (the process was left running for over 24 hours). In both cases the issue happened when around 2000 files had been transferred (typical amount is under 100).&lt;/p&gt;

&lt;p&gt;The problem is difficult to reproduce since it doesn&apos;t always happen even with large number of files. Based on the stacktrace and random occurrences it might be a concurrency issue. The code using VFS however is single threaded.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Attaching to process ID 128021, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 25.92-b14
Deadlock Detection:

No deadlocks found.

&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 19073: (state = BLOCKED)

&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 128165: (state = BLOCKED)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.lang.ref.ReferenceQueue.remove(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=59, line=143 (Compiled frame)
 - org.apache.commons.vfs2.cache.SoftRefFilesCache$SoftRefReleaseThread.run() @bci=26, line=84 (Compiled frame)

&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 128164: (state = BLOCKED)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.io.PipedInputStream.awaitSpace() @bci=23, line=273 (Compiled frame)
 - java.io.PipedInputStream.receive(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=31, line=231 (Compiled frame)
 - java.io.PipedOutputStream.write(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=77, line=149 (Compiled frame)
 - com.jcraft.jsch.IO.put(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=7, line=64 (Compiled frame)
 - com.jcraft.jsch.Channel.write(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=7, line=438 (Compiled frame)
 - com.jcraft.jsch.Session.run() @bci=1260, line=1624 (Compiled frame)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run() @bci=11, line=745 (Interpreted frame)

&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 128139: (state = BLOCKED)

&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 128138: (state = BLOCKED)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.lang.ref.ReferenceQueue.remove(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=59, line=143 (Compiled frame)
 - java.lang.ref.ReferenceQueue.remove() @bci=2, line=164 (Compiled frame)
 - java.lang.ref.Finalizer$FinalizerThread.run() @bci=36, line=209 (Interpreted frame)

&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 128137: (state = BLOCKED)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() @bci=2, line=502 (Compiled frame)
 - java.lang.ref.Reference.tryHandlePending(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) @bci=54, line=191 (Compiled frame)
 - java.lang.ref.Reference$ReferenceHandler.run() @bci=1, line=153 (Interpreted frame)

&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 128022: (state = BLOCKED)
 - java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) @bci=0 (Compiled frame; information may be imprecise)
 - com.jcraft.jsch.Session.write(com.jcraft.jsch.Packet, com.jcraft.jsch.Channel, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=89, line=1261 (Compiled frame)
 - com.jcraft.jsch.ChannelSftp.sendWRITE(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=191, line=2619 (Compiled frame)
 - com.jcraft.jsch.ChannelSftp.access$100(com.jcraft.jsch.ChannelSftp, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=9, line=36 (Compiled frame)
 - com.jcraft.jsch.ChannelSftp$1.write(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=77, line=791 (Compiled frame)
 - java.io.BufferedOutputStream.write(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=20, line=122 (Compiled frame)
 - org.apache.commons.vfs2.util.MonitorOutputStream.write(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=8, line=123 (Compiled frame)
 - java.io.BufferedOutputStream.flushBuffer() @bci=20, line=82 (Compiled frame)
 - java.io.BufferedOutputStream.write(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=39, line=126 (Compiled frame)
 - org.apache.commons.vfs2.util.MonitorOutputStream.write(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=8, line=123 (Compiled frame)
 - org.apache.commons.vfs2.provider.DefaultFileContent.write(java.io.OutputStream, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) @bci=35, line=892 (Compiled frame)
 - org.apache.commons.vfs2.provider.DefaultFileContent.write(java.io.OutputStream) @bci=5, line=865 (Compiled frame)
 - org.apache.commons.vfs2.provider.DefaultFileContent.write(org.apache.commons.vfs2.FileContent) @bci=9, line=828 (Compiled frame)
 - org.apache.commons.vfs2.provider.DefaultFileContent.write(org.apache.commons.vfs2.FileObject) @bci=7, line=849 (Compiled frame)
 - org.apache.commons.vfs2.FileUtil.copyContent(org.apache.commons.vfs2.FileObject, org.apache.commons.vfs2.FileObject) @bci=7, line=90 (Compiled frame)
 - org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(org.apache.commons.vfs2.FileObject, org.apache.commons.vfs2.FileSelector) @bci=148, line=338 (Compiled frame)
 ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Java 1.8.0_92&lt;br/&gt;
VFS 2.1&lt;br/&gt;
JSch 0.1.53&lt;/p&gt;</environment>
        <key id="13031927">VFS-627</key>
            <summary>SFTP randomly hangs when copying a file on remote server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hmhagberg">Henri Hagberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Jan 2017 11:17:39 +0000</created>
                <updated>Tue, 23 Jun 2020 18:56:25 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="16040745" author="aditya0403" created="Wed, 7 Jun 2017 11:45:06 +0000"  >&lt;p&gt;I am facing similar issue where it gets stuck in DefaultFileContent line number 894.&lt;/p&gt;

&lt;p&gt;It gets stuck in below while loop after few iterations:&lt;br/&gt;
            final byte[] buffer = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;bufferSize&amp;#93;&lt;/span&gt;;&lt;br/&gt;
            int n = 0;&lt;br/&gt;
            while (-1 != (n = input.read(buffer)))&lt;/p&gt;
            {
                output.write(buffer, 0, n);
                count += n;
            }</comment>
                            <comment id="16041674" author="b.eckenfels" created="Wed, 7 Jun 2017 21:38:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aditya0403&quot; class=&quot;user-hover&quot; rel=&quot;aditya0403&quot;&gt;aditya0403&lt;/a&gt; Could you please provide multiple &quot;jstack -l&quot; invocation results (with a few seconds in between) and the full stack trace of the seemingly blocking operation. Can you also provide &quot;netstat -t&quot; on client and server (and tell us wich established TCP connection it is).&lt;/p&gt;</comment>
                            <comment id="16989683" author="jlentini" created="Fri, 6 Dec 2019 12:14:04 +0000"  >&lt;p&gt;I root caused the issue and found a deadlock in JSch. My analysis of the problem and a simple test program to reproduce the issue are at:&#160;&lt;a href=&quot;https://github.com/jlentini/SftpCopyDeadlock&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jlentini/SftpCopyDeadlock&lt;/a&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
I also posted a patch to fix the issue to the jsch-users mailing list in this &lt;a href=&quot;https://sourceforge.net/p/jsch/mailman/message/36872566/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;message&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Note that there is a workaround: use&#160;two &lt;tt&gt;org.apache.commons.vfs2 FileSystemManager&lt;/tt&gt; instances, one for the source file and one for the destination file.&lt;/p&gt;</comment>
                            <comment id="16989694" author="b.eckenfels" created="Fri, 6 Dec 2019 12:24:29 +0000"  >&lt;p&gt;Thanks james for debugging this. I guess we keep this bug around till we JSch has fixed it and we upgraded to that version.&lt;/p&gt;</comment>
                            <comment id="16989784" author="jlentini" created="Fri, 6 Dec 2019 13:59:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;, leaving this open makes sense to me. I&apos;ll post here when I hear back from the JSch project.&lt;/p&gt;</comment>
                            <comment id="17046849" author="jlentini" created="Thu, 27 Feb 2020 17:58:09 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;, I didn&apos;t receive a response to the&#160;&lt;a href=&quot;https://sourceforge.net/p/jsch/mailman/message/36872566/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;message&lt;/a&gt; that I posted 2+ months ago on the jsch-users mailing list. Maybe nobody is reading that email list anymore? Does anyone on the Apache VFS project know how to get in touch with the folks at Jcraft? Alternatively, is there an alternative SFTP provider for VFS?&lt;/p&gt;</comment>
                            <comment id="17046874" author="b.eckenfels" created="Thu, 27 Feb 2020 18:33:12 +0000"  >&lt;p&gt;Haven&apos;t seen another provider for VFS which does SFTP, sorry. &lt;/p&gt;

&lt;p&gt;I am not sure if we can actually for the provider and apply your patch if the jsch project is dormant. I think might not be possible for license reasons, but you could fork it (or find someone who can do that, they need maven central upload capabilities).&lt;/p&gt;

&lt;p&gt;Do you see that with a specific kind of server software or multiple?&lt;/p&gt;</comment>
                            <comment id="17046926" author="ottobackwards" created="Thu, 27 Feb 2020 19:24:06 +0000"  >&lt;p&gt;Apache Nifi has switch to the sshj library: &lt;a href=&quot;https://github.com/apache/nifi/pull/3726/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/nifi/pull/3726/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17046982" author="jlentini" created="Thu, 27 Feb 2020 21:27:29 +0000"  >&lt;p&gt;Regarding:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Do you see that with a specific kind of server software or multiple?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Although I&apos;ve only tested against an OpenSSH server, I believe the issue is in the Jsch client and is not specific to its interaction with a particular SFTP server implementation.&lt;/p&gt;

&lt;p&gt;Thanks for the pointer to sshj.&lt;/p&gt;</comment>
                            <comment id="17047867" author="garydgregory" created="Fri, 28 Feb 2020 18:35:13 +0000"  >&lt;p&gt;Are there opinions on replacing Jsch with&#160;sshj?&lt;/p&gt;</comment>
                            <comment id="17143223" author="jlentini" created="Tue, 23 Jun 2020 18:56:25 +0000"  >&lt;p&gt;A recent post on the JSch mailing list about forking the project so that it can be maintained:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sourceforge.net/p/jsch/mailman/message/37044268/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sourceforge.net/p/jsch/mailman/message/37044268/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i388xz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-626] Cannot open large bzip2 files</title>
                <link>https://issues.apache.org/jira/browse/VFS-626</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I was having problems reading a large bzip2 file in which only a part of the data was being read. So Googling a bit I came across this Apache Commons Compress issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-224&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COMPRESS-224&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When looking at &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/7b42b5598774a40487dd59d699f5f865962822d9/core/src/main/java/org/apache/commons/vfs2/provider/bzip2/Bzip2FileObject.java#L61&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/7b42b5598774a40487dd59d699f5f865962822d9/core/src/main/java/org/apache/commons/vfs2/provider/bzip2/Bzip2FileObject.java#L61&lt;/a&gt; we can see that the BZip2CompressorInputStream constructor option `decompressConcatenated` is not defined and defaults to false, which can cause the observed behavior. This manifests itself in multi-stream bzip2 files, which tends to be the case with larger files.&lt;/p&gt;

&lt;p&gt;I would suggest that this BZip2CompressorInputStream constructor option is explicitly set to true. It is a one-liner fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13027782">VFS-626</key>
            <summary>Cannot open large bzip2 files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asieira">Alexandre Sieira</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Tue, 13 Dec 2016 13:02:04 +0000</created>
                <updated>Thu, 28 Jul 2022 21:11:05 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17572661" author="garydgregory" created="Thu, 28 Jul 2022 21:11:05 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asieira&quot; class=&quot;user-hover&quot; rel=&quot;asieira&quot;&gt;asieira&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think we&apos;ll need an example of the current code causing a problem, so a PR with a failing unit test is key, otherwise, the change, one-liner or not, can just be changed back at any time and cause a regression.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37jdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-625] FileObject method moveTo throws NullPointerException on ram </title>
                <link>https://issues.apache.org/jira/browse/VFS-625</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;My simple code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;SimpleMethod.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void moveFile(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; source, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; dest) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException {
        FileObject fileSource = fsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;ram:&lt;span class=&quot;code-comment&quot;&gt;//virtual/&quot;&lt;/span&gt; + source);
&lt;/span&gt;        FileObject fileDest = fsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;ram:&lt;span class=&quot;code-comment&quot;&gt;//virtual/&quot;&lt;/span&gt; + dest);
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fileSource.canRenameTo(fileDest))
            fileSource.moveTo(fileDest);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fileSource exist and canRenameTo return true, destination does&apos;nt exist, and parenth folder doesn&apos;t exist too, when i try to &quot;moveTo&quot; it throws NullPointerException:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ram.RamFileSystem.save(RamFileSystem.java:172)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ram.RamFileSystem.rename(RamFileSystem.java:204)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ram.RamFileObject.doRename(RamFileObject.java:188)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1887)&lt;br/&gt;
	at biz.iconsulting.lago.working.wrappers.IrionInputFileHandler.moveFile(IrionInputFileHandler.java:149)&lt;br/&gt;
	at biz.iconsulting.lago.working.wrappers.IrionInputFileHandler.moveFilesToWorkingFolder(IrionInputFileHandler.java:110)&lt;br/&gt;
	at biz.iconsulting.lago.working.tests.wrappers.IrionInputFileHandlerTest.irionFileMoveTest(IrionInputFileHandlerTest.java:67)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)&lt;br/&gt;
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)&lt;br/&gt;
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:117)&lt;br/&gt;
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)&lt;br/&gt;
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:262)&lt;br/&gt;
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:84)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;News:&lt;br/&gt;
If I create the dest parent folder, the Exception is not thrown.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10, Intellij IDEA 2016.6.2.5&lt;/p&gt;</environment>
        <key id="13027743">VFS-625</key>
            <summary>FileObject method moveTo throws NullPointerException on ram </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="smike86">Michele Scarpenti</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Dec 2016 10:02:33 +0000</created>
                <updated>Thu, 24 Jan 2019 23:05:06 +0000</updated>
                            <resolved>Thu, 24 Jan 2019 23:05:06 +0000</resolved>
                                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16751685" author="garydgregory" created="Thu, 24 Jan 2019 23:05:06 +0000"  >&lt;p&gt;See new test &lt;tt&gt;org.apache.commons.vfs2.provider.ram.test.CustomRamProviderTest.testMoveFile()&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37j5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-624] LocalFileRandomAccessContent returning wrong value when reading 0xFF</title>
                <link>https://issues.apache.org/jira/browse/VFS-624</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The LocalFileRandomAccessContent InputStream used for reading a byte as an int is calling the RandomAccessFile method readByte(byte), so it returns -1 in case of EOFException, but also in case of reading 0xFF in a file.&lt;/p&gt;

&lt;p&gt;This also violates the expected behaviour of the read() method of the InputStream as can return negative values as result of the casting, while should only return an int value beetween 0 and 255, or -1 in case of eof.&lt;/p&gt;

&lt;p&gt;This problem is also inherited by the default read(byte[]) and read(byte[], int off, int length).&lt;/p&gt;

&lt;p&gt;The solution is to change the implementation to:&lt;br/&gt;
 raf.read();&lt;/p&gt;

&lt;p&gt;Pull request: &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/17&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13010875">VFS-624</key>
            <summary>LocalFileRandomAccessContent returning wrong value when reading 0xFF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="davidgoitia">David Goitia Amigo</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Sun, 9 Oct 2016 22:03:14 +0000</created>
                <updated>Sun, 6 Sep 2020 22:45:01 +0000</updated>
                            <resolved>Sun, 6 Sep 2020 22:45:01 +0000</resolved>
                                    <version>2.0</version>
                    <version>2.1</version>
                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="9223372036854775807"/>
                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="0">0h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="15560723" author="davidgoitia" created="Sun, 9 Oct 2016 22:19:37 +0000"  >&lt;p&gt;Created gitHub pull request with the fix: &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/17&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34n7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-623] VFS transport has the clear text password in the exceptions and Debug log</title>
                <link>https://issues.apache.org/jira/browse/VFS-623</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Most of the logs in vfs transport not secure enoght to hide the clear text password on the log when exception  throws from vfs or debug enabled.&lt;/p&gt;

&lt;p&gt;This need to fixed like r1378457 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;https://www.mail-archive.com/commits@synapse.apache.org/msg02701.html&lt;/p&gt;</description>
                <environment></environment>
        <key id="13010762">VFS-623</key>
            <summary>VFS transport has the clear text password in the exceptions and Debug log</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vanjikumaran@gmail.com">Vanjikumaran Sivajothy</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Oct 2016 21:20:21 +0000</created>
                <updated>Sat, 8 Oct 2016 21:20:34 +0000</updated>
                            <resolved>Sat, 8 Oct 2016 21:20:33 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34mif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-622] FTPFileObject doesn&apos;t support to update last modified time of the file</title>
                <link>https://issues.apache.org/jira/browse/VFS-622</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Any reason for the method &lt;tt&gt;org.apache.commons.vfs2.provider.AbstractFileObject#doSetLastModifiedTime(long)&lt;/tt&gt; has not been overridden in the &lt;tt&gt;org.apache.commons.vfs2.provider.ftp.FtpFileObject&lt;/tt&gt; ?&lt;/p&gt;

&lt;p&gt;I am running the Xlight FTP Server and accessing the files through &lt;tt&gt;FTPFileObject&lt;/tt&gt; which doesn&apos;t allow me to update the last modified time of the files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12999969">VFS-622</key>
            <summary>FTPFileObject doesn&apos;t support to update last modified time of the file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bhavesh.dangi">Bhavesh Dangi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Aug 2016 10:10:10 +0000</created>
                <updated>Thu, 25 Aug 2016 10:30:09 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32rzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-620] FileObject.moveTo(FileObject) API doesn&apos;t work well for a Linux FTP</title>
                <link>https://issues.apache.org/jira/browse/VFS-620</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;FileObject.moveTo(FileObject) API doesn&apos;t work well for a Linux FTP, especially for setting a user directory as its root directory case,&lt;br/&gt;
For example, for a ubuntu vsftpd, which is having &quot;/home/user1&quot; as its root directory, when renaming &quot;/test/test.txt&quot; to &quot;/test1/test1.txt&quot;, it will throw an exception.&lt;br/&gt;
In this case, it should consider the workingDirectory(would be &quot;/home/user1&quot;) together and append it to the from/to path to make the API work.&lt;/p&gt;

&lt;p&gt;Sample codes,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;FileObject fileObject = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        FileObject toFileObject = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            StandardFileSystemManager fsManager = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StandardFileSystemManager();
            fsManager.init();
            FileSystemOptions fsOpts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();

            FtpFileSystemConfigBuilder.getInstance().setPassiveMode(fsOpts, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
            FtpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(fsOpts, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
            UserAuthenticator auth = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StaticUserAuthenticator(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;user&amp;gt;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;password&amp;gt;&quot;&lt;/span&gt;);
            DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(fsOpts, auth);

            fileObject = fsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;Replaced address&amp;gt;/test/test.txt&quot;&lt;/span&gt;, fsOpts);
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;File exists:&quot;&lt;/span&gt; + fileObject.exists());

            toFileObject = fsManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;Replaced address&amp;gt;/test1/test1.txt&quot;&lt;/span&gt;, fsOpts);
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;File exists:&quot;&lt;/span&gt; + toFileObject.exists());
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!toFileObject.exists()) {
                toFileObject.createFile();
            }
            fileObject.moveTo(toFileObject);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (FileSystemException ex) {
            ex.printStackTrace();
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fileObject != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                    fileObject.close();
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (FileSystemException ex) {
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (toFileObject != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                    toFileObject.close();
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (FileSystemException ex) {
                }
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And the output,&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;File exists:true
File exists:false
org.apache.commons.vfs2.FileSystemException: Could not rename &quot;ftp://&amp;lt;Replaced address&amp;gt;/test/test.txt&quot; to &quot;ftp://&amp;lt;Replaced address&amp;gt;/test1/test1.txt&quot;.
	at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1902)
	at TestFTP.main(TestFTP.java:59)
Caused by: org.apache.commons.vfs2.FileSystemException: Could not rename FTP file &quot;ftp://&amp;lt;Replaced address&amp;gt;/test/test.txt&quot; to &quot;ftp://&amp;lt;Replaced address&amp;gt;/test1/test1.txt&quot;.
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.doRename(FtpFileObject.java:524)
	at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1887)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;ubuntu vsftpd&lt;/p&gt;</environment>
        <key id="12994076">VFS-620</key>
            <summary>FileObject.moveTo(FileObject) API doesn&apos;t work well for a Linux FTP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stevezhuang">stevezhuang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Aug 2016 20:01:13 +0000</created>
                <updated>Sun, 19 Mar 2017 08:52:17 +0000</updated>
                            <resolved>Sun, 19 Mar 2017 08:52:17 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.2</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15402725" author="stevezhuang" created="Mon, 1 Aug 2016 20:05:29 +0000"  >&lt;p&gt;Suggested fix,&lt;/p&gt;

&lt;p&gt;In the FtpClient.java, adding a new interface,&lt;br/&gt;
String printWorkingDirectory() throws IOException; &lt;/p&gt;

&lt;p&gt;Then in the FTPClientWrapper.java,&lt;br/&gt;
@Override &lt;br/&gt;
 public String printWorkingDirectory() throws IOException  &lt;br/&gt;
 { &lt;br/&gt;
    return getFtpClient().printWorkingDirectory(); &lt;br/&gt;
} &lt;/p&gt;

&lt;p&gt;private String remoteAbsolutePath(String path) throws IOException  &lt;br/&gt;
{&lt;br/&gt;
    String workingDir = printWorkingDirectory(); &lt;br/&gt;
    if (&quot;/&quot;.equals(workingDir)) &lt;/p&gt;
{ 
        return path; 
    }
&lt;p&gt;    return workingDir + path; &lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;@Override&lt;br/&gt;
    public boolean rename(final String oldName, final String newName) throws IOException&lt;br/&gt;
    {&lt;br/&gt;
        try&lt;/p&gt;
        {
            return getFtpClient().rename(remoteAbsolutePath(oldName), remoteAbsolutePath(newName));
        }
&lt;p&gt;        catch (final IOException e)&lt;/p&gt;
        {
            disconnect();
            return getFtpClient().rename(remoteAbsolutePath(oldName), remoteAbsolutePath(newName));
        }
&lt;p&gt;    }&lt;/p&gt;</comment>
                            <comment id="15402736" author="b.eckenfels" created="Mon, 1 Aug 2016 20:15:29 +0000"  >&lt;p&gt;It Looks to me the URLs are wrong. If the files are in /home/user1 you must speficy the full path Name in the URL. VFS has no Support for relative directories (in URLs) (unfortunatelly).&lt;/p&gt;

&lt;p&gt;(However if the path for the source is correct (the test Output somehow suggests that as the source exists) maybe the Problem is more on the destionation side and has nothign to do with the home Directory. Can you check the Server logfile what command it rejected (and why)?.&lt;/p&gt;

&lt;p&gt;Is the target (parent) Directory existing and writeable?&lt;/p&gt;</comment>
                            <comment id="15402912" author="stevezhuang" created="Mon, 1 Aug 2016 22:09:19 +0000"  >&lt;p&gt;Hi Bernd,&lt;/p&gt;

&lt;p&gt;Thanks for your checking/replying.&lt;/p&gt;

&lt;p&gt;The URLs are correct because the FileObject could be returned and operated. &lt;br/&gt;
And the target Directory is writable (if not existing, it will be created). &lt;br/&gt;
Actually it will work correctly if applying my suggested fix. &lt;/p&gt;

&lt;p&gt;I believe it would be an issue related to the &quot;UserDirIsRoot&quot; setting, VFS didn&apos;t handle it well when doing the rename.&lt;/p&gt;

&lt;p&gt;Best wishes,&lt;br/&gt;
Steve&lt;/p&gt;


</comment>
                            <comment id="15895200" author="svella" created="Fri, 3 Mar 2017 23:00:25 +0000"  >&lt;p&gt;I just ran into this with UserDirIsRoot=true. When stepping through it, it looks to me like the problem is in FtpFileObject.doRename():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; oldName = getName().getPath();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; newName = newFile.getName().getPath();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;should be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; oldName = relPath;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; newName = ((FtpFileObject)FileObjectUtils.getAbstractFileObject(newFile)).getRelPath();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll submit a patch if I have time before someone actually gets to this.&lt;/p&gt;</comment>
                            <comment id="15900317" author="svella" created="Tue, 7 Mar 2017 22:34:34 +0000"  >&lt;p&gt;This appears to be a duplicate of both &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-188&quot; title=&quot;Rename does not work with some FTP servers that do not provide directory listings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-188&quot;&gt;VFS-188&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-292&quot; title=&quot;FTP: rename command effectively uses absolute paths which is incorrect in case of USER_DIR_IS_ROOT=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-292&quot;&gt;VFS-292&lt;/a&gt;, both of which had patches submitted last decade without so much as an acknowledgment, though neither patch is exactly right, in that they don&apos;t account for the possibility of a decorator on the source FileObject no include an updated test case. Here is a new patch &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-620&quot; title=&quot;FileObject.moveTo(FileObject) API doesn&amp;#39;t work well for a Linux FTP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-620&quot;&gt;&lt;del&gt;VFS-620&lt;/del&gt;&lt;/a&gt;.patch that accounts for that and adds in a test case that causes the entire suite being run against the FTP provider to be run both with and without the UserDirIsRoot option.&lt;/p&gt;</comment>
                            <comment id="15906486" author="garydgregory" created="Sun, 12 Mar 2017 10:39:52 +0000"  >&lt;p&gt;Thank you for the patch.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look this week unless someone else gets there first.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="15907015" author="garydgregory" created="Mon, 13 Mar 2017 08:42:25 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;If I apply only the &lt;em&gt;test changes&lt;/em&gt; from the patch, then all the tests in &lt;tt&gt;org.apache.commons.vfs2.provider.ftp.test&lt;/tt&gt; pass.&lt;/p&gt;

&lt;p&gt;This tells me that the tests do not demonstrate that something is broken, so I do cannot be sure that the changes in main actually fix anything.&lt;/p&gt;

&lt;p&gt;Can you write a test that fails to show that changes in main are required?&lt;/p&gt;</comment>
                            <comment id="15924521" author="svella" created="Tue, 14 Mar 2017 16:32:30 +0000"  >&lt;p&gt;Updated patch.&lt;br/&gt;
Sorry about that. My original version of the added tests were failing without the update to the provider, but then before I submitted, I refactored the tests to minimize the changes and forgot to retest the original failure with the new tests and it turns out that I missed a few things in the refactored tests that were causing it to run the tests without the userDirIsRoot flag set.&lt;/p&gt;</comment>
                            <comment id="15926789" author="garydgregory" created="Wed, 15 Mar 2017 19:14:46 +0000"  >&lt;p&gt;Hi Shon,&lt;/p&gt;

&lt;p&gt;The patch does not compile. For example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    protected String getFtpRootDir()
+    {
+        return return new File(getTestDirectory(), &quot;homeDirIsRoot&quot;).getPath();
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15926815" author="svella" created="Wed, 15 Mar 2017 19:31:12 +0000"  >&lt;p&gt;Sorry - I guess that what I get for trying to copy and paste the changes into the existing patch instead of doing a new diff from the sources that are working for me. Updated patch uploaded.&lt;/p&gt;
</comment>
                            <comment id="15931617" author="garydgregory" created="Sun, 19 Mar 2017 08:52:17 +0000"  >&lt;p&gt;Please verify and close.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit -m &quot;[VFS-620] FileObject.moveTo(FileObject) API doesn&apos;t work well for a Linux FTP.&quot; -N C:/vcs/svn/apache/commons/trunks-proper/vfs/core/src/main/java/org/apache/commons/vfs2/provider/ftp/FtpFileObject.java C:/vcs/svn/apache/commons/trunks-proper/vfs/src/changes/changes.xml C:/vcs/svn/apache/commons/trunks-proper/vfs/core/src/test/java/org/apache/commons/vfs2/provider/ftp/test/FtpProviderTestCase.java C:/vcs/svn/apache/commons/trunks-proper/vfs/core/src/test/java/org/apache/commons/vfs2/provider/ftp/test/FtpProviderUserDirTestCase.java C:/vcs/svn/apache/commons/trunks-proper/vfs/core/src/test/java/org/apache/commons/vfs2/provider/ftp/test/MultipleConnectionTestCase.java
    Sending        C:/vcs/svn/apache/commons/trunks-proper/vfs/core/src/main/java/org/apache/commons/vfs2/provider/ftp/FtpFileObject.java
    Sending        C:/vcs/svn/apache/commons/trunks-proper/vfs/core/src/test/java/org/apache/commons/vfs2/provider/ftp/test/FtpProviderTestCase.java
    Adding         C:/vcs/svn/apache/commons/trunks-proper/vfs/core/src/test/java/org/apache/commons/vfs2/provider/ftp/test/FtpProviderUserDirTestCase.java
    Sending        C:/vcs/svn/apache/commons/trunks-proper/vfs/core/src/test/java/org/apache/commons/vfs2/provider/ftp/test/MultipleConnectionTestCase.java
    Sending        C:/vcs/svn/apache/commons/trunks-proper/vfs/src/changes/changes.xml
    Transmitting file data ...
    Unknown action received: commit finalizing
    Committed revision 1787594.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I applied the patch with one small change to formatting.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12443788">VFS-292</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12385298">VFS-188</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12858936" name="VFS-620c.patch" size="9065" author="svella" created="Wed, 15 Mar 2017 19:31:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31rnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-619] Issue creating HttpClient timeout</title>
                <link>https://issues.apache.org/jira/browse/VFS-619</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Recently we met an issue that the thread got stuck during the http connection using HttpClient. And It showed that the connection timeout was set to 0, which was not what we set. &lt;br/&gt;
let me briefly show here how we are using VFS2:&lt;br/&gt;
Create a FileSystemOptions with timeout set:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileSystemOptions fso = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemOptions();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HttpFileSystemConfigBuilder httpBuilder = HttpFileSystemConfigBuilder.getInstance();
httpBuilder.setConnectionTimeout(fso, connectionTimeout);
httpBuilder.setSoTimeout(fso, soTimeout);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a FileObject using FileSystemManager:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;vfs2FileManager.resolveFile(fileLocation, fso);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Finally get the input stream using DefaultFileContent:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InputStream instr = fileObject.getInputStream();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We noticed that in executeMethod() of HttpMethodDirector, line 153, it is setting the connection timeout using client&apos;s params. However,&lt;br/&gt;
in HttpClientFactory, it&apos;s setting fileSystemOptions in connectionMgrParams, and the HttpClient&apos;s params would not have this value.&lt;br/&gt;
So we added following 2 lines to make it work:&lt;br/&gt;
In package org.apache.commons.vfs2.provider.http, HttpClientFactory, added line 148 and 149:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;client.getParams().setConnectionManagerTimeout(connectionMgrParams.getConnectionTimeout());
client.getParams().setSoTimeout(connectionMgrParams.getSoTimeout());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please let me know your thought about this and if there is a patch needed, or is there something we are missing or doing wrong ?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12993058">VFS-619</key>
            <summary>Issue creating HttpClient timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Ben Xiang">Ben Xiang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2016 20:28:35 +0000</created>
                <updated>Sun, 16 Jun 2019 23:54:34 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ldb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-618] sftp consumes channels on each cd when directory does not exist</title>
                <link>https://issues.apache.org/jira/browse/VFS-618</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;While resolving a FileObject on an sftp target for a directory that does not exist on the target, SftpFileSystem.getChannel() is called and while trying to cd to the workingDirectory, an SftpException is thrown but the channel object is not released.&lt;br/&gt;
This leads to many sftp channels kept opoen on the target system and consumes unnecessary resources.&lt;br/&gt;
A simple patch of releasing the channel in the caught SftpException in SftpFileSystem line 125 would solve this issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all platforms&lt;/p&gt;</environment>
        <key id="12991043">VFS-618</key>
            <summary>sftp consumes channels on each cd when directory does not exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johnm">J. Baier</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jul 2016 08:30:55 +0000</created>
                <updated>Thu, 11 Aug 2016 08:34:43 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="15385871" author="garydgregory" created="Wed, 20 Jul 2016 13:41:13 +0000"  >&lt;p&gt;Please include the stack trace.&lt;/p&gt;</comment>
                            <comment id="15385926" author="johnm" created="Wed, 20 Jul 2016 14:18:23 +0000"  >&lt;p&gt;Actually this might happen on two locations. The one I stated in my previous comment and in addition to that here (stack trace is based on VFS 2.0):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;org.apache.commons.vfs2.FileSystemException: Could not read from &quot;sftp://user:***@192.168.0.1/folder/file&quot; because it is a not a file.&lt;br/&gt;
        at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:502)&lt;br/&gt;
        at org.apache.commons.vfs2.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1307)&lt;br/&gt;
        at org.apache.commons.vfs2.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:396)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In VFS 2.1, the code probably fixing the problem above is in line 617 of SftpFileObject.doGetInputStream() in the finally block, but this code is commented out.&lt;/p&gt;</comment>
                            <comment id="15386185" author="garydgregory" created="Wed, 20 Jul 2016 16:43:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=johnm&quot; class=&quot;user-hover&quot; rel=&quot;johnm&quot;&gt;johnm&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Can you please try with 2.1 so we can get a stack trace that matches the current sources?&lt;/p&gt;

&lt;p&gt;Thank you!&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="15416883" author="johnm" created="Thu, 11 Aug 2016 08:34:43 +0000"  >&lt;p&gt;Here is the stack trace with 2.1:&lt;br/&gt;
org.apache.commons.vfs2.FileSystemException: Could not read from &quot;sftp://user:***@192.168.0.1/folder/file&quot; because it is not a file.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;	at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:597)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1301)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:411)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i318xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-617] SFTP isReadable fails if unable to determine group identity</title>
                <link>https://issues.apache.org/jira/browse/VFS-617</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The doIsReadable method of SftpFileObject throws an exception if the system cannot identify group/owner permissions....... &lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.commons.vfs2.FileSystemException: Could not determine if file &quot;sftp://myURI&quot; is readable.&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.isReadable(AbstractFileObject.java:1761)&lt;br/&gt;
	at com.avenca.vfs.VFSUtils.main(VFSUtils.java:41)&lt;br/&gt;
Caused by: com.jcraft.jsch.JSchException: Could not get the groups id of the current user (error code: 1)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getGroupsIds(SftpFileSystem.java:263)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileObject.getPermissions(SftpFileObject.java:317)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doIsReadable(SftpFileObject.java:335)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.isReadable(AbstractFileObject.java:1757)&lt;/p&gt;

&lt;p&gt;The problem is the method is using &lt;/p&gt;

&lt;p&gt;return getPermissions(true).isReadable()&lt;/p&gt;

&lt;p&gt;The folder &lt;b&gt;is&lt;/b&gt; readable without these permissions, and so should be set to&lt;/p&gt;

&lt;p&gt;return getPermissions(false).isReadable()&lt;/p&gt;

&lt;p&gt;Which correctly allows the system to identify a readable folder without adding unnecessary restrictions.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 Java 7. Failure occured connecting via SFTP to a Synology box running DSM 6.&lt;/p&gt;</environment>
        <key id="12985719">VFS-617</key>
            <summary>SFTP isReadable fails if unable to determine group identity</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tim.nickels@avenca.co.uk">Tim Nickels</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jun 2016 11:07:07 +0000</created>
                <updated>Sun, 20 Nov 2022 13:37:32 +0000</updated>
                            <resolved>Mon, 23 Dec 2019 18:19:11 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>6</votes>
                                    <watches>15</watches>
                                                                                                                <comments>
                            <comment id="15358387" author="garydgregory" created="Fri, 1 Jul 2016 05:01:45 +0000"  >&lt;p&gt;How can we set up a unit test for this?&lt;/p&gt;

&lt;p&gt;What about the other methods:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SftpFileObject.doIsExecutable()&lt;/li&gt;
	&lt;li&gt;SftpFileObject.doIsWriteable()&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15389884" author="jwoods" created="Fri, 22 Jul 2016 17:33:24 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m not very familiar with the code, but in SftpFileSystem::getGroupsIds, shouldn&apos;t the command-line call &quot;id -G&quot; normally return non-zero&apos;s when it finds group ID&apos;s?  The exception is being thrown when the id is non-zero.  Hope this helps!&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Josh&lt;/p&gt;</comment>
                            <comment id="15468193" author="dawwe" created="Tue, 6 Sep 2016 18:48:40 +0000"  >&lt;p&gt;I have the same problem in a chrooted SFTP only enviroment. &lt;br/&gt;
The call &quot;id -G&quot; returns -1 and the output string from the server is &quot;This service allows sftp connections only.&quot;&lt;/p&gt;

&lt;p&gt;The &quot;id -G&quot; fails because SSH is not available.&lt;/p&gt;

&lt;p&gt;Reverted to VFS 2.0 and everything works as expected&lt;/p&gt;</comment>
                            <comment id="15469323" author="garydgregory" created="Wed, 7 Sep 2016 02:53:11 +0000"  >&lt;p&gt;Can anyone provide a patch with a unit test if possible?&lt;/p&gt;</comment>
                            <comment id="15956457" author="klv_m72" created="Wed, 5 Apr 2017 07:43:21 +0000"  >&lt;p&gt;Looks like a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-590&quot; title=&quot;SFTP moveTo operation might fail on permission checks even if the operation itself might succeed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-590&quot;&gt;&lt;del&gt;VFS-590&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15956467" author="b.eckenfels" created="Wed, 5 Apr 2017 07:53:54 +0000"  >&lt;p&gt;I would agree that &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-590&quot; title=&quot;SFTP moveTo operation might fail on permission checks even if the operation itself might succeed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-590&quot;&gt;&lt;del&gt;VFS-590&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-617&quot; title=&quot;SFTP isReadable fails if unable to determine group identity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-617&quot;&gt;&lt;del&gt;VFS-617&lt;/del&gt;&lt;/a&gt; have both the same cause (explicite checks) however this here seems to be caused at a different operation (unfortunately the stack trace is not complete so we don&apos;t know which, but it is more on login than on move)&lt;/p&gt;

&lt;p&gt;I think I would make the check on login configurable and on move I would rely on failed operation from server without pre-checking (or at least make the pre-check configurable as well). If &quot;isWriteable&quot; can be implemented without, I am not sure. But not using those methods is not only with VFS a good idea.&lt;/p&gt;</comment>
                            <comment id="15956494" author="klv_m72" created="Wed, 5 Apr 2017 08:13:05 +0000"  >&lt;p&gt;The thing is: this operation would always fail, no matter where it is invoked, on move() or on login, if exec channel is not allowed or id command is not present.&lt;/p&gt;

&lt;p&gt;I actually was forced to patch commons-vfs locally. I have added a new SFTP configuration option in class SftpFileSystemConfigBuilder, which I called hardcodedRWXPermissions. When true, doIsExecutable/doIsReadable/doIsWriteable always return true. This way I avoid executing &quot;id&quot;. Instead I rely on jssh to report errors if the actual file operation fails. Works like a charm.&lt;/p&gt;</comment>
                            <comment id="16054136" author="len" created="Mon, 19 Jun 2017 14:50:50 +0000"  >&lt;p&gt;I had the same issue as L. If the user is only allowed sftp (no exec) this fails. I also ended up patching SftpFileObject.java as following:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; PosixPermissions getPermissions(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; checkIds) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
    {
        statSelf();
        /*&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isInGroup = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (checkIds)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; groupId : getAbstractFileSystem().getGroupsIds())
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (groupId == attrs.getGId())
                {
                    isInGroup = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                    &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                }
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isOwner = checkIds ?  attrs.getUId() == getAbstractFileSystem().getUId() : &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;*/
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PosixPermissions(attrs.getPermissions(), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This way neither getGroupsId or getUId, both which use the exec channel are used.&lt;/p&gt;</comment>
                            <comment id="16293907" author="nimlhug" created="Sat, 16 Dec 2017 18:48:55 +0000"  >&lt;p&gt;This is breaking chrooted SFTP with sftp-only on my end as well. What&apos;s the status of this? Is anyone working on this?&lt;/p&gt;</comment>
                            <comment id="16293909" author="garydgregory" created="Sat, 16 Dec 2017 18:55:04 +0000"  >&lt;p&gt;This issue was reported against 2.1. It should be checked against 2.2.&lt;/p&gt;

&lt;p&gt;A PR on github with unit tests is only way this will get any traction IMO.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16975278" author="tyagi.kumar.vineet@gmail.com" created="Fri, 15 Nov 2019 17:45:53 +0000"  >&lt;p&gt;Hi Team,&lt;/p&gt;

&lt;p&gt;I am getting the same issue with VFS 2.4.1 version. I am using jSch .1.53 as well. Could you please advise how to resolve this ? Do I need to use Jsch .1.55?&lt;/p&gt;

&lt;p&gt;Thanks a lot in advance. Would be great if any of you could advise.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Vineet&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16975298" author="tyagi.kumar.vineet@gmail.com" created="Fri, 15 Nov 2019 18:15:57 +0000"  >&lt;p&gt;Hi All,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Just checked that the patch has been removed form&#160;SftpFileObject&lt;/p&gt;


&lt;p&gt;protected PosixPermissions getPermissions(final boolean checkIds) throws Exception {&lt;br/&gt;
&#160; &#160;statSelf();&lt;br/&gt;
&#160; &#160;boolean isInGroup = false;&lt;br/&gt;
&#160; &#160;if (checkIds) {&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160;for (final int groupId : getAbstractFileSystem().getGroupsIds()) {&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;if (groupId == attrs.getGId()) &lt;/p&gt;
{
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; isInGroup = true;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; break;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}
&lt;p&gt;&#160; &#160; &#160; &#160; &#160; &#160; }&lt;br/&gt;
&#160; &#160; &#160;}&lt;br/&gt;
&#160; &#160;final boolean isOwner = checkIds ? attrs.getUId() == getAbstractFileSystem().getUId() : false;&lt;br/&gt;
&#160; &#160;return new PosixPermissions(attrs.getPermissions(), isOwner, isInGroup);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16975846" author="tyagi.kumar.vineet@gmail.com" created="Sat, 16 Nov 2019 23:50:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nimlhug&quot; class=&quot;user-hover&quot; rel=&quot;nimlhug&quot;&gt;nimlhug&lt;/a&gt;&#160;Thanks a lot for your reply. It seems then it will not be working if someone tries to connect to sftp server at windows environment. But it seems very strange that no one complained about it. Are you aware if there is any workaround like any other library updates (jsch) for 2.4.1 or something else that it might work?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Vineet&lt;/p&gt;</comment>
                            <comment id="16975857" author="b.eckenfels" created="Sun, 17 Nov 2019 00:46:12 +0000"  >&lt;p&gt;Vineet, I would assume the simplest way to avoid this problem is to not use the isReadable method in this context. I don&#8217;t see in the stacktrace who is actually calling it, but if it is your code, just don&#8217;t do it.&lt;/p&gt;</comment>
                            <comment id="16976141" author="tyagi.kumar.vineet@gmail.com" created="Sun, 17 Nov 2019 20:25:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks a lot for your reply. Really appreciate it. I will try and update here. We are using&#160;isWriteable as well, that again checking group id so need to avoid this as well.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&#160;&lt;/p&gt;

&lt;p&gt;Vineet&lt;/p&gt;</comment>
                            <comment id="16978387" author="gwarawate" created="Wed, 20 Nov 2019 12:43:11 +0000"  >&lt;p&gt;Below simple code using moveTo Api from vfs2 use to work with&#160;commons-vfs2-2.0.jar but it doesn&#8217;t work with version commons-vfs2-2.2.jar&lt;/p&gt;

&lt;p&gt;it works perfectly fine with SFTP server running on LINUX, only it failse on SFTP server running on windows server.&lt;/p&gt;

&lt;p&gt;Please any suggestions.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;ls command show as below on both server:&lt;/p&gt;

&lt;p&gt;Windows :&lt;/p&gt;

&lt;p&gt;sftp&amp;gt; ls -l&lt;br/&gt;
&lt;del&gt;rw-rw&lt;/del&gt;--- 1 no-user no-group 86 Nov 20 11:03 test.txt&lt;/p&gt;

&lt;p&gt;Linux:&lt;/p&gt;

&lt;p&gt;sftp&amp;gt; ls -l&lt;br/&gt;
-rwxr-xr-x 1 userttest dba 86 Nov 20 11:05 test.txt&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Code sample:&lt;/p&gt;

&lt;p&gt;public static boolean move(String hostName, String username, String password, String remoteSrcFilePath, String remoteDestFilePath){&lt;br/&gt;
 StandardFileSystemManager manager = new StandardFileSystemManager();&lt;/p&gt;

&lt;p&gt;try {&lt;br/&gt;
 manager.init();&lt;/p&gt;

&lt;p&gt;// Create remote object&lt;br/&gt;
 FileObject remoteFile = manager.resolveFile(createConnectionString(hostName, username, password, remoteSrcFilePath), createDefaultOptions());&lt;br/&gt;
 FileObject remoteDestFile = manager.resolveFile(createConnectionString(hostName, username, password, remoteDestFilePath), createDefaultOptions());&lt;/p&gt;

&lt;p&gt;if (remoteFile.exists())&lt;/p&gt;

{ remoteFile.moveTo(remoteDestFile);; System.out.println(&quot;Move remote file success&quot;); return true; }

&lt;p&gt;else&lt;/p&gt;

{ System.out.println(&quot;Source file doesn&apos;t exist&quot;); return false; }

&lt;p&gt;} catch (Exception e)&lt;/p&gt;

{ throw new RuntimeException(e); }

&lt;p&gt;finally&lt;/p&gt;

{ manager.close(); }

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Error:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO org.apache.commons.vfs2.provider.sftp.SftpClientFactory - Authentication succeeded (keyboard-interactive).&lt;br/&gt;
 &apos;id&apos; is not recognized as an internal or external command,&lt;br/&gt;
 operable program or batch file.&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO org.apache.commons.vfs2.provider.sftp.SftpClientFactory - Disconnecting from XXXXX port 22&lt;br/&gt;
 Exception in thread &quot;main&quot; java.lang.RuntimeException: org.apache.commons.vfs2.FileSystemException: Could not determine if file &quot;sftp://!!!!!:***@XXXXX/C:/folder1&quot; is writeable.&lt;br/&gt;
 at com.test.SFTPUtility.move(SFTPUtility.java:107)&lt;br/&gt;
 at com.test.SFTPUtility.main(SFTPUtility.java:35)&lt;br/&gt;
 Caused by: org.apache.commons.vfs2.FileSystemException: Could not determine if file &quot;sftp://!!!!!:***@XXXXX/C:/folder1&quot; is writeable.&lt;br/&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.isWriteable(AbstractFileObject.java:1602)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1646)&lt;br/&gt;
 at com.test.SFTPUtility.move(SFTPUtility.java:98)&lt;br/&gt;
 ... 1 more&lt;br/&gt;
 Caused by: com.jcraft.jsch.JSchException: Could not get the groups id of the current user (error code: 1)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getGroupsIds(SftpFileSystem.java:237)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileObject.getPermissions(SftpFileObject.java:231)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doIsWriteable(SftpFileObject.java:263)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.isWriteable(AbstractFileObject.java:1594)&lt;br/&gt;
 ... 3 more&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16978431" author="tyagi.kumar.vineet@gmail.com" created="Wed, 20 Nov 2019 13:39:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gwarawate&quot; class=&quot;user-hover&quot; rel=&quot;gwarawate&quot;&gt;gwarawate&lt;/a&gt;&#160;Its an issue as they have changed a lot (after 2.0) the way it&#160; connects to sftp server.&#160; In 2.0 isReadable and isWritable returns true and no check for the group ids etc. The solution as of now it to rollback to 2.0&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Vineet&lt;/p&gt;</comment>
                            <comment id="16978433" author="tyagi.kumar.vineet@gmail.com" created="Wed, 20 Nov 2019 13:41:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;&#160;I tried your suggestion but still does not work and same exception as internally it makes the same check again.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Vineet&lt;/p&gt;</comment>
                            <comment id="17002423" author="garydgregory" created="Mon, 23 Dec 2019 18:19:11 +0000"  >&lt;p&gt;In git master. PR #75. Please verify and close.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30d3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-616] SftpFileSystem does cd / in getChannel and fails due to lack of permissions</title>
                <link>https://issues.apache.org/jira/browse/VFS-616</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;with setUserDirIsRoot(false) in options:&lt;/p&gt;

&lt;p&gt;StandardFileSystemManager manager = new StandardFileSystemManager();  manager.setCacheStrategy(org.apache.commons.vfs2.CacheStrategy.MANUAL);&lt;br/&gt;
manager.init();&lt;br/&gt;
manager.resolveFile(localFile).copyFrom(manager.resolveFile(&quot;sftp://aaa@localhost/test/test2&quot;, options)&lt;/p&gt;

&lt;p&gt;fails because user aaa doesn&apos;t have permissions to cd / but the same user has all permissions to read /test/test2&lt;/p&gt;

&lt;p&gt;cd /  is at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getChannel(SftpFileSystem.java:139)&lt;br/&gt;
	  at org.apache.commons.vfs2.provider.sftp.SftpFileObject.statSelf(SftpFileObject.java:151)&lt;br/&gt;
	  at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetType(SftpFileObject.java:114)&lt;br/&gt;
	  at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:496)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x59a6&amp;gt; (a org.apache.commons.vfs2.provider.sftp.SftpFileSystem)&lt;br/&gt;
	  at org.apache.commons.vfs2.provider.AbstractFileObject.exists(AbstractFileObject.java:477)&lt;br/&gt;
	  at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:1013)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;$ sftp aaa@localhost&lt;br/&gt;
Connected to localhost.&lt;br/&gt;
sftp&amp;gt; cd /&lt;br/&gt;
Couldn&apos;t stat remote file: No such file or directory&lt;br/&gt;
sftp&amp;gt; ls /test/test2&lt;br/&gt;
/test/test2&lt;br/&gt;
sftp&amp;gt; get /test/test2&lt;br/&gt;
Fetching /test/test2&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12983161">VFS-616</key>
            <summary>SftpFileSystem does cd / in getChannel and fails due to lack of permissions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sergeg">Serge</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Jun 2016 19:05:18 +0000</created>
                <updated>Sat, 25 Jun 2016 19:10:05 +0000</updated>
                                            <version>2.0</version>
                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i303h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-614] MonitorInputStream should not close the stream in read()</title>
                <link>https://issues.apache.org/jira/browse/VFS-614</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Check the following thread for more description:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mail-archives.apache.org/mod_mbox/commons-user/201606.mbox/%3C90211dd5-5954-e786-e493-30187e68007b%40profuzdigital.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mail-archives.apache.org/mod_mbox/commons-user/201606.mbox/%3C90211dd5-5954-e786-e493-30187e68007b%40profuzdigital.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And the following repo with a &quot;demo&quot; of the bug:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/boris-petrov/vfs-bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/boris-petrov/vfs-bug&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12978650">VFS-614</key>
            <summary>MonitorInputStream should not close the stream in read()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="otto">Otto Fowler</assignee>
                                    <reporter username="boris-petrov">Boris Petrov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jun 2016 08:27:34 +0000</created>
                <updated>Wed, 19 Jun 2019 14:53:04 +0000</updated>
                            <resolved>Wed, 16 May 2018 15:31:33 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16367536" author="ottobackwards" created="Fri, 16 Feb 2018 16:18:24 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;in your test, you are reading from an empty file. &#160;Both the stream detect and EOF read, but the difference is, as you have guessed the wrapped VFS stream closes on EOF.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If you change your test such that the file does have something in it, and you are NOT reading to EOF then it will work.&lt;/p&gt;

&lt;p&gt;I don&apos;t think VFS should close the stream through, it should act as the BufferedOutputStream that is it&apos;s base does&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16375569" author="boris-petrov" created="Sat, 24 Feb 2018 13:46:50 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/projects/VFS/issues/VFS-301&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/VFS/issues/VFS-301&lt;/a&gt;&#160;might be a duplicate or related.&lt;/p&gt;</comment>
                            <comment id="16375580" author="ottobackwards" created="Sat, 24 Feb 2018 13:56:27 +0000"  >&lt;p&gt;I marked the others duplicates, to link them up&lt;/p&gt;

&lt;p&gt;I also commented that there is a PR in for this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/30&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/30&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16477580" author="garydgregory" created="Wed, 16 May 2018 15:31:33 +0000"  >&lt;p&gt;Resolving, please verify and close.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit -m &quot;[VFS-614] MonitorInputStream should not close the stream in read(). Patch by Otto Fowler. I added an EOL to the new file. Closes #30.&quot; -N C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/main/java/org/apache/commons/vfs2/util/MonitorInputStream.java C:/vcs/svn/apache/commons/trunks-proper/vfs/src/changes/changes.xml C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/DefaultFileContentTest.java
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/main/java/org/apache/commons/vfs2/util/MonitorInputStream.java
Adding C:/vcs/svn/apache/commons/trunks-proper/vfs/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/DefaultFileContentTest.java
Sending C:/vcs/svn/apache/commons/trunks-proper/vfs/src/changes/changes.xml
Transmitting file data ...
Unknown action received: commit finalizing
Committed revision 1831735.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16477589" author="ottobackwards" created="Wed, 16 May 2018 15:40:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; although I have the linked issues assigned to me, I do not have rights to resolve them, can you resolve them?&lt;/p&gt;</comment>
                            <comment id="16477623" author="garydgregory" created="Wed, 16 May 2018 16:01:30 +0000"  >&lt;p&gt;The issue is already in the &quot;Resolved&quot; state. Do you mean &quot;Close&quot; this issue?&lt;/p&gt;</comment>
                            <comment id="16477626" author="ottobackwards" created="Wed, 16 May 2018 16:03:03 +0000"  >&lt;p&gt;Yeah, I cannot close this issue, nor can I close the linked duplicated issues&lt;/p&gt;</comment>
                            <comment id="16477633" author="garydgregory" created="Wed, 16 May 2018 16:05:37 +0000"  >&lt;p&gt;Closing per&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt;&apos;s request.&lt;/p&gt;</comment>
                            <comment id="16477647" author="garydgregory" created="Wed, 16 May 2018 16:09:17 +0000"  >&lt;p&gt;Closed linked issues as duplicates.&lt;/p&gt;</comment>
                            <comment id="16867736" author="jochen@apache.org" created="Wed, 19 Jun 2019 14:53:04 +0000"  >&lt;p&gt;I think, what&apos;s actually intended here, is the invocation of onClose() as an indicator of EOF. So, to ensure upwards compatibility, I&apos;d suggest either of&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;1.) Rather than simply removing the read() call, replace it with onClose(). Or, even better:&lt;/p&gt;

&lt;p&gt;2.) Add a new method onEof() and make sure, that it is invoked properly.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12365812">VFS-119</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12457093">VFS-301</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12365812">VFS-119</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12457093">VFS-301</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zf6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-613] doIsWriteable() is not implemented for FtpFileObject</title>
                <link>https://issues.apache.org/jira/browse/VFS-613</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The doIsWriteable() method is not implemented for FtpFileObject and so the isWritable() method returns always true no matter of the actual permissions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12971095">VFS-613</key>
            <summary>doIsWriteable() is not implemented for FtpFileObject</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wollnik@gmail.com">Johannes Wollnik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 May 2016 09:40:20 +0000</created>
                <updated>Sat, 31 Oct 2020 20:08:52 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y7bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-610] Resource leak in CombinedResources.loadResources(String)</title>
                <link>https://issues.apache.org/jira/browse/VFS-610</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.commons.vfs2.util.CombinedResources.loadResources(String)&lt;/tt&gt; doesn&apos;t close the streams it creates:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void loadResources(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; resourceName)
    {
                    ...
                    properties.load(resource.openConnection().getInputStream());
                    ...
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12969696">VFS-610</key>
            <summary>Resource leak in CombinedResources.loadResources(String)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lae">Lae</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 May 2016 23:30:21 +0000</created>
                <updated>Fri, 13 May 2016 23:31:01 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xyp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-606] Hadoop tests fail on JDK9 - tools.jar not found</title>
                <link>https://issues.apache.org/jira/browse/VFS-606</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;As &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/commons-dev/201605.mbox/%3Cngdtmr%24vr5%241%40ger.gmane.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;reported by J&#246;rg Schaible&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; [ERROR] Failed to execute goal on project commons-vfs2: Could not resolve
&amp;gt; dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.commons:commons-vfs2:jar:2.1: Could not
&amp;gt; find artifact jdk.tools:jdk.tools:jar:1.6 at specified path /opt/oracle-jdk-
&amp;gt; bin-1.9.0.0_beta116/../lib/tools.jar -&amp;gt; [Help 1]
&amp;gt; [ERROR]
&amp;gt; [ERROR] To see the full stack trace of the errors, re-run Maven with the -e
&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt;.
&amp;gt; [ERROR] Re-run Maven using the -X &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; to enable full debug logging.
&amp;gt; [ERROR]
&amp;gt; [ERROR] For more information about the errors and possible solutions, please
&amp;gt; read the following articles:
&amp;gt; [ERROR] [Help 1]
&amp;gt; http:&lt;span class=&quot;code-comment&quot;&gt;//cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
&lt;/span&gt;&amp;gt; [ERROR]
&amp;gt; [ERROR] After correcting the problems, you can resume the build with the
&amp;gt; command
&amp;gt; [ERROR]   mvn &amp;lt;goals&amp;gt; -rf :commons-vfs2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;gt;&lt;br/&gt;
&amp;gt; The reason is an invalid (transitive) system dependency on tools.jar of&lt;br/&gt;
&amp;gt; Hadoop which is no longer present in Java 9.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;hadoop-common:test-jar pulls in:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://central.maven.org/maven2/org/apache/hadoop/hadoop-annotations/2.6.0/hadoop-annotations-2.6.0.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/hadoop/hadoop-annotations/2.6.0/hadoop-annotations-2.6.0.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With two different profiles, the os.linux profile activates for me as&lt;br/&gt;
well, as the activation here is &quot;Not a mac&quot;.&lt;/p&gt;

&lt;p&gt;The newer Hadoop 2.7.1 seems to have fixed to these activations.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://central.maven.org/maven2/org/apache/hadoop/hadoop-annotations/2.7.1/hadoop-annotations-2.7.1.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://central.maven.org/maven2/org/apache/hadoop/hadoop-annotations/2.7.1/hadoop-annotations-2.7.1.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(Hadoop 2.7 presumably no longer works on JDK6)&lt;/p&gt;


&lt;p&gt;We don&apos;t need the tools.jar for our test, so while upgrading to 2.7.1 would fix this - it would also mean we could no longer support JDK6. So I suggest adding an &amp;lt;exclusion&amp;gt; on tools.jar on our hadoop test dependency.&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 9&lt;/p&gt;</environment>
        <key id="12965239">VFS-606</key>
            <summary>Hadoop tests fail on JDK9 - tools.jar not found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stain">Stian Soiland-Reyes</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 May 2016 10:24:57 +0000</created>
                <updated>Thu, 5 May 2016 10:35:29 +0000</updated>
                            <resolved>Thu, 5 May 2016 10:35:29 +0000</resolved>
                                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15272174" author="stain" created="Thu, 5 May 2016 10:35:29 +0000"  >&lt;p&gt;Committed &amp;lt;exclusion&amp;gt; of tools.jar&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x7b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-605] [HTTP] EC AlgorithmParameters not available</title>
                <link>https://issues.apache.org/jira/browse/VFS-605</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When building Commons VFS RC1 with IBM JDK 6 and IcedTea/OpenJDK 7, J&#246;rg Schaible &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/commons-dev/201605.mbox/%3Cngdtmr%24vr5%241%40ger.gmane.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;reported an issue&lt;/a&gt; with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.RuntimeException: 
java.security.NoSuchAlgorithmException: EC AlgorithmParameters not 
available&quot;.
        at 
org.apache.commons.vfs2.provider.http.HttpFileContentInfoFactory.create(HttpFileContentInfoFactory.java:51)
        at 
org.apache.commons.vfs2.provider.DefaultFileContent.getContentInfo(DefaultFileContent.java:806)
        at 
org.apache.commons.vfs2.provider.https.test.GetContentInfoFunctionalTest.testGoogle(GetContentInfoFunctionalTest.java:76)
..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test tries to fetch &lt;a href=&quot;https://www.google.com/images/logos/ps_logo2.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.google.com/images/logos/ps_logo2.png&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This seems like a &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1167153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bug in OpenJDK distributions&lt;/a&gt; and whatever SSL methods &lt;a href=&quot;https://www.google.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.google.com/&lt;/a&gt; requests that day.&lt;/p&gt;

&lt;p&gt;However I don&apos;t think building should rely on www.google.com - if anything we should rely on &lt;a href=&quot;https://www.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/&lt;/a&gt; - e.g. &lt;a href=&quot;https://www.apache.org/licenses/LICENSE-2.0.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/LICENSE-2.0.txt&lt;/a&gt; which presumably won&apos;t go away soon.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;IBM JDK6 or IcedTea/Open JDK 7.&lt;/p&gt;</environment>
        <key id="12965235">VFS-605</key>
            <summary>[HTTP] EC AlgorithmParameters not available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stain">Stian Soiland-Reyes</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 May 2016 10:09:55 +0000</created>
                <updated>Thu, 5 May 2016 10:15:38 +0000</updated>
                            <resolved>Thu, 5 May 2016 10:15:38 +0000</resolved>
                                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15272158" author="stain" created="Thu, 5 May 2016 10:15:38 +0000"  >&lt;p&gt;Changed tests to use &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/a&gt; / &lt;a href=&quot;https://www.apache.org/licenses/LICENSE-2.0.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/licenses/LICENSE-2.0.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This issue could re-surface if &lt;a href=&quot;https://www.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/&lt;/a&gt; start requiring Elastic Curve in its SSL configuration - but we can hope Java 6 is no longer relevant by then..&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12598440">VFS-427</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x7a7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-604] PermissionsTests fail if built on noexec mounted file system (e.g. tmpfs)</title>
                <link>https://issues.apache.org/jira/browse/VFS-604</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;If Commons VFS is compiled on a file system mounted with the noexec flag, e.g.  on /tmp with tmpfs, then the PermissionsTests.testExecutable fails:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tests run: 90, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 4.259
sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in
org.apache.commons.vfs2.provider.local.test.LocalProviderTestCase
testExecutable(org.apache.commons.vfs2.test.PermissionsTests)  Time
elapsed: 0.011 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError
    at org.junit.Assert.fail(Assert.java:86)
    at org.junit.Assert.assertTrue(Assert.java:41)
    at org.junit.Assert.assertTrue(Assert.java:52)
    at org.apache.commons.vfs2.test.PermissionsTests.testExecutable(PermissionsTests.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.apache.commons.vfs2.test.AbstractProviderTestCase.runTest(AbstractProviderTestCase.java:218)
    at junit.framework.TestCase.runBare(TestCase.java:141)
    at junit.framework.TestResult$1.protect(TestResult.java:122)
    at junit.framework.TestResult.runProtected(TestResult.java:142)
    at junit.framework.TestResult.run(TestResult.java:125)
    at junit.framework.TestCase.run(TestCase.java:129)
    at junit.framework.TestSuite.runTest(TestSuite.java:252)
    at junit.framework.TestSuite.run(TestSuite.java:247)
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:23)
    at org.apache.commons.vfs2.test.AbstractTestSuite$1.protect(AbstractTestSuite.java:149)
    at junit.framework.TestResult.runProtected(TestResult.java:142)
    at org.apache.commons.vfs2.test.AbstractTestSuite.run(AbstractTestSuite.java:154)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/commons-dev/201605.mbox/%3CCAMBJEmVkgqCbnz4BUJ7KpBn_cyTgxgJJiy%3D16dJQxNcyTT_c4w%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/commons-dev/201605.mbox/%3CCAMBJEmVkgqCbnz4BUJ7KpBn_cyTgxgJJiy%3D16dJQxNcyTT_c4w%40mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I must admit this is a bit weird - because you ARE allowed to set exec permissions - they just don&apos;t work when trying to run.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;stain@biggie:/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/tmp$ echo &lt;span class=&quot;code-quote&quot;&gt;&apos;#!/bin/cat&apos;&lt;/span&gt; &amp;gt; hello
stain@biggie:/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/tmp$ chmod 755 hello 
stain@biggie:/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/tmp$ ./hello 
#!/bin/cat

stain@biggie:/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/tmp$ cd /tmp
stain@biggie:/tmp$ echo &lt;span class=&quot;code-quote&quot;&gt;&apos;#!/bin/cat&apos;&lt;/span&gt; &amp;gt; hello
stain@biggie:/tmp$ chmod 755 hello 

stain@biggie:/tmp$ ./hello 
-bash: ./hello: Permission denied

stain@biggie:/tmp$ ls -al hello 
-rwxr-xr-x 1 stain stain 11 May  5 10:16 hello
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I don&apos;t think Commons VFS is doing something wrong - file.isExecutable() is still false even though setExecutable() (presumably) succeeds - but the test could be improved to check the return values. Unless the signature for isExecutable should read what the file permission is SET as (e.g. replicate ls -al), rather than what the EFFECTIVE permission is (can I execute it?).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04, with noexec mounted tmpfs&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;stain@biggie:/tmp/vfs$ cat /etc/fstab| grep tmp
tmpfs /tmp tmpfs defaults,noatime,nosuid,nodev,noexec,mode=1777,size=4G 0 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and OpenJDK 8&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00)
Maven home: /home/stain/software/maven
Java version: 1.8.0_72-internal, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-8-openjdk-amd64/jre
Default locale: en_GB, platform encoding: UTF-8
OS name: &lt;span class=&quot;code-quote&quot;&gt;&quot;linux&quot;&lt;/span&gt;, version: &lt;span class=&quot;code-quote&quot;&gt;&quot;3.16.0-67-&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;&quot;&lt;/span&gt;, arch: &lt;span class=&quot;code-quote&quot;&gt;&quot;amd64&quot;&lt;/span&gt;, family: &lt;span class=&quot;code-quote&quot;&gt;&quot;unix&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="12965226">VFS-604</key>
            <summary>PermissionsTests fail if built on noexec mounted file system (e.g. tmpfs)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stain">Stian Soiland-Reyes</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 May 2016 09:23:10 +0000</created>
                <updated>Thu, 5 May 2016 09:23:10 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x787:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-603] FIx trivial breakages of binary compatibility with commons-vfs-2.0</title>
                <link>https://issues.apache.org/jira/browse/VFS-603</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;There are a few changes which were easily identified that break binary compatibility with the commons-vfs-2.0 release.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;GzipFIleObject&lt;/li&gt;
	&lt;li&gt;BzipFileObject&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12964165">VFS-603</key>
            <summary>FIx trivial breakages of binary compatibility with commons-vfs-2.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="elserj">Josh Elser</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 May 2016 19:44:44 +0000</created>
                <updated>Thu, 19 May 2016 18:25:47 +0000</updated>
                            <resolved>Sun, 1 May 2016 20:37:50 +0000</resolved>
                                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15265937" author="elserj" created="Sun, 1 May 2016 20:37:50 +0000"  >&lt;p&gt;Restored the 2.0 constructors (as deprecated) in r1741889.&lt;/p&gt;</comment>
                            <comment id="15265948" author="garydgregory" created="Sun, 1 May 2016 21:21:42 +0000"  >&lt;p&gt;You should probably mark the old stuff you are adding back as deprecated with @link to the new stuff.&lt;/p&gt;</comment>
                            <comment id="15265949" author="elserj" created="Sun, 1 May 2016 21:27:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;You should probably mark the old stuff you are adding back as deprecated with @link to the new stuff.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did mark the old ones as deprecated. I will add a link too since you asked.&lt;/p&gt;</comment>
                            <comment id="15266008" author="garydgregory" created="Sun, 1 May 2016 23:51:43 +0000"  >&lt;p&gt;Thanks, I updated the Javadocs further to use @deprecated instead of plain text.&lt;/p&gt;</comment>
                            <comment id="15291750" author="b.eckenfels" created="Thu, 19 May 2016 18:25:47 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x0on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-599] Duplicate FileCreated events are getting fired when copying the same file over and over</title>
                <link>https://issues.apache.org/jira/browse/VFS-599</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Hi Team,&lt;br/&gt;
We have implemented a FilePoller class which polls a particular directory and moves the files to some other directory upon receipt of the files.&lt;/p&gt;

&lt;p&gt;It is working fine in both Windows and RHEL when we drop different files in the affected directory. However, when we copy the same file over and over it is creating duplicate &quot;fileCreated&quot; events and duplicate events are failing because the original event is moving the files to different directory by the time duplicate event gets fired automatically.&lt;/p&gt;

&lt;p&gt;I have attached the Java class which is implemented. &lt;/p&gt;

&lt;p&gt;Please check and suggest us an approach to avoid this.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Raghavendra&lt;/p&gt;</description>
                <environment>&lt;p&gt;Development&lt;/p&gt;</environment>
        <key id="12962264">VFS-599</key>
            <summary>Duplicate FileCreated events are getting fired when copying the same file over and over</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rdesoju@gmail.com">Raghavendra</reporter>
                        <labels>
                            <label>DefaultFileMonitor</label>
                            <label>duplicate</label>
                            <label>fileCreated</label>
                    </labels>
                <created>Mon, 25 Apr 2016 14:55:22 +0000</created>
                <updated>Mon, 25 Apr 2016 18:35:22 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15256439" author="rdesoju@gmail.com" created="Mon, 25 Apr 2016 14:59:36 +0000"  >&lt;p&gt;Steps to reproduce the issue:-&lt;/p&gt;

&lt;p&gt;1. Setup below directories:-&lt;br/&gt;
Windows:-&lt;br/&gt;
C:\\home\\tibco\\MCH\\Data\\dev\\test\\Incoming&lt;br class=&quot;atl-forced-newline&quot; /&gt;
C:\\home\\tibco\\MCH\\Data\\dev\\test\\Intermediate&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Linux:-&lt;br/&gt;
/home/tibco/MCH/Data/dev/test/Incoming/&lt;br/&gt;
/home/tibco/MCH/Data/dev/test/Intermediate/&lt;/p&gt;

&lt;p&gt;2. Try dropping the same file over and over in &apos;Incoming&apos; directory.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12800530" name="FilePoller.java" size="8324" author="rdesoju@gmail.com" created="Mon, 25 Apr 2016 14:55:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wozr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-598] The links under the &quot;Components&quot; heading on the project page are broken</title>
                <link>https://issues.apache.org/jira/browse/VFS-598</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;On the &lt;a href=&quot;http://commons.apache.org/proper/commons-vfs/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-vfs/&lt;/a&gt; page, there are three links underneath &quot;Components&quot; that are broken: Core, Examples and Sandbox.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Browser&lt;/p&gt;</environment>
        <key id="12950829">VFS-598</key>
            <summary>The links under the &quot;Components&quot; heading on the project page are broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hoogenbj">Johan Hoogenboezem</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Mar 2016 12:33:53 +0000</created>
                <updated>Wed, 16 Mar 2016 12:33:53 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2urhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-595] Colon in folder name fire NPE on start up</title>
                <link>https://issues.apache.org/jira/browse/VFS-595</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;A NullPointerException is thrown when a folder containing a colon is found.&lt;/p&gt;

&lt;p&gt;StackTrace: &lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile(AbstractFileSystem.java:322)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileSystem.resolveFile(AbstractFileSystem.java:317)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.resolveFile(AbstractFileObject.java:752)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.resolveFiles(AbstractFileObject.java:744)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getChildren(AbstractFileObject.java:647)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileMonitor.doAddFile(DefaultFileMonitor.java:217)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileMonitor.addFile(DefaultFileMonitor.java:174)&lt;br/&gt;
	at de.sourcepark.synaptic.hashfs.FileMonitor.start(FileMonitor.java:32)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS X Java 8&lt;/p&gt;</environment>
        <key id="12937275">VFS-595</key>
            <summary>Colon in folder name fire NPE on start up</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="barmeier">Matthias Barmeier</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Feb 2016 16:49:12 +0000</created>
                <updated>Mon, 23 Apr 2018 06:30:10 +0000</updated>
                            <resolved>Mon, 23 Apr 2018 06:30:10 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15139677" author="b.eckenfels" created="Tue, 9 Feb 2016 20:15:28 +0000"  >&lt;p&gt;Can you try a 2.1 snapshot the parser code did change a bit. Can you tell us how the path with the colon actually looks like and what directory you have added to the monitor (i.e. is the colon in a subdir or parent name component?). Could you actually quickly debug that (will take a few days for me to get an environment where I an reproduce it).&lt;/p&gt;</comment>
                            <comment id="15145859" author="barmeier" created="Sat, 13 Feb 2016 07:49:09 +0000"  >&lt;p&gt;I tried the 2.1-SNAPSHOT from &lt;a href=&quot;http://repository.jboss.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repository.jboss.org/&lt;/a&gt; and this version worked as expected. No NPE anymore. Thanks for the hint &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2simf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-594] cache holds onto ZipFiles, which leak file handlers</title>
                <link>https://issues.apache.org/jira/browse/VFS-594</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The wonderful Java implementation of ZipFile opens up the file on instance creation. That&apos;s exceptionally wasteful on Linux but downright buggy on Windows, because Windows will then obtain an exclusive lock on that file.&lt;/p&gt;

&lt;p&gt;In ENSIME, this has the wonderful side effect of making compilation silently fail, because the compiler can&apos;t write out to the jar file, because it&apos;s being held by the IDE process.&lt;/p&gt;

&lt;p&gt;The references are being kept alive by the VFS cache. I&apos;m going to try to disable it, as well as attempt as much manual closing of ZipFiles as I possibly can.&lt;/p&gt;

&lt;p&gt;Tracking from &lt;a href=&quot;https://github.com/ensime/ensime-server/issues/1276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ensime/ensime-server/issues/1276&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936641">VFS-594</key>
            <summary>cache holds onto ZipFiles, which leak file handlers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fommil">Sam Halliday</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2016 08:15:37 +0000</created>
                <updated>Thu, 4 Feb 2016 22:55:11 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15132021" author="fommil" created="Thu, 4 Feb 2016 09:29:34 +0000"  >&lt;p&gt;I&apos;m trialling turning the cache to MANUAL mode, but is there a more canonical way to disable the cache? Possibly even just for zip/jar files?&lt;/p&gt;

&lt;p&gt;Note that I can monkey patch, so if you can show me where in your code that the files are added to the cache, I can bypass it.&lt;/p&gt;</comment>
                            <comment id="15132182" author="fommil" created="Thu, 4 Feb 2016 11:29:36 +0000"  >&lt;p&gt;I think NullFilesCache is more like what we want. It seems to break absolutely everything.&lt;/p&gt;</comment>
                            <comment id="15132210" author="fommil" created="Thu, 4 Feb 2016 11:53:09 +0000"  >&lt;p&gt;&quot;break absolutely everything&quot; more specifically meaning that `FileObject.findFiles` returns `null` on jars when the cache is disabled.&lt;/p&gt;</comment>
                            <comment id="15132861" author="b.eckenfels" created="Thu, 4 Feb 2016 19:39:18 +0000"  >&lt;p&gt;I need to dig a bit deeper to give a  detailed answer, but with 2.1-SN you can use `manager.closeFilesystem(file.getFileSystem ())` to actually close the overlay filesystem and remove all its entries from the cache. It will also close the ZipFile (I think). I am not sure if it completely works in 2.0, lots of fixes in that area are contained in the snapshot.&lt;/p&gt;

&lt;p&gt;Using the nullcache does not work very well with overlay filesystems (unfortunatelly).&lt;/p&gt;</comment>
                            <comment id="15132866" author="fommil" created="Thu, 4 Feb 2016 19:41:40 +0000"  >&lt;p&gt;Are you / can you publish to sonatype?&lt;/p&gt;
</comment>
                            <comment id="15132872" author="b.eckenfels" created="Thu, 4 Feb 2016 19:44:27 +0000"  >&lt;p&gt;VFS 2.1 when released will show up on maven central yes (if that was the question).&lt;/p&gt;</comment>
                            <comment id="15132883" author="fommil" created="Thu, 4 Feb 2016 19:48:40 +0000"  >&lt;p&gt;No, are you publishing snapshots on sonatype?&lt;/p&gt;
</comment>
                            <comment id="15132907" author="b.eckenfels" created="Thu, 4 Feb 2016 20:04:31 +0000"  >&lt;p&gt;Ah yes, there is an integration build:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://continuum-ci.apache.org/continuum/buildResults.action?projectId=129&amp;amp;projectGroupId=16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://continuum-ci.apache.org/continuum/buildResults.action?projectId=129&amp;amp;amp;projectGroupId=16&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It uploads to the Nexus Snapshot Repo:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-vfs2/2.1-SNAPSHOT&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-vfs2/2.1-SNAPSHOT&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15133029" author="fommil" created="Thu, 4 Feb 2016 21:03:40 +0000"  >&lt;p&gt;cool! I&apos;ll try that out.&lt;/p&gt;
</comment>
                            <comment id="15133110" author="fommil" created="Thu, 4 Feb 2016 21:49:11 +0000"  >&lt;p&gt;there is something wrong with the way you&apos;re publishing your snapshots, this file should exist:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://oss.sonatype.org/content/repositories/snapshots/org/apache/commons/commons-vfs2/2.1-SNAPSHOT/commons-vfs2-2.1-SNAPSHOT.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://oss.sonatype.org/content/repositories/snapshots/org/apache/commons/commons-vfs2/2.1-SNAPSHOT/commons-vfs2-2.1-SNAPSHOT.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;but you&apos;ve only got the individual snapshot poms, no &quot;latest&quot;... so I&apos;m afraid I can&apos;t use it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Can you please investigate? Here&apos;s an example that does work &lt;a href=&quot;https://github.com/fommil/matrix-toolkits-java/blob/master/pom.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fommil/matrix-toolkits-java/blob/master/pom.xml&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15133118" author="fommil" created="Thu, 4 Feb 2016 21:52:28 +0000"  >&lt;p&gt;also, I&apos;m now running this after I finish using each jar file (2.0)&lt;/p&gt;

&lt;p&gt;      def nuke(jar: FileObject) = &lt;/p&gt;
{
        jar.close()
        vfs.getFilesCache.removeFile(jar.getFileSystem, jar.getName)
    }

&lt;p&gt;but I&apos;m still seeing live references to the jar: from a YourKit references analyis of a strongly reachable object. So how do I really remove things from the refReverseMap ?&lt;/p&gt;

&lt;p&gt;&quot;Name&quot;,&quot;Retained Size&quot;,&quot;Shallow Size&quot;,&quot;Level&quot;&lt;br/&gt;
&quot;java.util.jar.JarFile name = &quot;&quot;C:\Users\ENSIME\AppData\Local\Temp\1454615462378-0\testing\simpleJar\target\scala-2.11\testingsimplejar_2.11-0.9.10-SNAPSHOT.jar&quot;&quot;&quot;,&quot;144&quot;,&quot;56&quot;,&quot;1&quot;&lt;br/&gt;
&quot;zipFile of org.apache.commons.vfs2.provider.jar.JarFileSystem&quot;,&quot;1464&quot;,&quot;72&quot;,&quot;2&quot;&lt;br/&gt;
&quot;fileSystem of org.apache.commons.vfs2.cache.FileSystemAndNameKey&quot;,&quot;24&quot;,&quot;24&quot;,&quot;3&quot;&lt;br/&gt;
&quot;value of java.util.HashMap$Entry chunk size = 1&quot;,&quot;56&quot;,&quot;32&quot;,&quot;4&quot;&lt;br/&gt;
&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;4356&amp;#93;&lt;/span&gt; of java.util.HashMap$Entry&lt;span class=&quot;error&quot;&gt;&amp;#91;16384&amp;#93;&lt;/span&gt;&quot;,&quot;747800&quot;,&quot;65552&quot;,&quot;5&quot;&lt;br/&gt;
&quot;table of java.util.HashMap size = 12183&quot;,&quot;747848&quot;,&quot;48&quot;,&quot;6&quot;&lt;br/&gt;
&quot;refReverseMap of org.apache.commons.vfs2.cache.SoftRefFilesCache&quot;,&quot;1730592&quot;,&quot;48&quot;,&quot;7&quot;&lt;br/&gt;
&quot;filesCache of org.apache.commons.vfs2.impl.StandardFileSystemManager&quot;,&quot;1737360&quot;,&quot;96&quot;,&quot;8&quot;&lt;br/&gt;
&quot;vfs of org.ensime.core.RichPresentationCompiler &lt;span class=&quot;error&quot;&gt;&amp;#91;Stack Local&amp;#93;&lt;/span&gt;&quot;,&quot;12024160&quot;,&quot;2080&quot;,&quot;9&quot;&lt;br/&gt;
&quot;compiler of scala.tools.nsc.interactive.PresentationCompilerThread &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread, Stack Local&amp;#93;&lt;/span&gt;  &quot;&quot;Scala Presentation Compiler []&quot;&quot;&quot;,&quot;1264&quot;,&quot;120&quot;,&quot;10&quot;&lt;/p&gt;</comment>
                            <comment id="15133214" author="fommil" created="Thu, 4 Feb 2016 22:49:57 +0000"  >&lt;p&gt;ok, turns out VFS2 is *&lt;b&gt;not&lt;/b&gt;* closing zipFiles when removing them from the cache. this is my hack&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;// WORKAROUND https://issues.apache.org/jira/browse/VFS-594
&lt;/span&gt;    def nuke(jar: FileObject) = {
      jar.close()

      val fs = jar.getFileSystem

      val field = classOf[ZipFileSystem].getDeclaredField(&lt;span class=&quot;code-quote&quot;&gt;&quot;zipFile&quot;&lt;/span&gt;)
      field.setAccessible(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
      val zip = field.get(fs)
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (zip != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        zip.asInstanceOf[ZipFile].close()

      vfs.getFilesCache.clear(fs)
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15133221" author="fommil" created="Thu, 4 Feb 2016 22:52:53 +0000"  >&lt;p&gt;actually I might just monkey patch it&lt;/p&gt;</comment>
                            <comment id="15133251" author="fommil" created="Thu, 4 Feb 2016 22:55:11 +0000"  >&lt;p&gt;looks like you&apos;ve added some hooks for this in 2.1, but its still not closing the zipFile &lt;a href=&quot;https://github.com/apache/commons-vfs/blob/trunk/core/src/main/java/org/apache/commons/vfs2/provider/zip/ZipFileSystem.java#L227-L230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/blob/trunk/core/src/main/java/org/apache/commons/vfs2/provider/zip/ZipFileSystem.java#L227-L230&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sepr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-593] duplicated Strings inside WindowsLocalFile</title>
                <link>https://issues.apache.org/jira/browse/VFS-593</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I did a YourKit analysis of a heapdump when running ENSIME, which uses VFS2, and I found several GB (25%) of the heap was wasted on duplicated strings within VFS2.&lt;/p&gt;

&lt;p&gt;This could be averted by using `.intern()` on Strings that represent paths.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934616">VFS-593</key>
            <summary>duplicated Strings inside WindowsLocalFile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fommil">Sam Halliday</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jan 2016 22:58:12 +0000</created>
                <updated>Thu, 4 Feb 2016 08:12:57 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15123095" author="b.eckenfels" created="Fri, 29 Jan 2016 07:00:08 +0000"  >&lt;p&gt;Note sure if .intern() is a good default solution. With automatic string deduplication in the background the problem should be smaller, but more importantly I am not sure where this excessive duplication is coming from because the internal file cache is supposed to deduplicate the persisting FileObjects.&lt;/p&gt;

&lt;p&gt;So here are  few things to consider:&lt;/p&gt;

&lt;p&gt;A) let us know what strings exactly (class and fieldname and content pattern) you see duplicated&lt;br/&gt;
B) give us a class histogram with the count of live classes in the above mentioned heapdump (especially how many *FileObjects, *FileNames and *FileSystem instances are we talking about and how many have different path)&lt;br/&gt;
C) can you try with a 2.1 SNAPSHOT, there are multiple leaks fixed in this area (especially when using overlay archive filesystems). If you have compatibility issues with 2.1 please let us know in a seperate bug&lt;br/&gt;
D) how is your file manager configured, especially the FilesCache and CacheStrategy&lt;br/&gt;
E) can you confirm you are talking about live objects and not allocation profiling (i.e. are the strings strongly referenced). ( Intern() wont help to reduce the production rate of those strings, only avoids multiple instances to be referenced)&lt;br/&gt;
F) are you dynamically (explicite or implicite) creating new file systems (layered on top of the LocalFileSystem)&lt;br/&gt;
G) if you can make a test run with a large heap which does not contain sensitive data you could provide us with a heap dump&lt;/p&gt;</comment>
                            <comment id="15126567" author="fommil" created="Mon, 1 Feb 2016 16:58:11 +0000"  >&lt;p&gt;we&apos;re just going to monkey patch this in our application. Sorry, can&apos;t share the heap dump, but should be trivial for you to reproduce.&lt;/p&gt;</comment>
                            <comment id="15127126" author="fommil" created="Mon, 1 Feb 2016 21:56:13 +0000"  >&lt;p&gt;I did a heapdump of a very small process, the wastage here is only a few MB but this scales &lt;a href=&quot;https://github.com/ensime/ensime-server/issues/1257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ensime/ensime-server/issues/1257&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15131914" author="fommil" created="Thu, 4 Feb 2016 08:12:57 +0000"  >&lt;p&gt;(that heap dump I can share with you)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s293:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-592] ftp IPV6 URI always throws 550 Failed to change directory to Remote Root Directory</title>
                <link>https://issues.apache.org/jira/browse/VFS-592</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;FTP URI when connected with IPV6 machine always throws either of the following &lt;/p&gt;

&lt;p&gt;1) 550 Failed to change directory to Remote Root Directory&lt;br/&gt;
2) org.apache.commons.vfs2.FileSystemException: Could not determine the type of file&lt;/p&gt;

&lt;p&gt;The code snippet :&lt;br/&gt;
-----------------------------&lt;/p&gt;

&lt;p&gt;public void performFTP() throws IOException&lt;br/&gt;
{&lt;br/&gt;
		FileObject rootDirFileObject;&lt;/p&gt;

&lt;p&gt;        FileSystemManager vfsManager = VFS.getManager();&lt;br/&gt;
        UserAuthenticator auth = new StaticUserAuthenticator(null, &quot;ipv6test&quot;,&quot;Welcome6&quot;);&lt;/p&gt;

&lt;p&gt;        FileSystemOptions opts = new FileSystemOptions();&lt;br/&gt;
        FtpFileSystemConfigBuilder.getInstance().setPassiveMode(opts, true);&lt;br/&gt;
        FtpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true);&lt;/p&gt;

&lt;p&gt;        DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(opts, auth);&lt;br/&gt;
        rootDirFileObject = vfsManager.resolveFile(&quot;ftp://adc00pcf.us.oracle.com/abc&quot;, opts);&lt;/p&gt;

&lt;p&gt;        if(rootDirFileObject == null || !rootDirFileObject.exists()){&lt;br/&gt;
            try &lt;/p&gt;
{
 			throw new Exception(&quot;ftp.connection.remote.path.does.not.exist&quot;);
            }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
            	// TODO Auto-generated catch block
            	e.printStackTrace();
            }
&lt;p&gt;        }&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12927254">VFS-592</key>
            <summary>ftp IPV6 URI always throws 550 Failed to change directory to Remote Root Directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Balakrishnan J">Balakrishnan J</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jan 2016 11:29:13 +0000</created>
                <updated>Fri, 26 Feb 2021 17:49:45 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15082882" author="balakrishnan j" created="Tue, 5 Jan 2016 11:33:25 +0000"  >&lt;p&gt;The error reported whenever I try to find the filetype of the remote folder.&lt;/p&gt;

&lt;p&gt;For the same IPv6 machine, I could get the FTP working with apache commons FTPClient.&lt;/p&gt;</comment>
                            <comment id="15082886" author="balakrishnan j" created="Tue, 5 Jan 2016 11:35:47 +0000"  >&lt;p&gt;The same ftp url through FireFox browser is also working.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;ftp://adc00pcf.us.oracle.com/abc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ftp://adc00pcf.us.oracle.com/abc&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;ftp://adc00pcf.us.oracle.com/abc/abc_1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ftp://adc00pcf.us.oracle.com/abc/abc_1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15082909" author="balakrishnan j" created="Tue, 5 Jan 2016 11:46:10 +0000"  >&lt;p&gt;From the configurations point of view the following are my configurations in vsftpd.conf&lt;/p&gt;

&lt;p&gt;anonymous_enable=YES&lt;br/&gt;
local_enable=YES&lt;br/&gt;
write_enable=YES&lt;br/&gt;
local_umask=777&lt;br/&gt;
anon_mkdir_write_enable=YES&lt;br/&gt;
anon_other_write_enable=YES&lt;br/&gt;
dirmessage_enable=YES&lt;br/&gt;
xferlog_enable=YES&lt;br/&gt;
connect_from_port_20=YES&lt;br/&gt;
xferlog_std_format=YES&lt;br/&gt;
listen_ipv6=YES&lt;br/&gt;
pam_service_name=vsftpd&lt;br/&gt;
userlist_enable=YES&lt;br/&gt;
tcp_wrappers=YES&lt;br/&gt;
userlist_deny=NO&lt;br/&gt;
dirlist_enable=YES&lt;br/&gt;
log_ftp_protocol=YES&lt;br/&gt;
port_enable=YES&lt;br/&gt;
listen_address6=2606:b400:2000:834:216:3eff:fe16:d470&lt;/p&gt;</comment>
                            <comment id="15082916" author="balakrishnan j" created="Tue, 5 Jan 2016 11:49:26 +0000"  >&lt;p&gt;LIst of jars in use :&lt;br/&gt;
--------------------------------&lt;br/&gt;
    commons-vfs2-2.0.jar&lt;br/&gt;
    commons-logging-1.1.1.jar&lt;br/&gt;
    commons-collections-3.2.jar&lt;br/&gt;
    commons-net-3.4.jar&lt;br/&gt;
    commons-httpclient-3.1.jar&lt;br/&gt;
    com-jcraft-jsch.jar&lt;/p&gt;</comment>
                            <comment id="17291832" author="garydgregory" created="Fri, 26 Feb 2021 17:49:45 +0000"  >&lt;p&gt;Please try Commons VFS 2.7.0.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qsvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-591] Created files not detected when  using  DefaultFileMonitor</title>
                <link>https://issues.apache.org/jira/browse/VFS-591</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In Windows-7 environment, when using the  DefaultFileMonitor for monitoring the newly created files, I have encountered the following issues:&lt;br/&gt;
by copying the files from Explorer with Ctrl-C/Ctrl-V of a folder or just for a one single file, the files are put in the so called Cache but they are not seen  by the fileCreated method of FileListner class.&lt;/p&gt;

&lt;p&gt; org.apache.commons.vfs2.cache.SoftRefFilesCache -putFile: &lt;a href=&quot;file:///C:/Temp/My-file.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///C:/Temp/My-file.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;but no further reference about what is happening with it. My questions are:&lt;br/&gt;
What could be the reason for evicting the file from the cache?&lt;br/&gt;
Have you observed this kind of behavior in your tests?&lt;br/&gt;
Is the 2.1-SNAPHSOT solving this issue?&lt;br/&gt;
Thanks.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7&lt;/p&gt;</environment>
        <key id="12922738">VFS-591</key>
            <summary>Created files not detected when  using  DefaultFileMonitor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="spicoflorin">Florin Spico</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Dec 2015 15:09:06 +0000</created>
                <updated>Thu, 17 Dec 2015 15:09:06 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q1hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-590] SFTP moveTo operation might fail on permission checks even if the operation itself might succeed</title>
                <link>https://issues.apache.org/jira/browse/VFS-590</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Continuing with SFTP moveTo, see &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-588&quot; title=&quot;SftpProviderTestCase is not robbust in case a timeout is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-588&quot;&gt;VFS-588&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-589&quot; title=&quot;SFTP moveTo operation hangs if the server does not support SSH channelExec.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-589&quot;&gt;&lt;del&gt;VFS-589&lt;/del&gt;&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;The permission checks that VFS performs during moveTo() can result in failure. &lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(final FileObject destFile) starts with some checks:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void moveTo(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject destFile) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (canRenameTo(destFile))
        {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getParent().isWriteable())
            {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider/rename-parent-read-only.error&quot;&lt;/span&gt;,
                        getName(),
                        getParent().getName());
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isWriteable())
            {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider/rename-read-only.error&quot;&lt;/span&gt;, getName());
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is: isWriteable() might fail or even hang. Performing moveTo without this check might successfully rename the file.&lt;/p&gt;

&lt;p&gt;isWriteable() in case of SFTP can fail if the server disables SSH channelExec. Or if it does not support &quot;id&quot; command.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12916933">VFS-590</key>
            <summary>SFTP moveTo operation might fail on permission checks even if the operation itself might succeed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Nov 2015 10:51:20 +0000</created>
                <updated>Tue, 25 Oct 2022 13:35:45 +0000</updated>
                            <resolved>Mon, 23 Dec 2019 18:14:56 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>5</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16296786" author="klv_m72" created="Tue, 19 Dec 2017 13:29:38 +0000"  >&lt;p&gt;As I wrote in the description: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Performing moveTo without this check might successfully rename the file. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In our case it worked: the server had disabled SSH channelExec. After patching commons-vfs not to perform all those isWriteable() moveTo() completed successfully. &lt;/p&gt;</comment>
                            <comment id="16296810" author="klv_m72" created="Tue, 19 Dec 2017 13:51:21 +0000"  >&lt;p&gt;I do not know how and when this issue will be fixed. &lt;/p&gt;

&lt;p&gt;There is a more active discussion of a very similar issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-617&quot; title=&quot;SFTP isReadable fails if unable to determine group identity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-617&quot;&gt;&lt;del&gt;VFS-617&lt;/del&gt;&lt;/a&gt;. IMO &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-617&quot; title=&quot;SFTP isReadable fails if unable to determine group identity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-617&quot;&gt;&lt;del&gt;VFS-617&lt;/del&gt;&lt;/a&gt; fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-590&quot; title=&quot;SFTP moveTo operation might fail on permission checks even if the operation itself might succeed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-590&quot;&gt;&lt;del&gt;VFS-590&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;
</comment>
                            <comment id="16541427" author="braetkuegeli" created="Thu, 12 Jul 2018 10:11:00 +0000"  >&lt;p&gt;&#65279;&lt;br/&gt;
&#65279;Besten Dank f&#252;r Ihre Email. Ich bin bis und mit 20. Juli 2018 abwesend. Ihre Email wird in dieser Zeit weder gelesen noch weitergeleitet.&lt;/p&gt;

&lt;p&gt;Freundliche Gr&#252;sse&lt;br/&gt;
Jussi Prevost&lt;/p&gt;

&lt;p&gt;L&#246;wenfels Partner AG  I  Maihofstrasse 1 I  6004 Luzern&lt;br/&gt;
Telefon  +41 41 418 44 00  I  Fax +41 41 418 44 44&lt;br/&gt;
jussi.prevost@loewenfels.ch&amp;lt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:jussi.prevost@loewenfels.ch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;jussi.prevost@loewenfels.ch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&amp;gt;  I  www.loewenfels.ch&amp;lt;&lt;a href=&quot;http://www.loewenfels.ch/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.loewenfels.ch/&lt;/a&gt;&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16541526" author="garydgregory" created="Thu, 12 Jul 2018 12:04:37 +0000"  >&lt;p&gt;Feel free to provide a PR. A test is welcome as well.&lt;/p&gt;</comment>
                            <comment id="16541829" author="garydgregory" created="Thu, 12 Jul 2018 15:39:20 +0000"  >&lt;p&gt;We are volunteers here at Apache with jobs, responsibilities, and so on; so unless you are willing to help out by providing a patch preferably with a test, then yes, you might as well wish for a miracle &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17002421" author="garydgregory" created="Mon, 23 Dec 2019 18:14:56 +0000"  >&lt;p&gt;In git master. PR# 75. Please verify and close.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13304881">VFS-772</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p28f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-589] SFTP moveTo operation hangs if the server does not support SSH channelExec.</title>
                <link>https://issues.apache.org/jira/browse/VFS-589</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In our case the server was explicitly configured to disable SSH channelExec.&lt;br/&gt;
Our code was hanging trying to execute moveTo(). Stacktrace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (on object monitor)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
    at java.io.PipedInputStream.read(PipedInputStream.java:326)
    - locked &amp;lt;0x00000006a7a184d0&amp;gt; (a com.jcraft.jsch.Channel$MyPipedInputStream)
    at java.io.PipedInputStream.read(PipedInputStream.java:377)
    - locked &amp;lt;0x00000006a7a184d0&amp;gt; (a com.jcraft.jsch.Channel$MyPipedInputStream)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)
    - locked &amp;lt;0x00000006a7a184b8&amp;gt; (a java.io.InputStreamReader)
    at java.io.InputStreamReader.read(InputStreamReader.java:184)
    at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.executeCommand(SftpFileSystem.java:328)
    at org.apache.commons.vfs2.provider.sftp.SftpFileSystem.getGroupsIds(SftpFileSystem.java:260)
    at org.apache.commons.vfs2.provider.sftp.SftpFileObject.getPermissions(SftpFileObject.java:317)
    at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doIsWriteable(SftpFileObject.java:357)
    at org.apache.commons.vfs2.provider.AbstractFileObject.isWriteable(AbstractFileObject.java:1791)
    at org.apache.commons.vfs2.impl.DecoratedFileObject.isWriteable(DecoratedFileObject.java:229)
    at org.apache.commons.vfs2.cache.OnCallRefreshFileObject.isWriteable(OnCallRefreshFileObject.java:156)
    at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1857)
    at org.apache.commons.vfs2.impl.DecoratedFileObject.moveTo(DecoratedFileObject.java:241)
    at org.apache.commons.vfs2.cache.OnCallRefreshFileObject.moveTo(OnCallRefreshFileObject.java:184)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Technically the connection was alive because the session had a configured timeout and the jcraft code kept sending keepalive SSH_MSG_GLOBAL_REQUEST messages, but the thread performing FileObject.moveTo() did not return from moveTo().&lt;br/&gt;
I have changed SftpProviderTestCase to reproduce the problem: testRenameFile() hangs.&lt;br/&gt;
The patch (patch_sftp_tests_hang_no_exec.diff) is attached.&lt;/p&gt;


&lt;p&gt;I traced the problem to the fact that VFS invokes method com.jcraft.jsch.Channel.connect(). This method uses timeout value 0, in which case class com.jcraft.jsch.ChannelExec creates an instance of class com.jcraft.jsch.RequestExec that sends an SSH packet SSH_MSG_CHANNEL_REQUEST with &quot;want reply&quot; set to 0.&lt;br/&gt;
Correspondingly, if the server supports SSH channelExec, it executes the specified command and returns some data.&lt;br/&gt;
But if the server &lt;b&gt;does not&lt;/b&gt; support SSH channelExec it sends nothing back while jcraft code tries to read something. This is the hang I am observing.&lt;/p&gt;


&lt;p&gt;The fix would be to invoke com.jcraft.jsch.Channel.connect(int connectTimeout).&lt;br/&gt;
As a result jcraft sends an SSH packet SSH_MSG_CHANNEL_REQUEST with &quot;want reply&quot; set to 1 &lt;b&gt;and&lt;/b&gt; it waits for an answer &lt;b&gt;and&lt;/b&gt; it reacts to the answer.&lt;/p&gt;

&lt;p&gt;Correspondingly, if the server supports SSH channelExec, it sends an SSH packet SSH_MSG_CHANNEL_SUCCESS and the executes the specified command and returns some data.&lt;br/&gt;
If the server &lt;b&gt;does not&lt;/b&gt; support SSH channelExec it sends an SSH packet SSH_MSG_CHANNEL_FAILURE.&lt;br/&gt;
jcraft reacts on either of this messages because if waits for one of them. If it receives SSH_MSG_CHANNEL_SUCCESS it goes further and reads the response of the executed command.&lt;br/&gt;
If it receives SSH_MSG_CHANNEL_FAILURE it immediately reports this by throwing JSchException with message &quot;failed to send channel request&quot;.&lt;br/&gt;
There is no hang whatsoever. Instead all tests from ProviderRenameTests fail with errors like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Could not determine &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; file &lt;span class=&quot;code-quote&quot;&gt;&quot;sftp:&lt;span class=&quot;code-comment&quot;&gt;//testtest@localhost:50036/write-tests&quot;&lt;/span&gt; is writeable.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The test suite actually hangs at the end, but this is caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-588&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS-588&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;I have patched VFS classes to always open jcraft&apos;s channels with timeouts. In addition the patch always sets some default timeout value on jcraft&apos;s session if none was configured via SftpFileSystemConfigBuilder.&lt;br/&gt;
Patch is also attached:  patch_sftp_timeouts.diff&lt;/p&gt;</description>
                <environment></environment>
        <key id="12916925">VFS-589</key>
            <summary>SFTP moveTo operation hangs if the server does not support SSH channelExec.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Nov 2015 10:35:30 +0000</created>
                <updated>Tue, 31 Oct 2017 07:44:49 +0000</updated>
                            <resolved>Thu, 26 Oct 2017 15:58:16 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15031632" author="klv_m72" created="Mon, 30 Nov 2015 10:36:35 +0000"  >&lt;p&gt;Patch to the test (SftpProviderTestCase) to reproduce the issue&lt;/p&gt;</comment>
                            <comment id="15031633" author="klv_m72" created="Mon, 30 Nov 2015 10:37:05 +0000"  >&lt;p&gt;Patch with the proposed fix.&lt;/p&gt;</comment>
                            <comment id="16216006" author="sod" created="Mon, 23 Oct 2017 23:00:46 +0000"  >&lt;p&gt;When will the fix be included in the latest version of vfs? vfs is now 2.2&lt;/p&gt;</comment>
                            <comment id="16218911" author="garydgregory" created="Wed, 25 Oct 2017 15:37:20 +0000"  >&lt;p&gt;Hi All,&lt;/p&gt;

&lt;p&gt;I am not sure I like the complexity of this patch and the way it decides that an arbitrary timeout should be used when none is specified. &lt;/p&gt;

&lt;p&gt;Without the patches you propose:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does you current call site set a timeout? If not, why not?&lt;/li&gt;
	&lt;li&gt;What happens if you set a timeout as a user of VFS?&lt;/li&gt;
	&lt;li&gt;Would it not be simpler to let the SftpFileSystemConfigBuilder have a default timeout value (like 30 or 60 seconds) instead of null? That would likely be a one-line change.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16218961" author="klv_m72" created="Wed, 25 Oct 2017 16:08:01 +0000"  >&lt;p&gt;Sorry, what &quot;complexity&quot;? diff file of 64 lines patching two java files?&lt;/p&gt;

&lt;p&gt;Letting SftpFileSystemConfigBuilder have a default timeout would solve one thing only: the proposed patch to SftpClientFactory.java.&lt;/p&gt;

&lt;p&gt;It does not solve the &lt;b&gt;main&lt;/b&gt; problem: SftpFileSystem.java invoking channel.connect();  instead of channel.connect(some_timeout);&lt;/p&gt;
</comment>
                            <comment id="16219495" author="garydgregory" created="Wed, 25 Oct 2017 20:51:29 +0000"  >&lt;p&gt;Let me see what I can do...&lt;/p&gt;</comment>
                            <comment id="16220674" author="garydgregory" created="Thu, 26 Oct 2017 15:58:16 +0000"  >&lt;p&gt;Here is what&apos;s new in &lt;tt&gt;SftpFileSystemConfigBuilder&lt;/tt&gt;:&lt;/p&gt;

&lt;p&gt;I added:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;tt&gt;setConnectTimeoutMillis(FileSystemOptions, Integer)&lt;/tt&gt; and a getter.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;setSessionTimeoutMillis(FileSystemOptions, Integer)&lt;/tt&gt; and a getter.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I deprecated &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;tt&gt;setTimeout(FileSystemOptions, Integer)&lt;/tt&gt; and the getter in favor of &lt;tt&gt;setSessionTimeoutMillis(FileSystemOptions, Integer)&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The default behavior has NOT changed.&lt;/p&gt;

&lt;p&gt;This let&apos;s you get set a connection timeout AND/OR a session timeout.&lt;/p&gt;

&lt;p&gt;Please verify and close or comment.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="16226410" author="klv_m72" created="Tue, 31 Oct 2017 07:44:49 +0000"  >&lt;p&gt;The fix looks OK.  As for verifying it: I have proposed a test to verify the fix, see patch_sftp_tests_hang_no_exec.diff.&lt;/p&gt;

&lt;p&gt;I think it is a good idea to add this test case to the set of SFTP tests. This way you get the automatic verification.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12774802" name="patch_sftp_tests_hang_no_exec.diff" size="2906" author="klv_m72" created="Mon, 30 Nov 2015 10:36:35 +0000"/>
                            <attachment id="12774803" name="patch_sftp_timeouts.diff" size="2739" author="klv_m72" created="Mon, 30 Nov 2015 10:37:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p26n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-588] SftpProviderTestCase is not robbust in case a timeout is configured</title>
                <link>https://issues.apache.org/jira/browse/VFS-588</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When a timeout is configured via SftpFileSystemConfigBuilder.setTimeout(), the test execution of SftpProviderTestCase hangs and does not stop. &lt;/p&gt;

&lt;p&gt;The hang is cause by &quot;stream proxy test suite&quot;. Running SftpProviderTestCase with disabled &quot;stream proxy test suite&quot; does not hang and JVM stops.&lt;/p&gt;

&lt;p&gt;This might look really minor but I am about to file another issue (which is not that minor) where timeouts play an important role. Not being able to execute tests with timeouts is quite a showstopper for debugging that other issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12916907">VFS-588</key>
            <summary>SftpProviderTestCase is not robbust in case a timeout is configured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Nov 2015 09:42:09 +0000</created>
                <updated>Mon, 30 Nov 2015 09:43:04 +0000</updated>
                                            <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15031571" author="klv_m72" created="Mon, 30 Nov 2015 09:43:04 +0000"  >&lt;p&gt;The patch that enables timeout configuration.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12774792" name="patch_hang_with_tout.diff" size="760" author="klv_m72" created="Mon, 30 Nov 2015 09:43:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p22n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-585] CompressedFileFileObject should override exists()</title>
                <link>https://issues.apache.org/jira/browse/VFS-585</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;&lt;tt&gt;CompressedFileFileObject&lt;/tt&gt; does not implement &lt;tt&gt;exists()&lt;/tt&gt;. This leads to inheriting the implementation of &lt;tt&gt;AbstractFileObject&lt;/tt&gt; which always returns &lt;tt&gt;true&lt;/tt&gt; if the type is not &lt;tt&gt;IMAGINARY&lt;/tt&gt;. That&apos;s completely useless in production.&lt;/p&gt;

&lt;p&gt;Make &lt;tt&gt;exists()&lt;/tt&gt; return &lt;tt&gt;true&lt;/tt&gt; only if the archive and the compressed file exist.&lt;/p&gt;

&lt;p&gt;Alternative: at least existence of the archive should be checked.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12906467">VFS-585</key>
            <summary>CompressedFileFileObject should override exists()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ewirch">Eduard Wirch</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Oct 2015 08:43:50 +0000</created>
                <updated>Thu, 29 Oct 2015 19:51:07 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14981143" author="b.eckenfels" created="Thu, 29 Oct 2015 19:51:07 +0000"  >&lt;p&gt;Using the file type (IMAGINARY == non existing) is used by all file providers, this is how VFS works: the file type is determined on doAttach and exists() is only a helper to check for the type. (Only HdfsFileObject overwrites AbstractFileObject#exists() - with basically the same function).&lt;/p&gt;

&lt;p&gt;So the problem is more that it does not implement doAttach() and the getType() purely works on the file name.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n9y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-583] Layered Filesystems are not properly cached when options are used</title>
                <link>https://issues.apache.org/jira/browse/VFS-583</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I have extended some tests to tun the nested file system test with a set filesystemoption. This causes problems as the filesystem cache no longer works and each resolve will return a new layered filesystem instance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901098">VFS-583</key>
            <summary>Layered Filesystems are not properly cached when options are used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>leak</label>
                    </labels>
                <created>Mon, 28 Sep 2015 18:21:11 +0000</created>
                <updated>Thu, 19 May 2016 18:26:25 +0000</updated>
                            <resolved>Mon, 28 Sep 2015 18:26:40 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14933725" author="b.eckenfels" created="Mon, 28 Sep 2015 18:26:40 +0000"  >&lt;p&gt;Fixed in this commit: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705741&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705741&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15291858" author="b.eckenfels" created="Thu, 19 May 2016 18:26:25 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mdbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-582] incompatible naming change for tests</title>
                <link>https://issues.apache.org/jira/browse/VFS-582</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;While verifying 2.1-SNAPSHOT with my own VFS provider I noticed that it breaks the test build because getTestDirectoryFile was renamed to getTestDirectory. This was a cleanup outside of the released API, but there is no reason to try to stay compatible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12896175">VFS-582</key>
            <summary>incompatible naming change for tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>test-compile</label>
                    </labels>
                <created>Thu, 24 Sep 2015 17:42:24 +0000</created>
                <updated>Thu, 19 May 2016 18:26:31 +0000</updated>
                            <resolved>Thu, 24 Sep 2015 17:49:29 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14906727" author="b.eckenfels" created="Thu, 24 Sep 2015 17:49:29 +0000"  >&lt;p&gt;Fixed with this commit: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705120&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705120&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15291877" author="b.eckenfels" created="Thu, 19 May 2016 18:26:31 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2liyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-581] FTPClientWrapper hides important error information</title>
                <link>https://issues.apache.org/jira/browse/VFS-581</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;One place where FTPClientWrapper hides errors is method listFilesInDirectory().&lt;/p&gt;

&lt;p&gt;1. Lines 163-167: After performing getFtpClient().listFiles(relPath); the code checks for a positive FTP reply. &lt;/p&gt;

&lt;p&gt;2. If the reply was negative, the code assumes the negative reply has to do with &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-307&quot; title=&quot;VFS issues a lot of FTP commands when listing a directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-307&quot;&gt;&lt;del&gt;VFS-307&lt;/del&gt;&lt;/a&gt; as stated in the comments. This is not always the case, there might be other reasons why the operation might have failed. In my case it was an FTPS connection where the server required an encrypted data channel and the client did was not properly configured.&lt;/p&gt;

&lt;p&gt;3. Line 182: getFtpClient().listFiles();. This time without even looking at the FTP reply string. In my case it was the same error as above. As a result my client got an empty as if the remote directory did not have any files, while the real error reason was nowhere to see.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12896105">VFS-581</key>
            <summary>FTPClientWrapper hides important error information</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Sep 2015 13:06:33 +0000</created>
                <updated>Thu, 24 Sep 2015 13:06:33 +0000</updated>
                                            <version>Nightly Builds</version>
                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2liiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-577] FileOperationsProvider not shut down</title>
                <link>https://issues.apache.org/jira/browse/VFS-577</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When shuttding down the FileSystemManager it will forget references to all FileOperationProviders but not shut them down. There is also no tests for this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12895862">VFS-577</key>
            <summary>FileOperationsProvider not shut down</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>leak</label>
                            <label>lifecycle</label>
                            <label>tests</label>
                    </labels>
                <created>Wed, 23 Sep 2015 18:29:41 +0000</created>
                <updated>Thu, 19 May 2016 18:26:23 +0000</updated>
                            <resolved>Wed, 23 Sep 2015 19:26:50 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14905085" author="b.eckenfels" created="Wed, 23 Sep 2015 19:26:50 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1704920&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1704920&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15291853" author="b.eckenfels" created="Thu, 19 May 2016 18:26:23 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12848617">VFS-574</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lh0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-575] org.apache.commons.vfs2.FileSystemException: Could not close the output stream</title>
                <link>https://issues.apache.org/jira/browse/VFS-575</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Hi Team,&lt;/p&gt;

&lt;p&gt;I am using VFS 2.0 for implementing SFTP for my application. I have a single Thread which actually picks up the file and do SFTP. 98% of the time it works. But I have observed there are few cases where SFTP is getting failed with below exception..&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.commons.vfs2.FileSystemException: Could not close the output stream for file &quot;sftp://*******************/Test.csv&quot;.&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at org.apache.commons.vfs2.provider.DefaultFileContent$FileContentOutputStream.close(DefaultFileContent.java:694)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at org.apache.commons.vfs2.FileUtil.copyContent(FileUtil.java:118)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:1053)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;... 3 more&lt;br/&gt;
Caused by: java.io.IOException: inputstream is closed&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at com.jcraft.jsch.ChannelSftp.fill(ChannelSftp.java:2884)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at com.jcraft.jsch.ChannelSftp.header(ChannelSftp.java:2908)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at com.jcraft.jsch.ChannelSftp.checkStatus(ChannelSftp.java:2446)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at com.jcraft.jsch.ChannelSftp._sendCLOSE(ChannelSftp.java:2465)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at com.jcraft.jsch.ChannelSftp.access$400(ChannelSftp.java:36)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at com.jcraft.jsch.ChannelSftp$1.close(ChannelSftp.java:854)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at java.io.FilterOutputStream.close(FilterOutputStream.java:143)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at org.apache.commons.vfs2.util.MonitorOutputStream.close(MonitorOutputStream.java:56)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at java.io.FilterOutputStream.close(FilterOutputStream.java:143)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at org.apache.commons.vfs2.util.MonitorOutputStream.close(MonitorOutputStream.java:56)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;at org.apache.commons.vfs2.provider.DefaultFileContent$FileContentOutputStream.close(DefaultFileContent.java:690)&lt;br/&gt;
	&lt;span class=&quot;error&quot;&gt;&amp;#91;null,null&amp;#93;&lt;/span&gt;... 5 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, Weblogic&lt;/p&gt;</environment>
        <key id="12861415">VFS-575</key>
            <summary>org.apache.commons.vfs2.FileSystemException: Could not close the output stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="arijit24@gmail.com">Arajit</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Sep 2015 22:42:31 +0000</created>
                <updated>Mon, 15 Jun 2020 09:24:21 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14728178" author="arijit24@gmail.com" created="Wed, 2 Sep 2015 22:43:40 +0000"  >&lt;p&gt;It would be really helpful if someone take a look into this.&lt;/p&gt;</comment>
                            <comment id="14728219" author="arijit24@gmail.com" created="Wed, 2 Sep 2015 23:19:37 +0000"  >&lt;p&gt;Please note I have observed that, For all the cases when exception is getting thrown after 20 seconds of starting SFTP of the file.&lt;/p&gt;</comment>
                            <comment id="14876188" author="simon04" created="Fri, 18 Sep 2015 19:19:54 +0000"  >&lt;p&gt;Getting &lt;tt&gt;IOException}}s when performing {{close()&lt;/tt&gt; is perfectly valid according to the API. However, &lt;tt&gt;java.io.Closeable#close&lt;/tt&gt; specifies that &quot;If the stream is already closed then invoking this method has no effect.&quot;. Since the exception is thrown within Jsch, you should report this in their issue tracker.&lt;/p&gt;</comment>
                            <comment id="17135573" author="akhil_surapuram" created="Mon, 15 Jun 2020 08:07:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;&#160;, I am facing this issue in version 2.4 .&lt;br/&gt;
for this issue fix version is mentioned as None. is this fixed or still open??&lt;/p&gt;</comment>
                            <comment id="17135662" author="b.eckenfels" created="Mon, 15 Jun 2020 09:24:21 +0000"  >&lt;p&gt;I think if the bug is not closed it still exists. Can you provide more details and logs, maybe it helps someone to write a fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 19 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jpy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-574] warning about not closed OperationProviders when calling DefaultFilesystemManager.close</title>
                <link>https://issues.apache.org/jira/browse/VFS-574</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I see a warning on application shutdown.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;WARN : DefaultFilesystemManager.close: not all components are closed: [com.intridea.io.vfs.provider.s3.operations.S3FileOperationsProvider@30b544a5]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am using common-vfs2 version 2.1.1660580.1 and an s3 provider is on the classpath that defines a OperationProvider implementation.&lt;/p&gt;

&lt;p&gt;looking at the code seems that operation providers are added in components collection on setup, but closeCompoent is not invoked for operation providers on close().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12848617">VFS-574</key>
            <summary>warning about not closed OperationProviders when calling DefaultFilesystemManager.close</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="tsachev">Vladimir Tsanev</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Thu, 23 Jul 2015 16:00:52 +0000</created>
                <updated>Thu, 19 May 2016 18:25:56 +0000</updated>
                            <resolved>Wed, 23 Sep 2015 19:27:22 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14640873" author="b.eckenfels" created="Fri, 24 Jul 2015 18:27:16 +0000"  >&lt;p&gt;Good catch. Could you maybe check if the following patch helps the situation?&lt;/p&gt;</comment>
                            <comment id="14905088" author="b.eckenfels" created="Wed, 23 Sep 2015 19:27:22 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1704920&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1704920&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
(for the record my proposed patch does not work)&lt;/p&gt;</comment>
                            <comment id="15291778" author="b.eckenfels" created="Thu, 19 May 2016 18:25:56 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12895862">VFS-577</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12747084" name="vfs-closeop.diff" size="1633" author="b.eckenfels" created="Fri, 24 Jul 2015 18:27:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hukn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-573] hidden directory on FTP handled incorrectly</title>
                <link>https://issues.apache.org/jira/browse/VFS-573</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;We encounter problems when trying to create a file in a hidden directory using FTP. The actual bug is that the FileType of the hidden directory is IMAGINARY and VFS thinks the directory does not exist.&lt;/p&gt;


&lt;p&gt;Before writing the file VFS checks if the parent directory exists using AbstractFileObject.getType() (AbstractFileObject:1418).&lt;/p&gt;

&lt;p&gt;In FtpFileObject.getInfo(boolean flush) VFS tries to obtain the fileInfo (FTPFile) of the directory using FtpFileObject.getChildFile(final String name, final boolean flush) on the parent. But since the directory is hidden it returns null and the fileInfo is set to UNKNOWN..&lt;/p&gt;

&lt;p&gt;FtpFileObject.doGetType() translates the UNKNOWN to FileType.IMAGINARY.&lt;/p&gt;

&lt;p&gt;VFS now tries to create the directory which fails because it already exists (AbstractFileObject:1424) and creating the OutputStream is aborted with the following exception:&lt;/p&gt;


&lt;p&gt;Exception in thread &quot;main&quot; org.apache.commons.vfs2.FileSystemException: Could not create folder &quot;ftp://localhost/hiddenmap&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.createFolder(AbstractFileObject.java:999)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1424)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:461)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:441)&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.commons.vfs2.FileSystemException: Could not create FTP directory &quot;ftp://localhost/hiddenmap&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.doCreateFolder(FtpFileObject.java:544)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.createFolder(AbstractFileObject.java:988)&lt;br/&gt;
	... 5 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;commons-net-3.2&lt;/p&gt;</environment>
        <key id="12839535">VFS-573</key>
            <summary>hidden directory on FTP handled incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="JeroenDouwes">Jeroen Douwes</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jun 2015 12:36:01 +0000</created>
                <updated>Mon, 22 Jun 2015 18:41:00 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14596406" author="b.eckenfels" created="Mon, 22 Jun 2015 18:41:00 +0000"  >&lt;p&gt;Thanks for the report. The behavior of the FTP provider (or of VFS) of querying the parent for the addressed child does not only create problems if the dir is hidden, but also with things like relative path or larger directories. So it would be nice if we can avoid/reduce this parent usage. However I am not sure if it is that easy. If somebody wants to look at this, please propose your strategy on commons-dev ML. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gc1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-569] DefaultFileMonitor recursive file</title>
                <link>https://issues.apache.org/jira/browse/VFS-569</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;FileSystemManager fsManager = VFS.getManager();&lt;br/&gt;
			FileObject fileObj = fsManager.resolveFile(&quot;file:///MyFolder&quot;);&lt;/p&gt;

&lt;p&gt;DefaultFileMonitor fm = new DefaultFileMonitor(listener);&lt;br/&gt;
fm.setDelay(1);&lt;br/&gt;
fm.setRecursive(false);&lt;br/&gt;
fm.addFile(fileObj);&lt;br/&gt;
fm.start();&lt;/p&gt;

&lt;p&gt;when execute fm.addFile(fileObj); library add listener an internal forder although not recursive.&lt;br/&gt;
in this point:&lt;/p&gt;

&lt;p&gt;if (file.getType().hasChildren()){&lt;br/&gt;
                // Traverse the children&lt;br/&gt;
                final FileObject[] children = file.getChildren();&lt;br/&gt;
                for (final FileObject element : children) &lt;/p&gt;
{
                    doAddFile(element);
                }
&lt;p&gt;            }&lt;/p&gt;

&lt;p&gt;variable children: should be a file and not a folder!!!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 7, windows 8, eclipse lune&lt;/p&gt;</environment>
        <key id="12819330">VFS-569</key>
            <summary>DefaultFileMonitor recursive file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sasasa">Sante</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Apr 2015 14:05:34 +0000</created>
                <updated>Thu, 27 Apr 2017 15:23:38 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14876493" author="simon04" created="Fri, 18 Sep 2015 21:35:50 +0000"  >&lt;p&gt;&lt;tt&gt;org.apache.commons.vfs2.impl.DefaultFileMonitor#addFile&lt;/tt&gt; did not check whether {[recursive}} was set and added listeners for children in any case. This has been corrected &#8230;&lt;/p&gt;</comment>
                            <comment id="15053611" author="tn" created="Fri, 11 Dec 2015 21:39:21 +0000"  >&lt;p&gt;Direct children of a directory are always added, regardless of the recursive flag, which seems to be intended behavior as it is also described like that in the code. So I would suggest to only update the documentation to clarify this.&lt;/p&gt;</comment>
                            <comment id="15986814" author="beirtipol@gmail.com" created="Thu, 27 Apr 2017 15:23:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;tn&lt;/a&gt; As stated in the description, it seems that the intention of the code is to add listeners to files already present in the folder for any modification. Instead of filtering out child folders, it also adds listeners to child folders, but only 1 element deep.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12761200" name="VFS-569.patch" size="734" author="simon04" created="Fri, 18 Sep 2015 21:35:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cz4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-567] Timeout in vsFTPd causes exception when executing another command</title>
                <link>https://issues.apache.org/jira/browse/VFS-567</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;After a timeout in vsFTPd, a QUIT command is sent and a 421 Timeout response is sent back to the Java client. After that, a SocketException (broken pipe) is raised and not correctly managed.&lt;/p&gt;

&lt;p&gt;I am attaching a test case, this is the stack trace:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.commons.vfs2.FileSystemException: Could not determine the type of file &quot;ftps://localhost/javadev/vfs/input&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1526)&lt;br/&gt;
	at QuitProblemMain.main(QuitProblemMain.java:41)&lt;br/&gt;
Caused by: java.net.SocketException: Pipe interrotta&lt;br/&gt;
	at java.net.SocketOutputStream.socketWrite0(Native Method)&lt;br/&gt;
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)&lt;br/&gt;
	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)&lt;br/&gt;
	at sun.security.ssl.OutputRecord.writeBuffer(OutputRecord.java:431)&lt;br/&gt;
	at sun.security.ssl.OutputRecord.write(OutputRecord.java:417)&lt;br/&gt;
	at sun.security.ssl.SSLSocketImpl.writeRecordInternal(SSLSocketImpl.java:864)&lt;br/&gt;
	at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:835)&lt;br/&gt;
	at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)&lt;br/&gt;
	at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)&lt;br/&gt;
	at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)&lt;br/&gt;
	at java.io.BufferedWriter.flush(BufferedWriter.java:254)&lt;br/&gt;
	at org.apache.commons.net.ftp.FTP.__send(FTP.java:505)&lt;br/&gt;
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:479)&lt;br/&gt;
	at org.apache.commons.net.ftp.FTPSClient.sendCommand(FTPSClient.java:541)&lt;br/&gt;
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:608)&lt;br/&gt;
	at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:582)&lt;br/&gt;
	at org.apache.commons.net.ftp.FTP.quit(FTP.java:864)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FTPClientWrapper.disconnect(FTPClientWrapper.java:118)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FTPClientWrapper.listFiles(FTPClientWrapper.java:152)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.doGetChildren(FtpFileObject.java:136)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.getChildFile(FtpFileObject.java:106)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.getInfo(FtpFileObject.java:192)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.doGetType(FtpFileObject.java:320)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:1517)&lt;br/&gt;
	... 1 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;vsFTPd 3.0.2 on Kubuntu 14.10&lt;/p&gt;</environment>
        <key id="12786667">VFS-567</key>
            <summary>Timeout in vsFTPd causes exception when executing another command</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="apetrelli">Antonio Petrelli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Mar 2015 10:38:43 +0000</created>
                <updated>Thu, 19 May 2016 18:25:36 +0000</updated>
                            <resolved>Wed, 23 Sep 2015 19:57:08 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14386521" author="apetrelli" created="Mon, 30 Mar 2015 10:40:35 +0000"  >&lt;p&gt;Added attachment containing the problematic test case. Put a timeout with idle_session_timeout parameter with a value less than 10.&lt;/p&gt;</comment>
                            <comment id="14386522" author="apetrelli" created="Mon, 30 Mar 2015 10:41:36 +0000"  >&lt;p&gt;Added proposed patch, that ignores exceptions in FTPClientWrapper.disconnect method.&lt;/p&gt;</comment>
                            <comment id="14905130" author="b.eckenfels" created="Wed, 23 Sep 2015 19:57:08 +0000"  >&lt;p&gt;Thanks Antonio, committed your patch: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1704927&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1704927&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14906040" author="apetrelli" created="Thu, 24 Sep 2015 08:49:17 +0000"  >&lt;p&gt;Thanks Bernd, however, as I am an emeritus PMC member of other Apache project, I remember that the name of the contributor should be inserted in the commit log.&lt;/p&gt;</comment>
                            <comment id="15291719" author="b.eckenfels" created="Thu, 19 May 2016 18:25:36 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12768699">VFS-559</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12708129" name="commons-vfs-disconnect.diff" size="1584" author="apetrelli" created="Mon, 30 Mar 2015 10:41:36 +0000"/>
                            <attachment id="12708128" name="vfs-quit-problem.zip" size="1477" author="apetrelli" created="Mon, 30 Mar 2015 10:40:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27j4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-565] SFTP can not delete symlink to a folder.</title>
                <link>https://issues.apache.org/jira/browse/VFS-565</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When trying to delete a symlink to a folder, it tries to remove it as a folder with channel.rmdir(relpath) because getType() indicates FileType.FOLDER.&lt;/p&gt;

&lt;p&gt;This results in a FileSystemException: Could not delete, Caused by: 2: No such file.&lt;/p&gt;

&lt;p&gt;Because it&apos;s not a folder, it&apos;s a symlink and sould be deleted with channel.rm(relpath).&lt;/p&gt;

&lt;p&gt;It may be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-179&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;VFS-179&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: x86_64 GNU/Linux (elementaryOS)&lt;br/&gt;
Filesystem: ext4&lt;/p&gt;</environment>
        <key id="12781858">VFS-565</key>
            <summary>SFTP can not delete symlink to a folder.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="serpi90">Juli&#225;n Maestri</reporter>
                        <labels>
                            <label>delete</label>
                            <label>sftp</label>
                            <label>symlink</label>
                    </labels>
                <created>Fri, 13 Mar 2015 17:06:41 +0000</created>
                <updated>Fri, 13 Mar 2015 17:06:41 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26qyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-564] FtpFileObject creates Logger instance for each object</title>
                <link>https://issues.apache.org/jira/browse/VFS-564</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Log log = LogFactory.getLog(FtpFileObject.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;static&lt;/b&gt; modifier is missed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12777623">VFS-564</key>
            <summary>FtpFileObject creates Logger instance for each object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="dnk">Dmitry Konstantinov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Feb 2015 18:19:19 +0000</created>
                <updated>Thu, 19 May 2016 18:26:09 +0000</updated>
                            <resolved>Mon, 2 Mar 2015 01:58:34 +0000</resolved>
                                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14342614" author="b.eckenfels" created="Mon, 2 Mar 2015 01:58:34 +0000"  >&lt;p&gt;Yeah, I think the logging is pretty messed up anyway, with the Components it requires mutable instance loggers, others could be static. I changed all Loggers where a static class was used in the following revision: &lt;a href=&quot;http://svn.apache.org/r1663192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1663192&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15291810" author="b.eckenfels" created="Thu, 19 May 2016 18:26:08 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i261tb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-563] [sftp][tests] test sshd does not implement setstats and test does not verify it</title>
                <link>https://issues.apache.org/jira/browse/VFS-563</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;While trying some test cases with external servers I noticed that LastModfifiedTest is calling setLastModified and getLastModified and then compares the delta. However since the default cache mode is on resolve and there is no resolve or refresh in between, it only compares the stale in memory representation.&lt;/p&gt;

&lt;p&gt;So I went on and added refresh() to the actual checks. This made the sftp file system fail. After some checking I noticed, that the Apache Mina SSHD (0.8) which we are using is actually not implementing it.&lt;/p&gt;

&lt;p&gt;org.apache.sshd.server.sftp.SftpSubsystem&lt;/p&gt;
{code }
&lt;p&gt;            case SSH_FXP_SETSTAT:&lt;br/&gt;
            case SSH_FXP_FSETSTAT: &lt;/p&gt;
{
                // This is required for WinSCP / Cyberduck to upload properly
                // Blindly reply &quot;OK&quot;
                // TODO implement it
                sendStatus(id, SSH_FX_OK, &quot;&quot;);
                break;
            }
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think newer mina versions do support this function, so we need to migrate the internal test server to this version before we can actually enable the refresh().&lt;/p&gt;</description>
                <environment>&lt;p&gt;Maven 3.2.5, Java 7u76, Windows 7 (x64, german)&lt;/p&gt;</environment>
        <key id="12774053">VFS-563</key>
            <summary>[sftp][tests] test sshd does not implement setstats and test does not verify it</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>test-fail</label>
                    </labels>
                <created>Wed, 11 Feb 2015 01:22:25 +0000</created>
                <updated>Wed, 11 Feb 2015 02:16:21 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14315430" author="b.eckenfels" created="Wed, 11 Feb 2015 02:16:21 +0000"  >&lt;p&gt;This commit contains the commented out refresh() calls which cause trouble with sftp (against Apache Mina).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1658868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1658868&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25gg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-562] [smb][tests] SmbAccessDenied when doing setLastModified on dir</title>
                <link>https://issues.apache.org/jira/browse/VFS-562</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;While running the smb test against my local windows laptop all tests pass besides one. The setLastModified() on the directory fails.&lt;/p&gt;

&lt;p&gt;I have seen in some code comments, that others noticed that too. So it is not clear if that operation is never supported or not in specific conditions. If it is generally impossible, then the capability could be removed.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.commons.vfs2.FileSystemException: Could not set the last modified timestamp of &lt;span class=&quot;code-quote&quot;&gt;&quot;smb:&lt;span class=&quot;code-comment&quot;&gt;//SUB\Eckenfel:***@eckenfels02/C$/ws/asf/commons-vfs2-project-trunk/core/target/test-classes/test-data/read-tests/dir1&quot;&lt;/span&gt;.
&lt;/span&gt;        at org.apache.commons.vfs2.provider.DefaultFileContent.setLastModifiedTime(DefaultFileContent.java:210)
        at org.apache.commons.vfs2.test.LastModifiedTests.testSetLastModified(LastModifiedTests.java:103)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.apache.commons.vfs2.test.AbstractProviderTestCase.runTest(AbstractProviderTestCase.java:218)
        at junit.framework.TestCase.runBare(TestCase.java:141)
        at junit.framework.TestResult$1.protect(TestResult.java:122)
        at junit.framework.TestResult.runProtected(TestResult.java:142)
        at junit.framework.TestResult.run(TestResult.java:125)
        at junit.framework.TestCase.run(TestCase.java:129)
        at junit.framework.TestSuite.runTest(TestSuite.java:252)
        at junit.framework.TestSuite.run(TestSuite.java:247)
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:23)
        at org.apache.commons.vfs2.test.AbstractTestSuite$1.protect(AbstractTestSuite.java:149)
        at junit.framework.TestResult.runProtected(TestResult.java:142)
        at org.apache.commons.vfs2.test.AbstractTestSuite.run(AbstractTestSuite.java:154)
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
Caused by: jcifs.smb.SmbAuthException: Access denied
        at jcifs.smb.SmbTransport.send(SmbTransport.java:751)
        at jcifs.smb.SmbSession.send(SmbSession.java:109)
        at jcifs.smb.SmbTree.send(SmbTree.java:100)
        at jcifs.smb.SmbFile.send(SmbFile.java:619)
        at jcifs.smb.SmbFile.open0(SmbFile.java:709)
        at jcifs.smb.SmbFile.setPathInformation(SmbFile.java:2031)
        at jcifs.smb.SmbFile.setLastModified(SmbFile.java:2054)
        at org.apache.commons.vfs2.provider.smb.SmbFileObject.doSetLastModifiedTime(SmbFileObject.java:264)
        at org.apache.commons.vfs2.provider.DefaultFileContent.setLastModifiedTime(DefaultFileContent.java:203)
        ... 25 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Maven 3.2.5, Java 7u76, Windows 7 (x64, german)&lt;/p&gt;</environment>
        <key id="12774004">VFS-562</key>
            <summary>[smb][tests] SmbAccessDenied when doing setLastModified on dir</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>test-fail</label>
                            <label>windows,</label>
                    </labels>
                <created>Tue, 10 Feb 2015 22:49:35 +0000</created>
                <updated>Tue, 10 Feb 2015 22:49:35 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25g5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-561] [ftp][tests]Cannot delete directory on Windows FTPServer</title>
                <link>https://issues.apache.org/jira/browse/VFS-561</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;While running the test suite with external FTP Server (using the Coreftpd.com product) the test suite has 3 errors, all of them while deleting directories in the write-data hierachy.&lt;/p&gt;

&lt;p&gt;I am not sure if this is caused by parallel concurrent logins, by not using CWD properly, if it is a netlib bug or a test problem. I asume it is related to the directory beeing locked (by usage or content)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tests run: 77, Failures: 0, Errors: 5, Skipped: 0, Time elapsed: 10.251 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.vfs2.provider.ftp.test.FtpProviderTestCase
testDelete(org.apache.commons.vfs2.test.ProviderWriteTests)  Time elapsed: 0.209 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.commons.vfs2.FileSystemException: Could not delete &lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//test:***@localhost/test-classes/test-data/write-tests/dir1&quot;&lt;/span&gt;.
&lt;/span&gt;        at org.apache.commons.vfs2.provider.AbstractFileObject.deleteSelf(AbstractFileObject.java:553)
        at org.apache.commons.vfs2.provider.AbstractFileObject.delete(AbstractFileObject.java:496)
        at org.apache.commons.vfs2.provider.AbstractFileObject.deleteAll(AbstractFileObject.java:516)
        at org.apache.commons.vfs2.test.ProviderWriteTests.testDelete(ProviderWriteTests.java:252)
...
Caused by: org.apache.commons.vfs2.FileSystemException: Could not delete FTP file &lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//test:***@localhost/test-classes/test-data/write-tests/dir1&quot;&lt;/span&gt;.
&lt;/span&gt;        at org.apache.commons.vfs2.provider.ftp.FtpFileObject.doDelete(FtpFileObject.java:493)
        at org.apache.commons.vfs2.provider.AbstractFileObject.deleteSelf(AbstractFileObject.java:542)
        ... 27 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Using CoreFTP on Windows 7 (x64, german). Maven 3.2.5, Java 7u76&lt;/p&gt;</environment>
        <key id="12773969">VFS-561</key>
            <summary>[ftp][tests]Cannot delete directory on Windows FTPServer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>test-fail</label>
                            <label>windows</label>
                    </labels>
                <created>Tue, 10 Feb 2015 21:32:17 +0000</created>
                <updated>Tue, 10 Feb 2015 21:32:17 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25fxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-560] File can&apos;t be downloaded if HTTP HEAD on base url fails</title>
                <link>https://issues.apache.org/jira/browse/VFS-560</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When i try to download a File via HTTP a HEAD-Request on the base url is executed before the actual download. In my case the result is a redirect (HTTP 302) to another server. This server is not available due to firewall restrictions and so the following HEAD request fails. The actual GET request to retrieve the file is never performed.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;Url: &lt;a href=&quot;http://server1.com/files/2015/image.jpg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server1.com/files/2015/image.jpg&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1. commons-vfs sends HEAD request to &lt;a href=&quot;http://server1.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server1.com/&lt;/a&gt; (not &lt;a href=&quot;http://server1.com/files/2015/image.jpg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server1.com/files/2015/image.jpg&lt;/a&gt;)&lt;br/&gt;
2. Server returns HTTP 302 with redirect to &lt;a href=&quot;http://server2.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server2.com/&lt;/a&gt;&lt;br/&gt;
3. commons-vfs sends HEAD request to &lt;a href=&quot;http://server2.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server2.com/&lt;/a&gt;&lt;br/&gt;
4. Request fails because server2.com is not available (firewall)&lt;br/&gt;
5. image.jpg is not downloaded &lt;/p&gt;

&lt;p&gt;Why is this HEAD request on the base url necessary? The file can be downloaded directly without problems.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12772320">VFS-560</key>
            <summary>File can&apos;t be downloaded if HTTP HEAD on base url fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="patrickgh">Patrick GH</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Feb 2015 10:27:24 +0000</created>
                <updated>Tue, 15 Oct 2019 03:45:50 +0000</updated>
                            <resolved>Tue, 12 May 2015 20:51:11 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14304966" author="b.eckenfels" created="Wed, 4 Feb 2015 11:16:52 +0000"  >&lt;p&gt;Can you please include the exception stack trace? Are you using URL, http or webdav provider (are you using the default configured VFS.getManager()?)&lt;/p&gt;

&lt;p&gt;It looks like the HTTP Provider does an initial head request when the filesystem is initialized to check basic connectivity. It looks like this cant be turned off (and you can also not disable redirect chasing). I guess a quick fix for you might be to use the URLFileProvider instead.&lt;/p&gt;

&lt;p&gt;I am not sure what would be better, making this configurable or just plain removing it.&lt;/p&gt;</comment>
                            <comment id="14304987" author="patrickgh" created="Wed, 4 Feb 2015 11:43:29 +0000"  >&lt;p&gt;I have reproduced the problem with the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestPgh {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException{
        StandardFileSystemManager fileSystemManager = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StandardFileSystemManager();

        fileSystemManager.init();

        FileObject srcFile = fileSystemManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//server1.com/images/4/1/7/1/prev_14044171.jpg&quot;&lt;/span&gt;);
&lt;/span&gt;        FileObject dstFile = fileSystemManager.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/pgh/Desktop/image.jpg&quot;&lt;/span&gt;);

        dstFile.copyFrom(srcFile, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AllFileSelector());


        fileSystemManager.close();
    }

}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result was:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;12:34:11.221 [main] INFO  o.a.c.v.i.StandardFileSystemManager - Using &quot;/var/folders/7h/6fvqgj9x4bz6fbn0l_213qxr0000gn/T/vfs_cache&quot; as temporary files store.
12:34:11.311 [main] DEBUG o.a.c.v.i.StandardFileSystemManager - Skipping provider &quot;org.apache.commons.vfs2.provider.webdav.WebdavFileProvider&quot; because required class &quot;org.apache.jackrabbit.webdav.client.methods.DavMethod&quot; is not available.
12:34:11.337 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.useragent = Jakarta Commons-HttpClient/3.1
12:34:11.339 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.protocol.version = HTTP/1.1
12:34:11.340 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.connection-manager.class = class org.apache.commons.httpclient.SimpleHttpConnectionManager
12:34:11.341 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.protocol.cookie-policy = default
12:34:11.341 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.protocol.element-charset = US-ASCII
12:34:11.341 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.protocol.content-charset = ISO-8859-1
12:34:11.342 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.method.retry-handler = org.apache.commons.httpclient.DefaultHttpMethodRetryHandler@6ee1dac2
12:34:11.343 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.dateparser.patterns = [EEE, dd MMM yyyy HH:mm:ss zzz, EEEE, dd-MMM-yy HH:mm:ss zzz, EEE MMM d HH:mm:ss yyyy, EEE, dd-MMM-yyyy HH:mm:ss z, EEE, dd-MMM-yyyy HH-mm-ss z, EEE, dd MMM yy HH:mm:ss z, EEE dd-MMM-yyyy HH:mm:ss z, EEE dd MMM yyyy HH:mm:ss z, EEE dd-MMM-yyyy HH-mm-ss z, EEE dd-MMM-yy HH:mm:ss z, EEE dd MMM yy HH:mm:ss z, EEE,dd-MMM-yy HH:mm:ss z, EEE,dd-MMM-yyyy HH:mm:ss z, EEE, dd-MM-yyyy HH:mm:ss z]
12:34:11.345 [main] DEBUG o.a.commons.httpclient.HttpClient - Java version: 1.6.0_65
12:34:11.346 [main] DEBUG o.a.commons.httpclient.HttpClient - Java vendor: Apple Inc.
12:34:11.346 [main] DEBUG o.a.commons.httpclient.HttpClient - Java class path: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/deploy.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/dt.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/javaws.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/jce.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/jconsole.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/management-agent.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/plugin.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/sa-jdi.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/charsets.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/jsse.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/ui.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/apple_provider.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/dnsns.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/localedata.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/sunjce_provider.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext/sunpkcs11.jar:/Users/Shared/development/projects_git/processsystem3/agent-vfsagent/target/classes:/Users/pgh/.m2/repository/de/laudert/processsystem3/laudert/ps-core/3.0.6-17/ps-core-3.0.6-17.jar:/Users/pgh/.m2/repository/org/slf4j/jcl-over-slf4j/1.7.5/jcl-over-slf4j-1.7.5.jar:/Users/pgh/.m2/repository/org/slf4j/slf4j-api/1.7.5/slf4j-api-1.7.5.jar:/Users/pgh/.m2/repository/ch/qos/logback/logback-classic/1.0.13/logback-classic-1.0.13.jar:/Users/pgh/.m2/repository/ch/qos/logback/logback-core/1.0.13/logback-core-1.0.13.jar:/Users/pgh/.m2/repository/org/jdom/jdom/1.1.3/jdom-1.1.3.jar:/Users/pgh/.m2/repository/org/apache/commons/commons-lang3/3.0.1/commons-lang3-3.0.1.jar:/Users/pgh/.m2/repository/de/laudert/processsystem3/laudert/ps-agent/3.0.6-17/ps-agent-3.0.6-17.jar:/Users/pgh/.m2/repository/commons-daemon/commons-daemon/1.0.7/commons-daemon-1.0.7.jar:/Users/pgh/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/Users/pgh/.m2/repository/commons-io/commons-io/2.1/commons-io-2.1.jar:/Users/pgh/.m2/repository/org/apache/commons/commons-exec/1.3/commons-exec-1.3.jar:/Users/pgh/.m2/repository/org/springframework/spring-context/3.2.5.RELEASE/spring-context-3.2.5.RELEASE.jar:/Users/pgh/.m2/repository/org/springframework/spring-aop/3.2.5.RELEASE/spring-aop-3.2.5.RELEASE.jar:/Users/pgh/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar:/Users/pgh/.m2/repository/org/springframework/spring-beans/3.2.5.RELEASE/spring-beans-3.2.5.RELEASE.jar:/Users/pgh/.m2/repository/org/springframework/spring-core/3.2.5.RELEASE/spring-core-3.2.5.RELEASE.jar:/Users/pgh/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar:/Users/pgh/.m2/repository/org/springframework/spring-expression/3.2.5.RELEASE/spring-expression-3.2.5.RELEASE.jar:/Users/pgh/.m2/repository/org/apache/commons/commons-vfs2/2.0-SNAPSHOT/commons-vfs2-2.0-SNAPSHOT.jar:/Users/pgh/.m2/repository/org/apache/maven/scm/maven-scm-api/1.4/maven-scm-api-1.4.jar:/Users/pgh/.m2/repository/org/codehaus/plexus/plexus-utils/1.5.6/plexus-utils-1.5.6.jar:/Users/pgh/.m2/repository/org/apache/maven/scm/maven-scm-provider-svnexe/1.4/maven-scm-provider-svnexe-1.4.jar:/Users/pgh/.m2/repository/org/apache/maven/scm/maven-scm-provider-svn-commons/1.4/maven-scm-provider-svn-commons-1.4.jar:/Users/pgh/.m2/repository/regexp/regexp/1.3/regexp-1.3.jar:/Users/pgh/.m2/repository/com/jcraft/jsch/0.1.50/jsch-0.1.50.jar:/Users/pgh/.m2/repository/commons-net/commons-net/3.1/commons-net-3.1.jar:/Users/pgh/.m2/repository/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar:/Users/pgh/.m2/repository/commons-codec/commons-codec/1.2/commons-codec-1.2.jar:/Users/pgh/.m2/repository/org/springframework/spring-jdbc/3.2.5.RELEASE/spring-jdbc-3.2.5.RELEASE.jar:/Users/pgh/.m2/repository/org/springframework/spring-tx/3.2.5.RELEASE/spring-tx-3.2.5.RELEASE.jar:/Users/pgh/.m2/repository/org/springframework/spring-orm/3.2.5.RELEASE/spring-orm-3.2.5.RELEASE.jar:/Users/pgh/.m2/repository/mysql/mysql-connector-java/5.1.20/mysql-connector-java-5.1.20.jar:/Applications/IntelliJ IDEA 12.app/lib/idea_rt.jar
12:34:11.346 [main] DEBUG o.a.commons.httpclient.HttpClient - Operating system name: Mac OS X
12:34:11.346 [main] DEBUG o.a.commons.httpclient.HttpClient - Operating system architecture: x86_64
12:34:11.346 [main] DEBUG o.a.commons.httpclient.HttpClient - Operating system version: 10.10.2
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - SUN 1.6: SUN (DSA key/parameter generation; DSA signing; SHA-1, MD5 digests; SecureRandom; X.509 certificates; JKS keystore; PKIX CertPathValidator; PKIX CertPathBuilder; LDAP, Collection CertStores, JavaPolicy Policy; JavaLoginConfig Configuration)
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - Apple 1.0: Apple Provider (implements DES, Triple DES, AES, Blowfish, PBE, Diffie-Hellman, HMAC/MD5, HMAC/SHA1)
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - SunRsaSign 1.5: Sun RSA signature provider
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - SunJSSE 1.6: Sun JSSE provider(PKCS12, SunX509 key/trust factories, SSLv3, TLSv1)
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - SunJCE 1.6: SunJCE Provider (implements RSA, DES, Triple DES, AES, Blowfish, ARCFOUR, RC2, PBE, Diffie-Hellman, HMAC)
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - SunJGSS 1.0: Sun (Kerberos v5, SPNEGO)
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - SunSASL 1.5: Sun SASL provider(implements client mechanisms for: DIGEST-MD5, GSSAPI, EXTERNAL, PLAIN, CRAM-MD5; server mechanisms for: DIGEST-MD5, GSSAPI, CRAM-MD5)
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - XMLDSig 1.0: XMLDSig (DOM XMLSignatureFactory; DOM KeyInfoFactory)
12:34:11.390 [main] DEBUG o.a.commons.httpclient.HttpClient - SunPCSC 1.6: Sun PC/SC provider
12:34:11.400 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.connection-manager.max-per-host = {HostConfiguration[host=https://server1.com]=5}
12:34:11.400 [main] DEBUG o.a.c.h.params.DefaultHttpParams - Set parameter http.connection-manager.max-total = 50
12:34:11.418 [main] DEBUG o.a.c.h.MultiThreadedHttpConnectionManager - HttpConnectionManager.getConnection:  config = HostConfiguration[host=https://server1.com], timeout = 0
12:34:11.419 [main] DEBUG o.a.c.h.MultiThreadedHttpConnectionManager - Allocating new connection, hostConfig=HostConfiguration[host=https://server1.com]
12:34:11.422 [main] DEBUG o.a.c.httpclient.HttpConnection - Open connection to server1.com:443
12:34:11.759 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;HEAD / HTTP/1.1[\r][\n]&quot;
12:34:11.762 [main] DEBUG o.a.c.httpclient.HttpMethodBase - Adding Host request header
12:34:11.773 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;User-Agent: Jakarta Commons-HttpClient/3.1[\r][\n]&quot;
12:34:11.773 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;Host: server1.com[\r][\n]&quot;
12:34:11.773 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;[\r][\n]&quot;
12:34:11.992 [main] DEBUG httpclient.wire.header - &amp;lt;&amp;lt; &quot;HTTP/1.1 302 Found[\r][\n]&quot;
12:34:11.992 [main] DEBUG httpclient.wire.header - &amp;lt;&amp;lt; &quot;HTTP/1.1 302 Found[\r][\n]&quot;
12:34:11.993 [main] DEBUG httpclient.wire.header - &amp;lt;&amp;lt; &quot;Date: Wed, 04 Feb 2015 11:34:11 GMT[\r][\n]&quot;
12:34:11.993 [main] DEBUG httpclient.wire.header - &amp;lt;&amp;lt; &quot;Server: Apache/2.2.16 (Debian)[\r][\n]&quot;
12:34:11.993 [main] DEBUG httpclient.wire.header - &amp;lt;&amp;lt; &quot;Location: http://www.server2.com[\r][\n]&quot;
12:34:11.994 [main] DEBUG httpclient.wire.header - &amp;lt;&amp;lt; &quot;Vary: Accept-Encoding[\r][\n]&quot;
12:34:11.994 [main] DEBUG httpclient.wire.header - &amp;lt;&amp;lt; &quot;Content-Type: text/html; charset=iso-8859-1[\r][\n]&quot;
12:34:11.994 [main] DEBUG httpclient.wire.header - &amp;lt;&amp;lt; &quot;[\r][\n]&quot;
12:34:11.994 [main] DEBUG o.a.c.httpclient.HttpMethodBase - Resorting to protocol version default close connection policy
12:34:11.994 [main] DEBUG o.a.c.httpclient.HttpMethodBase - Should NOT close connection, using HTTP/1.1
12:34:11.994 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Redirect required
12:34:11.994 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Redirect requested to location &apos;http://www.server2.com&apos;
12:34:12.007 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Redirecting from &apos;https://server1.com:443/&apos; to &apos;http://www.server2.com
12:34:12.007 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Execute redirect 1 of 100
12:34:12.007 [main] DEBUG o.a.c.httpclient.HttpConnection - Releasing connection back to connection manager.
12:34:12.007 [main] DEBUG o.a.c.h.MultiThreadedHttpConnectionManager - Freeing connection, hostConfig=HostConfiguration[host=https://server1.com]
12:34:12.008 [main] DEBUG o.a.c.h.util.IdleConnectionHandler - Adding connection at: 1423049652008
12:34:12.008 [main] DEBUG o.a.c.h.MultiThreadedHttpConnectionManager - Notifying no-one, there are no waiting threads
12:34:12.008 [main] DEBUG o.a.c.h.MultiThreadedHttpConnectionManager - HttpConnectionManager.getConnection:  config = HostConfiguration[host=http://www.server2.com], timeout = 0
12:34:12.008 [main] DEBUG o.a.c.h.MultiThreadedHttpConnectionManager - Allocating new connection, hostConfig=HostConfiguration[host=http://www.server2.com]
12:34:12.008 [main] DEBUG o.a.c.httpclient.HttpConnection - Open connection to www.server2.com:80
12:34:12.011 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;HEAD / HTTP/1.1[\r][\n]&quot;
12:34:12.011 [main] DEBUG o.a.c.httpclient.HttpMethodBase - Adding Host request header
12:34:12.011 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;User-Agent: Jakarta Commons-HttpClient/3.1[\r][\n]&quot;
12:34:12.011 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;Host: www.server2.com[\r][\n]&quot;
12:34:12.011 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;[\r][\n]&quot;
12:34:12.012 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Closing the connection.
12:34:12.013 [main] INFO  o.a.c.httpclient.HttpMethodDirector - I/O exception (org.apache.commons.httpclient.NoHttpResponseException) caught when processing request: The server www.server2.com failed to respond
12:34:12.020 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - The server www.server2.com failed to respond
org.apache.commons.httpclient.NoHttpResponseException: The server www.server2.com failed to respond
	at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1976) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:148) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:50) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.http.HttpFileProvider.doCreateFileSystem(HttpFileProvider.java:83) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:103) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:81) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:65) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:693) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:649) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:605) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at de.test.TestPgh.main(TestPgh.java:18) [classes/:na]
12:34:12.021 [main] INFO  o.a.c.httpclient.HttpMethodDirector - Retrying request
12:34:12.021 [main] DEBUG o.a.c.httpclient.HttpConnection - Open connection to www.server2.com:80
12:34:12.021 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;HEAD / HTTP/1.1[\r][\n]&quot;
12:34:12.021 [main] DEBUG o.a.c.httpclient.HttpMethodBase - Adding Host request header
12:34:12.021 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;User-Agent: Jakarta Commons-HttpClient/3.1[\r][\n]&quot;
12:34:12.022 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;Host: www.server2.com[\r][\n]&quot;
12:34:12.022 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;[\r][\n]&quot;
12:34:12.023 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Closing the connection.
12:34:12.023 [main] INFO  o.a.c.httpclient.HttpMethodDirector - I/O exception (org.apache.commons.httpclient.NoHttpResponseException) caught when processing request: The server www.server2.com failed to respond
12:34:12.023 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - The server www.server2.com failed to respond
org.apache.commons.httpclient.NoHttpResponseException: The server www.server2.com failed to respond
	at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1976) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:148) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:50) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.http.HttpFileProvider.doCreateFileSystem(HttpFileProvider.java:83) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:103) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:81) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:65) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:693) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:649) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:605) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at de.test.TestPgh.main(TestPgh.java:18) [classes/:na]
12:34:12.023 [main] INFO  o.a.c.httpclient.HttpMethodDirector - Retrying request
12:34:12.023 [main] DEBUG o.a.c.httpclient.HttpConnection - Open connection to www.server2.com:80
12:34:12.024 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;HEAD / HTTP/1.1[\r][\n]&quot;
12:34:12.024 [main] DEBUG o.a.c.httpclient.HttpMethodBase - Adding Host request header
12:34:12.024 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;User-Agent: Jakarta Commons-HttpClient/3.1[\r][\n]&quot;
12:34:12.024 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;Host: www.server2.com[\r][\n]&quot;
12:34:12.024 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;[\r][\n]&quot;
12:34:12.025 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Closing the connection.
12:34:12.026 [main] INFO  o.a.c.httpclient.HttpMethodDirector - I/O exception (org.apache.commons.httpclient.NoHttpResponseException) caught when processing request: The server www.server2.com failed to respond
12:34:12.026 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - The server www.server2.com failed to respond
org.apache.commons.httpclient.NoHttpResponseException: The server www.server2.com failed to respond
	at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1976) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098) ~[commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) [commons-httpclient-3.1.jar:na]
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:148) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:50) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.http.HttpFileProvider.doCreateFileSystem(HttpFileProvider.java:83) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:103) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:81) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:65) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:693) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:649) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:605) [commons-vfs2-2.0-SNAPSHOT.jar:2.0-SNAPSHOT]
	at de.test.TestPgh.main(TestPgh.java:18) [classes/:na]
12:34:12.026 [main] INFO  o.a.c.httpclient.HttpMethodDirector - Retrying request
12:34:12.026 [main] DEBUG o.a.c.httpclient.HttpConnection - Open connection to www.server2.com:80
12:34:12.027 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;HEAD / HTTP/1.1[\r][\n]&quot;
12:34:12.027 [main] DEBUG o.a.c.httpclient.HttpMethodBase - Adding Host request header
12:34:12.027 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;User-Agent: Jakarta Commons-HttpClient/3.1[\r][\n]&quot;
12:34:12.027 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;Host: www.server2.com[\r][\n]&quot;
12:34:12.027 [main] DEBUG httpclient.wire.header - &amp;gt;&amp;gt; &quot;[\r][\n]&quot;
12:34:12.028 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Closing the connection.
12:34:12.028 [main] DEBUG o.a.c.httpclient.HttpMethodDirector - Method retry handler returned false. Automatic recovery will not be attempted
12:34:12.029 [main] DEBUG o.a.c.httpclient.HttpConnection - Releasing connection back to connection manager.
12:34:12.029 [main] DEBUG o.a.c.h.MultiThreadedHttpConnectionManager - Freeing connection, hostConfig=HostConfiguration[host=http://www.server2.com]
12:34:12.029 [main] DEBUG o.a.c.h.util.IdleConnectionHandler - Adding connection at: 1423049652029
12:34:12.029 [main] DEBUG o.a.c.h.MultiThreadedHttpConnectionManager - Notifying no-one, there are no waiting threads
Exception in thread &quot;main&quot; org.apache.commons.vfs2.FileSystemException: Could not connect to HTTP server on &quot;server1.com&quot;.
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:152)
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:50)
	at org.apache.commons.vfs2.provider.http.HttpFileProvider.doCreateFileSystem(HttpFileProvider.java:83)
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:103)
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:81)
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:65)
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:693)
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:649)
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:605)
	at de.test.TestPgh.main(TestPgh.java:18)
Caused by: org.apache.commons.httpclient.NoHttpResponseException: The server www.server2.com failed to respond
	at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1976)
	at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
	at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
	at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
	at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
	at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
	at org.apache.commons.vfs2.provider.http.HttpClientFactory.createConnection(HttpClientFactory.java:148)
	... 9 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14540696" author="b.eckenfels" created="Tue, 12 May 2015 20:51:11 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1679095&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1679095&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixed it by removing the head request (less is more), alternative would be `HeadMethod head = new HeadMethod(); head.setFollowRedirect(false); client.executeMethod(head);` but that could fail in other situations, too.&lt;/p&gt;</comment>
                            <comment id="15291790" author="b.eckenfels" created="Thu, 19 May 2016 18:26:01 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                            <comment id="16951538" author="abiral" created="Tue, 15 Oct 2019 03:45:50 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am facing similar issue despite the base URL responding correctly.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;Url:&#160;&lt;a href=&quot;http://server1.com/files/2015/image.jpg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server1.com/files/2015/image.jpg&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1.&#160;&lt;b&gt;Jakarta Commons-HttpClient/3.1&lt;/b&gt;&#160;sends HEAD request to&#160;&lt;a href=&quot;http://server1.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server1.com/&lt;/a&gt;&#160;(not&#160;&lt;a href=&quot;http://server1.com/files/2015/image.jpg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server1.com/files/2015/image.jpg&lt;/a&gt;)&lt;br/&gt;
2. Server responds to the HEAD request.&lt;br/&gt;
3. commons-vfs sends HEAD request to&#160;&lt;a href=&quot;http://server1.com/files/2015/image.jpg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server1.com/files/2015/image.jpg&lt;/a&gt;&lt;br/&gt;
4. GET request is never received.&lt;br/&gt;
5. image.jpg is not downloaded&lt;/p&gt;

&lt;p&gt;I can not upgrade to the fixed version mentioned above due to some reason.&lt;/p&gt;

&lt;p&gt;Please do let me know if&#160;I can modify response from&#160;&lt;a href=&quot;http://server1.com/files/2015/image.jpg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://server1.com/&lt;/a&gt;&#160;in such a way that GET request is send after HEAD.&lt;/p&gt;

&lt;p&gt;Thanks and regards,&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25693:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-559] FTPClientWrapper is not robust against some failures</title>
                <link>https://issues.apache.org/jira/browse/VFS-559</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The goal of the class is stated in javadoc:&lt;br/&gt;
A wrapper to the FTPClient to allow automatic reconnect on connection loss.&lt;/p&gt;

&lt;p&gt;A lot of its methods look like :&lt;/p&gt;

&lt;p&gt;        try&lt;/p&gt;
        {
            do something...
        }
&lt;p&gt;        catch (final IOException e)&lt;/p&gt;
        {
            disconnect();
            try to repeat the operation...
        }

&lt;p&gt;Unfortunately disonnect() can fail for the same reason as the original &quot;do something&quot;. In my case it as a &quot;connection reset&quot;. So instead of the original exception I was getting more or less the same exception from getFtpClient().quit();&lt;/p&gt;

&lt;p&gt;So the wrapper did not help at all.&lt;/p&gt;

&lt;p&gt;I guess all the disconnect() invocations must also be inside try/catch so that even if disconnect() throws, the method goes on to the next step:  try to repeat the operation...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12768699">VFS-559</key>
            <summary>FTPClientWrapper is not robust against some failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Jan 2015 15:21:58 +0000</created>
                <updated>Thu, 19 May 2016 18:26:07 +0000</updated>
                            <resolved>Thu, 26 Nov 2015 16:12:25 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14905141" author="b.eckenfels" created="Wed, 23 Sep 2015 20:00:33 +0000"  >&lt;p&gt;Can you confirm this is fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-567&quot; title=&quot;Timeout in vsFTPd causes exception when executing another command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-567&quot;&gt;&lt;del&gt;VFS-567&lt;/del&gt;&lt;/a&gt; in this commit: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1704927&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1704927&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15029007" author="klv_m72" created="Thu, 26 Nov 2015 15:43:30 +0000"  >&lt;p&gt;Yes, the error is fixed.&lt;/p&gt;</comment>
                            <comment id="15029048" author="b.eckenfels" created="Thu, 26 Nov 2015 16:12:25 +0000"  >&lt;p&gt;Thanks for checking.&lt;/p&gt;</comment>
                            <comment id="15291806" author="b.eckenfels" created="Thu, 19 May 2016 18:26:07 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12786667">VFS-567</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24ke7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-558] java.lang.UnsupportedOperationException in FtpFileObject</title>
                <link>https://issues.apache.org/jira/browse/VFS-558</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I am getting the following exception in my code:&lt;/p&gt;

&lt;p&gt;java.lang.UnsupportedOperationException&lt;br/&gt;
	at java.util.Collections$UnmodifiableMap.remove(Collections.java:1345)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.onChildrenChanged(FtpFileObject.java:271)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.childrenChanged(AbstractFileObject.java:240)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.notifyParent(AbstractFileObject.java:1931)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.handleCreate(AbstractFileObject.java:1577)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(AbstractFileObject.java:1866)&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DecoratedFileObject.moveTo(DecoratedFileObject.java:241)&lt;br/&gt;
	at org.apache.commons.vfs2.cache.OnCallRefreshFileObject.moveTo(OnCallRefreshFileObject.java:184)&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;I guess it is caused by the fact that children field is set to EMPTY_FTP_FILE_MAP at the moment onChildrenChanged() is invoked.&lt;/p&gt;

&lt;p&gt;I also do not like line 1866 in AbstractFileObject.java. To me it looks like it might be the real cause of the problem:&lt;/p&gt;

&lt;p&gt;FileObjectUtils.getAbstractFileObject(destFile).handleCreate(getType());&lt;/p&gt;

&lt;p&gt;Must it not be destFile.getType()?&lt;/p&gt;

&lt;p&gt;But even if I am right about AbstractFileObject.java:1866, FtpFileObject.onChildrenChanged() must be corrected as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12768312">VFS-558</key>
            <summary>java.lang.UnsupportedOperationException in FtpFileObject</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Sun, 18 Jan 2015 16:12:29 +0000</created>
                <updated>Thu, 19 May 2016 18:26:09 +0000</updated>
                            <resolved>Sun, 18 Jan 2015 23:21:08 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14281876" author="b.eckenfels" created="Sun, 18 Jan 2015 17:36:40 +0000"  >&lt;p&gt;Thanks for the report, I agree with your analysis, we need to check that.&lt;/p&gt;

&lt;p&gt;BTW: I also think that the case of moving a file into an empty folder must be in the provider test suite. If you have some time, it would be best when you can start with exactly that reproducer.&lt;br/&gt;
BTW2: do you use OnCallRefresher on purpose, I can imagine that makes FTP quite slow.&lt;/p&gt;</comment>
                            <comment id="14281942" author="klv_m72" created="Sun, 18 Jan 2015 20:17:56 +0000"  >&lt;p&gt;Re: BTW2: do you use OnCallRefresher on purpose, I can imagine that makes FTP quite slow.&lt;/p&gt;

&lt;p&gt;Well, I do use CacheStrategy.ON_CALL, so yes, it is OnCallRefreshFileObject.&lt;br/&gt;
My code has some checks before performing moveTo to verify the destination file is not there so I am not overwriting it.&lt;br/&gt;
My tests gave me quite a lot of spurious warnings saying the file IS there before the rename while I quite sure it was not there.&lt;br/&gt;
Adding the CacheStrategy.ON_CALL helped a lot but sometimes I still get false positives.&lt;/p&gt;</comment>
                            <comment id="14281954" author="b.eckenfels" created="Sun, 18 Jan 2015 20:42:39 +0000"  >&lt;p&gt;Hm, what version of VFS you are using? 2.0 has only 1855 lines in AbstractFileObject and 2.1 (trunk) does not align with the line numbers. Do you maybe have an older trunk version? Can you try a newer trunk version?&lt;/p&gt;</comment>
                            <comment id="14281955" author="b.eckenfels" created="Sun, 18 Jan 2015 20:43:57 +0000"  >&lt;p&gt;I would use ON_RESOLVE or even MANUAL and then use refresh() in those particular places where you want to have an up-to-date view of the children. Because with ON_CALL you cannot control which of the methods actually need the refresh and which not. But: this should not be related to your bug report, I just noticed it.&lt;/p&gt;</comment>
                            <comment id="14282007" author="b.eckenfels" created="Sun, 18 Jan 2015 23:21:08 +0000"  >&lt;p&gt;I just added a test case, but it does only produce the problem when ON_CALL is used. Because otherwise the getType() on the source will not re-check the renamed file and uses the correct type.&lt;/p&gt;

&lt;p&gt;BTW: a lot of the test cases fail with ON_CALL (mostly because they use assertSame() to verify exepcted results. We will have to change that and then think about running the provider tests with all strategies. Maybe even with a NullFilesCache.)&lt;/p&gt;

&lt;p&gt;Anyway, I fixed the rename in trunk, can you try? (and really consider not using ON_CALL &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1652870&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1652870&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14282815" author="klv_m72" created="Mon, 19 Jan 2015 18:24:50 +0000"  >&lt;p&gt;Re: Anyway, I fixed the rename in trunk, can you try?&lt;/p&gt;

&lt;p&gt;Yes, it is fixed, thanks.&lt;/p&gt;

&lt;p&gt;Re: I would use ON_RESOLVE or even MANUAL and then use refresh() in those particular places where you want to have an up-to-date view of the children. Because with ON_CALL you cannot control which of the methods actually need the refresh and which not. But: this should not be related to your bug report, I just noticed it.&lt;/p&gt;

&lt;p&gt;Since I was getting problems even with ON_CALL, I have added refresh() before checking if a file exists, and it looks like it has solved spurious warnings. I cannot be 100% sure because the warnings did not always occur when I have run my tests without refresh().&lt;/p&gt;

&lt;p&gt;Re: BTW2: do you use OnCallRefresher on purpose, I can imagine that makes FTP quite slow.&lt;br/&gt;
Re: and really consider not using ON_CALL&lt;/p&gt;

&lt;p&gt;This sounds intuitively as a correct piece of advice.&lt;/p&gt;

&lt;p&gt;The thing is: my tests show different results:&lt;br/&gt;
I have a code that initializes an instance of  StandardFileSystemManager with a setCacheStrategy(CacheStrategy.ON_CALL) before .init().&lt;/p&gt;

&lt;p&gt;My tests accessing a local FS with setCacheStrategy(CacheStrategy.ON_CALL) commented out are about 40% faster than with setCacheStrategy(CacheStrategy.ON_CALL) performed. As expected.&lt;/p&gt;

&lt;p&gt;But FTP tests with ON_CALL are about the same 40% faster than with setCacheStrategy(CacheStrategy.ON_CALL) commented out. Dare to explain?&lt;/p&gt;
</comment>
                            <comment id="14282877" author="b.eckenfels" created="Mon, 19 Jan 2015 19:11:00 +0000"  >&lt;p&gt;Thanks for testing! I really hope to release soon (so you better not find new bugs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;

&lt;p&gt;Would you mind moving the discussion to users@common.apache.org mailing list? It would be interesting if you can summarize your tests.&lt;/p&gt;

&lt;p&gt;If ON_CALL is faster than ON_RESOLVE (which is the default I hope &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I would expect there are some strange timeout issues. If you can have a look at the FTP server command logfile it would be interesting to compare the number and types of commands used in both cases. (and just a reminder the CacheStrategy is only dealing with directory content and file metadata, so if you mostly transfer file content it is not much of a change).&lt;/p&gt;</comment>
                            <comment id="14283917" author="klv_m72" created="Tue, 20 Jan 2015 15:22:55 +0000"  >&lt;p&gt;Re: Thanks for testing! I really hope to release soon (so you better not find new bugs )&lt;/p&gt;

&lt;p&gt;Sorry: &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-559&quot; title=&quot;FTPClientWrapper is not robust against some failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-559&quot;&gt;&lt;del&gt;VFS-559&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15291811" author="b.eckenfels" created="Thu, 19 May 2016 18:26:09 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24i3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-557] [webdav][test] leaves undeleted temp directories around</title>
                <link>https://issues.apache.org/jira/browse/VFS-557</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When testing the webdav provider with the built-in JCR jackrabbit repository there is a number of Webdav temp directories left around under windows. When you enable debug logging, you can see that it failed to delete them. What you can see are active jackrabit and jetty logfiles.&lt;/p&gt;

&lt;p&gt;The reason for them is, that the JCL Appenders do not get removed/closed on shutdown.&lt;/p&gt;

&lt;p&gt;(I also wonder why this is outside the target/ directory).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;12.01.2015  05:18    &amp;lt;DIR&amp;gt;          WebdavProviderTestCase_925481737317534284825743295675598
09.01.2015  00:04    &amp;lt;DIR&amp;gt;          WebdavProviderTestCase_98639382858475597547744387200330
11.01.2015  16:01    &amp;lt;DIR&amp;gt;          WebdavsProviderTestCase_1002200317504082633777911798076546
1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Win7 x64, Oracle Java 7+8&lt;/p&gt;</environment>
        <key id="12766939">VFS-557</key>
            <summary>[webdav][test] leaves undeleted temp directories around</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>test,</label>
                    </labels>
                <created>Mon, 12 Jan 2015 21:23:18 +0000</created>
                <updated>Thu, 19 May 2016 18:26:14 +0000</updated>
                            <resolved>Mon, 19 Jan 2015 00:13:47 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14282036" author="b.eckenfels" created="Mon, 19 Jan 2015 00:13:47 +0000"  >&lt;p&gt;The directories are not written under core/target/test/ and properly deleted. I also removed the core/jackrabbit/tmp/ directory which was created by an unused jackrabbit servlet. Commited with r1652881.&lt;/p&gt;

&lt;p&gt;The directory can be preserved when specifying -DWebdavProviderTestCase.Debug=true (to read the logfiles).&lt;/p&gt;</comment>
                            <comment id="15291828" author="b.eckenfels" created="Thu, 19 May 2016 18:26:14 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i249yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-554] Ftp and SFtp FileObjects should not overwrite refresh</title>
                <link>https://issues.apache.org/jira/browse/VFS-554</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;FTP and SFTP FileObejcts both implement their own refresh() method which does not more like setting some of the variables which are also nulled by doDetach() to null. I think the method can therefore completely be removed. This will remove the need for the inRefresh checks and for calling super.refresh().&lt;/p&gt;

&lt;p&gt;Those two are the only providers with their own (strange) overwrite. Sftp File Object also uses getType() this looks like a eager implementation, all other FileObjects dont do that.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12765423">VFS-554</key>
            <summary>Ftp and SFtp FileObjects should not overwrite refresh</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jan 2015 17:30:57 +0000</created>
                <updated>Wed, 7 Jan 2015 18:17:41 +0000</updated>
                                            <version>2.0</version>
                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14267975" author="b.eckenfels" created="Wed, 7 Jan 2015 18:17:41 +0000"  >&lt;p&gt;Hmm, reading the source again it looks like I missunderstood the &quot;inRefresh&quot; flag. It is not controlling that refresh() is not recursing, but it it controlling when getChildren() creates a subtree. So it might be needed. I keep this open until I am sure.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i241in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-553] DefaultFileMonitor with workaround.setRecursive(false) is complaining about descendent files</title>
                <link>https://issues.apache.org/jira/browse/VFS-553</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;DefaultFileMonitor with workaround.setRecursive(false) is complaining about descendent files... which it shouldn&apos;t care about.&lt;/p&gt;


&lt;p&gt;When attempting to implement a workaround for &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-536&quot; title=&quot;DefaultFileMonitor will ignore files forever if directory is deleted and recreated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-536&quot;&gt;VFS-536&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://github.com/ensime/ensime-server/issues/613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ensime/ensime-server/issues/613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;we added a second non-recursive file watcher on all the ancestor directories of the recursively watched directory (to detect if it is deleted).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ensime/ensime-server/blob/master/src/main/scala/org/ensime/indexer/FileWatchers.scala#L58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ensime/ensime-server/blob/master/src/main/scala/org/ensime/indexer/FileWatchers.scala#L58&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To give some context: ENSIME is an IDE backend for Scala developers in Emacs. We watch the source and classfile directories for changes (by the user and build tool, but the build tool can delete the target directories).&lt;/p&gt;

&lt;p&gt;Users can have *&lt;b&gt;massive&lt;/b&gt;* directories in their projects (I have a project with a 60GB directory full of millions of files), but we only want to watch the source/classfile directories.&lt;/p&gt;

&lt;p&gt;However, even though this second (non-recursive) directory is supposed to be non-recursive, it is spitting out errors that only make sense if it is traversing the entire recursive tree:&lt;/p&gt;

&lt;p&gt;e.g. &lt;/p&gt;

&lt;p&gt;project/&lt;br/&gt;
    bigdir/Foo:Bar&lt;br/&gt;
    target/classes&lt;/p&gt;


&lt;p&gt;project/target/classes is watched recursively&lt;br/&gt;
project/target is watched non-recursively&lt;br/&gt;
project is watched non-recursively&lt;/p&gt;

&lt;p&gt;but &quot;Foo:Bar&quot; is spitting out these sorts of errors.&lt;/p&gt;

&lt;p&gt;To fully appreciate the impact, bare in mind that &quot;project/bigdir&quot; is absolutely enormous and contains millions of files/dirs.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; 09:48:46.939 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-4&amp;#93;&lt;/span&gt; ERROR o.a.c.vfs2.impl.DefaultFileMonitor - Invalid descendent file name &quot;Foo:Bar&quot;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; org.apache.commons.vfs2.FileSystemException: Invalid descendent file name &quot;Foo:Bar&quot;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; 	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveName(DefaultFileSystemManager.java:791) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-vfs2-2.0.jar:2.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; 	at org.apache.commons.vfs2.provider.AbstractFileObject.getChildren(AbstractFileObject.java:710) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;commons-vfs2-2.0.jar:2.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; 	at org.apache.commons.vfs2.impl.DefaultFileMonitor$FileMonitorAgent.checkForNewChildren(DefaultFileMonitor.java:565) &lt;span class=&quot;error&quot;&gt;&amp;#91;commons-vfs2-2.0.jar:2.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; 	at org.apache.commons.vfs2.impl.DefaultFileMonitor$FileMonitorAgent.check(DefaultFileMonitor.java:679) &lt;span class=&quot;error&quot;&gt;&amp;#91;commons-vfs2-2.0.jar:2.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; 	at org.apache.commons.vfs2.impl.DefaultFileMonitor$FileMonitorAgent.access$200(DefaultFileMonitor.java:430) &lt;span class=&quot;error&quot;&gt;&amp;#91;commons-vfs2-2.0.jar:2.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; 	at org.apache.commons.vfs2.impl.DefaultFileMonitor.run(DefaultFileMonitor.java:385) &lt;span class=&quot;error&quot;&gt;&amp;#91;commons-vfs2-2.0.jar:2.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; 	at java.lang.Thread.run(Thread.java:744) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_51&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12765086">VFS-553</key>
            <summary>DefaultFileMonitor with workaround.setRecursive(false) is complaining about descendent files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fommil">Sam Halliday</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jan 2015 09:59:26 +0000</created>
                <updated>Tue, 6 Jan 2015 09:59:26 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23zg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-552] [sandbox] does not contain vfs-provider.xml for automatic registration</title>
                <link>https://issues.apache.org/jira/browse/VFS-552</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The commons-vfs2-2.0-sandbox.jar as well as the 2.1 snapshot jar does not contain META-INF/vfs-provider.xml and is therefore not automatically configured by DefaultFileSystemManager. Adding a &amp;lt;resource&amp;gt; declaration to pom fixes the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12764914">VFS-552</key>
            <summary>[sandbox] does not contain vfs-provider.xml for automatic registration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Jan 2015 14:24:58 +0000</created>
                <updated>Thu, 19 May 2016 18:25:51 +0000</updated>
                            <resolved>Mon, 5 Jan 2015 14:53:32 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14264644" author="b.eckenfels" created="Mon, 5 Jan 2015 14:53:32 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1649538&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1649538&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15291760" author="b.eckenfels" created="Thu, 19 May 2016 18:25:51 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23yfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-551] BUG - Use of a Broken or Risky Cryptographic Algorithm - DefaultCryptor.java</title>
                <link>https://issues.apache.org/jira/browse/VFS-551</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Good day,&lt;/p&gt;

&lt;p&gt;We are currently using &quot;Commons-vfs2-2.0&quot; and in the analysis of veracode found this bug in DefaultCryptor.java (near to the line 52) in this class, used &quot;AES&quot;:&lt;/p&gt;


&lt;p&gt;Description:&lt;/p&gt;

&lt;p&gt;The use of a broken or risky cryptographic algorithm is an unnecessary risk that may result in the disclosure of sensitive information.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12763854">VFS-551</key>
            <summary>BUG - Use of a Broken or Risky Cryptographic Algorithm - DefaultCryptor.java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="david.espitia">David Camilo Espitia Manrique</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Dec 2014 22:24:19 +0000</created>
                <updated>Thu, 19 May 2016 18:25:55 +0000</updated>
                            <resolved>Sat, 27 Dec 2014 09:36:55 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14259321" author="b.eckenfels" created="Sat, 27 Dec 2014 09:36:55 +0000"  >&lt;p&gt;I am not sure why &quot;AES&quot; (128) is considered &quot;broken&quot; or &quot;risky&quot;?&lt;/p&gt;

&lt;p&gt;However the `DefaultCryptor` is used to obfuscate a password in the URL (when manually called) It uses a fixed key and can therefore not be considered cryptographic quality. I would not use it for such. I consider this a false positive alert and close the bug as I don&apos;t know what could improve this situation. I did add a warning in Javadoc, therefore closing this as fixed.&lt;/p&gt;</comment>
                            <comment id="15291774" author="b.eckenfels" created="Thu, 19 May 2016 18:25:55 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23shz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-548] SoftRefReleaseThread might leak </title>
                <link>https://issues.apache.org/jira/browse/VFS-548</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The lock-free but non-strict initiallisation of the SoftRefReleaseThread might in rare condition construct but not start Thread objects. This is actually a leak in older java versions (and I think causes a threadgroup to not be destroyed in newer versions). In any case, this optimization is not needed as it is on a cold path, so using synchronized to set the new value is perfectly fine. (especially as the thread constructor uses synchronized methods anyway).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12756155">VFS-548</key>
            <summary>SoftRefReleaseThread might leak </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>leak</label>
                            <label>thread</label>
                    </labels>
                <created>Tue, 18 Nov 2014 17:31:03 +0000</created>
                <updated>Thu, 19 May 2016 18:25:35 +0000</updated>
                            <resolved>Wed, 23 Sep 2015 20:46:07 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14905174" author="b.eckenfels" created="Wed, 23 Sep 2015 20:16:34 +0000"  >&lt;p&gt;another interpretation of this code&lt;/p&gt;</comment>
                            <comment id="14905216" author="b.eckenfels" created="Wed, 23 Sep 2015 20:46:07 +0000"  >&lt;p&gt;fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-480&quot; title=&quot;[VFS] SoftRefFilesCache Doesn&amp;#39;t Ever Clear Cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-480&quot;&gt;&lt;del&gt;VFS-480&lt;/del&gt;&lt;/a&gt; commit.&lt;/p&gt;</comment>
                            <comment id="15291717" author="b.eckenfels" created="Thu, 19 May 2016 18:25:35 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12659473">VFS-480</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12659473">VFS-480</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ijz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-547] [Tests] AbstractVfsTestCase in wrong package</title>
                <link>https://issues.apache.org/jira/browse/VFS-547</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The base class for the VFS tests is in a wrong package (org.apache.commons.AbstractVfsTestCase). It should be moved to org.apache.commons.vfs2. However I wonder if we can easily make this change as some external providers might depend on it to build?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12755643">VFS-547</key>
            <summary>[Tests] AbstractVfsTestCase in wrong package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Nov 2014 03:40:26 +0000</created>
                <updated>Sun, 16 Nov 2014 15:09:33 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14213860" author="b.eckenfels" created="Sun, 16 Nov 2014 06:00:31 +0000"  >&lt;p&gt;Similiar (but less critical) is CacheTestSuite which I would move from org.apache.vfs2.test to org.apache.vfs2.cache (or actually cache.test as none of the tests implement the target under tests).&lt;/p&gt;</comment>
                            <comment id="14213937" author="joehni" created="Sun, 16 Nov 2014 14:56:54 +0000"  >&lt;p&gt;Move it and create a derived, shallow and dreprecated one at the original location &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14213938" author="sebb@apache.org" created="Sun, 16 Nov 2014 15:09:33 +0000"  >&lt;p&gt;Do we need to provide compatiblity for test cases?&lt;br/&gt;
I would say no, we can do what we like with them.&lt;/p&gt;

&lt;p&gt;AFAICT, the solution proposed by Joerg only works for 3rd parties that extend the original class. &lt;br/&gt;
It would not work for subclasses unless they continue to use the deprecated class - in which case there seems no point.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22fhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-546] VFS very slow resolving FTP files</title>
                <link>https://issues.apache.org/jira/browse/VFS-546</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;We have found a performance issue using VFS to access files via FTP. Pushing few MBs takes too long... The code is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;FileSystemManager fsmgr = VFS.getManager();
FileObject f = fsmgr.resolveFile(path);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(d.exists()) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; f.getContent().getOutputStream();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With the same FTP server both using &lt;tt&gt;curl&lt;/tt&gt; and a C++ implementation the same file requires few seconds.&lt;/p&gt;

&lt;p&gt;Could be a configuration issue, a usage issue or a bug?&lt;/p&gt;

&lt;p&gt;Thanks in advance.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian&lt;/p&gt;</environment>
        <key id="12755435">VFS-546</key>
            <summary>VFS very slow resolving FTP files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wikier">Sergio Fern&#225;ndez</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Nov 2014 17:51:07 +0000</created>
                <updated>Fri, 21 Nov 2014 10:29:49 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14212874" author="b.eckenfels" created="Fri, 14 Nov 2014 21:40:16 +0000"  >&lt;p&gt;Can you pinpoint which of the operations is slow? Is it reading the stream (you dont show it in your code) or (what I suspect) the exists() method? Is the directory which contains the file filled with a lot of files?&lt;/p&gt;</comment>
                            <comment id="14214684" author="wikier" created="Mon, 17 Nov 2014 14:22:58 +0000"  >&lt;p&gt;Thanks for the reply, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We&apos;ve been investigating, and I think the issue came because we enabled the passive mode:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;FtpFileSystemConfigBuilder.getInstance().setPassiveMode(opts, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I still have to do some more tests, but that looks solves our performance issue getting the &lt;tt&gt;OutputStream&lt;/tt&gt;. I&apos;ll keep you posted. Thanks.&lt;/p&gt;</comment>
                            <comment id="14219624" author="wikier" created="Thu, 20 Nov 2014 17:30:02 +0000"  >&lt;p&gt;OK, I got something. Not sure if I can understand why...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;accessing the remove ftp server writing 18MB works fine in the expected times: 660ms&lt;/li&gt;
	&lt;li&gt;same test accessing the ftp locally takes 88699ms&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We are writing to the stream with commons-io: &lt;tt&gt;IOUtils.copy(in, out)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Any idea why?&lt;/p&gt;</comment>
                            <comment id="14219696" author="b.eckenfels" created="Thu, 20 Nov 2014 18:15:34 +0000"  >&lt;p&gt;I suspect its an issue with nameserver/(reverse)resolving/random number generator/timeout or similiar. That extreme difference in runtime cannot be attributed to cpu or io inefficiency.&lt;/p&gt;

&lt;p&gt;I would think you should see the blockign operation in simple stackdumps. just take 5 dumps avery 3 seconds and compare progress. Also tunrng on verbose protocol logging might help (not sure how to do it&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="14220758" author="wikier" created="Fri, 21 Nov 2014 10:29:49 +0000"  >&lt;p&gt;I&apos;ll try to debug with some of those tools...&lt;/p&gt;

&lt;p&gt;I do not understand, how &lt;a href=&quot;https://bitbucket.org/mico-project/platform/src/db336d8b7347d03a4f980f8c89e8e17fb57cc33a/api/java/persistence/src/test/java/eu/mico/platform/persistence/test/MarmottaContentTest.java?at=master#cl-45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the same test&lt;/a&gt; has such different figures remotely than local:&lt;/p&gt;

&lt;blockquote&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;sergio@wolfcastle:~/projects/mico/platform/api/java/persistence$ mvn test -Dtest=MarmottaContentTest#testFramework105 -Dtest.host=192.168.56.101
...
Running eu.mico.platform.persistence.test.MarmottaContentTest
 INFO [main] (MarmottaContentTest.java:52) - Using ftp://mico:mico@192.168.56.101/2799e422-8d99-4330-9765-4fb388e96594/7403e783-30d0-4338-8d19-769b489e6b3c.bin as path for testing
 INFO [main] (VfsLog.java:138) - Using &quot;/tmp/vfs_cache&quot; as temporary files store.
DEBUG [main] (MarmottaContentTest.java:58) - initializing VFS Manager: 86ms
DEBUG [main] (MarmottaContentTest.java:62) - resolving content item path: 69ms
DEBUG [main] (MarmottaContentTest.java:66) - checking parent directory: 51ms
DEBUG [main] (MarmottaContentTest.java:70) - creating parent directory: 24ms
DEBUG [main] (MarmottaContentTest.java:75) - resolving content part path: 0ms
DEBUG [main] (MarmottaContentTest.java:79) - creating content part file: 25ms
DEBUG [main] (MarmottaContentTest.java:83) - getting output stream: 3ms
DEBUG [main] (MarmottaContentTest.java:88) - writing content to the stream: 2265ms
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.936 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;mico@mico:~/src/platform/api/java/persistence$ mvn clean test -Dtest=MarmottaContentTest#testFramework105 -Dtest.host=localhost
...
Running eu.mico.platform.persistence.test.MarmottaContentTest
 INFO [main] (MarmottaContentTest.java:52) - Using ftp://mico:mico@localhost/a18ba526-0a34-4d73-9b7d-2144eabd9ace/ee2a6b28-43f0-4535-b663-f38c95863a0c.bin as path for testing
 INFO [main] (VfsLog.java:138) - Using &quot;/tmp/vfs_cache&quot; as temporary files store.
DEBUG [main] (MarmottaContentTest.java:58) - initializing VFS Manager: 159ms
DEBUG [main] (MarmottaContentTest.java:62) - resolving content item path: 76ms
DEBUG [main] (MarmottaContentTest.java:66) - checking parent directory: 60ms
DEBUG [main] (MarmottaContentTest.java:70) - creating parent directory: 25ms
DEBUG [main] (MarmottaContentTest.java:75) - resolving content part path: 0ms
DEBUG [main] (MarmottaContentTest.java:79) - creating content part file: 40ms
DEBUG [main] (MarmottaContentTest.java:83) - getting output stream: 3ms
DEBUG [main] (MarmottaContentTest.java:88) - writing content to the stream: 88767ms
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 90.01 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;Maybe something is wrng in &lt;a href=&quot;https://bitbucket.org/mico-project/platform/src/db336d8b7347d03a4f980f8c89e8e17fb57cc33a/api/java/persistence/src/main/java/eu/mico/platform/persistence/util/VFSUtils.java?at=master#cl-18&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;our configuration&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;? And for sure we can discard a server-sice issue, because alternative implementations (curl and c++) work as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22e7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-545] DefaultFilesCache leaks closed filesystems</title>
                <link>https://issues.apache.org/jira/browse/VFS-545</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The org.apache.commons.vfs2.cache.DefaultFilesCache does not remove the filesystem specific cache if a filesystem gets cleared. This leads to the problem that instances if the FileSystem kept alive after the FileProvider has closed the filesystem. This is not so much a problem for a smaller number of filesystems configured for a prefix, but it is a problem for layered or virtual filesystems which get created and destroyed. (See also &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-544&quot; title=&quot;VirtualFileSystems leak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-544&quot;&gt;&lt;del&gt;VFS-544&lt;/del&gt;&lt;/a&gt;). The more advanced filesystem caches support clearing the keys (but have other races I think).&lt;/p&gt;

&lt;p&gt;The behaviour is somewhat documented &quot;lifetime of the FileSystemManager&quot;, but I don&apos;t think it is expected or required.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12754823">VFS-545</key>
            <summary>DefaultFilesCache leaks closed filesystems</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>leak</label>
                    </labels>
                <created>Wed, 12 Nov 2014 18:05:54 +0000</created>
                <updated>Thu, 19 May 2016 18:25:54 +0000</updated>
                            <resolved>Sun, 16 Nov 2014 07:00:31 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14208387" author="b.eckenfels" created="Wed, 12 Nov 2014 18:20:04 +0000"  >&lt;p&gt;My idea would be to simply use&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void clear(FileSystem filesystem)
    {
        Map&amp;lt;FileName, FileObject&amp;gt; files = filesystemCache.remove(filesystem);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (files != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) files.clear(); &lt;span class=&quot;code-comment&quot;&gt;// help GC
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14213872" author="b.eckenfels" created="Sun, 16 Nov 2014 07:00:15 +0000"  >&lt;p&gt;Commited a Fix:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-545&quot; title=&quot;DefaultFilesCache leaks closed filesystems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-545&quot;&gt;&lt;del&gt;VFS-545&lt;/del&gt;&lt;/a&gt; Remove and avoid FileSystems in cache. Add/fix Javadoc, added Unittests.&lt;br/&gt;
core\src\main\java\org\apache\commons\vfs2\cache\AbstractFilesCache.java&lt;br/&gt;
core\src\main\java\org\apache\commons\vfs2\cache\DefaultFilesCache.java&lt;br/&gt;
core\src\main\java\org\apache\commons\vfs2\cache\LRUFilesCache.java&lt;br/&gt;
core\src\main\java\org\apache\commons\vfs2\cache\NullFilesCache.java&lt;br/&gt;
core\src\main\java\org\apache\commons\vfs2\cache\SoftRefFilesCache.java&lt;br/&gt;
core\src\test\java\org\apache\commons\vfs2\cache\LRUFilesCacheTests.java&lt;br/&gt;
core\src\test\java\org\apache\commons\vfs2\cache\NullFilesCacheTests.java&lt;br/&gt;
core\src\test\java\org\apache\commons\vfs2\test\CacheTestSuite.java&lt;br/&gt;
src\changes\changes.xml&lt;br/&gt;
Revision 1639972&lt;br/&gt;
(and Revision 1639974 and 1639975)&lt;/p&gt;</comment>
                            <comment id="15291771" author="b.eckenfels" created="Thu, 19 May 2016 18:25:54 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ajj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-544] VirtualFileSystems leak</title>
                <link>https://issues.apache.org/jira/browse/VFS-544</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When creating a org.apache.commons.vfs2.impl.VirtualFileSystem by org.apache.commons.vfs2.impl.VirtualFileProvider it is tracked as a component. But since VirtualFileProvider is not an AbstractFileProvider and not registered in providers it will never be closed by org.apache.commons.vfs2.impl.DefaultFileSystemManager._closeFileSystem(FileSystem). Also the final instance of VirtualFileProvider does not get closed when the DefaultFileSystemManager gets closed.&lt;/p&gt;

&lt;p&gt;VirtualFileSystem itself does not have critical resources, but its DelegatedFiles are cached so there should be a way to close them.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12754705">VFS-544</key>
            <summary>VirtualFileSystems leak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>leak</label>
                            <label>patch</label>
                    </labels>
                <created>Wed, 12 Nov 2014 08:17:09 +0000</created>
                <updated>Thu, 19 May 2016 18:26:26 +0000</updated>
                            <resolved>Wed, 19 Nov 2014 03:59:06 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14207803" author="b.eckenfels" created="Wed, 12 Nov 2014 08:22:11 +0000"  >&lt;p&gt;Given the fact we cannot register a VirtualFileProvider by scheme (and it does not implement AbstractFileProvider), I guess it is best to hardcode the closing of those objects in _closeFileSystem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void _closeFileSystem(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileSystem filesystem)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileProvider provider = providers.get(filesystem.getRootName().getScheme());
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (provider != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            ((AbstractFileProvider) provider).closeFileSystem(filesystem);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (filesystem &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; VirtualFileSystem)
        {
           vfsProvider.closeFileSystem(filesystem);
        }

    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And also making vfsProvider not final, so it can be constructed in init() and destroyed in close(). Will append a patch.&lt;/p&gt;</comment>
                            <comment id="14211813" author="b.eckenfels" created="Fri, 14 Nov 2014 04:40:22 +0000"  >&lt;p&gt;I commited some cleanup work on trunk, v2 patch is against the cleaned up version. It makes VirtualFileProvider a dynamically managed resource. It also makes sure closeFilesystem is passed to VirtualFileProvider.&lt;/p&gt;</comment>
                            <comment id="14217365" author="b.eckenfels" created="Wed, 19 Nov 2014 03:59:07 +0000"  >&lt;p&gt;Ok, I have commited a fix:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1640477&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1640477&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15291861" author="b.eckenfels" created="Thu, 19 May 2016 18:26:26 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12681486" name="vfs-544-v2.patch" size="5475" author="b.eckenfels" created="Fri, 14 Nov 2014 04:40:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i229tj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-543] FileObject.isContentOpen is returning false regardless file open or not when remote SFTP is done.</title>
                <link>https://issues.apache.org/jira/browse/VFS-543</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;FileObject.isContentOpen is returning false regardless file open or not when remote SFTP is done.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12748645">VFS-543</key>
            <summary>FileObject.isContentOpen is returning false regardless file open or not when remote SFTP is done.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alladisk">sanjay</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Oct 2014 16:48:06 +0000</created>
                <updated>Wed, 23 Sep 2015 20:49:01 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14174130" author="b.eckenfels" created="Thu, 16 Oct 2014 19:32:51 +0000"  >&lt;p&gt;hmm, I suspect this is due to the &quot;channel&quot; handling which is not using the normal ThreadData streams. But what is worse, it seems that this method is not tested in the provider tests.&lt;/p&gt;

&lt;p&gt;Is this a regression? Otherwise I would downgrade the severity, it is not really an often used function.&lt;/p&gt;</comment>
                            <comment id="14876641" author="simon04" created="Fri, 18 Sep 2015 23:00:13 +0000"  >&lt;p&gt;Maybe we should throw a &lt;tt&gt;UnsupportedOperationException&lt;/tt&gt; instead &#8211; better than returning incorrect results?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/core/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java b/core/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java
index a3d5617..beb8e9a 100644
--- a/core/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java
+++ b/core/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java
@@ -683,4 +683,9 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SftpFileObject &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AbstractFileObject&amp;lt;SftpFileSystem&amp;gt;
         }
     }
 
+    @Override
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isContentOpen()
+    {
+        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnsupportedOperationException();
+    }
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2198v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-538] c:/doucmnt and setting</title>
                <link>https://issues.apache.org/jira/browse/VFS-538</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;file type for c:/Documents and Settings  shows Folder but show error when access.&lt;br/&gt;
org.apache.commons.vfs2.FileNotFolderException: Could not list the contents of &quot;file:///c:/Documents and Settings&quot; because it is not a folder.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12747590">VFS-538</key>
            <summary>c:/doucmnt and setting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ang713">angclo chakma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 12 Oct 2014 16:36:35 +0000</created>
                <updated>Mon, 13 Oct 2014 01:01:00 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14168872" author="b.eckenfels" created="Mon, 13 Oct 2014 01:01:00 +0000"  >&lt;p&gt;Hm, not sure this is actually possible. At least not with Java 6. The same problem of this alias folder is even present in Windows Explorer, when you try to open it, it will give you an error (the only help against this is, it is normally hidden). (Funny enough command line automatically follows the redirection).&lt;/p&gt;

&lt;p&gt;I think the right thing would be to represent the folder as a symlink to \Users.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;c:\&amp;gt;dir /N /A:L
...
14.07.2009  07:08    &amp;lt;VERBINDUNG&amp;gt;   Documents and Settings [C:\Users]
21.11.2010  07:59    &amp;lt;VERBINDUNG&amp;gt;   Dokumente und Einstellungen [C:\Users]
21.11.2010  07:59    &amp;lt;VERBINDUNG&amp;gt;   Programme [C:\Program Files]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i212y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-536] DefaultFileMonitor will ignore files forever if directory is deleted and recreated</title>
                <link>https://issues.apache.org/jira/browse/VFS-536</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;We&apos;re using VFS2 in our emacs scala ide &lt;a href=&quot;https://github.com/ensime/ensime-server&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ensime/ensime-server&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unfortunately, I&apos;ve just discovered that if we watch a directory, e.g. here we are watching the target directory for class files that are created by a compiler&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;https://github.com/ensime/ensime-server/blob/master/src/main/scala/org/ensime/indexer/FileWatchers.scala#L28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ensime/ensime-server/blob/master/src/main/scala/org/ensime/indexer/FileWatchers.scala#L28&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;then if the directory is deleted and recreated (as is done by the SBT scala build tool!) then monitoring events are ignored forever!&lt;/p&gt;

&lt;p&gt;I can confirm that file watching works fine if individual files are added or removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12743543">VFS-536</key>
            <summary>DefaultFileMonitor will ignore files forever if directory is deleted and recreated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fommil">Sam Halliday</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Sep 2014 15:59:19 +0000</created>
                <updated>Mon, 5 Jan 2015 22:05:49 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14264455" author="fommil" created="Mon, 5 Jan 2015 10:21:11 +0000"  >&lt;p&gt;has anybody looked at this? It&apos;s causing rather a lot of problems for us and rethinking our workarounds &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14264680" author="b.eckenfels" created="Mon, 5 Jan 2015 15:31:38 +0000"  >&lt;p&gt;Hm, I am not so deep into this thats why I havent yet had a look. I know there where some other FileWatcher bugs here, even some with pending patches. Could you maybe check if any of those help your problem? &lt;/p&gt;

&lt;p&gt;I am currently busy with finalizing the 2.1 release, but if anybody has a good tested patch for those (and this) issues, I would be happy to merge it before the release.&lt;/p&gt;</comment>
                            <comment id="14264911" author="fommil" created="Mon, 5 Jan 2015 18:58:08 +0000"  >&lt;p&gt;We originally noticed this in this ticket: &lt;a href=&quot;https://github.com/ensime/ensime-server/issues/613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ensime/ensime-server/issues/613&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll try your snapshot and see if the problem remains. It seems quite a tricky bug to test for as it relies on so much I/O and timing.&lt;/p&gt;</comment>
                            <comment id="14264959" author="fommil" created="Mon, 5 Jan 2015 19:28:32 +0000"  >&lt;p&gt;&lt;del&gt;Good news, it looks like 2.1-SNAPSHOT fixes the issue that we had (although it is always possible that sbt changed the semantics of their `clean compile` operation)&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="14264973" author="fommil" created="Mon, 5 Jan 2015 19:36:46 +0000"  >&lt;p&gt;Damnit, I wasn&apos;t running the right code... I was running our current code with the workaround when I tried this (local/published ivy confusion)&lt;/p&gt;

&lt;p&gt;Confirming that the bug still exists in todays 2.1-SNAPSHOT&lt;/p&gt;</comment>
                            <comment id="14265162" author="b.eckenfels" created="Mon, 5 Jan 2015 21:48:07 +0000"  >&lt;p&gt;Just a FYI: the trunk code should be pretty final and you can check it out and build yourself. We cannot provide official archives of that, but if you search around there is a snapshot repository which contains integration builds (excluding the sandbox).&lt;/p&gt;

&lt;p&gt;Maybe you can check the patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-268&quot; title=&quot;When I set a delay on FileMonitor it detects a create on a file, but if the file is deleted/moved and created in the directory again it does not detect it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-268&quot;&gt;VFS-268&lt;/a&gt; if this helps?&lt;/p&gt;</comment>
                            <comment id="14265182" author="fommil" created="Mon, 5 Jan 2015 22:00:51 +0000"  >&lt;p&gt;268 doesn&apos;t sound like the same thing, but I&apos;ll try and report back. The diff between that patched file and master is quite substantial. In our case, lets say we have a directory structure with a file in it:&lt;/p&gt;

&lt;p&gt;  project/target/classes/foo/bar/FooBar.class&lt;/p&gt;

&lt;p&gt;and we put a recursive file monitor on &quot;project/target/classes&quot;, we will see any changes to the files within.&lt;/p&gt;

&lt;p&gt;However, if something (i.e. the build tool) deletes &quot;project/target&quot;, and recreates it, we never see any changes under the newly created directory &amp;#8212; including changes to project/target/classes/foo/bar/FooBar.class&lt;/p&gt;</comment>
                            <comment id="14265185" author="fommil" created="Mon, 5 Jan 2015 22:02:33 +0000"  >&lt;p&gt;I can&apos;t try the patched file, it results in compile errors against master. If you could rebase it, I could give it a try.&lt;/p&gt;</comment>
                            <comment id="14265189" author="b.eckenfels" created="Mon, 5 Jan 2015 22:04:46 +0000"  >&lt;p&gt;Does it always stop detecting changes after the delete or only if it is deleted/recreated in-between scan delay?&lt;/p&gt;</comment>
                            <comment id="14265191" author="b.eckenfels" created="Mon, 5 Jan 2015 22:05:49 +0000"  >&lt;p&gt;I am not planning to work on those bugs myself before the 2.1 release, I just have to do too much other stuff. Maybe you can track down the patch provider for the rebase (I dont know why it isnt a patch file in the first place).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20ebb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-531] Cannot &quot;copyFrom&quot; without access to create parent folder even if folder exists</title>
                <link>https://issues.apache.org/jira/browse/VFS-531</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Using copyFrom when you don&apos;t have access to create the parent folder fails even when the parent folder exists.&lt;/p&gt;

&lt;p&gt;I have the folder structure of:&lt;/p&gt;

&lt;p&gt;/home/usera/subfolder&lt;/p&gt;

&lt;p&gt;Userb has r/w access to the subfolder and read access to the parent folders.  CopyFrom with a destination of &quot;/home/usera/subfolder/file&quot; fails &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: org.apache.commons.vfs2.FileSystemException: Could not create folder &lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;///home/usera/subfolder&quot;&lt;/span&gt;.
&lt;/span&gt;	at org.apache.commons.vfs2.provider.AbstractFileObject.createFolder(AbstractFileObject.java:999)
	at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1424)
	at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:461)
	at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:441)
	at org.apache.commons.vfs2.FileUtil.copyContent(FileUtil.java:111)
	at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:1053)
	... 2 more
Caused by: org.apache.commons.vfs2.FileSystemException: Could not create directory &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/usera/subfolder&quot;&lt;/span&gt;.
	at org.apache.commons.vfs2.provider.local.LocalFile.doCreateFolder(LocalFile.java:153)
	at org.apache.commons.vfs2.provider.AbstractFileObject.createFolder(AbstractFileObject.java:988)
	... 7 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It looks like the issue is that the code doesn&apos;t check if the destination folder exists before calling create.  Create throws an exception any time the folder is not created (even if it didn&apos;t have to create the folder.)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12726810">VFS-531</key>
            <summary>Cannot &quot;copyFrom&quot; without access to create parent folder even if folder exists</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="laplie">Laplie Anderson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jul 2014 14:25:22 +0000</created>
                <updated>Wed, 29 Apr 2015 17:22:20 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="14059019" author="garydgregory" created="Fri, 11 Jul 2014 17:10:21 +0000"  >&lt;p&gt;Can you download and build trunk to see if that still happens? We hope to release 2.1 soon.&lt;/p&gt;</comment>
                            <comment id="14059321" author="laplie" created="Fri, 11 Jul 2014 20:35:47 +0000"  >&lt;p&gt;Still happens on 2.1-SNAPSHOT downloaded today.  Here is the new stacktrace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: org.apache.commons.vfs2.FileSystemException: Could not create folder &lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;///home/usera/subfolder&quot;&lt;/span&gt;.
&lt;/span&gt;	at org.apache.commons.vfs2.provider.AbstractFileObject.createFolder(AbstractFileObject.java:439)
	at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1377)
	at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:479)
	at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:458)
	at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:772)
	at org.apache.commons.vfs2.provider.DefaultFileContent.write(DefaultFileContent.java:796)
	at org.apache.commons.vfs2.FileUtil.copyContent(FileUtil.java:90)
	at org.apache.commons.vfs2.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:341)
	... 2 more
Caused by: org.apache.commons.vfs2.FileSystemException: Could not create directory &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/usera/subfolder&quot;&lt;/span&gt;.
	at org.apache.commons.vfs2.provider.local.LocalFile.doCreateFolder(LocalFile.java:153)
	at org.apache.commons.vfs2.provider.AbstractFileObject.createFolder(AbstractFileObject.java:428)
	... 9 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I also found something else out, giving &lt;b&gt;execute&lt;/b&gt; access, &lt;tt&gt;chmod 755 /home/usera&lt;/tt&gt; fixes the issue.  Write access to that folder is not needed.&lt;/p&gt;</comment>
                            <comment id="14519764" author="p3consulting" created="Wed, 29 Apr 2015 17:22:20 +0000"  >&lt;p&gt;Execute access is not enough due to the walking up algorithm, if you have a hierarchy like this:&lt;/p&gt;

&lt;p&gt;../noread/canwrite/&lt;/p&gt;

&lt;p&gt;where noread is drwx-&lt;del&gt;x&lt;/del&gt;-x 3 root  root&lt;br/&gt;
and canwrite is drwxr-xr-x 2 someuser someuser&lt;/p&gt;

&lt;p&gt;you will never be able to write anything into &quot;canwrite&quot; folder as user &quot;someuser&quot; because the absurd logic of walking from parent to parent folder to see if each path segment exists, while of course using any other FTP client works.&lt;/p&gt;

&lt;p&gt;Of course doing the copy step directly with the full path to the target, works.&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xopz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-529] [hdfs][tests] Windows build fails if ls.exe is missing</title>
                <link>https://issues.apache.org/jira/browse/VFS-529</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I broke the builds on Windows because the HDFS tests cannot be executed on Windows if no ls.exe is in the path.&lt;/p&gt;

&lt;p&gt;I need to revert the following change (but I plan to actually use &quot;no-hdfs&quot; as the profile name)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1595534&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1595534&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Win7/mvn3.2&lt;/p&gt;</environment>
        <key id="12721557">VFS-529</key>
            <summary>[hdfs][tests] Windows build fails if ls.exe is missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>test</label>
                            <label>windows</label>
                    </labels>
                <created>Tue, 17 Jun 2014 00:34:09 +0000</created>
                <updated>Thu, 19 May 2016 18:26:00 +0000</updated>
                            <resolved>Mon, 30 Jun 2014 19:56:29 +0000</resolved>
                                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14035915" author="dlmarion" created="Wed, 18 Jun 2014 16:42:55 +0000"  >&lt;p&gt;+1 to renaming the profile, thats my fault.&lt;/p&gt;</comment>
                            <comment id="14048050" author="b.eckenfels" created="Mon, 30 Jun 2014 19:56:29 +0000"  >&lt;p&gt;Fixed this with this commit:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1606895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1606895&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It keeps the changes to support testing on Windows (i.e. not set umask) but it introduces the &quot;no-hdfs&quot; profile again and enables it based on OS family Windows. I modifeid the changes entry for &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-526&quot; title=&quot;No Hdfs testing on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-526&quot;&gt;&lt;del&gt;VFS-526&lt;/del&gt;&lt;/a&gt; accordingly.&lt;/p&gt;</comment>
                            <comment id="15291786" author="b.eckenfels" created="Thu, 19 May 2016 18:26:00 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12714866">VFS-526</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399753</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wten:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399861</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-528] DefaultFileMonitor missing to report some file creation.</title>
                <link>https://issues.apache.org/jira/browse/VFS-528</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;It&apos;s hard to reproduce but sometimes the DefaultFileMonitor does not report some file creation. It happens when a file is added in a directory that has just been added in the DefaultFileMonitor.&lt;/p&gt;

&lt;p&gt;It is more likely to appear when the DefaultFileMonitor is starting.&lt;/p&gt;

&lt;p&gt;To reproduce (might take several tries to fail)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Start the DefaultFileMonitor&lt;/li&gt;
	&lt;li&gt;Quickly create a directory inside the monitored directory.&lt;/li&gt;
	&lt;li&gt;Quickly create a file inside this directory.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The issue is caused by a flaw in the code.&lt;br/&gt;
When the new directory is detected, the DefaultFileMonitor fires the creation event as expected (in fireAllCreate method). However does not immediately register the directory&apos;s content for comparison with the next check. It rather postpones the registration with a call to &quot;queueAddFile(child)&quot; (line 425).&lt;/p&gt;

&lt;p&gt;The directory and its content actually registered a bit later at the end of the main loop on line 335.&lt;/p&gt;

&lt;p&gt;The issue is when a file is added between the queueAddFile and the actual addFile. No events is fired for this file as it does not exists in the fireAllCreate method. But as it gets registered a bit later, the next check don&apos;t detect any change on the file system and does not trigger en event too.&lt;/p&gt;

&lt;p&gt;I see too possible fix for this issue:&lt;br/&gt;
1. Don&apos;t queue the registration of the file.&lt;br/&gt;
2. Make sure that when the actual registration occurs (the call to addFile), the exact same set of files is used as in the fireAllCreate method.&lt;/p&gt;

&lt;p&gt;For my project I used the first solution by overriding the queueAddFile method. It made me realized that it might be the reason why it is protected. It seems to work, but I&apos;m not sure if it as other consequences.&lt;/p&gt;

&lt;p&gt;The bug has been found on vfs 1.0 and 2.2.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows, Linux, x86, x86_64&lt;/p&gt;</environment>
        <key id="12720155">VFS-528</key>
            <summary>DefaultFileMonitor missing to report some file creation.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gibe">Jean-Baptiste</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jun 2014 17:44:13 +0000</created>
                <updated>Wed, 27 Jul 2016 21:04:46 +0000</updated>
                                            <version>1.0</version>
                    <version>2.0</version>
                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14105300" author="chauhan.ns@gmail.com" created="Thu, 21 Aug 2014 11:12:29 +0000"  >&lt;p&gt;Hi Jean,&lt;/p&gt;

&lt;p&gt;I have also encountered this issue but the first solution mentioned by you i.e. overriding queueAddFile is not working for me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;			DefaultFileMonitor fm = new DefaultFileMonitor(new CustomFileListener())&lt;br/&gt;
			{&lt;br/&gt;
			    protected void queueAddFile(FileObject file) &lt;/p&gt;
{
			    	// this.addStack.push(file);
			    }
&lt;p&gt;			};&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Neeraj&lt;/p&gt;</comment>
                            <comment id="14112232" author="gibe" created="Wed, 27 Aug 2014 13:07:21 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I did the following. The file is not queued, it is added immediately.&lt;br/&gt;
    protected void queueAddFile(final FileObject file) &lt;/p&gt;
{
        addFile(file);
    }</comment>
                            <comment id="14117187" author="chauhan.ns@gmail.com" created="Mon, 1 Sep 2014 08:34:11 +0000"  >&lt;p&gt;Hi Jean,&lt;/p&gt;

&lt;p&gt;Thanks for the update.&lt;br/&gt;
I tried this also, but unfortunately the result is the same for me i.e. no event is being generated for few file creations.&lt;/p&gt;

&lt;p&gt;I am doing following:&lt;br/&gt;
1. At the end of every hour, downloading some files to a particular directory (created at 00:00 HRS) being monitored by file listener. In other words, this task is being performed 24 times a day in the same directory which gets created at 00:00 HRS.&lt;br/&gt;
2. Additionally, as soon as the file download completes, I am renaming the downloaded file with a name appended with the timestamp (YYYYMMDD).&lt;br/&gt;
3. As per expectation I should get two file creation events associated with ever file I download i.e. first for file creation by download and second for file creation by rename.&lt;br/&gt;
4. For most of the files, I am getting proper events (i.e. after file download and after file rename).&lt;br/&gt;
5. For few files I am just getting the file creation event after download and not after rename. As per observation, this is happening for first hour of the day only i.e. 00:00 HR.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Neeraj&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wkyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-527] LAST_MODIFIED semantics</title>
                <link>https://issues.apache.org/jira/browse/VFS-527</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The Capability.LAST_MODIFED seems not to be used and the JavaDoc does not cleanly explain the difference to Capability.GET_LAST_MODIFIED.&lt;/p&gt;

&lt;p&gt;There is also no support for Filesystems which dont know last modified on files but not dirs (for get). Maybe implementing GET_LAST_MODIFIED_FILE and GET_LAST_MODIFIED_DIR would be a good option?&lt;/p&gt;

&lt;p&gt;This was discussed on dev@ mailinglist, and this is a placeholder Bug since there might be changes which can only be done in a new Major version.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12714972">VFS-527</key>
            <summary>LAST_MODIFIED semantics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>api</label>
                    </labels>
                <created>Sat, 17 May 2014 20:17:41 +0000</created>
                <updated>Wed, 23 Sep 2015 20:56:17 +0000</updated>
                                            <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393285</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vq13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-526] No Hdfs testing on Windows</title>
                <link>https://issues.apache.org/jira/browse/VFS-526</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;VFS2 uses a profile &quot;hdfs&quot; to turn off the Hdfs Tests on Windows. This profile is quite confusingly named (as the other profiles which have a provider name turn on special tests and not turn them off based on OS).&lt;/p&gt;

&lt;p&gt;Also there is no reason for this Profile (anymore?) as the HDFS Mini Cluster and the test cases run perfectly fine on my Windows system. The only thing which needs to be disabled is the execution of the umask program - but this is not needed on Windows it seems, anyway.&lt;/p&gt;

&lt;p&gt;I will attach a patch, tell me what you think.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Win7 x64&lt;/p&gt;</environment>
        <key id="12714866">VFS-526</key>
            <summary>No Hdfs testing on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>hdfs</label>
                            <label>testing</label>
                            <label>windows</label>
                    </labels>
                <created>Fri, 16 May 2014 20:19:48 +0000</created>
                <updated>Thu, 19 May 2016 18:25:51 +0000</updated>
                            <resolved>Sat, 17 May 2014 20:00:06 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14000259" author="b.eckenfels" created="Fri, 16 May 2014 20:30:13 +0000"  >&lt;p&gt;Suggested patch to enable Hdfs testing on Windows (NB: the actual change is a bit different using the Os tool)&lt;/p&gt;</comment>
                            <comment id="14000857" author="b.eckenfels" created="Sat, 17 May 2014 20:00:06 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1595534&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1595534&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14001142" author="garydgregory" created="Sun, 18 May 2014 17:37:09 +0000"  >&lt;p&gt;Let&apos;s also make sure we are using the current version of the HDFS jar...&lt;/p&gt;</comment>
                            <comment id="14034743" author="b.eckenfels" created="Wed, 18 Jun 2014 02:46:02 +0000"  >&lt;p&gt;This unfortunatelly does not work, fixing it is &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-529&quot; title=&quot;[hdfs][tests] Windows build fails if ls.exe is missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-529&quot;&gt;&lt;del&gt;VFS-529&lt;/del&gt;&lt;/a&gt; and switching to 2.4 is &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-530&quot; title=&quot;Update HDFS to latest release in prep for VFS 2.1 release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-530&quot;&gt;&lt;del&gt;VFS-530&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15291762" author="b.eckenfels" created="Thu, 19 May 2016 18:25:51 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12721557">VFS-529</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12712452">VFS-523</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12645321" name="hdfs-on-win.patch" size="8325" author="b.eckenfels" created="Fri, 16 May 2014 20:30:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393179</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vpen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-525] FtpFileObject.exists() output not impacted by refresh() after file deletion</title>
                <link>https://issues.apache.org/jira/browse/VFS-525</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Context: I store a file in an FTP directory and poll the FTP file (using FtpFileObject.exists()) until it is imported by another system and deleted on the FTP folder.&lt;/p&gt;

&lt;p&gt;Issue: On the first lookup, the file is present and FtpFileObject.exists() returns true correctly. That&apos;s OK, but after the file has been deleted, FtpFileObject.exists() continues to return true, even when using CacheStrategy.MANUAL and calling FtpFileObject.refresh().&lt;/p&gt;

&lt;p&gt;Observations: Upon refresh() there is a complex interaction between the file and parent folder object as well as the code of AbstractFileObject and FtpFileObject. The issue seems to stem from the fact that for the existence check of a file, its parent file object is queried for its #children attribute which caches the child entries. On the one hand, the child file seems to clear the link to the parent folder, causing a detach() of the parent, but since the parent folder already is in detached state, it does not clear its #children attribute. &lt;/p&gt;

&lt;p&gt;By the way: I consider it a poor inheritance design if a child class attribute &lt;br/&gt;
    FtpFileObject: private Map&amp;lt;String, FTPFile&amp;gt; children&lt;br/&gt;
shadows a parent class attribute&lt;br/&gt;
    AbstractFileObject: private FileName[] children&lt;/p&gt;

&lt;p&gt;At least it makes debugging more cumbersome.&lt;/p&gt;

&lt;p&gt;Workaround: The issue stems from the fact that the parent FtpFileObject is not cleared correctly because attached==false. Thus I use a call to the parent&apos;s getType() method which causes an attach() and, finally, attached== true and then call refresh() on the parent and the child:&lt;/p&gt;

&lt;p&gt;// This is a workaround for VFS 2.0&apos;s flaws in the &lt;br/&gt;
// handling of attached/detached state and caching:&lt;br/&gt;
FileObject parent = file.getParent();&lt;br/&gt;
parent.getType(); // assure that parent folder is attached&lt;br/&gt;
parent.refresh(); // detach parent folder and clear child object cache &lt;br/&gt;
			  // (works only if attached before)&lt;br/&gt;
// ...end of workaround&lt;br/&gt;
file.refresh();&lt;br/&gt;
System.out.println(&quot;File.exists(): {}&quot;, file.exists());&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 &lt;span class=&quot;error&quot;&gt;&amp;#91;Version 6.1.7601&amp;#93;&lt;/span&gt;&lt;br/&gt;
java version &quot;1.6.0_31&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_31-b05)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 20.6-b01, mixed mode, sharing)&lt;br/&gt;
commonc vfs 2.0&lt;br/&gt;
commons net 3.3&lt;/p&gt;</environment>
        <key id="12713052">VFS-525</key>
            <summary>FtpFileObject.exists() output not impacted by refresh() after file deletion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vbergmann">Volker Bergmann</reporter>
                        <labels>
                            <label>FTP,</label>
                            <label>cache</label>
                            <label>exists</label>
                    </labels>
                <created>Thu, 8 May 2014 10:11:50 +0000</created>
                <updated>Fri, 23 Feb 2018 23:15:48 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15863803" author="hmhagberg" created="Mon, 13 Feb 2017 15:13:19 +0000"  >&lt;p&gt;Same is happening in VFS 2.1 when checking file size&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Reports same size on first and subsequent calls even &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; size changes
&lt;/span&gt;file.refresh();
&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size = file.getContent().getSize();

&lt;span class=&quot;code-comment&quot;&gt;// Reports (changed) file size correctly
&lt;/span&gt;FileObject parent = file.getParent();
parent.getType();
parent.refresh();
file.refresh();
&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size = file.getContent().getSize();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15942128" author="garydgregory" created="Sun, 26 Mar 2017 04:21:04 +0000"  >&lt;p&gt;If you can provide a patch with a unit test, I&apos;d be happy to move it through.&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="16371433" author="ottobackwards" created="Wed, 21 Feb 2018 14:00:03 +0000"  >&lt;p&gt;These tests illustrate the issue.&lt;/p&gt;

&lt;p&gt;I believe they will both fail as written. &#160;The first one certainly does. &#160;Interestingly, if they are run in the same test file, the second one will fail in setup. &#160;This is because the bug also causes the test prep to fail trying to delete the existing files for a clean test, and it still thinks the deleted &apos;a.txt&apos; exists and tried to delete it. &#160;Kind of funny.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testDetectFileDoesNotExistAfterExternalDelete() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject scratchFolder = createScratchFolder();

    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject file = scratchFolder.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;dir1/a.txt&quot;&lt;/span&gt;);

    &lt;span class=&quot;code-comment&quot;&gt;// use canonical file to delete
&lt;/span&gt;    File testDirFile = getTestDirectoryFile();
    File writeDirFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(testDirFile,&lt;span class=&quot;code-quote&quot;&gt;&quot;write-tests&quot;&lt;/span&gt;);
    File dir1File = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(writeDirFile,&lt;span class=&quot;code-quote&quot;&gt;&quot;dir1&quot;&lt;/span&gt;);
    File fileUnderTest = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(dir1File,&lt;span class=&quot;code-quote&quot;&gt;&quot;a.txt&quot;&lt;/span&gt;);
    assertTrue(file.exists());

    fileUnderTest.delete();
    assertFalse(fileUnderTest.exists());

    file.refresh();
    assertFalse(file.exists());
    scratchFolder.close();
    file.close();
}


&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testDetectExternalChangeInFileSizeAfterExternalMod() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject scratchFolder = createScratchFolder();

    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject file = scratchFolder.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;dir2/b.txt&quot;&lt;/span&gt;);

    &lt;span class=&quot;code-comment&quot;&gt;// use canonical file to delete
&lt;/span&gt;    File testDirFile = getTestDirectoryFile();
    File writeDirFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(testDirFile,&lt;span class=&quot;code-quote&quot;&gt;&quot;write-tests&quot;&lt;/span&gt;);
    File dir1File = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(writeDirFile,&lt;span class=&quot;code-quote&quot;&gt;&quot;dir2&quot;&lt;/span&gt;);
    File fileUnderTest = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(dir1File,&lt;span class=&quot;code-quote&quot;&gt;&quot;b.txt&quot;&lt;/span&gt;);
    assertTrue(file.exists());
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size = file.getContent().getSize();
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; oldFileSize = fileUnderTest.length();
    assertEquals(size,oldFileSize);
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileOutputStream fileOutputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(fileUnderTest)) {
        fileOutputStream.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;Addition&quot;&lt;/span&gt;.getBytes());
        fileOutputStream.flush();
    }
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; newFileSize = fileUnderTest.length();
    assertFalse(newFileSize == oldFileSize);
    file.refresh();
    assertEquals(newFileSize,file.getContent().getSize());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I am not sure I can sum up the issues. &#160;But the caching vs. getting current data is broken fundamentally.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16371497" author="ottobackwards" created="Wed, 21 Feb 2018 14:44:51 +0000"  >&lt;p&gt;For the size() changes : there is no way to &apos;clear&apos; content once it is retrieved. &#160;So once it is read it will not be read again. &#160;Even if you close, the fileInfo is retrieved from the parent and it is cached and we get the size from that&lt;/p&gt;

&lt;p&gt;Not being able to invalidate the parent cache ( when you want to react to external events ) is an issue here.&lt;/p&gt;

&lt;p&gt;Maybe there needs to be an explicit &apos;Poll&apos; api for this type of operation?&lt;/p&gt;

&lt;p&gt;Or a &quot;DecoratedPollingFileObject&quot; or something&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16371500" author="ottobackwards" created="Wed, 21 Feb 2018 14:45:55 +0000"  >&lt;p&gt;Also, closing a FTPFileObject doesn&apos;t invalidate it&apos;s cached FTPFile ( fileInfo), since it doesn&apos;t override close. Even if you do override close, you just get the cached from the parent again.&lt;/p&gt;</comment>
                            <comment id="16375052" author="garydgregory" created="Fri, 23 Feb 2018 22:41:09 +0000"  >&lt;p&gt;There are a lot of good questions here. TBH, I have not been in the depth of VFS for a few months now, and I cannot take the time to dig in FTP ATM.&lt;/p&gt;

&lt;p&gt;If there are specific patches for specific bugs, let&apos;s get these in ASAP, with unit tests of course &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;It&apos;s too easy to get regression bugs at this point.&lt;/p&gt;</comment>
                            <comment id="16375094" author="ottobackwards" created="Fri, 23 Feb 2018 23:11:10 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
DefaultFileMonitor fm = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultFileMonitor(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileListener() {

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void fileDeleted(FileChangeEvent event) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(event.getFile().getName().getPath()+&lt;span class=&quot;code-quote&quot;&gt;&quot; Deleted.&quot;&lt;/span&gt;);
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void fileCreated(FileChangeEvent event) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(event.getFile().getName().getPath()+&lt;span class=&quot;code-quote&quot;&gt;&quot; Created.&quot;&lt;/span&gt;);
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void fileChanged(FileChangeEvent event) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(event.getFile().getName().getPath()+&lt;span class=&quot;code-quote&quot;&gt;&quot; Changed.&quot;&lt;/span&gt;);
    }
});
fm.setRecursive(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
fm.addFile(file);
fm.start();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This code is the correct method, I &lt;b&gt;think,&lt;/b&gt;&#160;to monitor files the way you want to.&lt;/p&gt;

&lt;p&gt;This works with Local files, &lt;b&gt;and&lt;/b&gt; with SFTP, but not with FTP. Those where the only three I tried.&lt;/p&gt;

&lt;p&gt;I think that accessing the file content may also have something to do with this&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16375097" author="ottobackwards" created="Fri, 23 Feb 2018 23:14:53 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;. &#160;I&apos;m trying to walk through this an play catch up ( as you can tell by my suggesting that there needed to be a file monitor like thing, without knowing there is one already ).&lt;/p&gt;

&lt;p&gt;I&apos;ll keep looking through it when I may.&lt;/p&gt;

&lt;p&gt;I think that the changes to speed up ftp ( diff sftp v. ftp file objects ) and never resetting the content have something todo with it.&lt;/p&gt;

&lt;p&gt;I&apos;m first time through here, so I&apos;m going to look a little stupid. &#160;Stay with me.&lt;/p&gt;</comment>
                            <comment id="16375098" author="ottobackwards" created="Fri, 23 Feb 2018 23:15:48 +0000"  >&lt;p&gt;I don&apos;t know for example if the bug is as stated, or that the FileMonitor pattern should be used, and that THAT doesn&apos;t work...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1velr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391585</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-524] A URI with an IPv6 address can&apos;t be parsed correctly</title>
                <link>https://issues.apache.org/jira/browse/VFS-524</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I am using apache commons vfs2 to read and download file in ipv6 enviroment, but it seems can&apos;t parse out ipv6 address correctly&lt;br/&gt;
The URI is just like:&lt;br/&gt;
&lt;a href=&quot;ftp://[2002:9ba:b4e:6:a052:5792:c0c9:2330]/test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ftp://[2002:9ba:b4e:6:a052:5792:c0c9:2330]/test&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The error message:&lt;br/&gt;
Invalid absolute URI &quot;ftp://[2002:9ba:b4e:6:a052:5792:c0c9:2330]/test&quot;.&lt;/p&gt;

&lt;p&gt;Caused by : Expecting / to follow the hostname in URI &quot;ftp://[2002:9ba:b4e:6:a052:5792:c0c9:2330]/test&quot;.&lt;/p&gt;

&lt;p&gt;Deep into the code, I found the root cause is that HostFileNameParser&apos;s extractHostName can&apos;t parse out the host name correctly&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/**
     * Extracts the hostname from a URI.  The scheme://userinfo@ part has
     * been removed.
     */
    protected String extractHostName(final StringBuilder name)
    {
        final int maxlen = name.length();
        int pos = 0;
        for (; pos &amp;lt; maxlen; pos++)
        {
            final char ch = name.charAt(pos);
            if (ch == &apos;/&apos; || ch == &apos;;&apos; || ch == &apos;?&apos; || ch == &apos;:&apos;
                || ch == &apos;@&apos; || ch == &apos;&amp;amp;&apos; || ch == &apos;=&apos; || ch == &apos;+&apos;
                || ch == &apos;$&apos; || ch == &apos;,&apos;)
            {
                break;
            }
        }
        if (pos == 0)
        {
            return null;
        }

        final String hostname = name.substring(0, pos);
        name.delete(0, pos);
        return hostname;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From the code, we are able to know it will  parse out the host name by colon, but for ipv6, it will get a wrong host name&lt;/p&gt;

&lt;p&gt;There is the same problem with the other protocol like sftp and cifs&lt;/p&gt;</description>
                <environment></environment>
        <key id="12712738">VFS-524</key>
            <summary>A URI with an IPv6 address can&apos;t be parsed correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zhihaoli">Alex</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 May 2014 02:04:13 +0000</created>
                <updated>Wed, 25 Oct 2023 11:03:41 +0000</updated>
                            <resolved>Wed, 25 Oct 2023 11:03:01 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.10.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13991482" author="zhihaoli" created="Wed, 7 May 2014 02:19:38 +0000"  >&lt;p&gt;I make some fix in order to the method into parse out ipv6, for ftp, it works well&lt;br/&gt;
So could I fix  FtpFileNameParser(SftpFileNameParser, SmbFileNameParser ) to  overrides the extractHostName of HostFileNameParser? I am not sure whether it will bring in some problems else?&lt;br/&gt;
Thanks a lot&lt;/p&gt;
</comment>
                            <comment id="14494042" author="fiveo" created="Tue, 14 Apr 2015 12:29:34 +0000"  >&lt;p&gt;The  RFC 3986 &lt;a href=&quot;http://tools.ietf.org/html/rfc3986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RFC 3986&lt;/a&gt;  defines the usage of IPv6 adresses inside of brackets []. &lt;/p&gt;

&lt;p&gt;The following change of the method adds the extraction of IPv6 adresses:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;HostFileNameParser.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; extractHostName(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StringBuilder name)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maxlen = name.length();
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; startPos = 0;
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; endPos = 0;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(name.charAt(0) == &lt;span class=&quot;code-quote&quot;&gt;&apos;[&apos;&lt;/span&gt;){
            &lt;span class=&quot;code-comment&quot;&gt;//RFC-3986 IPv6address  
&lt;/span&gt;            startPos = 1;
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (; endPos &amp;lt; maxlen; endPos++)
            {            
                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; ch = name.charAt(endPos);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;]&apos;&lt;/span&gt;)
                {
                    &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                }
            }     
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (; endPos &amp;lt; maxlen; endPos++)
            {            
                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; ch = name.charAt(endPos);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;;&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;?&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;:&apos;&lt;/span&gt;
                    || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;@&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;amp;&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;=&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;+&apos;&lt;/span&gt;
                    || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;$&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;,&apos;&lt;/span&gt;)
                {
                    &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                }
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (endPos == 0)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; hostname = name.substring(startPos, endPos);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(name.charAt(0) == &lt;span class=&quot;code-quote&quot;&gt;&apos;[&apos;&lt;/span&gt;){
            &lt;span class=&quot;code-comment&quot;&gt;//RFC-3986 IPv6address remove &lt;span class=&quot;code-quote&quot;&gt;&apos;]&apos;&lt;/span&gt; at the end
&lt;/span&gt;            name.delete(0, endPos+1);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        {
            name.delete(0, endPos);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hostname;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please add this feature of supporting IPv6 to the SVN or schedule this feature for a future release.&lt;/p&gt;</comment>
                            <comment id="14876467" author="simon04" created="Fri, 18 Sep 2015 21:27:28 +0000"  >&lt;p&gt;Updated patch to not break existing tests in &lt;tt&gt;GenericFileNameTestCase&lt;/tt&gt;. Plus, added one IPv6 test from the description.&lt;/p&gt;</comment>
                            <comment id="14905278" author="b.eckenfels" created="Wed, 23 Sep 2015 21:17:00 +0000"  >&lt;p&gt;I think parsing is only half the work, the URLs should also be created with []. This testcase here should work (using a named interface scope and a non-default port):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        name = (GenericFileName) urlParser.parseUri(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//[2002:9ba:b4e:6:a052:5792:c0c9:2330%em4]:2222/test&quot;&lt;/span&gt;);
&lt;/span&gt;        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;2002:9ba:b4e:6:a052:5792:c0c9:2330%em4&quot;&lt;/span&gt;, name.getHostName());
        assertEquals(2222, name.getPort());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//[2002:9ba:b4e:6:a052:5792:c0c9:2330%em4]:2222/test&quot;&lt;/span&gt;, name.getURI());&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;getURI() could skip the brackets when it does not need port or scope, but I think adding it in all cases is better. I think it should not be returned by getHostName() (even when it makes the thing more complicated).&lt;/p&gt;</comment>
                            <comment id="14906921" author="simon04" created="Thu, 24 Sep 2015 20:10:56 +0000"  >&lt;p&gt;v3 also includes the brackets in &lt;tt&gt;name.getURI()&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16195950" author="sod" created="Sun, 8 Oct 2017 00:12:27 +0000"  >&lt;p&gt;Hi.&lt;br/&gt;
Version 2.2.1 &amp;amp; 2.2.2 did not list this issue as fixed in the readme. Is there an ETA? thanks&lt;/p&gt;</comment>
                            <comment id="16196175" author="garydgregory" created="Sun, 8 Oct 2017 15:43:39 +0000"  >&lt;p&gt;don&apos;t set version until the fix is in.&lt;/p&gt;</comment>
                            <comment id="16196179" author="garydgregory" created="Sun, 8 Oct 2017 15:45:29 +0000"  >&lt;p&gt;How about a fresh PR on Githubwith tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I just pushed out version 2.2 but there is no reason not to have a 2.2.1 around the corner.&lt;/p&gt;</comment>
                            <comment id="16197650" author="sod" created="Mon, 9 Oct 2017 20:26:46 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; That will be great.&lt;/p&gt;</comment>
                            <comment id="16197676" author="garydgregory" created="Mon, 9 Oct 2017 20:47:05 +0000"  >&lt;p&gt;I just need a fresh PR &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16725672" author="urkens_jp" created="Thu, 20 Dec 2018 08:51:21 +0000"  >&lt;p&gt;I am trying to setup an FTP connection to the IPv6 loopback address using commons-vfs2 version 2.2 and commons-net v3.6.&lt;/p&gt;

&lt;p&gt;I tried following URI&apos;S: [ftp://[::1]|ftp://[:1]] and [ftp://[0:0:0:0:0:0:0:1]|ftp://[::1]/] but I am allways getting the error:&lt;/p&gt;

&lt;p&gt;&#160;org.apache.commons.vfs2.FileSystemException: Invalid absolute URI &quot;[ftp://[0:0:0:0:0:0:0:1]|ftp://[::1]/]&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Isn&apos;t the fix present in v2.2 or am I missing something here?&lt;/p&gt;</comment>
                            <comment id="16725698" author="urkens_jp" created="Thu, 20 Dec 2018 09:16:39 +0000"  >&lt;p&gt;Ok, checked the v2.2 code and the fix isn&apos;t yet present.&lt;/p&gt;</comment>
                            <comment id="17779458" author="garydgregory" created="Wed, 25 Oct 2023 11:03:01 +0000"  >&lt;p&gt;In git master, thank you &lt;a href=&quot;https://github.com/fyudanov&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Fedor Yudanov&lt;/a&gt; for &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/438&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12761198" name="VFS-524-v2.patch" size="3442" author="simon04" created="Fri, 18 Sep 2015 21:27:28 +0000"/>
                            <attachment id="12762223" name="VFS-524-v3.patch" size="3028" author="simon04" created="Thu, 24 Sep 2015 20:10:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vcp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-523] HdfsFileObject equals method returns true for the same path on different hosts</title>
                <link>https://issues.apache.org/jira/browse/VFS-523</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;If I construct two HdfsFileObject referring to the same path (for instance, &quot;/&quot;) but on different hosts, the &quot;equals&quot; method will consider them equal (and the &quot;hashCode&quot; method will give the same results for both) even though they clearly refer to different files since they are on different hosts.&lt;/p&gt;

&lt;p&gt;These two methods should also factor in the HdfsFileSystem to the equation.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7&lt;/p&gt;</environment>
        <key id="12712452">VFS-523</key>
            <summary>HdfsFileObject equals method returns true for the same path on different hosts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="rwhitcomb">Roger Lee Whitcomb</reporter>
                        <labels>
                            <label>hdfs</label>
                    </labels>
                <created>Mon, 5 May 2014 23:13:26 +0000</created>
                <updated>Thu, 19 May 2016 18:26:13 +0000</updated>
                            <resolved>Sun, 30 Nov 2014 09:22:56 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13990090" author="rwhitcomb" created="Mon, 5 May 2014 23:34:33 +0000"  >&lt;p&gt;The &quot;hdfsequal&quot; diff/patch file fixes the problem for me.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13997730" author="rwhitcomb" created="Wed, 14 May 2014 16:34:16 +0000"  >&lt;p&gt;Anyone able/willing to commit this patch? We are using it successfully (built local copy from head revs from SVN)....&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="13998837" author="garydgregory" created="Thu, 15 May 2014 15:21:59 +0000"  >&lt;p&gt;Could you please provide a unit test with your patch?&lt;/p&gt;</comment>
                            <comment id="14000273" author="b.eckenfels" created="Fri, 16 May 2014 20:37:36 +0000"  >&lt;p&gt;BTW: there is also a test which tests if equal works for the positive case. I guess the negative case would be a bit more complicated if you actually want to test a second hdfs instance.&lt;/p&gt;

&lt;p&gt;Anyway, this change here make the test a bit more complete:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testEquals() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
    {
        &lt;span class=&quot;code-comment&quot;&gt;// Create test file (and check parent was created)
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject dir = manager.resolveFile(TEST_DIR1);
        Assert.assertNotNull(dir);
        Assert.assertFalse(dir.exists());
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject file1 = createTestFile(hdfs);
        Assert.assertTrue(file1.exists());
        Assert.assertTrue(dir.exists());

        &lt;span class=&quot;code-comment&quot;&gt;// Get a handle to the same file and ensure it is equal
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject file2 = manager.resolveFile(TEST_FILE1);
        Assert.assertEquals(file1, file2);

        &lt;span class=&quot;code-comment&quot;&gt;// Ensure different files on same filesystem are not equal
&lt;/span&gt;        Assert.assertNotEquals(dir, file1);
        Assert.assertNotEquals(dir, file2);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14000470" author="b.eckenfels" created="Fri, 16 May 2014 23:09:47 +0000"  >&lt;p&gt;the `equals` uses `path.equals()` but the `hashcode()` uses `path.getName().toString().hashCode()` (even before the patch). Do we want to unify this as well?&lt;/p&gt;

&lt;p&gt;BTW: I would merge the patch, I have verified that I can actually test Hdfs (and I can on Windows, see &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-526&quot; title=&quot;No Hdfs testing on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-526&quot;&gt;&lt;del&gt;VFS-526&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="14000582" author="b.eckenfels" created="Sat, 17 May 2014 01:04:10 +0000"  >&lt;p&gt;I just checked the other FileObject implementations, none of them overwrites the basic equals/hashcode implementation. I wonder if a (better/other) solution would be to remove the implementations?&lt;/p&gt;

&lt;p&gt;Using same object compare and system hashcode would work in most situations where the caching is used (only NullFilesCache warn about producing multiple instances for the same resolve path).&lt;/p&gt;

&lt;p&gt;If we think this is not enough, then maybe it would be better to add hashcode+equals to the AbstractFileObject where it would compare the fileName and the filesystem (instance). The filesystem instance is used in AbstractFileObject#canRenameTo() so this is a common limitation.&lt;/p&gt;</comment>
                            <comment id="14000858" author="b.eckenfels" created="Sat, 17 May 2014 20:07:42 +0000"  >&lt;p&gt;I propose to commit the removal of equals/hashcode for this implementation. We can open another bug to think about adding a better abstract implementation. However the better defined semantic is (do)isSameFile which is also strangely implenmted for Hdfs. Do you think your usecase actually needs a &quot;is equal&quot; assertion (or does it only care about &quot;not equal&quot; as reported).&lt;/p&gt;</comment>
                            <comment id="14000860" author="b.eckenfels" created="Sat, 17 May 2014 20:14:18 +0000"  >&lt;p&gt;Could you try this patch against the Trunk, Roger?&lt;/p&gt;</comment>
                            <comment id="14001000" author="rwhitcomb" created="Sun, 18 May 2014 05:16:52 +0000"  >&lt;p&gt;Hi Bernd,  &lt;br/&gt;
The code I&apos;m using is in the Apache Pivot project in the VFSFileBrowser and related classes.  The failure I noticed, specifically, was that two HdfsFileObjects had the same path on different file systems, and they had the &quot;equals&quot; method return true.  I believe the code is consistently calling &quot;equals&quot; for these types of comparisons, but I don&apos;t know if all the tests are !equals or just equals.  I am a little reluctant to say that using just Object.equals would be fine, because (for instance) I would expect that an existing object pointing to a certain directory on a given filesystem should be &quot;equal&quot; to a newly created object pointing to that same directory on the same filesystem, which Object.equals would not return true for (so, I expect this to work similarly to String.equals where the method returns true if the content is the same, not merely when the objects are exactly the same object).&lt;/p&gt;

&lt;p&gt;So, I will test your latest patch as soon as I return to the office on Tuesday (unfortunately I am not in a position to try it until then).&lt;/p&gt;

&lt;p&gt;Thank you for the investigation on this.&lt;br/&gt;
~Roger&lt;/p&gt;</comment>
                            <comment id="14001003" author="rwhitcomb" created="Sun, 18 May 2014 05:26:25 +0000"  >&lt;p&gt;@Gary, I will certainly work on a unit test for this problem, although I expect to have some difficulty, as Bernd noted, because my actual fail case was using two different HDFS file systems, which I don&apos;t see the current tests being setup for.&lt;/p&gt;</comment>
                            <comment id="14229051" author="b.eckenfels" created="Sun, 30 Nov 2014 09:22:56 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1642530&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1642530&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I applied the unify-hdfs-quals.patch, the equals unit test was already commited.&lt;/p&gt;</comment>
                            <comment id="14250289" author="rwhitcomb" created="Wed, 17 Dec 2014 18:42:09 +0000"  >&lt;p&gt;I&apos;ve just now (sorry for the LONG delay) tested head revs (with the &quot;unify-hdfs-equals.patch&quot;) in our application and everything seems to be working as expected.  I guess I&apos;m still a little skeptical that this approach is solid, though, since (I think) we&apos;re relying on the caching mechanism in order to always get the same object so the default Object.equals works right.  Although, for the moment I don&apos;t see any problems in actual operation.  &lt;/p&gt;</comment>
                            <comment id="14250899" author="b.eckenfels" created="Thu, 18 Dec 2014 00:41:57 +0000"  >&lt;p&gt;Thanks Roger. I agree that we should have a closer look at the instance semantics of FileObjects - for all filesystems. I opened an Task for that.&lt;/p&gt;</comment>
                            <comment id="15291822" author="b.eckenfels" created="Thu, 19 May 2016 18:26:13 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12762445">VFS-550</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12714866">VFS-526</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12643452" name="hdfsequal.diff" size="1016" author="rwhitcomb" created="Mon, 5 May 2014 23:34:33 +0000"/>
                            <attachment id="12645422" name="unify-hdfs-equals.patch" size="2131" author="b.eckenfels" created="Sat, 17 May 2014 20:14:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390768</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vb1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391008</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-521] [RAM][tests] Failure with Java 8</title>
                <link>https://issues.apache.org/jira/browse/VFS-521</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When running the unit tests the RAM provider custom tests fails only with Java 8 (build and runtime):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tests run: 9, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.019 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.vfs2.provider.ram.test.CustomRamProviderTest
testSmallFS(org.apache.commons.vfs2.provider.ram.test.CustomRamProviderTest)  Time elapsed: 0.012 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.IllegalArgumentException: Self-suppression not permitted
        at org.apache.commons.vfs2.provider.ram.RamFileObject.resize(RamFileObject.java:277)
        at org.apache.commons.vfs2.provider.ram.RamFileOutputStream.write(RamFileOutputStream.java:68)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
        at org.apache.commons.vfs2.util.MonitorOutputStream.flush(MonitorOutputStream.java:114)
        at java.io.FilterOutputStream.close(FilterOutputStream.java:158)
        at org.apache.commons.vfs2.util.MonitorOutputStream.close(MonitorOutputStream.java:54)
        at org.apache.commons.vfs2.provider.DefaultFileContent$FileContentOutputStream.close(DefaultFileContent.java:711)
        at org.apache.commons.vfs2.provider.ram.test.CustomRamProviderTest.testSmallFS(CustomRamProviderTest.java:264)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Win64 with Maven 3.0.5 and Java 1.8.0_05&lt;/p&gt;</environment>
        <key id="12712056">VFS-521</key>
            <summary>[RAM][tests] Failure with Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>java8</label>
                            <label>tests</label>
                    </labels>
                <created>Fri, 2 May 2014 22:08:11 +0000</created>
                <updated>Thu, 19 May 2016 18:25:43 +0000</updated>
                            <resolved>Mon, 3 Nov 2014 00:27:31 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13988334" author="b.eckenfels" created="Fri, 2 May 2014 22:16:41 +0000"  >&lt;p&gt;This seems to be a java8 thing. The test actually expexts an IOException, and in the above stacktrace location it is actually thrown:&lt;/p&gt;

&lt;p&gt;    org.apache.commons.vfs2.provider.ram.RamFileObject.resize(RamFileObject.java:277)&lt;/p&gt;

&lt;p&gt;But the runtime seems to wrap this in an IlelgalArgumentException. Internez say it is related to try with resource (which can collect suppressed exceptions), however we don&apos;t use that (at least not in the VFS code). Maybe its a test test-framework or JUnit problem?&lt;/p&gt;</comment>
                            <comment id="13988355" author="b.eckenfels" created="Fri, 2 May 2014 22:32:35 +0000"  >&lt;p&gt;The whole stacktrace is more informative, it looks like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: Self-suppression not permitted
	at java.lang.Throwable.addSuppressed(Throwable.java:1043)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:159)
	at org.apache.commons.vfs2.util.MonitorOutputStream.close(MonitorOutputStream.java:54)
	at org.apache.commons.vfs2.provider.DefaultFileContent$FileContentOutputStream.close(DefaultFileContent.java:710)
	at org.apache.commons.vfs2.provider.ram.test.CustomRamProviderTest.testSmallFS(CustomRamProviderTest.java:264)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.io.IOException: FileSystem capacity (10) exceeded.
	at org.apache.commons.vfs2.provider.ram.RamFileObject.resize(RamFileObject.java:277)
	at org.apache.commons.vfs2.provider.ram.RamFileOutputStream.write(RamFileOutputStream.java:68)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.commons.vfs2.util.MonitorOutputStream.flush(MonitorOutputStream.java:114)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:158)
	... 28 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13988390" author="b.eckenfels" created="Fri, 2 May 2014 23:01:35 +0000"  >&lt;p&gt;The above patch does fix the problem for Java 8 and it also avoids using the unsafe super.close() method. What do you think? (it does not use the suppressed warnings feature as this is Java 5 code).&lt;/p&gt;</comment>
                            <comment id="13988652" author="ysb33r" created="Sat, 3 May 2014 11:39:34 +0000"  >&lt;p&gt;It works for me and does not seem do have an adverse affect in my downstream libraries that depend on it.&lt;/p&gt;</comment>
                            <comment id="14194129" author="b.eckenfels" created="Mon, 3 Nov 2014 00:27:31 +0000"  >&lt;p&gt;Have commited a fix, similiar to the fos.patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1636224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1636224&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15291740" author="b.eckenfels" created="Thu, 19 May 2016 18:25:43 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12643150" name="fos.patch" size="760" author="b.eckenfels" created="Fri, 2 May 2014 23:01:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v8pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[VFS-520] Javadoc errors with Java 8 defaults</title>
                <link>https://issues.apache.org/jira/browse/VFS-520</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When using Java 8 to build VFS various new Javadoc warnings and errors show up.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12711632">VFS-520</key>
            <summary>Javadoc errors with Java 8 defaults</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="b.eckenfels">Bernd Eckenfels</assignee>
                                    <reporter username="b.eckenfels">Bernd Eckenfels</reporter>
                        <labels>
                            <label>java8</label>
                            <label>javadoc</label>
                    </labels>
                <created>Wed, 30 Apr 2014 23:36:13 +0000</created>
                <updated>Thu, 19 May 2016 18:26:19 +0000</updated>
                            <resolved>Thu, 1 May 2014 01:12:51 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13986276" author="b.eckenfels" created="Thu, 1 May 2014 01:12:09 +0000"  >&lt;p&gt;Not sure if/when the SVN commit shows up, but I have commited fixes which make javadoc 8 no longer fail (there are still lots of warnings). I tested it with running `JAVA_HOME=.../jdk1.8.0 mvn -U clean javadoc:javadoc` in the project dir and reviewed some generated javadoc pages by hand.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/commit/294f0d5783e4abb5f85b69ccc861f8d1f48414a0.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/commit/294f0d5783e4abb5f85b69ccc861f8d1f48414a0.patch&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15291839" author="b.eckenfels" created="Thu, 19 May 2016 18:26:19 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389953</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v633:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390194</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>