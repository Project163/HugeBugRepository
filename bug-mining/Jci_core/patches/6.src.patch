diff --git a/core/pom.xml b/core/pom.xml
index 6d75eb4..fe84ddf 100644
--- a/core/pom.xml
+++ b/core/pom.xml
@@ -60,7 +60,7 @@
         <dependency>
             <groupId>asm</groupId>
             <artifactId>asm</artifactId>
-            <version>2.2.1</version>
+            <version>3.1</version>
             <scope>test</scope>
         </dependency>
     </dependencies>
diff --git a/core/src/test/java/org/apache/commons/jci/classes/ExtendedDump.java b/core/src/test/java/org/apache/commons/jci/classes/ExtendedDump.java
index 4177837..1f6a555 100644
--- a/core/src/test/java/org/apache/commons/jci/classes/ExtendedDump.java
+++ b/core/src/test/java/org/apache/commons/jci/classes/ExtendedDump.java
@@ -27,7 +27,7 @@ public class ExtendedDump implements Opcodes {
 
     public static byte[] dump() throws Exception {
 
-        ClassWriter cw = new ClassWriter(true);
+        ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS);
         MethodVisitor mv;
 
         cw.visit(V1_4, ACC_PUBLIC + ACC_SUPER, "jci/Extended", null, "jci/Simple", null);
diff --git a/core/src/test/java/org/apache/commons/jci/classes/SimpleDump.java b/core/src/test/java/org/apache/commons/jci/classes/SimpleDump.java
index 5e020c1..687c143 100644
--- a/core/src/test/java/org/apache/commons/jci/classes/SimpleDump.java
+++ b/core/src/test/java/org/apache/commons/jci/classes/SimpleDump.java
@@ -26,7 +26,7 @@ public class SimpleDump implements Opcodes {
 
     public static byte[] dump( final String to ) throws Exception {
 
-        ClassWriter cw = new ClassWriter(true);
+        ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS);
         MethodVisitor mv;
 
         cw.visit(V1_4, ACC_PUBLIC + ACC_SUPER, "jci/Simple", null, "java/lang/Object", null);
