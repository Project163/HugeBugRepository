diff --git a/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java b/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java
index 2534f1c3d..08de93a55 100644
--- a/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java
+++ b/tika-parsers/src/main/java/org/apache/tika/parser/txt/CharsetDetector.java
@@ -349,6 +349,10 @@ public class CharsetDetector {
      * @param encoding - name of character encoding
      */
     private void setCanonicalDeclaredEncoding(String encoding) {
+        if ((encoding == null) || encoding.isEmpty()) {
+            return;
+        }
+        
         Charset cs = Charset.forName(encoding);
         if (cs != null) {
             fDeclaredEncoding = cs.name();
diff --git a/tika-parsers/src/test/java/org/apache/tika/parser/txt/CharsetDetectorTest.java b/tika-parsers/src/test/java/org/apache/tika/parser/txt/CharsetDetectorTest.java
index 48d6e2f85..3446d0321 100644
--- a/tika-parsers/src/test/java/org/apache/tika/parser/txt/CharsetDetectorTest.java
+++ b/tika-parsers/src/test/java/org/apache/tika/parser/txt/CharsetDetectorTest.java
@@ -22,6 +22,7 @@ import static org.junit.Assert.assertTrue;
 
 import java.io.IOException;
 import java.io.InputStream;
+import java.io.Reader;
 
 public class CharsetDetectorTest {
   
@@ -46,4 +47,25 @@ public class CharsetDetectorTest {
       in.close();
     }
   }
+  
+  /* https://issues.apache.org/jira/browse/TIKA-1248
+   * Verify empty or null declaredEncoding doesn't cause an exception
+   * 
+   */
+  
+  @Test
+  public void testEmptyOrNullDeclaredCharset() throws IOException {
+    InputStream in = CharsetDetectorTest.class.getResourceAsStream( "/test-documents/resume.html" );
+      
+    try {
+      CharsetDetector detector = new CharsetDetector();
+      Reader reader = detector.getReader(in, null);
+      assertTrue(reader.ready());
+      
+      reader = detector.getReader(in, "");
+      assertTrue(reader.ready());
+    } finally {
+      in.close();
+    }
+  }
 }
