<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:38:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22SLING%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="2200" end="2400" total="4707"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[SLING-5753] Use.init() not invoked for Java Use object which is also a Sling Model</title>
                <link>https://issues.apache.org/jira/browse/SLING-5753</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;,&lt;br/&gt;
In the situation where I start with a Java Use object and later decide to use some convenient features of Sling Models, I have the surprise to experience that as soon as my Java Use object gets the @Model annotation its init() method is not invoked any more.&lt;br/&gt;
I can see no good reason for this, so I created a patch to fix it.&lt;br/&gt;
Please let me know what you think.&lt;br/&gt;
Thank you, Levente&lt;/p&gt;</description>
                <environment></environment>
        <key id="12974184">SLING-5753</key>
            <summary>Use.init() not invoked for Java Use object which is also a Sling Model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="lsantha">Levente Santha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 May 2016 10:30:21 +0000</created>
                <updated>Thu, 7 Jul 2016 16:19:29 +0000</updated>
                            <resolved>Thu, 7 Jul 2016 16:19:29 +0000</resolved>
                                    <version>Scripting Sightly Models Use Provider 1.0.0</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15307777" author="kwin" created="Tue, 31 May 2016 14:11:44 +0000"  >&lt;p&gt;IMHO you should either use the Use interface or Sling Models but not mix the two approaches. Why can&apos;t you use the postcontruct from Sling Models for doing the initialization?&lt;/p&gt;</comment>
                            <comment id="15307787" author="lsantha" created="Tue, 31 May 2016 14:19:46 +0000"  >&lt;p&gt;Is there any other conflict between the two approaches why mixing them would be discouraged (beyond the problem described here)?&lt;/p&gt;</comment>
                            <comment id="15307794" author="kwin" created="Tue, 31 May 2016 14:24:42 +0000"  >&lt;p&gt;It just reduces flexibililty of those models (because they can only be used with Sightly and this Use Provider). Also I don&apos;t see any reason why we should support that.&lt;/p&gt;</comment>
                            <comment id="15307839" author="lsantha" created="Tue, 31 May 2016 14:51:28 +0000"  >&lt;p&gt;1. If a Sling Model class implements the Use interface or extends a class implementing it, that certainly means that the particular model would be supporting a Sightly script. This actually extends the domain of application of Sling Models as a tool while providing support for a domain not covered so far.&lt;br/&gt;
2. If I look at the design goals of Sling Models the anomaly described here clearly goes against some of them.&lt;br/&gt;
3. It&apos;s quite intrusive behavior to add an annotation and as a result have some functionality disabled in my class. I want to enhance my classes not to reduce them and then work on rewriting lost functionality. (It might also violate the JLS &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.) &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.7&lt;/p&gt;</comment>
                            <comment id="15307901" author="justinedelson" created="Tue, 31 May 2016 15:19:21 +0000"  >&lt;p&gt;+1 to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&apos;s comments. Use @PostConstruct.&lt;/p&gt;</comment>
                            <comment id="15307916" author="vladb" created="Tue, 31 May 2016 15:27:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lsantha&quot; class=&quot;user-hover&quot; rel=&quot;lsantha&quot;&gt;lsantha&lt;/a&gt;, I also believe any hybrid classes (that want to use both Sling Models and Use POJOs APIs) should handle the two alternate initialization paths themselves.&lt;/p&gt;</comment>
                            <comment id="15308000" author="lsantha" created="Tue, 31 May 2016 16:05:59 +0000"  >&lt;p&gt;Thank you guys for your feedback. &lt;br/&gt;
The point I wanted to make here was to provide a simple transition path for a Java Use API based solution involving class hierarchies towards Sling Models.&lt;br/&gt;
I can certainly use @PostConstruct (or rewrite code using it) but that will not make Sling Models interoperable with Use objects. Also the documentation could make this clear.&lt;/p&gt;

</comment>
                            <comment id="15308250" author="justinedelson" created="Tue, 31 May 2016 18:07:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lsantha&quot; class=&quot;user-hover&quot; rel=&quot;lsantha&quot;&gt;lsantha&lt;/a&gt; where would you suggest this be documented?&lt;/p&gt;</comment>
                            <comment id="15308301" author="jshurmer" created="Tue, 31 May 2016 18:30:53 +0000"  >&lt;p&gt;I&apos;m having trouble understanding why this would be a bad idea. They only point I can see is that a Model which also implements the Use api is less flexible, but seeing as how this change is specifically in the Sightly scripting bundle I don&apos;t see how that is a problem. If someone wants to have an object which is a Model and is also ran through the Sightly Use API why shouldn&apos;t they? &lt;/p&gt;

&lt;p&gt;I see this adding some nice functionality which help two pieces of the Sling world work better together.&lt;/p&gt;</comment>
                            <comment id="15308307" author="justinedelson" created="Tue, 31 May 2016 18:35:53 +0000"  >&lt;p&gt;Aside from this being a slippery slope, my larger concern is that it creates an inconsistency between creating the model through Sightly and any other way. What would happen if this patch was applied is that the init method would get called &lt;b&gt;only&lt;/b&gt; when creating the model through Sightly. Doing it from Java code or a JSP or an ECMAScript and the init method wouldn&apos;t get called. &lt;/p&gt;</comment>
                            <comment id="15308322" author="jshurmer" created="Tue, 31 May 2016 18:42:49 +0000"  >&lt;p&gt;I see. So the concern is that developers would assume that the calling of the init() method is part of the Models stuff in general and try to use their &quot;use&quot; models in other contexts... I can understand that concern.&lt;/p&gt;

&lt;p&gt;However, should that stop sightly from doing this? If a developer understand the Use API and choose to use it they seem to be keen on using that object in Sightly only... whether it&apos;s a Sling Model or not... the fact that they then want to use Sling Models as well is separate from that.  In other words, I view this as being about the Use API supporting Sling Models, rather than Sling Models supporting the Use API...&lt;/p&gt;</comment>
                            <comment id="15308329" author="jshurmer" created="Tue, 31 May 2016 18:46:03 +0000"  >&lt;p&gt;I&apos;m just adding my own opinion to the conversation though, I totally defer to others who have more knowledge of sightly/sling projects for whether this &quot;belongs&quot; in here or not.&lt;/p&gt;</comment>
                            <comment id="15366344" author="radu.cotescu" created="Thu, 7 Jul 2016 16:19:17 +0000"  >&lt;p&gt;I have to agree with Justin&apos;s comment [0]: implementing this enhancement will lead to inconsistency regarding Sling Models instantiation depending on the consumer. Since anything that can be performed in &lt;tt&gt;Use#init(javax.script.Bindings)&lt;/tt&gt; can be accomplished through injection annotations and / or &lt;tt&gt;@PostConstruct&lt;/tt&gt; I don&apos;t see a compelling reason for applying the attached patch.&lt;/p&gt;

&lt;p&gt;[0] - &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5753?focusedCommentId=15308307&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15308307&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5753?focusedCommentId=15308307&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15308307&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12807109" name="SLING_5753.patch" size="3366" author="lsantha" created="Tue, 31 May 2016 10:32:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yqd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5752] SimpleHttpDistributionTransport does not leverage configured scheme from distribution endpoint</title>
                <link>https://issues.apache.org/jira/browse/SLING-5752</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;SimpleHttpDistributionTransport&lt;/tt&gt; currently does not allow to communicate with a distribution endpoint using &lt;tt&gt;https://&lt;/tt&gt; scheme. The root cause is that the method &lt;tt&gt;org.apache.sling.distribution.transport.impl.SimpleHttpDistributionTransport#authenticate&lt;/tt&gt; does hardcode the scheme instead of setting it from the configured &lt;tt&gt;distributionEndpoint&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12973998">SLING-5752</key>
            <summary>SimpleHttpDistributionTransport does not leverage configured scheme from distribution endpoint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 May 2016 14:51:11 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:52 +0000</updated>
                            <resolved>Tue, 31 May 2016 08:08:19 +0000</resolved>
                                    <version>Content Distribution Core 0.1.16</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15306766" author="githubbot" created="Mon, 30 May 2016 15:36:24 +0000"  >&lt;p&gt;GitHub user tmaret opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/144&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5752&quot; title=&quot;SimpleHttpDistributionTransport does not leverage configured scheme from distribution endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5752&quot;&gt;&lt;del&gt;SLING-5752&lt;/del&gt;&lt;/a&gt; - SimpleHttpDistributionTransport does not leverage configured scheme from distribution endpoint&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Pass scheme from distribution endpoint when building Executor&apos;s HttpHost&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tmaret/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmaret/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5752&quot; title=&quot;SimpleHttpDistributionTransport does not leverage configured scheme from distribution endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5752&quot;&gt;&lt;del&gt;SLING-5752&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/144.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/144.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #144&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e876de40c51cbcbc2f0aac41f3e0607b7c0c6ca2&lt;br/&gt;
Author: tmaret &amp;lt;tmaret@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-05-30T15:34:30Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5752&quot; title=&quot;SimpleHttpDistributionTransport does not leverage configured scheme from distribution endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5752&quot;&gt;&lt;del&gt;SLING-5752&lt;/del&gt;&lt;/a&gt; - SimpleHttpDistributionTransport does not leverage configured scheme from distribution endpoint&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Pass scheme from distribution endpoint when building Executor&apos;s HttpHost&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15306771" author="marett" created="Mon, 30 May 2016 15:42:01 +0000"  >&lt;p&gt;The issue is fixed in the PR &lt;a href=&quot;https://github.com/apache/sling/pull/144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/144&lt;/a&gt; (patch at &lt;a href=&quot;https://patch-diff.githubusercontent.com/raw/apache/sling/pull/144.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://patch-diff.githubusercontent.com/raw/apache/sling/pull/144.patch&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;This patch has been tested successfully with against a Sling instance running a SSL connector.&lt;br/&gt;
I would add integration tests in &lt;tt&gt;o.a.s.d.t.i.SimpleHttpDistributionTransportTest&lt;/tt&gt; but it seems the test case is ignored.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; any idea why the tests are ignored ? Could you merge this patch ?&lt;/p&gt;</comment>
                            <comment id="15306775" author="marett" created="Mon, 30 May 2016 15:47:14 +0000"  >&lt;p&gt;It seems like the next Fix version (Content Distribution Core 0.1.20) is not available yet.&lt;/p&gt;</comment>
                            <comment id="15307358" author="teofili" created="Tue, 31 May 2016 07:30:49 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt; for the patch, it looks good to me.&lt;/p&gt;</comment>
                            <comment id="15307366" author="githubbot" created="Tue, 31 May 2016 07:37:44 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/144&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15307369" author="teofili" created="Tue, 31 May 2016 07:38:44 +0000"  >&lt;p&gt;I&apos;ve merged your PR in r1746247.&lt;/p&gt;

&lt;p&gt;The mentioned test is ignored, but it should not; the problem is that it fails if it&apos;s enabled, I&apos;ll work on fixing the test.&lt;/p&gt;</comment>
                            <comment id="15307398" author="marett" created="Tue, 31 May 2016 08:04:03 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15307560" author="teofili" created="Tue, 31 May 2016 10:57:26 +0000"  >&lt;p&gt;I&apos;ve re enabled &lt;tt&gt;SimpleHttpDistributionTransportTest&lt;/tt&gt;&#160;in r1746263.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yp7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5749] Validation: IAE thrown in case validation is triggered on a SyntheticResource</title>
                <link>https://issues.apache.org/jira/browse/SLING-5749</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The stack trace whenever the validation is triggered on a &lt;tt&gt;SyntheticResource&lt;/tt&gt; looks like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: ValueMap may not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.validation.impl.ValidationServiceImpl.validateValueMap(ValidationServiceImpl.java:226)
	at org.apache.sling.validation.impl.ValidationServiceImpl.validate(ValidationServiceImpl.java:150)
	at org.apache.sling.validation.impl.ValidationServiceImpl.validate(ValidationServiceImpl.java:140)
	at 
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In case the validation model only contains optional validations this should be silently ignored, in all other cases there must be a reasonable &lt;tt&gt;ValidationFailure&lt;/tt&gt; be returned instead of this exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12972702">SLING-5749</key>
            <summary>Validation: IAE thrown in case validation is triggered on a SyntheticResource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 May 2016 12:37:00 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:33 +0000</updated>
                            <resolved>Wed, 25 May 2016 12:52:55 +0000</resolved>
                                    <version>Validation 1.0.0</version>
                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15299983" author="kwin" created="Wed, 25 May 2016 12:43:43 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://svn.apache.org/r1745478&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1745478&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12960410">SLING-5674</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yh7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5744] OSGi Installer does not activate the right config after a more prioritized config gets deleted</title>
                <link>https://issues.apache.org/jira/browse/SLING-5744</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have the following content in my repository&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1. /apps/configuration/config.&amp;lt;matchingrunmode1&amp;gt;/&amp;lt;myservice.pid&amp;gt;
2. /apps/configuration/config.&amp;lt;matchingrunmode1&amp;gt;.&amp;lt;matchingrunmode2/&amp;lt;myservice.pid&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The configuration 2. is correctly active now. &lt;/p&gt;

&lt;p&gt;I now remove the configuration in 2. (i.e. the node apps/configuration/config.&amp;lt;matchingrunmode1&amp;gt;.&amp;lt;matchingrunmode2/&amp;lt;myservice.pid&amp;gt; vanishes).&lt;br/&gt;
The JcrInstaller is not correctly switching to the newly active configuration 1. but rather 2. stays active.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12972109">SLING-5744</key>
            <summary>OSGi Installer does not activate the right config after a more prioritized config gets deleted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 May 2016 16:45:37 +0000</created>
                <updated>Tue, 24 May 2016 14:32:38 +0000</updated>
                            <resolved>Tue, 24 May 2016 14:32:38 +0000</resolved>
                                    <version>Installer Core 3.6.4</version>
                    <version>JCR Installer 3.1.16</version>
                                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15298254" author="kwin" created="Tue, 24 May 2016 14:32:28 +0000"  >&lt;p&gt;This is already supported and works correctly as being verified by &lt;tt&gt;ConfigPrioritiesTest#testOverrideConfig&lt;/tt&gt;. In my case the installer was just stuck. The error went away after restarting the installer bundle. Since I cannot reproduce the issue any longer I close this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ydkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5742] Do not allow registration of agents/exporters/importers with duplicate names</title>
                <link>https://issues.apache.org/jira/browse/SLING-5742</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12972043">SLING-5742</key>
            <summary>Do not allow registration of agents/exporters/importers with duplicate names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 May 2016 12:12:01 +0000</created>
                <updated>Mon, 20 Feb 2017 12:49:09 +0000</updated>
                            <resolved>Thu, 16 Feb 2017 13:30:03 +0000</resolved>
                                    <version>Content Distribution Core 0.1.18</version>
                                    <fixVersion>Content Distribution Core 0.2.4</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15384870" author="marett" created="Tue, 19 Jul 2016 21:16:57 +0000"  >&lt;p&gt;This issue relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5872&quot; title=&quot;Management of agent configurations must identify configurations by name &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5872&quot;&gt;&lt;del&gt;SLING-5872&lt;/del&gt;&lt;/a&gt;, however its scope could/should cover configurations created via OSGI consoles.&lt;/p&gt;</comment>
                            <comment id="15869916" author="marett" created="Thu, 16 Feb 2017 13:30:03 +0000"  >&lt;p&gt;Resolve as duplicate. OSGI configurations does not seem to offer an easy way to avoid duplicates of regular configuration properties. Also, OSGI configurations should move to content using context aware configs:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sling.apache.org/documentation/bundles/context-aware-configuration/context-aware-configuration.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/context-aware-configuration/context-aware-configuration.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12990924">SLING-5872</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12990924">SLING-5872</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yd67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5741] discarding complete ResourceBundleCache in case of JSON dictionary</title>
                <link>https://issues.apache.org/jira/browse/SLING-5741</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case user is using JSON dictionary then condition mentioned here &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L198&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;will becomes true for any change in languagerootpaths which are cached. And this will discard complete resource bundle cache. which is different if user is using sling:Message dictionary.&lt;/p&gt;

&lt;p&gt;for example user has json dictionary at path  &lt;br/&gt;
&quot;/libs/test/i18n/de.json&quot;&lt;br/&gt;
and also resource bundle for language &quot;de&quot; is cached so , &quot;libs/test/i18n/de.json&quot; will be in languageRootPaths.&lt;br/&gt;
So any change at &quot;/libs/test/i18n/de.json&quot; will discard complete resourcebundleCache.&lt;/p&gt;

&lt;p&gt;Where as in case of  sling:dictionary &lt;br/&gt;
languageRootPath will be like &quot;/libs/test/i18n/de&quot; &lt;br/&gt;
and any change in this dictionary will have path like this &quot;/libs/test/i18n/de/testMessage&quot; so condition becomes false and complete resourcebundleCache. will not be discarded.&lt;/p&gt;

&lt;p&gt;Can we improve this, like if condition becomes true, than check among the cached resourceBundle to which resourceBundle this path belongs to and than discarding that resourceBundle. and if this resourceBundle is parent of any ResourceBundle then discard that too. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12971940">SLING-5741</key>
            <summary>discarding complete ResourceBundleCache in case of JSON dictionary</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="anagarwa">Ankit Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 May 2016 05:06:12 +0000</created>
                <updated>Tue, 2 Nov 2021 11:48:31 +0000</updated>
                                            <version>i18n 2.4.6</version>
                                                    <component>Extensions</component>
                    <component>i18n</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15295927" author="githubbot" created="Mon, 23 May 2016 05:20:20 +0000"  >&lt;p&gt;GitHub user anagarwa opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/143&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5741&quot; title=&quot;discarding complete ResourceBundleCache in case of JSON dictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5741&quot;&gt;SLING-5741&lt;/a&gt; discarding complete ResourceBundleCache in case of JSON di&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;ctionary&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/anagarwa/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/anagarwa/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5741&quot; title=&quot;discarding complete ResourceBundleCache in case of JSON dictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5741&quot;&gt;SLING-5741&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/143.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/143.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #143&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 083869ede3b4cfe8ed82b8b771e7e1daf0c651a8&lt;br/&gt;
Author: Ankit Agarwal &amp;lt;anagarwa@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-05-23T05:14:17Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5741&quot; title=&quot;discarding complete ResourceBundleCache in case of JSON dictionary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5741&quot;&gt;SLING-5741&lt;/a&gt; discarding complete ResourceBundleCache in case of JSON dictionary&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15295928" author="anagarwa" created="Mon, 23 May 2016 05:21:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt; pull request &lt;a href=&quot;https://github.com/apache/sling/pull/143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/143&lt;/a&gt; has been created to fix this issue.&lt;/p&gt;

&lt;p&gt;thanks,&lt;/p&gt;</comment>
                            <comment id="15356848" author="anagarwa" created="Thu, 30 Jun 2016 10:03:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; please check pull request  &lt;a href=&quot;https://github.com/apache/sling/pull/143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/143&lt;/a&gt; which fixes this bug along with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5708&quot; title=&quot;discarding ResourceBundle of all locale&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5708&quot;&gt;SLING-5708&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;thanks,&lt;/p&gt;</comment>
                            <comment id="17436923" author="joerghoh" created="Mon, 1 Nov 2021 16:11:42 +0000"  >&lt;p&gt;The linked PR is already closed, with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5708&quot; title=&quot;discarding ResourceBundle of all locale&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5708&quot;&gt;SLING-5708&lt;/a&gt; still open. Can this ticket be closed? &lt;/p&gt;</comment>
                            <comment id="17437318" author="kwin" created="Tue, 2 Nov 2021 11:48:31 +0000"  >&lt;p&gt;The linked PR was never merged, it was closed because it was against the old SVN mirror. Someone would need to come up with a new version, therefore this ticket needs to stay open.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12964541">SLING-5708</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ycjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5740] [i18n] extracting country from locale String is incorrect in JcrResourceBundleProvider</title>
                <link>https://issues.apache.org/jira/browse/SLING-5740</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;while extracting Locale from string, country code as compared to lang  &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L613&lt;/a&gt;&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12971487">SLING-5740</key>
            <summary>[i18n] extracting country from locale String is incorrect in JcrResourceBundleProvider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="anagarwa">Ankit Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 May 2016 10:08:13 +0000</created>
                <updated>Fri, 5 Aug 2016 08:37:58 +0000</updated>
                            <resolved>Fri, 20 May 2016 11:02:59 +0000</resolved>
                                    <version>i18n 2.4.6</version>
                                    <fixVersion>i18n 2.4.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15293122" author="githubbot" created="Fri, 20 May 2016 10:21:33 +0000"  >&lt;p&gt;GitHub user anagarwa opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5740&quot; title=&quot;[i18n] extracting country from locale String is incorrect in JcrResourceBundleProvider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5740&quot;&gt;&lt;del&gt;SLING-5740&lt;/del&gt;&lt;/a&gt; extracting country from locale String is incorrect in JcrR&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;esourceBundleProvider&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/anagarwa/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/anagarwa/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5740&quot; title=&quot;[i18n] extracting country from locale String is incorrect in JcrResourceBundleProvider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5740&quot;&gt;&lt;del&gt;SLING-5740&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/142.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/142.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #142&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 61a02acd02bb0a41876e4354024de5ea6fab5096&lt;br/&gt;
Author: Ankit Agarwal &amp;lt;anagarwa@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-05-20T10:14:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5740&quot; title=&quot;[i18n] extracting country from locale String is incorrect in JcrResourceBundleProvider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5740&quot;&gt;&lt;del&gt;SLING-5740&lt;/del&gt;&lt;/a&gt; extracting country from locale String is incorrect in JcrResourceBundleProvider&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15293125" author="anagarwa" created="Fri, 20 May 2016 10:23:14 +0000"  >&lt;p&gt;pull req &lt;a href=&quot;https://github.com/apache/sling/pull/142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15293130" author="kwin" created="Fri, 20 May 2016 10:27:40 +0000"  >&lt;p&gt;The fix is not correct, but there is definitely something fishy along those lines. The whole for-loop in line 612 should IMHO be removed. Maybe someone else has an idea, why it was added in the first place?&lt;/p&gt;</comment>
                            <comment id="15293131" author="kwin" created="Fri, 20 May 2016 10:29:32 +0000"  >&lt;p&gt;Sorry, I got that only right after having a closer look. The fix is correct, but the whole logic seems a bit weird, I will try to simplify the logic and come up with a fix.&lt;/p&gt;</comment>
                            <comment id="15293181" author="githubbot" created="Fri, 20 May 2016 11:01:21 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/142&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15293184" author="kwin" created="Fri, 20 May 2016 11:02:59 +0000"  >&lt;p&gt;Applied the fix together with some test classes in &lt;a href=&quot;https://svn.apache.org/r1744704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1744704&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y9qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5735] Pipes XPathPipe does not log query</title>
                <link>https://issues.apache.org/jira/browse/SLING-5735</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The XPathPipe ideally should log the query being executed.&lt;/p&gt;

&lt;p&gt;Patch is included.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12970800">SLING-5735</key>
            <summary>Pipes XPathPipe does not log query</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="jbell">Jonathan Bell</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 May 2016 15:29:21 +0000</created>
                <updated>Fri, 14 Oct 2016 08:07:07 +0000</updated>
                            <resolved>Tue, 21 Jun 2016 15:59:38 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15342054" author="sseifert@pro-vision.de" created="Tue, 21 Jun 2016 15:59:38 +0000"  >&lt;p&gt;Completed: At revision: 1749564  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12804682" name="XPathPipe.diff" size="1352" author="jbell" created="Wed, 18 May 2016 15:30:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y5hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5731] Export the org.mozilla.javascript.tools package in org.apache.sling.scripting.javascript bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-5731</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We would like to use the &lt;a href=&quot;https://github.com/jknack/handlebars.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;handlebars template engine &lt;/a&gt; in our Sling application.  This bundle has a dependency on the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Rhino Javascript engine &lt;/a&gt;.  &lt;/p&gt;

&lt;p&gt;The two packages that the Handlebars bundle imports from the Rhino bundle are &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;org.mozilla.javascript&lt;/li&gt;
	&lt;li&gt;org.mozilla.javascript.tools.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Sling javascript bundle already exports the first package, it would be great if it also exports the second package so that we won&apos;t have to deploy the Rhino javascript bundle to be able to use handlebars.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12970439">SLING-5731</key>
            <summary>Export the org.mozilla.javascript.tools package in org.apache.sling.scripting.javascript bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="thuynh@adobe.com">Tan Huynh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 May 2016 17:27:56 +0000</created>
                <updated>Thu, 30 Mar 2017 08:30:56 +0000</updated>
                            <resolved>Thu, 30 Mar 2017 08:30:33 +0000</resolved>
                                    <version>Scripting JavaScript 2.0.30</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15287062" author="thuynh@adobe.com" created="Tue, 17 May 2016 17:30:53 +0000"  >&lt;p&gt;Attached is the patch for this bug.&lt;/p&gt;</comment>
                            <comment id="15931615" author="olli" created="Sun, 19 Mar 2017 08:37:46 +0000"  >&lt;p&gt;&lt;blockquote&gt;
&lt;p&gt;Naturally other components in the system don&apos;t work properly if we try to provide another export of Rhino. In particular some Sightly components break if they don&apos;t get the Rhino engine that is properly configured for them.&lt;/p&gt;&lt;/blockquote&gt; (&lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg58190.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg58190.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rryan%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;rryan@adobe.com&quot;&gt;rryan@adobe.com&lt;/a&gt;, can you elaborate on what you tried and what break?&lt;/p&gt;</comment>
                            <comment id="15933431" author="rryan@adobe.com" created="Mon, 20 Mar 2017 20:06:34 +0000"  >&lt;p&gt;I&apos;m sorry I didn&apos;t keep a record, of what happens with a second export of Rhino.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13057332">SLING-6668</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13057332">SLING-6668</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12804472" name="sling-javascript.diff" size="682" author="thuynh@adobe.com" created="Tue, 17 May 2016 17:30:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y3a7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5729] pipe expressions should allow regexp with {n} or {n,m}</title>
                <link>https://issues.apache.org/jira/browse/SLING-5729</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;expressions like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;${(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Regexp(&lt;span class=&quot;code-quote&quot;&gt;&apos;/foo/bar/./../.{8}&apos;&lt;/span&gt;).test(path)}&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;can&apos;t work right now because of the rather simple regexp for extracting them&lt;/p&gt;</description>
                <environment></environment>
        <key id="12969825">SLING-5729</key>
            <summary>pipe expressions should allow regexp with {n} or {n,m}</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 May 2016 12:06:30 +0000</created>
                <updated>Fri, 14 Oct 2016 08:07:00 +0000</updated>
                            <resolved>Tue, 21 Jun 2016 15:57:27 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15283831" author="npeltier" created="Sun, 15 May 2016 12:08:55 +0000"  >&lt;p&gt;failing tests + fix (enhancement of the regexp used for extracting expressions) in attached patch&lt;/p&gt;</comment>
                            <comment id="15342045" author="sseifert@pro-vision.de" created="Tue, 21 Jun 2016 15:57:27 +0000"  >&lt;p&gt;Completed: At revision: 1749563  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12804058" name="SLING-5729.patch" size="2173" author="npeltier" created="Sun, 15 May 2016 12:08:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xzhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5728] enhance filterpipe logging</title>
                <link>https://issues.apache.org/jira/browse/SLING-5728</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;when a filter pipe&apos;s expression fails to generate a boolean, it should output the expression instead of a ClassCast exception,&lt;/li&gt;
	&lt;li&gt;when a filter pipe filters out a resource, it should log this in DEBUG, not INFO&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12969822">SLING-5728</key>
            <summary>enhance filterpipe logging</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 May 2016 11:56:24 +0000</created>
                <updated>Fri, 14 Oct 2016 08:06:50 +0000</updated>
                            <resolved>Tue, 21 Jun 2016 15:56:11 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15283828" author="npeltier" created="Sun, 15 May 2016 12:01:02 +0000"  >&lt;p&gt;fix in attached patch&lt;/p&gt;</comment>
                            <comment id="15342044" author="sseifert@pro-vision.de" created="Tue, 21 Jun 2016 15:56:11 +0000"  >&lt;p&gt;Completed: At revision: 1749562  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12804057" name="SLING-5728.patch" size="1521" author="npeltier" created="Sun, 15 May 2016 12:01:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xzh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5727] Remove o.a.s.testing.tools dependency in o.a.s.testing.serversetup and adapt http code</title>
                <link>https://issues.apache.org/jira/browse/SLING-5727</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;o.a.s.testing.serversetup has a dependency on o.a.s.testing.tools, out of which it came to life. The idea is to deprecate the testing-tools.&lt;/p&gt;

&lt;p&gt;To do this, SlingTestBase (which should probably be renamed) should be adapted to use o.a.s.testing.clients.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12969548">SLING-5727</key>
            <summary>Remove o.a.s.testing.tools dependency in o.a.s.testing.serversetup and adapt http code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                            <label>testing-http-clients</label>
                    </labels>
                <created>Fri, 13 May 2016 14:16:52 +0000</created>
                <updated>Wed, 15 Jun 2016 15:04:11 +0000</updated>
                            <resolved>Wed, 15 Jun 2016 15:04:11 +0000</resolved>
                                                    <fixVersion>Sample Integration Tests 1.0.8</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15331887" author="andrei.dulvac" created="Wed, 15 Jun 2016 15:04:11 +0000"  >&lt;p&gt;Fixed in rev 1748594&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xxs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5726] Allow ValueMapInjector and ResourcePathInjector to act directly on SlingHttpServletRequest</title>
                <link>https://issues.apache.org/jira/browse/SLING-5726</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently both injectors only work correctly on objects being adaptable to a &lt;tt&gt;ValueMap&lt;/tt&gt;. For &lt;tt&gt;ValueMapInjector&lt;/tt&gt; this is documented but for &lt;tt&gt;ResourcePathInjector&lt;/tt&gt; it is not (&lt;a href=&quot;http://sling.apache.org/documentation/bundles/models.html#available-injectors&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/bundles/models.html#available-injectors&lt;/a&gt;), although for the latter it does only matter if the path is given through a resource property and not in a static way.&lt;/p&gt;

&lt;p&gt;This should be relaxed that both also work with &lt;tt&gt;SlingHttpServletRequest&lt;/tt&gt; as that always carries the current resource from which the &lt;tt&gt;ValueMap&lt;/tt&gt; can be easily retrieved.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12969486">SLING-5726</key>
            <summary>Allow ValueMapInjector and ResourcePathInjector to act directly on SlingHttpServletRequest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 May 2016 08:34:34 +0000</created>
                <updated>Fri, 10 Dec 2021 09:26:10 +0000</updated>
                            <resolved>Fri, 3 Dec 2021 16:05:13 +0000</resolved>
                                    <version>Sling Models Impl 1.2.8</version>
                                    <fixVersion>Models Implementation 1.5.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="15282610" author="kwin" created="Fri, 13 May 2016 10:36:43 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1743648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1743648&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15282628" author="kwin" created="Fri, 13 May 2016 11:24:31 +0000"  >&lt;p&gt;Reverted with &lt;a href=&quot;https://svn.apache.org/r1743654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1743654&lt;/a&gt; as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; did not agree with that change. See the discussion at &lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg56010.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg56010.html&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15293686" author="justinedelson" created="Fri, 20 May 2016 16:48:41 +0000"  >&lt;p&gt;(Trying to move this conversation to JIRA now that I figured out my login issue):&lt;/p&gt;

&lt;p&gt;I&apos;m entirely supportive of the notion of using models in multiple contexts, which is the basis for this request. My concern here is one of separation of concerns. AbstractInjector is &lt;b&gt;not&lt;/b&gt; API, it is an internal helper. Putting additional expectations on Injectors just seems wrong to me.&lt;/p&gt;

&lt;p&gt;What we could do as an alternative would be to extend the @Via annotation to express some kind of condition, e.g.&lt;/p&gt;

&lt;p&gt;@Inject @Via(value = &quot;resource&quot;, forAdaptable = SlingHttpServletRequest.class)&lt;br/&gt;
private String description;&lt;/p&gt;

&lt;p&gt;Which says &quot;for this injection point, use the actual adaptable via getResource() when the adaptable is of type SlingHttpServletRequest&quot;&lt;/p&gt;

&lt;p&gt;That would work consistently across all Injectors.&lt;/p&gt;

&lt;p&gt;This could also eventually necessitate creating a @Vias annotation to wrap multiple @Via annotations, but I&apos;d prefer to defer that until it is requested.&lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="15296028" author="henzlerg" created="Mon, 23 May 2016 07:28:06 +0000"  >&lt;p&gt;I think the main driver should be ease of use from a developers perspective (maybe we should create a wiki page with example mappings to make it more visual how typical scenarios look like!). Mappings should be easy to read and write. So introducing something like &lt;tt&gt;@Inject @Via(value = &quot;resource&quot;, forAdaptable = SlingHttpServletRequest.class)&lt;/tt&gt; makes sense iff &lt;tt&gt;@Inject&lt;/tt&gt; alone has a different behaviour, but if &lt;tt&gt;@Inject&lt;/tt&gt; alone is just defunct (when it really could just work), then adding the burden to make all developers add &lt;tt&gt;@Via(value = &quot;resource&quot;, forAdaptable = SlingHttpServletRequest.class)&lt;/tt&gt; is not reasonable (good framework should have good defaults). &lt;/p&gt;

&lt;p&gt;For me the main point is: Sling Models is about mapping resources to java Pojos. We have added the ability to map request context to be able to use the models in a controller like fashion. In the end a request is (from a Sling Models point of view) just a resource with a &quot;a bit of context&quot;.  I would therefore handle adaptations from requests/resources almost identical (the only difference that the information from the request context is missing, but setters can be used to set these values in non-request context use-cases).&lt;/p&gt;</comment>
                            <comment id="15296232" author="justinedelson" created="Mon, 23 May 2016 11:06:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henzlerg&quot; class=&quot;user-hover&quot; rel=&quot;henzlerg&quot;&gt;henzlerg&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here&apos;s the thing... I disagree that&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Sling Models is about mapping resources to java Pojos. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sling Models is a framework for mapping adaptables into POJOs. From a framework/standard library perspective, we should be as agnostic as possible as to what the nature of those adaptables are.&lt;/p&gt;</comment>
                            <comment id="15312385" author="kwin" created="Thu, 2 Jun 2016 14:22:05 +0000"  >&lt;p&gt;Coming back to this&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m entirely supportive of the notion of using models in multiple contexts, which is the basis for this request. My concern here is one of separation of concerns. AbstractInjector is not API, it is an internal helper. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, you are right. This patch is actually modifying a helper which is only used in two injectors (and not exported). So this is not at all about changing any API or the framework!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Putting additional expectations on Injectors just seems wrong to me.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This patch has the opposite intent. It will make the injectors just easier to use, because the developer shouldn&apos;t care to much on which adaptable the injector is working and all injectors we ship with Sling Models should support IMHO as many adaptables as possible (to make them easier to use in all contexts). We are talking about a restriction of two injectors we want to lift here!&lt;/p&gt;

&lt;p&gt;What about the currently non-documented restriction of the ResourcePathInjector (to only act on Resources but not on Requests). We should definitely do something about it.&lt;/p&gt;

&lt;p&gt;For that we have two options&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Apply the given patch, or&lt;/li&gt;
	&lt;li&gt;Document that ResourcePathInjector will not support the adaptable SlingHttpServletRequest (in &lt;a href=&quot;http://sling.apache.org/documentation/bundles/models.html#available-injectors&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/bundles/models.html#available-injectors&lt;/a&gt;)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In addition we could think about supporting &quot;via&quot; on the annotation &lt;tt&gt;@ResourcePath&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/models/api/src/main/java/org/apache/sling/models/annotations/injectorspecific/ResourcePath.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/models/api/src/main/java/org/apache/sling/models/annotations/injectorspecific/ResourcePath.java&lt;/a&gt;) and make that have the default &quot;resource&quot; in case the adaptable is a SlingHttpServletRequest. The default value would only make sense of course if we choose option 2.&lt;/p&gt;
</comment>
                            <comment id="15833606" author="kwin" created="Sun, 22 Jan 2017 16:49:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Any opinion before I go ahead with any of the outlined approaches in the previous comment? What would you prefer? Is there maybe another option?&lt;/p&gt;</comment>
                            <comment id="16164269" author="hanspeterstoerr" created="Wed, 13 Sep 2017 07:54:41 +0000"  >&lt;p&gt;I&apos;d like to support this, and suggest a little extension. I would like to see ResourcePathInjector (and ChildResourceInjector) work on anything that can &lt;tt&gt;adaptTo&lt;/tt&gt; a Resource or Request.&lt;/p&gt;

&lt;p&gt;Background: for constructing the models we use our own container which, among other things, has the request, the response, the resolver and a resource, as a basis, since all of these things are sometimes needed. It can adaptTo the Request or Resource, but to use @ResourcePath we currently have to add an annoying @Via(&quot;request&quot;).&lt;/p&gt;

&lt;p&gt;That can be done nicely by adding an &quot;Adaptable&quot; branch in AbstractInjector#getResourceResolver , as there is in AbstractInjector#getValueMap.&lt;/p&gt;</comment>
                            <comment id="16853008" author="kwin" created="Fri, 31 May 2019 13:15:00 +0000"  >&lt;p&gt;This issue was also mentioned in the context of &lt;a href=&quot;https://github.com/Adobe-Consulting-Services/acs-aem-commons/pull/1920&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Consulting-Services/acs-aem-commons/pull/1920&lt;/a&gt;, so it seems there is a real need for making the injectors as agnostic towards the adaptable as possible.&lt;br/&gt;
As each &lt;tt&gt;SlingHttpServletRequest&lt;/tt&gt; implicitly carries a &lt;tt&gt;Resource&lt;/tt&gt; I would still vote for enriching the &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;ValueMapInjector&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ChildResourceInjector&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ResourcePathInjector&lt;/tt&gt;&lt;br/&gt;
for being able to directly act upon the adaptable &lt;tt&gt;SlingHttpServletRequest&lt;/tt&gt; (in addition to &lt;tt&gt;Resource&lt;/tt&gt;).&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert&quot; class=&quot;user-hover&quot; rel=&quot;sseifert&quot;&gt;sseifert&lt;/a&gt; WDYT?&lt;br/&gt;
I fail to see any issue with backwards-compatibility and the proposed via enhancement sounds way too complicated to me.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16854761" author="sseifert@pro-vision.de" created="Mon, 3 Jun 2019 16:13:53 +0000"  >&lt;p&gt;i also see no (real) backwards compatibility problem, and im my pov we do not break the &quot;agnostic-ness&quot; by making the detection of the value map a bit more flexible.&lt;/p&gt;</comment>
                            <comment id="16855386" author="kwin" created="Tue, 4 Jun 2019 06:32:40 +0000"  >&lt;p&gt;There once was an AdapterFactory which allowed to adapt directly a Request to a ValueMap (and in fact took the request parameters as source, instead of the request&apos;s resource). For more details refer to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5590&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5590&lt;/a&gt;. I don&apos;t think this is an issue though, as long as we try adaptations first and only if that fails fall back to the resource&apos;s value map. Also that adaptation was only shipped with a SNAPSHOT version of Sling Validation once and is no longer part of any released Sling bundles.&lt;/p&gt;</comment>
                            <comment id="17453083" author="sseifert@pro-vision.de" created="Fri, 3 Dec 2021 15:24:24 +0000"  >&lt;p&gt;i think this should rather be an improvement ticket than a bug.&lt;/p&gt;

&lt;p&gt;the new PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/27&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/27&lt;/a&gt; looks fine for me - but at it&apos;s a generic extension that not only applies to ResourcePathInjector we probably should change the ticket title + description as well to make this obvious.&lt;/p&gt;</comment>
                            <comment id="17453088" author="kwin" created="Fri, 3 Dec 2021 15:29:11 +0000"  >&lt;p&gt;It only affects the two mentioned injectors, as no other injector is calling AbstractInjector.getValueMap(). It is IMHO at least partly a bug, because the documentation at &lt;a href=&quot;https://sling.apache.org/documentation/bundles/models.html#available-injectors&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/models.html#available-injectors&lt;/a&gt; states (incorrectly) that ResourcePathInjector is applicable to &quot;&lt;tt&gt;Resource&lt;/tt&gt;&#160;or&#160;&lt;tt&gt;SlingHttpServletRequest&lt;/tt&gt; objects&quot; which wasn&apos;t the case prior to this bugfix.&lt;/p&gt;</comment>
                            <comment id="17453096" author="sseifert@pro-vision.de" created="Fri, 3 Dec 2021 15:34:14 +0000"  >&lt;p&gt;it only affects those two injects from the sling project itself, it may affect other custom injectors.&lt;br/&gt;
i&apos;ve no hard opinion on the ticket type, but for someone looking at the changelog later it should be a bit easier to parse what actually changed.&lt;/p&gt;</comment>
                            <comment id="17453098" author="kwin" created="Fri, 3 Dec 2021 15:36:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;it may affect other custom injectors.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;IMHO not, as &lt;tt&gt;AbstractInjector&lt;/tt&gt; is not exported&lt;/p&gt;</comment>
                            <comment id="17453099" author="sseifert@pro-vision.de" created="Fri, 3 Dec 2021 15:39:53 +0000"  >&lt;p&gt;ah, you&apos;re right - my fault&lt;/p&gt;</comment>
                            <comment id="17453116" author="kwin" created="Fri, 3 Dec 2021 16:05:13 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/commit/391cc22d7a95d0c15cbf1e8b21831bb044d68ec7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/commit/391cc22d7a95d0c15cbf1e8b21831bb044d68ec7&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12968195">SLING-5721</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12947704">SLING-5590</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13323547">SLING-9674</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13216479">SLING-8279</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12803845" name="SLING-5726.patch" size="13391" author="kwin" created="Fri, 13 May 2016 11:43:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xxef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5725] Remove o.a.s.testing.tools dependency in o.a.s.testing.clients and merge OSGi console clients</title>
                <link>https://issues.apache.org/jira/browse/SLING-5725</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the pom.xml in &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/testing/http/clients/pom.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/testing/http/clients/pom.xml&lt;/a&gt; still has a dependency towards &lt;tt&gt;org.apache.sling.testing.tools&lt;/tt&gt;. That should be removed because the new artifact should be a replacement for the testing tools. The only place where classes are still referenced is the &lt;tt&gt;WebconsoleClient&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/testing/http/clients/src/main/java/org/apache/sling/testing/clients/osgi/WebconsoleClient.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/testing/http/clients/src/main/java/org/apache/sling/testing/clients/osgi/WebconsoleClient.java&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Those references should be removed and also the &lt;tt&gt;WebconsoleClient&lt;/tt&gt; should probably be merged with the &lt;tt&gt;OsgiConsoleClient&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12968436">SLING-5725</key>
            <summary>Remove o.a.s.testing.tools dependency in o.a.s.testing.clients and merge OSGi console clients</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                            <label>testing-http-clients</label>
                    </labels>
                <created>Thu, 12 May 2016 12:59:54 +0000</created>
                <updated>Fri, 13 May 2016 14:03:15 +0000</updated>
                            <resolved>Fri, 13 May 2016 14:03:15 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15282603" author="andrei.dulvac" created="Fri, 13 May 2016 10:15:25 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I created &lt;a href=&quot;https://github.com/apache/sling/pull/141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/141&lt;/a&gt; for this.&lt;br/&gt;
Summary: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removed WebconsoleClient and added methods to install/ start/ unistall bundles in OsgiConsoleClient&lt;/li&gt;
	&lt;li&gt;Adapted BundlesInstaller&lt;/li&gt;
	&lt;li&gt;Removed dependency on sling-testin-tools for testing-http-clients&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15282674" author="bdelacretaz" created="Fri, 13 May 2016 12:58:43 +0000"  >&lt;p&gt;Andrei pointed me to &lt;a href=&quot;https://github.com/apache/sling/pull/141/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/141/files&lt;/a&gt; as he was unable to add comments here.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrei.dulvac&quot; class=&quot;user-hover&quot; rel=&quot;andrei.dulvac&quot;&gt;andrei.dulvac&lt;/a&gt; I have added you to the contributors role for the SLING jira project so that should be fixed now.&lt;/p&gt;

&lt;p&gt;About that pull request, I see comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; in there, have those been addressed?&lt;/p&gt;</comment>
                            <comment id="15282685" author="andrei.dulvac" created="Fri, 13 May 2016 13:25:13 +0000"  >&lt;p&gt;Hi Bertrand, thanks for adding me as a contributor.&lt;br/&gt;
I&apos;ve addressed the two issues - added reference to the webconsole http api url + fixed missing file from OsgiConsoleClient#installBundle.&lt;/p&gt;</comment>
                            <comment id="15282710" author="bdelacretaz" created="Fri, 13 May 2016 14:03:15 +0000"  >&lt;p&gt;I have committed Andrei&apos;s patch in &lt;a href=&quot;http://svn.apache.org/r1743676&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1743676&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Marking this fixed but feel free to reopen if needed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12963864">SLING-5704</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12963856">SLING-5703</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xqyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5724] Teleporter: Use o.a.s.testing.clients instead of custom HTTP requests in TeleporterHttpClient</title>
                <link>https://issues.apache.org/jira/browse/SLING-5724</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Instead of having another client which deals with installing/uninstalling bundles, the &lt;tt&gt;ClientSideTeleporter&lt;/tt&gt; should just leverage the class &lt;tt&gt;org.apache.sling.testing.clients.osgi.OsgiConsoleClient&lt;/tt&gt; and &lt;tt&gt;org.apache.sling.testing.clients.osgi.WebconsoleClient&lt;/tt&gt; for that purpose. That might also help with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5715&quot; title=&quot;Random NoRouteToHostException in Teleporter Client MultipartAdapter method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5715&quot;&gt;&lt;del&gt;SLING-5715&lt;/del&gt;&lt;/a&gt; as it is using the Apache HTTP Client under the hood, which might be a better choice than just plain HttpUrlConnections which are currently used by &lt;tt&gt;TeleporterHttpClient&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12968323">SLING-5724</key>
            <summary>Teleporter: Use o.a.s.testing.clients instead of custom HTTP requests in TeleporterHttpClient</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 May 2016 11:39:09 +0000</created>
                <updated>Thu, 12 May 2016 14:10:40 +0000</updated>
                                            <version>JUnit Tests Teleporter 1.0.6</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15281438" author="kwin" created="Thu, 12 May 2016 11:40:41 +0000"  >&lt;p&gt;That change would also ease implementing &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5681&quot; title=&quot;Teleporter: Improve mechanism to check if a deployed test bundle can be started&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5681&quot;&gt;&lt;del&gt;SLING-5681&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15281539" author="bdelacretaz" created="Thu, 12 May 2016 14:10:40 +0000"  >&lt;p&gt;I disagree - &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5715&quot; title=&quot;Random NoRouteToHostException in Teleporter Client MultipartAdapter method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5715&quot;&gt;&lt;del&gt;SLING-5715&lt;/del&gt;&lt;/a&gt; is fixed AFAICS, and having no dependencies on http client libraries in the teleporter makes it easier to integrate, and more lightweight.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12966004">SLING-5715</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12961623">SLING-5681</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12963856">SLING-5703</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xq9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5723] includeDependencyPrefix(...), excludeDependencyPrefix(...) and embeddedClass(...) should be accessible from Teleporter</title>
                <link>https://issues.apache.org/jira/browse/SLING-5723</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Similar to &lt;tt&gt;Teleporter.withResources(...)&lt;/tt&gt; also the methods&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;includeDependencyPrefix(...)&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;excludeDependencyPrefix(...)&lt;/tt&gt; and&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;embeddedClass(...)&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;should be accessible from the TeleporterRule. On server-side they should do nothing (similar to &lt;tt&gt;withResources(...)&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;Currently only a &lt;tt&gt;Customizer&lt;/tt&gt; can access those via the &lt;tt&gt;ClientSideTeleporter&lt;/tt&gt; class, which too often requires specific customizers. Also that allows to tweak that behaviour really per test-class and not only per &lt;tt&gt;Customizer&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12968268">SLING-5723</key>
            <summary>includeDependencyPrefix(...), excludeDependencyPrefix(...) and embeddedClass(...) should be accessible from Teleporter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 May 2016 10:27:06 +0000</created>
                <updated>Thu, 12 May 2016 10:27:43 +0000</updated>
                                            <version>JUnit Tests Teleporter 1.0.6</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xpxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5722] Script engine factory is registered twice</title>
                <link>https://issues.apache.org/jira/browse/SLING-5722</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Available Script Engines
========================

Apache Sling Scripting FreeMarker 1.0.0-SNAPSHOT
-------------------------------------
- Language : FreeMarker, 2.3.24-incubating
- Extensions : -
- MIME Types : -
- Names : -

Apache Sling Scripting Thymeleaf 0.1.7-SNAPSHOT
-------------------------------------
- Language : Thymeleaf, 3.0.0.BETA03
- Extensions : html
- MIME Types : text/html
- Names : thymeleaf

Apache Sling Scripting FreeMarker 1.0.0-SNAPSHOT
-------------------------------------
- Language : FreeMarker, 2.3.24-incubating
- Extensions : ftl
- MIME Types : text/x-freemarker
- Names : freemarker
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;1. Service Provider Interface (&lt;tt&gt;META-INF/services/javax.script.ScriptEngineFactory&lt;/tt&gt;: &lt;tt&gt;org.apache.sling.scripting.freemarker.internal.FreemarkerScriptEngineFactory&lt;/tt&gt;)&lt;br/&gt;
2. Declarative Services (&lt;tt&gt;OSGI-INF/org.apache.sling.scripting.freemarker.internal.FreemarkerScriptEngineFactory.xml&lt;/tt&gt;)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12968222">SLING-5722</key>
            <summary>Script engine factory is registered twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 May 2016 07:46:48 +0000</created>
                <updated>Fri, 14 Sep 2018 15:29:20 +0000</updated>
                            <resolved>Thu, 12 May 2016 08:07:13 +0000</resolved>
                                                    <fixVersion>Scripting FreeMarker 1.0.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15281302" author="olli" created="Thu, 12 May 2016 08:07:13 +0000"  >&lt;p&gt;SPI mapping file (and unnecessary &lt;tt&gt;LICENSE&lt;/tt&gt; and &lt;tt&gt;NOTICE&lt;/tt&gt; files) removed in &lt;a href=&quot;https://svn.apache.org/r1743478&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1743478&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xpnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5720] ScriptEngineManagerFactory is not updating ScriptEngineFactory&apos;s cached service properties on modification</title>
                <link>https://issues.apache.org/jira/browse/SLING-5720</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;ScriptEngineManagerFactory&lt;/tt&gt; should handle modified services. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12967709">SLING-5720</key>
            <summary>ScriptEngineManagerFactory is not updating ScriptEngineFactory&apos;s cached service properties on modification</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 May 2016 18:59:38 +0000</created>
                <updated>Mon, 27 Jan 2020 18:09:54 +0000</updated>
                            <resolved>Mon, 6 Jan 2020 19:47:15 +0000</resolved>
                                    <version>Scripting Core 2.0.36</version>
                                    <fixVersion>Servlets Resolver 2.6.0</fixVersion>
                    <fixVersion>Scripting Core 2.2.0</fixVersion>
                    <fixVersion>API 2.22.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17001841" author="olli" created="Sun, 22 Dec 2019 08:42:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu&quot; class=&quot;user-hover&quot; rel=&quot;radu&quot;&gt;radu&lt;/a&gt;, The new&#160;&lt;tt&gt;UPDATED&lt;/tt&gt; event topic in Sling API is now in branch &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/tree/issue/SLING-5720&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;issue/SLING-5720&lt;/a&gt;&#160;(&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/commit/748f45d7a046f6f759463e741177b3f2ddf9d793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;748f45d&lt;/a&gt;) and should be merged into master once 2.21.2 is cut.&lt;/p&gt;</comment>
                            <comment id="17008677" author="radu.cotescu" created="Mon, 6 Jan 2020 09:43:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;, do you think we could sync for this release so that both this issue and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8943&quot; title=&quot;The Sling API ObjectConverter does not correctly convert JCR values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8943&quot;&gt;&lt;del&gt;SLING-8943&lt;/del&gt;&lt;/a&gt; can be delivered in the next days?&lt;/p&gt;</comment>
                            <comment id="17008697" author="olli" created="Mon, 6 Jan 2020 10:00:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu&quot; class=&quot;user-hover&quot; rel=&quot;radu&quot;&gt;radu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8943&quot; title=&quot;The Sling API ObjectConverter does not correctly convert JCR values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8943&quot;&gt;&lt;del&gt;SLING-8943&lt;/del&gt;&lt;/a&gt; targets API 2.21.2 and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5720&quot; title=&quot;ScriptEngineManagerFactory is not updating ScriptEngineFactory&amp;#39;s cached service properties on modification&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5720&quot;&gt;&lt;del&gt;SLING-5720&lt;/del&gt;&lt;/a&gt; requires a minor version increase (therefore I put the change into a dedicated branch and not into &lt;tt&gt;master&lt;/tt&gt;). Do you want to skip API 2.21.2?&lt;/p&gt;</comment>
                            <comment id="17008720" author="radu.cotescu" created="Mon, 6 Jan 2020 10:45:45 +0000"  >&lt;p&gt;I can very well skip 2.21.2 if we can release soon.&lt;/p&gt;</comment>
                            <comment id="17008759" author="olli" created="Mon, 6 Jan 2020 11:46:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu&quot; class=&quot;user-hover&quot; rel=&quot;radu&quot;&gt;radu&lt;/a&gt;, I can try to merge&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5720&quot; title=&quot;ScriptEngineManagerFactory is not updating ScriptEngineFactory&amp;#39;s cached service properties on modification&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5720&quot;&gt;&lt;del&gt;SLING-5720&lt;/del&gt;&lt;/a&gt; into API master tonight. Or just go ahead and do it&#160;yourself.&lt;/p&gt;</comment>
                            <comment id="17009752" author="radu.cotescu" created="Tue, 7 Jan 2020 14:07:12 +0000"  >&lt;p&gt;&lt;tt&gt;NotEnoughCoffeeException&lt;/tt&gt;: I forgot that there were three other issues moved to 2.22.0 on which nobody is working. &lt;del&gt;In the end I will cut 2.21.2 for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8943&quot; title=&quot;The Sling API ObjectConverter does not correctly convert JCR values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8943&quot;&gt;&lt;del&gt;SLING-8943&lt;/del&gt;&lt;/a&gt;&lt;/del&gt;. Sorry if I have rushed you.&lt;/p&gt;

&lt;p&gt;Later edit: since I can obviously not cut a release from a previous commit, 2.22.0 will be out with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8943&quot; title=&quot;The Sling API ObjectConverter does not correctly convert JCR values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8943&quot;&gt;&lt;del&gt;SLING-8943&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5720&quot; title=&quot;ScriptEngineManagerFactory is not updating ScriptEngineFactory&amp;#39;s cached service properties on modification&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5720&quot;&gt;&lt;del&gt;SLING-5720&lt;/del&gt;&lt;/a&gt;, with the remaining issues being moved to a subsequent release.&lt;/p&gt;</comment>
                            <comment id="17024538" author="radu.cotescu" created="Mon, 27 Jan 2020 18:07:16 +0000"  >&lt;p&gt;Scripting Core would still need to be released - I accidentally closed this issue when I released API 2.22.0.&lt;/p&gt;

&lt;p&gt;Due to the fact that &lt;tt&gt;org.apache.sling.servlets.resolver&lt;/tt&gt; imports the &lt;tt&gt;org.apache.sling.api.scripting&lt;/tt&gt; package, the Servlets Resolver bundle also needs a new release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13277775">SLING-8962</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xmhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5719] Missing isLive() test before closing ResourceResolver</title>
                <link>https://issues.apache.org/jira/browse/SLING-5719</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I am currently writing tests that involve the &lt;tt&gt;SlingContext&lt;/tt&gt; and its &lt;tt&gt;ResourceResolver&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Rule
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SlingContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingContext(ResourceResolverType.JCR_MOCK);

[... code ...]

@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSomething() {
    ResourceResolver resolver = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.context.resourceResolver();
    someOtherMethod(resolver);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the resolver is closed in &lt;tt&gt;someOtherMethod()&lt;/tt&gt; the test will fail because after the test runs the &lt;tt&gt;SlingContextImpl&lt;/tt&gt; mehtod &lt;tt&gt;tearDown()&lt;/tt&gt; is called which will &lt;tt&gt;close()&lt;/tt&gt; the resource resolver if it is not &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The problem is that it won&apos;t test if the resource resolver &lt;tt&gt;isLive()&lt;/tt&gt; which will end in an exception and a failed test:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;java.lang.IllegalStateException: Resource resolver is already closed.&lt;/p&gt;

&lt;p&gt;	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.checkClosed(ResourceResolverImpl.java:167)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.adaptTo(ResourceResolverImpl.java:718)&lt;br/&gt;
	at org.apache.sling.testing.mock.sling.context.SlingContextImpl.tearDown(SlingContextImpl.java:145)&lt;br/&gt;
	at org.apache.sling.testing.mock.sling.junit.SlingContext.access$300(SlingContext.java:32)&lt;br/&gt;
	at org.apache.sling.testing.mock.sling.junit.SlingContext$1.after(SlingContext.java:120)&lt;br/&gt;
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:50)&lt;br/&gt;
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)&lt;br/&gt;
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)&lt;br/&gt;
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:119)&lt;br/&gt;
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)&lt;br/&gt;
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)&lt;br/&gt;
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Github link to the line in question:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/blob/4da6392078b73f0f20d3d66e87743cf4e86f4ecb/testing/mocks/sling-mock/src/main/java/org/apache/sling/testing/mock/sling/context/SlingContextImpl.java#L161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/4da6392078b73f0f20d3d66e87743cf4e86f4ecb/testing/mocks/sling-mock/src/main/java/org/apache/sling/testing/mock/sling/context/SlingContextImpl.java#L161&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12967421">SLING-5719</key>
            <summary>Missing isLive() test before closing ResourceResolver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jenslauterbach">Jens Lauterbach</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Wed, 11 May 2016 13:58:00 +0000</created>
                <updated>Thu, 9 Jun 2016 08:37:35 +0000</updated>
                            <resolved>Thu, 9 Jun 2016 08:37:35 +0000</resolved>
                                    <version>Testing Sling Mock 1.6.2</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15280172" author="jenslauterbach" created="Wed, 11 May 2016 14:07:54 +0000"  >&lt;p&gt;I didn&apos;t know how to provide a patch but I found the GitHub Sling repo. So I created a Git patch. Maybe this helps.&lt;/p&gt;</comment>
                            <comment id="15281449" author="kwin" created="Thu, 12 May 2016 12:06:04 +0000"  >&lt;p&gt;&lt;tt&gt;SlingContext.resourceResolver&lt;/tt&gt; will always return the same administrative resource resolver even for multiple calls. So your code should never close that, otherwise you might run into other issues when calling &lt;tt&gt;SlingContext.resourceResolver&lt;/tt&gt; a 2nd time.&lt;br/&gt;
In general, if you stick to the rule: The method/class creating a Closeable should also be responsible for closing it, you should be fine.&lt;/p&gt;

&lt;p&gt;Having a method closing a resource resolver which it gets as parameter is definitely unexpected and should be fixed in your code.&lt;/p&gt;

&lt;p&gt;IMHO the SlingContext behaves correct here and should fail with an exception if someone else closed the resource resolver being opened by SlingContext.&lt;/p&gt;</comment>
                            <comment id="15288523" author="jenslauterbach" created="Wed, 18 May 2016 06:39:35 +0000"  >&lt;p&gt;You are of course totally right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwindszus&quot; class=&quot;user-hover&quot; rel=&quot;kwindszus&quot;&gt;kwindszus&lt;/a&gt;. Normally, only the class/method creating the resource resolver should close it. My example was a bit misleading in that I was trying to use the mocks &lt;tt&gt;resolver()&lt;/tt&gt; as return value of my &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt;. Those of my classes that use the RRF were all meant to get their &quot;own&quot; RR. So in fact my classes would have been the owner. The problem of course is that the mock/unit test environment is different in that regard since the &lt;tt&gt;SlingContext&lt;/tt&gt; is the owner of the RR and will try to close it after my classes under test did. Resulting in the error. So the better question is: How can I have a mock RRF?&lt;/p&gt;</comment>
                            <comment id="15288552" author="kwin" created="Wed, 18 May 2016 07:18:04 +0000"  >&lt;p&gt;I would rather propose then to expose the resource resolver factory from the SlingContext. That could be used then to create new ResourceResolvers.&lt;/p&gt;</comment>
                            <comment id="15288554" author="jenslauterbach" created="Wed, 18 May 2016 07:20:59 +0000"  >&lt;p&gt;That&apos;s what I was thinking about too. Internally the &lt;tt&gt;SlingContextImpl&lt;/tt&gt; already uses a &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt;. But I am not sure if this is something that the Sling maintainers are interested in. &lt;/p&gt;</comment>
                            <comment id="15293623" author="jenslauterbach" created="Fri, 20 May 2016 16:12:10 +0000"  >&lt;p&gt;You can get a &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt; if you do something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyTest {
    @Rule
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SlingContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingContext(ResourceResolverType.JCR_MOCK);

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void myTest() {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ResourceResolverFactory = context.getService(ResourceResolverFactory.class);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Even better: The &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt; is injected if you use the &lt;tt&gt;SlingContext&lt;/tt&gt;&#160;method &lt;tt&gt;registerInjectActivateService()&lt;/tt&gt; as long as you have the appropriate &lt;tt&gt;bind()&lt;/tt&gt; and &lt;tt&gt;unbind()&lt;/tt&gt; methods in the your class.&lt;/p&gt;</comment>
                            <comment id="15322152" author="kwin" created="Thu, 9 Jun 2016 08:35:56 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5769&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5769&lt;/a&gt; for this enhancement.&lt;/p&gt;</comment>
                            <comment id="15322153" author="kwin" created="Thu, 9 Jun 2016 08:37:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jenslauterbach&quot; class=&quot;user-hover&quot; rel=&quot;jenslauterbach&quot;&gt;jenslauterbach&lt;/a&gt; Since you found a workaround and the exposure of the resource resolver factory is now tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5769&quot; title=&quot;Expose resource resolver factory from SlingContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5769&quot;&gt;&lt;del&gt;SLING-5769&lt;/del&gt;&lt;/a&gt; I close this issue as Won&apos;t Fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12977139">SLING-5769</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12803436" name="resourceResolverIsLive.patch" size="848" author="jenslauterbach" created="Wed, 11 May 2016 14:07:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xkpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5718] Pipes size parameter is ignored</title>
                <link>https://issues.apache.org/jira/browse/SLING-5718</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &quot;size&quot; parameter which can be passed in when executing a Pipe is ignored.&lt;/p&gt;

&lt;p&gt;line 92 of PlumbServlet.Java gets it&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; size = request.getParameter(PARAM_SIZE) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(request.getParameter(PARAM_SIZE)) : NB_MAX;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but it is never used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12966875">SLING-5718</key>
            <summary>Pipes size parameter is ignored</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="jshurmer">Jordan Shurmer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 May 2016 15:51:00 +0000</created>
                <updated>Fri, 14 Oct 2016 08:06:40 +0000</updated>
                            <resolved>Wed, 11 May 2016 07:11:50 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                        <comments>
                            <comment id="15278325" author="jshurmer" created="Tue, 10 May 2016 15:52:47 +0000"  >&lt;p&gt;Attached the Path to fix this. The documentation does not need updating as it already calls out this feature.&lt;/p&gt;</comment>
                            <comment id="15278525" author="npeltier" created="Tue, 10 May 2016 17:36:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jshurmer&quot; class=&quot;user-hover&quot; rel=&quot;jshurmer&quot;&gt;jshurmer&lt;/a&gt; looks good to me, just maybe the &amp;lt;0 checks seems overkill to me.&lt;br/&gt;
(i don&apos;t have commit rights by the way, so you&apos;ll have to wait for a commiter to see this)&lt;/p&gt;</comment>
                            <comment id="15278618" author="jshurmer" created="Tue, 10 May 2016 18:18:52 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;. Thanks for taking a look.&lt;/p&gt;

&lt;p&gt;I was wanting to see all the results in the project I was working on, without knowing for sure how many would be affected ahead of time. That&apos;s why I added the &amp;lt;0 check. If you give size=-1 then all the results will be returned.&lt;/p&gt;</comment>
                            <comment id="15279687" author="olli" created="Wed, 11 May 2016 07:11:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1743321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1743321&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jshurmer&quot; class=&quot;user-hover&quot; rel=&quot;jshurmer&quot;&gt;jshurmer&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12803261" name="SLING-5718.patch" size="3178" author="jshurmer" created="Tue, 10 May 2016 15:52:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xhcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5715] Random NoRouteToHostException in Teleporter Client MultipartAdapter method</title>
                <link>https://issues.apache.org/jira/browse/SLING-5715</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We observe on jenkins jobs that randomly serverside tests are failing due to &quot;java.net.NoRouteToHostException: Cannot assign requested address&quot;&lt;/p&gt;

&lt;p&gt;This is apparently always coming from &quot;org.apache.sling.testing.teleporter.client.MultipartAdapter.&amp;lt;init&amp;gt;(MultipartAdapter.java:42)&quot;&lt;/p&gt;

&lt;p&gt;It would be good to check if the implementation is not using &quot;old&quot; or unstable API. maybe replacing it using http component API would help to make it more stable.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;06:48:39 [INFO] java.net.NoRouteToHostException: Cannot assign requested address
06:48:39 [INFO] 	at java.net.PlainSocketImpl.socketConnect(Native Method)
06:48:39 [INFO] 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:345)
06:48:39 [INFO] 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
06:48:39 [INFO] 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
06:48:39 [INFO] 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
06:48:39 [INFO] 	at java.net.Socket.connect(Socket.java:589)
06:48:39 [INFO] 	at java.net.Socket.connect(Socket.java:538)
06:48:39 [INFO] 	at sun.net.NetworkClient.doConnect(NetworkClient.java:180)
06:48:39 [INFO] 	at sun.net.www.http.HttpClient.openServer(HttpClient.java:432)
06:48:39 [INFO] 	at sun.net.www.http.HttpClient.openServer(HttpClient.java:527)
06:48:39 [INFO] 	at sun.net.www.http.HttpClient.&amp;lt;init&amp;gt;(HttpClient.java:211)
06:48:39 [INFO] 	at sun.net.www.http.HttpClient.New(HttpClient.java:308)
06:48:39 [INFO] 	at sun.net.www.http.HttpClient.New(HttpClient.java:326)
06:48:39 [INFO] 	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1168)
06:48:39 [INFO] 	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1104)
06:48:39 [INFO] 	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:998)
06:48:39 [INFO] 	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:932)
06:48:39 [INFO] 	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1282)
06:48:39 [INFO] 	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1257)
06:48:39 [INFO] 	at org.apache.sling.testing.teleporter.client.MultipartAdapter.&amp;lt;init&amp;gt;(MultipartAdapter.java:42)
06:48:39 [INFO] 	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.uninstallBundle(TeleporterHttpClient.java:92)
06:48:39 [INFO] 	at org.apache.sling.testing.teleporter.client.ClientSideTeleporter$2.evaluate(ClientSideTeleporter.java:174)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is same for uninstall and install bundle operation of Teleporter. Maybe it could be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5352&quot; title=&quot;TeleporterRule test bundles should be installed once per test class only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5352&quot;&gt;SLING-5352&lt;/a&gt;, as the test class contains ~115 tests, and maybe that produce issues when Teleporter install/uninstall quickly so many test / bundle.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12966004">SLING-5715</key>
            <summary>Random NoRouteToHostException in Teleporter Client MultipartAdapter method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="petitbear68">Thierry Yg&#233;</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 May 2016 09:11:22 +0000</created>
                <updated>Wed, 14 Sep 2016 21:14:42 +0000</updated>
                            <resolved>Wed, 18 May 2016 14:12:18 +0000</resolved>
                                    <version>JUnit Tests Teleporter 1.0.4</version>
                                    <fixVersion>JUnit Tests Teleporter 1.0.8</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15277747" author="bdelacretaz" created="Tue, 10 May 2016 07:37:33 +0000"  >&lt;p&gt;I suspect it might be a connection or other network related resource that&apos;s not released properly, in which case running lots of tests quickly should make this more likely. Does that match your observations? Or do you have other hints on how to reproduce this issue?&lt;/p&gt;</comment>
                            <comment id="15277757" author="kwin" created="Tue, 10 May 2016 07:42:32 +0000"  >&lt;p&gt;It would be good to check the TCP connections and their state once that happens. It may be related to &lt;a href=&quot;http://stackoverflow.com/a/31877033&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/a/31877033&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15277768" author="kwin" created="Tue, 10 May 2016 07:57:02 +0000"  >&lt;p&gt;To me it seems that &lt;a href=&quot;https://github.com/apache/sling/blob/c9e59667d8f9cd698bc33a51f3e6a22e85d4a952/testing/junit/teleporter/src/main/java/org/apache/sling/testing/teleporter/client/TeleporterHttpClient.java#L142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/c9e59667d8f9cd698bc33a51f3e6a22e85d4a952/testing/junit/teleporter/src/main/java/org/apache/sling/testing/teleporter/client/TeleporterHttpClient.java#L142&lt;/a&gt; is not consuming the input stream and therefore might lead to the socket not being reused (&lt;a href=&quot;http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-keepalive.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-keepalive.html&lt;/a&gt;). The response stream should always be consumed and then closed (then &lt;tt&gt;disconnect&lt;/tt&gt; does not need to be called at all, &lt;a href=&quot;http://stackoverflow.com/questions/4767553/safe-use-of-httpurlconnection&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/4767553/safe-use-of-httpurlconnection&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15281364" author="bdelacretaz" created="Thu, 12 May 2016 09:29:17 +0000"  >&lt;p&gt;I have added a test at &lt;a href=&quot;http://svn.apache.org/r1743486&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1743486&lt;/a&gt; which fails with various network-related exception if executed with &lt;tt&gt;-D sling.getstatus.test.count=100000&lt;/tt&gt;. I&apos;ll try Konrad&apos;s suggestion now (which seems to make sense).&lt;/p&gt;</comment>
                            <comment id="15281446" author="bdelacretaz" created="Thu, 12 May 2016 12:02:13 +0000"  >&lt;p&gt;I have improved the HttpURLConnection cleanup in &lt;a href=&quot;http://svn.apache.org/r1743493&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1743493&lt;/a&gt; based on the pointers provided by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, thanks very much for that!&lt;/p&gt;

&lt;p&gt;With these changes the &lt;tt&gt;TeleporterHttpClientTest&lt;/tt&gt; passes with &lt;tt&gt;-D sling.getstatus.test.count=100000&lt;/tt&gt;, which failed before, so it looks like this fixes Thierry&apos;s issue. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tyge&quot; class=&quot;user-hover&quot; rel=&quot;tyge&quot;&gt;tyge&lt;/a&gt; can you cross-check and confirm? I&apos;ll mark this issue fixed but feel free to reopen if that&apos;s not the case.&lt;/p&gt;</comment>
                            <comment id="15286327" author="bdelacretaz" created="Tue, 17 May 2016 09:54:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; reports getting a &lt;tt&gt;NoClassDefFoundError: Could not initialize class java.net.ProxySelector&lt;/tt&gt; in tests after my latest changes (attached konrad-issue.txt). I have committed a tentative patch for that in &lt;a href=&quot;http://svn.apache.org/r1744231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1744231&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15289025" author="bdelacretaz" created="Wed, 18 May 2016 14:12:18 +0000"  >&lt;p&gt;Konrad&apos;s issue was unrelated to this, it&apos;s been fixed in &lt;a href=&quot;https://svn.apache.org/r1744390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1744390&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12968323">SLING-5724</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12804377" name="konrad-issue.txt" size="4970" author="bdelacretaz" created="Tue, 17 May 2016 09:54:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xc1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5712] JUnit Tests Teleporter does not (compile) work on Windows as expected</title>
                <link>https://issues.apache.org/jira/browse/SLING-5712</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Checked out sling trunk, the build fails on Windows 7 because of 3 failing tests on Teleporter module .&lt;br/&gt;
See attachment &quot;TEST-org.apache.sling.testing.teleporter.client.ClassResourceVisitorTest.xml&quot;&lt;/p&gt;

&lt;p&gt;This happens because the tests expectation is to find the resources with a path unix like.&lt;br/&gt;
Originally I tried to fix the issue by putting as expectation in the tests code like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     assertResource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;/somepath/two.txt&quot;&lt;/span&gt;).getPath(), &lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;instead of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     assertResource(&lt;span class=&quot;code-quote&quot;&gt;&quot;/somepath/two.txt&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to have the expectation not OS dependent.&lt;/p&gt;

&lt;p&gt;This was a good fix for the failing tests under Teleporter module but unfortunately this fix causes RepoInitIT integration test failure because the resource name returned by Teleporter ClassResourceVisitor used to create test bundles inside ClientSideTeleporter#buildTestBundle must use &apos;/&apos; style slashes, not &apos;\&apos; because of undocumented quirks of JDK:&lt;br/&gt;
see org.ops4j.pax.tinybundles.core.intern.RawBuilder#build&lt;br/&gt;
adding one entry into jars using class java.util.jar.JarEntry with entry name like &quot;\name&quot; will create a jar containing a folder with an empty name containing the resource.&lt;br/&gt;
Unfortunately resources in Windows are returned with a path with backslashes.&lt;/p&gt;

&lt;p&gt;see attachments: &quot;TEST-org.apache.sling.repoinit.it.RepoInitIT.xml&quot; &quot;tinybundle-bundle-with-back-slash-as-resource-name.jar&quot;&lt;/p&gt;

&lt;p&gt;So I had to do a dirty fix: replace inside ClassResourceVisitor#processFile all &quot;\&quot; with &quot;/&quot;.&lt;br/&gt;
Will be correct to do a fix inside JDK or TinyBundles library, but it depends also by what is expected to have in resourcePath parameter of method ClassResourceVisitor.Processor#process; a resource name with &quot;\&quot; or &quot;/&quot; regardless of operating system.&lt;/p&gt;

&lt;p&gt;See &quot;windows.patch&quot;&lt;/p&gt;

</description>
                <environment>Windows 7 + Cygwin</environment>
        <key id="12965282">SLING-5712</key>
            <summary>JUnit Tests Teleporter does not (compile) work on Windows as expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="lelelombardi@libero.it">Emanuele Lombardi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 May 2016 13:54:55 +0000</created>
                <updated>Wed, 14 Sep 2016 21:14:40 +0000</updated>
                            <resolved>Thu, 19 May 2016 11:40:07 +0000</resolved>
                                    <version>JUnit Tests Teleporter 1.0.6</version>
                                    <fixVersion>JUnit Tests Teleporter 1.0.8</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15280181" author="bdelacretaz" created="Wed, 11 May 2016 14:16:47 +0000"  >&lt;p&gt;Thanks for your contribution! I have applied a slightly modified version of your patch at &lt;a href=&quot;http://svn.apache.org/r1743376&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1743376&lt;/a&gt; , can you cross-check?&lt;/p&gt;</comment>
                            <comment id="15283957" author="lelelombardi@libero.it" created="Sun, 15 May 2016 20:43:14 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
Thanks to having applied the patch.&lt;br/&gt;
I did a cross-check and there is a problem into SanitizeResourceNameTest.&lt;br/&gt;
At line 46 &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.basePath = File.separator + basePath
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; should be &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.basePath = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(File.separator + basePath).getAbsolutePath()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This because in Windows when a File starts with root and the methodgetAbsolutePath() is invoked the root is replaced by C:\ (C or your drive letter)&lt;/p&gt;

&lt;p&gt;In the method ClassResourceVisitor#sanitizeResourceName if basePath is &quot;\something&quot; instead of &quot;C:\something&quot; we will miss 2 characters to be deleted when substring method is invoked on resource.getAbsolutePath() that will be something like C:\resourceabsolutepath.&lt;/p&gt;

&lt;p&gt;Attached a new patch.&lt;/p&gt;</comment>
                            <comment id="15286243" author="bdelacretaz" created="Tue, 17 May 2016 08:52:38 +0000"  >&lt;p&gt;Thanks very much for this new patch, I have applied it in &lt;a href=&quot;http://svn.apache.org/r1744215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1744215&lt;/a&gt; , please cross-check!&lt;/p&gt;</comment>
                            <comment id="15290915" author="lelelombardi@libero.it" created="Thu, 19 May 2016 11:15:21 +0000"  >&lt;p&gt;Double checked, everything is ok.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15290956" author="bdelacretaz" created="Thu, 19 May 2016 11:40:07 +0000"  >&lt;p&gt;Ok, thanks! Marking this resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12804080" name="SanitizeResourceNameTest.patch" size="1269" author="lelelombardi@libero.it" created="Sun, 15 May 2016 20:43:14 +0000"/>
                            <attachment id="12802415" name="TEST-org.apache.sling.repoinit.it.RepoInitIT.xml" size="8076" author="lelelombardi@libero.it" created="Thu, 5 May 2016 13:55:34 +0000"/>
                            <attachment id="12802416" name="TEST-org.apache.sling.testing.teleporter.client.ClassResourceVisitorTest.xml" size="8862" author="lelelombardi@libero.it" created="Thu, 5 May 2016 13:55:34 +0000"/>
                            <attachment id="12804081" name="TEST-org.apache.sling.testing.teleporter.client.SanitizeResourceNameTest.xml" size="9003" author="lelelombardi@libero.it" created="Sun, 15 May 2016 20:54:49 +0000"/>
                            <attachment id="12802417" name="tinybundle-bundle-with-back-slash-as-resource-name.jar" size="9662" author="lelelombardi@libero.it" created="Thu, 5 May 2016 13:55:34 +0000"/>
                            <attachment id="12802418" name="windows.patch" size="3308" author="lelelombardi@libero.it" created="Thu, 5 May 2016 13:55:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x7kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5710] Injectable methods on super-interfaces are not injected</title>
                <link>https://issues.apache.org/jira/browse/SLING-5710</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When an interface extends another interface, the injectable methods on the super interface are not injected correctly. This is because we use `Class.getSuperclass()` to get the parent classes which doesn&apos;t work if the model class is actually an interface.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12964720">SLING-5710</key>
            <summary>Injectable methods on super-interfaces are not injected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 May 2016 16:46:55 +0000</created>
                <updated>Fri, 9 Sep 2016 13:20:54 +0000</updated>
                            <resolved>Mon, 9 May 2016 16:06:24 +0000</resolved>
                                    <version>Sling Models Impl 1.2.6</version>
                                    <fixVersion>Sling Models Impl 1.2.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15269042" author="justinedelson" created="Tue, 3 May 2016 16:47:47 +0000"  >&lt;p&gt;fixed in r1742144 with unit test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x43r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5709] OakViewChecker#updateProperties() issueHeartbeat: discoveryService is null</title>
                <link>https://issues.apache.org/jira/browse/SLING-5709</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-05-03 08:12:21,647 | ERROR | odeStoreService) | OakViewChecker                   | issueHeartbeat: discoveryService is null
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling.discovery.base/1.1.3-SNAPSHOT&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling.discovery.oak/1.2.7-SNAPSHOT&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>Karaf 4.0.5</environment>
        <key id="12964568">SLING-5709</key>
            <summary>OakViewChecker#updateProperties() issueHeartbeat: discoveryService is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 May 2016 09:04:15 +0000</created>
                <updated>Thu, 29 Sep 2016 15:00:17 +0000</updated>
                            <resolved>Wed, 21 Sep 2016 20:52:31 +0000</resolved>
                                    <version>Discovery Base 1.1.2</version>
                    <version>Discovery Oak 1.2.6</version>
                                    <fixVersion>Discovery Oak 1.2.14</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15511138" author="olli" created="Wed, 21 Sep 2016 20:52:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1761753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1761753&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6065&quot; title=&quot;in discovery: avoid OakViewChecker issueHeartbeat: discoveryService is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6065&quot;&gt;&lt;del&gt;SLING-6065&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13006507">SLING-6065</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x35z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5706] testing junit rules - add documentation with examples</title>
                <link>https://issues.apache.org/jira/browse/SLING-5706</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Add a documentation with examples of how to start an integration test using the testing/junit/rules and testing/http/clients&lt;/p&gt;</description>
                <environment></environment>
        <key id="12964244">SLING-5706</key>
            <summary>testing junit rules - add documentation with examples</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                            <label>testing-http-clients</label>
                            <label>testing-http-rules</label>
                    </labels>
                <created>Mon, 2 May 2016 10:04:10 +0000</created>
                <updated>Tue, 3 May 2016 08:20:46 +0000</updated>
                            <resolved>Tue, 3 May 2016 08:20:46 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15266316" author="andrei.dulvac" created="Mon, 2 May 2016 10:05:54 +0000"  >&lt;p&gt;Attached patch with README.md for junit/rules.&lt;br/&gt;
To be applied from the sling project root with &lt;tt&gt;patch -p0 -i &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5706&quot; title=&quot;testing junit rules - add documentation with examples&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5706&quot;&gt;&lt;del&gt;SLING-5706&lt;/del&gt;&lt;/a&gt;.patch&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15266927" author="andrei.dulvac" created="Mon, 2 May 2016 16:31:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, Could you help me with this? &lt;/p&gt;</comment>
                            <comment id="15268347" author="bdelacretaz" created="Tue, 3 May 2016 08:20:46 +0000"  >&lt;p&gt;Thanks for your patch, applied in revision 1742067&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12801712" name="SLING-5706.patch" size="3212" author="andrei.dulvac" created="Mon, 2 May 2016 10:05:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x15z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5703] Split sling-testing-tools and improve the http clients and junit tooling</title>
                <link>https://issues.apache.org/jira/browse/SLING-5703</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The sling-testing-tools &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; has become a container for different small pieces of code that don&apos;t fit in the other projects under testing/ . What I have identified to be unrelated tools in there are:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;jarexec + serversetup&lt;/li&gt;
	&lt;li&gt;http clients&lt;/li&gt;
	&lt;li&gt;some junit tooling&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We would like to also contribute some classes that improve the http and junit tooling. The changes are:&lt;/p&gt;

&lt;p&gt;The changes would be the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;leave the tools/ (sling testing tools) untouched, with the idea to eventually deprecate it if the other modules fit the needs.&lt;/li&gt;
	&lt;li&gt;create a new module, called serversetup with the jarexec and serversetup packages copied from sling-testing-tools.&lt;/li&gt;
	&lt;li&gt;create module http/clients with some stuff like the WebconsoleClient copied from tools/ and a bunch of classes that replace the RequestExecutor and client with Threadsafe, well-tested and HttpClient-compatible http tooling.&lt;/li&gt;
	&lt;li&gt;create module junit/rules with junit tooling dependent on the clients which follow the more modern approach to junit rules rather than test base classes and provide ootb rules with clients, junit filtering, configuring references to available sling instances, etc. Both this and clients are designed with extendability  in mind.&lt;/li&gt;
	&lt;li&gt;adapt the &quot;testing/samples&quot; tests to use the junit rules and clients&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Pull-request on github: &lt;a href=&quot;https://github.com/apache/sling/pull/136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/136&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12963856">SLING-5703</key>
            <summary>Split sling-testing-tools and improve the http clients and junit tooling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                            <label>sling-testing-tools</label>
                            <label>testing</label>
                            <label>testing-http-clients</label>
                    </labels>
                <created>Fri, 29 Apr 2016 13:35:07 +0000</created>
                <updated>Thu, 12 May 2016 13:03:46 +0000</updated>
                            <resolved>Fri, 29 Apr 2016 14:31:02 +0000</resolved>
                                                                    <component>Testing</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15264053" author="githubbot" created="Fri, 29 Apr 2016 13:36:35 +0000"  >&lt;p&gt;GitHub user dulvac opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/136&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Sling testing tools split and http and rules contribution&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5703&quot; title=&quot;Split sling-testing-tools and improve the http clients and junit tooling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5703&quot;&gt;&lt;del&gt;SLING-5703&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dulvac/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dulvac/sling&lt;/a&gt; sling-testing-tools&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/136.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/136.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #136&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 18b4762de5e0ee43e3ec3231900a9f83f6dce861&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-22T09:35:24Z&lt;/p&gt;

&lt;p&gt;    Split http clients and serversetup modules from sling-testing-tools&lt;/p&gt;

&lt;p&gt;commit 581e70e2f2c5ca9c14bba7511aade75547cf479b&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-22T14:41:05Z&lt;/p&gt;

&lt;p&gt;    Added patches from it-framework&lt;/p&gt;

&lt;p&gt;commit b9491c2bec447400b45e09a6dac3bdbc6f653e57&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-25T13:42:58Z&lt;/p&gt;

&lt;p&gt;    Added rules module&lt;/p&gt;

&lt;p&gt;commit 5d44784e3f91acf2e2e244aebf79d87301d18306&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-25T15:13:44Z&lt;/p&gt;

&lt;p&gt;    Added readme for http/clients&lt;/p&gt;

&lt;p&gt;commit d9582dec918537762ace36a7c5b202b09e1024c3&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-25T15:16:33Z&lt;/p&gt;

&lt;p&gt;    @trivial Fixed javadoc link&lt;/p&gt;

&lt;p&gt;commit 44b977c65a0fff1928ddc2320c326e5d47bde367&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-28T11:50:35Z&lt;/p&gt;

&lt;p&gt;    Removed microdata and HtmlClient + renamed *Quickstart to *Instance&lt;/p&gt;

&lt;p&gt;commit acda2659f1766be62a401cf95b2b8357c82a1185&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-28T15:07:25Z&lt;/p&gt;

&lt;p&gt;    Added SlingBaseInstanceRule which uses SlingTestBase for now to start an instance if needed&lt;/p&gt;

&lt;p&gt;commit b7511bc4521f27ce2fbd7279d7c80b1b34fb7b61&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-28T15:08:30Z&lt;/p&gt;

&lt;p&gt;    Adapted samples to use http/rules and http/clients&lt;/p&gt;

&lt;p&gt;commit 804a5841a2144726e457bfce5030a0da29c3df48&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-28T15:45:53Z&lt;/p&gt;

&lt;p&gt;    Moved http/rules to junit/rules and removed &apos;Base&apos; from rule names&lt;/p&gt;

&lt;p&gt;commit 42b2b0ece0b472baf07a2b2bad5f310ababeca3d&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-28T15:46:36Z&lt;/p&gt;

&lt;p&gt;    Moved http/rules to junit/rules and removed &apos;Base&apos; from rule names&lt;/p&gt;

&lt;p&gt;commit 6a0eecdd8256f2d8ef460300947d72e4a0b5b420&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-29T07:53:41Z&lt;/p&gt;

&lt;p&gt;    Added bundlewit FilterIT test&lt;/p&gt;

&lt;p&gt;commit fa2a39f0562d3b6f418ff7f97563872cfd848b5a&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-29T13:08:48Z&lt;/p&gt;

&lt;p&gt;    Added clean plugin + rat plugin inclusion for sling/&lt;/p&gt;

&lt;p&gt;commit 03fde18f50f718100ab24016f31bdce98c0bb230&lt;br/&gt;
Author: Andrei Dulvac &amp;lt;adulvac@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-04-29T13:11:50Z&lt;/p&gt;

&lt;p&gt;    trivial: Changed code comment&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15264122" author="bdelacretaz" created="Fri, 29 Apr 2016 14:31:02 +0000"  >&lt;p&gt;Thanks for your contribution! I have committed it in several stages which should be independent, revisions 1741631, 1741632, 1741636, 1741637&lt;/p&gt;

&lt;p&gt;Also added a deprecation note to testing/tools in revision 1741639 and created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5704&quot; title=&quot;Move the deprecated testing/tools to contrib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5704&quot;&gt;&lt;del&gt;SLING-5704&lt;/del&gt;&lt;/a&gt; to eventually move it to contrib.&lt;/p&gt;

&lt;p&gt;Marking this ticket fixed, we&apos;ll create more specific tickets if needed.&lt;/p&gt;</comment>
                            <comment id="15264123" author="bdelacretaz" created="Fri, 29 Apr 2016 14:31:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrei.dulvac&quot; class=&quot;user-hover&quot; rel=&quot;andrei.dulvac&quot;&gt;andrei.dulvac&lt;/a&gt; please double check my commits, trunk should have your complete contribution now.&lt;/p&gt;</comment>
                            <comment id="15264158" author="andrei.dulvac" created="Fri, 29 Apr 2016 14:57:59 +0000"  >&lt;p&gt;All looks great, thanks Bertrand.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12968436">SLING-5725</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12963864">SLING-5704</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12968323">SLING-5724</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wyrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5702] SlingFileUploadHandler creates unnecessary chunk when upload part is empty</title>
                <link>https://issues.apache.org/jira/browse/SLING-5702</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;SlingFileUploadHandler in &lt;a href=&quot;https://github.com/apache/sling/blob/ded7f8d657ff54711d6e9bd7d6f76cca67c89df6/bundles/servlets/post/src/main/java/org/apache/sling/servlets/post/impl/helper/SlingFileUploadHandler.java#L311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;processChunk&lt;/tt&gt;&lt;/a&gt; can create an oddly formatted chunk when &lt;tt&gt;value.getSize()==0&lt;/tt&gt; - ie when an upload doesn&apos;t actually upload anything. This has been seen in a production case. It&apos;s not yet clear why &lt;tt&gt;processChunk&lt;/tt&gt; is called with a data length of zero.&lt;/p&gt;

&lt;p&gt;The result is that you&apos;ll have a chunk named &apos;&lt;tt&gt;chunk_n_n-1&lt;/tt&gt;&apos; which later on causes troubles when running the &lt;tt&gt;ChunkCleanUpTask&lt;/tt&gt; (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5701&quot; title=&quot;ChunkCleanUpTask runs into an endless loop with empty chunks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5701&quot;&gt;&lt;del&gt;SLING-5701&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12963837">SLING-5702</key>
            <summary>SlingFileUploadHandler creates unnecessary chunk when upload part is empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Apr 2016 12:33:30 +0000</created>
                <updated>Fri, 20 May 2016 12:55:26 +0000</updated>
                            <resolved>Fri, 20 May 2016 12:55:26 +0000</resolved>
                                    <version>Servlets Post 2.3.10</version>
                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15281268" author="cziegeler" created="Thu, 12 May 2016 07:13:42 +0000"  >&lt;p&gt;Looking at the code, I don&apos;t see how this can happen, SlingFileUploadHandler#setFile in line 521 does this:&lt;br/&gt;
            if (value.isFormField() || value.getSize() &amp;lt;= 0) &lt;/p&gt;
{
                continue;
            }</comment>
                            <comment id="15286249" author="egli" created="Tue, 17 May 2016 08:57:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, good point, from a code point of view it doesn&apos;t seem obvious that this can happen (but I&apos;ve seen it happen, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5701&quot; title=&quot;ChunkCleanUpTask runs into an endless loop with empty chunks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5701&quot;&gt;&lt;del&gt;SLING-5701&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
Could it be that &lt;tt&gt;value.getSize()&lt;/tt&gt; changes over time (during the &lt;tt&gt;setFile&lt;/tt&gt; call)?&lt;/p&gt;</comment>
                            <comment id="15293307" author="cziegeler" created="Fri, 20 May 2016 12:55:11 +0000"  >&lt;p&gt;I can&apos;t see how that could happen. I think the problem is maybe generated by some other code running in parallel&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12964228">SLING-5705</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12963836">SLING-5701</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wynr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5701] ChunkCleanUpTask runs into an endless loop with empty chunks</title>
                <link>https://issues.apache.org/jira/browse/SLING-5701</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Normally chunks created by the SlingFileUploadHandler are formatted the following way:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./chunk_0_19999
./chunk_20000_39999
./chunk_40000_45123
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However consider a chunk which is formatted as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./chunk_45124_45123
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this will cause &lt;a href=&quot;https://github.com/apache/sling/blob/ded7f8d657ff54711d6e9bd7d6f76cca67c89df6/bundles/servlets/post/src/main/java/org/apache/sling/servlets/post/impl/helper/SlingFileUploadHandler.java#L487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SlingFileUploadHandler.getLastChunk&lt;/a&gt; to enter an endless loop as it repeatedly sets the &lt;tt&gt;startPattern&lt;/tt&gt; to &quot;&lt;tt&gt;./chunk_45124_45123&lt;/tt&gt;&quot; in the above case. Generally speaking, when you have a chunk named &apos;&lt;tt&gt;chunk_n_n-1&lt;/tt&gt;&apos; &lt;tt&gt;getLastChunk&lt;/tt&gt; will do an endless loop.&lt;/p&gt;

&lt;p&gt;You can also think of other scenarios where &lt;tt&gt;getLastChunk&lt;/tt&gt; does an endless loop - basically, whenever the &lt;tt&gt;indexBounds&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/tt&gt; is lower than &lt;tt&gt;indexBounds&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/tt&gt; and hits an existing chunk name.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12963836">SLING-5701</key>
            <summary>ChunkCleanUpTask runs into an endless loop with empty chunks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Apr 2016 12:33:02 +0000</created>
                <updated>Thu, 26 Sep 2019 12:41:00 +0000</updated>
                            <resolved>Thu, 12 May 2016 08:12:58 +0000</resolved>
                                    <version>Servlets Post 2.3.10</version>
                                    <fixVersion>Servlets Post 2.3.12</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15264102" author="egli" created="Fri, 29 Apr 2016 14:12:17 +0000"  >&lt;p&gt;Attaching &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12801461/12801461_SLING-5701.patch&quot; title=&quot;SLING-5701.patch attached to SLING-5701&quot;&gt;SLING-5701.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which implements a chunk &apos;corrupt-stable&apos; getLastChunk variant, appreciating reviews, comments.&lt;/p&gt;</comment>
                            <comment id="15266358" author="egli" created="Mon, 2 May 2016 10:29:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shgupta&quot; class=&quot;user-hover&quot; rel=&quot;shgupta&quot;&gt;shgupta&lt;/a&gt;, as this fix is concerning part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2707&quot; title=&quot;Support of chunked file upload into Sling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2707&quot;&gt;&lt;del&gt;SLING-2707&lt;/del&gt;&lt;/a&gt;, would you be able to review the suggested patch? Also, I was wondering where did &lt;tt&gt;SlingPostChunkUploadTest&lt;/tt&gt; of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2707&quot; title=&quot;Support of chunked file upload into Sling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2707&quot;&gt;&lt;del&gt;SLING-2707&lt;/del&gt;&lt;/a&gt; go, did that make it into some IT? (I was keen to figure out if we have any testing that covers the cleanup)&lt;br/&gt;
Thx! &lt;br/&gt;
/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15266383" author="shgupta" created="Mon, 2 May 2016 10:48:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; please find test class at &lt;a href=&quot;https://github.com/shashank-itbhu/sling/blob/trunk/testing/samples/integration-tests/src/test/java/org/apache/sling/testing/samples/integrationtests/serverside/sling/post/SlingPostChunkUploadTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/shashank-itbhu/sling/blob/trunk/testing/samples/integration-tests/src/test/java/org/apache/sling/testing/samples/integrationtests/serverside/sling/post/SlingPostChunkUploadTest.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15281310" author="cziegeler" created="Thu, 12 May 2016 08:12:58 +0000"  >&lt;p&gt;Applied the patch&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12963837">SLING-5702</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12964228">SLING-5705</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12801461" name="SLING-5701.patch" size="1931" author="stefanegli" created="Fri, 29 Apr 2016 14:12:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wynj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5698] Failure registering MBean HealthCheckMBean [healthCheck=[org.apache.sling.hc.api.HealthCheck]]</title>
                <link>https://issues.apache.org/jira/browse/SLING-5698</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-04-28 22:12:35,095 | ERROR | eActionProvider) | MBeanHolder                      | 16 - org.apache.aries.jmx.whiteboard - 1.1.5 | register: Failure registering MBean HealthCheckMBean [healthCheck=[org.apache.sling.hc.api.HealthCheck]]
javax.management.InstanceAlreadyExistsException: org.apache.sling.healthcheck:type=HealthCheck,name=slingDiscoveryOakSynchronizedClocks
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)[:1.8.0_74]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)[:1.8.0_74]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)[:1.8.0_74]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)[:1.8.0_74]
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)[:1.8.0_74]
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)[:1.8.0_74]
	at org.apache.aries.jmx.whiteboard.MBeanHolder.register(MBeanHolder.java:114)
	at org.apache.aries.jmx.whiteboard.JmxWhiteboardSupport.registerMBean(JmxWhiteboardSupport.java:86)
	at org.apache.aries.jmx.whiteboard.Activator$MBeanTracker.addingService(Activator.java:102)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901)[org.osgi.core-6.0.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:322)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.sling.hc.jmx.impl.HealthCheckMBeanCreator$Registration.register(HealthCheckMBeanCreator.java:182)
	at org.apache.sling.hc.jmx.impl.HealthCheckMBeanCreator.registerHCMBean(HealthCheckMBeanCreator.java:129)
	at org.apache.sling.hc.jmx.impl.HealthCheckMBeanCreator.access$000(HealthCheckMBeanCreator.java:48)
	at org.apache.sling.hc.jmx.impl.HealthCheckMBeanCreator$1.addingService(HealthCheckMBeanCreator.java:70)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901)[org.osgi.core-6.0.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:322)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.registerFactory(ResourceResolverFactoryActivator.java:626)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.checkFactoryPreconditions(ResourceResolverFactoryActivator.java:674)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.access$100(ResourceResolverFactoryActivator.java:79)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator$1.providerAdded(ResourceResolverFactoryActivator.java:543)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.register(ResourceProviderTracker.java:196)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.access$200(ResourceProviderTracker.java:59)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.addingService(ResourceProviderTracker.java:124)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901)[org.osgi.core-6.0.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.registerService(AbstractSlingRepositoryManager.java:183)
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.start(AbstractSlingRepositoryManager.java:344)
	at org.apache.sling.oak.server.OakSlingRepositoryManager.activate(OakSlingRepositoryManager.java:326)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.8.0_74]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)[:1.8.0_74]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_74]
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:295)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:302)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:113)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:866)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:833)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:724)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:322)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistration.maybeRegister(SecurityProviderRegistration.java:433)
	at org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistration.bindAuthorizableActionProvider(SecurityProviderRegistration.java:322)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.8.0_74]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)[:1.8.0_74]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_74]
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BindMethod.invoke(BindMethod.java:41)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager.doInvokeBindMethod(DependencyManager.java:1660)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager.invokeBindMethod(DependencyManager.java:1636)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.invokeBindMethod(SingleComponentManager.java:370)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:319)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:295)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.reconfigure(SingleComponentManager.java:627)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.reconfigure(SingleComponentManager.java:566)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.configurationUpdated(ConfigurableComponentHolder.java:419)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.config.ConfigurationSupport.configurationEvent(ConfigurationSupport.java:315)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.cm.impl.ConfigurationManager$FireConfigurationEvent.sendEvent(ConfigurationManager.java:2046)[7:org.apache.felix.configadmin:1.8.8]
	at org.apache.felix.cm.impl.ConfigurationManager$FireConfigurationEvent.run(ConfigurationManager.java:2014)[7:org.apache.felix.configadmin:1.8.8]
	at org.apache.felix.cm.impl.UpdateThread.run0(UpdateThread.java:143)[7:org.apache.felix.configadmin:1.8.8]
	at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:110)[7:org.apache.felix.configadmin:1.8.8]
	at java.lang.Thread.run(Thread.java:745)[:1.8.0_74]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Karaf 4.0.4</environment>
        <key id="12963636">SLING-5698</key>
            <summary>Failure registering MBean HealthCheckMBean [healthCheck=[org.apache.sling.hc.api.HealthCheck]]</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Apr 2016 20:31:24 +0000</created>
                <updated>Mon, 23 Jan 2017 13:51:56 +0000</updated>
                            <resolved>Mon, 23 Jan 2017 13:51:56 +0000</resolved>
                                                    <fixVersion>Karaf Integration Tests 1.0.0</fixVersion>
                    <fixVersion>Karaf Features 1.0.0</fixVersion>
                                    <component>Karaf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12787944">SLING-4575</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12787944">SLING-4575</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wxf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5697] Missing null check in OakViewChecker for slingHomePath</title>
                <link>https://issues.apache.org/jira/browse/SLING-5697</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-04-28 21:16:39,250 | ERROR | eActionProvider) | oak                              | 128 - org.apache.sling.discovery.oak - 1.2.7.SNAPSHOT | [org.apache.sling.discovery.oak.pinger.OakViewChecker(20)] The activate method has thrown an exception
java.lang.NullPointerException: Value should not be null (key = slingHomePath)
	at org.apache.sling.jcr.resource.internal.JcrModifiableValueMap.put(JcrModifiableValueMap.java:440)
	at org.apache.sling.jcr.resource.internal.JcrModifiableValueMap.put(JcrModifiableValueMap.java:47)
	at org.apache.sling.discovery.oak.pinger.OakViewChecker.resetLeaderElectionId(OakViewChecker.java:261)
	at org.apache.sling.discovery.oak.pinger.OakViewChecker.doActivate(OakViewChecker.java:145)
	at org.apache.sling.discovery.base.commons.BaseViewChecker.activate(BaseViewChecker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.8.0_74]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)[:1.8.0_74]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_74]
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:295)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:302)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:113)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:866)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:833)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:774)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:347)
	at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
	at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:344)
	at org.apache.felix.framework.Felix.getService(Felix.java:3699)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.scr.impl.manager.SingleRefPair.getServiceObject(SingleRefPair.java:72)
	at org.apache.felix.scr.impl.helper.BindMethod.getServiceObject(BindMethod.java:646)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager.getServiceObject(DependencyManager.java:2137)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.prebind(DependencyManager.java:1048)
	at org.apache.felix.scr.impl.manager.DependencyManager.prebind(DependencyManager.java:1457)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.collectDependencies(AbstractComponentManager.java:983)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:812)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:724)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:322)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.registerFactory(ResourceResolverFactoryActivator.java:626)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.checkFactoryPreconditions(ResourceResolverFactoryActivator.java:674)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.access$100(ResourceResolverFactoryActivator.java:79)
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator$1.providerAdded(ResourceResolverFactoryActivator.java:543)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.register(ResourceProviderTracker.java:196)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.access$200(ResourceProviderTracker.java:59)
	at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.addingService(ResourceProviderTracker.java:124)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901)[org.osgi.core-6.0.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.registerService(AbstractSlingRepositoryManager.java:183)
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.start(AbstractSlingRepositoryManager.java:344)
	at org.apache.sling.oak.server.OakSlingRepositoryManager.activate(OakSlingRepositoryManager.java:326)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.8.0_74]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)[:1.8.0_74]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_74]
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:295)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:302)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:113)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:866)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:833)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:724)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:322)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistration.maybeRegister(SecurityProviderRegistration.java:433)
	at org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistration.bindAuthorizableActionProvider(SecurityProviderRegistration.java:322)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.8.0_74]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)[:1.8.0_74]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_74]
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.helper.BindMethod.invoke(BindMethod.java:41)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager.doInvokeBindMethod(DependencyManager.java:1660)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager.invokeBindMethod(DependencyManager.java:1636)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.invokeBindMethod(SingleComponentManager.java:370)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:319)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:295)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.reconfigure(SingleComponentManager.java:627)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.manager.SingleComponentManager.reconfigure(SingleComponentManager.java:566)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.configurationUpdated(ConfigurableComponentHolder.java:419)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.config.ConfigurationSupport.configurationEvent(ConfigurationSupport.java:315)[20:org.apache.felix.scr:2.0.2]
	at org.apache.felix.cm.impl.ConfigurationManager$FireConfigurationEvent.sendEvent(ConfigurationManager.java:2046)[7:org.apache.felix.configadmin:1.8.8]
	at org.apache.felix.cm.impl.ConfigurationManager$FireConfigurationEvent.run(ConfigurationManager.java:2014)[7:org.apache.felix.configadmin:1.8.8]
	at org.apache.felix.cm.impl.UpdateThread.run0(UpdateThread.java:143)[7:org.apache.felix.configadmin:1.8.8]
	at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:110)[7:org.apache.felix.configadmin:1.8.8]
	at java.lang.Thread.run(Thread.java:745)[:1.8.0_74]
2016-04-28 21:16:39,260 | ERROR | eActionProvider) | oak                              | 128 - org.apache.sling.discovery.oak - 1.2.7.SNAPSHOT | [org.apache.sling.discovery.oak.pinger.OakViewChecker(20)] Failed creating the component instance; see log for reason
2016-04-28 21:16:39,260 | ERROR | lixDispatchQueue | oak                              | 128 - org.apache.sling.discovery.oak - 1.2.7.SNAPSHOT | FrameworkEvent ERROR - org.apache.sling.discovery.oak
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12963612">SLING-5697</key>
            <summary>Missing null check in OakViewChecker for slingHomePath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Apr 2016 19:46:54 +0000</created>
                <updated>Sun, 17 Jul 2016 12:43:45 +0000</updated>
                            <resolved>Thu, 28 Apr 2016 20:21:36 +0000</resolved>
                                    <version>Discovery Oak 1.2.6</version>
                                    <fixVersion>Discovery Oak 1.2.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15262912" author="olli" created="Thu, 28 Apr 2016 20:21:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1741508&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1741508&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wx9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5674] Validation: IAE thrown in case validation is triggered on a NonExistingResource</title>
                <link>https://issues.apache.org/jira/browse/SLING-5674</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The stack trace whenever the validation is triggered on a &lt;tt&gt;NonExistingResource&lt;/tt&gt; looks like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: ValueMap may not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.validation.impl.ValidationServiceImpl.validateValueMap(ValidationServiceImpl.java:226)
	at org.apache.sling.validation.impl.ValidationServiceImpl.validate(ValidationServiceImpl.java:150)
	at org.apache.sling.validation.impl.ValidationServiceImpl.validate(ValidationServiceImpl.java:140)
	at 
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In case the validation model only contains optional validations this should be silently ignored, in all other cases there must be a reasonable &lt;tt&gt;ValidationFailure&lt;/tt&gt; be returned instead of this exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12960410">SLING-5674</key>
            <summary>Validation: IAE thrown in case validation is triggered on a NonExistingResource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Apr 2016 17:14:10 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:42 +0000</updated>
                            <resolved>Wed, 20 Apr 2016 17:54:22 +0000</resolved>
                                    <version>Validation 1.0.0</version>
                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15250371" author="kwin" created="Wed, 20 Apr 2016 17:54:23 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1740178&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1740178&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12972702">SLING-5749</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2we3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5673] MockResourceResolver.resolve(...) might return null</title>
                <link>https://issues.apache.org/jira/browse/SLING-5673</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The API contract for &lt;tt&gt;ResourceResolver.resolve(...)&lt;/tt&gt; states&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;returns The Resource addressed by the &lt;tt&gt;absPath&lt;/tt&gt; or a &lt;tt&gt;NonExistingResource&lt;/tt&gt; if no such resource can be resolved.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &lt;tt&gt;MockResourceResolver.resolve(...)&lt;/tt&gt; returns &lt;tt&gt;null&lt;/tt&gt; instead, which is violating the API. Please in those cases return a &lt;tt&gt;NonExistingResource&lt;/tt&gt; instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12960402">SLING-5673</key>
            <summary>MockResourceResolver.resolve(...) might return null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Apr 2016 17:01:25 +0000</created>
                <updated>Fri, 29 Apr 2016 16:22:13 +0000</updated>
                            <resolved>Fri, 29 Apr 2016 16:22:13 +0000</resolved>
                                    <version>Testing ResourceResolver Mock 1.1.12</version>
                                    <fixVersion>Testing ResourceResolver Mock 1.1.14</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15264286" author="sseifert@pro-vision.de" created="Fri, 29 Apr 2016 16:22:13 +0000"  >&lt;p&gt;Completed: At revision: 1741654  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2we27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5671] Not matching port in the mapping entry still leads to using this entry for the outward mapping (used in ResourceResolver.map)</title>
                <link>https://issues.apache.org/jira/browse/SLING-5671</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following resource structure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/etc/map
  + http
    + localhost:80
      + mappedpath
      - sling:internalRedirect=&lt;span class=&quot;code-quote&quot;&gt;&quot;/content/some/path&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;leads to the following entry being listed in the outwards (mapping) map (inside &lt;tt&gt;/system/console/jcrresolver&lt;/tt&gt;)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;^/content/some/path/  http:&lt;span class=&quot;code-comment&quot;&gt;//localhost/mappedpath/  external: 302&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are three things wrong here:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;the entry in the system console exposes this entry as external redirect with 302 status (although all mapping map entries can only be internal ones IMHO)&lt;/li&gt;
	&lt;li&gt;That entry incorrectly applies to links towards that path even if the request was done on another port.&lt;/li&gt;
	&lt;li&gt;Even worse, if the request was done through another port, it will lead to URLs like &lt;tt&gt;&lt;a href=&quot;http://localhost/mappedpath/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/mappedpath/&lt;/a&gt;....&lt;/tt&gt; being generated with &lt;tt&gt;ResourceResolver.map(...)&lt;/tt&gt;.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12960010">SLING-5671</key>
            <summary>Not matching port in the mapping entry still leads to using this entry for the outward mapping (used in ResourceResolver.map)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Apr 2016 14:24:55 +0000</created>
                <updated>Tue, 19 Apr 2016 16:34:51 +0000</updated>
                                            <version>Resource Resolver 1.4.10</version>
                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wbn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5667] MockBundleContext.getServiceReference(...) does not return service reference with highest ranking</title>
                <link>https://issues.apache.org/jira/browse/SLING-5667</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to &lt;a href=&quot;https://osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html#getServiceReference%28java.lang.Class%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html#getServiceReference%28java.lang.Class%29&lt;/a&gt; the service reference being returned must be the one with the highest ranking. Currently it returns just any service reference.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12959177">SLING-5667</key>
            <summary>MockBundleContext.getServiceReference(...) does not return service reference with highest ranking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Apr 2016 13:27:32 +0000</created>
                <updated>Thu, 29 Jun 2017 06:33:00 +0000</updated>
                            <resolved>Fri, 29 Apr 2016 16:54:59 +0000</resolved>
                                    <version>Testing OSGi Mock 2.0.2</version>
                                    <fixVersion>Testing OSGi Mock 2.0.4</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15249716" author="sseifert@pro-vision.de" created="Wed, 20 Apr 2016 11:59:26 +0000"  >&lt;p&gt;this should already work as expected? - but i&apos;ve not verified it in detail.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;getServiceReference&lt;/tt&gt; returns the first one from the list returned by &lt;tt&gt;getServiceReferences&lt;/tt&gt;, which uses a TreeSet to sort all returned service references, and the &lt;tt&gt;MockServiceReference&lt;/tt&gt; implements a comarable based on &lt;tt&gt;ServiceUtil.getComparableForServiceRanking&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;the error is perhaps that getServiceReferences always returns a correct order where it is not expected by the OSGi interface. although this is not explicitly an error it may lead to false assumptions in unit tests.&lt;/p&gt;</comment>
                            <comment id="15249738" author="kwin" created="Wed, 20 Apr 2016 12:14:41 +0000"  >&lt;p&gt;The problem is that the comparable being used is the other way round. So the first servicereference is the one with the lowest ranking! Therefore you either have to revert the order or you access the last element in &lt;a href=&quot;https://github.com/apache/sling/blob/c9e59667d8f9cd698bc33a51f3e6a22e85d4a952/testing/mocks/osgi-mock/src/main/java/org/apache/sling/testing/mock/osgi/MockBundleContext.java#L191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/c9e59667d8f9cd698bc33a51f3e6a22e85d4a952/testing/mocks/osgi-mock/src/main/java/org/apache/sling/testing/mock/osgi/MockBundleContext.java#L191&lt;/a&gt; instead of the first one. We should definitely have a test for this, as this was too often wrong in the past in other places in the code.&lt;/p&gt;</comment>
                            <comment id="15249746" author="kwin" created="Wed, 20 Apr 2016 12:19:30 +0000"  >&lt;p&gt;I clarified that behaviour in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5041&quot; title=&quot;Clarify the order of the iterator given by RankedServices&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5041&quot;&gt;&lt;del&gt;SLING-5041&lt;/del&gt;&lt;/a&gt;, so you should probably just reference the new commons osgi bundle with that fix in it. That way it is clearer which order is used here.&lt;/p&gt;</comment>
                            <comment id="15264330" author="sseifert@pro-vision.de" created="Fri, 29 Apr 2016 16:54:59 +0000"  >&lt;p&gt;Completed: At revision: 1741665  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12875397">SLING-5041</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13079766">SLING-6957</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w6hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5666] Unscheduling a job should remove corresponding node</title>
                <link>https://issues.apache.org/jira/browse/SLING-5666</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Unscheduling a previously scheduled job does not remove the corresponding node below &lt;tt&gt;/var/eventing/scheduled-jobs&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ScheduledJobInfo info =  jobManager.createJob(topic).schedule().at(date).add();
&lt;span class=&quot;code-comment&quot;&gt;// creates /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/eventing/scheduled-jobs/c204a1ad-b161-4e76-9dfe-4152bca088cf
&lt;/span&gt;info.unschedule();
&lt;span class=&quot;code-comment&quot;&gt;// /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/eventing/scheduled-jobs/c204a1ad-b161-4e76-9dfe-4152bca088cf persists&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This can lead to the situation where &lt;a href=&quot;https://github.com/apache/sling/blob/caba56abb49cb173cf6c9903a0facb2b6d31e56c/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java#L142-L174&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ScheduledJobHandler#scan&lt;/a&gt; picks the node back up again and reschedules the job.&lt;/p&gt;

&lt;p&gt;This is a regression introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4680&quot; title=&quot;Decouple scheduled jobs from observation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4680&quot;&gt;&lt;del&gt;SLING-4680&lt;/del&gt;&lt;/a&gt;. Before the changes of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4680&quot; title=&quot;Decouple scheduled jobs from observation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4680&quot;&gt;&lt;del&gt;SLING-4680&lt;/del&gt;&lt;/a&gt;, &lt;tt&gt;JobSchedulerImpl#unschedule&lt;/tt&gt; took care of &lt;a href=&quot;https://github.com/apache/sling/blob/6eaa6a131b4013c5b4990ee126f6af1c5710d5de/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/JobSchedulerImpl.java#L335-L353&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;removing the node&lt;/a&gt;. Currently, this is &lt;a href=&quot;https://github.com/apache/sling/blob/caba56abb49cb173cf6c9903a0facb2b6d31e56c/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/scheduling/JobSchedulerImpl.java#L196-L202&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;not being done anymore&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12959162">SLING-5666</key>
            <summary>Unscheduling a job should remove corresponding node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="obrist">Damien Obrist</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Apr 2016 12:45:36 +0000</created>
                <updated>Fri, 2 Sep 2016 16:30:06 +0000</updated>
                            <resolved>Fri, 20 May 2016 07:58:26 +0000</resolved>
                                    <version>Event 4.0.0</version>
                    <version>Event 4.0.2</version>
                                    <fixVersion>Event 4.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15243223" author="cziegeler" created="Fri, 15 Apr 2016 17:01:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=obrist&quot; class=&quot;user-hover&quot; rel=&quot;obrist&quot;&gt;obrist&lt;/a&gt; I&apos;ve committed a potential fix, could you please verify?&lt;/p&gt;</comment>
                            <comment id="15288621" author="cziegeler" created="Wed, 18 May 2016 08:30:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=obrist&quot; class=&quot;user-hover&quot; rel=&quot;obrist&quot;&gt;obrist&lt;/a&gt; I&apos;ve updated the fix, wdyt?&lt;/p&gt;</comment>
                            <comment id="15290990" author="obrist" created="Thu, 19 May 2016 11:59:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Thanks! The fix works and looks good to me from what I can see. One thing I wonder about though is that &lt;tt&gt;ScheduledJobHandler#remove&lt;/tt&gt; contains the following &lt;a href=&quot;https://github.com/apache/sling/blob/caba56abb49cb173cf6c9903a0facb2b6d31e56c/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java#L480-L485&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;code&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.scheduledJobs ) {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Holder h = scheduledJobs.remove(scheduleKey);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( h != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; h.info != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
        jobScheduler.unscheduleJob(h.info);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This code should in theory already call &lt;tt&gt;JobSchedulerImpl#unscheduleJob&lt;/tt&gt;, which you now call explicitly in your &lt;a href=&quot;https://fisheye6.atlassian.com/changelog/sling?cs=1744360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;updated fix&lt;/a&gt;. Except that this doesn&apos;t seem to happen, because the map &lt;tt&gt;ScheduledJobHandler.scheduledJobs&lt;/tt&gt; doesn&apos;t contain the job yet - it is added there only asynchronously in &lt;tt&gt;ScheduledJobHandler#handleAddUpdate&lt;/tt&gt;. Is that maybe something that should change? I don&apos;t grasp the complete code, so I can&apos;t really tell.&lt;/p&gt;</comment>
                            <comment id="15292961" author="cziegeler" created="Fri, 20 May 2016 07:58:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=obrist&quot; class=&quot;user-hover&quot; rel=&quot;obrist&quot;&gt;obrist&lt;/a&gt; I think the code is now correct (not 100% sure either though): handleAddUpdate is only called if the job is added on another instance. If the job is added on the same instance, then it&apos;s directly added, scheduled etc. - no async happening. So we should be fine now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13002269">SLING-6030</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w6en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5664] Models: OSGiServiceInjector does not consider service.ranking</title>
                <link>https://issues.apache.org/jira/browse/SLING-5664</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The injector is using &lt;tt&gt;BundleContext.getServiceReferences(Class, String)&lt;/tt&gt; or &lt;tt&gt;SlingScriptHelper.getServices(Class, String)&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/models/impl/src/main/java/org/apache/sling/models/impl/injectors/OSGiServiceInjector.java#L97&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/models/impl/src/main/java/org/apache/sling/models/impl/injectors/OSGiServiceInjector.java#L97&lt;/a&gt;). From the returned array it just takes the first item.&lt;br/&gt;
Unfortunately the order in that array is not-deterministic, especially it is not necessarily that way that items with a higher service.ranking are returned first.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12959111">SLING-5664</key>
            <summary>Models: OSGiServiceInjector does not consider service.ranking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Apr 2016 09:11:47 +0000</created>
                <updated>Fri, 9 Sep 2016 13:20:53 +0000</updated>
                            <resolved>Mon, 18 Apr 2016 16:46:12 +0000</resolved>
                                    <version>Sling Models Impl 1.2.6</version>
                                    <fixVersion>Sling Models Impl 1.2.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15242677" author="kwin" created="Fri, 15 Apr 2016 09:15:34 +0000"  >&lt;p&gt;The implementation in `OsgiServiceReferenceUtils.getServiceReference(...) seems to solve exactly that issue (&lt;a href=&quot;https://src.springframework.org/svn/spring-osgi/trunk/core/src/main/java/org/springframework/osgi/util/OsgiServiceReferenceUtils.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://src.springframework.org/svn/spring-osgi/trunk/core/src/main/java/org/springframework/osgi/util/OsgiServiceReferenceUtils.java&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15244067" author="kwin" created="Sat, 16 Apr 2016 07:40:49 +0000"  >&lt;p&gt;Attached is a patch which makes sure that &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;for array injections the service with the highest ranking is returned first (and afterwards the array is sorted descending by service order)&lt;/li&gt;
	&lt;li&gt;and for single value injections only the service with the highest ranking is injected&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Also I added an IT to verify this behaviour.&lt;/p&gt;

&lt;p&gt;Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5665&quot; title=&quot;SlingScriptHelper.getServices(Class, String) should return the highest matching service ranking first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5665&quot;&gt;&lt;del&gt;SLING-5665&lt;/del&gt;&lt;/a&gt; I had to remove usage of &lt;tt&gt;SlingScriptHelper&lt;/tt&gt; in the injector completely as this does currently not give any opportunity to figure out the service ranking.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; can you both have a look?&lt;/p&gt;</comment>
                            <comment id="15245307" author="bdelacretaz" created="Mon, 18 Apr 2016 08:33:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;I had to remove usage of SlingScriptHelper in the injector completely...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I suppose there is a reason for &lt;tt&gt;OSGiServiceInjector&lt;/tt&gt; to use either &lt;tt&gt;SlingScriptHelper&lt;/tt&gt; or &lt;tt&gt;BundleContext&lt;/tt&gt; to get services, it would be good to find out what that reason is before removing the use of &lt;tt&gt;SlingScriptHelper&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The alternative is to require &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5665&quot; title=&quot;SlingScriptHelper.getServices(Class, String) should return the highest matching service ranking first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5665&quot;&gt;&lt;del&gt;SLING-5665&lt;/del&gt;&lt;/a&gt; which would (IIUC) allow to keep using &lt;tt&gt;SlingScriptHelper&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15245325" author="kwin" created="Mon, 18 Apr 2016 08:51:11 +0000"  >&lt;p&gt;The reason for `SlingScriptHelper` to be used in the past (whenever possible, i.e. when the adaptable is a request and the SlingScriptHelper is available at all) is that it will release the reference towards the OSGi service sooner (as soon as the request is closed). When using the `BundleContext` there is a mechanism regarding phantom references (therefore those services will be released later, depending on the garbage collection).&lt;/p&gt;

&lt;p&gt;So basically we have two options:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;rely on the fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5665&quot; title=&quot;SlingScriptHelper.getServices(Class, String) should return the highest matching service ranking first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5665&quot;&gt;&lt;del&gt;SLING-5665&lt;/del&gt;&lt;/a&gt; (which makes this fix incomplete/not working, unless you have the most recent version of Sling Scripting Core, 2.0.38)&lt;/li&gt;
	&lt;li&gt;remove usage of `SlingScriptHelper` as done in the attached script and live with the fact, that service references live a bit longer&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I would be in favor of 2.). &lt;/p&gt;</comment>
                            <comment id="15245478" author="bdelacretaz" created="Mon, 18 Apr 2016 11:17:03 +0000"  >&lt;p&gt;Thanks for clarifying, I agree with not using &lt;tt&gt;SlingScriptrHelper&lt;/tt&gt; anymore, unless someone else objects.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Those services will be released later, depending on the garbage collection&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok, if needed we can later add a mechanism to register service references for cleanup when the request is closed. That would be cleaner than the trick that you describe, which was not obvious to me by looking at the code.&lt;/p&gt;</comment>
                            <comment id="15245484" author="kwin" created="Mon, 18 Apr 2016 11:28:54 +0000"  >&lt;p&gt;Good idea, I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5668&quot; title=&quot;Models: Leverage ServletRequestListener.requestDestroyed for calling DisposalCallback in case the model was created from a request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5668&quot;&gt;&lt;del&gt;SLING-5668&lt;/del&gt;&lt;/a&gt; for that.&lt;/p&gt;</comment>
                            <comment id="15245978" author="kwin" created="Mon, 18 Apr 2016 16:46:12 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1739788&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1739788&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15247247" author="kwin" created="Tue, 19 Apr 2016 06:16:18 +0000"  >&lt;p&gt;And a followup commit in &lt;a href=&quot;https://svn.apache.org/r1739844&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1739844&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12959116">SLING-5665</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12799073" name="SLING-5664-v01.patch" size="23235" author="kwin" created="Sat, 16 Apr 2016 07:40:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w63b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5662] Maven license report extracted URLs are 404</title>
                <link>https://issues.apache.org/jira/browse/SLING-5662</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The maven license plugin that extracts licenses from 3rd party components:&lt;/p&gt;

&lt;p&gt;              &amp;lt;groupId&amp;gt;org.codehaus.mojo&amp;lt;/groupId&amp;gt;&lt;br/&gt;
              &amp;lt;artifactId&amp;gt;license-maven-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
              &amp;lt;version&amp;gt;1.8&amp;lt;/version&amp;gt;&lt;/p&gt;

&lt;p&gt;The extracted URLs for all of the sling components all 404.&lt;/p&gt;

&lt;p&gt;     (The Apache Software License, Version 2.0) Apache Sling API (org.apache.sling:org.apache.sling.api:2.4.2 - &lt;a href=&quot;http://sling.apache.org/org.apache.sling.api&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/org.apache.sling.api&lt;/a&gt;)&lt;br/&gt;
     (The Apache Software License, Version 2.0) Apache Sling Commons OSGi support (org.apache.sling:org.apache.sling.commons.osgi:2.2.2 - &lt;a href=&quot;http://sling.apache.org/org.apache.sling.commons.osgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/org.apache.sling.commons.osgi&lt;/a&gt;)&lt;br/&gt;
     (The Apache Software License, Version 2.0) Apache Sling Event Support (org.apache.sling:org.apache.sling.event:3.3.0 - &lt;a href=&quot;http://sling.apache.org/org.apache.sling.event&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/org.apache.sling.event&lt;/a&gt;)&lt;br/&gt;
     (The Apache Software License, Version 2.0) Apache Sling Wrapper Bundle for the JCR API (org.apache.sling:org.apache.sling.jcr.jcr-wrapper:2.0.0 - &lt;a href=&quot;http://sling.apache.org/org.apache.sling.jcr.jcr-wrapper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/org.apache.sling.jcr.jcr-wrapper&lt;/a&gt;)&lt;br/&gt;
     (The Apache Software License, Version 2.0) Apache Sling Query (org.apache.sling:org.apache.sling.query:3.0.0 - &lt;a href=&quot;http://sling.apache.org/org.apache.sling.query&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/org.apache.sling.query&lt;/a&gt;)&lt;br/&gt;
     (The Apache Software License, Version 2.0) Apache Sling Default POST Servlets (org.apache.sling:org.apache.sling.servlets.post:2.3.6 - &lt;a href=&quot;http://sling.apache.org/org.apache.sling.servlets.post&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/org.apache.sling.servlets.post&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;The same is true for all of the felix &amp;amp; jackrabbit components. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12958940">SLING-5662</key>
            <summary>Maven license report extracted URLs are 404</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bruceedge">Bruce Edge</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2016 19:13:38 +0000</created>
                <updated>Wed, 4 May 2016 07:57:49 +0000</updated>
                                                                            <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15270281" author="rombert" created="Wed, 4 May 2016 07:57:49 +0000"  >&lt;p&gt;The plug-in pages don&apos;t make it immediately obvious, but do you know how the plug-in checks for the license URL? The Sling projects ( and I assume Felix and Jackrabbit as well ) inherit the license settings from the Apache parent pom ( see &lt;a href=&quot;http://svn.apache.org/viewvc/maven/pom/tags/apache-17/pom.xml?view=markup#l45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/maven/pom/tags/apache-17/pom.xml?view=markup#l45&lt;/a&gt; for the license block ).&lt;/p&gt;

&lt;p&gt;Running &lt;tt&gt;mvn help:effective-pom&lt;/tt&gt; does show a correct license POM block for &lt;tt&gt;org.apache.sling.api&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;licenses&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;license&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Apache License, Version 2.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;distribution&amp;gt;&lt;/span&gt;repo&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/distribution&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/license&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/licenses&amp;gt;&lt;/span&gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w51b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5661] Fix typo in Result#wasSuccessfull():boolean</title>
                <link>https://issues.apache.org/jira/browse/SLING-5661</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12958797">SLING-5661</key>
            <summary>Fix typo in Result#wasSuccessfull():boolean</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2016 09:58:49 +0000</created>
                <updated>Fri, 9 Sep 2016 13:20:56 +0000</updated>
                            <resolved>Thu, 14 Apr 2016 10:01:32 +0000</resolved>
                                    <version>Sling Models Impl 1.2.6</version>
                                    <fixVersion>Sling Models Impl 1.2.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15240896" author="olli" created="Thu, 14 Apr 2016 10:01:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1739046&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1739046&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w45r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5660] Validation is using outdated sling/validation/model</title>
                <link>https://issues.apache.org/jira/browse/SLING-5660</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The new &lt;tt&gt;sling/validation/model&lt;/tt&gt; (one property removed) was used only after restarting Validation bundles: &lt;tt&gt;sling.validator.missing-required-property-with-name&lt;/tt&gt;, &lt;tt&gt;location&lt;/tt&gt; was empty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12958789">SLING-5660</key>
            <summary>Validation is using outdated sling/validation/model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2016 09:34:47 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:50 +0000</updated>
                            <resolved>Fri, 3 Mar 2017 13:14:39 +0000</resolved>
                                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15241490" author="kwin" created="Thu, 14 Apr 2016 16:53:43 +0000"  >&lt;p&gt;Sorry, I don&apos;t get this, can you provide more info? So after you modified a model in the repository it was not detected until you restarted the validation bundle? So cache invalidation did not work correctly? &lt;br/&gt;
The part&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;sling.validator.missing-required-property-with-name, location was empty.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;is unclear, though. Can you elaborate?&lt;/p&gt;</comment>
                            <comment id="15241501" author="kwin" created="Thu, 14 Apr 2016 16:57:35 +0000"  >&lt;p&gt;To debug the issue with cache invalidation please increase logging to DEBUG level for category &lt;tt&gt;org.apache.sling.validation.impl.resourcemodel.ResourceValidationModelProviderImpl&lt;/tt&gt;. The according event handler which should be triggered is in &lt;a href=&quot;https://github.com/apache/sling/blob/c9e59667d8f9cd698bc33a51f3e6a22e85d4a952/bundles/extensions/validation/core/src/main/java/org/apache/sling/validation/impl/resourcemodel/ResourceValidationModelProviderImpl.java#L147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/c9e59667d8f9cd698bc33a51f3e6a22e85d4a952/bundles/extensions/validation/core/src/main/java/org/apache/sling/validation/impl/resourcemodel/ResourceValidationModelProviderImpl.java#L147&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15241636" author="olli" created="Thu, 14 Apr 2016 17:58:18 +0000"  >&lt;p&gt;Right, looks like cache invalidation didn&apos;t happen. I&apos;ve removed one property from an validation model and &lt;tt&gt;sling.validator.missing-required-property-with-name&lt;/tt&gt; showed up in the logs with an empty &lt;tt&gt;location&lt;/tt&gt; value.&lt;/p&gt;</comment>
                            <comment id="15889699" author="kwin" created="Wed, 1 Mar 2017 07:45:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Do you still have that problem? If yet, please provide detailed steps for me to reproduce.&lt;/p&gt;</comment>
                            <comment id="15889715" author="kwin" created="Wed, 1 Mar 2017 08:02:44 +0000"  >&lt;p&gt;It might be related to the fact that the EventHandler only looks for changes below a folder called &lt;tt&gt;validation&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/validation/core/src/main/java/org/apache/sling/validation/impl/resourcemodel/ResourceValidationModelProviderImpl.java#L120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/validation/core/src/main/java/org/apache/sling/validation/impl/resourcemodel/ResourceValidationModelProviderImpl.java#L120&lt;/a&gt;) while the XPath query finds validation resource models everywhere below the search paths (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4157&quot; title=&quot;Allow Sling validation to pick up models in any location in the repository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4157&quot;&gt;&lt;del&gt;SLING-4157&lt;/del&gt;&lt;/a&gt;). I think we cannot easily get rid of the path requirement, because otherwise the cache would be invalidated way too often (for every change within the resource resolver&apos;s search paths). Relying on the resource type is not possible, as that is not available for removed resource events.&lt;/p&gt;</comment>
                            <comment id="15889921" author="olli" created="Wed, 1 Mar 2017 10:29:54 +0000"  >&lt;p&gt;This issue still happens and we should switch to observation anyway: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6580&quot; title=&quot;Use ResourceChangeListener for validation models&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6580&quot;&gt;SLING-6580&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15889963" author="kwin" created="Wed, 1 Mar 2017 10:51:59 +0000"  >&lt;p&gt;As commented in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6580?focusedCommentId=15889933&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15889933&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-6580?focusedCommentId=15889933&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15889933&lt;/a&gt; I don&apos;t see how switching to observation would change anything. I think that we should rather reestablish a certain naming/path pattern.&lt;/p&gt;</comment>
                            <comment id="15889999" author="olli" created="Wed, 1 Mar 2017 11:24:46 +0000"  >&lt;p&gt;I discourage any limitation to path patterns. Models should be allowed anywhere in &lt;tt&gt;/apps&lt;/tt&gt; and &lt;tt&gt;/libs&lt;/tt&gt; (add we should add a dedicated service user for validation).&lt;/p&gt;</comment>
                            <comment id="15890051" author="kwin" created="Wed, 1 Mar 2017 12:15:53 +0000"  >&lt;p&gt;If we don&apos;t add a path limitation we would need to &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;invalidate the whole cache for every resource removal within &lt;tt&gt;/apps&lt;/tt&gt; or &lt;tt&gt;/libs&lt;/tt&gt;, because you don&apos;t know which &lt;tt&gt;resourceType&lt;/tt&gt; has just been removed&lt;/li&gt;
	&lt;li&gt;invalidate the whole cache for every resource change within &lt;tt&gt;/apps&lt;/tt&gt; or &lt;tt&gt;/libs&lt;/tt&gt;, because just retrieving the &lt;tt&gt;resourceType&lt;/tt&gt; property for every changed event would be too much effort.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;That would be the same with the new observation API.&lt;br/&gt;
Don&apos;t you think that this would invalidate the cache too often?&lt;/p&gt;</comment>
                            <comment id="15890360" author="kwin" created="Wed, 1 Mar 2017 15:19:41 +0000"  >&lt;p&gt;2. cannot be improved although the resource type of the added/modified resource is always sent with each event, because the validation models are built from a complex hierarchy of resources where some of them might have arbitrary &lt;tt&gt;resourceTypes&lt;/tt&gt;. Just think about a validation model where only a new &lt;tt&gt;children/additionalresource&lt;/tt&gt; is added with a resourceType=jcr:primaryType=nt:unstructured. &lt;/p&gt;

&lt;p&gt;I will prepare a fix though which for now always invalidates the cache. I am still not 100% convinced that this is a wise choice, but having a limitation in terms of paths for valdiation models I don&apos;t like either.&lt;/p&gt;</comment>
                            <comment id="15890438" author="kwin" created="Wed, 1 Mar 2017 16:00:03 +0000"  >&lt;p&gt;Applied a fix in &lt;a href=&quot;http://svn.apache.org/r1784980&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1784980&lt;/a&gt;.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Would you mind testing it again?&lt;/p&gt;</comment>
                            <comment id="15891852" author="kwin" created="Thu, 2 Mar 2017 09:03:49 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6588&quot; title=&quot;More granularly invalidate the cached ValidationModels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6588&quot;&gt;&lt;del&gt;SLING-6588&lt;/del&gt;&lt;/a&gt; for an improved cache invalidation.&lt;/p&gt;</comment>
                            <comment id="15891888" author="olli" created="Thu, 2 Mar 2017 09:15:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, does it still make sense to test or defer until &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6588&quot; title=&quot;More granularly invalidate the cached ValidationModels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6588&quot;&gt;&lt;del&gt;SLING-6588&lt;/del&gt;&lt;/a&gt; is done?&lt;/p&gt;</comment>
                            <comment id="15891891" author="kwin" created="Thu, 2 Mar 2017 09:18:29 +0000"  >&lt;p&gt;I have not yet a full solution for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6588&quot; title=&quot;More granularly invalidate the cached ValidationModels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6588&quot;&gt;&lt;del&gt;SLING-6588&lt;/del&gt;&lt;/a&gt; so please test with the current version.&lt;/p&gt;</comment>
                            <comment id="15894318" author="kwin" created="Fri, 3 Mar 2017 13:14:31 +0000"  >&lt;p&gt;With the new caching solution from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6588&quot; title=&quot;More granularly invalidate the cached ValidationModels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6588&quot;&gt;&lt;del&gt;SLING-6588&lt;/del&gt;&lt;/a&gt; I assume this should be fixed now. If not, please reopen.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13047273">SLING-6580</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12754732">SLING-4157</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w43z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5658] getProperty tag fails when returnClass parameter is an expression</title>
                <link>https://issues.apache.org/jira/browse/SLING-5658</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5653&quot; title=&quot;adaptTo tag fails when adaptTo parameter is an expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5653&quot;&gt;&lt;del&gt;SLING-5653&lt;/del&gt;&lt;/a&gt; the getProperty tag cannot handle an expression for its &lt;tt&gt;returnClass&lt;/tt&gt; parameter.&lt;/p&gt;

&lt;p&gt;I.e. the following causes a ClassCastException:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;c:set &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;java.util.Calendar&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;sling:getProperty properties=&lt;span class=&quot;code-quote&quot;&gt;&quot;${props}&quot;&lt;/span&gt; key=&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:created&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt; returnClass=&lt;span class=&quot;code-quote&quot;&gt;&quot;${type}&quot;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12957674">SLING-5658</key>
            <summary>getProperty tag fails when returnClass parameter is an expression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Apr 2016 11:45:25 +0000</created>
                <updated>Thu, 21 Apr 2016 14:14:37 +0000</updated>
                            <resolved>Tue, 12 Apr 2016 06:58:59 +0000</resolved>
                                    <version>Scripting JSP-Taglib 2.2.4</version>
                                    <fixVersion>Scripting JSP-Taglib 2.2.6</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15236706" author="jsedding" created="Tue, 12 Apr 2016 06:58:59 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1738703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1738703&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12957167">SLING-5653</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vx8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5653] adaptTo tag fails when adaptTo parameter is an expression</title>
                <link>https://issues.apache.org/jira/browse/SLING-5653</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following code sample fails:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;c:set &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;dest&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.api.resource.ValueMap&quot;&lt;/span&gt;/&amp;gt; 
&amp;lt;sling:adaptTo adaptable=&lt;span class=&quot;code-quote&quot;&gt;&quot;${resource}&quot;&lt;/span&gt; adaptTo=&lt;span class=&quot;code-quote&quot;&gt;&quot;${dest}&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;props5&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Root cause seems to be&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.ClassCastException: java.lang.Object cannot be cast to java.lang.String
	at javax.servlet.jsp.tagext.TagData.getAttributeString(TagData.java:138)
	at org.apache.sling.scripting.jsp.taglib.tei.AdaptToTEI.getClassName(AdaptToTEI.java:26)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12957167">SLING-5653</key>
            <summary>adaptTo tag fails when adaptTo parameter is an expression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Apr 2016 10:19:34 +0000</created>
                <updated>Thu, 21 Apr 2016 14:14:37 +0000</updated>
                            <resolved>Tue, 12 Apr 2016 06:58:05 +0000</resolved>
                                    <version>Scripting JSP-Taglib 2.2.4</version>
                                    <fixVersion>Scripting JSP-Taglib 2.2.6</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15231988" author="rombert" created="Fri, 8 Apr 2016 10:36:44 +0000"  >&lt;p&gt;Debugging it seems that the actual value that ends up in the &lt;tt&gt;AdaptToTEI&lt;/tt&gt; class is a simple &lt;tt&gt;java.lang.Object&lt;/tt&gt; ( see attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12797705/12797705_SLING-5653-unexpected-object.png&quot; title=&quot;SLING-5653-unexpected-object.png attached to SLING-5653&quot;&gt;SLING-5653-unexpected-object.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; ).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klcodanr&quot; class=&quot;user-hover&quot; rel=&quot;klcodanr&quot;&gt;klcodanr&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; , any thoughts on this bug?&lt;/p&gt;</comment>
                            <comment id="15232120" author="jsedding" created="Fri, 8 Apr 2016 12:26:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; can you check please if the Object you get in the debugger is the same as &lt;a href=&quot;https://docs.oracle.com/javaee/7/api/javax/servlet/jsp/tagext/TagData.html#REQUEST_TIME_VALUE&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TagData#REQUEST_TIME_VALUE&lt;/a&gt;? I.e. &lt;tt&gt;val == TagData.REQUEST_TIME_VALUE&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The javadoc for &lt;tt&gt;TagData.REQUEST_TIME_VALUE&lt;/tt&gt; says:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Distinguished value for an attribute to indicate its value is a request-time expression (which is not yet available because TagData instances are used at translation-time).&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15232134" author="jsedding" created="Fri, 8 Apr 2016 12:49:00 +0000"  >&lt;p&gt;Attached is a tentative fix, which falls back to &lt;tt&gt;java.lang.Object&lt;/tt&gt; if the &lt;tt&gt;adaptTo&lt;/tt&gt; parameter is not a class name but an expression (i.e. &lt;tt&gt;REQUEST_TIME_VALUE&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="15232144" author="rombert" created="Fri, 8 Apr 2016 12:58:28 +0000"  >&lt;p&gt;Fix looks good to me, I arrived at the same code after you mentioned the &lt;tt&gt;TagData.REQUEST_TIME_VALUE&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Would it make sense to include an IT as well?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/launchpad/integration-tests/src/main/resources/integration-test/taglib-test.jsp b/launchpad/integration-tests/src/main/resources/integration-test/taglib-test.jsp
index ca9edc9..5c88e7c 100644
--- a/launchpad/integration-tests/src/main/resources/integration-test/taglib-test.jsp
+++ b/launchpad/integration-tests/src/main/resources/integration-test/taglib-test.jsp
@@ -13,6 +13,10 @@ AdaptTo Tag
     Test 3: Test Non-Adaptable Handling
     result: &amp;lt;c:catch var=&quot;adaptionException&quot;&amp;gt;&amp;lt;sling:adaptTo adaptable=&quot;res&quot; adaptTo=&quot;org.apache.sling.api.resource.ValueMap&quot; var=&quot;props3&quot; /&amp;gt;&amp;lt;/c:catch&amp;gt;&amp;lt;c:choose&amp;gt;&amp;lt;c:when test=&quot;${not empty adaptionException}&quot;&amp;gt;SUCCESS: ${adaptionException}&amp;lt;/c:when&amp;gt;&amp;lt;c:otherwise&amp;gt;ERROR&amp;lt;c:set var=&quot;success&quot; value=&quot;false&quot; /&amp;gt;&amp;lt;/c:otherwise&amp;gt;&amp;lt;/c:choose&amp;gt;
 
+    Test 4: Test adapting when the class name is a run-time expression
+    &amp;lt;c:set var=&quot;dest&quot; value=&quot;org.apache.sling.api.resource.ValueMap&quot;/&amp;gt; 
+    result: &amp;lt;sling:adaptTo adaptable=&quot;${resource}&quot; adaptTo=&quot;${dest}&quot; var=&quot;props5&quot;/&amp;gt;&amp;lt;c:choose&amp;gt;&amp;lt;c:when test=&quot;${not empty props5}&quot;&amp;gt;SUCCESS&amp;lt;/c:when&amp;gt;&amp;lt;c:otherwise&amp;gt;ERROR&amp;lt;c:set var=&quot;success&quot; value=&quot;false&quot; /&amp;gt;&amp;lt;/c:otherwise&amp;gt;&amp;lt;/c:choose&amp;gt;
+    
 Encode Tag
     Test 1: HTML Encode
     Result: HTML_ENCODE:&amp;lt;sling:encode value=&quot;&amp;amp;Hello World!&amp;lt;script&amp;gt;&amp;lt;/script&amp;gt;&quot; mode=&quot;HTML&quot; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15232159" author="klcodanr" created="Fri, 8 Apr 2016 13:19:58 +0000"  >&lt;p&gt;The patch looks good to me as well &amp;amp; I&apos;d second including the integration test. &lt;/p&gt;</comment>
                            <comment id="15232172" author="justinedelson" created="Fri, 8 Apr 2016 13:28:00 +0000"  >&lt;p&gt;IIUC, this doesn&apos;t really help because resource.adaptTo(Object.class) wouldn&apos;t do the thing being requested.&lt;/p&gt;

&lt;p&gt;Consider this code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;c:set &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;dest&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.api.resource.ValueMap&quot;&lt;/span&gt;/&amp;gt; 
&amp;lt;sling:adaptTo adaptable=&lt;span class=&quot;code-quote&quot;&gt;&quot;${resource}&quot;&lt;/span&gt; adaptTo=&lt;span class=&quot;code-quote&quot;&gt;&quot;${dest}&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;props5&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;%= props5.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class); %&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This would fail JSP-&amp;gt;Java translation because prop5 is an Object, not a ValueMap.&lt;/p&gt;

&lt;p&gt;IIUC, we can&apos;t support EL expressions in the adaptTo attribute.&lt;/p&gt;</comment>
                            <comment id="15232186" author="jsedding" created="Fri, 8 Apr 2016 13:42:26 +0000"  >&lt;p&gt;Thanks for your inputs! I&apos;ll take over and will make sure to test for the pitfall Justin has mentioned. Maybe we need to return an empty array of &lt;tt&gt;VariableInfo&lt;/tt&gt; from &lt;tt&gt;AdaptToTEI.getVariableInfo()&lt;/tt&gt; to signal that we don&apos;t know.&lt;/p&gt;

&lt;p&gt;Forbidding expressions would be backwards incompatible, so hopefully we can avoid it.&lt;/p&gt;</comment>
                            <comment id="15236704" author="jsedding" created="Tue, 12 Apr 2016 06:58:05 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1738701&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1738701&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; I included the case suggested by you in the test caseand it&apos;s not an issue. I assume because internally the expressions are resolved dynamically using reflection?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12957674">SLING-5658</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12797718" name="SLING-5653-tentative.patch" size="2839" author="jsedding" created="Fri, 8 Apr 2016 12:49:00 +0000"/>
                            <attachment id="12797705" name="SLING-5653-unexpected-object.png" size="137566" author="rombert" created="Fri, 8 Apr 2016 10:36:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vu3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5652] Publishing content fails if intermediate nodes are not present in the repository</title>
                <link>https://issues.apache.org/jira/browse/SLING-5652</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;m seeing the issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3586&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-3586&lt;/a&gt; with &lt;br/&gt;
Sling Eclipse IDE 1.1.0&lt;/p&gt;

&lt;p&gt;The error is&lt;/p&gt;

&lt;p&gt;Failed exporting: JcrResult[ success:false, exception: org.apache.sling.ide.transport.RepositoryException - javax.jcr.RepositoryException: No parent found at /content/sling5652/en/thankyou/jcr:content/image/file ; it&apos;s needed to create node at /content/sling5652/en/thankyou/jcr:content/image/file/jcr:content] &lt;/p&gt;

&lt;p&gt;Is it possible that this has creeped back in?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12957158">SLING-5652</key>
            <summary>Publishing content fails if intermediate nodes are not present in the repository</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cookstar">Graham</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Apr 2016 09:43:49 +0000</created>
                <updated>Fri, 11 Apr 2025 14:30:44 +0000</updated>
                                            <version>Sling Eclipse IDE 1.1.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.3.2</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15231970" author="rombert" created="Fri, 8 Apr 2016 10:16:58 +0000"  >&lt;p&gt;Can you upload a simple Eclipse project that reproduces the problem?&lt;/p&gt;</comment>
                            <comment id="15232189" author="cookstar" created="Fri, 8 Apr 2016 13:43:57 +0000"  >&lt;p&gt;Eclipse project that reproduces the problem added&lt;/p&gt;

&lt;p&gt;Failed exporting: JcrResult[ success:false, exception: org.apache.sling.ide.transport.RepositoryException - javax.jcr.RepositoryException: No parent found at /content/sling5652/en/thankyou/jcr:content/image/file ; it&apos;s needed to create node at /content/sling5652/en/thankyou/jcr:content/image/file/jcr:content]&lt;/p&gt;</comment>
                            <comment id="15237285" author="rombert" created="Tue, 12 Apr 2016 14:37:12 +0000"  >&lt;p&gt;Thanks for the sample project. However, this &apos;works for me&apos;. Here&apos;s what I&apos;ve done&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Imported the SLING5652 project in my Eclipse workspace&lt;/li&gt;
	&lt;li&gt;Started a new AEM server ( since the project references the &lt;tt&gt;cq&lt;/tt&gt; namespace )&lt;/li&gt;
	&lt;li&gt;Added the module to the server&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Export was successful. Another attempt&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Deleted /content/sling5652 using CRXDE Lite&lt;/li&gt;
	&lt;li&gt;Right-clicked the project in the Project Explorer&lt;/li&gt;
	&lt;li&gt;Selected AEM -&amp;gt; Export to Server&lt;/li&gt;
	&lt;li&gt;Clicked Finish&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This was also successful. Do you have other steps to reproduce? If this works for you, can you please:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;let me know your JVM version + OS&lt;/li&gt;
	&lt;li&gt;upload debug + trace logs as per &lt;a href=&quot;https://sling.apache.org/documentation/development/ide-tooling.html#gathering-debug-information&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/ide-tooling.html#gathering-debug-information&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15237416" author="cookstar" created="Tue, 12 Apr 2016 15:47:01 +0000"  >&lt;p&gt;Even though I have the &quot;if server is started, publish changes immediately&quot; ticked when adding the module to the server, when I start the server, it doesn&apos;t automatically publish it. Did it do that for you? I had to choose &quot;Export to server&quot; on the Eclipse project to get it to publish which is when I see that error message.&lt;/p&gt;

&lt;p&gt;Although those steps are what you did on your other attempt.&lt;/p&gt;</comment>
                            <comment id="15237427" author="cookstar" created="Tue, 12 Apr 2016 15:52:23 +0000"  >&lt;p&gt;Sling console log attached, startup of server and then an export to AEM performed&lt;/p&gt;</comment>
                            <comment id="15237433" author="cookstar" created="Tue, 12 Apr 2016 15:55:08 +0000"  >&lt;p&gt;Mac OSX using Eclipse Luna with Java SE 8 &lt;span class=&quot;error&quot;&gt;&amp;#91;1.8.0_66&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="15238794" author="cookstar" created="Wed, 13 Apr 2016 07:56:48 +0000"  >&lt;p&gt;The server is an AEM 6.1 server running on Linux Ubuntu - author instance&lt;/p&gt;</comment>
                            <comment id="15238808" author="cookstar" created="Wed, 13 Apr 2016 08:11:45 +0000"  >&lt;p&gt;The access.log from AEM 6.1 when exporting from Eclipse for the first time - &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12798467/SLING-5652-aem-access-logs.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12798467/SLING-5652-aem-access-logs.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15256227" author="rombert" created="Mon, 25 Apr 2016 11:29:19 +0000"  >&lt;p&gt;The console logs don&apos;t offer much extra information - it seems that indeed an intermediate folder is skipped.&lt;/p&gt;

&lt;p&gt;Can you please upload the debug + trace logs as per &lt;a href=&quot;https://sling.apache.org/documentation/development/ide-tooling.html#gathering-debug-information&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/ide-tooling.html#gathering-debug-information&lt;/a&gt; ? Note that these are different from the console logs and will typically reside on the filesystem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12798467" name="SLING-5652-aem-access-logs.txt" size="5582" author="cookstar" created="Wed, 13 Apr 2016 08:11:45 +0000"/>
                            <attachment id="12798299" name="SLING-5652-aem-console-logs.txt" size="171560" author="cookstar" created="Tue, 12 Apr 2016 15:52:23 +0000"/>
                            <attachment id="12797726" name="sling5652.zip" size="3165486" author="cookstar" created="Fri, 8 Apr 2016 13:43:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0klu7:iji</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5641] Detection of system bundle fragment is incomplete</title>
                <link>https://issues.apache.org/jira/browse/SLING-5641</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The current check when executing the uninstall directive to detect whether a fragment to the system bundle is deleted is wrong. It just checks for the directive &quot;framework&quot;. However this directive is the default.&lt;br/&gt;
Therefore it should rather check for the symbolic name alias &quot;system.bundle&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12956754">SLING-5641</key>
            <summary>Detection of system bundle fragment is incomplete</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Apr 2016 05:24:47 +0000</created>
                <updated>Sun, 16 Oct 2016 09:12:44 +0000</updated>
                            <resolved>Thu, 7 Apr 2016 05:36:25 +0000</resolved>
                                    <version>Launchpad Base 2.6.10</version>
                                    <fixVersion>Launchpad Base 2.6.12</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vrk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5640] add import distribution events</title>
                <link>https://issues.apache.org/jira/browse/SLING-5640</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;in order to handle distribution import, it would be handy to have a distribution topic to listen to, ideally with the list of paths changed, or at least the filters. i guess this should be added to the package importers ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12956477">SLING-5640</key>
            <summary>add import distribution events</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Apr 2016 12:55:10 +0000</created>
                <updated>Thu, 7 Apr 2016 07:36:51 +0000</updated>
                            <resolved>Thu, 7 Apr 2016 07:36:22 +0000</resolved>
                                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15229829" author="mpetria" created="Thu, 7 Apr 2016 07:20:08 +0000"  >&lt;p&gt;Events are triggered in different phases of the distribution flow &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. I understand that you want to listen for &lt;tt&gt;DistributionEventTopics.IMPORTER_PACKAGE_IMPORTED&lt;/tt&gt;.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/tree/trunk/contrib/extensions/distribution/api/src/main/java/org/apache/sling/distribution/event&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/tree/trunk/contrib/extensions/distribution/api/src/main/java/org/apache/sling/distribution/event&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/contrib/extensions/distribution/api/src/main/java/org/apache/sling/distribution/event/DistributionEventTopics.java#L50&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/contrib/extensions/distribution/api/src/main/java/org/apache/sling/distribution/event/DistributionEventTopics.java#L50&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15229842" author="npeltier" created="Thu, 7 Apr 2016 07:36:22 +0000"  >&lt;p&gt;thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;! closing, even if just for the sake of knitpicking, i could just change that bug into a documentation bug &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vpuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5639] SlingAuthenticator ignores the path</title>
                <link>https://issues.apache.org/jira/browse/SLING-5639</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As per Sling documentation &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;br/&gt;
 &quot;When looking for an AuthenticationHandler the authentication handler is selected whose path is the longest match on the request URL.&quot;&lt;/p&gt;

&lt;p&gt;This is currently broken due incorrect handling of&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;request.getPathInfo()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in SlingAuthenticator#getHandlerSelectionPath&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/authentication/authentication-authenticationhandler.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/authentication/authentication-authenticationhandler.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12956472">SLING-5639</key>
            <summary>SlingAuthenticator ignores the path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Apr 2016 12:23:54 +0000</created>
                <updated>Tue, 12 Apr 2016 06:10:11 +0000</updated>
                            <resolved>Wed, 6 Apr 2016 12:36:27 +0000</resolved>
                                                    <fixVersion>Auth Core 1.3.14</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15228186" author="asanso" created="Wed, 6 Apr 2016 12:36:27 +0000"  >&lt;p&gt;resolved in r1737973 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vptr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5638] Sling:alias property not working if user does not have read access to the root node</title>
                <link>https://issues.apache.org/jira/browse/SLING-5638</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;issue ;- Sling:alias property not working if user is having read only access to /content folder.&lt;/p&gt;

&lt;p&gt;Steps :-&lt;/p&gt;

&lt;p&gt;1) Login using admin/admin.&lt;br/&gt;
2) Create page say mypage.html and provide sling:alias property say mypagealias.&lt;br/&gt;
3) Create test user and provide read only access on /content folder from useradmin console.&lt;br/&gt;
4) log out from admin user.&lt;br/&gt;
5) Hit the page &lt;a href=&quot;http://localhost:4502/content/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/content/&lt;/a&gt;&amp;lt;path_of_page&amp;gt;/mypage.html it will ask for the login ( login as test user ) it opens the page&lt;br/&gt;
6) hit the alias page &lt;a href=&quot;http://localhost:4502/content/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/content/&lt;/a&gt;&amp;lt;path_of_page&amp;gt;/mypagealias.html - it wont work.&lt;/p&gt;

&lt;p&gt;sling:alias property get stored at jcr:content node for the page in /content, so user with read access on /content should access it. please correct me in case I am missing something.&lt;/p&gt;

&lt;p&gt;to make it work user has to give root( read only ) access to test user only then test user can access alias page. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12956144">SLING-5638</key>
            <summary>Sling:alias property not working if user does not have read access to the root node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Apr 2016 13:01:27 +0000</created>
                <updated>Mon, 25 Apr 2016 08:34:32 +0000</updated>
                            <resolved>Wed, 20 Apr 2016 05:10:57 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.4.12</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15229908" author="asanso" created="Thu, 7 Apr 2016 08:32:06 +0000"  >&lt;p&gt;The culprit is in the ResourceResolverImpl#resolveInternal&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-comment&quot;&gt;// no direct resource found, so we have to drill down into the
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// resource tree to find a match
&lt;/span&gt;            resource = getAbsoluteResourceInternal(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;, parameters, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this wrongly assumes that the session has reading privileges in &quot;/&quot;&lt;/p&gt;</comment>
                            <comment id="15229938" author="bdelacretaz" created="Thu, 7 Apr 2016 08:54:14 +0000"  >&lt;p&gt;I&apos;m a bit confused by &quot;read only access to /content&quot;, isn&apos;t it rather that the alias does not work &lt;em&gt;if the user does not have read access to the root node&lt;/em&gt;? &lt;/p&gt;</comment>
                            <comment id="15229948" author="asanso" created="Thu, 7 Apr 2016 09:01:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; from the snippet I pasted above looks like that in order the alias to work the user need to have read access on &apos;/&apos; . This is a bug IMHO&lt;/p&gt;</comment>
                            <comment id="15229962" author="bdelacretaz" created="Thu, 7 Apr 2016 09:11:59 +0000"  >&lt;p&gt;I agree that this is a bug (and we should have a test for it). &lt;/p&gt;

&lt;p&gt;You might want to update this issues&apos; title and description for clarity then.&lt;/p&gt;</comment>
                            <comment id="15229975" author="asanso" created="Thu, 7 Apr 2016 09:18:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; done thanks. I did not know the root cause when I opened the issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15240950" author="asanso" created="Thu, 14 Apr 2016 10:30:26 +0000"  >&lt;p&gt;added IT (ignored for now) in rev. 1739048&lt;/p&gt;</comment>
                            <comment id="15242669" author="asanso" created="Fri, 15 Apr 2016 09:04:51 +0000"  >&lt;p&gt;attaching proposed path. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegele&quot; class=&quot;user-hover&quot; rel=&quot;cziegele&quot;&gt;cziegele&lt;/a&gt; WDYT?&lt;/p&gt;

&lt;p&gt;Note, the patch resolve this issue. That is, assuming there is:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;deny jcr:all in &apos;/&apos; for everyone&lt;/li&gt;
	&lt;li&gt;allow jcr:read in &apos;/content&apos; for testuser&lt;/li&gt;
	&lt;li&gt;any alias  (e.g. mypagealias) exists under the children of &apos;/content&apos;  (e.g. &apos;/content/&amp;lt;path_of_page&amp;gt;/my_page)&lt;/li&gt;
	&lt;li&gt;Test user can access &lt;a href=&quot;http://localhost:4502/content/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/content/&lt;/a&gt;&amp;lt;path_of_page&amp;gt;/mypagealias.html&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One limitation will still exist, and I doubt we can ever fix it. &lt;br/&gt;
The not solved case is this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;deny jcr:all in &apos;/&apos; for everyone&lt;/li&gt;
	&lt;li&gt;allow jcr:read in &apos;/content&apos; for testuser&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If the alias (e.g. mypagealias) is directly in /content  testuser can&apos;t still access &lt;a href=&quot;http://localhost:4502/mypagealias&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/mypagealias&lt;/a&gt; . &lt;br/&gt;
I propose to document this as a limitation unless someone has an idea on how to solve this...&lt;/p&gt;</comment>
                            <comment id="15242750" author="cziegeler" created="Fri, 15 Apr 2016 10:16:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; Patch looks  good to me, thanks&lt;/p&gt;
</comment>
                            <comment id="15242774" author="asanso" created="Fri, 15 Apr 2016 10:36:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; thanks for reviewing. How about that limitation I mentioned.  Do you think we can &quot;live&quot; with it and document?&lt;/p&gt;</comment>
                            <comment id="15242832" author="cziegeler" created="Fri, 15 Apr 2016 11:24:01 +0000"  >&lt;p&gt;yepp, let&apos;s document the limitation&lt;/p&gt;</comment>
                            <comment id="15247239" author="asanso" created="Tue, 19 Apr 2016 06:03:48 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; . I have applied the patch in r1739843&lt;/p&gt;</comment>
                            <comment id="15247250" author="asanso" created="Tue, 19 Apr 2016 06:20:41 +0000"  >&lt;p&gt;enabled IT in r1739845 &lt;/p&gt;</comment>
                            <comment id="15247265" author="bdelacretaz" created="Tue, 19 Apr 2016 06:45:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; there&apos;s a commented out test_resolve_with_sling_alias_limited_access method in ResourceResolverTest, could you check and remove it if it&apos;s not needed anymore?&lt;/p&gt;

&lt;p&gt;Also, there are comments like &quot;//deny jcr:all on /content&quot; and &quot;//grant read on /content/child&quot; in the active test method that don&apos;t match what&apos;s happening (the tests use /), please have a look.&lt;/p&gt;</comment>
                            <comment id="15247276" author="asanso" created="Tue, 19 Apr 2016 06:55:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; I have edited the wrong comment . Thanks for spotting.&lt;/p&gt;

&lt;p&gt;I also removed the commented test. This was there and commented from long time (do not know why though)&lt;/p&gt;</comment>
                            <comment id="15249252" author="asanso" created="Wed, 20 Apr 2016 05:10:30 +0000"  >&lt;p&gt;documented limitation in r1739790&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12798926" name="SLING-5638-patch.txt" size="3076" author="asanso" created="Fri, 15 Apr 2016 09:09:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vnt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5637] Resource.delete is not called if resource is adaptable to Node</title>
                <link>https://issues.apache.org/jira/browse/SLING-5637</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a resource is adaptable to Node, the node is directly removed.&lt;br/&gt;
ResourceProvider.delete is never invoked.&lt;br/&gt;
While this works with the JcrResourceProvider it does not work with any other resource provider providing resources which adapt to a node&lt;/p&gt;

&lt;p&gt;Proposed solution:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;### Eclipse Workspace Patch 1.0
#P org.apache.sling.servlets.post
Index: src/main/java/org/apache/sling/servlets/post/impl/operations/DeleteOperation.java
===================================================================
--- src/main/java/org/apache/sling/servlets/post/impl/operations/DeleteOperation.java	(Revision 1737673)
+++ src/main/java/org/apache/sling/servlets/post/impl/operations/DeleteOperation.java	(Arbeitskopie)
@@ -58,15 +58,15 @@
         &lt;span class=&quot;code-comment&quot;&gt;// SLING-3203: selectors, extension and suffix make no sense here and
&lt;/span&gt;         &lt;span class=&quot;code-comment&quot;&gt;// might lead to deleting other resources than the one the user means.
&lt;/span&gt;         &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; RequestPathInfo rpi = request.getRequestPathInfo();
-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( (rpi.getSelectors() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; rpi.getSelectors().length &amp;gt; 0) 
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( (rpi.getSelectors() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; rpi.getSelectors().length &amp;gt; 0)
                 || (rpi.getExtension() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; rpi.getExtension().length() &amp;gt; 0)
                 || (rpi.getSuffix() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; rpi.getSuffix().length() &amp;gt; 0)) {
             response.setStatus(
-                    HttpServletResponse.SC_FORBIDDEN, 
+                    HttpServletResponse.SC_FORBIDDEN,
                     &lt;span class=&quot;code-quote&quot;&gt;&quot;DeleteOperation request cannot include any selectors, extension or suffix&quot;&lt;/span&gt;);
             &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
         }
-        
+
         &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; VersioningConfiguration versioningConfiguration = getVersioningConfiguration(request);
         &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; deleteChunks = isDeleteChunkRequest(request);
         &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Iterator&amp;lt;Resource&amp;gt; res = getApplyToResources(request);
@@ -100,19 +100,17 @@
             } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                 checkoutIfNecessary(node.getParent(), changes,
                     versioningConfiguration);
-                node.remove();
             }
-
-        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
-            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
-                resource.getResourceResolver().delete(resource);
-            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PersistenceException pe) {
-                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pe.getCause() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; RepositoryException) {
-                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; (RepositoryException) pe.getCause();
-                }
-                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RepositoryException(pe);
+        }
+        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+            resource.getResourceResolver().delete(resource);
+        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PersistenceException pe) {
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pe.getCause() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; RepositoryException) {
+                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; (RepositoryException) pe.getCause();
             }
+            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RepositoryException(pe);
         }
+
         changes.add(Modification.onDeleted(resource.getPath()));
     }
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12956076">SLING-5637</key>
            <summary>Resource.delete is not called if resource is adaptable to Node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Apr 2016 07:16:38 +0000</created>
                <updated>Thu, 11 Aug 2016 13:29:03 +0000</updated>
                            <resolved>Thu, 7 Apr 2016 07:54:23 +0000</resolved>
                                    <version>Servlets Post 2.3.8</version>
                                    <fixVersion>Servlets Post 2.3.10</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15229860" author="cziegeler" created="Thu, 7 Apr 2016 07:54:23 +0000"  >&lt;p&gt;Applied the patch&lt;/p&gt;</comment>
                            <comment id="15417228" author="igurjar" created="Thu, 11 Aug 2016 13:28:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; The patch has broken chunk delete functionality.&lt;br/&gt;
when trying to delete chunks it deletes asset also.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vndz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5636] Form Authentication handler does not redirect to login form with non ROOT context</title>
                <link>https://issues.apache.org/jira/browse/SLING-5636</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using the form authentication bundle with a servlet context path != ROOT, accessing content requiring authentication redirects you to Sling home page instead of your form because the redirection doesn&apos;t contain the context path:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;INFO&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;qtp1841606468-42&amp;#93;&lt;/span&gt; org.apache.sling.auth.core.impl.SlingAuthenticator getAnonymousResolver: Anonymous access not allowed by configuration - requesting credentials&lt;br/&gt;
&lt;b&gt;WARN&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;qtp1841606468-42&amp;#93;&lt;/span&gt; org.apache.sling.auth.core.AuthUtil isRedirectValid: Redirect target &apos;/apps/opal/loginNode.html&apos; does not start with servlet context path &apos;/dev&apos;&lt;/p&gt;

&lt;p&gt;Changing the redirection in FormAuthenticationHandler:413 with this worked for me:&lt;br/&gt;
AuthUtil.sendRedirect(request, response, request.getContextPath() + loginForm, params);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12955328">SLING-5636</key>
            <summary>Form Authentication handler does not redirect to login form with non ROOT context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="glucazeau">Guillaume Lucazeau</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Apr 2016 15:18:21 +0000</created>
                <updated>Mon, 15 Oct 2018 16:02:03 +0000</updated>
                            <resolved>Wed, 6 Apr 2016 12:10:42 +0000</resolved>
                                    <version>Form Based Authentication 1.0.8</version>
                                    <fixVersion>Form Based Authentication 1.0.10</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15228162" author="cziegeler" created="Wed, 6 Apr 2016 12:10:42 +0000"  >&lt;p&gt;Thanks Guillaume, I&apos;ve applied your fix&lt;/p&gt;</comment>
                            <comment id="16650417" author="klcodanr" created="Mon, 15 Oct 2018 16:02:03 +0000"  >&lt;p&gt;Closed with the release of &lt;a href=&quot;https://issues.apache.org/jira/projects/SLING/versions/12333863&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Form Based Authentication 1.0.10&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vis7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5635] Project creation wizards should not unconditionally create new runtimes</title>
                <link>https://issues.apache.org/jira/browse/SLING-5635</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Instead of creating a new runtime every time, just pick an existing matching runtime.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12955311">SLING-5635</key>
            <summary>Project creation wizards should not unconditionally create new runtimes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Apr 2016 14:22:26 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:38 +0000</updated>
                            <resolved>Fri, 1 Apr 2016 14:26:33 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15221757" author="rombert" created="Fri, 1 Apr 2016 14:26:38 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1737398&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1737398&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2viof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5634] Content projects automatically configured as WST projects fail to deploy</title>
                <link>https://issues.apache.org/jira/browse/SLING-5634</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3100&quot; title=&quot;Provide a m2e project configurator for packaging &amp;quot;content-package&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3100&quot;&gt;&lt;del&gt;SLING-3100&lt;/del&gt;&lt;/a&gt; content packages are automatically configured as Dynamic Web Projects if the &lt;tt&gt;content-package-maven-plugin&lt;/tt&gt; is detected. In turn, this causes them to receive a jst.web facet.&lt;/p&gt;

&lt;p&gt;Given that our module factory and the other module factories have the same &lt;tt&gt;order&lt;/tt&gt; ( -1 ), which module factory &quot;wins&quot; and determines the module type is not defined. Therefore, sometimes the modules are created as &lt;tt&gt;jst.web&lt;/tt&gt; modules ( return value from &lt;tt&gt;IModule#getModuleType()&lt;/tt&gt; and can&apos;t be deployed on a launchpad instance.&lt;/p&gt;

&lt;p&gt;The typical error is &quot;The server does not support version 2.4 of the J2EE Web module specification&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12955294">SLING-5634</key>
            <summary>Content projects automatically configured as WST projects fail to deploy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Apr 2016 13:16:12 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:36 +0000</updated>
                            <resolved>Fri, 1 Apr 2016 13:27:08 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.0.10</version>
                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15221680" author="rombert" created="Fri, 1 Apr 2016 13:27:13 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1737378&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1737378&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15221685" author="rombert" created="Fri, 1 Apr 2016 13:31:51 +0000"  >&lt;p&gt;Removed some unintended changes in &lt;a href=&quot;https://svn.apache.org/r1737381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1737381&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12670231">SLING-3100</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vikn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5633] Importing users fails with OakConstraint0022: Authorizable property rep:principalName may not be altered after user/group creation</title>
                <link>https://issues.apache.org/jira/browse/SLING-5633</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12954923">SLING-5633</key>
            <summary>Importing users fails with OakConstraint0022: Authorizable property rep:principalName may not be altered after user/group creation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Mar 2016 11:00:18 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:52 +0000</updated>
                            <resolved>Fri, 15 Apr 2016 07:43:31 +0000</resolved>
                                    <version>Content Distribution Core 0.1.8</version>
                                    <fixVersion>Content Distribution Core 0.1.18</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15242590" author="mpetria" created="Fri, 15 Apr 2016 07:43:31 +0000"  >&lt;p&gt;Fixed by allowing setup of autosave threshold&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vga7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5632] [Sightly] URI manipulation options that process a path should not alter URIs that don&apos;t provide path information</title>
                <link>https://issues.apache.org/jira/browse/SLING-5632</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Code example&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;a href=&quot;${ path @ extension=&apos;html&apos;}&quot;&amp;gt;Our link&amp;lt;/a&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This normally works ok, but in case &lt;tt&gt;path&lt;/tt&gt; points to a URL that doesn&apos;t contain any path information &quot;http://www.google.com&quot;, then we don&apos;t want to add the extension.&lt;/p&gt;

&lt;p&gt;Now this check has to be done every time we use the &lt;tt&gt;extension&lt;/tt&gt; option.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12954755">SLING-5632</key>
            <summary>[Sightly] URI manipulation options that process a path should not alter URIs that don&apos;t provide path information</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="fvisser">Feike Visser</reporter>
                        <labels>
                            <label>Sightly</label>
                    </labels>
                <created>Wed, 30 Mar 2016 20:37:29 +0000</created>
                <updated>Tue, 18 Sep 2018 10:31:45 +0000</updated>
                            <resolved>Fri, 8 Jul 2016 09:30:52 +0000</resolved>
                                                    <fixVersion>Scripting HTL Engine 1.0.20</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15366180" author="radu.cotescu" created="Thu, 7 Jul 2016 14:20:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fvisser&quot; class=&quot;user-hover&quot; rel=&quot;fvisser&quot;&gt;fvisser&lt;/a&gt;, I&apos;ve changed the issue&apos;s summary in order to better reflect the problem. I&apos;ve realised that not only the &lt;tt&gt;extension&lt;/tt&gt; option could have caused problems, but rather all options processing the URI&apos;s path or path-dependent elements like selectors and fragments.&lt;/p&gt;</comment>
                            <comment id="15367447" author="radu.cotescu" created="Fri, 8 Jul 2016 09:30:52 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1751874&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1751874&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13146286">SLING-7548</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13085223">SLING-7000</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vf8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5631] File Installer generating new pid&apos;s for factory in each start of the framework</title>
                <link>https://issues.apache.org/jira/browse/SLING-5631</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m changing from felix file installer to Sling file installer and I stumbled upon a problem that I was not seeing on felix file installer. I&apos;m using bndtools to develop and I make multiple restarts. The first time I booted the felix framework I dint&apos;t have any problems. The second time my factory configurations became repeated. To give an example:&lt;/p&gt;

&lt;p&gt;First Boot:&lt;/p&gt;

&lt;p&gt;05e9adef-c7a9-49b5-a243-39f029e4389c.config&lt;/p&gt;

&lt;p&gt;factory.config with:&lt;br/&gt;
factory.pidList=[ \&lt;br/&gt;
  &quot;platform.directory.datasource.05e9adef-c7a9-49b5-a243-39f029e4389c&quot;, \&lt;br/&gt;
  ]&lt;/p&gt;

&lt;p&gt;Second Boot:&lt;/p&gt;

&lt;p&gt;05e9adef-c7a9-49b5-a243-39f029e4389c.config  &lt;br/&gt;
5b18e3a2-6bc3-497e-9b3c-e09107552df8.config  &lt;br/&gt;
factory.config with:&lt;br/&gt;
factory.pid=&quot;platform.directory.datasource&quot;&lt;br/&gt;
factory.pidList=[ \&lt;br/&gt;
  &quot;platform.directory.datasource.5b18e3a2-6bc3-497e-9b3c-e09107552df8&quot;, \&lt;br/&gt;
  &quot;platform.directory.datasource.05e9adef-c7a9-49b5-a243-39f029e4389c&quot;, \&lt;br/&gt;
  ]&lt;/p&gt;

&lt;p&gt;This was not happening with file install. Is this by design and I need to clean config admin dir&apos;s every time I boot or a bug in file install ?&lt;/p&gt;

&lt;p&gt;This is causing multiple problems inclusive with sling log component wich immediately complains with and exception&lt;/p&gt;

&lt;p&gt;30.03.2016 19:14:37.697 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;CM Configuration Updater (Update: pid=org.apache.sling.commons.log.LogManager.factory.config.30a7d154-cf89-47da-a1af-62afd3c6f96d)&amp;#93;&lt;/span&gt; org.apache.felix.configadmin.1.8.8 [&lt;span class=&quot;error&quot;&gt;&amp;#91;org.osgi.service.cm.ConfigurationAdmin&amp;#93;&lt;/span&gt;][org.osgi.service.cm.ManagedServiceFactory, id=7&lt;/p&gt;

&lt;p&gt;Updating property org.apache.sling.commons.log.names of configuration org.apache.sling.commons.log.LogManager.factory.config.30a7d154-cf89-47da-a1af-62afd3c6f96d caused a problem: Category platform already defined by configuration org.apache.sling.commons.log.LogManager.factory.config.30a7d154-cf89-47da-a1af-62afd3c6f96d&lt;br/&gt;
org.osgi.service.cm.ConfigurationException: org.apache.sling.commons.log.names : Category platform already defined by configuration org.apache.sling.commons.log.LogManager.factory.config.30a7d154-cf89-47da-a1af-62afd3c6f96d&lt;br/&gt;
	at org.apache.sling.commons.log.logback.internal.config.LoggerManagedServiceFactory.updated(LoggerManagedServiceFactory.java:36)&lt;br/&gt;
	at org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.updated(ManagedServiceFactoryTracker.java:159)&lt;br/&gt;
	at org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.provideConfiguration(ManagedServiceFactoryTracker.java:93)&lt;br/&gt;
	at org.apache.felix.cm.impl.ConfigurationManager$UpdateConfiguration.run(ConfigurationManager.java:1753)&lt;br/&gt;
	at org.apache.felix.cm.impl.UpdateThread.run0(UpdateThread.java:143)&lt;br/&gt;
	at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:110)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: org.apache.sling.commons.log.logback.internal.config.ConfigurationException: &lt;br/&gt;
	at org.apache.sling.commons.log.logback.internal.LogConfigManager.updateLoggerConfiguration(LogConfigManager.java:533)&lt;br/&gt;
	at org.apache.sling.commons.log.logback.internal.config.LoggerManagedServiceFactory.updated(LoggerManagedServiceFactory.java:34)&lt;br/&gt;
	... 6 common frames omitted&lt;/p&gt;</description>
                <environment>Linux; bndtools;</environment>
        <key id="12954702">SLING-5631</key>
            <summary>File Installer generating new pid&apos;s for factory in each start of the framework</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ivoleitao">Ivo Leit&#227;o</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2016 18:20:17 +0000</created>
                <updated>Fri, 7 Oct 2016 07:55:19 +0000</updated>
                            <resolved>Fri, 7 Oct 2016 07:55:18 +0000</resolved>
                                    <version>Installer Core 3.6.8</version>
                    <version>File Installer 1.1.0</version>
                    <version>Installer Configuration Factory 1.1.2</version>
                                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15219705" author="cziegeler" created="Thu, 31 Mar 2016 10:11:26 +0000"  >&lt;p&gt;I have not seen this before, would it be possible to upload a sample folder with your configurations?&lt;/p&gt;</comment>
                            <comment id="15306953" author="c-peng@nga.gov" created="Mon, 30 May 2016 21:11:28 +0000"  >&lt;p&gt;Any update on this? I saw the same problem.&lt;/p&gt;</comment>
                            <comment id="15307213" author="cziegeler" created="Tue, 31 May 2016 05:02:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=c-peng%40nga.gov&quot; class=&quot;user-hover&quot; rel=&quot;c-peng@nga.gov&quot;&gt;c-peng@nga.gov&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivoleitao&quot; class=&quot;user-hover&quot; rel=&quot;ivoleitao&quot;&gt;ivoleitao&lt;/a&gt; Could you please upload a sample folder with such a configuration?&lt;/p&gt;</comment>
                            <comment id="15307862" author="c-peng@nga.gov" created="Tue, 31 May 2016 15:03:22 +0000"  >&lt;p&gt;excerpt from my error.log is attached.&lt;/p&gt;</comment>
                            <comment id="15307868" author="c-peng@nga.gov" created="Tue, 31 May 2016 15:05:31 +0000"  >&lt;p&gt;.config files on disk &amp;lt;my local cq server&amp;gt;\author\crx-quickstart\launchpad\config\org\apache\sling\commons\log&lt;/p&gt;</comment>
                            <comment id="15309010" author="c-peng@nga.gov" created="Wed, 1 Jun 2016 01:18:54 +0000"  >&lt;p&gt;Could you shed some lights on when will sling installer create new .config file on disk from osgi config under /apps/project/config.XXX or /apps/system/config.XXX ?&lt;/p&gt;

&lt;p&gt;I&apos;m asking this because I noticed the problem occurred when I have orphaned .config files - there are old .config (might come from cloning of other cq instance) files under my &amp;lt;quickstart folder&amp;gt;\launchpad\config folder , somehow they are no longer tied with the corresponding osgi config. Install/Updating/Deleting the osgi config would generate/update/delete a new .config, so the old .config just hangs there and cause the &quot;already defined&quot; error when instance starts.&lt;/p&gt;

&lt;p&gt;However, I couldn&apos;t find a pattern on how to make a .config orphaned/obsolete. Does sling installer use the file timestamp?&lt;/p&gt;</comment>
                            <comment id="15309324" author="cziegeler" created="Wed, 1 Jun 2016 05:48:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivoleitao&quot; class=&quot;user-hover&quot; rel=&quot;ivoleitao&quot;&gt;ivoleitao&lt;/a&gt; I can&apos;t reproduce the problem. It works for me as expected.&lt;br/&gt;
As an example, I have the following file in the &quot;install&quot; directory: org.apache.sling.commons.log.LogManager.factory.config-test.config&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;org.apache.sling.commons.log.pattern=&quot;&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {5}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;&quot;&lt;br/&gt;
org.apache.sling.commons.log.names=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;log2.request&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.sling.commons.log.file=&quot;logs/request.log&quot;&lt;br/&gt;
org.apache.sling.commons.log.level=&quot;info&quot;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;On a restart no error is logged and the factory config is not created twice.&lt;/p&gt;

&lt;p&gt;Please provide detailed steps to reproduce the problem. Thanks&lt;/p&gt;</comment>
                            <comment id="15309330" author="cziegeler" created="Wed, 1 Jun 2016 05:52:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=c-peng%40nga.gov&quot; class=&quot;user-hover&quot; rel=&quot;c-peng@nga.gov&quot;&gt;c-peng@nga.gov&lt;/a&gt; I think, as you note, you have a different issue. You should never modify or bother about files stored in launchpad\config. These are private to the configuration admin. You can add/update/delete configurations either through the web console, or by changing the contents of locations watched by the OSGi installer (providers): the &quot;install&quot; folder on disk, or any folder like /apps/.../config in the repository. You can add/update such configurations directly there.&lt;br/&gt;
If you have further questions please use the mailing list. Thanks&lt;/p&gt;</comment>
                            <comment id="15345397" author="ivoleitao" created="Wed, 22 Jun 2016 23:35:51 +0000"  >&lt;p&gt;Hello Carsten sorry for the long absence but I was in another project I can now return full time to this one. &lt;/p&gt;

&lt;p&gt;Anyway, this is unfortunately not only a file installer problem. I was able to reproduce it also with JCR installer. I will provide in attachment the two files that I used. Note that I only see an exception after the third restart. First one with configuration admin cache empty creates a factory file, second one creates another factory file. In the third restart I see an exception. In attach the writer and the config.&lt;/p&gt;

&lt;p&gt;If you&apos;re not able to reproduce with this I can provide a full example.&lt;/p&gt;</comment>
                            <comment id="15455808" author="ivoleitao" created="Thu, 1 Sep 2016 15:43:57 +0000"  >&lt;p&gt;Hi !&lt;/p&gt;

&lt;p&gt;After a long period I&apos;ve finally had time to look at this in greater detail. Unfortunately this was caused by my environment. I&apos;m using BndTools for development and there is a property that instructs the running framework (felix) to do not keep the bundle private area configurations (I don&apos;t know why the default setting is false, that seems a little odd...).&lt;/p&gt;

&lt;p&gt;After many debugging sessions in the source code of the sling installer I&apos;ve reached the conclusion that the RegisteredSourceLists.ser file was being deleted in each startup of the environment therefore the duplication that I was having. &lt;/p&gt;

&lt;p&gt;Anyway the solution was to set -runkeep property must be set to true in the bndtools run configuration. Also I don&apos;t know how fileinstall was working without a similar mechanism to the one used by the sling installer  but this was the problem in my environment. &lt;/p&gt;

&lt;p&gt;For anyone with a similar problem this &lt;a href=&quot;https://groups.google.com/forum/#!searchin/bndtools-users/launch.keep%7Csort:relevance/bndtools-users/-exa7MbJJ0A/wGzVklIbaDcJ&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;link&lt;/a&gt; from the bndtools mailing list gives some insight on the problem&lt;/p&gt;

&lt;p&gt;Finally thank for the support and sorry for bringing up something as a bug that is clearly and environment problem. This issue can be closed&lt;/p&gt;

&lt;p&gt;Best Regards&lt;/p&gt;</comment>
                            <comment id="15554450" author="cziegeler" created="Fri, 7 Oct 2016 07:55:18 +0000"  >&lt;p&gt;Thanks for the feedback, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivoleitao&quot; class=&quot;user-hover&quot; rel=&quot;ivoleitao&quot;&gt;ivoleitao&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12807180" name="cpeng.error.05-31-2016.log" size="14368" author="c-peng@nga.gov" created="Tue, 31 May 2016 15:03:22 +0000"/>
                            <attachment id="12807182" name="log.zip" size="9887" author="c-peng@nga.gov" created="Tue, 31 May 2016 15:05:31 +0000"/>
                            <attachment id="12812659" name="org.apache.sling.commons.log.LogManager.factory.config-debug.log.config" size="286" author="ivoleitao" created="Wed, 22 Jun 2016 23:37:41 +0000"/>
                            <attachment id="12812660" name="org.apache.sling.commons.log.LogManager.factory.writer-debug.log.config" size="197" author="ivoleitao" created="Wed, 22 Jun 2016 23:37:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vex3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5629] redirectAfterLogout prepends servlet context to the target, when it&apos;s already there</title>
                <link>https://issues.apache.org/jira/browse/SLING-5629</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In SlingAuthenticator.redirectAfterLogout, a call is made to AuthUtil.isRedirectValid(request, target) which expects the target to contain the servlet context path.&lt;/p&gt;

&lt;p&gt;When the validation is made, the call for redirection appends the servlet context to the same target, leading to a duplicated context:&lt;br/&gt;
Line 1417: response.sendRedirect(request.getContextPath() + target);&lt;/p&gt;

&lt;p&gt;Calling &lt;a href=&quot;http://localhost:8080/dev/system/sling/logout?resource=/dev/content/node1.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/dev/system/sling/logout?resource=/dev/content/node1.html&lt;/a&gt; redirects to &lt;a href=&quot;http://localhost:8080/dev/dev/content/node1.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/dev/dev/content/node1.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12953236">SLING-5629</key>
            <summary>redirectAfterLogout prepends servlet context to the target, when it&apos;s already there</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="glucazeau">Guillaume Lucazeau</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Mar 2016 15:12:08 +0000</created>
                <updated>Fri, 10 Jun 2016 10:12:28 +0000</updated>
                            <resolved>Mon, 28 Mar 2016 13:24:18 +0000</resolved>
                                    <version>Auth Core 1.3.12</version>
                                    <fixVersion>Auth Core 1.3.14</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15210536" author="githubbot" created="Thu, 24 Mar 2016 16:48:50 +0000"  >&lt;p&gt;GitHub user glucazeau opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/132&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5629&quot; title=&quot;redirectAfterLogout prepends servlet context to the target, when it&amp;#39;s already there&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5629&quot;&gt;&lt;del&gt;SLING-5629&lt;/del&gt;&lt;/a&gt;: do not prepend servlet context path on the target&lt;/p&gt;

&lt;p&gt;    Remove prepend of servlet context in redirectAfterLogout, as it is required to be in the redirection target by AuthUtil.isRedirectValid&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/glucazeau/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/glucazeau/sling&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/132.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/132.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #132&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1fb198794327b452be0ae8c33e0407eccd149194&lt;br/&gt;
Author: Guillaume Lucazeau &amp;lt;glucazeau@advanced-schema.com&amp;gt;&lt;br/&gt;
Date:   2016-03-24T15:56:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5629&quot; title=&quot;redirectAfterLogout prepends servlet context to the target, when it&amp;#39;s already there&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5629&quot;&gt;&lt;del&gt;SLING-5629&lt;/del&gt;&lt;/a&gt;: do not prepend servlet context path on the target&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15214184" author="cziegeler" created="Mon, 28 Mar 2016 13:24:18 +0000"  >&lt;p&gt;Thanks for your patch, Guillaume. It&apos;s applied in rev 1736885&lt;br/&gt;
I&apos;ve also corrected the target if the redirect path is invalid&lt;/p&gt;</comment>
                            <comment id="15324173" author="githubbot" created="Fri, 10 Jun 2016 10:12:28 +0000"  >&lt;p&gt;Github user glucazeau closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/132&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v5vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5627] maven-sling-plugin: HTTP Status is not checked correctly when WebConsole install method used</title>
                <link>https://issues.apache.org/jira/browse/SLING-5627</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Maven Sling Plugin fails upon bundle installation on a fresh instance:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.sling:maven-sling-plugin:2.1.8:install (install-bundle) on project core: Insta&lt;br/&gt;
llation on &lt;a href=&quot;http://localhost:4502/apps/beneteau/install&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/apps/beneteau/install&lt;/a&gt; failed, cause: Installation failed, cause: Created -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Accordingly to the code in AbstractBundleInstallMojo.java the HTTP result is expected 200 OK while for HTTP POST the status 201 Created is also a valid status of normal execution:&lt;/p&gt;

&lt;p&gt;int status = getHttpClient().executeMethod(filePost);&lt;br/&gt;
if (status == HttpStatus.SC_OK) {&lt;br/&gt;
        getLog().info(&quot;Bundle installed&quot;);&lt;br/&gt;
} else { &lt;/p&gt;

&lt;p&gt;Proposed fix is to add also condition status == HttpStatus.SC_CREATED&lt;/p&gt;
</description>
                <environment>AEM 6.1 sp1&lt;br/&gt;
Apache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06; 2015-04-22T14:57:37+03:00)&lt;br/&gt;
Maven home: d:\Java\apache-maven-3.3.3\bin\..&lt;br/&gt;
Java version: 1.8.0_66, vendor: Oracle Corporation&lt;br/&gt;
Java home: c:\Program Files\Java\jdk1.8.0_66\jre&lt;br/&gt;
Default locale: ru_RU, platform encoding: Cp1251&lt;br/&gt;
OS name: &amp;quot;windows 7&amp;quot;, version: &amp;quot;6.1&amp;quot;, arch: &amp;quot;amd64&amp;quot;, family: &amp;quot;dos&amp;quot;</environment>
        <key id="12952918">SLING-5627</key>
            <summary>maven-sling-plugin: HTTP Status is not checked correctly when WebConsole install method used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peter80">Peter Melnikov</reporter>
                        <labels>
                            <label>maven</label>
                            <label>sling</label>
                    </labels>
                <created>Wed, 23 Mar 2016 17:50:03 +0000</created>
                <updated>Thu, 24 Mar 2016 10:13:13 +0000</updated>
                            <resolved>Thu, 24 Mar 2016 10:10:12 +0000</resolved>
                                    <version>Maven Sling Plugin 2.1.8</version>
                                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15209868" author="kwin" created="Thu, 24 Mar 2016 06:38:16 +0000"  >&lt;p&gt;I am pretty sure, that this is just a misconfiguration on your side:&lt;br/&gt;
The Felix WebConsole BundlesServlet will never return a 201 for a POST request (&lt;a href=&quot;https://github.com/apache/felix/blob/trunk/webconsole/src/main/java/org/apache/felix/webconsole/internal/core/BundlesServlet.java#L322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/blob/trunk/webconsole/src/main/java/org/apache/felix/webconsole/internal/core/BundlesServlet.java#L322&lt;/a&gt;). And the maven-sling-plugin has not been changed recently in the regard of how status codes are handled for POSTs towards the Felix WebConsole (&lt;a href=&quot;https://github.com/apache/sling/blame/74d2764d4a092dfd02e2b173564e0105f696c607/tooling/maven/maven-sling-plugin/src/main/java/org/apache/sling/maven/bundlesupport/AbstractBundleInstallMojo.java#L344&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blame/74d2764d4a092dfd02e2b173564e0105f696c607/tooling/maven/maven-sling-plugin/src/main/java/org/apache/sling/maven/bundlesupport/AbstractBundleInstallMojo.java#L344&lt;/a&gt;).&lt;br/&gt;
I am assuming that somehow the Sling Post Servlet is answering here, because probably your &lt;tt&gt;slingUrl&lt;/tt&gt; does not point towards the Sling Web Console (&lt;tt&gt;/system/console&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="15209870" author="kwin" created="Thu, 24 Mar 2016 06:42:43 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5628&quot; title=&quot;maven-sling-plugin: Clarify documentation of sling.url and adjust the default value to the current state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5628&quot;&gt;&lt;del&gt;SLING-5628&lt;/del&gt;&lt;/a&gt; to clarify the &lt;tt&gt;slingUrl&lt;/tt&gt; description in the documentation (&lt;a href=&quot;https://sling.apache.org/documentation/development/sling.html#the-install-goal&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/sling.html#the-install-goal&lt;/a&gt;) and also to give that a more reasonable default value (which will not work with AEM though).&lt;/p&gt;</comment>
                            <comment id="15210042" author="peter80" created="Thu, 24 Mar 2016 10:08:29 +0000"  >&lt;p&gt;Thank you, Konrad, changing &lt;tt&gt;slingUrl&lt;/tt&gt; to &lt;tt&gt;&lt;a href=&quot;http://localhost:4502/system/console/bundles&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/system/console/bundles&lt;/a&gt;&lt;/tt&gt; helped. &lt;/p&gt;</comment>
                            <comment id="15210048" author="peter80" created="Thu, 24 Mar 2016 10:10:12 +0000"  >&lt;p&gt;Resolving the issue, as it was a configuration problem on my side.&lt;/p&gt;</comment>
                            <comment id="15210050" author="kwin" created="Thu, 24 Mar 2016 10:13:13 +0000"  >&lt;p&gt;Actually changing it only to &lt;a href=&quot;http://localhost:4502/system/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/system/console&lt;/a&gt; should be enough.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12953106">SLING-5628</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v3wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5626] Start level for bundles in the boot section is not correctly set on update</title>
                <link>https://issues.apache.org/jira/browse/SLING-5626</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a bundle is updated which is in the new version in the boot section but was in the old version at a different start level, the start level is not changed.&lt;br/&gt;
Therefore although the intention is to start this bundle as a first bundle, it&apos;s not happening&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952902">SLING-5626</key>
            <summary>Start level for bundles in the boot section is not correctly set on update</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Mar 2016 16:57:24 +0000</created>
                <updated>Sun, 16 Oct 2016 09:12:46 +0000</updated>
                            <resolved>Wed, 23 Mar 2016 17:19:13 +0000</resolved>
                                    <version>Launchpad Base 2.6.10</version>
                                    <fixVersion>Launchpad Base 2.6.12</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15208805" author="cziegeler" created="Wed, 23 Mar 2016 17:19:13 +0000"  >&lt;p&gt;Added the missing call for bundle updates&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v3tb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5625] Unable to impersonate user with surrogate pair character</title>
                <link>https://issues.apache.org/jira/browse/SLING-5625</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When trying to impersonate to a user having surrogate pair character (e.g. &quot;&#20013;&#25991;test&quot;), SlingAuthenticator throws an error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;23.03.2016 10:34:37.637 *ERROR* [qtp1315207446-3359] org.apache.felix.http.jetty Exception &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing request to /home/users/I/ (java.lang.IllegalArgumentException: Illegal character in cookie value)
java.lang.IllegalArgumentException: Illegal character in cookie value
	at org.eclipse.jetty.server.Response.isQuoteNeededForCookie(Response.java:405)
	at org.eclipse.jetty.server.Response.addSetCookie(Response.java:353)
	at org.eclipse.jetty.server.Response.addCookie(Response.java:239)
	at javax.servlet.http.HttpServletResponseWrapper.addCookie(HttpServletResponseWrapper.java:56)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.sendSudoCookie(SlingAuthenticator.java:1225)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.setSudoCookie(SlingAuthenticator.java:1344)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.getResolver(SlingAuthenticator.java:777)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.doHandleSecurity(SlingAuthenticator.java:495)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.handleSecurity(SlingAuthenticator.java:449)
	at org.apache.sling.engine.impl.SlingHttpContext.handleSecurity(SlingHttpContext.java:121)
	at org.apache.felix.http.base.internal.service.ServletContextImpl.handleSecurity(ServletContextImpl.java:421)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:57)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:124)
	at org.apache.felix.http.base.internal.DispatcherServlet.service(DispatcherServlet.java:61)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is due to the implementation of SlingAuthenticator#quoteCookieValue() that cannot handle surrogate pair character.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952783">SLING-5625</key>
            <summary>Unable to impersonate user with surrogate pair character</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="christanto">Christanto</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Mar 2016 10:46:19 +0000</created>
                <updated>Fri, 11 Nov 2016 12:40:12 +0000</updated>
                            <resolved>Fri, 24 Jun 2016 09:44:28 +0000</resolved>
                                    <version>Auth Core 1.3.12</version>
                                    <fixVersion>Auth Core 1.3.16</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15208338" author="christanto" created="Wed, 23 Mar 2016 12:31:49 +0000"  >&lt;p&gt;Encoding/decoding using URLEncoder/URLDecoder should work just fine, instead of using custom encoder.&lt;/p&gt;</comment>
                            <comment id="15348072" author="asanso" created="Fri, 24 Jun 2016 09:44:05 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christanto&quot; class=&quot;user-hover&quot; rel=&quot;christanto&quot;&gt;christanto&lt;/a&gt; for reporting. Fixed it in r1750060  &lt;/p&gt;</comment>
                            <comment id="15525033" author="christanto" created="Tue, 27 Sep 2016 04:30:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; BTW Since you encode when you set, you should also decode when you get the cookie.&lt;/p&gt;</comment>
                            <comment id="15525035" author="christanto" created="Tue, 27 Sep 2016 04:31:05 +0000"  >&lt;p&gt;Also you can simplify the whole implementation simply by encoding the whole string and remove the for loop:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;StringBuilder builder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringBuilder(value.length() * 2);
builder.append(&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&apos;&lt;/span&gt;);
builder.append(URLEncoder.encode(value, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;));
builder.append(&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13020100">SLING-6275</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v32v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5624] Health Check Core 1.2.4 fails on Karaf</title>
                <link>https://issues.apache.org/jira/browse/SLING-5624</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;SlingExtensionHealthcheckIT&lt;/tt&gt; fails with &lt;tt&gt;org.apache.sling/org.apache.sling.hc.core/1.2.4&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952741">SLING-5624</key>
            <summary>Health Check Core 1.2.4 fails on Karaf</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Mar 2016 08:50:13 +0000</created>
                <updated>Fri, 3 Mar 2017 14:17:43 +0000</updated>
                            <resolved>Fri, 29 Apr 2016 07:26:56 +0000</resolved>
                                                    <fixVersion>Karaf Features 1.0.0</fixVersion>
                                    <component>Karaf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15263674" author="olli" created="Fri, 29 Apr 2016 07:26:56 +0000"  >&lt;p&gt;test succeeds with 1.2.5-SNAPSHOT again&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12952726">SLING-5623</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v2tj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5622] Deadlock between service unregister (thus unbindTopologyEventListener) and discoveryLiteCheck</title>
                <link>https://issues.apache.org/jira/browse/SLING-5622</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There&apos;s a java level deadlock between the following two threads, excerpts below. It&apos;s not yet clear if this is an issue of discovery.oak or resourceresolver.&lt;br/&gt;
thread 1:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;LeaseFailureHandler-Thread&quot; daemon prio=5 tid=0x7f34 nid=0xffffffff in Object.wait()
   java.lang.Thread.State: WAITING (on object monitor)
        at sun.misc.Unsafe.park(Native Method)
        - waiting to lock &amp;lt;0x575a7644&amp;gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync) owned by &quot;discovery.connectors.common.runner.e8dd34be-8886-4e5d-891f-5509b4dea0f0.discoveryLiteChec
k&quot; tid=0x4,330
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:867)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1197)
        at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:214)
        at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:290)
        at org.apache.sling.discovery.oak.OakDiscoveryService.unbindTopologyEventListener(OakDiscoveryService.java:368)
...
        at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:144)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.unregisterFactory(ResourceResolverFactoryActivator.java:611)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.unregisterFactory(ResourceResolverFactoryActivator.java:602)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.checkFactoryPreconditions(ResourceResolverFactoryActivator.java:674)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.access$100(ResourceResolverFactoryActivator.java:79)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator$1.providerRemoved(ResourceResolverFactoryActivator.java:500)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.unregister(ResourceProviderTracker.java:224)
        - locked &amp;lt;0x35cd7613&amp;gt; (a java.util.HashMap)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.access$100(ResourceProviderTracker.java:58)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.removedService(ResourceProviderTracker.java:109)
...
        at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:144)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.unregisterService(AbstractSlingRepositoryManager.java:262)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.stop(AbstractSlingRepositoryManager.java:389)
...
        at org.apache.felix.framework.BundleImpl.stop(BundleImpl.java:1038)
        at org.apache.felix.framework.BundleImpl.stop(BundleImpl.java:1024)
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreService$1.handleLeaseFailure(DocumentNodeStoreService.java:413)
        at org.apache.jackrabbit.oak.plugins.document.ClusterNodeInfo$1.run(ClusterNodeInfo.java:696)
        at java.lang.Thread.run(Thread.java:745)


   Locked ownable synchronizers:
        - locked &amp;lt;0x4402f4fd&amp;gt; (a java.util.concurrent.locks.ReentrantLock$FairSync)
        - locked &amp;lt;0x1e2230ed&amp;gt; (a java.util.concurrent.locks.ReentrantLock$FairSync)
        - locked &amp;lt;0x56ba270f&amp;gt; (a java.util.concurrent.locks.ReentrantLock$FairSync)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and thread 2:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;discovery.connectors.common.runner.e8dd34be-8886-4e5d-891f-5509b4dea0f0.discoveryLiteCheck&quot; daemon prio=5 tid=0x10ea nid=0xffffffff waiting for monitor entry
   java.lang.Thread.State: BLOCKED
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.getResourceProviderStorage(ResourceProviderTracker.java:364)
        - waiting to lock &amp;lt;0x35cd7613&amp;gt; (a java.util.HashMap) owned by &quot;LeaseFailureHandler-Thread&quot; tid=0x32,564
        at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.createControl(ResourceResolverImpl.java:154)
        at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.&amp;lt;init&amp;gt;(ResourceResolverImpl.java:116)
        at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.&amp;lt;init&amp;gt;(ResourceResolverImpl.java:110)
        at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getResourceResolverInternal(CommonResourceResolverFactoryImpl.java:257)
        at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getAdministrativeResourceResolver(CommonResourceResolverFactoryImpl.java:140)
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryImpl.getAdministrativeResourceResolver(ResourceResolverFactoryImpl.java:107)
        at org.apache.sling.discovery.oak.cluster.OakClusterViewService.getResourceResolver(OakClusterViewService.java:103)
        at org.apache.sling.discovery.oak.cluster.OakClusterViewService.getLocalClusterView(OakClusterViewService.java:110)
        at org.apache.sling.discovery.base.commons.BaseDiscoveryService.getTopology(BaseDiscoveryService.java:77)
        at org.apache.sling.discovery.oak.OakDiscoveryService.checkForTopologyChange(OakDiscoveryService.java:657)
        at org.apache.sling.discovery.oak.pinger.OakViewChecker.discoveryLiteCheck(OakViewChecker.java:232)
        - locked &amp;lt;0x740a9729&amp;gt; (a java.lang.Object)
        at org.apache.sling.discovery.oak.pinger.OakViewChecker.access$000(OakViewChecker.java:64)
        at org.apache.sling.discovery.oak.pinger.OakViewChecker$1.run(OakViewChecker.java:208)
        at org.apache.sling.discovery.base.commons.PeriodicBackgroundJob.safelyRun(PeriodicBackgroundJob.java:86)
        at org.apache.sling.discovery.base.commons.PeriodicBackgroundJob.run(PeriodicBackgroundJob.java:77)
        at java.lang.Thread.run(Thread.java:745)

   Locked ownable synchronizers:
        - locked &amp;lt;0x575a7644&amp;gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>discovery.oak 1.2.6&lt;br/&gt;
resourceresolver 1.4.8</environment>
        <key id="12952366">SLING-5622</key>
            <summary>Deadlock between service unregister (thus unbindTopologyEventListener) and discoveryLiteCheck</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2016 09:12:04 +0000</created>
                <updated>Thu, 26 Sep 2019 12:38:21 +0000</updated>
                            <resolved>Wed, 23 Mar 2016 10:04:41 +0000</resolved>
                                    <version>Resource Resolver 1.4.8</version>
                    <version>Discovery Oak 1.2.6</version>
                                    <fixVersion>Resource Resolver 1.4.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15206041" author="egli" created="Tue, 22 Mar 2016 09:16:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, I&apos;d argue that the more critical part wrt this deadlock is the fact that the &lt;tt&gt;ResourceProviderTracker&lt;/tt&gt; has that HashMap locked while calling checkFactoryPreconditions (which apparently can result in &lt;tt&gt;unbind&lt;/tt&gt; to be called synchronously):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator$1.providerRemoved(ResourceResolverFactoryActivator.java:500)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.unregister(ResourceProviderTracker.java:224)
        - locked &amp;lt;0x35cd7613&amp;gt; (a java.util.HashMap)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.access$100(ResourceProviderTracker.java:58)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker$1.removedService(ResourceProviderTracker.java:109)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15206054" author="cziegeler" created="Tue, 22 Mar 2016 09:24:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; I agree, the caller should not hold any locks when calling into the service registry.&lt;/p&gt;</comment>
                            <comment id="15206157" author="cziegeler" created="Tue, 22 Mar 2016 10:53:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; I just committed a potential fix, which has a more complicated handling to avoid calling into the service registry while holding a lock. I&apos;m not 100% if this code is ok, but maybe you can have a look?&lt;/p&gt;</comment>
                            <comment id="15206194" author="egli" created="Tue, 22 Mar 2016 11:21:15 +0000"  >&lt;p&gt;just an early question: what guarantees that &lt;tt&gt;matchingHandlers&lt;/tt&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/81e47f1dd61d0440d86b85c272c4da8b4ace50a4/bundles/resourceresolver/src/main/java/org/apache/sling/resourceresolver/impl/providers/ResourceProviderTracker.java#L260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; is not null?&lt;/p&gt;</comment>
                            <comment id="15206265" author="cziegeler" created="Tue, 22 Mar 2016 12:28:45 +0000"  >&lt;p&gt;Good catch, I think the commit I just made fixes that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15206275" author="egli" created="Tue, 22 Mar 2016 12:33:06 +0000"  >&lt;p&gt;what I don&apos;t exactly understand is what the new &lt;tt&gt;getActivationCount()&lt;/tt&gt; is used for?&lt;/p&gt;</comment>
                            <comment id="15206306" author="cziegeler" created="Tue, 22 Mar 2016 13:01:36 +0000"  >&lt;p&gt;The activation of a newly added handler is now split into different blocks, each block by itself is synchronized, however in between anything can happen.&lt;br/&gt;
If a handler is added, the previously active handler should be deactivated. As this happens in the second block, there is the rare chance that this handler has already been activated again. To avoid deactivation in this situation, I&apos;ve added the count. But while explaining this, the only situation where this could happen is when the handler which is added is removed again - and that while the adding method is still in progress. I think that&apos;s not possible. So we can probably remove the logic&lt;/p&gt;</comment>
                            <comment id="15206312" author="egli" created="Tue, 22 Mar 2016 13:09:20 +0000"  >&lt;p&gt;ok, yes now that makes sense. Not sure if the logic must be removed, but instead was wondering if you wouldn&apos;t need a similar &apos;protective&apos; logic in the &lt;tt&gt;register&lt;/tt&gt; case, or is there a reason that&apos;s not needed there?&lt;/p&gt;</comment>
                            <comment id="15206318" author="cziegeler" created="Tue, 22 Mar 2016 13:12:29 +0000"  >&lt;p&gt;Yes, there is similar logic - it just looks different:&lt;br/&gt;
                        boolean doActivateNext = firstHandler.getInfo() == info;&lt;/p&gt;</comment>
                            <comment id="15206323" author="egli" created="Tue, 22 Mar 2016 13:16:34 +0000"  >&lt;p&gt;right, all good then, thx&lt;/p&gt;</comment>
                            <comment id="15207996" author="cziegeler" created="Wed, 23 Mar 2016 07:11:20 +0000"  >&lt;p&gt;I&apos;ve removed the counter as it really is not needed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; Does this change solve your problem?&lt;/p&gt;</comment>
                            <comment id="15208142" author="egli" created="Wed, 23 Mar 2016 09:43:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, I don&apos;t have a unit or it test for this but now manually reproduced the original problem. Without the fix I was able to reproduce the deadlock (using the debugger with forcing locks to be taken in the exact order as originally reported here) - and with the fix the deadlock is gone. So from that pov it looks good to me.&lt;/p&gt;</comment>
                            <comment id="15208161" author="cziegeler" created="Wed, 23 Mar 2016 10:04:41 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt;&lt;br/&gt;
Let&apos;s consider it fixed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v0i7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5619] 3 IT failures in org.apache.sling.distribution.it</title>
                <link>https://issues.apache.org/jira/browse/SLING-5619</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Both locally and on Jenkins I get the following test failures:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  MultipleForwardDistributionTest.testAddContentCheckPassiveQueue:88 expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
  MultipleQueueDistributionTest.testCopyDistributeQueues:132 expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
  MultipleQueueDistributionTest.testDistributeQueues:80 expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;, any ideas?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12951248">SLING-5619</key>
            <summary>3 IT failures in org.apache.sling.distribution.it</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Mar 2016 15:50:16 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:38 +0000</updated>
                            <resolved>Fri, 18 Mar 2016 08:11:55 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.16</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15201121" author="mpetria" created="Fri, 18 Mar 2016 07:54:13 +0000"  >&lt;p&gt;I reverted the changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5576&quot; title=&quot;Optimize queue items listing for big number of items by using iterators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5576&quot;&gt;&lt;del&gt;SLING-5576&lt;/del&gt;&lt;/a&gt; (revision 1735543) that introduced the failures.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uu2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5613] Upgrade Equinox Region Bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-5613</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the subsystem support being added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5165&quot; title=&quot;Add subsystem support to the launchpad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5165&quot;&gt;&lt;del&gt;SLING-5165&lt;/del&gt;&lt;/a&gt; you might run into the issue being described in &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=468774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=468774&lt;/a&gt;. The newest org.eclipse.equinox.region bundle fixes this issue. Any chance of upgrading to this new bundle version in Sling?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12950774">SLING-5613</key>
            <summary>Upgrade Equinox Region Bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Mar 2016 08:17:15 +0000</created>
                <updated>Wed, 16 Mar 2016 08:20:03 +0000</updated>
                            <resolved>Wed, 16 Mar 2016 08:20:03 +0000</resolved>
                                    <version>Launchpad Builder 9</version>
                                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15196999" author="kwin" created="Wed, 16 Mar 2016 08:19:51 +0000"  >&lt;p&gt;Actually the launchpad already contains the newest version (1.2.101.v20150831-1342). Sorry for the noise.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12905569">SLING-5165</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ur5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5612] AssertCalendar needlessly compares timezone offsets</title>
                <link>https://issues.apache.org/jira/browse/SLING-5612</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;AssertCalendar&lt;/tt&gt; class in the test code compares Calendar objects like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;assertEquals(expected.getTime(), actual.getTime());
assertEquals(expected.getTimeZone().getRawOffset(), actual.getTimeZone().getRawOffset());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Comparing the timezones is not needed IMO, Calendar internally stores stores the time in msec since the epoch, so comparing getTimeInMillis() is sufficient to declare two Calendars as pointing to the same time. For our tests, it&apos;s fine for the timezones to be different.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12950764">SLING-5612</key>
            <summary>AssertCalendar needlessly compares timezone offsets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Mar 2016 07:37:45 +0000</created>
                <updated>Wed, 22 Jun 2016 13:47:57 +0000</updated>
                            <resolved>Wed, 16 Mar 2016 07:41:51 +0000</resolved>
                                    <version>JCR Resource 2.7.4</version>
                                    <fixVersion>JCR Resource 2.8.0</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15196953" author="bdelacretaz" created="Wed, 16 Mar 2016 07:41:51 +0000"  >&lt;p&gt;Changed the comparison method in &lt;a href=&quot;http://svn.apache.org/r1735193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1735193&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joelrich&quot; class=&quot;user-hover&quot; rel=&quot;joelrich&quot;&gt;joelrich&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; IIUC you created that &lt;tt&gt;AssertCalendar&lt;/tt&gt; class as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4585&quot; title=&quot;Performance: Use JackrabbitSession#getItemOrNull to speed up JcrResourceProvider#createResource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4585&quot;&gt;&lt;del&gt;SLING-4585&lt;/del&gt;&lt;/a&gt;, do you agree with this change? If not please reopen this ticket.&lt;/p&gt;</comment>
                            <comment id="15197253" author="rombert" created="Wed, 16 Mar 2016 12:38:51 +0000"  >&lt;p&gt;Looks good to me, thanks for looking into this&lt;/p&gt;</comment>
                            <comment id="15199332" author="joelrich" created="Thu, 17 Mar 2016 11:18:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, the reason why I had to change this was because with the Oak version update getProperty().getDate() started to return a different time zone object which, however, represents the same time zone. Therefore some tests failed. I wanted to keep the behaviour as close as possible and therefore had to manually compare the time zone (the offset instead of the object itself). I think this is the correct behaviour, but it does not matter to me.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ur33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5610] ResourceUtil.getValueMap() contains a wrong @Nonnull annotation </title>
                <link>https://issues.apache.org/jira/browse/SLING-5610</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;b&gt;org.apache.sling.api.resource.ResourceUtil.getValueMap(res)&lt;/b&gt; performs a null check as first action (&lt;b&gt;if ( res == null ) {&lt;/b&gt;). Also, the javadoc states that this method is null safe.&lt;/p&gt;

&lt;p&gt;But the method contains a @Nonnull annotation for the res parameter (&lt;b&gt;@Nonnull final Resource res&lt;/b&gt;) which forces the calling methods to do an additional null check, even if the method handles it internally.&lt;/p&gt;

&lt;p&gt;I suggest to remove the annotation for the parameter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12950547">SLING-5610</key>
            <summary>ResourceUtil.getValueMap() contains a wrong @Nonnull annotation </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="dominik.lienemann">Dominik Lienemann</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2016 14:59:24 +0000</created>
                <updated>Sat, 9 Jul 2016 17:01:11 +0000</updated>
                            <resolved>Tue, 15 Mar 2016 15:04:43 +0000</resolved>
                                    <version>API 2.9.0</version>
                                    <fixVersion>API 2.12.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15195441" author="kwin" created="Tue, 15 Mar 2016 15:04:43 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://svn.apache.org/r1735095&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1735095&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2upqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5607] SlingServletResolver.resolveServlet should never return null</title>
                <link>https://issues.apache.org/jira/browse/SLING-5607</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to the javadoc of the &lt;tt&gt;ServletResolver&lt;/tt&gt; all resolve methods should never return &lt;tt&gt;null&lt;/tt&gt; in case no servlet could be found but rather throw an exception.&lt;/p&gt;

&lt;p&gt;This issue was revealed in the context of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5605&quot; title=&quot;Wrong null annotations on ServletResolver interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5605&quot;&gt;&lt;del&gt;SLING-5605&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12950489">SLING-5607</key>
            <summary>SlingServletResolver.resolveServlet should never return null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2016 11:14:57 +0000</created>
                <updated>Tue, 15 Mar 2016 13:23:19 +0000</updated>
                            <resolved>Tue, 15 Mar 2016 13:23:18 +0000</resolved>
                                    <version>Servlets Resolver 2.4.2</version>
                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15195116" author="kwin" created="Tue, 15 Mar 2016 11:21:16 +0000"  >&lt;p&gt;Changing the implementation for the methods &lt;tt&gt;resolveServlet(Resource, String)&lt;/tt&gt; and &lt;tt&gt;resolveServlet(ResourceResolver, scriptName)&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L277&lt;/a&gt;) is IMHO dangerous, as the chance of getting null back in the past was quite high (as there is no fallback on the default servlet).&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="15195122" author="kwin" created="Tue, 15 Mar 2016 11:27:46 +0000"  >&lt;p&gt;I found only within Sling several references relying on the null behaviour:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;for Sightly, &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/IncludeRuntimeExtension.java#L103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/IncludeRuntimeExtension.java#L103&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;JSP Taglib Include, &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp-taglib/src/main/java/org/apache/sling/scripting/jsp/taglib/CallTag.java#L103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp-taglib/src/main/java/org/apache/sling/scripting/jsp/taglib/CallTag.java#L103&lt;/a&gt;&lt;br/&gt;
which rely on the null return value. &lt;/li&gt;
	&lt;li&gt;JSP Taglib Eval, &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp-taglib/src/main/java/org/apache/sling/scripting/jsp/taglib/EvalTagHandler.java#L113&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp-taglib/src/main/java/org/apache/sling/scripting/jsp/taglib/EvalTagHandler.java#L113&lt;/a&gt;&lt;br/&gt;
AEM contains at least one I know of (com.day.cq.wcm.tags.IncludeTag).&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15195143" author="cziegeler" created="Tue, 15 Mar 2016 11:47:22 +0000"  >&lt;p&gt;JSP Taglib throws an exception if servlet is null&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp-taglib/src/main/java/org/apache/sling/scripting/jsp/taglib/CallTag.java#L110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp-taglib/src/main/java/org/apache/sling/scripting/jsp/taglib/CallTag.java#L110&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp-taglib/src/main/java/org/apache/sling/scripting/jsp/taglib/EvalTagHandler.java#L114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp-taglib/src/main/java/org/apache/sling/scripting/jsp/taglib/EvalTagHandler.java#L114&lt;/a&gt;&lt;br/&gt;
Same is done in Sightly&lt;/p&gt;

&lt;p&gt;So these are no problem if we now throw&lt;/p&gt;</comment>
                            <comment id="15195147" author="kwin" created="Tue, 15 Mar 2016 11:49:50 +0000"  >&lt;p&gt;The exceptions are different though. Maybe it would be good to hear some other opinions. I raised it on the mailing list in &lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg55064.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg55064.html&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12950456">SLING-5605</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2updz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5605] Wrong null annotations on ServletResolver interface</title>
                <link>https://issues.apache.org/jira/browse/SLING-5605</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently all methods being defined on &lt;tt&gt;org.apache.sling.api.servlets&lt;/tt&gt; are carrying the &lt;tt&gt;@Nonnull&lt;/tt&gt; annotation (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/api/src/main/java/org/apache/sling/api/servlets/ServletResolver.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/api/src/main/java/org/apache/sling/api/servlets/ServletResolver.java&lt;/a&gt;). According to the implementation this is wrong and all three may return &lt;tt&gt;null&lt;/tt&gt; in case there was no appropriate servlet found (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java&lt;/a&gt;).&lt;br/&gt;
The javadoc as well as the null annotations should be adjusted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12950456">SLING-5605</key>
            <summary>Wrong null annotations on ServletResolver interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2016 09:32:59 +0000</created>
                <updated>Sat, 9 Jul 2016 17:01:21 +0000</updated>
                            <resolved>Tue, 15 Mar 2016 13:26:48 +0000</resolved>
                                    <version>API 2.11.0</version>
                                    <fixVersion>API 2.12.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15195018" author="cziegeler" created="Tue, 15 Mar 2016 09:50:32 +0000"  >&lt;p&gt;Shouldn&apos;t there always be a default servlet? I think the implementation is actually wrong as it returns null if the default servlet can&apos;t be get. It should throw&lt;br/&gt;
The javadoc is correct, it states to throw the exception if the servlet can&apos;t be get&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15195023" author="kwin" created="Tue, 15 Mar 2016 09:55:54 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1735049&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1735049&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15195055" author="cziegeler" created="Tue, 15 Mar 2016 10:17:39 +0000"  >&lt;p&gt;Please revert, the javadoc &lt;b&gt;is&lt;/b&gt; correct. The implementation is not&lt;/p&gt;</comment>
                            <comment id="15195099" author="kwin" created="Tue, 15 Mar 2016 11:01:45 +0000"  >&lt;p&gt;Ok, but if we change the implementation a lot of clients may break, if they rely on the wrong behaviour (which was there right from the beginning). I would therefore suggest to just adjust the javadoc and leave the implementation as is. That is IMHO much less dangerous.&lt;/p&gt;</comment>
                            <comment id="15195101" author="kwin" created="Tue, 15 Mar 2016 11:05:27 +0000"  >&lt;p&gt;I just remember that aligning the impl with the documentation in the context of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2920&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-2920&lt;/a&gt; was regretted by everyone, because of the impact on all clients.&lt;/p&gt;</comment>
                            <comment id="15195104" author="cziegeler" created="Tue, 15 Mar 2016 11:06:46 +0000"  >&lt;p&gt;While I agree in general that such a change could break clients, I don&apos;t think this will really happen in reality. If I looked correctly, the only chance for returning null is if the default servlet can&apos;t be instantiated. That&apos;s very unlikely, and if that really happens it might be hinting at a larger problem. So in practice I think null is nearly never returned&lt;/p&gt;</comment>
                            <comment id="15195107" author="cziegeler" created="Tue, 15 Mar 2016 11:07:20 +0000"  >&lt;p&gt;Right, but &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2920&quot; title=&quot;Wrong handling of Sling Filter ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2920&quot;&gt;&lt;del&gt;SLING-2920&lt;/del&gt;&lt;/a&gt; is a totally different story&lt;/p&gt;</comment>
                            <comment id="15195111" author="kwin" created="Tue, 15 Mar 2016 11:12:12 +0000"  >&lt;p&gt;Ok, I reverted with &lt;a href=&quot;https://svn.apache.org/r1735055&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1735055&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15195113" author="kwin" created="Tue, 15 Mar 2016 11:15:42 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5607&quot; title=&quot;SlingServletResolver.resolveServlet should never return null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5607&quot;&gt;&lt;del&gt;SLING-5607&lt;/del&gt;&lt;/a&gt; to fix &lt;tt&gt;SlingServletResolver&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15195291" author="cziegeler" created="Tue, 15 Mar 2016 13:26:48 +0000"  >&lt;p&gt;As discussed we should rather change the api than the implementation.&lt;br/&gt;
A good service should rather return null and not throw a runtime exception for such cases. As the implementation is already doing this and existing clients handle the null as a return value, we can safely adjust the javadocs&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12950489">SLING-5607</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2up6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5602] The Discovery module does not work any more after a ResourceResolverFactory reactivation</title>
                <link>https://issues.apache.org/jira/browse/SLING-5602</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Discovery module does not work any more after the Resource Resolver Factory is reconfigured. To reproduce this start the latest launchpad (built from &lt;a href=&quot;https://github.com/apache/sling/blob/c441d5b672d1952a82a1c9fe1e6d81e86cec0018/launchpad/builder/src/main/provisioning/sling.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/c441d5b672d1952a82a1c9fe1e6d81e86cec0018/launchpad/builder/src/main/provisioning/sling.txt&lt;/a&gt;) and then:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;go to &lt;a href=&quot;http://localhost:8080/system/console/configMgr/org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/configMgr/org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;click on save (this will trigger the component&apos;s reactivation)&lt;/li&gt;
	&lt;li&gt;check the error log&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;14.03.2016 16:29:57.331 *ERROR* [discovery.connectors.common.runner.7fd8d00a-802a-4367-a384-64024e28dbbc.discoveryLiteCheck] org.apache.sling.discovery.oak.cluster.OakClusterViewService getLocalClusterView: repository exception: java.lang.Exception: Could not adapt resourceResolver to session: org.apache.sling.resourceresolver.impl.ResourceResolverImpl@499d9cc9
java.lang.Exception: Could not adapt resourceResolver to session: org.apache.sling.resourceresolver.impl.ResourceResolverImpl@499d9cc9
	at org.apache.sling.discovery.commons.providers.spi.base.DiscoveryLiteDescriptor.getDescriptorFrom(DiscoveryLiteDescriptor.java:41)
	at org.apache.sling.discovery.oak.cluster.OakClusterViewService.getLocalClusterView(OakClusterViewService.java:111)
	at org.apache.sling.discovery.base.commons.BaseDiscoveryService.getTopology(BaseDiscoveryService.java:77)
	at org.apache.sling.discovery.oak.OakDiscoveryService.checkForTopologyChange(OakDiscoveryService.java:657)
	at org.apache.sling.discovery.oak.pinger.OakViewChecker.discoveryLiteCheck(OakViewChecker.java:232)
	at org.apache.sling.discovery.oak.pinger.OakViewChecker.access$000(OakViewChecker.java:64)
	at org.apache.sling.discovery.oak.pinger.OakViewChecker$1.run(OakViewChecker.java:208)
	at org.apache.sling.discovery.base.commons.PeriodicBackgroundJob.safelyRun(PeriodicBackgroundJob.java:86)
	at org.apache.sling.discovery.base.commons.PeriodicBackgroundJob.run(PeriodicBackgroundJob.java:77)
	at java.lang.Thread.run(Thread.java:745)
14.03.2016 16:29:57.332 *INFO* [discovery.connectors.common.runner.7fd8d00a-802a-4367-a384-64024e28dbbc.discoveryLiteCheck] org.apache.sling.discovery.base.commons.BaseDiscoveryService getTopology: undefined cluster view: REPOSITORY_EXCEPTION] org.apache.sling.discovery.base.commons.UndefinedClusterViewException: Exception while processing descriptor: java.lang.Exception: Could not adapt resourceResolver to session: org.apache.sling.resourceresolver.impl.ResourceResolverImpl@499d9cc9
14.03.2016 16:29:57.332 *INFO* [discovery.connectors.common.runner.7fd8d00a-802a-4367-a384-64024e28dbbc.discoveryLiteCheck] org.apache.sling.discovery.commons.providers.base.ViewStateManagerImpl enqueueForAll: sending topologyEvent TopologyEvent [type=TOPOLOGY_CHANGING, oldView=DefaultTopologyView[current=false, num=1, instances=7fd8d00a-802a-4367-a384-64024e28dbbc[local=true,leader=true]], newView=null], to all (5) listeners
14.03.2016 16:29:57.332 *ERROR* [Discovery-AsyncEventSender] org.apache.sling.discovery.oak.TopologyWebConsolePlugin addDiscoveryLiteHistoryEntry: Exception: java.lang.Exception: Could not adapt resourceResolver to session: org.apache.sling.resourceresolver.impl.ResourceResolverImpl@149e86f0
java.lang.Exception: Could not adapt resourceResolver to session: org.apache.sling.resourceresolver.impl.ResourceResolverImpl@149e86f0
	at org.apache.sling.discovery.commons.providers.spi.base.DiscoveryLiteDescriptor.getDescriptorFrom(DiscoveryLiteDescriptor.java:41)
	at org.apache.sling.discovery.oak.TopologyWebConsolePlugin.updateDiscoveryLiteHistory(TopologyWebConsolePlugin.java:771)
	at org.apache.sling.discovery.oak.TopologyWebConsolePlugin.handleTopologyEvent(TopologyWebConsolePlugin.java:722)
	at org.apache.sling.discovery.commons.providers.base.AsyncTopologyEvent.trigger(AsyncTopologyEvent.java:53)
	at org.apache.sling.discovery.commons.providers.base.AsyncEventSender.run(AsyncEventSender.java:118)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Discovery module will not recover from this state. Furthermore it will also prevent the RRF to reactivate and basically makes the instance unusable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12949917">SLING-5602</key>
            <summary>The Discovery module does not work any more after a ResourceResolverFactory reactivation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Mar 2016 15:36:19 +0000</created>
                <updated>Thu, 26 Sep 2019 12:40:57 +0000</updated>
                            <resolved>Thu, 17 Mar 2016 17:43:18 +0000</resolved>
                                    <version>Resource Resolver 1.4.8</version>
                                    <fixVersion>Resource Resolver 1.4.10</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15193609" author="egli" created="Mon, 14 Mar 2016 16:45:04 +0000"  >&lt;p&gt;This sounds similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5561&quot; title=&quot;Resource Resolver Factory should be deactivated before provider is removed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5561&quot;&gt;&lt;del&gt;SLING-5561&lt;/del&gt;&lt;/a&gt; and/or &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5580&quot; title=&quot;Resource Resolver Factory is wrongly activated when zero or more than one required providers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5580&quot;&gt;&lt;del&gt;SLING-5580&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; wdyt?&lt;/p&gt;</comment>
                            <comment id="15195410" author="cziegeler" created="Tue, 15 Mar 2016 14:50:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; I think this is slightly different: it&apos;s rather a race condition (I hope). While the above issues solve the problem with synchronous activation / deactivation, the above two threads are async threads. While the system is reconfiguring the jcr resource provider might be unable and in that exact moment the thread runs. I haven&apos;t checked the code, but maybe setting a flag in deactivate and checking this in the threads solves the issue? Or the threads might just handle this fact.&lt;/p&gt;</comment>
                            <comment id="15198354" author="egli" created="Wed, 16 Mar 2016 22:48:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, I believe this is indeed a resourceresolver issue, and indeed a blocker one. Here&apos;s what I see is happening with adding log statements various resourceresolver classes and reproducing it (I can reproduce it every 2nd time - right after starting a launchpad it usually works fine, but the 2nd time it mostly hits this problem):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;in &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/resourceresolver/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverFactoryActivator.java#L485&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ResourceResolverFactoryActivator.activate:485&lt;/a&gt; the ResourceProviderTracker is activated - which itself starts a ServiceTracker&lt;/li&gt;
	&lt;li&gt;then some register/unregister osgi magic happens in the activate but also in concurrent threads I believe
	&lt;ul&gt;
		&lt;li&gt;these register/unregister generate calls to providerAdded/providerRemoved that then propagate via checkFactoryPreconditions into &lt;tt&gt;registerFactory&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;at some later time - unsynchronized with the background osgi thread that does service register/unregister (I saw one coming from the update of the config) - the &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/resourceresolver/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java#L50&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FactoryPreconditions.activate&lt;/a&gt; is called - which from then on allows the checkPreconditions method to return true
	&lt;ul&gt;
		&lt;li&gt;which at some - unsynchronized/unspecified - point allows to the checkFactoryPreconditions to succeed and call &lt;tt&gt;registerFactory&lt;/tt&gt;&lt;/li&gt;
		&lt;li&gt;&lt;b&gt;BUT&lt;/b&gt; for some reason I&apos;ve seen examples where &lt;b&gt;no&lt;/b&gt; new unregister/register of eg the OakClusterViewService is done (to update the ResourceResolverFactory) - and in other cases it was updated with an outdated one (ie the ResourceResolverFactoryActivator had another idea of Tracker/Storage than what it was binding to the OakClusterViewService).&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I haven&apos;t yet found the right root cause - however I&apos;ve seen this pattern that sometimes the FactoryPreconditions.checkPreconditions repeatedly returns null (as it is deactivated) and only at the end of the ResourceResolverFactoryActivator.activate succeeds - but those cases oftentimes then fail to correctly pass a valid ResourceResolverFactory to OakClusterViewService.&lt;/p&gt;

&lt;p&gt;.. and I still believe it has nothing to do with discovery but is rather somewhere either in resourceresolver &lt;b&gt;or&lt;/b&gt; in osgi/felix ..&lt;/p&gt;

&lt;p&gt;.. will help digging more tomorrow, but thought I pass on this info to you as early as possible&lt;/p&gt;</comment>
                            <comment id="15198365" author="egli" created="Wed, 16 Mar 2016 22:56:33 +0000"  >&lt;p&gt;wild guess, could it be related to that &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5198&quot; title=&quot;Service should not be available while being unregistered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5198&quot;&gt;&lt;del&gt;FELIX-5198&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="15199233" author="cziegeler" created="Thu, 17 Mar 2016 09:53:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; I don&apos;t think this is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5198&quot; title=&quot;Service should not be available while being unregistered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5198&quot;&gt;&lt;del&gt;FELIX-5198&lt;/del&gt;&lt;/a&gt;, I&apos;ll have a look at the code again. Maybe it&apos;s just that RRFActivator#activate needs to be finished before it can receive providerAdded/providerRemoved&lt;/p&gt;</comment>
                            <comment id="15199234" author="egli" created="Thu, 17 Mar 2016 09:56:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, to recap the somewhat confusing, nightly comment from above:&lt;/p&gt;

&lt;p&gt;I get the following two patterns reproducable every 2nd or 3rd time (case 1 more often though)&lt;/p&gt;

&lt;p&gt;case #1: &lt;b&gt;no&lt;/b&gt; (new) resourceresolverfactory bound (to OakClusterViewService, but I guess also others..)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a reconfig of the resourceresolverfactory is done (which does activate/deactivate on ResourceResolverFactoryActivator)&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ResourceResolverFactoryActivator.unregisterFactory&lt;/tt&gt; is called&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ResourceResolverFactoryActivator.registerFactory&lt;/tt&gt; is called&lt;/li&gt;
	&lt;li&gt;but no &lt;tt&gt;bindResourceResolverFactory&lt;/tt&gt; happens on the OakClusterViewService.. (and the old one becomes unusable as it doesn&apos;t have any handlers anymore)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;case #2: a new resourceresolverfactory is bound - but immediately afterwards the &lt;b&gt;old&lt;/b&gt; resourcresolverfactory is bound again&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a reconfig of the resourceresolverfactory is done (which does activate/deactivate on ResourceResolverFactoryActivator)&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ResourceResolverFactoryActivator.unregisterFactory&lt;/tt&gt; is called&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;OakClusterViewService.bindResourceResolverFactory&lt;/tt&gt; is called with the new resourceresolverfactory&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;OakClusterViewService.bindResourceResolverFactory&lt;/tt&gt; is called again with the &lt;b&gt;OLD&lt;/b&gt; resourceresolverfactory&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ResourceResolverFactoryActivator.registerFactory&lt;/tt&gt; is called&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;let&apos;s see if there&apos;s more cases..&lt;/p&gt;</comment>
                            <comment id="15199251" author="cziegeler" created="Thu, 17 Mar 2016 10:03:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; It seems due to the refactoring we lost the changes of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4363&quot; title=&quot;Unregistering a resource provider should also reregister the resource resolver factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4363&quot;&gt;&lt;del&gt;SLING-4363&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4361&quot; title=&quot;Improve handling of unregistering ResourceProviderFactories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4361&quot;&gt;&lt;del&gt;SLING-4361&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4378&quot; title=&quot;Make handling of unregistering a resource provider configurable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4378&quot;&gt;&lt;del&gt;SLING-4378&lt;/del&gt;&lt;/a&gt;, which could be partially the problem we&apos;re facing.&lt;br/&gt;
As it seems you can easily reproduce the problem, could you make remove starting the background thread at the end of activate and see if that makes a difference? The thread is not really used atm&lt;/p&gt;</comment>
                            <comment id="15199254" author="egli" created="Thu, 17 Mar 2016 10:09:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;remove starting the background thread at the end of activate &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ll try that.&lt;/p&gt;

&lt;p&gt;Meanwhile I had a case #3: old resourceresolverfactory is first rebound, then the new one, but the handlers are then removed from the new factory&apos;s tracker (hence it ends up unusable/empty)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a reconfig of the resourceresolverfactory is done (which does activate/deactivate on ResourceResolverFactoryActivator)&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ResourceResolverFactoryActivator.unregisterFactory&lt;/tt&gt; is called&lt;/li&gt;
	&lt;li&gt;(unbind, then) &lt;tt&gt;OakClusterViewService.bindResourceResolverFactory&lt;/tt&gt; is called with the &lt;b&gt;old&lt;/b&gt; resourceresolverfactory&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;OakClusterViewService.bindResourceResolverFactory&lt;/tt&gt; is called again with the &lt;b&gt;new&lt;/b&gt; resourceresolverfactory&lt;/li&gt;
	&lt;li&gt;then I see handlers getting removed from the &lt;b&gt;new&lt;/b&gt; factory&apos;s tracker -&amp;gt; which means the factory is useless&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ResourceResolverFactoryActivator.registerFactory&lt;/tt&gt; is called (but that has no special effect anymore)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15199268" author="egli" created="Thu, 17 Mar 2016 10:20:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; that didn&apos;t help unfortunately. What I do see though that it now more consistenly works the first time (I could hit this in 50% of the cases right after startup, and now not anymore) - but when you do a 2nd reconfig say 15sec afterwards it still hits this in 100% of the cases.. and I think the main pattern is that &lt;tt&gt;ResourceResolverFactoryActivator.registerFactory&lt;/tt&gt; is called without a subsequent new &lt;tt&gt;bind&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15199296" author="cziegeler" created="Thu, 17 Mar 2016 10:51:19 +0000"  >&lt;p&gt;&quot;then I see handlers getting removed from the new factory&apos;s tracker&quot; - I assume they have been added to the tracker before?&lt;/p&gt;</comment>
                            <comment id="15199301" author="egli" created="Thu, 17 Mar 2016 10:54:32 +0000"  >&lt;p&gt;yes&lt;/p&gt;</comment>
                            <comment id="15199337" author="cziegeler" created="Thu, 17 Mar 2016 11:21:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; I think as a first step we should restore the behaviour of the old resource resolver implementation: if a stateful resource provider is unregistered, the resource resolver factory is unregistered. And if a stateless resource provider is unregistered, it depends on the configuration whether the unregistration is done as well. Once we have this, we can come back to this issue.&lt;br/&gt;
Otherwise we might find a solution here, bring back the old behaviour and have a new / similar issue.&lt;br/&gt;
WDYT?&lt;/p&gt;</comment>
                            <comment id="15199354" author="egli" created="Thu, 17 Mar 2016 11:35:29 +0000"  >&lt;p&gt;sounds good&lt;/p&gt;

&lt;p&gt;what I saw just now as another potential lead is that on a successful reactivation there&apos;s &quot;more service re-registration going on&quot; than on a failed one.&lt;/p&gt;

&lt;p&gt;I&apos;ve added a separate felix.log that prints out debug statements of &apos;org.apache.felix&apos;. Here&apos;s a successful run:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;17.03.2016 12:23:26.042 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [440, 
[org.apache.felix.inventory.InventoryPrinter]] ServiceEvent UNREGISTERING
17.03.2016 12:23:26.043 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [441, 
[javax.servlet.Servlet]] ServiceEvent UNREGISTERING
17.03.2016 12:23:26.191 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.jaas Deregistering Login
ModuleFactory OsgiLoginModuleProvider{className=org.apache.sling.auth.form.impl.jaas.JaasHelper$1, ranking=1000, flag=LoginModuleControlFlag: sufficient, realmName=&apos;jackrabbit.oak&apos;}
17.03.2016 12:23:26.214 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [383, 
[org.apache.felix.inventory.InventoryPrinter]] ServiceEvent UNREGISTERING
17.03.2016 12:23:26.215 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [384, 
[javax.servlet.Servlet]] ServiceEvent UNREGISTERING
17.03.2016 12:23:26.244 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [516, 
[org.apache.felix.inventory.InventoryPrinter]] ServiceEvent REGISTERED
17.03.2016 12:23:26.245 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [517, [javax.servlet.Servlet]] ServiceEvent REGISTERED
17.03.2016 12:23:26.260 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [525, [org.apache.felix.inventory.InventoryPrinter]] ServiceEvent REGISTERED
17.03.2016 12:23:26.260 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [517, [javax.servlet.Servlet]] ServiceEvent UNREGISTERING
17.03.2016 12:23:26.262 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [526, [javax.servlet.Servlet]] ServiceEvent REGISTERED
17.03.2016 12:23:26.307 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [547, [org.apache.felix.inventory.InventoryPrinter]] ServiceEvent REGISTERED
17.03.2016 12:23:26.308 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [526, [javax.servlet.Servlet]] ServiceEvent UNREGISTERING
17.03.2016 12:23:26.309 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [548, [javax.servlet.Servlet]] ServiceEvent REGISTERED
17.03.2016 12:23:26.450 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.jaas Registering LoginModuleFactory LoginModule Support for FormAuthenticationHandler (org.apache.sling.auth.form.impl.jaas.FormLoginModule)
17.03.2016 12:23:26.454 *WARN* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.http.jetty Deprecation warning: Listener registered through Apache Felix whiteboard service: [org.apache.sling.api.auth.Authenticator, org.apache.sling.auth.core.AuthenticationSupport, javax.servlet.ServletRequestListener]. Please change your code to the OSGi Http Whiteboard Service.
17.03.2016 12:23:26.493 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [589, [org.apache.felix.inventory.InventoryPrinter]] ServiceEvent REGISTERED
17.03.2016 12:23:26.493 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [590, [javax.servlet.Servlet]] ServiceEvent REGISTERED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and here is a failure case:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;17.03.2016 12:23:56.506 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [516, [org.apache.felix.inventory.InventoryPrinter]] ServiceEvent UNREGISTERING
17.03.2016 12:23:56.550 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [674, [org.apache.felix.inventory.InventoryPrinter]] ServiceEvent REGISTERED
17.03.2016 12:23:56.550 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [548, [javax.servlet.Servlet]] ServiceEvent UNREGISTERING
17.03.2016 12:23:56.552 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl)] org.apache.felix.inventory Service [675, [javax.servlet.Servlet]] ServiceEvent REGISTERED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15199414" author="cziegeler" created="Thu, 17 Mar 2016 12:24:48 +0000"  >&lt;p&gt;I think this is more or less a different form of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4361&quot; title=&quot;Improve handling of unregistering ResourceProviderFactories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4361&quot;&gt;&lt;del&gt;SLING-4361&lt;/del&gt;&lt;/a&gt;,  I remember that before that change the system could result totally unusable due to the frequent registration/unregistration&lt;/p&gt;</comment>
                            <comment id="15199451" author="cziegeler" created="Thu, 17 Mar 2016 12:57:26 +0000"  >&lt;p&gt;I&apos;ve readded the old logic, except for the 2 second delay. The problem is still there (as suspected). I&apos;ll try adding the async restart with the 2 sec delay back in&lt;/p&gt;</comment>
                            <comment id="15199908" author="cziegeler" created="Thu, 17 Mar 2016 16:53:44 +0000"  >&lt;p&gt;I think I found the problem: the resource resolver factory was registered more than once due to concurrent registrations. In that case, the discovery service was still bound to the old registrations (which is totally legal), but that registration became useless as the new registration took over.&lt;br/&gt;
I think I fixed this problem now in trunk, usually I could reproduce this after a second reconfiguration. I did now several times 10 reconfigurations without any problem.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; Could you please verify?&lt;/p&gt;</comment>
                            <comment id="15199973" author="egli" created="Thu, 17 Mar 2016 17:18:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, looks good, after testing 10 times too on multiple startups/combinations I cannot reproduce the problem anymore&lt;/p&gt;</comment>
                            <comment id="15200018" author="cziegeler" created="Thu, 17 Mar 2016 17:43:18 +0000"  >&lt;p&gt;Ok, let&apos;s assume we fixed it&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12944875">SLING-5561</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12946159">SLING-5580</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ulvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5597] Sightly generated Java classes for component scripts might not run correctly if the Sightly engine is updated on the instance</title>
                <link>https://issues.apache.org/jira/browse/SLING-5597</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When upgrading the Sightly scripting engine on a Sling instance the engine will not recompile Java classes generated for component scripts unless the component scripts are modified or the Java classes are manually deleted from the &lt;tt&gt;org.apache.sling.commons.fsclassloader&lt;/tt&gt; bundle&apos;s data folder.&lt;/p&gt;

&lt;p&gt;This can lead to issues during those classes&apos; execution since the engine&apos;s internals might change from one version to the other.&lt;/p&gt;

&lt;p&gt;The Sightly scripting engine should generate its Java classes similar to the JSP scripting engine, by prefixing the classes&apos; packages with a Sightly specific package name (e.g. &lt;tt&gt;org.apache.sling.scripting.sightly&lt;/tt&gt;) and wipe this file-system backed folder upon startup if the classes were generated by a previous version of the engine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12948818">SLING-5597</key>
            <summary>Sightly generated Java classes for component scripts might not run correctly if the Sightly engine is updated on the instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Mar 2016 15:04:33 +0000</created>
                <updated>Wed, 15 Jun 2016 15:49:41 +0000</updated>
                            <resolved>Sun, 13 Mar 2016 17:41:56 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.4</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.18</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15189495" author="joerghoh" created="Thu, 10 Mar 2016 16:29:31 +0000"  >&lt;p&gt;Would be good if the wiping could be triggered manually as well.&lt;/p&gt;</comment>
                            <comment id="15192438" author="radu.cotescu" created="Sun, 13 Mar 2016 17:41:31 +0000"  >&lt;p&gt;Right, I agree, but I think this would be better handled by the File System Classloader Console Plugin.&lt;/p&gt;</comment>
                            <comment id="15192439" author="radu.cotescu" created="Sun, 13 Mar 2016 17:41:56 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1734715&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1734715&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15193044" author="radu.cotescu" created="Mon, 14 Mar 2016 10:17:57 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5601&quot; title=&quot;The File System Classloader Console Plugin should allow wiping the classloader&amp;#39;s cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5601&quot;&gt;&lt;del&gt;SLING-5601&lt;/del&gt;&lt;/a&gt; for this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12976815">SLING-5766</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uh13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5596] Expose JR protected-handlers in davex</title>
                <link>https://issues.apache.org/jira/browse/SLING-5596</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After the update of davex to JR 2.12.1 (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5572&quot; title=&quot;Update Jackrabbit to 2.12.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5572&quot;&gt;&lt;del&gt;SLING-5572&lt;/del&gt;&lt;/a&gt;), the&lt;br/&gt;
JcrRemotingServlet requires a new configuration.&lt;/p&gt;

&lt;p&gt;See the &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12792479/12792479_SLING-5596.patch&quot; title=&quot;SLING-5596.patch attached to SLING-5596&quot;&gt;attached patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; that should expose the settings as OSGi&lt;br/&gt;
property providing the same default as &lt;a href=&quot;https://github.com/apache/jackrabbit/blob/c01502860274f1938b6d94811a09528c342dc03a/jackrabbit-jcr-server/src/test/resources/protectedHandlersConfig.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JR config file&lt;/a&gt;.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12948724">SLING-5596</key>
            <summary>Expose JR protected-handlers in davex</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="edivad">Davide Giannella</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Mar 2016 09:51:47 +0000</created>
                <updated>Mon, 14 Mar 2016 12:56:01 +0000</updated>
                            <resolved>Fri, 11 Mar 2016 11:20:24 +0000</resolved>
                                    <version>JCR DavEx 1.3.2</version>
                                    <fixVersion>JCR Davex 1.3.4</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15188985" author="edivad" created="Thu, 10 Mar 2016 09:54:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; could you please review and apply the &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12792479/12792479_SLING-5596.patch&quot; title=&quot;SLING-5596.patch attached to SLING-5596&quot;&gt;patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; at your earliest convenience?&lt;/p&gt;</comment>
                            <comment id="15189212" author="egli" created="Thu, 10 Mar 2016 12:20:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;, could you please also review the applied patch? thx!&lt;/p&gt;</comment>
                            <comment id="15189261" author="reschke" created="Thu, 10 Mar 2016 13:10:50 +0000"  >&lt;p&gt;I have only limited knowledge about what&apos;s going on; but the patch looks plausible.&lt;/p&gt;

&lt;p&gt;(Nits: some whitespace-only lines, and for consistency with the existing code it might be good to have&lt;/p&gt;

&lt;p&gt;   final String protectedHandlers = OsgiUtil.toString(config.get(PROP_PROTECTED_HANDLERS), DEFAULT_PROTECTED_HANDLERS);&lt;/p&gt;

&lt;p&gt;and then use that for initProps.&lt;/p&gt;

&lt;p&gt;(this is really a nit; the main benefit that it would have made it slightly simpler to understand the change)&lt;/p&gt;</comment>
                            <comment id="15189269" author="egli" created="Thu, 10 Mar 2016 13:21:14 +0000"  >&lt;p&gt;thx!&lt;/p&gt;</comment>
                            <comment id="15189270" author="egli" created="Thu, 10 Mar 2016 13:21:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edivad&quot; class=&quot;user-hover&quot; rel=&quot;edivad&quot;&gt;edivad&lt;/a&gt;, would you have a suggestion as to how to test/verify this?&lt;/p&gt;</comment>
                            <comment id="15189396" author="edivad" created="Thu, 10 Mar 2016 14:58:56 +0000"  >&lt;p&gt;on my local if I spin up a sling instance using version 1.3.2 or davex I can see a WARN message in the logs like&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;*WARN* [FelixStartLevel] org.apache.jackrabbit.server.remoting.davex.ProtectedRemoveManager protectedhandlers-config is missing -&amp;gt; DIFF processing can fail for the Remove operation if the content toremove is protected!
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which comes from &lt;a href=&quot;https://github.com/apache/jackrabbit/blob/trunk/jackrabbit-jcr-server/src/main/java/org/apache/jackrabbit/server/remoting/davex/ProtectedRemoveManager.java#L46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;jackrabbit-jcr-server&lt;/a&gt; not having the config in place.&lt;/p&gt;</comment>
                            <comment id="15190816" author="egli" created="Fri, 11 Mar 2016 11:20:24 +0000"  >&lt;p&gt;Thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edivad&quot; class=&quot;user-hover&quot; rel=&quot;edivad&quot;&gt;edivad&lt;/a&gt;, I&apos;ve verified the WARN going away, modified the patch slightly as per &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; feedback and applied the change in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1734534&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1734534&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12945540">SLING-5572</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12792479" name="SLING-5596.patch" size="1802" author="edivad" created="Thu, 10 Mar 2016 09:52:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ugg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5595] Update to HttpClient 4.4.1</title>
                <link>https://issues.apache.org/jira/browse/SLING-5595</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;HttpClient 4.4 does not work ( properly? at all?) when using with OSGi, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1611&quot; title=&quot;NoClassDefFoundError: org/apache/http/ssl/SSLContexts in httpclient-osgi&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1611&quot;&gt;&lt;del&gt;HTTPCLIENT-1611&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;</description>
                <environment></environment>
        <key id="12948582">SLING-5595</key>
            <summary>Update to HttpClient 4.4.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Mar 2016 22:41:06 +0000</created>
                <updated>Wed, 9 Mar 2016 22:41:57 +0000</updated>
                            <resolved>Wed, 9 Mar 2016 22:41:57 +0000</resolved>
                                                    <fixVersion>Launchpad Builder 9</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15188234" author="rombert" created="Wed, 9 Mar 2016 22:41:57 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1734333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1734333&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ufkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5593] Regression in configuring new JCR Resource Provider</title>
                <link>https://issues.apache.org/jira/browse/SLING-5593</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5159&quot; title=&quot;Rewrite the JCR Resource Provider to use the new API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5159&quot;&gt;&lt;del&gt;SLING-5159&lt;/del&gt;&lt;/a&gt; is removing the JcrResourceProviderFactory component and turns the JcrResourceProvider into new component, moving moving the old factory configurations over to the JcrResourceProvider component. &lt;/p&gt;

&lt;p&gt;As existing configurations are bound to PID &quot;org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProviderFactory&lt;br/&gt;
&quot;, they will not be recognized by the new JcrResourceProvider component. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12947976">SLING-5593</key>
            <summary>Regression in configuring new JCR Resource Provider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="pfaffm@adobe.com">Marc Pfaff</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Mar 2016 11:25:33 +0000</created>
                <updated>Fri, 11 Mar 2016 14:13:00 +0000</updated>
                            <resolved>Tue, 8 Mar 2016 13:15:05 +0000</resolved>
                                    <version>JCR Resource 2.7.2</version>
                                    <fixVersion>JCR Resource 2.7.4</fixVersion>
                    <fixVersion>Resource Resolver 1.4.8</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15184815" author="pfaffm@adobe.com" created="Tue, 8 Mar 2016 11:42:44 +0000"  >&lt;p&gt;Attaching patch witch explicitly sets the name of the new JcrResourceProvider component to &quot;org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProviderFactory&lt;br/&gt;
&quot;&lt;/p&gt;</comment>
                            <comment id="15184896" author="cziegeler" created="Tue, 8 Mar 2016 13:15:05 +0000"  >&lt;p&gt;Thanks for your patch, Marc, it&apos;s applied&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12791983" name="SLING_5593.patch" size="1146" author="pfaffm@adobe.com" created="Tue, 8 Mar 2016 11:42:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ubtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5592] rapid IdMapService activation/deactivation leaves background thread in limbo</title>
                <link>https://issues.apache.org/jira/browse/SLING-5592</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;IdMapService.activate starts a background thread that reads oak&apos;s discovery-lite descriptor to find the own (&apos;&lt;tt&gt;me&lt;/tt&gt;&apos;) id assigned, to then add a corresponding mapping of &lt;tt&gt;slingId -&amp;gt; discovery-lite id&lt;/tt&gt; under &lt;tt&gt;/var/discovery/oak/idMap&lt;/tt&gt;. After that&apos;s done, the background thread stops - but until that&apos;s not done, the thread retries every second (since the discovery-lite descriptor might require some time to be available).&lt;/p&gt;

&lt;p&gt;Consider a scenario where the IdMapService is activated then immediately deactivated again. Although unlikely, this might happen. &lt;/p&gt;

&lt;p&gt;The IdMapService will then have the &apos;slingSettings&apos; removed (&lt;tt&gt;null&lt;/tt&gt;) thus leading to a cascade of errors every second:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;07.03.2016 14:14:23.069 *ERROR* [IdMapService-initializer] org.apache.sling.discovery.commons.providers.spi.base.IdMapService initializer: could not init due to java.lang.NullPointerException
java.lang.NullPointerException: null
        at org.apache.sling.discovery.commons.providers.spi.base.IdMapService.init(IdMapService.java:187)
        at org.apache.sling.discovery.commons.providers.spi.base.IdMapService.access$000(IdMapService.java:59)
        at org.apache.sling.discovery.commons.providers.spi.base.IdMapService$1.check(IdMapService.java:108)
        at org.apache.sling.discovery.commons.providers.spi.base.AbstractServiceWithBackgroundCheck$BackgroundCheckRunnable.run(AbstractServiceWithBackgroundCheck.java:77)
        at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12947954">SLING-5592</key>
            <summary>rapid IdMapService activation/deactivation leaves background thread in limbo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Mar 2016 09:45:35 +0000</created>
                <updated>Tue, 12 Apr 2016 14:50:10 +0000</updated>
                            <resolved>Tue, 8 Mar 2016 10:22:13 +0000</resolved>
                                    <version>Discovery Commons 1.0.0</version>
                                    <fixVersion>Discovery Commons 1.0.12</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15184743" author="egli" created="Tue, 8 Mar 2016 10:16:27 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1734045&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1734045&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ubp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5591] Race condition in installer: cached artifacts might be made unavailable</title>
                <link>https://issues.apache.org/jira/browse/SLING-5591</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a provider is reporting new artifacts and these artifacts need to be copied into the local storage (like JCR artifacts), there is a slight change that while the OSGi installer is processing the new artifacts, the same provider is updating the artifacts which then results in a null stored in the internal data objects for the file, although it is still available. The artifact can&apos;t be installed anymore as the file is not available.&lt;br/&gt;
This is due to the logic in FileDataStore#createNewDataFile which returns null if the file is already cached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12947743">SLING-5591</key>
            <summary>Race condition in installer: cached artifacts might be made unavailable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Mar 2016 18:10:34 +0000</created>
                <updated>Fri, 11 Mar 2016 14:25:00 +0000</updated>
                            <resolved>Tue, 8 Mar 2016 15:21:56 +0000</resolved>
                                                    <fixVersion>Installer Core 3.6.8</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15185104" author="bdelacretaz" created="Tue, 8 Mar 2016 15:40:32 +0000"  >&lt;p&gt;If someone else is curious how this was fixed it&apos;s &lt;a href=&quot;http://svn.apache.org/r1734096&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1734096&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uae7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5582] DAM Updates fail due to race conditions with Workflows in AEM</title>
                <link>https://issues.apache.org/jira/browse/SLING-5582</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In my IntelliJ plugin an update of a DAM entry I sometimes run into an exception while updating rendition files. This seems to be caused by the DAM Workflows inside AEM which is triggered as soon as the original file is updated. This is probably due to the fact that the &quot;impl-vlt&quot; code is committing a change after each and every command and so the workflow is triggered right away causing problems with the updates of the rendition files.&lt;/p&gt;

&lt;p&gt;I would think this is not just an issue of DAM assets but in general an issue with any node that can trigger a workflow.&lt;/p&gt;

&lt;p&gt;From my point of view the plugin should be able to control the commits so that a logical group like a DAM asset can be update in single step.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12946566">SLING-5582</key>
            <summary>DAM Updates fail due to race conditions with Workflows in AEM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Mar 2016 14:55:48 +0000</created>
                <updated>Fri, 11 Apr 2025 14:30:42 +0000</updated>
                                            <version>Sling Eclipse IDE 1.0.10</version>
                                    <fixVersion>Sling Eclipse IDE 1.3.2</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15177975" author="schaefa" created="Thu, 3 Mar 2016 15:43:47 +0000"  >&lt;p&gt;This is the stacktrace of the exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.apache.sling.ide.io.ConnectorException: /content/dam/aembase/asset.jpg/jcr:content/renditions/cq5dam.web.1280.1280.jpeg
	at com.headwire.aem.tooling.intellij.communication.AbstractDeploymentManager.execute(AbstractDeploymentManager.java:347)
	at com.headwire.aem.tooling.intellij.communication.AbstractDeploymentManager.publishModule(AbstractDeploymentManager.java:137)
	... 19 more
Caused by: org.apache.sling.ide.transport.RepositoryException: javax.jcr.ItemExistsException: Cannot add child node &apos;cq5dam.web.1280.1280.jpeg&apos; to /content/dam/aembase/asset.jpg/jcr:content/renditions: colliding with same-named existing node.
	at org.apache.sling.ide.impl.vlt.JcrResult.failure(JcrResult.java:33)
	at org.apache.sling.ide.impl.vlt.JcrCommand.execute(JcrCommand.java:80)
	at org.apache.sling.ide.transport.TracingCommand.execute(TracingCommand.java:45)
	at com.headwire.aem.tooling.intellij.communication.AbstractDeploymentManager.execute(AbstractDeploymentManager.java:336)
	... 20 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is caused by the session.save() method call in JcrCommand:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Result&amp;lt;T&amp;gt; execute() {

        Session session = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            session = repository.login(credentials);

            T result = execute0(session);

&lt;span class=&quot;code-comment&quot;&gt;//            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//                &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(100);
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(InterruptedException e) {
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//            }
&lt;/span&gt;            session.save();

            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; JcrResult.success(result);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (LoginException e) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; JcrResult.failure(e);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (RepositoryException e) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; JcrResult.failure(e);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; JcrResult.failure(e);
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (session != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                session.logout();
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In my environment adding the delay (commented out above) does solve it most of the time but that&apos;s still a bandaid. If the session is provided to the JcrCommand and the save() is called when the plugin has done a logical group (all files inside a DAM asset etc) the problem should not arise anymore.&lt;/p&gt;</comment>
                            <comment id="15177996" author="rombert" created="Thu, 3 Mar 2016 15:53:12 +0000"  >&lt;p&gt;Thanks for the report. A couple of comments&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I see from the stacktrace that this is not the default Eclipse plugin, but running in IntelliJ. Does this happen with Eclipse as well?&lt;/li&gt;
	&lt;li&gt;I looked at the code in the &lt;tt&gt;AddOrUpdateNodeCommand&lt;/tt&gt; and there&apos;s only a single &lt;tt&gt;Session#save&lt;/tt&gt; call, when the node primary type is changed . Can you confirm that in your scenario &lt;tt&gt;Session#save&lt;/tt&gt; is invoked in addition to the final one from &lt;tt&gt;JcrCommand#execute&lt;/tt&gt;?&lt;/li&gt;
	&lt;li&gt;I would still need a unit test &apos;proving&apos; this problem as I can&apos;t reproduce it and the content sync code is complicated enough for a test to be the only guard against regressions&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15178359" author="schaefa" created="Thu, 3 Mar 2016 18:50:11 +0000"  >&lt;p&gt;I cannot tell if it is working with Eclipse as I have no idea on how to make it work. I cannot upgrade to 1.0.10 and so I am stuck with 1.0.4 which is probably outdated and the project I am using to test is not accepted (missing jcr_root folder).&lt;/p&gt;

&lt;p&gt;The session.save() call is made in the JcrCommand.execute() method at the end (see my code snippet above).&lt;/p&gt;

&lt;p&gt;I don&apos;t know how to create a unit test as I don&apos;t understand what actually is going wrong (does the workflow delete old renditions and recreate them?). My guess is after that code inside the AddOrUpdateNodeCommand:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void update(ResourceProxy resource, Session session) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException, IOException {

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = resource.getPath();
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; nodeExists = session.nodeExists(path);

        Node node;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(nodeExists) {
            node = session.getNode(path);
            getLogger().trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;Found existing node at {0} with primaryType {1}&quot;&lt;/span&gt;, path, node.getPrimaryNodeType().getName());
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            node = createNode(resource, session);
            getLogger().trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;Created node at {0} with primaryType {1}&quot;&lt;/span&gt;, path, node.getPrimaryNodeType().getName());
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the workflow is deleting the old node and creates a new one and commits that before our command is through that is why we have an Item Already Exists exception. &lt;/p&gt;

&lt;p&gt;You might be able to force the failure on your end by adding a delay (Thread.sleep()) after that.&lt;/p&gt;</comment>
                            <comment id="15178670" author="schaefa" created="Thu, 3 Mar 2016 21:44:16 +0000"  >&lt;p&gt;I finally you get Eclipse going and I think the issue is that Eclipse works on changes. The IntelliJ plugin does something similar but it also has a feature to force the push to the server and there is where I see the issue cropping up. &lt;/p&gt;</comment>
                            <comment id="15184918" author="rombert" created="Tue, 8 Mar 2016 13:38:47 +0000"  >&lt;p&gt;Ah, I see why this can be problematic and now I understand your suggestion.&lt;/p&gt;

&lt;p&gt;Can you replicate the error in Eclipse if you publish a whole sub-tree? See &lt;a href=&quot;https://sling.apache.org/documentation/development/ide-tooling.html#manual-content-sync&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/ide-tooling.html#manual-content-sync&lt;/a&gt; for instructions.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u3of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5581] Transport doesn&apos;t throw an exception if a 400+ status is returned</title>
                <link>https://issues.apache.org/jira/browse/SLING-5581</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;SimpleHttpDistributionTransport&lt;/tt&gt;&#160;HTTP call uses&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Response response = executor.execute(req);
response.discardContent();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but the second line doesn&apos;t throw an Exception if e.g. the HTTP status is 500, while it used to do it when the code was:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Response response = executor.execute(req);
response.returnContent();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Therefore this may result in lost packages if an error occurs on the receiving side.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12946547">SLING-5581</key>
            <summary>Transport doesn&apos;t throw an exception if a 400+ status is returned</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Mar 2016 13:38:50 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:29 +0000</updated>
                            <resolved>Thu, 3 Mar 2016 14:13:52 +0000</resolved>
                                    <version>Content Distribution Core 0.1.12</version>
                                    <fixVersion>Content Distribution Core 0.1.16</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15177852" author="teofili" created="Thu, 3 Mar 2016 14:13:52 +0000"  >&lt;p&gt;fixed in r1733468&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u3k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5580] Resource Resolver Factory is wrongly activated when zero or more than one required providers</title>
                <link>https://issues.apache.org/jira/browse/SLING-5580</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When there is no required provider, the resource provider factory is not activated&lt;br/&gt;
Similar when there are two (or more) required providers, the factory is activated as soon as the first provider is available&lt;br/&gt;
The FactoryPreconditions class is several bugs&lt;/p&gt;</description>
                <environment></environment>
        <key id="12946159">SLING-5580</key>
            <summary>Resource Resolver Factory is wrongly activated when zero or more than one required providers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2016 14:11:56 +0000</created>
                <updated>Mon, 14 Mar 2016 16:45:03 +0000</updated>
                            <resolved>Wed, 2 Mar 2016 14:19:22 +0000</resolved>
                                    <version>Resource Resolver 1.4.4</version>
                                    <fixVersion>Resource Resolver 1.4.8</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15175649" author="cziegeler" created="Wed, 2 Mar 2016 14:19:22 +0000"  >&lt;p&gt;Correct the logic and added a set of unit tests verifying this (they fail with the old code)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12949917">SLING-5602</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u15z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5579] setActive is not set to true during activation of CommonResourceResolverFactoryImpl</title>
                <link>https://issues.apache.org/jira/browse/SLING-5579</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;CommonResourceResolverFactoryImpl holds a bolean isActive which should reflect if the resource resolver is active or not, it is set to true only during the declaration of the field and then to false in the deactivate method of the component. It is never set to true again.&lt;/p&gt;

&lt;p&gt;Instead, isActive should be set to true in the activate method of the component.&lt;/p&gt;

&lt;p&gt;org.apache.sling.api.resource.LoginException: ResourceResolverFactory is deactivated.&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getResourceResolver(CommonResourceResolverFactoryImpl.java:146)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryImpl.getResourceResolver(ResourceResolverFactoryImpl.java:99)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12946145">SLING-5579</key>
            <summary>setActive is not set to true during activation of CommonResourceResolverFactoryImpl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="santiagozky">Santiago Garc&#237;a Pimentel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2016 13:19:16 +0000</created>
                <updated>Tue, 19 Apr 2016 17:05:21 +0000</updated>
                            <resolved>Tue, 19 Apr 2016 17:05:21 +0000</resolved>
                                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15175599" author="santiagozky" created="Wed, 2 Mar 2016 13:38:37 +0000"  >&lt;p&gt;a pull request: &lt;a href=&quot;https://github.com/apache/sling/pull/128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/128&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15175652" author="cziegeler" created="Wed, 2 Mar 2016 14:22:40 +0000"  >&lt;p&gt;I think the logic is correct as an instance of the CommonResourceResolverFactoryImpl is not reused. If it gets deactivated and activated again, a new instance is created. At least this should be the case.&lt;/p&gt;</comment>
                            <comment id="15175669" author="santiagozky" created="Wed, 2 Mar 2016 14:34:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; could be. We got hit by the exception that I put in the description and is the only explanation I could think of. The RR Factory was active in the OSGi console, but setActive was false. Unfortunately the bug is not deterministic. I could not reproduce it after restarting the instance.&lt;br/&gt;
I&apos;ll try to investigate further and comment here if I find something else.&lt;/p&gt;</comment>
                            <comment id="15175826" author="kwin" created="Wed, 2 Mar 2016 15:52:43 +0000"  >&lt;p&gt;Just for the reference: OSGi Compendium, Release 6, $112.5.6&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Component instances must never be reused. Each time a component configuration is activated, SCR&lt;br/&gt;
must create a new component instance to use with the activated component configuration.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u12v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5578] Json rendering is using recursion for processing flat trees and causes stack overflows</title>
                <link>https://issues.apache.org/jira/browse/SLING-5578</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;ResourceTraversor.collectChildren&lt;/tt&gt; is unnecessarily using recursion and causes stack overflows for flat trees.&lt;/p&gt;

&lt;p&gt;Example: for a node with 10k direct children it adds 10k calls on the stack. This should be implemented in an iterative way or at most it should do recursion only for the tree depth.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/7c4a53755aed1211c9af313a3973cd2543a7bbe0/bundles/commons/json/src/main/java/org/apache/sling/commons/json/sling/ResourceTraversor.java#L84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/7c4a53755aed1211c9af313a3973cd2543a7bbe0/bundles/commons/json/src/main/java/org/apache/sling/commons/json/sling/ResourceTraversor.java#L84&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12946142">SLING-5578</key>
            <summary>Json rendering is using recursion for processing flat trees and causes stack overflows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2016 13:08:44 +0000</created>
                <updated>Fri, 27 May 2016 11:45:28 +0000</updated>
                            <resolved>Wed, 18 May 2016 10:38:19 +0000</resolved>
                                    <version>Commons JSON 2.0.16</version>
                                    <fixVersion>Commons JSON 2.0.18</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15175584" author="mpetria" created="Wed, 2 Mar 2016 13:28:10 +0000"  >&lt;p&gt;This can be fixed by doing processing only at first level of recursion. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; can you please have a look?&lt;/p&gt;</comment>
                            <comment id="15175598" author="bdelacretaz" created="Wed, 2 Mar 2016 13:37:20 +0000"  >&lt;p&gt;Building the commons/json module with &lt;tt&gt;mvn clean install -P jacoco-report&lt;/tt&gt; and looking at &lt;tt&gt;target/site/jacoco-merged/index.html&lt;/tt&gt; shows exactly zero test coverage for that &lt;tt&gt;ResourceTraversor&lt;/tt&gt; class. IMO it needs good test coverage before making any changes to it.&lt;/p&gt;</comment>
                            <comment id="15175683" author="mpetria" created="Wed, 2 Mar 2016 14:40:12 +0000"  >&lt;p&gt;I attached a test for the current problem: a node with 20K children causing StackOverflow. I will try to write more tests for ResourceTraversor to guard againt regressions.&lt;/p&gt;</comment>
                            <comment id="15175695" author="bdelacretaz" created="Wed, 2 Mar 2016 14:43:40 +0000"  >&lt;p&gt;Ok thanks, IMO we should have good test coverage before your changes, and then your changes including related changes to the tests.&lt;/p&gt;</comment>
                            <comment id="15175713" author="mpetria" created="Wed, 2 Mar 2016 14:47:09 +0000"  >&lt;p&gt;The change is somehow trivial (just three lines of code basically), but I agree there should be tests for this class.&lt;/p&gt;</comment>
                            <comment id="15175721" author="bdelacretaz" created="Wed, 2 Mar 2016 14:51:01 +0000"  >&lt;p&gt;We should not have accepted that class without any tests earlier. Now it&apos;s out there and it&apos;s important to control any changes in its behavior, this is fairly core stuff. Sorry that it falls on you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15175779" author="mpetria" created="Wed, 2 Mar 2016 15:26:00 +0000"  >&lt;p&gt;No problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, just as an historical reference this issue is in Sling probably for a long time. The oldest reference that I could find is from 2010.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/4670a41a230adc0faef1b23ca519022d94045fe4/bundles/servlets/get/src/main/java/org/apache/sling/servlets/get/impl/helpers/ResourceTraversor.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/4670a41a230adc0faef1b23ca519022d94045fe4/bundles/servlets/get/src/main/java/org/apache/sling/servlets/get/impl/helpers/ResourceTraversor.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15288760" author="bdelacretaz" created="Wed, 18 May 2016 10:38:19 +0000"  >&lt;p&gt;Thanks for your patch, I have improved the ResourceTraversor tests &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; to reach 100% coverage and applied it. &lt;/p&gt;

&lt;p&gt;With this the tests pass with 100&apos;000 resources in a flat tree, they did fail with a stack overflow without your patch.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/commons/json/src/test/java/org/apache/sling/commons/json/sling/ResourceTraversorTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/commons/json/src/test/java/org/apache/sling/commons/json/sling/ResourceTraversorTest.java&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12790924" name="SLING-5578.diff" size="797" author="mpetria" created="Wed, 2 Mar 2016 13:28:10 +0000"/>
                            <attachment id="12790938" name="SLING-5578.test.diff" size="42193" author="mpetria" created="Wed, 2 Mar 2016 14:40:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u127:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5573] The File System Classloader Console Plugin should wrap long lines of code</title>
                <link>https://issues.apache.org/jira/browse/SLING-5573</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The File System Classloader Console Plugin should wrap long lines of code such that generated code is still easy to follow from within the browser window.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12945654">SLING-5573</key>
            <summary>The File System Classloader Console Plugin should wrap long lines of code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Feb 2016 22:53:57 +0000</created>
                <updated>Sat, 24 Dec 2016 12:26:50 +0000</updated>
                            <resolved>Mon, 29 Feb 2016 23:04:35 +0000</resolved>
                                    <version>File System ClassLoader 1.0.2</version>
                                    <fixVersion>File System ClassLoader 1.0.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15172812" author="radu.cotescu" created="Mon, 29 Feb 2016 23:04:37 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1732966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1732966&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ty1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5571] Integration tests using SlingRepositoryInitializer fail</title>
                <link>https://issues.apache.org/jira/browse/SLING-5571</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Changes to the jcr.api 2.3.1-SNAPSHOT have modified the import of that bundle and it does not start, causing a number of tests to fail. Trying to fix that requires updating many bundles, so as a first step I&apos;ll revert to jcr.api 2.3.0 and disable the corresponding tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12945496">SLING-5571</key>
            <summary>Integration tests using SlingRepositoryInitializer fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Feb 2016 15:27:31 +0000</created>
                <updated>Wed, 9 Nov 2016 15:11:41 +0000</updated>
                            <resolved>Mon, 4 Apr 2016 11:24:30 +0000</resolved>
                                    <version>JCR Oak Server 1.0.0</version>
                                    <fixVersion>JCR Oak Server 1.1.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15171994" author="bdelacretaz" created="Mon, 29 Feb 2016 15:32:02 +0000"  >&lt;p&gt;Temporarily reverted to jcr.api 2.3.0 in revision 1732909, all launchpad/testing tests pass again.&lt;/p&gt;</comment>
                            <comment id="15219903" author="bdelacretaz" created="Thu, 31 Mar 2016 14:06:22 +0000"  >&lt;p&gt;For the above I had to disable all tests that depend on the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5456&quot; title=&quot;Implement SlingRepositoryInitializer plug-ins to setup the repository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5456&quot;&gt;&lt;del&gt;SLING-5456&lt;/del&gt;&lt;/a&gt; &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; feature in revision 1732909&lt;/p&gt;

&lt;p&gt;I tried to reactivate those today but the oak.server bundle doesn&apos;t start if using the required jcr.base and jcr.api snapshots, due to the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5537&quot; title=&quot;Remove deprecated features from JCR Base&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5537&quot;&gt;&lt;del&gt;SLING-5537&lt;/del&gt;&lt;/a&gt; changes to &lt;tt&gt;AbstractSlingRepositoryManager&lt;/tt&gt; in jcr.base.&lt;/p&gt;

&lt;p&gt;For now I have asked on our dev list how to handle those changes.&lt;/p&gt;</comment>
                            <comment id="15223775" author="olli" created="Mon, 4 Apr 2016 07:38:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, I have removed the now obsolete &lt;tt&gt;namespaceMapperRefs&lt;/tt&gt; from &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15223777" author="bdelacretaz" created="Mon, 4 Apr 2016 07:42:31 +0000"  >&lt;p&gt;Thanks! I overlooked those in my cleanup, your revisions 1737629 and 1737630 look good to me.&lt;/p&gt;</comment>
                            <comment id="15223965" author="bdelacretaz" created="Mon, 4 Apr 2016 11:24:30 +0000"  >&lt;p&gt;Fixed by adapting the oak-server module in revision 1737405 and reactivating the tests in revision 1737406&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12945477">SLING-5570</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12934126">SLING-5456</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2tx3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5570] Teleported tests fail with &quot;Can&apos;t assign requested address&quot; if test services are missing</title>
                <link>https://issues.apache.org/jira/browse/SLING-5570</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Today we noticed integration tests failing with &quot;Can&apos;t assign request address&quot;, for example:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Start a Sling instance from launchpad/builder&lt;/li&gt;
	&lt;li&gt;Add and start the testing/junit/core and launchpad/test-services bundles&lt;/li&gt;
	&lt;li&gt;From the launchpad/integration-tests run the &lt;tt&gt;LdapFilterTeleporterTest&lt;/tt&gt; using &lt;tt&gt;mvn clean test -Dhttp.port=8080 -Dtest=LdapFilterTeleporterTest&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The test fails, at least most of the time, with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;testUppercase(org.apache.sling.launchpad.webapp.integrationtest.teleporter.LdapFilterTeleporterTest)  Time elapsed: 0.012 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.net.NoRouteToHostException: Can&apos;t assign requested address
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:382)
	at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:241)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:228)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:431)
	at java.net.Socket.connect(Socket.java:527)
	at java.net.Socket.connect(Socket.java:476)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:424)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:538)
	at sun.net.www.http.HttpClient.&amp;lt;init&amp;gt;(HttpClient.java:214)
	at sun.net.www.http.HttpClient.New(HttpClient.java:300)
	at sun.net.www.http.HttpClient.New(HttpClient.java:319)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:987)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:923)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:841)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1031)
	at org.apache.sling.testing.teleporter.client.MultipartAdapter.&amp;lt;init&amp;gt;(MultipartAdapter.java:42)
	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.installBundle(TeleporterHttpClient.java:70)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12945477">SLING-5570</key>
            <summary>Teleported tests fail with &quot;Can&apos;t assign requested address&quot; if test services are missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Feb 2016 14:09:39 +0000</created>
                <updated>Thu, 23 Feb 2017 10:49:01 +0000</updated>
                            <resolved>Mon, 29 Feb 2016 16:06:54 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15171971" author="bdelacretaz" created="Mon, 29 Feb 2016 15:18:16 +0000"  >&lt;p&gt;The error message is a false alarm, this can be reproduced by stopping the &lt;tt&gt;org.apache.sling.launchpad.test-services&lt;/tt&gt; bundle on the Sling instance under test - for some reason the client-side teleporter gets messed up, maybe it keeps connections open while retrying to connect.&lt;/p&gt;</comment>
                            <comment id="15172062" author="bdelacretaz" created="Mon, 29 Feb 2016 16:06:54 +0000"  >&lt;p&gt;The ClientSideTeleporter was making GET requests in a fast loop when waiting for the tests to appear server-side, probably preventing sockets from being freed quickly enough. I have added a simple exponential backoff mechanism to these retries in &lt;a href=&quot;http://svn.apache.org/r1732912&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1732912&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;And activated that snapshot teleporter module for our integration tests, in &lt;a href=&quot;http://svn.apache.org/r1732913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1732913&lt;/a&gt; - that should fix this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12945496">SLING-5571</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13045579">SLING-6553</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2twz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5568] Sightly filters don&apos;t remove their specific options from the expression during processing</title>
                <link>https://issues.apache.org/jira/browse/SLING-5568</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Most of the Sightly expression filters don&apos;t remove their specific options from the expression during the processing chain. This leads to some expression options being processed multiple times. While this has not caused any problems until now it can lead to a nondeterministic behaviour for expression evaluation.&lt;/p&gt;

&lt;p&gt;The following filters are affected:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling.scripting.sightly.impl.filter.I18nFilter&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling.scripting.sightly.impl.filter.FormatFilter&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling.scripting.sightly.impl.filter.JoinFilter&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12945297">SLING-5568</key>
            <summary>Sightly filters don&apos;t remove their specific options from the expression during processing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Feb 2016 19:44:27 +0000</created>
                <updated>Wed, 14 Mar 2018 12:56:41 +0000</updated>
                            <resolved>Mon, 29 Feb 2016 09:39:37 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.0</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.16</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15171646" author="radu.cotescu" created="Mon, 29 Feb 2016 09:39:37 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1732839&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1732839&lt;/a&gt;. Added tests in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1732892&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1732892&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12904505">SLING-5138</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="12994515">SLING-5944</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12999709">SLING-6008</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13073402">SLING-6866</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2tvv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5561] Resource Resolver Factory should be deactivated before provider is removed</title>
                <link>https://issues.apache.org/jira/browse/SLING-5561</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a required resource provider is unregistered, this provider is first removed from the set of providers, and then the resource resolver factory is unregistered. During this process of unregistering, components might still try to use the resource resolver factory (which is valid) and according to the OSGi service model, the service should be still usable.&lt;br/&gt;
However, as the required provider has already been removed, the service is not usable anymore - which in turn might result in strange problems in services.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12944875">SLING-5561</key>
            <summary>Resource Resolver Factory should be deactivated before provider is removed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Feb 2016 12:18:09 +0000</created>
                <updated>Mon, 14 Mar 2016 16:45:03 +0000</updated>
                            <resolved>Wed, 2 Mar 2016 15:54:25 +0000</resolved>
                                    <version>Resource Resolver 1.2.0</version>
                    <version>Resource Resolver 1.2.2</version>
                    <version>Resource Resolver 1.2.4</version>
                    <version>Resource Resolver 1.2.6</version>
                    <version>Resource Resolver 1.4.0</version>
                    <version>Resource Resolver 1.4.2</version>
                    <version>Resource Resolver 1.4.4</version>
                                    <fixVersion>Resource Resolver 1.4.8</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15175712" author="cziegeler" created="Wed, 2 Mar 2016 14:47:02 +0000"  >&lt;p&gt;I&apos;ve committed a first potential solution:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if a provider is unregistered, the pid is passed into the check conditions object and that handler is ignored for checking, therefore if it is requird, the factory will be unregistered. The provider is removed from the resource tree after this&lt;/li&gt;
	&lt;li&gt;if a provider is registered, the factory is checked to be registered after that&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12949917">SLING-5602</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2tt93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5557] Intermediate folder creation cannot deal with redirects</title>
                <link>https://issues.apache.org/jira/browse/SLING-5557</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3540&quot; title=&quot;maven-sling-plugin with usePut = true does not create intermediary folders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3540&quot;&gt;&lt;del&gt;SLING-3540&lt;/del&gt;&lt;/a&gt; does not seem to work with bundle &lt;tt&gt;org.apache.sling.jcr.webdav&lt;/tt&gt; in version &lt;tt&gt;2.3.0&lt;/tt&gt;. I receive the error&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Installation on http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:4502/crx/repository/crx.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/apps/&amp;lt;any-folder&amp;gt;/install failed, cause: Failed creating intermediate path at http://localhost:4502/crx/repository. Reason: Moved Temporarily&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The plugin is configured like this &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;plugin&amp;gt;
                    &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;
                    &amp;lt;artifactId&amp;gt;maven-sling-plugin&amp;lt;/artifactId&amp;gt;
                    &amp;lt;version&amp;gt;2.1.6&amp;lt;/version&amp;gt;
                    &amp;lt;configuration&amp;gt;
                        &amp;lt;slingUrl&amp;gt;${cq.server}/crx/repository/${some.workspace}${&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.root}/install&amp;lt;/slingUrl&amp;gt;
                        &amp;lt;usePut&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/usePut&amp;gt;
                        &amp;lt;user&amp;gt;&amp;lt;some user&amp;gt;&amp;lt;/user&amp;gt;
                        &amp;lt;password&amp;gt;&amp;lt;some password&amp;gt;&amp;lt;/password&amp;gt;
                        &amp;lt;failOnError&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/failOnError&amp;gt;
                    &amp;lt;/configuration&amp;gt;
&amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12942914">SLING-5557</key>
            <summary>Intermediate folder creation cannot deal with redirects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Feb 2016 10:32:08 +0000</created>
                <updated>Thu, 25 Feb 2016 07:52:35 +0000</updated>
                            <resolved>Thu, 25 Feb 2016 07:52:35 +0000</resolved>
                                    <version>Maven Sling Plugin 2.1.6</version>
                                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15162799" author="kwin" created="Wed, 24 Feb 2016 10:43:22 +0000"  >&lt;p&gt;The reason for that is that the GET request towards &lt;br/&gt;
&lt;tt&gt;&lt;a href=&quot;http://localhost:4502/crx/repository&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/crx/repository&lt;/a&gt;&lt;/tt&gt; returns a 302 with a location header pointing to the default workspace (&lt;tt&gt;&lt;a href=&quot;http://localhost:4502/crx/repository/crx.default&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/crx/repository/crx.default&lt;/a&gt;&lt;/tt&gt;). The according code is in &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/jcr/webdav/src/main/java/org/apache/sling/jcr/webdav/impl/servlets/SlingSimpleWebDavServlet.java#L100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/jcr/webdav/src/main/java/org/apache/sling/jcr/webdav/impl/servlets/SlingSimpleWebDavServlet.java#L100&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15162806" author="kwin" created="Wed, 24 Feb 2016 10:54:03 +0000"  >&lt;p&gt;IMHO the logic in &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/tooling/maven/maven-sling-plugin/src/main/java/org/apache/sling/maven/bundlesupport/AbstractBundleInstallMojo.java#L336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/tooling/maven/maven-sling-plugin/src/main/java/org/apache/sling/maven/bundlesupport/AbstractBundleInstallMojo.java#L336&lt;/a&gt; should be improved:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;From the current path issue GET requests towards the parents recursively (each time a level above) until you receive a 2xx status.&lt;/li&gt;
	&lt;li&gt;From there create all intermediate paths towards the current path&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;That way it does not matter below which path the webdav servlet is registered.&lt;/p&gt;</comment>
                            <comment id="15162924" author="rombert" created="Wed, 24 Feb 2016 12:45:37 +0000"  >&lt;p&gt;Can this be reproduced with the current Sling launchpad? I recall that it worked when I tested it&lt;/p&gt;</comment>
                            <comment id="15162933" author="kwin" created="Wed, 24 Feb 2016 12:54:45 +0000"  >&lt;p&gt;I am not sure which target url should be used by default. The current default target URL is &lt;tt&gt;&lt;a href=&quot;http://localhost:8080/system/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console&lt;/a&gt;&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/tooling/maven/maven-sling-plugin/src/main/java/org/apache/sling/maven/bundlesupport/AbstractBundleInstallMojo.java#L71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/tooling/maven/maven-sling-plugin/src/main/java/org/apache/sling/maven/bundlesupport/AbstractBundleInstallMojo.java#L71&lt;/a&gt;) where noone should be listening for PUT methods (&lt;a href=&quot;http://felix.apache.org/documentation/subprojects/apache-felix-web-console/web-console-restful-api.html#bundles-plugin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://felix.apache.org/documentation/subprojects/apache-felix-web-console/web-console-restful-api.html#bundles-plugin&lt;/a&gt;).&lt;br/&gt;
OTOH if you reconfigure the target URL to point to the WebDAV entry point, then probably the POST servlet does no longer work (see also &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3540?focusedCommentId=15162970&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15162970&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-3540?focusedCommentId=15162970&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15162970&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15162943" author="kwin" created="Wed, 24 Feb 2016 13:02:06 +0000"  >&lt;p&gt;Actually also the check for the JSON rendition is not necessarily right. It basically all depends where the &lt;tt&gt;targetUrl&lt;/tt&gt; points to.&lt;br/&gt;
We should come up with&lt;br/&gt;
a) a recommendation which WebDAV bundle needs to be used together with &lt;tt&gt;usePut&lt;/tt&gt; and with which url&lt;br/&gt;
b) what requirements that bundle must fulfill (e.g. providing a JSON rendition)&lt;/p&gt;</comment>
                            <comment id="15162957" author="kwin" created="Wed, 24 Feb 2016 13:12:52 +0000"  >&lt;p&gt;IMHO the JSON rendition check is wrong (to check if the parent resource is there). If we rely on WebDAV (which we IMHO do if we use PUT) we should rather issue a HEAD request towards the folder URI.&lt;/p&gt;</comment>
                            <comment id="15166874" author="kwin" created="Thu, 25 Feb 2016 07:52:09 +0000"  >&lt;p&gt;This issue is now tackled in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5559&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5559&lt;/a&gt; after some discussion in &lt;a href=&quot;http://apache-sling.73963.n3.nabble.com/maven-sling-plugin-and-usePut-with-intermediate-folders-td4059733.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-sling.73963.n3.nabble.com/maven-sling-plugin-and-usePut-with-intermediate-folders-td4059733.html&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12944409">SLING-5559</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12711944">SLING-3540</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2th5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5553] Start background servlet jobs for POST, PUT and DELETE only by default</title>
                <link>https://issues.apache.org/jira/browse/SLING-5553</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Starting background jobs does not make sense for GET and HEAD requests for example, as those jobs are meant to change content and that shouldn&apos;t happen for such requests. I&apos;ll add a configurable list of acceptable methods to the &lt;tt&gt;BackgroundServletStarterFilter&lt;/tt&gt;, defaulting to POST, PUT and DELETE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12941422">SLING-5553</key>
            <summary>Start background servlet jobs for POST, PUT and DELETE only by default</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2016 15:15:39 +0000</created>
                <updated>Wed, 2 Mar 2016 14:49:48 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 16:09:21 +0000</resolved>
                                    <version>Background Servlets 1.0.2</version>
                                    <fixVersion>Background Servlets 1.0.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15159100" author="bdelacretaz" created="Tue, 23 Feb 2016 16:09:21 +0000"  >&lt;p&gt;Implemented in &lt;a href=&quot;http://svn.apache.org/r1731890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1731890&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t7xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5551] MockSlingHttpServletRequest: make sure given bundleContext is used</title>
                <link>https://issues.apache.org/jira/browse/SLING-5551</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when using the &lt;tt&gt;MockSlingHttpServletRequest(BundleContext bundleContext)&lt;/tt&gt; constructor within sling-mock the bundle context is not correctly store in the member field.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12941417">SLING-5551</key>
            <summary>MockSlingHttpServletRequest: make sure given bundleContext is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Tue, 23 Feb 2016 15:04:16 +0000</created>
                <updated>Tue, 23 Feb 2016 15:10:23 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 15:10:23 +0000</resolved>
                                    <version>Testing Sling Mock 1.6.2</version>
                                    <fixVersion>Testing Sling Mock 1.7.0</fixVersion>
                    <fixVersion>Testing Sling Mock 2.0.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15159018" author="sseifert@pro-vision.de" created="Tue, 23 Feb 2016 15:10:23 +0000"  >&lt;p&gt;sling-mock 1.x: rev. 1731881  &lt;br/&gt;
sling-mock 2.x: rev. 1731765&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t7wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5545] Potential NPE in ResourceProviderTracker.postEvents during shutdown</title>
                <link>https://issues.apache.org/jira/browse/SLING-5545</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the method ResourceProviderTracker.postEvents, line 410 may throw an event if an event is posted while the service is already shutting down (listener is already null in this case).&lt;/p&gt;

&lt;p&gt;listener method should only be called if listener object is not null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12941232">SLING-5545</key>
            <summary>Potential NPE in ResourceProviderTracker.postEvents during shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2016 00:01:22 +0000</created>
                <updated>Fri, 26 Feb 2016 12:19:04 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 00:02:36 +0000</resolved>
                                    <version>Resource Resolver 1.4.2</version>
                                    <fixVersion>Resource Resolver 1.4.4</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="15157975" author="sseifert@pro-vision.de" created="Tue, 23 Feb 2016 00:02:36 +0000"  >&lt;p&gt;Completed: At revision: 1731760  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t6rj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5544] osgi-mock: Catch RejectedExecutionException in MockEventAdmin</title>
                <link>https://issues.apache.org/jira/browse/SLING-5544</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;osgi events may be posted when the MockEventAdmin is already in progress of shutting down - this results in an RejectedExecutionException which should be caught.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12941230">SLING-5544</key>
            <summary>osgi-mock: Catch RejectedExecutionException in MockEventAdmin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Mon, 22 Feb 2016 23:55:26 +0000</created>
                <updated>Wed, 14 Sep 2016 22:02:17 +0000</updated>
                            <resolved>Mon, 22 Feb 2016 23:58:22 +0000</resolved>
                                    <version>Testing OSGi Mock 1.7.2</version>
                    <version>Testing OSGi Mock 2.0.2</version>
                                    <fixVersion>Testing OSGi Mock 1.8.0</fixVersion>
                    <fixVersion>Testing OSGi Mock 2.0.4</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="15157973" author="sseifert@pro-vision.de" created="Mon, 22 Feb 2016 23:58:22 +0000"  >&lt;p&gt;osgi-mock 2.x: Completed: At revision: 1731758  &lt;br/&gt;
osgi-mock 1.x: Completed: At revision: 1731759  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t6r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5543] Sightly Use POJOs with CR+LF line endings are not compiled correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-5543</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a Sightly Use POJO has &lt;tt&gt;CR+LF&lt;/tt&gt; line endings then the &lt;tt&gt;SightlyJavaCompilerService&lt;/tt&gt; will fail to correctly compile it due to issues with the &lt;tt&gt;package&lt;/tt&gt; declaration, which is now handled automatically by the compiler - &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5409&quot; title=&quot;Enhance the SightlyJavaCompilerService to not enforce a package name for Use objects stored in the repository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5409&quot;&gt;&lt;del&gt;SLING-5409&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12941170">SLING-5543</key>
            <summary>Sightly Use POJOs with CR+LF line endings are not compiled correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Feb 2016 20:42:53 +0000</created>
                <updated>Fri, 26 Feb 2016 16:43:21 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 14:31:47 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.10</version>
                    <version>Scripting Sightly Engine 1.0.12</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.14</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15158963" author="radu.cotescu" created="Tue, 23 Feb 2016 14:31:47 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1731860&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1731860&lt;/a&gt; and &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1731873&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1731873&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t6dr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5535] Background Job Web Console should use POST for job manipulation</title>
                <link>https://issues.apache.org/jira/browse/SLING-5535</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;At the moment, the &lt;tt&gt;JobConsolePlugin.Plugin&lt;/tt&gt; processes commands on HTTP Get. It would nicer to perform such job manipulation on Post only.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12940497">SLING-5535</key>
            <summary>Background Job Web Console should use POST for job manipulation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="acollign">Alex Collignon</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Feb 2016 13:14:41 +0000</created>
                <updated>Wed, 2 Mar 2016 14:49:49 +0000</updated>
                            <resolved>Fri, 19 Feb 2016 15:26:35 +0000</resolved>
                                    <version>Background Servlets 1.0.2</version>
                                    <fixVersion>Background Servlets 1.0.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15154221" author="acollign" created="Fri, 19 Feb 2016 13:45:31 +0000"  >&lt;p&gt;Attaching patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, may I ask you to have a look?&lt;/p&gt;</comment>
                            <comment id="15154247" author="bdelacretaz" created="Fri, 19 Feb 2016 14:05:34 +0000"  >&lt;p&gt;Oops, did I really write that code? It looks like I did &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll have a look later today.&lt;/p&gt;</comment>
                            <comment id="15154344" author="bdelacretaz" created="Fri, 19 Feb 2016 15:26:35 +0000"  >&lt;p&gt;I have applied your patch in revision 1731256, thanks!&lt;/p&gt;</comment>
                            <comment id="15154347" author="acollign" created="Fri, 19 Feb 2016 15:28:39 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12788680" name="SLING-5535.patch" size="4221" author="acollign" created="Fri, 19 Feb 2016 13:45:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t28f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5532] resolver.map(../messaging.html) results in NPE</title>
                <link>https://issues.apache.org/jira/browse/SLING-5532</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Another regression from the rewrite of the resource resolver&lt;/p&gt;</description>
                <environment></environment>
        <key id="12940073">SLING-5532</key>
            <summary>resolver.map(../messaging.html) results in NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Feb 2016 06:25:41 +0000</created>
                <updated>Fri, 26 Feb 2016 12:19:08 +0000</updated>
                            <resolved>Thu, 18 Feb 2016 08:28:04 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                    <version>Resource Resolver 1.4.2</version>
                                    <fixVersion>Resource Resolver 1.4.4</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15151933" author="cziegeler" created="Thu, 18 Feb 2016 08:28:04 +0000"  >&lt;p&gt;Fixed by reintroducing the absolute path check (null, empty or not starting with /)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2szm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5531] Sling-Namespaces bundle header for registering JCR namespaces broken</title>
                <link>https://issues.apache.org/jira/browse/SLING-5531</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4937&quot; title=&quot;Drop per session namespace mapping support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4937&quot;&gt;&lt;del&gt;SLING-4937&lt;/del&gt;&lt;/a&gt; (Drop namespace mapping support) broke the &quot;Declared Node Type Registration&quot; feature described in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;this allows to register custom JCR namespaces or nodetypes via a CND file when deploying a bundle and specifying the CND file via a &lt;tt&gt;Sling-Nodetypes&lt;/tt&gt; bundle header.&lt;/p&gt;

&lt;p&gt;i assume only the support for &lt;tt&gt;Sling-Namespaces&lt;/tt&gt; should be removed with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4937&quot; title=&quot;Drop per session namespace mapping support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4937&quot;&gt;&lt;del&gt;SLING-4937&lt;/del&gt;&lt;/a&gt;, not the support for &lt;tt&gt;Sling-Nodetypes&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://sling.apache.org/documentation/bundles/content-loading-jcr-contentloader.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/content-loading-jcr-contentloader.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12939993">SLING-5531</key>
            <summary>Sling-Namespaces bundle header for registering JCR namespaces broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Feb 2016 23:39:37 +0000</created>
                <updated>Tue, 23 Feb 2016 16:36:27 +0000</updated>
                            <resolved>Fri, 19 Feb 2016 08:49:27 +0000</resolved>
                                    <version>JCR Base 2.3.0</version>
                                    <fixVersion>JCR Base 2.3.2</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15151934" author="sseifert@pro-vision.de" created="Thu, 18 Feb 2016 08:28:27 +0000"  >&lt;p&gt;the &lt;tt&gt;Sling-Namespaces&lt;/tt&gt; header is no more supported at all in JCR Base 2.3.0. which means it cannot be used any longer to register a global namespace in JCR even without the special sing-internal mapping supported dropped with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4937&quot; title=&quot;Drop per session namespace mapping support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4937&quot;&gt;&lt;del&gt;SLING-4937&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15151940" author="cziegeler" created="Thu, 18 Feb 2016 08:32:35 +0000"  >&lt;p&gt;I&apos;ll have a look at it&lt;/p&gt;</comment>
                            <comment id="15151956" author="cziegeler" created="Thu, 18 Feb 2016 08:43:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; It&apos;s still there, AbstractSlingRepository extends NamespaceMappingSupport which should do the mapping&lt;br/&gt;
AbstractSlingRepository2 use the manager which extends this as well. Looking at the changes of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4937&quot; title=&quot;Drop per session namespace mapping support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4937&quot;&gt;&lt;del&gt;SLING-4937&lt;/del&gt;&lt;/a&gt; I don&apos;t think that anything with respect to that has been removed - at least I can&apos;t find it.&lt;/p&gt;</comment>
                            <comment id="15151964" author="sseifert@pro-vision.de" created="Thu, 18 Feb 2016 08:51:55 +0000"  >&lt;p&gt;i did not look deeper yet into the sources, but observed the following yesterday:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;in a instance running  JCR Base 2.3.0 (AEM in this case) i deployed a bundle with only a &lt;tt&gt;Sling-Namespaces&lt;/tt&gt; header registering one custom namespace. the registration did not take place. setting DEBUG level for &lt;tt&gt;org.apache.sling.jcr.base.internal.loader&lt;/tt&gt; did not generate any messages.&lt;/li&gt;
	&lt;li&gt;i converted my Sling-Namespaces header to Sling-Nodetypes with a CND file containing only a namespace declaration - did not work either.&lt;/li&gt;
	&lt;li&gt;i then switched back the svn folder &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/jcr/base&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/jcr/base&lt;/a&gt; to rev. 1695254 (version 2.3.1-SNAPSHOT for jcr.base without any further changes), and additionally reverted the rev. 1694959 (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4937&quot; title=&quot;Drop per session namespace mapping support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4937&quot;&gt;&lt;del&gt;SLING-4937&lt;/del&gt;&lt;/a&gt; : Drop namespace mapping support), 1695250 (Use jcr api 2.3.0) and deployed this in the instance.&lt;/li&gt;
	&lt;li&gt;the namespace was registered when redeploying my bundle&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15151982" author="cziegeler" created="Thu, 18 Feb 2016 09:03:56 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt;&lt;br/&gt;
Looking at it again, I think I see the problem now: although the namespace registry calls are somewhere in the code, they were only triggered if a session was created (for the mapping). So it seems we had a bug in here for a long time, which we didn&apos;t discover as some session is always created. &lt;/p&gt;</comment>
                            <comment id="15152002" author="cziegeler" created="Thu, 18 Feb 2016 09:25:51 +0000"  >&lt;p&gt;Actually I was wrong, the mapping should still be called per session&lt;br/&gt;
From your comment above, it seems the Loader is not starting properly, however diffing the versions I couldn&apos;t find a reason why this is the case&lt;/p&gt;</comment>
                            <comment id="15152719" author="sseifert@pro-vision.de" created="Thu, 18 Feb 2016 17:52:58 +0000"  >&lt;p&gt;i think i&apos;ve found the problem.&lt;/p&gt;

&lt;p&gt;the Loader is registered as bundle listener and nicely collects all bundle headers with namespaces or node types (and logs this in DEBUG level, not sure why i&apos;ve not seen the messages in my previous attempt). but they never get applied to a session and thus not to the JCR repository when AbstractSlingRepository2 is used.&lt;/p&gt;

&lt;p&gt;please see the patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12788477/12788477_AbstractSlingRepository2.patch&quot; title=&quot;AbstractSlingRepository2.patch attached to SLING-5531&quot;&gt;AbstractSlingRepository2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. with this patch the namespace registration works as expected. but i have no good understanding of the code in this module, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, can you have a look again?&lt;/p&gt;</comment>
                            <comment id="15153868" author="cziegeler" created="Fri, 19 Feb 2016 07:47:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Thanks, lgtm - do you want to apply it?&lt;/p&gt;</comment>
                            <comment id="15153891" author="cziegeler" created="Fri, 19 Feb 2016 08:13:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Is it correct that the node type support is not broking, but just namespace handling? The Loader should handle nodetype registrations directly&lt;/p&gt;</comment>
                            <comment id="15153922" author="sseifert@pro-vision.de" created="Fri, 19 Feb 2016 08:45:55 +0000"  >&lt;p&gt;just tested this again - yes nodetype registration was working with 2.3.0. root case for the wrong testcase initially was that restarting the jcr.base bundle itself has not effect and does not lead to re-checking deployed bundle headers - because it contains only abstract classes, and they are only reloaded if the consuming bundle like oak-server are restarted.&lt;/p&gt;

&lt;p&gt;will update the ticket title and apply the patch.&lt;/p&gt;</comment>
                            <comment id="15153927" author="sseifert@pro-vision.de" created="Fri, 19 Feb 2016 08:49:28 +0000"  >&lt;p&gt;Completed: At revision: 1731199  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12853749">SLING-4937</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12940418">SLING-5534</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12788477" name="AbstractSlingRepository2.patch" size="1075" author="sseifert" created="Thu, 18 Feb 2016 17:52:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sz4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5530] Configuring DocumentNodeStore to use FileDataStore with latest Sling Launchpad doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/SLING-5530</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I tried to configure DocumentNodeStore to use FileDataStore with Sling Launchpad 8, as advised in &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;. &lt;br/&gt;
For this I created in ${sling.home}/install the following configurations:&lt;/p&gt;

&lt;p&gt;org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStoreService.cfg&lt;br/&gt;
customBlobStore=true&lt;/p&gt;

&lt;p&gt;org.apache.jackrabbit.oak.plugins.blob.datastore.FileDataStore.cfg&lt;br/&gt;
minRecordLength=4096&lt;br/&gt;
path=/some/path&lt;/p&gt;

&lt;p&gt;When starting launchpad with java -jar org.apache.sling.launchpad-9-SNAPSHOT.jar -Dsling.fileinstall.dir=sling/install the following exception is thrown:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.plugins.blob.datastore.FileDataStore)&amp;#93;&lt;/span&gt; org.apache.jackrabbit.oak-core &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.jackrabbit.oak.plugins.blob.datastore.FileDataStore(196)&amp;#93;&lt;/span&gt; Error during instantiation of the implementation object (java.lang.NoClassDefFoundError: org/apache/jackrabbit/core/data/DataStore)&lt;/p&gt;

&lt;p&gt;The reason is that org.apache.jackrabbit/jackrabbit-data/${jackrabbit.version} bundle is missing from the provisioning model. Adding it solved the problem.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://jackrabbit.apache.org/oak/docs/osgi_config.html#config-sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/oak/docs/osgi_config.html#config-sling&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12939847">SLING-5530</key>
            <summary>Configuring DocumentNodeStore to use FileDataStore with latest Sling Launchpad doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="adulceanu">Andrei Dulceanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Feb 2016 15:32:57 +0000</created>
                <updated>Thu, 18 Feb 2016 10:38:50 +0000</updated>
                            <resolved>Thu, 18 Feb 2016 10:38:50 +0000</resolved>
                                                    <fixVersion>Launchpad Builder 9</fixVersion>
                                    <component>Launchpad</component>
                    <component>Oak</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15152113" author="rombert" created="Thu, 18 Feb 2016 10:38:50 +0000"  >&lt;p&gt;Thanks for the patch, I have applied it in &lt;a href=&quot;https://svn.apache.org/r1731039&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1731039&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12788252" name="FileDataStore.patch" size="724" author="adulceanu" created="Wed, 17 Feb 2016 15:33:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sy7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5529] Debug connection to the Sling server doesn&apos;t attach a JRE</title>
                <link>https://issues.apache.org/jira/browse/SLING-5529</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When connecting to a Sling server in debug mode the JRE sources are not attached, making it very hard to debug code which comes from the JRE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12939845">SLING-5529</key>
            <summary>Debug connection to the Sling server doesn&apos;t attach a JRE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Feb 2016 15:02:51 +0000</created>
                <updated>Wed, 20 Sep 2017 13:12:18 +0000</updated>
                            <resolved>Wed, 17 Feb 2016 20:53:39 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.1.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15151158" author="rombert" created="Wed, 17 Feb 2016 20:53:39 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1730940&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1730940&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sy7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5525] Potential NPE / race condition with unregistered resource providers</title>
                <link>https://issues.apache.org/jira/browse/SLING-5525</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There is a race condition with unregistering provider handlers and iterating over them. For example this NPE might happen in such a case:&lt;/p&gt;

&lt;p&gt;15.02.2016 09:17:02.485 WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;sling-oak-observation-68&amp;#93;&lt;/span&gt; org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor Error while dispatching observation events for /*&lt;span class=&quot;error&quot;&gt;&amp;#91;1b, oak:Unstructured, sling:Folder, no local&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.providers.stateful.ProviderManager.authenticate(ProviderManager.java:156)&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.providers.stateful.ProviderManager.getOrCreateProvider(ProviderManager.java:85)&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.providers.stateful.ProviderManager$1$1.seek(ProviderManager.java:213)&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.providers.stateful.ProviderManager$1$1.seek(ProviderManager.java:205)&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.helper.AbstractIterator.hasNext(AbstractIterator.java:33)&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.adaptTo(ResourceResolverControl.java:474)&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.adaptTo(ResourceResolverImpl.java:830)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12939734">SLING-5525</key>
            <summary>Potential NPE / race condition with unregistered resource providers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Feb 2016 08:41:00 +0000</created>
                <updated>Fri, 26 Feb 2016 12:19:14 +0000</updated>
                            <resolved>Wed, 17 Feb 2016 08:50:12 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                    <version>Resource Resolver 1.4.2</version>
                                    <fixVersion>Resource Resolver 1.4.4</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15150143" author="cziegeler" created="Wed, 17 Feb 2016 08:50:12 +0000"  >&lt;p&gt;Fixed/checked all places where the provider is fetched. A null check is now in all places&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sxj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5516] ParameterSupportHttpServletRequestWrapper is not conform to Servlet API 3.0</title>
                <link>https://issues.apache.org/jira/browse/SLING-5516</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to [1] HttpServletRequest#getParts() and HttpServletRequest#getPart(String) throw ServletExceptions in case the request ist not a &lt;tt&gt;multpart/&lt;/tt&gt; request.&lt;/p&gt;

&lt;p&gt;In the Sling Engine implementation this seems not to be the case &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;. Not completely sure if this applies to the other exception types as well but i think so.&lt;/p&gt;

&lt;p&gt;[1] &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getParts--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getParts--&lt;/a&gt;&lt;br/&gt;
[2] &lt;a href=&quot;http://svn.apache.org/viewvc/sling/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/parameters/ParameterMap.java?view=markup#l127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/sling/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/parameters/ParameterMap.java?view=markup#l127&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewvc/sling/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/parameters/ParameterSupportHttpServletRequestWrapper.java?view=markup#l59&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/sling/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/parameters/ParameterSupportHttpServletRequestWrapper.java?view=markup#l59&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938846">SLING-5516</key>
            <summary>ParameterSupportHttpServletRequestWrapper is not conform to Servlet API 3.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Feb 2016 16:42:13 +0000</created>
                <updated>Fri, 14 Apr 2023 13:26:40 +0000</updated>
                            <resolved>Fri, 14 Apr 2023 13:26:40 +0000</resolved>
                                    <version>Engine 2.4.6</version>
                                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ss33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5510] Resource resolver should always use most current set of providers</title>
                <link>https://issues.apache.org/jira/browse/SLING-5510</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, the resource resolver gets the set of providers at the time of creation of the resolver. Especially with long running resolvers which are created &quot;early&quot; , this means that they don&apos;t see providers which were registered after the resolver was created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938457">SLING-5510</key>
            <summary>Resource resolver should always use most current set of providers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Feb 2016 08:44:25 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:12 +0000</updated>
                            <resolved>Thu, 11 Feb 2016 08:47:03 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                                    <fixVersion>Resource Resolver 1.4.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15142431" author="cziegeler" created="Thu, 11 Feb 2016 08:47:03 +0000"  >&lt;p&gt;Applied a patch by Justin Edelson&lt;/p&gt;

&lt;p&gt;In addition, clearing out the provider handler now if the provider gets unregistered.&lt;/p&gt;</comment>
                            <comment id="15143638" author="alexander.klimetschek" created="Thu, 11 Feb 2016 22:40:13 +0000"  >&lt;p&gt;For reference, commit is &lt;a href=&quot;https://github.com/apache/sling/commit/bad330f5597f03e69417b569a2c8366c30ec4468&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/bad330f5597f03e69417b569a2c8366c30ec4468&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2spov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5509] Behaviour Change in Resource#getParent</title>
                <link>https://issues.apache.org/jira/browse/SLING-5509</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In versions pre 1.4.0 it was possible to call getParent on a resource with a relative path - this was then made absolute using the search paths.&lt;br/&gt;
1.4.0 always returns null in this case.&lt;/p&gt;

&lt;p&gt;We should restore the old behaviour&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938176">SLING-5509</key>
            <summary>Behaviour Change in Resource#getParent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Feb 2016 13:03:53 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:13 +0000</updated>
                            <resolved>Wed, 10 Feb 2016 13:24:43 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                                    <fixVersion>Resource Resolver 1.4.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15140756" author="cziegeler" created="Wed, 10 Feb 2016 13:24:43 +0000"  >&lt;p&gt;Restarted the old behaviour&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2snyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5506] JcrResourceProvider must be stateless</title>
                <link>https://issues.apache.org/jira/browse/SLING-5506</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the refactoring of the JcrResourceProvider, the provider became stateless. Unfortunately not all stateful data has been moved into the new context object.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938105">SLING-5506</key>
            <summary>JcrResourceProvider must be stateless</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Feb 2016 07:34:00 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:44 +0000</updated>
                            <resolved>Wed, 10 Feb 2016 17:12:32 +0000</resolved>
                                    <version>JCR Resource 2.7.0</version>
                                    <fixVersion>JCR Resource 2.7.2</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15140549" author="cziegeler" created="Wed, 10 Feb 2016 09:22:17 +0000"  >&lt;p&gt;Fixed by moving the HelperData handling to the state object&lt;/p&gt;</comment>
                            <comment id="15141131" author="cziegeler" created="Wed, 10 Feb 2016 16:49:10 +0000"  >&lt;p&gt;We should also get the classloader on demand&lt;/p&gt;</comment>
                            <comment id="15141206" author="cziegeler" created="Wed, 10 Feb 2016 17:12:33 +0000"  >&lt;p&gt;I&apos;ve changed the code to&lt;br/&gt;
a) get the classloader on demand&lt;br/&gt;
b) use a dynamic atomic reference to the class loader manager, this way a provider which has been created before a class loader manager change will still get the latest one&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2snin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5503] ConcurrentModificationException while iterating over existing providers</title>
                <link>https://issues.apache.org/jira/browse/SLING-5503</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Some methods in ResourceResolverControl iterate over the current set of used providers. However, if while iterating this list is modified, the set is modified the following exception occurs:&lt;br/&gt;
java.util.ConcurrentModificationException: null&lt;br/&gt;
at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:859)&lt;br/&gt;
at java.util.ArrayList$Itr.next(ArrayList.java:831)&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.commit(ResourceResolverControl.java:405)&lt;br/&gt;
at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.commit(ResourceResolverImpl.java:1218)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937944">SLING-5503</key>
            <summary>ConcurrentModificationException while iterating over existing providers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2016 18:03:05 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:11 +0000</updated>
                            <resolved>Tue, 9 Feb 2016 18:03:55 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                                    <fixVersion>Resource Resolver 1.4.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15139312" author="cziegeler" created="Tue, 9 Feb 2016 18:03:55 +0000"  >&lt;p&gt;Solved by creating a copy before iterating&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2smiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5502] Additions to MergedResourcePicker break existing implementations</title>
                <link>https://issues.apache.org/jira/browse/SLING-5502</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As a method has been added to MergedResourcePicker, the package version is increased to 2.0.0 which breaks all existing implementations.&lt;br/&gt;
We have to be compatible&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joelrich&quot; class=&quot;user-hover&quot; rel=&quot;joelrich&quot;&gt;joelrich&lt;/a&gt; I think we have to create a MergedResourcePicker2 interface and then support both&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937931">SLING-5502</key>
            <summary>Additions to MergedResourcePicker break existing implementations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2016 17:38:43 +0000</created>
                <updated>Sun, 14 Feb 2016 10:56:24 +0000</updated>
                            <resolved>Wed, 10 Feb 2016 09:51:12 +0000</resolved>
                                    <version>Resource Merger 1.3.0</version>
                                    <fixVersion>Resource Merger 1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15140579" author="cziegeler" created="Wed, 10 Feb 2016 09:51:12 +0000"  >&lt;p&gt;Added new MergedResourcePicker2 interface instead&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12820527">SLING-4611</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2smfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5501] Adjust resource merger for latest API changes</title>
                <link>https://issues.apache.org/jira/browse/SLING-5501</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This is a follow up issue for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4611&quot; title=&quot;Performance: Consider optimizing MergedResource#getParent and getChild&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4611&quot;&gt;&lt;del&gt;SLING-4611&lt;/del&gt;&lt;/a&gt;. The resource merger code has to be adjusted for the latest resource provider changes. I will attach a patch shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937907">SLING-5501</key>
            <summary>Adjust resource merger for latest API changes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="joelrich">Joel Richard</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Tue, 9 Feb 2016 16:08:52 +0000</created>
                <updated>Sun, 14 Feb 2016 10:56:38 +0000</updated>
                            <resolved>Tue, 9 Feb 2016 17:35:08 +0000</resolved>
                                    <version>Resource Merger 1.2.10</version>
                                    <fixVersion>Resource Merger 1.3.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15139271" author="cziegeler" created="Tue, 9 Feb 2016 17:35:08 +0000"  >&lt;p&gt;Thanks for your patch Joel, it&apos;s applied&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12787087" name="SLING-5501.patch" size="9381" author="joelrich" created="Tue, 9 Feb 2016 16:13:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sman:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5500] ResourceResolver#remove(Resource) fails on JcrResource that is a Property</title>
                <link>https://issues.apache.org/jira/browse/SLING-5500</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Let Path point to a Property in a JCR Repository&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Resource toDelete = resourceResolver.getResource(path);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (toDelete != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
     resourceResolver.delete(toDelete);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ends in a PathNotFoundException. &lt;/p&gt;

&lt;p&gt;Seems to be introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5491&quot; title=&quot;JcrResourceProvider#delete should not cast Resource to JcrItemResource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5491&quot;&gt;&lt;del&gt;SLING-5491&lt;/del&gt;&lt;/a&gt; found in Bundle Version 2.7.1.R1728839&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937841">SLING-5500</key>
            <summary>ResourceResolver#remove(Resource) fails on JcrResource that is a Property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="chkeller">Christan Keller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2016 11:42:37 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:44 +0000</updated>
                            <resolved>Tue, 9 Feb 2016 12:34:39 +0000</resolved>
                                    <version>JCR Resource 2.7.0</version>
                                    <fixVersion>JCR Resource 2.7.2</fixVersion>
                                    <component>JCR</component>
                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15138871" author="cziegeler" created="Tue, 9 Feb 2016 12:30:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chkeller&quot; class=&quot;user-hover&quot; rel=&quot;chkeller&quot;&gt;chkeller&lt;/a&gt; Could you please attach the stracktrace for the Exception?&lt;/p&gt;</comment>
                            <comment id="15138877" author="cziegeler" created="Tue, 9 Feb 2016 12:34:39 +0000"  >&lt;p&gt;Fixed by adapting the resource to Item, and using getItem - instead of Node/getNode&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2slvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5499] Servlets resource provider is hiding resources from other providers</title>
                <link>https://issues.apache.org/jira/browse/SLING-5499</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The new servlet resource provider implementation is based on the new resource provider API. For example if a servlet is mounted at the path &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; /libs/foo, all resources underneath this resource, like /libs/foo/bla are tried with the servlet resource provider.&lt;br/&gt;
The old implementation of the resource resolver switched to the resource provider at / and tried it there&lt;br/&gt;
This is a change of behaviour and we should revert to the old behaviour&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937834">SLING-5499</key>
            <summary>Servlets resource provider is hiding resources from other providers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2016 11:02:08 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:57 +0000</updated>
                            <resolved>Tue, 9 Feb 2016 11:03:49 +0000</resolved>
                                    <version>Servlets Resolver 2.4.0</version>
                                    <fixVersion>Servlets Resolver 2.4.2</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15138791" author="cziegeler" created="Tue, 9 Feb 2016 11:03:49 +0000"  >&lt;p&gt;Added call to parent provider for getResource and listChildren&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sluf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5498] ResolveContext#getParentResourceProvider always returns null</title>
                <link>https://issues.apache.org/jira/browse/SLING-5498</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12937827">SLING-5498</key>
            <summary>ResolveContext#getParentResourceProvider always returns null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2016 10:53:42 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:11 +0000</updated>
                            <resolved>Tue, 9 Feb 2016 11:00:09 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                                    <fixVersion>Resource Resolver 1.4.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15138785" author="cziegeler" created="Tue, 9 Feb 2016 11:00:09 +0000"  >&lt;p&gt;Fixed the while loop in BasicResolveContext&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2slsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5496] Adaptable is not implemented for legacy providers</title>
                <link>https://issues.apache.org/jira/browse/SLING-5496</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a legacy provider implements Adaptable, adaptTo is never called&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937655">SLING-5496</key>
            <summary>Adaptable is not implemented for legacy providers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2016 21:44:42 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:13 +0000</updated>
                            <resolved>Mon, 8 Feb 2016 21:45:58 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                                    <fixVersion>Resource Resolver 1.4.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15137760" author="cziegeler" created="Mon, 8 Feb 2016 21:45:58 +0000"  >&lt;p&gt;Fixed by implementing the adaptTo method in the legacy adapter&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2skyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5495] Resolution path is not always set</title>
                <link>https://issues.apache.org/jira/browse/SLING-5495</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to the refactoring, we missed some places where the resource metadata needs to be set, especially the resolution path&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937604">SLING-5495</key>
            <summary>Resolution path is not always set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2016 18:46:16 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:12 +0000</updated>
                            <resolved>Mon, 8 Feb 2016 18:56:26 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                                    <fixVersion>Resource Resolver 1.4.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sknb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5494] Discovery InstancesDiff.retained() implementation not according to API doc</title>
                <link>https://issues.apache.org/jira/browse/SLING-5494</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The InstancesDiff.retained(boolean retainFromNewCollection, boolean propertyChanged) does not seem to be implemented according to the API docs. The property &apos;propertyChanged&apos; is implemented the opposite way as in the API descriptions. Not sure whether implementation or API doc is right. &lt;/p&gt;

&lt;p&gt;As per API the propertyChanged=false is supposed to return only the instances where properties have changed, and propertyChanged=true where properties have not changed.&lt;/p&gt;

&lt;p&gt;Looking at the test case in &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;, which is passing, the implementation seems to behave the other way round. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Suspect implementation &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;Test case &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/commons/src/main/java/org/apache/sling/discovery/commons/InstancesDiff.java#L214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/commons/src/main/java/org/apache/sling/discovery/commons/InstancesDiff.java#L214&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/7c4a53755aed1211c9af313a3973cd2543a7bbe0/bundles/extensions/discovery/commons/src/main/java/org/apache/sling/discovery/commons/InstancesDiff.java#L256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/7c4a53755aed1211c9af313a3973cd2543a7bbe0/bundles/extensions/discovery/commons/src/main/java/org/apache/sling/discovery/commons/InstancesDiff.java#L256&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/commons/src/test/java/org/apache/sling/discovery/commons/InstancesDiffTest.java#L161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/commons/src/test/java/org/apache/sling/discovery/commons/InstancesDiffTest.java#L161&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937526">SLING-5494</key>
            <summary>Discovery InstancesDiff.retained() implementation not according to API doc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="pfaffm@adobe.com">Marc Pfaff</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2016 15:12:57 +0000</created>
                <updated>Thu, 26 Sep 2019 12:41:04 +0000</updated>
                            <resolved>Mon, 8 Feb 2016 16:10:42 +0000</resolved>
                                    <version>Discovery Commons 1.0.4</version>
                                    <fixVersion>Discovery Commons 1.0.12</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15137052" author="pfaffm@adobe.com" created="Mon, 8 Feb 2016 15:13:40 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, as discussed.&lt;/p&gt;</comment>
                            <comment id="15137063" author="marett" created="Mon, 8 Feb 2016 15:21:41 +0000"  >&lt;p&gt;The implementation does behave the opposite of what the API tells regarding the &lt;tt&gt;propertyChanged&lt;/tt&gt; parameter.&lt;br/&gt;
I suggest to change the API description in order to match the implementation because:&lt;/p&gt;

&lt;p&gt;1. The implementation semantic of the &lt;tt&gt;propertyChanged&lt;/tt&gt; is &quot;logical&quot; (if &lt;tt&gt;true&lt;/tt&gt; keep the properties that have changed)&lt;br/&gt;
2. Assuming there are existing users of the API, it is unlikely that the API behaviour has been relied upon rather than the implementation behaviour (the difference in behaviour is obvious).&lt;/p&gt;</comment>
                            <comment id="15137074" author="githubbot" created="Mon, 8 Feb 2016 15:27:33 +0000"  >&lt;p&gt;GitHub user tmaret opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5494&quot; title=&quot;Discovery InstancesDiff.retained() implementation not according to API doc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5494&quot;&gt;&lt;del&gt;SLING-5494&lt;/del&gt;&lt;/a&gt; - Discovery InstancesDiff.retained() implementation not according to API doc&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tmaret/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmaret/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5494&quot; title=&quot;Discovery InstancesDiff.retained() implementation not according to API doc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5494&quot;&gt;&lt;del&gt;SLING-5494&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/122.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/122.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #122&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e397aee4da4a63967b3e2e8e6abfd253c476787e&lt;br/&gt;
Author: tmaret &amp;lt;tmaret@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-02-08T15:25:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5494&quot; title=&quot;Discovery InstancesDiff.retained() implementation not according to API doc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5494&quot;&gt;&lt;del&gt;SLING-5494&lt;/del&gt;&lt;/a&gt; - Discovery InstancesDiff.retained() implementation not according to API doc&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Match the API with the implementation&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15137075" author="marett" created="Mon, 8 Feb 2016 15:27:57 +0000"  >&lt;p&gt;Opened PR at &lt;a href=&quot;https://github.com/apache/sling/pull/122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/122&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15137079" author="marett" created="Mon, 8 Feb 2016 15:30:29 +0000"  >&lt;p&gt;Attaching svn compatible patch&lt;/p&gt;</comment>
                            <comment id="15137081" author="marett" created="Mon, 8 Feb 2016 15:31:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; could you review the patch ?&lt;/p&gt;</comment>
                            <comment id="15137092" author="githubbot" created="Mon, 8 Feb 2016 15:43:04 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/122&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15137093" author="egli" created="Mon, 8 Feb 2016 15:43:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, makes sense and looks good to me. I&apos;ve applied the diff in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1729191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;rev 1729191&lt;/a&gt;. Can you pls double-check and close this ticket? thx.&lt;/p&gt;</comment>
                            <comment id="15137140" author="marett" created="Mon, 8 Feb 2016 16:06:54 +0000"  >&lt;p&gt;LGTM, thanks! I can&apos;t close the ticket though. Please go ahead.&lt;/p&gt;</comment>
                            <comment id="15137143" author="egli" created="Mon, 8 Feb 2016 16:11:21 +0000"  >&lt;p&gt;thx, marked resolved&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12786827" name="SLING-5494.diff" size="1411" author="marett" created="Mon, 8 Feb 2016 15:30:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sk67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5492] ResourceResolver#getParent might ask wrong resource provider</title>
                <link>https://issues.apache.org/jira/browse/SLING-5492</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;ResourceResolver#getParent always uses the resource provider of the current resource to get the parent resource. However, the parent resource might be delivered by a different provider&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937247">SLING-5492</key>
            <summary>ResourceResolver#getParent might ask wrong resource provider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Feb 2016 12:47:49 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:12 +0000</updated>
                            <resolved>Sat, 6 Feb 2016 12:54:18 +0000</resolved>
                                    <version>Resource Resolver 1.4.0</version>
                                    <fixVersion>Resource Resolver 1.4.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15135753" author="cziegeler" created="Sat, 6 Feb 2016 12:54:18 +0000"  >&lt;p&gt;Fixed by only asking the parent provider and switching to a path if the provider are different&lt;/p&gt;</comment>
                            <comment id="15135757" author="cziegeler" created="Sat, 6 Feb 2016 13:17:53 +0000"  >&lt;p&gt;Added a test case, failing with the old impl, passing with this new fixed impl&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sig7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5491] JcrResourceProvider#delete should not cast Resource to JcrItemResource</title>
                <link>https://issues.apache.org/jira/browse/SLING-5491</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The code at&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/blob/f4751528432eca4e54e3161d501b43b605f92ae7/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/helper/jcr/JcrResourceProvider.java#l440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/f4751528432eca4e54e3161d501b43b605f92ae7/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/helper/jcr/JcrResourceProvider.java#l440&lt;/a&gt;&lt;br/&gt;
is directly casting to a JcrItemResource - if e.g. a wrapped resource is passed in, this fails&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937245">SLING-5491</key>
            <summary>JcrResourceProvider#delete should not cast Resource to JcrItemResource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 Feb 2016 12:23:20 +0000</created>
                <updated>Fri, 19 Feb 2016 08:00:44 +0000</updated>
                            <resolved>Sat, 6 Feb 2016 12:29:04 +0000</resolved>
                                    <version>JCR Resource 2.7.0</version>
                                    <fixVersion>JCR Resource 2.7.2</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15135748" author="cziegeler" created="Sat, 6 Feb 2016 12:29:04 +0000"  >&lt;p&gt;Fixed by adapting the resource to a Node - and if that fails, trying to get the node at the path&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sifr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5488] Attribute handling is not correct</title>
                <link>https://issues.apache.org/jira/browse/SLING-5488</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to the refactoring the attribute handling of resource providers is not correct anymore:&lt;br/&gt;
it should first iterate over the providers and finally over the auth info&lt;br/&gt;
Right now its using one provider, then auth info, then the next provider, auth info again etc.&lt;br/&gt;
The implementation could also be improved to use a lazy iterator to iterate over the providers, instead of first creating a list&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936997">SLING-5488</key>
            <summary>Attribute handling is not correct</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Feb 2016 09:35:57 +0000</created>
                <updated>Mon, 8 Feb 2016 22:12:14 +0000</updated>
                            <resolved>Fri, 5 Feb 2016 12:42:50 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.4.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15134102" author="cziegeler" created="Fri, 5 Feb 2016 12:42:50 +0000"  >&lt;p&gt;Restored the old attribute handling&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sgwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5487] Resource access security is not implemented correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-5487</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to the refactoring of the resource resolver, the resource access security checks are not performed correctly anymore. Application security providers are not executed, if the resource provider does not declare to use provider security checkers. These need to be executed always.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936991">SLING-5487</key>
            <summary>Resource access security is not implemented correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Feb 2016 09:10:49 +0000</created>
                <updated>Mon, 8 Feb 2016 22:12:12 +0000</updated>
                            <resolved>Fri, 5 Feb 2016 12:24:24 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.4.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15134080" author="cziegeler" created="Fri, 5 Feb 2016 12:24:24 +0000"  >&lt;p&gt;I&apos;ve restored the old behaviour&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sgvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5483] Unauthenticated request: getUserPrincipal() doesn&apos;t return null for auth.annonymous=true</title>
                <link>https://issues.apache.org/jira/browse/SLING-5483</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The javadoc for &lt;tt&gt;HttpServletRequest.getUserPrincipal()&lt;/tt&gt; states the following for an unauthenticated request:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If the user has not been authenticated, the method returns &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;With the request implementation present with Sling this is &lt;tt&gt;true&lt;/tt&gt; as long as the property &lt;tt&gt;auth.annonymous&lt;/tt&gt; is disabled in the &lt;tt&gt;Authenticator&lt;/tt&gt;. Allowing for anonymous access by default in the Sling &lt;tt&gt;Authenticator&lt;/tt&gt; however will change the behavior of this method to return a non-null principal (by default: &apos;anonymous&apos;)&lt;/p&gt;

&lt;p&gt;Surprisingly, &lt;tt&gt;HttpServletRequest.getAuthType()&lt;/tt&gt; behaves as documented in the Javadoc (basically stating the same) irrespective of the &lt;tt&gt;auth.annonymous&lt;/tt&gt; flag (i.e. always returning &lt;tt&gt;null&lt;/tt&gt; for un-authenticated access).&lt;/p&gt;

&lt;p&gt;Without being too familiar with the internals of the &lt;tt&gt;HttpServletRequest&lt;/tt&gt; implementation in Sling I got the impression that the reason for this issue is due to the behavior in the &lt;tt&gt;Authenticator&lt;/tt&gt; and how the corresponding properties (i.e. userprincipal and authtype) are passed to the request -&amp;gt; setting components accordingly. Please adjust if needed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936659">SLING-5483</key>
            <summary>Unauthenticated request: getUserPrincipal() doesn&apos;t return null for auth.annonymous=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2016 09:23:01 +0000</created>
                <updated>Fri, 28 Aug 2020 12:42:40 +0000</updated>
                            <resolved>Wed, 5 Aug 2020 14:12:29 +0000</resolved>
                                                    <fixVersion>Auth Core 1.5.0</fixVersion>
                                    <component>Authentication</component>
                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17171529" author="cziegeler" created="Wed, 5 Aug 2020 14:12:29 +0000"  >&lt;p&gt;Fixed in&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-core/commit/c4f4deffe0590646562d47a7c52b4490859a74ed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-auth-core/commit/c4f4deffe0590646562d47a7c52b4490859a74ed&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2setr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5480] Change in JMX names (OAK-3477) breaks discovery.oak&apos;s SynchronizedClocksHealthCheck</title>
                <link>https://issues.apache.org/jira/browse/SLING-5480</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3477&quot; title=&quot;Make JMX Bean names predictable so they can be used in configurations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3477&quot;&gt;&lt;del&gt;OAK-3477&lt;/del&gt;&lt;/a&gt; changed the naming convention of JMX Mbeans created by oak. Originally the DocumentNodeStore was created as follows:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;domain/type/name/properties
org.apache.jackrabbit.oak	&quot;DocumentNodeStore&quot;	&quot;Document node store management&quot;	{id=6}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;while &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3477&quot; title=&quot;Make JMX Bean names predictable so they can be used in configurations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3477&quot;&gt;&lt;del&gt;OAK-3477&lt;/del&gt;&lt;/a&gt; changed that to:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;domain/type/name/properties
org.apache.jackrabbit.oak	DocumentNodeStore	Document node store management
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(meaning, the type is not quoted anymore, plus the id is gone)&lt;/p&gt;

&lt;p&gt;This breaks the query used in &lt;tt&gt;SynchronizedClocksHealthCheck&lt;/tt&gt; to get the &lt;tt&gt;DocumentNodeStoreMBean&lt;/tt&gt; (fyi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;). Currently this results in the health check to report that: &quot;Intra-cluster test n/a (No DocumentNodeStore MBean found) &quot; - ie it goes rather unnoticed and effectively the health-check is disabled. So we need to adjust the query in SynchronizedClocksHealthCheck.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936342">SLING-5480</key>
            <summary>Change in JMX names (OAK-3477) breaks discovery.oak&apos;s SynchronizedClocksHealthCheck</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2016 14:17:02 +0000</created>
                <updated>Mon, 8 Feb 2016 09:51:52 +0000</updated>
                            <resolved>Wed, 3 Feb 2016 15:34:36 +0000</resolved>
                                    <version>Discovery Oak 1.2.4</version>
                                    <fixVersion>Discovery Oak 1.2.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15130528" author="egli" created="Wed, 3 Feb 2016 15:06:36 +0000"  >&lt;p&gt;done in rev 1728328&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12902618">OAK-3477</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2scvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5475] JcrResourceProviderFactory dependency to NodeObserver fails in oak trunk</title>
                <link>https://issues.apache.org/jira/browse/SLING-5475</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3842&quot; title=&quot;Adjust package export declarations &quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3842&quot;&gt;&lt;del&gt;OAK-3842&lt;/del&gt;&lt;/a&gt; a fair number of oak packages have gotten their export version reset to 0.0.0 instead of exporting a particular version (as that package is not meant to be a stable API just yet).&lt;/p&gt;

&lt;p&gt;One consequence of this change is that JcrResourceProviderFactory now fails with a NoClassDefFoundError as it has as import dependency &lt;tt&gt;org.apache.jackrabbit.oak.plugins.observation; resolution:=optional; version=&quot;[2.0, 3)&quot;&lt;/tt&gt; while that is now exported as &lt;tt&gt;0.0.0&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Not sure if we have to do much or of this gets fixed automagically when we&apos;re releasing a new jcr.resource bundle (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, wdyt?).&lt;/p&gt;

&lt;p&gt;Here&apos;s the details of the exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;02.02.2016 11:02:55.098 *ERROR* [FelixStartLevel] org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProviderFactory Unable to instantiate improved JCR Resource listener &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Oak. Using fallback.
java.lang.NoClassDefFoundError: org/apache/jackrabbit/oak/plugins/observation/NodeObserver
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass1(Native Method)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:800)
        at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.defineClass(BundleWiringImpl.java:2370)
        at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.findClass(BundleWiringImpl.java:2154)
        at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1542)
        at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:79)
        at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2018)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:358)
        at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProviderFactory.activate(JcrResourceProviderFactory.java:159)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)
        at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)
        at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)
        at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)
        at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:295)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:302)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:113)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:866)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:833)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:774)
        at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:347)
        at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
        at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:344)
        at org.apache.felix.framework.Felix.getService(Felix.java:3699)
        at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470)
        at org.apache.felix.scr.impl.manager.SingleRefPair.getServiceObject(SingleRefPair.java:72)
        at org.apache.felix.scr.impl.helper.BindMethod.getServiceObject(BindMethod.java:646)
        at org.apache.felix.scr.impl.manager.DependencyManager.getServiceObject(DependencyManager.java:2137)
        at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.prebind(DependencyManager.java:389)
        at org.apache.felix.scr.impl.manager.DependencyManager.prebind(DependencyManager.java:1457)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.collectDependencies(AbstractComponentManager.java:983)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:812)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:724)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:954)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:915)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
        at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)
        at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)
        at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)
        at org.apache.felix.framework.Felix.registerService(Felix.java:3549)
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)
        at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:399)
        at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:676)
        at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:339)
        at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:360)
        at org.apache.felix.scr.impl.Activator.access$000(Activator.java:53)
        at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:260)
        at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
        at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
        at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
        at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
        at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
        at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
        at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)
        at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:517)
        at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4541)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:2172)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1371)
        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.lang.ClassNotFoundException: org.apache.jackrabbit.oak.plugins.observation.NodeObserver not found by org.apache.sling.jcr.resource [121]
        at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1574)
        at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:79)
        at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2018)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:358)
        ... 75 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12935924">SLING-5475</key>
            <summary>JcrResourceProviderFactory dependency to NodeObserver fails in oak trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2016 10:29:58 +0000</created>
                <updated>Thu, 26 Sep 2019 12:40:37 +0000</updated>
                            <resolved>Tue, 2 Feb 2016 15:17:38 +0000</resolved>
                                    <version>JCR Resource 2.5.6</version>
                                    <fixVersion>JCR Resource 2.7.0</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15128175" author="egli" created="Tue, 2 Feb 2016 12:31:36 +0000"  >&lt;p&gt;Ah, you probably have to increase the dependency on oak-core to 1.3.15 (which will yet be released one of the next days)&lt;/p&gt;</comment>
                            <comment id="15128265" author="rombert" created="Tue, 2 Feb 2016 13:47:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; - so this does not &lt;em&gt;yet&lt;/em&gt; fail, right? It will only fail against a 1.4-SNAPSHOT Oak.&lt;/p&gt;

&lt;p&gt;Do you have a list of Oak packages which are now exporter as &lt;tt&gt;0.0.0&lt;/tt&gt;? I would suggest importing them outright without any version, which allows us to fix before Oak 1.3.15 is released and not delay the current release.&lt;/p&gt;</comment>
                            <comment id="15128268" author="egli" created="Tue, 2 Feb 2016 13:52:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;so this does not yet fail, right? It will only fail against a 1.4-SNAPSHOT Oak.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;exactly.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do you have a list of Oak packages which are now exporter as 0.0.0?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t have that - but it could be created perhaps by starting oak in a launchpad/quickstart?&lt;/p&gt;</comment>
                            <comment id="15128281" author="cziegeler" created="Tue, 2 Feb 2016 14:06:09 +0000"  >&lt;p&gt;Maybe we should simply hard code the package import in the pom, this removes the requirement to udpate to a new oak core&lt;/p&gt;</comment>
                            <comment id="15128325" author="kwin" created="Tue, 2 Feb 2016 14:36:27 +0000"  >&lt;p&gt;In terms of backwards compatibility this makes it once again compatible with Oak 1.2 IMHO (&lt;a href=&quot;http://www.mail-archive.com/dev%40sling.apache.org/msg49385.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev%40sling.apache.org/msg49385.html&lt;/a&gt;). For that to work the version must be fixed to 0 (because that implicitly would cover the version range [0.0.0,&#8734;))&lt;/p&gt;</comment>
                            <comment id="15128354" author="rombert" created="Tue, 2 Feb 2016 14:52:09 +0000"  >&lt;p&gt;Yup, that was what I suggested as well in my previous comment. I&apos;ll give it a shot now.&lt;/p&gt;</comment>
                            <comment id="15128390" author="rombert" created="Tue, 2 Feb 2016 15:17:52 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1728145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1728145&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12928039">OAK-3842</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sabj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5473] Improve parallelism of package acquire/release</title>
                <link>https://issues.apache.org/jira/browse/SLING-5473</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We should not use locks when acquiring/releasing packages&lt;/p&gt;</description>
                <environment></environment>
        <key id="12935638">SLING-5473</key>
            <summary>Improve parallelism of package acquire/release</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2016 15:14:38 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:44 +0000</updated>
                            <resolved>Mon, 1 Feb 2016 15:36:56 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.14</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15126404" author="mpetria" created="Mon, 1 Feb 2016 15:36:56 +0000"  >&lt;p&gt;Committed revision 1727953.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s8jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5472] Some distribution packages are leaked because delete is called on closed objects</title>
                <link>https://issues.apache.org/jira/browse/SLING-5472</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12935625">SLING-5472</key>
            <summary>Some distribution packages are leaked because delete is called on closed objects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2016 14:07:15 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:47 +0000</updated>
                            <resolved>Mon, 1 Feb 2016 14:09:54 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.14</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15126276" author="mpetria" created="Mon, 1 Feb 2016 14:09:54 +0000"  >&lt;p&gt;Committed revision 1727938.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s8h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5471] Sightly error in terminal: RHINO USAGE WARNING: Missed Context.javaToJS() conversion</title>
                <link>https://issues.apache.org/jira/browse/SLING-5471</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I often see the following error in the terminal:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;RHINO USAGE WARNING: Missed Context.javaToJS() conversion:
Rhino runtime detected object java.util.GregorianCalendar[time=1434664044399,areFieldsSet=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,areAllFieldsSet=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,lenient=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,zone=sun.util.calendar.ZoneInfo[id=&lt;span class=&quot;code-quote&quot;&gt;&quot;GMT-07:00&quot;&lt;/span&gt;,offset=-25200000,dstSavings=0,useDaylight=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,transitions=0,lastRule=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2015,MONTH=5,WEEK_OF_YEAR=25,WEEK_OF_MONTH=3,DAY_OF_MONTH=18,DAY_OF_YEAR=169,DAY_OF_WEEK=5,DAY_OF_WEEK_IN_MONTH=3,AM_PM=1,HOUR=2,HOUR_OF_DAY=14,MINUTE=47,SECOND=24,MILLISECOND=399,ZONE_OFFSET=-25200000,DST_OFFSET=0] of &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;java.util.GregorianCalendar where it expected &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; or Scriptable instance. Please check your code &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; missing Context.javaToJS() call.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think it happens for if statements. Attached is a stack. Please let me know if you need more information.&lt;/p&gt;</description>
                <environment>Mac</environment>
        <key id="12935584">SLING-5471</key>
            <summary>Sightly error in terminal: RHINO USAGE WARNING: Missed Context.javaToJS() conversion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joelrich">Joel Richard</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Feb 2016 10:27:36 +0000</created>
                <updated>Tue, 2 Feb 2016 16:11:09 +0000</updated>
                            <resolved>Tue, 2 Feb 2016 14:20:23 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.10</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15128304" author="radu.cotescu" created="Tue, 2 Feb 2016 14:20:03 +0000"  >&lt;p&gt;After an offline chat with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joelrich&quot; class=&quot;user-hover&quot; rel=&quot;joelrich&quot;&gt;joelrich&lt;/a&gt; we identified that this issue manifests in an AEM application. The debugging showed that these errors were logged by Rhino when client code (e.g. JavaScript Use objects) was performing comparisons between Java Calendar objects and JavaScript native objects.&lt;/p&gt;</comment>
                            <comment id="15128441" author="joelrich" created="Tue, 2 Feb 2016 15:57:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;, thanks for looking into it. However, even if the comparison doesn&apos;t make sense, I don&apos;t think that a warning should be logged/printed on the terminal. Don&apos;t you think so?&lt;/p&gt;</comment>
                            <comment id="15128459" author="radu.cotescu" created="Tue, 2 Feb 2016 16:11:09 +0000"  >&lt;p&gt;That&apos;s a Rhino internal and I&apos;m afraid there&apos;s nothing more we can do at Sling level. In the Sightly JS Use Provider we execute client code over which we have no control.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12785488" name="Screen Shot 2016-02-01 at 11.14.07.png" size="267899" author="joelrich" created="Mon, 1 Feb 2016 10:28:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s87z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5470] Resource providers might not be closed</title>
                <link>https://issues.apache.org/jira/browse/SLING-5470</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The CommonResourceResolverFactoryImpl contains some code to make sure that all resource resolvers (and therefore the providers) are closed - as soon as there is no reference to them anymore&lt;br/&gt;
With the refactoring to the new provider API, this functionality has been removed - while the resource resolver context is still closed, the providers are not closed (logged out)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12935450">SLING-5470</key>
            <summary>Resource providers might not be closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Sun, 31 Jan 2016 18:19:26 +0000</created>
                <updated>Mon, 8 Feb 2016 22:12:14 +0000</updated>
                            <resolved>Fri, 5 Feb 2016 10:51:02 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.4.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15125446" author="cziegeler" created="Sun, 31 Jan 2016 18:35:07 +0000"  >&lt;p&gt;Solved by merging the CombinedResourceProvider into the ResourceResolverContext&lt;/p&gt;</comment>
                            <comment id="15125448" author="cziegeler" created="Sun, 31 Jan 2016 18:35:43 +0000"  >&lt;p&gt;The ResourceResolverContext should not hold a reference to the ResourceResolver - same is true for the components referenced by the ResourceResolverContext&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s7e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5468] Resource Merger: Provide a way to completely replace the underlying resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-5468</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently whenever the mount point of the &lt;tt&gt;MergingResourcePicker&lt;/tt&gt; (/mnt/overlay) or &lt;tt&gt;OverridingResourcePicker&lt;/tt&gt; (/mnt/override) is used, the merging always takes place. It is only possible to hide/modify individual resource/properties of the underlying resources but not to completely disable the inheritance (and by that replace the whole overriden/overlaid resource).&lt;/p&gt;

&lt;p&gt;A concrete usecase for that is in a CMS (e.g. AEM) where the dialog definitions are always loaded via /mnt/override/&amp;lt;resource type&amp;gt;. In that case it is not easily possible to completely replace the dialog of the resource super type (as only individual child resources or properties can be hidden but there is no special property to ignore the inherited resource alltogether).&lt;/p&gt;

&lt;p&gt;I propose the following:&lt;br/&gt;
Add a new property &lt;tt&gt;sling:disregardInheritedResource=true&lt;/tt&gt; in which case all the inherited resources would not be taken into account for merging.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12935096">SLING-5468</key>
            <summary>Resource Merger: Provide a way to completely replace the underlying resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jan 2016 12:31:52 +0000</created>
                <updated>Thu, 25 Jul 2024 08:21:41 +0000</updated>
                            <resolved>Fri, 12 Feb 2016 09:46:36 +0000</resolved>
                                    <version>Resource Merger 1.2.10</version>
                                    <fixVersion>Resource Merger 1.3.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15123434" author="kwin" created="Fri, 29 Jan 2016 12:47:57 +0000"  >&lt;p&gt;Maybe the property &lt;tt&gt;sling:replaceUnderlyingResource=true&lt;/tt&gt; would be a better name to enable that functionality.&lt;/p&gt;</comment>
                            <comment id="15123682" author="jsedding" created="Fri, 29 Jan 2016 16:22:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; can the same not be achieved by setting &lt;tt&gt;sling:hideProperties=&amp;#42;&lt;/tt&gt; and &lt;tt&gt;sling:hideChildren=&amp;#42;&lt;/tt&gt; on the node (e.g. dialog definition?)&lt;/p&gt;</comment>
                            <comment id="15123687" author="kwin" created="Fri, 29 Jan 2016 16:25:03 +0000"  >&lt;p&gt;No, as that will also hide the properties/children of my own resource (not only the ones of the underlying resource). Once I set those in my dialog definition the dialog definition is empty!&lt;/p&gt;</comment>
                            <comment id="15123715" author="jsedding" created="Fri, 29 Jan 2016 16:36:56 +0000"  >&lt;p&gt;Oh, that is rather unfortunate. Does such a behaviour make sense at all? I would have expected the &lt;tt&gt;sling:hide*&lt;/tt&gt; properties to only apply to the inherited resources.&lt;/p&gt;</comment>
                            <comment id="15123716" author="kwin" created="Fri, 29 Jan 2016 16:39:24 +0000"  >&lt;p&gt;For me that that doesn&apos;t make much sense either, but there is nowhere documentation about this.&lt;/p&gt;</comment>
                            <comment id="15123732" author="jsedding" created="Fri, 29 Jan 2016 16:44:46 +0000"  >&lt;p&gt;Maybe you can start a discussion on the list? I think this may be a bug.&lt;/p&gt;</comment>
                            <comment id="15123805" author="kwin" created="Fri, 29 Jan 2016 17:15:57 +0000"  >&lt;p&gt;Yes, I started the discussion in &lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg53648.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg53648.html&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15128878" author="radu.cotescu" created="Tue, 2 Feb 2016 19:43:54 +0000"  >&lt;p&gt;Doesn&apos;t this issue somehow duplicate &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5460&quot; title=&quot;Allow skipping resource merges in the Sling Resource Merger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5460&quot;&gt;&lt;del&gt;SLING-5460&lt;/del&gt;&lt;/a&gt;? I didn&apos;t want to explicitly refer to AEM&apos;s Touch UI dialogs, but that&apos;s obviously one of the main use cases.&lt;/p&gt;</comment>
                            <comment id="15129988" author="kwin" created="Wed, 3 Feb 2016 07:58:32 +0000"  >&lt;p&gt;Indeed it is. I close that one as a duplicate (because this issue contains more information about the star value probably being wrongly implemented).&lt;/p&gt;</comment>
                            <comment id="15140725" author="kwin" created="Wed, 10 Feb 2016 12:53:43 +0000"  >&lt;p&gt;Attached is a patch which fixes both &lt;tt&gt;sling:hideProperties&lt;/tt&gt; as well as &lt;tt&gt;sling:hideResources&lt;/tt&gt; to only act on underlying resources (but no longer on local resources).&lt;br/&gt;
I also created a new unit test (independent from the actual picker implementation) to test this common functionality of the resource merger.&lt;br/&gt;
Also I renamed the tests for both pickers: &lt;br/&gt;
&lt;tt&gt;MergedResourceProviderTest&lt;/tt&gt; -&amp;gt; &lt;tt&gt;MergedResourceProviderTestForMergingPicker&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;OverridingResourceProviderTest&lt;/tt&gt; -&amp;gt; &lt;tt&gt;MergedResourceProviderTestForOverridingPicker&lt;/tt&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; Would you mind having a look before I commit it?&lt;/p&gt;</comment>
                            <comment id="15140827" author="cziegeler" created="Wed, 10 Feb 2016 14:11:49 +0000"  >&lt;p&gt;Afaik the hide properties should also work on the local resource - at least if I remember it correctly.&lt;br/&gt;
I can&apos;t comment on the patch in detail as I&apos;m not really familiar with how this thing should work and what the impact of the patch is.&lt;/p&gt;</comment>
                            <comment id="15140837" author="kwin" created="Wed, 10 Feb 2016 14:16:10 +0000"  >&lt;p&gt;Could you come up with a use case for hiding a local resource? I asked in &lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg53648.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg53648.html&lt;/a&gt; and I didn&apos;t receive any feedback. If there is a convincing use case for hiding a local resource, we must invent some other mechanism to completely replace the underlying resource.&lt;/p&gt;</comment>
                            <comment id="15140936" author="cziegeler" created="Wed, 10 Feb 2016 15:02:54 +0000"  >&lt;p&gt;I don&apos;t know...but this is definitely a change in behaviour so I&apos;m a little bit reluctant to have this changed by default&lt;/p&gt;</comment>
                            <comment id="15140940" author="jsedding" created="Wed, 10 Feb 2016 15:05:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I am in the same position as Carsten, I don&apos;t know the code.&lt;/p&gt;

&lt;p&gt;Anyway, a few comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I like separating &lt;tt&gt;CommonMergedResourceProviderTest&lt;/tt&gt; from the Picker implementations. The separation of concerns makes it easier to follow.&lt;/li&gt;
	&lt;li&gt;I noticed one occasion in the &lt;tt&gt;CommonMergedResourceProviderTest&lt;/tt&gt; where it says &lt;tt&gt;relativePath != &quot;/&quot;&lt;/tt&gt;. This is never false.&lt;/li&gt;
	&lt;li&gt;Maybe having three levels of overlayed resources in &lt;tt&gt;CommonMergedResourceProviderTest&lt;/tt&gt; would be good. Only two levels can easily work while three may already fail. (Not claiming that it does fail! However, adding the extra test coverage should be easy now).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15140961" author="kwin" created="Wed, 10 Feb 2016 15:16:25 +0000"  >&lt;p&gt;My point from &lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg53814.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg53814.html&lt;/a&gt; was that if you are able to hide the local property through setting the property &lt;tt&gt;sling:hideProperties&lt;/tt&gt; you can also just not set the property you want to hide on the local resource in the first place. &lt;br/&gt;
This would always be feasible except for the case where that property would be used for resource merging itself. This is only the case for &lt;tt&gt;sling:resourceSuperType&lt;/tt&gt; so far (for the overriding picker).&lt;/p&gt;

&lt;p&gt;You are right though that this is a change in behaviour, but I would argue if someone would have relied on that IMHO buggy behaviour he can&lt;br/&gt;
a) easily fix that&lt;br/&gt;
b) should not have done so in the first place&lt;/p&gt;

&lt;p&gt;The problem really is that there is no documentation really stating how it was supposed to work, but I think I clearly stated that currently we have a convincing use case for changing the behaviour -&amp;gt; disabling inheritance, while on the other hand we only have a hardly convincing use case for keeping the behaviour as is (hiding the resource super type in case you are using the overriding picker).&lt;/p&gt;

&lt;p&gt;Would you prefer introducing another special property instead to disable inheritance?&lt;/p&gt;</comment>
                            <comment id="15140975" author="kwin" created="Wed, 10 Feb 2016 15:22:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; for the review. Regarding your feedback.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I noticed one occasion in the CommonMergedResourceProviderTest where it says relativePath != &quot;/&quot;. This is never false.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That is a mistake in the code I am gonna fix. That basic picker should only provide something directly on the mount point but not somewhere below! So the check must rather be &lt;tt&gt;if (relativePath.isEmpty())&lt;/tt&gt;. Thanks for spotting it.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Maybe having three levels of overlayed resources in CommonMergedResourceProviderTest would be good. Only two levels can easily work while three may already fail. (Not claiming that it does fail! However, adding the extra test coverage should be easy now).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree but this is not strictly necessary for the change I introduced. We can easily add that later, once this is committed.&lt;/p&gt;</comment>
                            <comment id="15140976" author="cziegeler" created="Wed, 10 Feb 2016 15:22:35 +0000"  >&lt;p&gt;With the reimplementation of the resource resolver, we&apos;re currently experiencing failures where the API was used in a way we never imagined - and now this strange code fails with our new implementation and we have to find a balance between preserving the old behaviour and fixing bad code. Usually, if users have to fix their code we must provide a way to detect the places that need changes. With such a subtle change and having no IDE support to find the places, I think we should not change the behaviour.&lt;br/&gt;
We can deprecate the usage of sling:hideProperties and go with a new property (although deprecating is maybe not even required)&lt;/p&gt;</comment>
                            <comment id="15140993" author="kwin" created="Wed, 10 Feb 2016 15:27:17 +0000"  >&lt;p&gt;Any suggestions on how the new properties should be named then? I guess we should then recommend two different ones to replace &lt;tt&gt;sling:hideProperties&lt;/tt&gt; and &lt;tt&gt;sling:hideChildren&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15141002" author="jsedding" created="Wed, 10 Feb 2016 15:31:07 +0000"  >&lt;p&gt;Regarding the use-case vs backwards compatibility issue, I agree with Konrad that the current behaviour is weird. Adding a new property just to work around this weirdness is IMHO damaging to the clarity and simplicity of the tool.&lt;/p&gt;

&lt;p&gt;I could imagine a solution in the middle that may work:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a value of &lt;tt&gt;*&lt;/tt&gt; in &lt;tt&gt;sling:hideResources&lt;/tt&gt; or &lt;tt&gt;sling:hideProperties&lt;/tt&gt; is applied only to all underlying resources&lt;/li&gt;
	&lt;li&gt;any explicit value in &lt;tt&gt;sling:hideResources&lt;/tt&gt; or &lt;tt&gt;sling:hideProperties&lt;/tt&gt; is applied also to the top resource.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The behavioural change in this case would be limited to the &lt;tt&gt;*&lt;/tt&gt; value. Currently the following is implied (please correct me if I am wrong):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for &lt;tt&gt;sling:hideResources=&quot;*&quot;&lt;/tt&gt; the resource cannot have any children, even if they are added on the top resource&lt;/li&gt;
	&lt;li&gt;for &lt;tt&gt;sling:hideProperties=&quot;*&quot;&lt;/tt&gt; the resource cannot have any properties, even if they are added on the top resource&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;IMHO none of these scenarios make much sense. And yet, they could still be achieved by hiding all inherited children and/or properties using &lt;tt&gt;*&lt;/tt&gt; and then explicitly listing any children and/or properties of the top resource.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; WDYT? Could that be a workable &quot;middle ground&quot; solution?&lt;/p&gt;</comment>
                            <comment id="15141030" author="kwin" created="Wed, 10 Feb 2016 15:49:18 +0000"  >&lt;p&gt;That should work, although it is slightly more effort from an implementation perspective of the patch.&lt;/p&gt;</comment>
                            <comment id="15142923" author="kwin" created="Thu, 11 Feb 2016 15:54:21 +0000"  >&lt;p&gt;Attached is an updated patch implementing the proposal from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;. So hiding individual properties/children would still work locally, while the wildcard only works on underlying children/properties.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="15144325" author="kwin" created="Fri, 12 Feb 2016 09:46:36 +0000"  >&lt;p&gt;Applied a slightly modified fix in &lt;a href=&quot;http://svn.apache.org/r1729965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1729965&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12934436">SLING-5460</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13586674">SLING-12391</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13079438">SLING-6951</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12787250" name="SLING-5468-v1.patch" size="40043" author="kwin" created="Wed, 10 Feb 2016 12:53:43 +0000"/>
                            <attachment id="12787484" name="SLING-5468-v2.patch" size="50592" author="kwin" created="Thu, 11 Feb 2016 15:54:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s57j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5467] Sling Event - CleanUpTask wrongly marks folders</title>
                <link>https://issues.apache.org/jira/browse/SLING-5467</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The HistoryCleanUpTask has to remove all Jobs stored in the JCR older than the given parameter &lt;tt&gt;age&lt;/tt&gt; (a number of minutes).&lt;br/&gt;
The current implementation traverses the &lt;em&gt;/var/eventing/jobs&lt;/em&gt; tree where parts of the path define the date of a job. Problem: the comparison of the job- and &lt;tt&gt;removeDate&lt;/tt&gt; is wrong. First it compares the years, than months, weeks and days but this doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;I&apos;ve forked the project on github and wrote a test and fix. Further I added a test dependency for sling-mock in the pom.xml: &lt;a href=&quot;https://github.com/cnagel/sling/commit/165a8a04a129a4669599c6b15f48f67060e6c83c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Fixes HistoryCleanUpTask date comparison&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Please have a look and if you like I can create a pull request on GitHub.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12935037">SLING-5467</key>
            <summary>Sling Event - CleanUpTask wrongly marks folders</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cnagel">Christoph Nagel</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jan 2016 07:37:04 +0000</created>
                <updated>Wed, 20 Sep 2017 12:39:07 +0000</updated>
                            <resolved>Fri, 29 Jan 2016 07:59:21 +0000</resolved>
                                    <version>Event 4.0.0</version>
                                    <fixVersion>Event 4.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15123145" author="cziegeler" created="Fri, 29 Jan 2016 07:37:45 +0000"  >&lt;p&gt;This issue is for a similar problem in the CleanUpTask&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12929193">SLING-5422</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s4uf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5466] Pending distribution changes are lost if the  Apache Sling Distribution Agent - Sync Agents Factory configuration is changed.</title>
                <link>https://issues.apache.org/jira/browse/SLING-5466</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Using Content Distribution Core 0.1.3.r1680309 -- wasn&amp;#39;t available in the list&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;When running Sling with pending distribution changes queued for a node that is down, a change to the Sling Distribution Agent - Sync Agents Factory configuration can cause the pending changes to be distributed to the wrong Sling node.&lt;/p&gt;

&lt;p&gt;It appears that changes to be distributed to a node are assigned to a generic &quot;endpoint&quot; name (not the host, itself).  During the creation of the change nodes, the index (position) of the distribution target host in the packageExporter.endpoints OSGi configuration field is used to assign the pending changes to an endpoint named &quot;endpoint&lt;span class=&quot;error&quot;&gt;&amp;#91;n&amp;#93;&lt;/span&gt;),&quot; where &lt;span class=&quot;error&quot;&gt;&amp;#91;n&amp;#93;&lt;/span&gt; is the position of the server address packageExporter.endpoints field.  If distribution changes are queued for a host that is down AND the order of the packageExporter.endpoints is changed, which potentially causes endpoint&lt;span class=&quot;error&quot;&gt;&amp;#91;n&amp;#93;&lt;/span&gt; to represent a different host, the changes are then shipped off to the wrong host, and the original host never receives the queued changes.&lt;/p&gt;
</description>
                <environment>Windows 7 x64, AEM/CQ 6.1.0</environment>
        <key id="12934984">SLING-5466</key>
            <summary>Pending distribution changes are lost if the  Apache Sling Distribution Agent - Sync Agents Factory configuration is changed.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="jaybrown">Jay Brown</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Fri, 29 Jan 2016 01:52:51 +0000</created>
                <updated>Thu, 26 Jan 2017 14:57:15 +0000</updated>
                            <resolved>Thu, 26 Jan 2017 14:57:15 +0000</resolved>
                                    <version>Content Distribution Core 0.1.4</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15130179" author="mpetria" created="Wed, 3 Feb 2016 10:12:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jaybrown&quot; class=&quot;user-hover&quot; rel=&quot;jaybrown&quot;&gt;jaybrown&lt;/a&gt; that probably happens if the list of endpoints is changed. In order to have a stable name for your endpoint you should give it an explicit label &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;packageImporter.endpoints = [&quot;endpoint0=http://localhost:4503/....&quot;, &quot;endpoint4=http://localhost:4504/....&quot;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s4iv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5464] Regression in discovery&apos;s ViewStateManagerImpl.onlyDiffersInProperties</title>
                <link>https://issues.apache.org/jira/browse/SLING-5464</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5458&quot; title=&quot;support discovery-lite&amp;#39;s id==null (by managing the id in discovery.oak)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5458&quot;&gt;&lt;del&gt;SLING-5458&lt;/del&gt;&lt;/a&gt; a &lt;a href=&quot;https://github.com/apache/sling/commit/c89e0db578e807a6e143b3f0b8438a579507e8de&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;regression&lt;/a&gt; was introduced: a new check for differing cluster id was introduced in &lt;tt&gt;onlyDiffersInProperties&lt;/tt&gt; - but with &lt;tt&gt;!=&lt;/tt&gt; instead of &lt;tt&gt;!equals()&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934793">SLING-5464</key>
            <summary>Regression in discovery&apos;s ViewStateManagerImpl.onlyDiffersInProperties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2016 12:35:18 +0000</created>
                <updated>Thu, 4 Feb 2016 09:04:38 +0000</updated>
                            <resolved>Thu, 28 Jan 2016 12:44:57 +0000</resolved>
                                    <version>Discovery Commons 1.0.8</version>
                                    <fixVersion>Discovery Commons 1.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15121363" author="egli" created="Thu, 28 Jan 2016 12:44:57 +0000"  >&lt;p&gt;fixed in rev 1727323&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12934415">SLING-5458</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s3cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5463] GetStarTest fails with &quot;Invalid name or path&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-5463</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The GetStarTest from launchpad/integration-tests recently started failing, for example at &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;javax.jcr.RepositoryException: Invalid name or path: /GetStarTest1453972215267/* 
 at org.apache.jackrabbit.oak.jcr.session.SessionContext.getOakPathOrThrow(SessionContext.java:347)
...
 at org.apache.jackrabbit.oak.jcr.session.SessionImpl.getItemOrNull(SessionImpl.java:225)
 at org.apache.sling.jcr.resource.internal.helper.jcr.JcrItemResourceFactory.getItemOrNull(JcrItemResourceFactory.java:182)
 at org.apache.sling.jcr.resource.internal.helper.jcr.JcrItemResourceFactory.createResource(JcrItemResourceFactory.java:96)
 at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.listChildren(JcrResourceProvider.java:293)
 at org.apache.sling.resourceresolver.impl.providers.stateful.AuthenticatedResourceProvider.listChildren(AuthenticatedResourceProvider.java:175)
 at org.apache.sling.resourceresolver.impl.providers.stateful.CombinedResourceProvider.listChildren(CombinedResourceProvider.java:205)
 at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.listChildren(ResourceResolverImpl.java:719)
 at org.apache.sling.api.resource.ResourceUtil.listChildren(ResourceUtil.java:360)
...
 at org.apache.sling.servlets.get.impl.helpers.JsonRendererServlet.doGet(JsonRendererServlet.java:100)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.launchpad.testing/3252/testReport/junit/org.apache.sling.launchpad.webapp.integrationtest/GetStarTest/testGetStarJson/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.launchpad.testing/3252/testReport/junit/org.apache.sling.launchpad.webapp.integrationtest/GetStarTest/testGetStarJson/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934787">SLING-5463</key>
            <summary>GetStarTest fails with &quot;Invalid name or path&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Thu, 28 Jan 2016 12:02:32 +0000</created>
                <updated>Mon, 8 Feb 2016 22:12:48 +0000</updated>
                            <resolved>Tue, 2 Feb 2016 14:50:19 +0000</resolved>
                                                    <fixVersion>JCR Resource 2.7.0</fixVersion>
                                    <component>JCR</component>
                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15121690" author="rombert" created="Thu, 28 Jan 2016 15:26:32 +0000"  >&lt;p&gt;According to Jenkins this test started failing with &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.jcr.resource/changes?from=3239&amp;amp;to=3240&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.jcr.resource/changes?from=3239&amp;amp;to=3240&lt;/a&gt;, which is &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4585&quot; title=&quot;Performance: Use JackrabbitSession#getItemOrNull to speed up JcrResourceProvider#createResource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4585&quot;&gt;&lt;del&gt;SLING-4585&lt;/del&gt;&lt;/a&gt; / &lt;a href=&quot;https://svn.apache.org/r1726793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1726793&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joelrich&quot; class=&quot;user-hover&quot; rel=&quot;joelrich&quot;&gt;joelrich&lt;/a&gt; - since you submitted that patch, can you look and see why this test broke?&lt;/p&gt;</comment>
                            <comment id="15121720" author="joelrich" created="Thu, 28 Jan 2016 15:38:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, the reason is that createResource has returned null so far when a path was invalid. I tried to keep this behaviour, but it seems like I missed some cases. I am having a closer look at it right now.&lt;/p&gt;</comment>
                            <comment id="15121773" author="joelrich" created="Thu, 28 Jan 2016 16:00:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt;, a while ago we had a short discussion about how I can ensure that Sling&apos;s createResource with the getItemOrNull optimisation keeps behaving like the previous implementation which was using itemExists and then getItem. The difficulty was that it catched all exceptions of the first itemExists call (and returned null in this case) and did therefore never call getItem with an invalid path. The idea to ensure the same behaviour was then to check manually whether the path is an absolute path:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Item item;
        &lt;span class=&quot;code-comment&quot;&gt;// Check first &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the path is absolute. If it isn&apos;t, then we &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; because the previous itemExists method,
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// which was replaced by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; method, would have returned &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; as well (instead of throwing an exception).
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.isEmpty() || path.charAt(0) != &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;) {
            item = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
        &lt;span class=&quot;code-comment&quot;&gt;// Use fast getItemOrNull &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; session is a JackrabbitSession
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (session &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; JackrabbitSession) {
            item = ((JackrabbitSession) session).getItemOrNull(path);
        }
       ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately, this does not seem to be good enough because org.apache.jackrabbit.oak.namepath.PathMapper#getOakPath performs additional validations.&lt;/p&gt;

&lt;p&gt;Now, my question is whether there is a JCR or Jackrabbit API which allows me to perform the exact same validations but without triggering a session operation and best also without throwing an exception. Do you have an idea by chance?&lt;/p&gt;</comment>
                            <comment id="15121796" author="rombert" created="Thu, 28 Jan 2016 16:10:40 +0000"  >&lt;p&gt;For the record, my &apos;fix&apos; for continuing to test locally is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/helper/jcr/JcrItemResourceFactory.java b/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/helper/jcr/JcrItemResourceFactory.java
index d2b7f8d..b6cea63 100644
--- a/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/helper/jcr/JcrItemResourceFactory.java
+++ b/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/helper/jcr/JcrItemResourceFactory.java
@@ -174,7 +174,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JcrItemResourceFactory {
         Item item;
         &lt;span class=&quot;code-comment&quot;&gt;// Check first &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the path is absolute. If it isn&apos;t, then we &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; because the previous itemExists method,
&lt;/span&gt;         &lt;span class=&quot;code-comment&quot;&gt;// which was replaced by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; method, would have returned &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; as well (instead of throwing an exception).
&lt;/span&gt;-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.isEmpty() || path.charAt(0) != &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;) {
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.isEmpty() || path.charAt(0) != &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt; || path.contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;/*&quot;&lt;/span&gt;)) { &lt;span class=&quot;code-comment&quot;&gt;// TODO hack-just &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; testing
&lt;/span&gt;             item = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
         }
         &lt;span class=&quot;code-comment&quot;&gt;// Use fast getItemOrNull &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; session is a JackrabbitSession&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But we definitely need something else, this extra check does not really belong here.&lt;/p&gt;</comment>
                            <comment id="15124915" author="cziegeler" created="Sat, 30 Jan 2016 14:52:56 +0000"  >&lt;p&gt;The previous code (before &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4585&quot; title=&quot;Performance: Use JackrabbitSession#getItemOrNull to speed up JcrResourceProvider#createResource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4585&quot;&gt;&lt;del&gt;SLING-4585&lt;/del&gt;&lt;/a&gt;) did not call session.itemExists directly, but the following method which simply catches RepositoryException. I think we should reintroduce behaviour. However, while this is easy for the itemExists/getItem pattern, catching and ignoring the exception for getItemOrNull() might be wrong as this would mean we ignore all exceptions from there.&lt;/p&gt;

&lt;p&gt;    private boolean itemExists(final String path) {&lt;br/&gt;
        try &lt;/p&gt;
{
            return session.itemExists(path);
        }
&lt;p&gt; catch (RepositoryException re) {&lt;br/&gt;
            log.debug(&quot;itemExists: Error checking for existence of {}: {}&quot;,&lt;br/&gt;
                path, re.toString());&lt;br/&gt;
            return false;&lt;br/&gt;
        }&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="15125419" author="rombert" created="Sun, 31 Jan 2016 17:36:54 +0000"  >&lt;p&gt;Another option is for us to &apos;guess&apos; the valid paths from a JCR point of view. I can see that we have in jackrabbit-jcr-comons &lt;tt&gt;org.apache.jackrabbit.util.Text.escapeIllegalJcrChars&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; escapeIllegalJcrChars(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; escapeIllegalChars(name, &lt;span class=&quot;code-quote&quot;&gt;&quot;%/:[]*|\t\r\n&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can create, based on that, a method which checks that there are no illegal characters in a path ( &apos;/&apos; excluded from the list above) and use that in our code. We should submit it as well to jackrabbit and reuse it once we have a new Jackrabbit release.&lt;/p&gt;</comment>
                            <comment id="15125920" author="joelrich" created="Mon, 1 Feb 2016 08:15:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, that&apos;s correct. The idea of my approach was to handle all cases which would lead to a RepositoryException in itemExists before getItemOrNull is even called. Unfortunately, that seems impossible without using a session specific isValidPath() method because there can be different org.apache.jackrabbit.oak.namepath.NamePathMapper implementations. Moreover, the existing NamePathMapperImpl#getOakPath is already quite complex.&lt;/p&gt;</comment>
                            <comment id="15126134" author="cziegeler" created="Mon, 1 Feb 2016 11:24:57 +0000"  >&lt;p&gt;I think to be consistent with the JR 2 implementation, we could use Robert&apos;s approach as a start&lt;/p&gt;</comment>
                            <comment id="15126143" author="bdelacretaz" created="Mon, 1 Feb 2016 11:29:31 +0000"  >&lt;p&gt;I agree that Robert&apos;s suggestion looks reasonable.&lt;/p&gt;</comment>
                            <comment id="15126362" author="bdelacretaz" created="Mon, 1 Feb 2016 15:08:24 +0000"  >&lt;p&gt;FWIW this issue exposed a minor bug in an integration test, fixed in &lt;a href=&quot;http://svn.apache.org/r1727949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1727949&lt;/a&gt; - what happened was that a request with a doubled slash like &lt;tt&gt;&lt;a href=&quot;http://localhost:8080//tmp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080//tmp&lt;/a&gt;&lt;/tt&gt; and an Accept header set to JSON would return an HTML formatted error instead of JSON, as this issue causes it to fail deeper in the stack. No big deal but a possible side effect of this worth mentioning.&lt;/p&gt;</comment>
                            <comment id="15128017" author="anchela" created="Tue, 2 Feb 2016 10:16:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, unfortunately that doesn&apos;t work at all. as you can see this method is about {{name}}s not paths. while e.g. square brackets are not allowed in JCR name they are definitely valid in a JCR path.&lt;/p&gt;

&lt;p&gt;maybe you want to read the corresponding section of the specification:&lt;br/&gt;
&lt;a href=&quot;http://www.day.com/specs/jcr/2.0/3_Repository_Model.html#3.4%20Paths&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.day.com/specs/jcr/2.0/3_Repository_Model.html#3.4%20Paths&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;as you can see there are plenty of different paths and last but not least escaping/identifying invalid characters won&apos;t solve the problem you are experiencing (but just get &lt;em&gt;this&lt;/em&gt; very test pass). just an example: path resolution might also fail because the editing session has a local namespace remapping (figure out &quot;cq&quot; was mapped to &quot;aem&quot; just on a per session level)... consequently, every single path containing &quot;cq&quot; as namespace prefix will fail upon resolution.&lt;/p&gt;</comment>
                            <comment id="15128022" author="anchela" created="Tue, 2 Feb 2016 10:22:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, see my comment above. i am quite confident that this won&apos;t produce the expected result &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;since an invalid path should IMHO be considered an exception situation and not the &lt;em&gt;normal&lt;/em&gt;, I would treat it this way and make sure Oak throws a proper exception (subclass of &lt;tt&gt;RepositoryException&lt;/tt&gt; that would allow you distinguish an invalid path from other exceptional situations. In &lt;tt&gt;jackrabbit.spi.commons&lt;/tt&gt; we actually have that already:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;MalformedPathException&lt;/li&gt;
	&lt;li&gt;NameException&lt;/li&gt;
	&lt;li&gt;IllegalNameException&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I guess we could make those part of the official Jackrabbit API with limited effort and make sure Oak uses specific, identifiable exceptions.&lt;/p&gt;</comment>
                            <comment id="15128030" author="cziegeler" created="Tue, 2 Feb 2016 10:31:42 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;maybe then the simplest solution is to ignore the exception in all cases - with JR2 we were already doing this for itemExists, with the new getItemOrNull we would simply do the same - which means we&apos;re ignoring for now more exceptions than we should (all other errors where the path is correct), and once Oak gives us specific exceptions, we can filter for those&lt;/p&gt;</comment>
                            <comment id="15128090" author="anchela" created="Tue, 2 Feb 2016 11:25:35 +0000"  >&lt;p&gt;sounds like a plan... most probably you want to return &lt;tt&gt;null&lt;/tt&gt; for all exceptional situations in order not to break backwards compatibility. specifically dealing with invalid paths might be handy for the consumer but as far as I understood you don&apos;t reveal to the resource API consumer why a given resource is &lt;tt&gt;null&lt;/tt&gt;... so having that extra distinction might just rather be nice to have.&lt;/p&gt;</comment>
                            <comment id="15128323" author="rombert" created="Tue, 2 Feb 2016 14:36:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt; - thanks for the information, I&apos;ll drop the idea of trying to detect invalid paths.&lt;/p&gt;

&lt;p&gt;I&apos;ve noticed that there is a &lt;a href=&quot;https://github.com/apache/jackrabbit/blob/1404d55fb1d913a1e08f8b6634082184073213d1/jackrabbit-spi-commons/src/main/java/org/apache/jackrabbit/spi/commons/conversion/PathParser.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;PathParser&lt;/tt&gt;&lt;/a&gt; in jackrabbit-spi-commons with a &lt;tt&gt;checkFormat&lt;/tt&gt; method which seems to work well for our scenario.&lt;/p&gt;

&lt;p&gt;Is that something we can use, until/if we decide to improve Oak to report more specific errors when an invalid path is encountered?&lt;/p&gt;</comment>
                            <comment id="15128342" author="cziegeler" created="Tue, 2 Feb 2016 14:47:05 +0000"  >&lt;p&gt;I think for now we should just ignore the exception - returning null for all cases is probably better/more correct than throwing a runtime exception (SlingException). Checking the path results in checking the path at least twice&lt;/p&gt;</comment>
                            <comment id="15128347" author="rombert" created="Tue, 2 Feb 2016 14:49:57 +0000"  >&lt;p&gt;Agreed. Re-added the try/catch in &lt;a href=&quot;https://svn.apache.org/r1728136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1728136&lt;/a&gt;, all integration tests pass.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s3b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5462] MockServiceReference sorts in the wrong way w.r.t. service ranking</title>
                <link>https://issues.apache.org/jira/browse/SLING-5462</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;ll add tests that demonstrate that, by comparing with the sorting done by a real OSGi framework.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934769">SLING-5462</key>
            <summary>MockServiceReference sorts in the wrong way w.r.t. service ranking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2016 11:05:26 +0000</created>
                <updated>Mon, 8 Feb 2016 22:57:12 +0000</updated>
                            <resolved>Fri, 29 Jan 2016 08:11:53 +0000</resolved>
                                    <version>Testing OSGi Mock 1.7.0</version>
                    <version>Testing OSGi Mock 2.0.0</version>
                                    <fixVersion>Testing OSGi Mock 1.7.2</fixVersion>
                    <fixVersion>Testing OSGi Mock 2.0.2</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15121246" author="bdelacretaz" created="Thu, 28 Jan 2016 11:20:02 +0000"  >&lt;p&gt;I have added tests that demonstrate the issue in &lt;a href=&quot;http://svn.apache.org/r1727309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1727309&lt;/a&gt; - MockServiceReferencesSortTest (using mocks) and RealServiceReferencesSortTest (via pax exam) demonstrate the different sorting.&lt;/p&gt;

&lt;p&gt;The fix is probably simple but it might break existing tests, I&apos;ll discuss on list how to best handle this.&lt;/p&gt;</comment>
                            <comment id="15121278" author="bdelacretaz" created="Thu, 28 Jan 2016 11:57:36 +0000"  >&lt;p&gt;One test that would have to be modified is RepositoryInitializersTest &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, see the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5462&quot; title=&quot;MockServiceReference sorts in the wrong way w.r.t. service ranking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5462&quot;&gt;&lt;del&gt;SLING-5462&lt;/del&gt;&lt;/a&gt; comments in there.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/jcr/base/src/test/java/org/apache/sling/jcr/base/RepositoryInitializersTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/jcr/base/src/test/java/org/apache/sling/jcr/base/RepositoryInitializersTest.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15121369" author="kwin" created="Thu, 28 Jan 2016 12:53:17 +0000"  >&lt;p&gt;We should fix &lt;tt&gt;MockServiceReference.compareTo&lt;/tt&gt; by relying on &lt;tt&gt;ServiceUtil.getComparableForServiceRanking(properties, Order.ASCENDING)&lt;/tt&gt; internally. That way there is no need to implement the comparison somewhere else. That way we could also replace the equals and hashCode methods.&lt;/p&gt;</comment>
                            <comment id="15121487" author="kwin" created="Thu, 28 Jan 2016 13:50:17 +0000"  >&lt;p&gt;Attached is a patch which should fix the order. Unfortunately some tests are breaking now&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed tests: 
  MockBundleContextDynamicReferncesOsgiR6Test.testAddRemoveMandatoryMultipleService:135-&amp;gt;assertDependencies2:174 expected:&amp;lt;[dependency2a]&amp;gt; but was:&amp;lt;[dependency2a, dependency2b]&amp;gt;
  MockBundleContextDynamicReferncesTest.testAddRemoveMandatoryMultipleService:134-&amp;gt;assertDependencies2:160 expected:&amp;lt;[dependency2a]&amp;gt; but was:&amp;lt;[dependency2a, dependency2b]&amp;gt;
  MockBundleContextTest.testServiceRegistration:86 expected same:&amp;lt;org.apache.sling.testing.mock.osgi.MockServiceReference@346a65b0&amp;gt; was not:&amp;lt;org.apache.sling.testing.mock.osgi.MockServiceReference@84a09bec&amp;gt;
  OsgiContextImplTest.testRegisterMultipleServices:92 expected same:&amp;lt;[]&amp;gt; was not:&amp;lt;[]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Could you have a look at that?&lt;/p&gt;</comment>
                            <comment id="15121672" author="sseifert@pro-vision.de" created="Thu, 28 Jan 2016 15:19:05 +0000"  >&lt;p&gt;we should definitely fix the sorting even if it breaks existing tests (with false assumptions).&lt;/p&gt;</comment>
                            <comment id="15121787" author="sseifert@pro-vision.de" created="Thu, 28 Jan 2016 16:06:25 +0000"  >&lt;p&gt;Completed: At revision: 1727389  &lt;/p&gt;

&lt;p&gt;i&apos;ve just fixed the problem at hand without using konrads patch. the goal to reuse the logic from commons.osgi is good, but updating the dependency to such a new version is not good. usually the project using osgi-mock will use the dependency to commons.osgi itself (or probably via aem-api) overwriting the transitive dependency of the test dependency to osgi-mock, resulting in failing code.&lt;/p&gt;

&lt;p&gt;after fixing this i&apos;ve removed bertrands pax-exam example (thanks for providing it as comparison) to speed up the tests. (additionally i had problems running them on my windows machine with connection timeouts).&lt;/p&gt;</comment>
                            <comment id="15121806" author="kwin" created="Thu, 28 Jan 2016 16:15:31 +0000"  >&lt;p&gt;Actually even in version 2.2 commons.osgi contained &lt;tt&gt;getComparableForServiceRanking(final Map&amp;lt;String, Object&amp;gt; props)&lt;/tt&gt;. Would you mind reusing that one or do you want me to provide another patch? Unfortunately I am failing to see why the tests break with my patch.&lt;/p&gt;</comment>
                            <comment id="15121902" author="kwin" created="Thu, 28 Jan 2016 17:06:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Actually your implementation is still wrong as the javadoc for &lt;tt&gt;ServiceReference.compareTo(...)&lt;/tt&gt; says: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If this ServiceReference and the specified ServiceReference have the same service id they are equal. This ServiceReference is less than the specified ServiceReference if it has a lower service ranking and greater if it has a higher service ranking. Otherwise, if this ServiceReference and the specified ServiceReference have the same service ranking, this ServiceReference is less than the specified ServiceReference if it has a higher service id and greater if it has a lower service id. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Your compareTo is still wrong if the service id is equal! Please see the updated patch with commons.osgi 2.2. Still there are two tests failing, but I assume this is just the case because they are making wrong assumptions. Can you again have a look please?&lt;/p&gt;</comment>
                            <comment id="15121936" author="sseifert@pro-vision.de" created="Thu, 28 Jan 2016 17:31:27 +0000"  >&lt;p&gt;Completed: At revision: 1727409  &lt;/p&gt;

&lt;p&gt;yes, i detected the same parallel to you. i followed your proposal to rely on commons.osgi, but the old version, and corrected the false assumptions in the test. from my side it looks ok now. can you cross-check?&lt;/p&gt;</comment>
                            <comment id="15121942" author="sseifert@pro-vision.de" created="Thu, 28 Jan 2016 17:36:47 +0000"  >&lt;p&gt;Completed: At revision: 1727411  &lt;/p&gt;

&lt;p&gt;backported to osgi-mock 1.x as well&lt;/p&gt;</comment>
                            <comment id="15123160" author="kwin" created="Fri, 29 Jan 2016 07:59:05 +0000"  >&lt;p&gt;LGTM now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12784924" name="SLING-5462-v01-failing-test.patch" size="6723" author="kwin" created="Thu, 28 Jan 2016 13:50:17 +0000"/>
                            <attachment id="12784976" name="SLING-5462-v02-failing-test.patch" size="5768" author="kwin" created="Thu, 28 Jan 2016 17:07:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s373:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5461] Sightly quotes all markup attributes&apos; values with double quotes</title>
                <link>https://issues.apache.org/jira/browse/SLING-5461</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Irrespective of how HTML attributes are quoted in a Sightly script, the resulting output will always use double quotes (&lt;tt&gt;&quot;&lt;/tt&gt;), which will break attributes that have been defined in the script to use single quotes (&lt;tt&gt;&apos;&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;This issue affects developers who would like to define JSON structures in &lt;tt&gt;data-&lt;/tt&gt; attributes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934727">SLING-5461</key>
            <summary>Sightly quotes all markup attributes&apos; values with double quotes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2016 08:38:52 +0000</created>
                <updated>Fri, 10 Jun 2016 09:58:12 +0000</updated>
                            <resolved>Thu, 28 Jan 2016 13:46:53 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.0</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.12</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15121479" author="radu.cotescu" created="Thu, 28 Jan 2016 13:46:53 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1727349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1727349&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15320241" author="kwin" created="Wed, 8 Jun 2016 08:29:56 +0000"  >&lt;p&gt;The problem why this is really crucial is that Sightly also does incorrectly escape. So while&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;div data-foo=&lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;key1&quot;&lt;/span&gt;: { &lt;span class=&quot;code-quote&quot;&gt;&quot;subobject&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt; } }&apos;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is correctly converted to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;div data-foo=&lt;span class=&quot;code-quote&quot;&gt;&quot;{&amp;amp;quot;key1&amp;amp;quot;: { &amp;amp;quot;subobject&amp;amp;quot;: &amp;amp;quot;test&amp;amp;quot; } }&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(before this fix was applied),&lt;/p&gt;

&lt;p&gt;an attribute containing an expression is not correctly escaped. &lt;br/&gt;
So this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;div data-bar=&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;${currentPage.title}&quot;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;becomes invalid HTML&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;div data-bar=&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt;key&lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt;&amp;lt;whatever value $currentPage.title resolves to&amp;gt;&lt;span class=&quot;code-quote&quot;&gt;&quot; }&quot;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Do you want me open a separate bug for this? So far I only reproduced with &quot;Sightly Engine 1.0.2&quot;.&lt;/p&gt;</comment>
                            <comment id="15324161" author="radu.cotescu" created="Fri, 10 Jun 2016 09:58:12 +0000"  >&lt;p&gt;Please open a separate issue (as this one is closed) and try to reproduce it with Sightly &amp;gt;= 1.0.12.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s2xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5460] Allow skipping resource merges in the Sling Resource Merger</title>
                <link>https://issues.apache.org/jira/browse/SLING-5460</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Assuming there are two components A and B, where B inherits / overlays A, either through &lt;tt&gt;sling:resourceSuperType&lt;/tt&gt; or through regular search path overlay, there&apos;s no way to define in B that some content trees should not be merged, if B is obtained through the Resource Merger.&lt;/p&gt;

&lt;p&gt;A property like &lt;tt&gt;sling:skipMerging&lt;/tt&gt; would make sense, which should be added to the child resource in order for it not to inherit anything from the parent.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934436">SLING-5460</key>
            <summary>Allow skipping resource merges in the Sling Resource Merger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jan 2016 13:01:23 +0000</created>
                <updated>Wed, 10 Feb 2016 15:24:34 +0000</updated>
                            <resolved>Wed, 3 Feb 2016 07:58:56 +0000</resolved>
                                    <version>Resource Merger 1.2.10</version>
                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12935096">SLING-5468</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s153:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5457] OsgiInstaller should retry to start bundles on failures</title>
                <link>https://issues.apache.org/jira/browse/SLING-5457</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The OsgiInstaller doesn&apos;t update a bundle properly, if there&apos;s an exception from the framework.&lt;/p&gt;

&lt;p&gt;I have this exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;11.12.2015 14:09:36.753 *INFO* [FelixStartLevel] my.custom.bundle BundleEvent RESOLVED
11.12.2015 14:09:36.753 *INFO* [FelixStartLevel] my.custom.bundle BundleEvent STARTING

11.12.2015 14:09:36.754 INFO [OsgiInstallerImpl] org.apache.sling.installer.core.impl.tasks.BundleUpdateTask Removing failing update task - unable to retry: BundleUpdateTask: TaskResource(url=jcrinstall:/apps/myapp/install/my.custom.bundle-1.5.6-SNAPSHOT.jar, entity=bundle:my.custom.bundle, state=INSTALL, attributes=[org.apache.sling.installer.api.tasks.ResourceTransformer=:28:84:15:, Bundle-SymbolicName=my.custom.bundle, Bundle-Version=1.5.6-SNAPSHOT], digest=1449838063263)
org.osgi.framework.BundleException: Bundle my.custom.bundle [252] cannot be update, since it is either starting or stopping.
at org.apache.felix.framework.Felix.updateBundle(Felix.java:2311)
at org.apache.felix.framework.BundleImpl.update(BundleImpl.java:995)
at org.apache.sling.installer.core.impl.tasks.BundleUpdateTask.execute(BundleUpdateTask.java:92)
at org.apache.sling.installer.core.impl.OsgiInstallerImpl.doExecuteTasks(OsgiInstallerImpl.java:847)
at org.apache.sling.installer.core.impl.OsgiInstallerImpl.executeTasks(OsgiInstallerImpl.java:689)
at org.apache.sling.installer.core.impl.OsgiInstallerImpl.run(OsgiInstallerImpl.java:265)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:767)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t know for what reason the Felix.updateBundle() failed (see also &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5138&quot; title=&quot;Felix should log underlying exception on failed bundle update&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5138&quot;&gt;&lt;del&gt;FELIX-5138&lt;/del&gt;&lt;/a&gt; to get some more information in this case), but from my point of view there should be a dedicated error handling just for the &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;BundleImpl.update&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; call. Does it make sense to retry the installation at a later point in time (maybe 3 times at max)?&lt;/p&gt;

&lt;p&gt;(I got this exception when I deployed a large number of bundles through the JCR installer. It happens only once in a while, but it&apos;s an annoying task to fix it manually.)&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12934378">SLING-5457</key>
            <summary>OsgiInstaller should retry to start bundles on failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jan 2016 09:55:33 +0000</created>
                <updated>Fri, 17 Feb 2017 14:25:46 +0000</updated>
                            <resolved>Wed, 15 Feb 2017 23:20:29 +0000</resolved>
                                    <version>Installer Core 3.6.4</version>
                                    <fixVersion>Installer Core 3.8.6</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15118976" author="bdelacretaz" created="Wed, 27 Jan 2016 10:13:09 +0000"  >&lt;p&gt;Are all your failures &quot;cannot be update, since it is either starting or stopping&quot; ? &lt;/p&gt;

&lt;p&gt;If yes I wonder if the installer should verify that the bundle is actually stopped before updating it. I suspect what happens is that the bundle takes some time to stop, and then it&apos;s correct to reject its update until it&apos;s stopped, to avoid an inconsistent state.&lt;/p&gt;</comment>
                            <comment id="15119047" author="joerghoh" created="Wed, 27 Jan 2016 11:04:30 +0000"  >&lt;p&gt;I&apos;ve seen this problem twice and an in both cases it&apos;s this exception. &lt;/p&gt;</comment>
                            <comment id="15119059" author="bdelacretaz" created="Wed, 27 Jan 2016 11:12:36 +0000"  >&lt;p&gt;Ok so I suggest investigating in more detail what the installer does to the bundle before updating it - it&apos;s probably stopping it and not waiting for the actual state to be &quot;stopped&quot;.&lt;/p&gt;</comment>
                            <comment id="15122252" author="joerghoh" created="Thu, 28 Jan 2016 20:15:09 +0000"  >

&lt;p&gt;For me this looks like a racecondition, because it is no locking to prevent that someone else is starting the bundle again after having it stopped here.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;BundleUpdateTask.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 86             &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; state = b.getState();
 87             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (state == Bundle.ACTIVE || state == Bundle.STARTING) {
 88                 b.stop();
 89             }
 90
 91             &lt;span class=&quot;code-comment&quot;&gt;// update bundle
&lt;/span&gt; 92             b.update(getResource().getInputStream());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In my case there is another thread which is activly starting bundles. &lt;/p&gt;</comment>
                            <comment id="15123064" author="cziegeler" created="Fri, 29 Jan 2016 06:34:35 +0000"  >&lt;p&gt;I&apos;m not sure if we really should handle the case if there is more than one tool doing similar stuff at the same time. There is no way that the OSGi installer can detect that someone else is doing bundle actions as well.&lt;br/&gt;
There is no way to enforce a locking to have an atomic stop/update operation.&lt;br/&gt;
We could maybe catch the exception and retry the operation. However I don&apos;t think that is really going to work in all cases as your other thread might simply start the bundle again.&lt;/p&gt;</comment>
                            <comment id="15134185" author="joerghoh" created="Fri, 5 Feb 2016 13:43:21 +0000"  >&lt;p&gt;Is there a way to actually detect this situation automatically and force a restart of this functionality? At the moment we need to detect these situations manually and re-install the affected bundle again. This is something which prevents us from automating the deployment processes.&lt;/p&gt;</comment>
                            <comment id="15219676" author="cziegeler" created="Thu, 31 Mar 2016 09:42:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jhoh&quot; class=&quot;user-hover&quot; rel=&quot;jhoh&quot;&gt;jhoh&lt;/a&gt; The installer supports listening to it&apos;s actions via the InstallationListener interface. Maybe you can register such a listener and &quot;the other thread activating bundles&quot; only acts if the installer is not doing stuff?&lt;/p&gt;</comment>
                            <comment id="15219706" author="joerghoh" created="Thu, 31 Mar 2016 10:11:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; thanks for the idea, I will give it a try&lt;/p&gt;</comment>
                            <comment id="15329479" author="dsuess" created="Tue, 14 Jun 2016 13:18:26 +0000"  >&lt;p&gt;Issue reappeared randomly on some automated install tests - from looking at the code base it looks like the osgi installer doesn&apos;t take into account that the framework expects the bundle to be stopped and not stopping when updating. The stop command directly before executing the  update command might not have enough time to stop the bundle. I therefore would also vote for retrying multiple times and logging an ERROR when this does not resolve the issue. The fact that this is only logged as INFO did hide the existence of an issue and might lead to subtle effects when the failed bundles where not bumping the major version.&lt;/p&gt;</comment>
                            <comment id="15329518" author="cziegeler" created="Tue, 14 Jun 2016 13:42:44 +0000"  >&lt;p&gt;Bundle.stop is synchronous&lt;/p&gt;</comment>
                            <comment id="15594506" author="kwin" created="Fri, 21 Oct 2016 08:48:39 +0000"  >&lt;p&gt;I proposed a retry solution in &lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg60947.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg60947.html&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15858099" author="karlpauls" created="Wed, 8 Feb 2017 15:03:44 +0000"  >&lt;p&gt;I think I can see what is going on namely, while the installer is active there is a start level change going on at the same time and the two are racing for the same bundle.&lt;/p&gt;

&lt;p&gt;That makes it so that sometimes the interaction is:&lt;br/&gt;
Bundle: ACTIVE&lt;br/&gt;
Installer: stop bundle&lt;br/&gt;
Bundle: STOPPED&lt;br/&gt;
Startlevel: start bundle&lt;br/&gt;
Bundle: STARTING&lt;br/&gt;
Installer: update bundle&lt;br/&gt;
Exception: bundle STARTING&lt;br/&gt;
Bundle: ACTIVE&lt;/p&gt;

&lt;p&gt;In reality, this can be generalised to any two management agents racing for the same bundle in this sequence. The bundle update isn&#8217;t trying to wait for a bundle that is in the STOPPING or STARTING state. Instead, as mentioned in the issue, an exception is thrown and I think that is actually a bug in Felix (technically, its more a missing feature but that is besides the point) as newer versions of the spec mandate that on an update the framework should wait for bundles that are STOPPING or STARTING - hence, the real fix for this issue is to implement that behaviour in the Felix framework.&lt;/p&gt;

&lt;p&gt;However, additionally, I think that this specific interaction with the start level change and the installer is somewhat unfortunate. It probably would be worthwhile for the installer to try to only be active when there is no start level change going on (I remember that there was some other bug report on the sling dev list recently that I suspect might be related to this interaction).&lt;/p&gt;

&lt;p&gt;Implementing a retry as proposed here should be ok as a short term bandaid. Ultimatly, I&#8217;d say this should be addressed by an improved Felix framework and possibly a better handling of start level changes by the installer.&lt;/p&gt;

&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5528&quot; title=&quot;Improve handing of bundle updates concurrent to other lifecycle changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5528&quot;&gt;&lt;del&gt;FELIX-5528&lt;/del&gt;&lt;/a&gt; to try to address this in the framework (as well as trying to improve the error message as well as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5138&quot; title=&quot;Felix should log underlying exception on failed bundle update&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5138&quot;&gt;&lt;del&gt;FELIX-5138&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15858187" author="dsuess" created="Wed, 8 Feb 2017 16:27:55 +0000"  >&lt;p&gt;It makes sense to get the root cause of that very specific issue fixed and prevent this happening in first place but I would also opt to additionally implement retry option as proposed by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; (probably go for 5 retries to be safer &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ) as other Exceptions not detected at that point in time would other ways lead to &quot;lost&quot; bundle installations in a state that is not easily recoverable (esp. if the bundle is part of the launchpad and not in repo or filesystem where you can remove and re-add  an ignored TaskResource).&lt;/p&gt;</comment>
                            <comment id="15867544" author="githubbot" created="Wed, 15 Feb 2017 09:41:49 +0000"  >&lt;p&gt;GitHub user DominikSuess opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/199&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5457&quot; title=&quot;OsgiInstaller should retry to start bundles on failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5457&quot;&gt;&lt;del&gt;SLING-5457&lt;/del&gt;&lt;/a&gt; - OsgiInstaller should retry to start bundles on failures&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;adding 5 retry cycles in BundleUpdateTask for Exceptions&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/DominikSuess/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/DominikSuess/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5457&quot; title=&quot;OsgiInstaller should retry to start bundles on failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5457&quot;&gt;&lt;del&gt;SLING-5457&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/199.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/199.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #199&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f67058323b162e2b0ecce97ca91fc68f732e8c08&lt;br/&gt;
Author: Dominik Suess &amp;lt;suess@adobe.com&amp;gt;&lt;br/&gt;
Date:   2017-02-15T09:32:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5457&quot; title=&quot;OsgiInstaller should retry to start bundles on failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5457&quot;&gt;&lt;del&gt;SLING-5457&lt;/del&gt;&lt;/a&gt; - OsgiInstaller should retry to start bundles on failures&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;adding 5 retry cycles in BundleUpdateTask for Exceptions&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15867551" author="dsuess" created="Wed, 15 Feb 2017 09:46:57 +0000"  >&lt;p&gt;Patch proposal submitted via PR (see comment by ASF Github Bot). Simplistic retry mechanism (5 times). &lt;br/&gt;
The tests cover a generic bundleexception during activation of a testbundle - the observed issues where fired by the framework but this solution is a generic safety net as this could happen when ever Exceptions are thrown due to some kind of race condition.&lt;/p&gt;

&lt;p&gt;Note that for install tasks we currently have endless retries, but based on discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I constrained the retry attempts for BundleUpdateTasks.&lt;/p&gt;</comment>
                            <comment id="15867820" author="karlpauls" created="Wed, 15 Feb 2017 13:20:37 +0000"  >&lt;p&gt;Ok, I&apos;m going to apply this patch and cut a release for the related artefacts. &lt;/p&gt;

&lt;p&gt;Notice that there is some discussion going on at the PR at GitHub between &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; regarding the proposal of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; earlier. In that regard, I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; that we should for now just go ahead with this simple patch and address the update situation. Ultimately, however, I do tentatively agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; that the retry situation probably should be looked at from a more global perspective to determine if there isn&apos;t something that can be done more generically by the installer core v.s. the current individual tasks level. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I&apos;d propose you create a new Issue to track and discuss this some more for a potential future solution. Thanks!&lt;/p&gt;</comment>
                            <comment id="15867848" author="kwin" created="Wed, 15 Feb 2017 13:39:20 +0000"  >&lt;p&gt;Ok, I agree with the approach in general. &lt;br/&gt;
I just have one concern with this patch though. It will only retry in the next cycle of the OSGi Installer, compare with &lt;a href=&quot;https://github.com/apache/sling/pull/199#issuecomment-280004801&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/199#issuecomment-280004801&lt;/a&gt;. This feels really wrong to me because that way the bundle update task would not be retried until the next cycle of the OSGi installer would be triggered from some other event.&lt;/p&gt;</comment>
                            <comment id="15867888" author="karlpauls" created="Wed, 15 Feb 2017 14:10:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I don&apos;t think that is the case. It will CYCLE until it is done with the resources. &lt;/p&gt;</comment>
                            <comment id="15867897" author="karlpauls" created="Wed, 15 Feb 2017 14:13:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; see &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; comment on the GitHub PR for more details but essentially, he is saying the same thing. I think we are good for this issue but again, as I said earlier, I do think it could be worthwhile to discuss all of this in a broader context - hence, it be good if you could open a new issue, link it to this one (and maybe some of the others) and get the discussion going there!&lt;/p&gt;</comment>
                            <comment id="15867967" author="kwin" created="Wed, 15 Feb 2017 14:59:50 +0000"  >&lt;p&gt;I created a follow-up ticket for the more global improvement of exception/retry handling in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6522&quot; title=&quot;Refactor/Improve error handling of InstallTasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6522&quot;&gt;SLING-6522&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15867971" author="karlpauls" created="Wed, 15 Feb 2017 15:02:48 +0000"  >&lt;p&gt;Thanks. As I said on the GitHub PR - I agree with you that this looks somewhat suspicious. I&apos;ll look into it some more and get back here (lets try to keep the discussion on this jira issue and not on the GitHub issue).&lt;/p&gt;</comment>
                            <comment id="15868795" author="karlpauls" created="Wed, 15 Feb 2017 23:20:29 +0000"  >&lt;p&gt;Ok, I got it working after all. &lt;/p&gt;

&lt;p&gt;It turned out that the test didn&apos;t really test what it was supposed to be testing (it ended-up working because it was counting events generated by the restart bundle task). I don&apos;t even think it triggered the retry for the update task at all. &lt;/p&gt;

&lt;p&gt;Now with a test that actually does trigger the update retry and checks the amount of retries it is clear that the retries do happen directly. However, it turns out this is not because of the compact or the CYCLE (as suspected by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; and I, respectively) but due to the BundleTaskCreator listening to bundle state changes and triggering retries to be sure. &lt;/p&gt;

&lt;p&gt;That certainly does seem like a somewhat round-about way of doing it so I think it is a good idea to lock some more into all of this as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6522&quot; title=&quot;Refactor/Improve error handling of InstallTasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6522&quot;&gt;SLING-6522&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;For now, I committed a reworked solution (it&apos;s a good thing we looked at the test again because now that I have a working version it turned out there where some bugs in the patch) together with the test in r1783162.&lt;/p&gt;

&lt;p&gt;With that, I&apos;ll resolve this issue and assume we are going to work on improvements under &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6522&quot; title=&quot;Refactor/Improve error handling of InstallTasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6522&quot;&gt;SLING-6522&lt;/a&gt; (please reopen this issue if r1783162 doesn&apos;t work for you).&lt;/p&gt;</comment>
                            <comment id="15871920" author="githubbot" created="Fri, 17 Feb 2017 14:25:46 +0000"  >&lt;p&gt;Github user DominikSuess closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/199&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13038432">SLING-6491</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13043267">SLING-6522</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s0s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5453] org.apache.sling.testing.mock.osgi.MockBundleContext.getDataFile  is currently not implemented</title>
                <link>https://issues.apache.org/jira/browse/SLING-5453</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a test for a WCMUsePojo Class using 1.5.0 version of io.wcm.testing.aem-mock - the test itself seems to run just fine but I see the following ERROR message logged. From the stack trace seems like the getDataFile method of MockBundleContext is not implemented.&lt;/p&gt;

&lt;p&gt;@Rule&lt;br/&gt;
public final AemContext aemContext = new AemContext(ResourceResolverType.JCR_MOCK);&lt;/p&gt;

&lt;p&gt;I have to use JCR_MOCK resource resolver type because my code uses JCR API.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl - activate: Cannot access repository, failed setting up Mapping Support&lt;br/&gt;
java.lang.UnsupportedOperationException&lt;br/&gt;
        at org.apache.sling.testing.mock.osgi.MockBundleContext.getDataFile(MockBundleContext.java:326)&lt;br/&gt;
        at org.apache.sling.resourceresolver.impl.mapping.MapEntries.&amp;lt;init&amp;gt;(MapEntries.java:196)&lt;br/&gt;
        at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.activate(CommonResourceResolverFactoryImpl.java:278)&lt;br/&gt;
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.registerFactory(ResourceResolverFactoryActivator.java:583)&lt;br/&gt;
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.checkFactoryPreconditions(ResourceResolverFactoryActivator.java:611)&lt;br/&gt;
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryActivator.activate(ResourceResolverFactoryActivator.java:519)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
        at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:253)&lt;br/&gt;
        at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.activateDeactivate(OsgiServiceUtil.java:86)&lt;br/&gt;
        at org.apache.sling.testing.mock.osgi.MockOsgi.activate(MockOsgi.java:188)&lt;br/&gt;
        at org.apache.sling.testing.mock.sling.ResourceResolverFactoryInitializer.initializeResourceResolverFactoryActivator(ResourceResolverFactoryInitializer.java:138)&lt;br/&gt;
        at org.apache.sling.testing.mock.sling.ResourceResolverFactoryInitializer.setUp(ResourceResolverFactoryInitializer.java:76)&lt;br/&gt;
        at org.apache.sling.testing.mock.sling.MockSling.newResourceResolverFactory(MockSling.java:88)&lt;br/&gt;
        at io.wcm.testing.mock.aem.context.ContextResourceResolverFactory.get(ContextResourceResolverFactory.java:45)&lt;br/&gt;
        at io.wcm.testing.mock.aem.context.AemContextImpl.newResourceResolverFactory(AemContextImpl.java:64)&lt;br/&gt;
        at org.apache.sling.testing.mock.sling.context.SlingContextImpl.setUp(SlingContextImpl.java:98)&lt;br/&gt;
        at io.wcm.testing.mock.aem.context.AemContextImpl.setUp(AemContextImpl.java:69)&lt;br/&gt;
        at io.wcm.testing.mock.aem.junit.AemContext.access$000(AemContext.java:40)&lt;br/&gt;
        at io.wcm.testing.mock.aem.junit.AemContext$1.before(AemContext.java:119)&lt;/p&gt;

&lt;p&gt;I am using following versions of &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;AEM mock / io.wcm.testing.aem-mock-1.5.0.jar&lt;/li&gt;
	&lt;li&gt;Sling Resource Resolver  / org.apache.sling.resourceresolver-1.2.6.jar&lt;/li&gt;
	&lt;li&gt;AEM /uber-jar-6.1.0-apis.jar&lt;/li&gt;
&lt;/ul&gt;



</description>
                <environment></environment>
        <key id="12933946">SLING-5453</key>
            <summary>org.apache.sling.testing.mock.osgi.MockBundleContext.getDataFile  is currently not implemented</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="dchilkur">Dinesh Chilkuri</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jan 2016 21:37:51 +0000</created>
                <updated>Mon, 8 Feb 2016 22:57:11 +0000</updated>
                            <resolved>Mon, 25 Jan 2016 22:35:11 +0000</resolved>
                                    <version>Testing OSGi Mock 1.7.0</version>
                                    <fixVersion>Testing OSGi Mock 1.7.2</fixVersion>
                    <fixVersion>Testing OSGi Mock 2.0.2</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15116209" author="sseifert@pro-vision.de" created="Mon, 25 Jan 2016 22:35:11 +0000"  >&lt;p&gt;2.0.1-SNAPSHOT: rev. 1726704  &lt;br/&gt;
1.7.1-SNAPSHOT: rev. 1726706&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ry47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5452] ClientSideTeleporter should check for web console readiness</title>
                <link>https://issues.apache.org/jira/browse/SLING-5452</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Before installing its test bundle, the &lt;tt&gt;ClientSideTeleporter&lt;/tt&gt; should (optionally?) check, via HTTP, that the OSGi console is ready to accept it. The customizer could optionally set a longer retry timeout for installing the bundle.&lt;/p&gt;

&lt;p&gt;This is not a problem in our launchpad test suite as the Sling readiness is checked extensively before starting tests, but in smaller test suites it&apos;s useful for the teleporter to be self-contained in this respect.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12933767">SLING-5452</key>
            <summary>ClientSideTeleporter should check for web console readiness</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jan 2016 10:09:18 +0000</created>
                <updated>Wed, 14 Sep 2016 21:14:43 +0000</updated>
                            <resolved>Wed, 11 May 2016 14:22:08 +0000</resolved>
                                    <version>JUnit Tests Teleporter 1.0.6</version>
                                    <fixVersion>JUnit Tests Teleporter 1.0.8</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15130099" author="bdelacretaz" created="Wed, 3 Feb 2016 09:28:38 +0000"  >&lt;p&gt;As reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; the repoinit tests are currently failing on Jenkins and this is apparently the core issue:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.io.IOException: Got status code 404 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:49661/system/console/bundles
&lt;/span&gt;	at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.installBundle(TeleporterHttpClient.java:77)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15130104" author="bdelacretaz" created="Wed, 3 Feb 2016 09:32:37 +0000"  >&lt;p&gt;For now I have @Ignored those tests, revision 1728282&lt;/p&gt;</comment>
                            <comment id="15130576" author="bdelacretaz" created="Wed, 3 Feb 2016 15:43:23 +0000"  >&lt;p&gt;Implemented a webconsole readiness check in revision 1728331 and reactivated the repoinit IT tests in 1728335&lt;/p&gt;</comment>
                            <comment id="15276162" author="petitbear68" created="Mon, 9 May 2016 09:44:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; could this also help to solve &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5715&quot; title=&quot;Random NoRouteToHostException in Teleporter Client MultipartAdapter method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5715&quot;&gt;&lt;del&gt;SLING-5715&lt;/del&gt;&lt;/a&gt; ? I just see the wait is added on install, but nothing is done on uninstall, it would maybe also make sense to check before uninstall as the running test itself may have changed some something in the context, and that can impact the console availability.&lt;/p&gt;

&lt;p&gt;I have added a sample of diff to include also the check on the uninstall call.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/compare/trunk...tyge68:trunk.diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/compare/trunk...tyge68:trunk.diff&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15277750" author="bdelacretaz" created="Tue, 10 May 2016 07:40:10 +0000"  >&lt;p&gt;Good point, I&apos;m reopening this issue to implement this. I&apos;m not sure if it&apos;s related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5715&quot; title=&quot;Random NoRouteToHostException in Teleporter Client MultipartAdapter method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5715&quot;&gt;&lt;del&gt;SLING-5715&lt;/del&gt;&lt;/a&gt; but makes sense anyway.&lt;/p&gt;</comment>
                            <comment id="15280196" author="bdelacretaz" created="Wed, 11 May 2016 14:22:08 +0000"  >&lt;p&gt;Committed your new patch in revision 1743378, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rx0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5451] Sling Models API does not define consumer/provider type</title>
                <link>https://issues.apache.org/jira/browse/SLING-5451</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since the packages are not explicitly annotated they used to be ProviderType with an old version of the maven-bundle-plugin but now are by default ConsumerType (&lt;a href=&quot;https://github.com/bndtools/bnd/commit/5935e70ba990e40a95e14fb932158ebf8d2225fe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bndtools/bnd/commit/5935e70ba990e40a95e14fb932158ebf8d2225fe&lt;/a&gt;). We should not rely on defaults but rather make those types explicit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12933380">SLING-5451</key>
            <summary>Sling Models API does not define consumer/provider type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jan 2016 16:03:47 +0000</created>
                <updated>Sun, 24 Jan 2016 16:05:11 +0000</updated>
                            <resolved>Sun, 24 Jan 2016 16:05:11 +0000</resolved>
                                    <version>Sling Models API 1.2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15112592" author="kwin" created="Fri, 22 Jan 2016 16:08:36 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;http://svn.apache.org/r1726248&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1726248&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15114368" author="kwin" created="Sun, 24 Jan 2016 16:04:49 +0000"  >&lt;p&gt;Observation was not correct as the according types have already been added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5013&quot; title=&quot;Sling Models API: Add @ProviderType/@ConsumerType annotations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5013&quot;&gt;&lt;del&gt;SLING-5013&lt;/del&gt;&lt;/a&gt;. Therefore reverted commit r1726248 in r1726505.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2runj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5450] Sling Parent uses maven-bundle-plugin 3.0.1 but defines dependency on bndlib 1.50.0</title>
                <link>https://issues.apache.org/jira/browse/SLING-5450</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the sling parent pom uses the maven-bundle-plugin in version 3.0.1 but defines a dependency on bndlib in version 1.50.0.&lt;/p&gt;

&lt;p&gt;Since maven-bundle-plugin 3.0.1 uses bndlib in version 3.0.0 anyhow the dependency in parent should also be increased to that version.&lt;/p&gt;

&lt;p&gt;Otherwise you at least get the wrong impression, because e.g. in bndlib 1.50.0 the &lt;tt&gt;aQute.bnd.annotation.ProviderType&lt;/tt&gt; is being marked as being the default in the javadoc while in reality the maven-bundle-plugin uses bndlib in version 3.0.0 where &lt;tt&gt;aQute.bnd.annotation.ConsumerType&lt;/tt&gt; is the default (see also &lt;a href=&quot;https://github.com/bndtools/bnd/commit/5935e70ba990e40a95e14fb932158ebf8d2225fe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bndtools/bnd/commit/5935e70ba990e40a95e14fb932158ebf8d2225fe&lt;/a&gt;).&lt;br/&gt;
Also additional interfaces being added in 3.0 cannot be used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12933375">SLING-5450</key>
            <summary>Sling Parent uses maven-bundle-plugin 3.0.1 but defines dependency on bndlib 1.50.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jan 2016 15:53:08 +0000</created>
                <updated>Sun, 24 Jul 2016 06:33:18 +0000</updated>
                            <resolved>Fri, 22 Jan 2016 16:21:42 +0000</resolved>
                                    <version>Parent 26</version>
                                    <fixVersion>Parent 27</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15112611" author="kwin" created="Fri, 22 Jan 2016 16:21:42 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1726251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1726251&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rumf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5448] AuthenticationInfoPostProcessor javadoc misleading</title>
                <link>https://issues.apache.org/jira/browse/SLING-5448</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, the &lt;a href=&quot;https://github.com/apache/sling/blob/4bc090c5f8cb8ec8d6b1674176978e9a5feff503/bundles/auth/core/src/main/java/org/apache/sling/auth/core/spi/AuthenticationInfoPostProcessor.java#L25-L29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AuthenticationInfoPostProcessor javadoc says&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Service interface which allows bundles to modify the AuthenticationInfo object after authentication has been performed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But that&apos;s pretty misleading, as &quot;after authentication&quot; actually means &quot;one AuthenticationHandler has returned an AuthenticationInfo&quot; object, but does not include the resource provider creations (e.g. JCR repository login), which are often understood as part of authentication too.&lt;/p&gt;

&lt;p&gt;I suggest this instead:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Service interface which allows bundles to modify the AuthenticationInfo object right after one authentication handler has returned it from extractCredentials() or for an anonymous AuthenticationInfo. It is called before the resource resolver is created and any authentication in the resource providers (such as JCR repository login) happens.&lt;/p&gt;

&lt;p&gt;As such it is useful to intercept responses from other AuthenticationHandlers and access or modify the AuthenticationInfo before they are actually used to create the resource resolver.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12933217">SLING-5448</key>
            <summary>AuthenticationInfoPostProcessor javadoc misleading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="alexander.klimetschek">Alexander Klimetschek</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jan 2016 00:07:52 +0000</created>
                <updated>Fri, 28 Aug 2020 12:42:41 +0000</updated>
                            <resolved>Wed, 5 Aug 2020 13:29:31 +0000</resolved>
                                    <version>Auth Core 1.3.12</version>
                                    <fixVersion>Auth Core 1.5.0</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17171496" author="cziegeler" created="Wed, 5 Aug 2020 13:29:31 +0000"  >&lt;p&gt;Finally updated the javadoc as suggested&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rtnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5445] XSSAPI#encodeForJSString is too restrictive</title>
                <link>https://issues.apache.org/jira/browse/SLING-5445</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For the cases when somebody tries to sanitise JSON strings the &lt;tt&gt;XSSAPI#encodeForJSString&lt;/tt&gt; current implementation is too restrictive. &lt;/p&gt;

&lt;p&gt;Assuming one would want to sanitize &lt;tt&gt;2016-01-21T15:40:30&lt;/tt&gt;, the output of the &lt;tt&gt;XSSAPI#encodeForJSString&lt;/tt&gt; would be &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016\-01\-21T15:40:30
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which although is a valid String for JavaScript code is not a valid one for JSON.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12933087">SLING-5445</key>
            <summary>XSSAPI#encodeForJSString is too restrictive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jan 2016 14:47:33 +0000</created>
                <updated>Tue, 2 Feb 2016 15:20:11 +0000</updated>
                            <resolved>Thu, 21 Jan 2016 17:21:32 +0000</resolved>
                                    <version>XSS Protection API 1.0.6</version>
                                    <fixVersion>XSS Protection API 1.0.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15110950" author="radu.cotescu" created="Thu, 21 Jan 2016 17:21:32 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1726027&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1726027&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rsun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5441] Trim Spaces should not remove space between expressions</title>
                <link>https://issues.apache.org/jira/browse/SLING-5441</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently if you have the following code in your JSP&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
&amp;lt;i class=&lt;span class=&quot;code-quote&quot;&gt;&quot;coral-Icon &amp;lt;%= isMinimal ? &quot;&lt;/span&gt;coral-MinimalButton-icon&lt;span class=&quot;code-quote&quot;&gt;&quot; : &quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot; %&amp;gt; &amp;lt;%= cmp.getIconClass(icon) %&amp;gt; coral-Icon--size&amp;lt;%= iconSize %&amp;gt;&quot;&lt;/span&gt;&amp;gt;&amp;lt;/i&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the property &lt;tt&gt;jasper.trimSpaces&lt;/tt&gt; is set to &lt;tt&gt;true&lt;/tt&gt;, then the space between the first expression and the second expression is completely removed, leading to output like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;i class=&lt;span class=&quot;code-quote&quot;&gt;&quot;coral-Icon coral-MinimalButton-iconcoral-Icon--close coral-Icon--sizeS&quot;&lt;/span&gt;&amp;gt;&amp;lt;/i&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;This should not happen as the space here obviously has a semantical meaning. With &lt;tt&gt;jasper.trimSpaces&lt;/tt&gt; set to &lt;tt&gt;false&lt;/tt&gt; the following correct code is generated:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;i class=&lt;span class=&quot;code-quote&quot;&gt;&quot;coral-Icon coral-MinimalButton-icon coral-Icon--close coral-Icon--sizeS&quot;&lt;/span&gt;&amp;gt;&amp;lt;/i&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </description>
                <environment></environment>
        <key id="12932653">SLING-5441</key>
            <summary>Trim Spaces should not remove space between expressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jan 2016 08:14:21 +0000</created>
                <updated>Mon, 18 Apr 2016 10:05:48 +0000</updated>
                                            <version>Scripting JSP 2.1.6</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15245291" author="mikolaj.manski@cognifide.com" created="Mon, 18 Apr 2016 08:20:51 +0000"  >&lt;p&gt;Correct me if I&apos;m wrong, but the documentation for this property says: &quot;Should white spaces between directives or actions be trimmed?&quot; so I think this is expected.&lt;/p&gt;</comment>
                            <comment id="15245406" author="kwin" created="Mon, 18 Apr 2016 10:05:48 +0000"  >&lt;p&gt;According to the JSP Spec 2.1: &lt;tt&gt;Scripting Elements&lt;/tt&gt; ($JSP.1.12) (which also include &lt;tt&gt;expressions&lt;/tt&gt;) are neither &lt;tt&gt;Directives&lt;/tt&gt; ($JSP.1.10) nor &lt;tt&gt;Actions&lt;/tt&gt; ($JSP.1.13).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rq67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5436] Do not move distribution packages to error queues after connection problems</title>
                <link>https://issues.apache.org/jira/browse/SLING-5436</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12932135">SLING-5436</key>
            <summary>Do not move distribution packages to error queues after connection problems</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2016 12:09:27 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:35 +0000</updated>
                            <resolved>Mon, 18 Jan 2016 15:56:18 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.14</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rmzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5434] WritePipe shoud remove properties at the very end</title>
                <link>https://issues.apache.org/jira/browse/SLING-5434</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;in order to allow all expressions at current state to use the values of properties to be removed.&lt;/p&gt;

&lt;p&gt;test &amp;amp; fix in attached patch&lt;/p&gt;

&lt;p&gt;related to thread &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/sling-users/201601.mbox/%3C2FBC4C5C-A110-40A2-A7CF-F2B11170DD8F%40adobe.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/sling-users/201601.mbox/%3C2FBC4C5C-A110-40A2-A7CF-F2B11170DD8F%40adobe.com%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12931508">SLING-5434</key>
            <summary>WritePipe shoud remove properties at the very end</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2016 16:15:52 +0000</created>
                <updated>Fri, 14 Oct 2016 08:06:17 +0000</updated>
                            <resolved>Thu, 18 Feb 2016 10:52:01 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15102100" author="npeltier" created="Fri, 15 Jan 2016 17:15:09 +0000"  >&lt;p&gt;also specified the fact you can use null in write pipe in the doc in the doc patch attached&lt;/p&gt;</comment>
                            <comment id="15103055" author="npeltier" created="Sat, 16 Jan 2016 07:50:12 +0000"  >&lt;p&gt;updated the patch with users-list feedback&lt;/p&gt;</comment>
                            <comment id="15152125" author="rombert" created="Thu, 18 Feb 2016 10:52:01 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://svn.apache.org/r1731043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1731043&lt;/a&gt; - committed patch&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://svn.apache.org/r1731041&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1731041&lt;/a&gt; - updated docs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks for the submission!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12782561" name="SLING-5434-DOC.patch" size="1207" author="npeltier" created="Fri, 15 Jan 2016 17:15:09 +0000"/>
                            <attachment id="12782712" name="SLING-5434.patch" size="6219" author="npeltier" created="Sat, 16 Jan 2016 07:48:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rj47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5433] WritePipe should remove a property when value is evaluated as null</title>
                <link>https://issues.apache.org/jira/browse/SLING-5433</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;it&apos;s not documented (will do), but a value evaluated as null in a write pipe conf should remove the property. It doesn&apos;t work right now as the target resource used for removal is the wrong one. &lt;/p&gt;

&lt;p&gt;failing test &amp;amp; fix patch attached&lt;/p&gt;</description>
                <environment></environment>
        <key id="12931460">SLING-5433</key>
            <summary>WritePipe should remove a property when value is evaluated as null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2016 13:18:05 +0000</created>
                <updated>Fri, 14 Oct 2016 08:06:09 +0000</updated>
                            <resolved>Fri, 15 Jan 2016 15:06:15 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15101807" author="npeltier" created="Fri, 15 Jan 2016 14:09:22 +0000"  >&lt;p&gt;without &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5431&quot; title=&quot;PipeBinding NPE when evaluating null expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5431&quot;&gt;&lt;del&gt;SLING-5431&lt;/del&gt;&lt;/a&gt;, this patch will throw a NPE during test&lt;/p&gt;</comment>
                            <comment id="15101880" author="rombert" created="Fri, 15 Jan 2016 15:06:15 +0000"  >&lt;p&gt;Applied in &lt;a href=&quot;https://svn.apache.org/r1724831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1724831&lt;/a&gt;, thanks for the contribution!&lt;/p&gt;</comment>
                            <comment id="15101885" author="npeltier" created="Fri, 15 Jan 2016 15:08:48 +0000"  >&lt;p&gt;thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, can you (quickly check) &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5431&quot; title=&quot;PipeBinding NPE when evaluating null expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5431&quot;&gt;&lt;del&gt;SLING-5431&lt;/del&gt;&lt;/a&gt;, as now i guess pipes tests are broken :-/&lt;/p&gt;</comment>
                            <comment id="15101924" author="rombert" created="Fri, 15 Jan 2016 15:30:43 +0000"  >&lt;p&gt;Oops, I thought the tests were already fixed by this patch. Applied patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5431&quot; title=&quot;PipeBinding NPE when evaluating null expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5431&quot;&gt;&lt;del&gt;SLING-5431&lt;/del&gt;&lt;/a&gt; just now.&lt;/p&gt;</comment>
                            <comment id="15101940" author="npeltier" created="Fri, 15 Jan 2016 15:42:38 +0000"  >&lt;p&gt;thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;! should have i done differently?&lt;/p&gt;</comment>
                            <comment id="15101976" author="rombert" created="Fri, 15 Jan 2016 16:04:51 +0000"  >&lt;p&gt;Nothing really, I just misread the comments &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12931415">SLING-5431</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12782524" name="SLING-5433.patch" size="2859" author="npeltier" created="Fri, 15 Jan 2016 13:19:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ritj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5431] PipeBinding NPE when evaluating null expression</title>
                <link>https://issues.apache.org/jira/browse/SLING-5431</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;PipeBindings should be able to evaluate null expressions or objects, and return null as value, right now it spits out a NPE.&lt;/p&gt;

&lt;p&gt;please find test &amp;amp; fix in the attached patch&lt;/p&gt;</description>
                <environment></environment>
        <key id="12931415">SLING-5431</key>
            <summary>PipeBinding NPE when evaluating null expression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2016 10:04:42 +0000</created>
                <updated>Fri, 14 Oct 2016 08:05:59 +0000</updated>
                            <resolved>Fri, 15 Jan 2016 15:29:55 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15101920" author="rombert" created="Fri, 15 Jan 2016 15:29:55 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1724841&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1724841&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12931460">SLING-5433</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12782495" name="SLING-5431.patch" size="4183" author="npeltier" created="Fri, 15 Jan 2016 10:07:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rijj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5430] Allow item move between distribution queues</title>
                <link>https://issues.apache.org/jira/browse/SLING-5430</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;POST /libs/.../agents/agentName/queues/queueName
operation=move&amp;amp;from=sourceQueueName&amp;amp;id=idsToMove
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </description>
                <environment></environment>
        <key id="12931401">SLING-5430</key>
            <summary>Allow item move between distribution queues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2016 08:55:12 +0000</created>
                <updated>Wed, 20 Sep 2017 13:18:01 +0000</updated>
                            <resolved>Fri, 15 Jan 2016 09:03:33 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.14</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15101503" author="mpetria" created="Fri, 15 Jan 2016 09:03:33 +0000"  >&lt;p&gt;Committed revision 1724744.&lt;/p&gt;

&lt;p&gt;Also added retryQueue parameter for error queues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rigf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5427] The jcr:created and jcr:lastModified properties are not read for mocked resources created through the ContentLoader</title>
                <link>https://issues.apache.org/jira/browse/SLING-5427</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Assuming one wants to import the following structure for a test:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;list-children-paginated&quot;: {
    &quot;jcr:primaryType&quot;   : &quot;nt:unstructured&quot;,
    &quot;jcr:createdBy&quot;     : &quot;admin&quot;,
    &quot;orderBy&quot;           : &quot;jcr:created&quot;,
    &quot;jcr:lastModifiedBy&quot;: &quot;admin&quot;,
    &quot;feedEnabled&quot;       : true,
    &quot;pageMax&quot;           : &quot;2&quot;,
    &quot;jcr:created&quot;       : &quot;Mon Jan 11 2016 15:23:53 GMT+0100&quot;,
    &quot;limit&quot;             : &quot;0&quot;,
    &quot;displayAs&quot;         : &quot;default&quot;,
    &quot;jcr:lastModified&quot;  : &quot;Tue Jan 12 2016 15:40:55 GMT+0100&quot;,
    &quot;sling:resourceType&quot;: &quot;project/components/list&quot;,
    &quot;listFrom&quot;          : &quot;children&quot;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the &lt;tt&gt;Resource&lt;/tt&gt; obtained from the &lt;tt&gt;RESOURCERESOLVER_MOCK&lt;/tt&gt; will not have the &lt;tt&gt;jcr:created&lt;/tt&gt; / &lt;tt&gt;jcr:lastModified&lt;/tt&gt; properties defined in its &lt;tt&gt;ValueMap&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12929522">SLING-5427</key>
            <summary>The jcr:created and jcr:lastModified properties are not read for mocked resources created through the ContentLoader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2016 16:15:35 +0000</created>
                <updated>Wed, 14 Sep 2016 20:22:10 +0000</updated>
                                            <version>Testing Sling Mock 1.6.0</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15135116" author="sseifert@pro-vision.de" created="Fri, 5 Feb 2016 22:04:24 +0000"  >&lt;p&gt;what behavior do you expect? to have any values for those properties (like in a real JCR where you cannot set the value for jcr:created, but it is set automatically on node creation)?&lt;br/&gt;
or to import the values 1:1 from JSON file, perhaps only if the underlying resource resolver type is RESOURCERESOLVER_MOCK and not JCR-based?&lt;/p&gt;</comment>
                            <comment id="15135120" author="sseifert@pro-vision.de" created="Fri, 5 Feb 2016 22:05:57 +0000"  >&lt;p&gt;added a patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12786574/12786574_SLING-5427-test.patch&quot; title=&quot;SLING-5427-test.patch attached to SLING-5427&quot;&gt;SLING-5427-test.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; with a first rough unit test to test import of the given json file.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12786574" name="SLING-5427-test.patch" size="2764" author="sseifert" created="Fri, 5 Feb 2016 22:05:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2r6v3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5424] MBeanServer reference in MetricServiceImpl should be made optional</title>
                <link>https://issues.apache.org/jira/browse/SLING-5424</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently &lt;tt&gt;MetricServiceImpl&lt;/tt&gt; has a required dependency on MBeanServer. Technically this can be made optional and default Platform MBeanServer can be used. Further due to missing start on JMXReporter the MBean are not getting registered also&lt;/p&gt;

&lt;p&gt;Sling Launchpad registers an MBeanServer by default which might not be the case in other OSGi setups. So making this optional would simplify using this bundle in other setup also&lt;/p&gt;

&lt;p&gt;Also look into testcase logic per discussion in &lt;a href=&quot;http://markmail.org/thread/mow4u6vn7mfnj7gy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/thread/mow4u6vn7mfnj7gy&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12929439">SLING-5424</key>
            <summary>MBeanServer reference in MetricServiceImpl should be made optional</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jan 2016 10:02:08 +0000</created>
                <updated>Tue, 13 Dec 2016 06:36:32 +0000</updated>
                            <resolved>Wed, 13 Jan 2016 04:59:29 +0000</resolved>
                                    <version>Commons Metrics 1.0.0</version>
                                    <fixVersion>Commons Metrics 1.2.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15095612" author="chetanm" created="Wed, 13 Jan 2016 04:59:29 +0000"  >&lt;p&gt;Done with 1724354&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12997539">SLING-5965</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2r6cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5422] Sling Event - HistoryCleanUpTask removes Jobs younger than configured</title>
                <link>https://issues.apache.org/jira/browse/SLING-5422</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The HistoryCleanUpTask has to remove all Jobs stored in the JCR older than the given parameter &lt;tt&gt;age&lt;/tt&gt; (a number of minutes).&lt;br/&gt;
The current implementation traverses the &lt;em&gt;/var/eventing/jobs&lt;/em&gt; tree where parts of the path define the date of a job. Problem: the comparison of the job- and &lt;tt&gt;removeDate&lt;/tt&gt; is wrong. First it compares the years, than months, weeks and days but this doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;I&apos;ve forked the project on github and wrote a test and fix. Further I added a test dependency for sling-mock in the pom.xml: &lt;a href=&quot;https://github.com/cnagel/sling/commit/165a8a04a129a4669599c6b15f48f67060e6c83c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Fixes HistoryCleanUpTask date comparison&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Please have a look and if you like I can create a pull request on GitHub.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12929193">SLING-5422</key>
            <summary>Sling Event - HistoryCleanUpTask removes Jobs younger than configured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cnagel">Christoph Nagel</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Jan 2016 14:51:40 +0000</created>
                <updated>Wed, 20 Sep 2017 12:39:05 +0000</updated>
                            <resolved>Fri, 29 Jan 2016 07:37:16 +0000</resolved>
                                    <version>Event 4.0.0</version>
                                    <fixVersion>Event 4.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15097064" author="sseifert@pro-vision.de" created="Wed, 13 Jan 2016 21:49:52 +0000"  >&lt;p&gt;thanks! - i&apos;ve created a svn patch file from your git branch and added the missing apache file header to the new unit test class (and reformatted it to 4 space indentation).&lt;br/&gt;
&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12782137/12782137_SLING-5422_cnagel.patch&quot; title=&quot;SLING-5422_cnagel.patch attached to SLING-5422&quot;&gt;SLING-5422_cnagel.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;you patch looks good and should fix the problem.&lt;/p&gt;

&lt;p&gt;the code surrounding the the fix with the oldMonth/Day/Hour/Minute checks is still wrong, though. same applies to the code in CleanUpTask. all these old-checks may mark folder resources as &quot;old&quot; that are not old if there are multiple years, months, days, hours etc. between the removeDate and the folder date. in practice this should causes no harm, because removing folder takes only place if there are empty.&lt;/p&gt;

&lt;p&gt;so the question is if we should refactor the whole code in both classes (perhaps removing code duplication between both at the same time), or just apply the patch for now to fix the problem described in this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; do you have an opinion?&lt;/p&gt;</comment>
                            <comment id="15121823" author="cziegeler" created="Thu, 28 Jan 2016 16:26:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; I think I&apos;m missing something: the patch only changes the last comparison (minute). If already the part for year/month etc is wrong, how does only changing this last bit fix the problem?&lt;br/&gt;
In general, if we have several areas with this problem, it would be great to fix all of them, even if they don&apos;t do any harm.&lt;/p&gt;</comment>
                            <comment id="15123143" author="cziegeler" created="Fri, 29 Jan 2016 07:36:35 +0000"  >&lt;p&gt;I now understand the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; and why the current code is failing. I fixed it slightly different in 1727489. I&apos;ll create a new issue for the CleanUpTask&lt;br/&gt;
Thanks for the tests Christoph, I&apos;ve added them as well&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12935037">SLING-5467</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12782137" name="SLING-5422_cnagel.patch" size="12533" author="sseifert" created="Wed, 13 Jan 2016 21:50:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2r4u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5417] Jobs are only partially persisted</title>
                <link>https://issues.apache.org/jira/browse/SLING-5417</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After some experimenting the failing IT tests on our integration servers seem to indicate that jobs are only partially persisted without any exception. The error log is full with messages of a read job without a topic.&lt;br/&gt;
We already had reports for binary properties, but it doesn&apos;t seem to be limited to this.&lt;br/&gt;
This seems to happen with a JR 2 and a Oak based repository&lt;/p&gt;

&lt;p&gt;As a first step we could add a call of readJob add JobManager#addJob to ensure that the job can fully be read again. If that fails, we know for sure that the above assumption is correct.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12928658">SLING-5417</key>
            <summary>Jobs are only partially persisted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jan 2016 14:50:53 +0000</created>
                <updated>Tue, 7 Jun 2022 10:13:37 +0000</updated>
                            <resolved>Sat, 28 May 2022 05:31:49 +0000</resolved>
                                                                    <component>Event</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17543013" author="joerghoh" created="Fri, 27 May 2022 16:56:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; is this still valid?&lt;/p&gt;</comment>
                            <comment id="17543418" author="cziegeler" created="Sat, 28 May 2022 05:31:49 +0000"  >&lt;p&gt;Not sure, but as its 7 years old and no one complained since then, lets close it&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2r1jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5411] Sightly formatting filter only replaces first 10 placeholders</title>
                <link>https://issues.apache.org/jira/browse/SLING-5411</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Sightly formatting filter only replaces first 10 placeholders.&lt;/p&gt;

&lt;p&gt;For an input of:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;${&lt;span class=&quot;code-quote&quot;&gt;&quot;1-{0}, 2-{1}, 3-{2}, 4-{3}, 5-{4}, 6-{5}, 7-{6}, 8-{7}, 9-{8}, 10-{9}, 11-{10}, 12-{11}&quot;&lt;/span&gt; @ format=[1,2,3,4,5,6,7,8,9,10,11,12]}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the current output is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1-1, 2-2, 3-3, 4-4, 5-5, 6-6, 7-7, 8-8, 9-9, 10-10, 11-{10}, 12-{11}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is due to a bad regex pattern at &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/filter/FormatFilter.java#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/filter/FormatFilter.java#L51&lt;/a&gt;, where &lt;tt&gt;\d&lt;/tt&gt; is used instead of &lt;tt&gt;\d+&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12928314">SLING-5411</key>
            <summary>Sightly formatting filter only replaces first 10 placeholders</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="vladb">Vlad Bailescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jan 2016 12:55:08 +0000</created>
                <updated>Tue, 12 Jan 2016 09:45:40 +0000</updated>
                            <resolved>Fri, 8 Jan 2016 17:58:15 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.6</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.10</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15089356" author="vladb" created="Fri, 8 Jan 2016 15:37:28 +0000"  >&lt;p&gt;Patch with included fix and TCK update.&lt;/p&gt;</comment>
                            <comment id="15089612" author="radu.cotescu" created="Fri, 8 Jan 2016 17:58:15 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1723770&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1723770&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12781231" name="SLING-5411.patch" size="2625" author="vladb" created="Fri, 8 Jan 2016 15:37:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qzf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5408] Some Sightly Java Use objects stored in the repository are not recompiled on change</title>
                <link>https://issues.apache.org/jira/browse/SLING-5408</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A Java use bean stored in the repository but loaded with &lt;tt&gt;data-sly-use&lt;/tt&gt; using its fully qualified name will not get recompiled if its content changes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12926950">SLING-5408</key>
            <summary>Some Sightly Java Use objects stored in the repository are not recompiled on change</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jan 2016 11:28:02 +0000</created>
                <updated>Tue, 12 Jan 2016 09:45:40 +0000</updated>
                            <resolved>Mon, 4 Jan 2016 16:13:53 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.6</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.10</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15081310" author="radu.cotescu" created="Mon, 4 Jan 2016 16:13:53 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1722909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1722909&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qr0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5405] TopologyView contract is not correctly followed on property changes</title>
                <link>https://issues.apache.org/jira/browse/SLING-5405</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When properties change, a properties change event is sent out, however no new view object is created, instead the old view object is altered.&lt;br/&gt;
This is against the contract of topology view as it should be immutable once sent out.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12924666">SLING-5405</key>
            <summary>TopologyView contract is not correctly followed on property changes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Dec 2015 10:54:42 +0000</created>
                <updated>Sun, 3 Jan 2016 13:50:08 +0000</updated>
                            <resolved>Tue, 29 Dec 2015 13:35:30 +0000</resolved>
                                    <version>Discovery Standalone 1.0.0</version>
                                    <fixVersion>Discovery Standalone 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15073908" author="cziegeler" created="Tue, 29 Dec 2015 13:35:30 +0000"  >&lt;p&gt;Creating a new view on each change now, invalidating old views.&lt;br/&gt;
Added a bunch of tests to verify the behaviour&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qdbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5404] Recursive taglibs overwrite generated java/class file</title>
                <link>https://issues.apache.org/jira/browse/SLING-5404</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a taglib is using itself recursively, the recursive call results in a stup java tag file being generated overwriting/clashing with the outer java file. The class is loaded as well, resulting in a stup class being loaded through the class loader first.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12924495">SLING-5404</key>
            <summary>Recursive taglibs overwrite generated java/class file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Dec 2015 13:10:01 +0000</created>
                <updated>Sun, 3 Jan 2016 13:52:06 +0000</updated>
                            <resolved>Mon, 28 Dec 2015 13:37:59 +0000</resolved>
                                    <version>Scripting JSP 2.1.6</version>
                                    <fixVersion>Scripting JSP 2.1.8</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15072724" author="cziegeler" created="Mon, 28 Dec 2015 13:37:59 +0000"  >&lt;p&gt;Fixed in rev 1721916 by using different class names for the recursive/inner tag libs. These class files are not removed after the generation as they are already loaded by the class loader which would mark the class loader as dirty&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qc9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5403] RankedServices.get() should return List instead of Collection</title>
                <link>https://issues.apache.org/jira/browse/SLING-5403</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since this method always uses a &lt;tt&gt;List&lt;/tt&gt; implementation internally we should also expose that interface as return type instead of the more generic &lt;tt&gt;Collection&lt;/tt&gt;. This clarifies that the return values have a fixed order and also allows to directly access elements by their indices.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12924362">SLING-5403</key>
            <summary>RankedServices.get() should return List instead of Collection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Dec 2015 16:09:17 +0000</created>
                <updated>Fri, 8 Jan 2016 06:09:13 +0000</updated>
                            <resolved>Sun, 27 Dec 2015 11:59:57 +0000</resolved>
                                    <version>Commons OSGi 2.3.0</version>
                                    <fixVersion>Commons OSGi 2.4.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15071898" author="kwin" created="Sat, 26 Dec 2015 16:13:07 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1721739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1721739&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15072120" author="kwin" created="Sun, 27 Dec 2015 11:18:20 +0000"  >&lt;p&gt;I temporarily reverted the fix until versioning implications with that change are clear (&lt;a href=&quot;http://apache-sling.73963.n3.nabble.com/baselining-issue-td4057940.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-sling.73963.n3.nabble.com/baselining-issue-td4057940.html&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15072128" author="kwin" created="Sun, 27 Dec 2015 11:59:43 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1721805&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1721805&lt;/a&gt; by introducting a new method &lt;tt&gt;RankedServices.getList()&lt;/tt&gt; to be still backwards compatible. The old method &lt;tt&gt;RankedServices.get()&lt;/tt&gt; is now deprecated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qbfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5402] Component context not unset on SlingDeleteManager when deactivating SlingWebDavServlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-5402</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12924318">SLING-5402</key>
            <summary>Component context not unset on SlingDeleteManager when deactivating SlingWebDavServlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Dec 2015 17:21:25 +0000</created>
                <updated>Tue, 8 Mar 2016 13:47:03 +0000</updated>
                            <resolved>Fri, 25 Dec 2015 17:28:23 +0000</resolved>
                                    <version>JCR Webdav 2.3.2</version>
                                    <fixVersion>JCR Webdav 2.3.4</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15071680" author="olli" created="Fri, 25 Dec 2015 17:28:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1721687&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1721687&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12839473">SLING-4825</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qb67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5401] JUnit Core has hard dependency on Logback</title>
                <link>https://issues.apache.org/jira/browse/SLING-5401</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While investigating why &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3821&quot; title=&quot;Run launchpad integration tests against Sling on Karaf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3821&quot;&gt;&lt;del&gt;running launchpad integration tests against Sling on Karaf&lt;/del&gt;&lt;/a&gt; suddenly completely fail I found that JUnit Core has now a hard dependency on Logback because of &lt;tt&gt;TestLogServlet&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;That means if your system under test does not use Logback as backend testing is not possible at all. That should be documented at least at &lt;a href=&quot;https://sling.apache.org/documentation/bundles/org-apache-sling-junit-bundles.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JUnit server-side testing support bundles&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;: Is that hard dependency really desired?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12923977">SLING-5401</key>
            <summary>JUnit Core has hard dependency on Logback</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Dec 2015 11:03:15 +0000</created>
                <updated>Sat, 15 Jul 2017 07:50:37 +0000</updated>
                            <resolved>Wed, 23 Dec 2015 12:29:44 +0000</resolved>
                                    <version>JUnit Core 1.0.12</version>
                    <version>JUnit Core 1.0.14</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15069522" author="bdelacretaz" created="Wed, 23 Dec 2015 11:17:05 +0000"  >&lt;p&gt;AFAICS all the &lt;tt&gt;Import-Package ch.qos.logback.*&lt;/tt&gt; statements of the junit.core bundle (in trunk) have &lt;tt&gt;resolution:=optional&lt;/tt&gt;, so the bundle should start even if those packages are not available. &lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;TestLogServlet&lt;/tt&gt; should just be unavailable in such a case - I haven&apos;t tested that though.&lt;/p&gt;

&lt;p&gt;Did I miss something, or is something else getting in your way with Karaf?&lt;/p&gt;</comment>
                            <comment id="15069577" author="olli" created="Wed, 23 Dec 2015 12:29:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, you&apos;re right. The import is optional and the bundle is in state &lt;tt&gt;active&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-12-23 13:14:21,678 | ERROR | pool-43-thread-1 | core                             | 166 - org.apache.sling.junit.core - 1.0.15.SNAPSHOT | BundleComponentActivator : Bundle [166] Unexpected failure enabling component holder org.apache.sling.junit.impl.servlet.TestLogServlet
java.lang.NoClassDefFoundError: ch/qos/logback/core/Appender
	at java.lang.Class.getDeclaredMethods0(Native Method)[:1.8.0_65]
	at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)[:1.8.0_65]
	at java.lang.Class.getDeclaredMethods(Class.java:1975)[:1.8.0_65]
	at org.apache.felix.scr.impl.helper.BindMethod.getServiceObjectAssignableMethod(BindMethod.java:454)
	at org.apache.felix.scr.impl.helper.BindMethod.doFindMethod(BindMethod.java:186)
	at org.apache.felix.scr.impl.helper.BaseMethod.findMethod(BaseMethod.java:171)
	at org.apache.felix.scr.impl.helper.BaseMethod.access$400(BaseMethod.java:37)
	at org.apache.felix.scr.impl.helper.BaseMethod$NotResolved.resolve(BaseMethod.java:558)
	at org.apache.felix.scr.impl.helper.BaseMethod$NotResolved.methodExists(BaseMethod.java:580)
	at org.apache.felix.scr.impl.helper.BaseMethod.methodExists(BaseMethod.java:513)
	at org.apache.felix.scr.impl.helper.BindMethod.getServiceObject(BindMethod.java:643)
	at org.apache.felix.scr.impl.manager.DependencyManager.getServiceObject(DependencyManager.java:2137)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.prebind(DependencyManager.java:1048)
	at org.apache.felix.scr.impl.manager.DependencyManager.prebind(DependencyManager.java:1457)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.collectDependencies(AbstractComponentManager.java:983)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:812)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:724)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:399)
	at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:676)
	at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:339)[112:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:360)[112:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.Activator.access$000(Activator.java:53)[112:org.apache.felix.scr:2.0.2]
	at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:260)[112:org.apache.felix.scr:2.0.2]
	at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)[112:org.apache.felix.scr:2.0.2]
	at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)[112:org.apache.felix.scr:2.0.2]
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)[org.osgi.core-6.0.0.jar:]
	at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)[org.osgi.core-6.0.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:517)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4541)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2172)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:984)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.karaf.features.internal.service.FeaturesServiceImpl.startBundle(FeaturesServiceImpl.java:1189)[9:org.apache.karaf.features.core:4.0.3]
	at org.apache.karaf.features.internal.service.Deployer.deploy(Deployer.java:836)[9:org.apache.karaf.features.core:4.0.3]
	at org.apache.karaf.features.internal.service.FeaturesServiceImpl.doProvision(FeaturesServiceImpl.java:1079)[9:org.apache.karaf.features.core:4.0.3]
	at org.apache.karaf.features.internal.service.FeaturesServiceImpl$1.call(FeaturesServiceImpl.java:975)[9:org.apache.karaf.features.core:4.0.3]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)[:1.8.0_65]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)[:1.8.0_65]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)[:1.8.0_65]
	at java.lang.Thread.run(Thread.java:745)[:1.8.0_65]
Caused by: java.lang.ClassNotFoundException: ch.qos.logback.core.Appender not found by org.apache.sling.junit.core [166]
	at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1574)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:79)[org.apache.felix.framework-5.4.0.jar:]
	at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2018)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)[:1.8.0_65]
	... 44 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are several things getting in my way with testing against Karaf, but as I was close to 100% success and Sling is running fine in production on Karaf I&apos;m close to removing &lt;tt&gt;org.apache.sling.launchpad.karaf-launchpad-oak-tar-integration-tests&lt;/tt&gt; finally. It&apos;s maybe not worth the effort to maintain that module.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q94v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5400] Cannot checkout GIT Repo on Windows 7</title>
                <link>https://issues.apache.org/jira/browse/SLING-5400</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When I tried to checkout the latest Sling GIT Repo I ran into an issue where Git reports a file too long issue. That file is created, though, but subsequent interactions with Git fail as the file is marked as deleted but cannot be handled.&lt;/p&gt;

&lt;p&gt;The file is:&lt;/p&gt;

&lt;p&gt;contrib/extensions/distribution/sample/src/main/resources/SLING-&lt;br/&gt;
CONTENT/libs/sling/distribution/install.author/impersonate-publish-&lt;br/&gt;
reverse/org.apache.sling.distribution.trigger.impl.ScheduledDistribut&lt;br/&gt;
ionTriggerFactory-impersonate-publish-reverse-scheduled.json&lt;/p&gt;

&lt;p&gt;The rest seems to checkout fine and I was able to build.&lt;/p&gt;

&lt;p&gt;There is also another file in &apos;install-publish&apos; that deals with impersonate reverse.&lt;/p&gt;</description>
                <environment>Windows 7, JDK 1.7, Git 2.4.6</environment>
        <key id="12923876">SLING-5400</key>
            <summary>Cannot checkout GIT Repo on Windows 7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                            <label>Git</label>
                            <label>Windows</label>
                    </labels>
                <created>Tue, 22 Dec 2015 23:32:56 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:53 +0000</updated>
                            <resolved>Fri, 8 Jan 2016 09:26:19 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.14</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15069248" author="mpetria" created="Wed, 23 Dec 2015 06:55:19 +0000"  >&lt;p&gt;Will it work if you use &lt;tt&gt;git config --system core.longpaths true&lt;/tt&gt;?&lt;br/&gt;
UPDATE: I also committed revision 1721501 with shortened names for that file.&lt;/p&gt;</comment>
                            <comment id="15069773" author="schaefa" created="Wed, 23 Dec 2015 15:57:46 +0000"  >&lt;p&gt;Yes, that did the trick even though under Windows I couldn&apos;t use --system (no write permissions) but had to use --global instead. That said afterwards the checkout went through without any problems. Thanks.&lt;/p&gt;</comment>
                            <comment id="15088950" author="rombert" created="Fri, 8 Jan 2016 09:21:58 +0000"  >&lt;p&gt;Can this be resolved then?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q8if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5398] WebConsole plugin for FS ClassLoader can&apos;t load files on windows</title>
                <link>https://issues.apache.org/jira/browse/SLING-5398</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;On an windows environment the FSClassLoaderWebConsole#isValid method always return false because the root path of the fsclassloader may contain relative path information e.g. D:\aem\crx-quickstart\opt\helpers..\..\launchpad\felix\bundle445\data\classes&lt;/p&gt;</description>
                <environment>Windows</environment>
        <key id="12923732">SLING-5398</key>
            <summary>WebConsole plugin for FS ClassLoader can&apos;t load files on windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="bupauli">Burkhard Pauli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Dec 2015 12:49:36 +0000</created>
                <updated>Sat, 24 Dec 2016 12:26:39 +0000</updated>
                            <resolved>Tue, 22 Dec 2015 13:33:55 +0000</resolved>
                                    <version>File System ClassLoader 1.0.2</version>
                                    <fixVersion>File System ClassLoader 1.0.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15068120" author="rombert" created="Tue, 22 Dec 2015 13:33:59 +0000"  >&lt;p&gt;Fix applied in &lt;a href=&quot;https://svn.apache.org/r1721395&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1721395&lt;/a&gt;, thanks for the contribution!&lt;/p&gt;</comment>
                            <comment id="15068121" author="githubbot" created="Tue, 22 Dec 2015 13:34:10 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/120&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/sling/pull/120]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q7mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5396] Exported packages should be processed immediately</title>
                <link>https://issues.apache.org/jira/browse/SLING-5396</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Exported packages should be processed immediately and added to the queue and only afterwards deleted from the remote endpoint.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12923695">SLING-5396</key>
            <summary>Exported packages should be processed immediately</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Dec 2015 08:35:11 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:32 +0000</updated>
                            <resolved>Thu, 4 Feb 2016 13:31:40 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.14</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15067750" author="mpetria" created="Tue, 22 Dec 2015 08:40:38 +0000"  >&lt;p&gt;Committed revision 1721316.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q7e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5395] Correctly set either ProviderType or ConsumerType on the interfaces of the validation api bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-5395</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12923397">SLING-5395</key>
            <summary>Correctly set either ProviderType or ConsumerType on the interfaces of the validation api bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Dec 2015 11:09:03 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:36 +0000</updated>
                            <resolved>Thu, 24 Dec 2015 11:28:10 +0000</resolved>
                                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15070902" author="kwin" created="Thu, 24 Dec 2015 11:28:03 +0000"  >&lt;p&gt;Fixed with r1721611.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q5k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5389] Sling Models: Do not swallow PostConstruct exceptions</title>
                <link>https://issues.apache.org/jira/browse/SLING-5389</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4161&quot; title=&quot;Support Sling Validation through a new field of the Model annotation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4161&quot;&gt;&lt;del&gt;SLING-4161&lt;/del&gt;&lt;/a&gt; introduced a special handling for postconstruct errors (in ModelAdapterFactory):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;AdapterType&amp;gt; AdapterType getAdapter(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; adaptable, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;AdapterType&amp;gt; type) {
        Result&amp;lt;AdapterType&amp;gt; result = internalCreateModel(adaptable, type);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!result.wasSuccessfull()) {
            &lt;span class=&quot;code-comment&quot;&gt;// treat post-construct and validation exceptions differently, because they are sometimes used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; flow-control or validation purposes
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (result.getThrowable() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PostConstructException || result.getThrowable() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; InvalidModelException) {
                log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not adapt to model&quot;&lt;/span&gt;, result.getThrowable());
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                log.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not adapt to model&quot;&lt;/span&gt;, result.getThrowable());
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result.getValue();
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;that means that all exceptions that are caught in a &lt;tt&gt;@PostConstruct&lt;/tt&gt; annotated method are logged only in debug level. even if it&apos;s only a NPE in the code.&lt;/p&gt;

&lt;p&gt;this makes identifying errors in PostConstruct methods very hard. we need to come up with a better solution to differentiate between validation errors not to log as errors and real errors like an NPE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12922986">SLING-5389</key>
            <summary>Sling Models: Do not swallow PostConstruct exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>models</label>
                    </labels>
                <created>Fri, 18 Dec 2015 09:49:31 +0000</created>
                <updated>Thu, 28 May 2020 10:20:10 +0000</updated>
                            <resolved>Fri, 8 Jan 2016 09:55:40 +0000</resolved>
                                    <version>Sling Models Impl 1.2.4</version>
                                    <fixVersion>Sling Models Impl 1.2.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15063771" author="sseifert@pro-vision.de" created="Fri, 18 Dec 2015 09:50:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - can you have a look? you have most experience with the sling models-validation integration and introduced this change.&lt;/p&gt;</comment>
                            <comment id="15063794" author="kwin" created="Fri, 18 Dec 2015 10:25:28 +0000"  >&lt;p&gt;Actually this change is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4767&quot; title=&quot;Optional sub models are logged as warn if they cannot be adapted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4767&quot;&gt;&lt;del&gt;SLING-4767&lt;/del&gt;&lt;/a&gt;. I will have a look.&lt;/p&gt;</comment>
                            <comment id="15088986" author="kwin" created="Fri, 8 Jan 2016 09:55:02 +0000"  >&lt;p&gt;It should be like the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In case &lt;tt&gt;adaptTo()&lt;/tt&gt; failed (i.e. returns null) expose the failure in the log with level WARN.&lt;/li&gt;
	&lt;li&gt;In case injection failed but a default was given or injection was optional, only log with level DEBUG (no matter whether this was due to a PostConstructException or any other exception)&lt;br/&gt;
No special handling for &lt;tt&gt;InvalidModelException&lt;/tt&gt; or &lt;tt&gt;PostConstructException&lt;/tt&gt; should be done at all.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Fixed with &lt;a href=&quot;http://svn.apache.org/r1723672&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1723672&lt;/a&gt; and &lt;a href=&quot;http://svn.apache.org/r1723673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1723673&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15098002" author="sseifert@pro-vision.de" created="Thu, 14 Jan 2016 11:10:51 +0000"  >&lt;p&gt;thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13307993">SLING-9478</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12755108">SLING-4161</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13196792">SLING-8079</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12834150">SLING-4767</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q313:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5383] Provisioning model does not allow &apos;=&apos; sign in a string config value</title>
                <link>https://issues.apache.org/jira/browse/SLING-5383</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Adding an &quot;=&quot; sign in a String configuration value results in an exception when the provisioning model is parsed. I should be able to have add an &quot;=&quot; sign in my config values.&lt;/p&gt;

&lt;p&gt;To reproduce, just add the following at the bottom of &lt;tt&gt;.../checkouts/sling/launchpad/builder/src/main/provisioning/sling.txt&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  org.foo.bar
    key=&lt;span class=&quot;code-quote&quot;&gt;&quot;val=val&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then run &lt;tt&gt;mvn install&lt;/tt&gt; and you&apos;ll get the following error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] Internal error: java.lang.IllegalArgumentException: Unable to read configuration properties: Configuration [pid=org.foo.bar, factoryPid=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, properties={:rawconfig.format=felixca, :rawconfig.mode=overwrite, :rawconfig=key=&lt;span class=&quot;code-quote&quot;&gt;&quot;val=val&quot;&lt;/span&gt;
[ERROR] }]: Unexpected token 34; expected: 61 (line=0, pos=18)
[ERROR] -&amp;gt; [Help 1]
org.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Unable to read configuration properties: Configuration [pid=org.foo.bar, factoryPid=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, properties={:rawconfig.format=felixca, :rawconfig.mode=overwrite, :rawconfig=key=&lt;span class=&quot;code-quote&quot;&gt;&quot;val=val&quot;&lt;/span&gt;
}]
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:168)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.IllegalArgumentException: Unable to read configuration properties: Configuration [pid=org.foo.bar, factoryPid=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, properties={:rawconfig.format=felixca, :rawconfig.mode=overwrite, :rawconfig=key=&lt;span class=&quot;code-quote&quot;&gt;&quot;val=val&quot;&lt;/span&gt;
}]
	at org.apache.sling.provisioning.model.ModelUtility.getProcessedConfiguration(ModelUtility.java:516)
	at org.apache.sling.provisioning.model.ModelUtility.getEffectiveModel(ModelUtility.java:316)
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.addDependencies(DependencyLifecycleParticipant.java:149)
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.addDependencies(DependencyLifecycleParticipant.java:124)
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.afterProjectsRead(DependencyLifecycleParticipant.java:119)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:274)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	... 11 more
Caused by: java.io.IOException: Unexpected token 34; expected: 61 (line=0, pos=18)
	at org.apache.felix.cm.file.ConfigurationHandler.readFailure(ConfigurationHandler.java:681)
	at org.apache.felix.cm.file.ConfigurationHandler.readInternal(ConfigurationHandler.java:300)
	at org.apache.felix.cm.file.ConfigurationHandler.read(ConfigurationHandler.java:263)
	at org.apache.sling.provisioning.model.ModelUtility.getProcessedConfiguration(ModelUtility.java:509)
	... 17 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12922409">SLING-5383</key>
            <summary>Provisioning model does not allow &apos;=&apos; sign in a string config value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Dec 2015 15:54:26 +0000</created>
                <updated>Wed, 16 Dec 2015 18:43:45 +0000</updated>
                            <resolved>Wed, 16 Dec 2015 18:43:45 +0000</resolved>
                                    <version>Sling Provisioning Model 1.4.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15060245" author="mpetria" created="Wed, 16 Dec 2015 16:28:16 +0000"  >&lt;p&gt;AFAIK the &lt;tt&gt;=&lt;/tt&gt; sign must be escaped &lt;tt&gt;&quot;val\=val&quot;&lt;/tt&gt;. However that restriction can be probably dropped if only the first &lt;tt&gt;=&lt;/tt&gt; is semantic.&lt;/p&gt;</comment>
                            <comment id="15060323" author="cziegeler" created="Wed, 16 Dec 2015 17:11:10 +0000"  >&lt;p&gt;You&apos;re using the Felix CA format, which doesn&apos;t allow this, as Marius points escaping the = should work.&lt;br/&gt;
If you want to have this changed, this needs to be solved in the Apache Felix configuration admin implementation&lt;/p&gt;</comment>
                            <comment id="15060506" author="bosschaert" created="Wed, 16 Dec 2015 18:43:45 +0000"  >&lt;p&gt;Ok - not a Sling issue, so I&apos;m closing it... Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; for explaining.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pzgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5382] DiscoveryServiceImpl#doUpdateProperties may fail due to a NPE </title>
                <link>https://issues.apache.org/jira/browse/SLING-5382</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Observed&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;09.12.2015 14:19:13.175 *ERROR* [FelixStartLevel] org.apache.sling.discovery.oak [org.apache.sling.discovery.oak.OakDiscoveryService(186)] The updatedPropertyProvider method has thrown an exception (java.lang.NullPointerException)
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.discovery.oak.OakDiscoveryService.doUpdateProperties(OakDiscoveryService.java:476)
	at org.apache.sling.discovery.oak.OakDiscoveryService.bindPropertyProviderInteral(OakDiscoveryService.java:403)
	at org.apache.sling.discovery.oak.OakDiscoveryService.updatedPropertyProvider(OakDiscoveryService.java:417)
	at sun.reflect.GeneratedMethodAccessor53.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)
	at org.apache.felix.scr.impl.helper.BindMethod.invoke(BindMethod.java:41)
	at org.apache.felix.scr.impl.manager.DependencyManager.invokeUpdatedMethod(DependencyManager.java:1706)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.invokeUpdatedMethod(SingleComponentManager.java:381)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.modifiedService(DependencyManager.java:349)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.modifiedService(DependencyManager.java:295)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerModified(ServiceTracker.java:1228)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerModified(ServiceTracker.java:1136)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:884)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)
	at org.apache.felix.framework.Felix.access$000(Felix.java:106)
	at org.apache.felix.framework.Felix$1.serviceChanged(Felix.java:420)
	at org.apache.felix.framework.ServiceRegistry.servicePropertiesModified(ServiceRegistry.java:571)
	at org.apache.felix.framework.ServiceRegistrationImpl.setProperties(ServiceRegistrationImpl.java:131)
	at org.apache.sling.event.impl.jobs.JobConsumerManager.unbindService(JobConsumerManager.java:364)
	at org.apache.sling.event.impl.jobs.JobConsumerManager.unbindJobConsumer(JobConsumerManager.java:262)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)
	at org.apache.felix.scr.impl.helper.BindMethod.invoke(BindMethod.java:41)
	at org.apache.felix.scr.impl.manager.DependencyManager.invokeUnbindMethod(DependencyManager.java:1774)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.invokeUnbindMethod(SingleComponentManager.java:393)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.removedService(DependencyManager.java:364)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.removedService(DependencyManager.java:295)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1241)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1136)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.untrack(ServiceTracker.java:996)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1175)
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)
	at org.apache.felix.framework.Felix.access$000(Felix.java:106)
	at org.apache.felix.framework.Felix$1.serviceChanged(Felix.java:420)
	at org.apache.felix.framework.ServiceRegistry.unregisterService(ServiceRegistry.java:170)
	at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:144)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.unregister(AbstractComponentManager.java:883)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.unregister(AbstractComponentManager.java:857)
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:140)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.unregisterService(AbstractComponentManager.java:925)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.doDeactivate(AbstractComponentManager.java:774)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.deactivateInternal(AbstractComponentManager.java:757)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.removedService(DependencyManager.java:1014)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.removedService(DependencyManager.java:915)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1241)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1136)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.untrack(ServiceTracker.java:996)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1175)
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)
	at org.apache.felix.framework.Felix.access$000(Felix.java:106)
	at org.apache.felix.framework.Felix$1.serviceChanged(Felix.java:420)
	at org.apache.felix.framework.ServiceRegistry.unregisterService(ServiceRegistry.java:170)
	at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:144)
	at com.adobe.cq.social.serviceusers.internal.impl.ServiceUserWrapperImpl.deactivate(ServiceUserWrapperImpl.java:127)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)
	at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:295)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.disposeImplementationObject(SingleComponentManager.java:342)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.deleteComponent(SingleComponentManager.java:157)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.doDeactivate(AbstractComponentManager.java:783)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.deactivateInternal(AbstractComponentManager.java:757)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.dispose(AbstractComponentManager.java:550)
	at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.disposeComponents(ConfigurableComponentHolder.java:725)
	at org.apache.felix.scr.impl.BundleComponentActivator.dispose(BundleComponentActivator.java:530)
	at org.apache.felix.scr.impl.Activator.disposeComponents(Activator.java:414)
	at org.apache.felix.scr.impl.Activator.access$300(Activator.java:53)
	at org.apache.felix.scr.impl.Activator$ScrExtension.destroy(Activator.java:273)
	at org.apache.felix.utils.extender.AbstractExtender$2.run(AbstractExtender.java:290)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at org.apache.felix.utils.extender.AbstractExtender.destroyExtension(AbstractExtender.java:312)
	at org.apache.felix.utils.extender.AbstractExtender.bundleChanged(AbstractExtender.java:186)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:517)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4541)
	at org.apache.felix.framework.Felix.stopBundle(Felix.java:2600)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1389)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;11.12.2015 04:37:52.295 *ERROR* [pool-74-thread-1] org.apache.sling.commons.scheduler.impl.QuartzScheduler Exception during job execution of org.apache.sling.discovery.oak.pinger.OakViewChecker@7e1e1c3d : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.discovery.oak.OakDiscoveryService.doUpdateProperties(OakDiscoveryService.java:476)
	at org.apache.sling.discovery.oak.OakDiscoveryService.updateProperties(OakDiscoveryService.java:545)
	at org.apache.sling.discovery.oak.pinger.OakViewChecker.updateProperties(OakViewChecker.java:330)
	at org.apache.sling.discovery.base.commons.BaseViewChecker.issueHeartbeat(BaseViewChecker.java:213)
	at org.apache.sling.discovery.base.commons.BaseViewChecker.heartbeatAndCheckView(BaseViewChecker.java:181)
	at org.apache.sling.discovery.base.commons.BaseViewChecker.run(BaseViewChecker.java:167)
	at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:115)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12922340">SLING-5382</key>
            <summary>DiscoveryServiceImpl#doUpdateProperties may fail due to a NPE </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Dec 2015 11:05:59 +0000</created>
                <updated>Mon, 3 Aug 2020 08:42:51 +0000</updated>
                            <resolved>Wed, 27 Jan 2016 15:50:07 +0000</resolved>
                                    <version>Discovery Oak 1.2.0</version>
                                    <fixVersion>Discovery Oak 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15059832" author="marett" created="Wed, 16 Dec 2015 11:08:58 +0000"  >&lt;p&gt;The &lt;tt&gt;config&lt;/tt&gt; field should be checked for &lt;tt&gt;null&lt;/tt&gt; as it could be that the framework binds a &lt;tt&gt;PropertyProvider&lt;/tt&gt; instance before the &lt;tt&gt;config&lt;/tt&gt; (thus before the component is active).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Resource myInstance = ResourceHelper
                    .getOrCreateResource(
                            resourceResolver,
                            config.getClusterInstancesPath()
                                    + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + slingId + &lt;span class=&quot;code-quote&quot;&gt;&quot;/properties&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15113800" author="schikkeg" created="Sat, 23 Jan 2016 15:50:11 +0000"  >&lt;p&gt;That&apos;s correct. Easy to reproduce. Stop or disable the Config component and try to stop the server. Get the same message.   &lt;/p&gt;

&lt;p&gt;Out of the context strange issue i am facing is if server stoped with npe on discoveryservice matching the stacktrace reported in this jira. On next start, any code deploy (fragement bundle) make aem unusable.  Currently as a trial self modified the code to handle this npe &amp;amp; code deploy sounds sussesfully.  Will be nice if this issue get fixed offically to carry fwd negative effect down the stream. &lt;/p&gt;</comment>
                            <comment id="15119643" author="egli" created="Wed, 27 Jan 2016 15:50:07 +0000"  >&lt;p&gt;Fixed in rev 1727036&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13320616">SLING-9625</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pz1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5381] NPE in QuartzScheduler</title>
                <link>https://issues.apache.org/jira/browse/SLING-5381</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Observed in our logs&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;10.12.2015 23:34:56.952 *ERROR* [FelixDispatchQueue] org.apache.sling.commons.scheduler FrameworkEvent ERROR (java.lang.NullPointerException)
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.commons.scheduler.impl.QuartzScheduler.bundleChanged(QuartzScheduler.java:160)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)
	at org.apache.felix.framework.util.EventDispatcher.run(EventDispatcher.java:1148)
	at org.apache.felix.framework.util.EventDispatcher.access$000(EventDispatcher.java:55)
	at org.apache.felix.framework.util.EventDispatcher$1.run(EventDispatcher.java:103)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12922334">SLING-5381</key>
            <summary>NPE in QuartzScheduler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Dec 2015 10:50:07 +0000</created>
                <updated>Mon, 21 Dec 2015 08:40:56 +0000</updated>
                            <resolved>Thu, 17 Dec 2015 14:20:45 +0000</resolved>
                                    <version>Commons Scheduler 2.4.12</version>
                                    <fixVersion>Commons Scheduler 2.4.14</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15059825" author="marett" created="Wed, 16 Dec 2015 10:55:28 +0000"  >&lt;p&gt;Seems harmless, just a missing null check after&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/blob/7c4a53755aed1211c9af313a3973cd2543a7bbe0/bundles/commons/scheduler/src/main/java/org/apache/sling/commons/scheduler/impl/QuartzScheduler.java#L159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/7c4a53755aed1211c9af313a3973cd2543a7bbe0/bundles/commons/scheduler/src/main/java/org/apache/sling/commons/scheduler/impl/QuartzScheduler.java#L159&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15062093" author="cziegeler" created="Thu, 17 Dec 2015 14:20:45 +0000"  >&lt;p&gt;Added the extra null check, this seems to be race condition with the whiteboard unregistering services and the bundle being stopped.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pz07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5380] NPE in TopologyWebConsolePlugin addDiscoveryLiteHistoryEntry</title>
                <link>https://issues.apache.org/jira/browse/SLING-5380</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In our logs we sometimes observe a NPE at start up.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

error.log contains the unexpected line: 14.12.2015 16:52:50.791 *ERROR* [Discovery-AsyncEventSender] org.apache.sling.discovery.oak.TopologyWebConsolePlugin addDiscoveryLiteHistoryEntry: Exception: java.lang.NullPointerException
Stacktrace

junit.framework.AssertionFailedError: error.log contains the unexpected line: 14.12.2015 16:52:50.791 *ERROR* [Discovery-AsyncEventSender] org.apache.sling.discovery.oak.TopologyWebConsolePlugin addDiscoveryLiteHistoryEntry: Exception: java.lang.NullPointerException

	at junit.framework.Assert.fail(Assert.java:57)
	at com.adobe.granite.quickstart.it.AAALogFileIT.testLogFiles(AAALogFileIT.java:100)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12922331">SLING-5380</key>
            <summary>NPE in TopologyWebConsolePlugin addDiscoveryLiteHistoryEntry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Dec 2015 10:40:01 +0000</created>
                <updated>Wed, 16 Dec 2015 10:47:53 +0000</updated>
                                            <version>Discovery Oak 1.2.0</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15059820" author="marett" created="Wed, 16 Dec 2015 10:47:53 +0000"  >&lt;p&gt;It may be that &lt;tt&gt;resourceResolverFactory&lt;/tt&gt; is &lt;tt&gt;null&lt;/tt&gt; in the &lt;tt&gt;getResourceResolver&lt;/tt&gt; thus causing the NPE.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pyzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5375] OakSlingRepositoryManager is missing name property for use by RMI and JNDI registries</title>
                <link>https://issues.apache.org/jira/browse/SLING-5375</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when I save the RMI configuration in sling 8 the rmi port 1099 starts listening. now in sling 8 it doesn&apos;t work. I see the following error in console &lt;/p&gt;

&lt;p&gt;&quot;registerRepositroy: Repository not to bew registrated - Service 464 has no name property, nothing to unregister&quot;&lt;/p&gt;

&lt;p&gt;When I look for 464 in my instance I find the following service:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.jcr.api.SlingRepository, javax.jcr.Repository&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;What&apos;s wrong? Is there a configuration missing? Is it a bug? Do you can fix it? &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12921735">SLING-5375</key>
            <summary>OakSlingRepositoryManager is missing name property for use by RMI and JNDI registries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="thodte">Christoph Thodte</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2015 18:44:08 +0000</created>
                <updated>Wed, 9 Nov 2016 15:11:51 +0000</updated>
                            <resolved>Thu, 17 Dec 2015 17:59:52 +0000</resolved>
                                    <version>JCR Oak Server 1.0.0</version>
                                    <fixVersion>JCR Oak Server 1.1.0</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15057633" author="bdelacretaz" created="Tue, 15 Dec 2015 08:47:46 +0000"  >&lt;p&gt;Please indicate exactly what &quot;save the RMI configuration&quot; means so that we can reproduce your issue.&lt;/p&gt;</comment>
                            <comment id="15057638" author="thodte" created="Tue, 15 Dec 2015 08:51:32 +0000"  >&lt;p&gt;Saving means i open system/console then i choose configuration. There i open the rmi config and push the button save.&lt;/p&gt;

&lt;p&gt;In sling 7 was this step nescessary to Start rmi access to repo  initial&lt;/p&gt;</comment>
                            <comment id="15057640" author="bdelacretaz" created="Tue, 15 Dec 2015 08:53:42 +0000"  >&lt;p&gt;Thanks - which is &quot; the rmi config&quot;?  The OSGi console will use an URL like &lt;a href=&quot;http://localhost:4502/system/console/configMgr/PATH&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/system/console/configMgr/PATH&lt;/a&gt; , we need to know what PATH is, just to make sure there&apos;s no confusion.&lt;/p&gt;</comment>
                            <comment id="15057661" author="olli" created="Tue, 15 Dec 2015 09:04:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, I looked at the sources and I think the &lt;tt&gt;name&lt;/tt&gt; property is missing from &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt;. &lt;tt&gt;SlingServerRepositoryManager&lt;/tt&gt; has:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    @Property(value = &quot;&quot;)
    public static final String REPOSITORY_REGISTRATION_NAME = &quot;name&quot;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thodte&quot; class=&quot;user-hover&quot; rel=&quot;thodte&quot;&gt;thodte&lt;/a&gt;, can you add this property to &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt;, rebuild &lt;tt&gt;oak-server&lt;/tt&gt; and check if it works for you?&lt;/p&gt;</comment>
                            <comment id="15057726" author="thodte" created="Tue, 15 Dec 2015 09:48:11 +0000"  >&lt;p&gt;Sorry I can&apos;t build. I&apos;n no developer of sling &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I want to use it in my application &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;But what you write sounds like the problem.&lt;/p&gt;</comment>
                            <comment id="15057730" author="thodte" created="Tue, 15 Dec 2015 09:48:14 +0000"  >&lt;p&gt;Sorry I can&apos;t build. I&apos;n no developer of sling &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I want to use it in my application &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;But what you write sounds like the problem.&lt;/p&gt;</comment>
                            <comment id="15062440" author="olli" created="Thu, 17 Dec 2015 17:59:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1720620&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1720620&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pvbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5373] Allow different severities per validator</title>
                <link>https://issues.apache.org/jira/browse/SLING-5373</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;It would be good to be able to define a severity either on the validator itself or within the validation model. That would allow to later on differentiate the handling on how to treat those violations. &lt;br/&gt;
Depending on the violation severity one could decide to either throw an exception or just expose the violation failure message for informational purposes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12921597">SLING-5373</key>
            <summary>Allow different severities per validator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2015 08:18:34 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:27 +0000</updated>
                            <resolved>Fri, 11 Mar 2016 11:15:39 +0000</resolved>
                                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15190814" author="kwin" created="Fri, 11 Mar 2016 11:15:41 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://svn.apache.org/r1734074&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1734074&lt;/a&gt;. Now you can specify in the model a severity.&lt;/p&gt;</comment>
                            <comment id="15190910" author="olli" created="Fri, 11 Mar 2016 13:20:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, how about adding a second constructor in &lt;tt&gt;DefaultValidationFailure&lt;/tt&gt; without &lt;tt&gt;severity&lt;/tt&gt; instead checking for &lt;tt&gt;null&lt;/tt&gt;? It&apos;s even less typing when using &lt;tt&gt;0&lt;/tt&gt; as value instead of &lt;tt&gt;null&lt;/tt&gt; with the existing one.&lt;/p&gt;</comment>
                            <comment id="15192280" author="kwin" created="Sun, 13 Mar 2016 10:26:19 +0000"  >&lt;p&gt;Yes, good idea. Still to make life easier for Validator developers I am not too sure that it is a good idea, that they must transfer all relevant information from &lt;tt&gt;ValidationContext&lt;/tt&gt; to &lt;tt&gt;ValidationResult&lt;/tt&gt;. Currently it is location and severity.&lt;br/&gt;
With having an additional constructor lacking the severity, it is very easy to forget to transfer the &lt;tt&gt;severity&lt;/tt&gt; into the failure.&lt;/p&gt;

&lt;p&gt;One optimization possibility would be two different &lt;tt&gt;ValidationResult&lt;/tt&gt; types. One is for the consumer, containing all information, the other one contains only the validator-specific information. So the Validator developers would only need to fill the latter and the &lt;tt&gt;ValidationServiceImpl&lt;/tt&gt; would transform that into the former. But then it is no longer possible for a &lt;tt&gt;Validator&lt;/tt&gt; to overwrite e.g. the severity.&lt;/p&gt;

&lt;p&gt;Another possibility is to provide a constructor for &lt;tt&gt;DefaultValidationResult&lt;/tt&gt; taking the whole &lt;tt&gt;ValidationContext&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Any opinions?&lt;/p&gt;</comment>
                            <comment id="15197977" author="olli" created="Wed, 16 Mar 2016 19:28:20 +0000"  >&lt;p&gt;Did you mix up &lt;tt&gt;DefaultValidationResult&lt;/tt&gt; and &lt;tt&gt;DefaultValidationFailure&lt;/tt&gt; above?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13044557">SLING-6531</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13048360">SLING-6610</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2puh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5372] osgi-mock: MockBundleContext.getServices(Class,String) throws NPE when no services found</title>
                <link>https://issues.apache.org/jira/browse/SLING-5372</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;MockBundleContext.getServices(Class,String) throws NPE when no services found&lt;/p&gt;</description>
                <environment></environment>
        <key id="12920892">SLING-5372</key>
            <summary>osgi-mock: MockBundleContext.getServices(Class,String) throws NPE when no services found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Thu, 10 Dec 2015 21:38:52 +0000</created>
                <updated>Thu, 10 Dec 2015 21:39:22 +0000</updated>
                            <resolved>Thu, 10 Dec 2015 21:39:22 +0000</resolved>
                                    <version>Testing OSGi Mock 2.0.0</version>
                                    <fixVersion>Testing OSGi Mock 2.0.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15051695" author="sseifert@pro-vision.de" created="Thu, 10 Dec 2015 21:39:22 +0000"  >&lt;p&gt;Completed: At revision: 1719219  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pqnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5370] Confusing warning about sling.default.parameter.encoding in SlingMainServlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-5370</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The SlingMainServlet currently outputs a confusing warning about the deprecated &lt;tt&gt;sling.default.parameter.encoding&lt;/tt&gt; configuration parameter, pointing to an alternate configuration that does not exist.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12920737">SLING-5370</key>
            <summary>Confusing warning about sling.default.parameter.encoding in SlingMainServlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Dec 2015 11:09:37 +0000</created>
                <updated>Thu, 26 Jan 2017 09:24:46 +0000</updated>
                            <resolved>Thu, 10 Dec 2015 11:16:39 +0000</resolved>
                                    <version>Engine 2.4.4</version>
                                    <fixVersion>Engine 2.4.6</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15050609" author="bdelacretaz" created="Thu, 10 Dec 2015 11:16:39 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1719064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1719064&lt;/a&gt;, the warning now points to the correct config PID:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;10.12.2015 12:13:53.726 *WARN* [FelixStartLevel] org.apache.sling.engine.impl.SlingMainServlet Please configure the 
&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; request parameter encoding using the
&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.sling.engine.parameters&apos;&lt;/span&gt; configuration PID; the property
sling.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.parameter.encoding=UTF-42 is obsolete and ignored

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12696208">SLING-3403</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ppov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5366] Wrong handling of bundle/service ref object in SlingLogger</title>
                <link>https://issues.apache.org/jira/browse/SLING-5366</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The MainDelegate embeds a SlingLogger which is an extension of the Apache Felix Logger. The doLog method is overriden taking an optional bundle and an optional service reference.&lt;br/&gt;
The method is not checking whether bundle is null - in addition if the service reference is null, the bundle argument is null.&lt;br/&gt;
bundle and service ref are actually mutual exclusive: either both are null, or one of them - but they can&apos;t both be set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12920084">SLING-5366</key>
            <summary>Wrong handling of bundle/service ref object in SlingLogger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Dec 2015 13:57:19 +0000</created>
                <updated>Sun, 3 Jan 2016 14:40:55 +0000</updated>
                            <resolved>Tue, 8 Dec 2015 15:42:08 +0000</resolved>
                                    <version>Launchpad Base 2.6.6</version>
                    <version>Launchpad Base 2.6.8</version>
                                    <fixVersion>Launchpad Base 2.6.10</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15046980" author="cziegeler" created="Tue, 8 Dec 2015 15:42:08 +0000"  >&lt;p&gt;Fixed in rev 1718635&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2plnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5361] Plain string expressions shouldn&apos;t be evaluated</title>
                <link>https://issues.apache.org/jira/browse/SLING-5361</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when adding simple string expressions to a sling pipe, there are ERROR messages at execution mentionning the generated expression is not evaluated correctly. JS Engine shouldn&apos;t be called in the first place. This has been fixed between initial donation and effective commit (see &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;). &lt;br/&gt;
will attach a patch with failing test &amp;amp; fix.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/npeltier/sling-pipes/issues/10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/npeltier/sling-pipes/issues/10&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12919853">SLING-5361</key>
            <summary>Plain string expressions shouldn&apos;t be evaluated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 21:43:25 +0000</created>
                <updated>Fri, 14 Oct 2016 08:03:56 +0000</updated>
                            <resolved>Sat, 2 Jan 2016 19:48:52 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15045805" author="npeltier" created="Mon, 7 Dec 2015 21:46:46 +0000"  >&lt;p&gt;here is the patch, please review&lt;/p&gt;</comment>
                            <comment id="15058052" author="npeltier" created="Tue, 15 Dec 2015 13:31:26 +0000"  >&lt;p&gt;setting to major so the issue is not filtered out &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, guess it&apos;s important in the context of the tool&lt;/p&gt;</comment>
                            <comment id="15076646" author="olli" created="Sat, 2 Jan 2016 19:48:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1722655&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1722655&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12776186" name="issue10.patch" size="4807" author="npeltier" created="Mon, 7 Dec 2015 21:46:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pk8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5358] Description for OSGi configuration of org.apache.sling.servlets.resolver.SlingServletResolver servletresolver.servletRoot is wrong</title>
                <link>https://issues.apache.org/jira/browse/SLING-5358</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The description of that property of the OSGi configuration says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The default root path assumed when registering a Servlet whose Servlet registration properties define a relative path. The default value is &quot;/apps&quot;. This path should be part of the search path configured in the Resource Resolver Factory otherwise a thus registered servlet may not be found.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/resources/OSGI-INF/metatype/metatype.properties#L36&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/resources/OSGI-INF/metatype/metatype.properties#L36&lt;/a&gt;&lt;br/&gt;
The default value is actually 0 not &quot;/apps&quot; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L137&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12919778">SLING-5358</key>
            <summary>Description for OSGi configuration of org.apache.sling.servlets.resolver.SlingServletResolver servletresolver.servletRoot is wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 17:19:31 +0000</created>
                <updated>Mon, 8 Feb 2016 22:13:19 +0000</updated>
                            <resolved>Mon, 18 Jan 2016 10:50:08 +0000</resolved>
                                    <version>Servlets Resolver 2.3.8</version>
                                    <fixVersion>Servlets Resolver 2.4.0</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15105096" author="kwin" created="Mon, 18 Jan 2016 10:50:08 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1725219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1725219&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12421898">SLING-910</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pjrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5354] Thread Pool max-thread-age config not taken into account</title>
                <link>https://issues.apache.org/jira/browse/SLING-5354</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Changing the new &lt;tt&gt;maxThreadAge&lt;/tt&gt; config is not taking effect. The corresponding &lt;tt&gt;if&lt;/tt&gt; statement is missing in &lt;tt&gt;DefaultThreadPoolManager#createConfig&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12919624">SLING-5354</key>
            <summary>Thread Pool max-thread-age config not taken into account</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 09:38:47 +0000</created>
                <updated>Sun, 3 Jan 2016 13:46:54 +0000</updated>
                            <resolved>Mon, 7 Dec 2015 09:41:09 +0000</resolved>
                                    <version>Commons Threads 3.2.2</version>
                                    <fixVersion>Commons Threads 3.2.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15044658" author="jsedding" created="Mon, 7 Dec 2015 09:41:09 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1718266&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1718266&lt;/a&gt; and &lt;a href=&quot;https://svn.apache.org/r1718289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1718289&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pitj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5353] Test failures of WebDavDoubleSlashTest.testEmptyWorkspace</title>
                <link>https://issues.apache.org/jira/browse/SLING-5353</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There are  test failures of &lt;tt&gt;WebDavDoubleSlashTest.testEmptyWorkspace&lt;/tt&gt; on jenkins. Also, I could locally reproduce the failure - not sure yet if it is deterministic.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;expected:&amp;lt;404&amp;gt; but was:&amp;lt;207&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The response body is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&amp;gt;
&amp;lt;D:multistatus xmlns:D=&quot;DAV:&quot;&amp;gt;
    &amp;lt;D:response&amp;gt;
        &amp;lt;D:href&amp;gt;http://localhost:41400/dav//test/WebDavDoubleSlashTest/d074a834-4daf-4037-aa1b-ec6214c5a605/&amp;lt;/D:href&amp;gt;
        &amp;lt;D:propstat&amp;gt;
            &amp;lt;D:prop&amp;gt;
                &amp;lt;D:displayname&amp;gt;d074a834-4daf-4037-aa1b-ec6214c5a605&amp;lt;/D:displayname&amp;gt;
                &amp;lt;D:creationdate&amp;gt;1970-01-01T00:00:00Z&amp;lt;/D:creationdate&amp;gt;
                &amp;lt;D:iscollection&amp;gt;1&amp;lt;/D:iscollection&amp;gt;
                &amp;lt;D:resourcetype&amp;gt;
                    &amp;lt;D:collection/&amp;gt;
                &amp;lt;/D:resourcetype&amp;gt;
                &amp;lt;D:lockdiscovery/&amp;gt;
                &amp;lt;D:getlastmodified&amp;gt;Mon, 07 Dec 2015 08:07:32 GMT&amp;lt;/D:getlastmodified&amp;gt;
                &amp;lt;D:supportedlock&amp;gt;
                    &amp;lt;D:lockentry&amp;gt;
                        &amp;lt;D:lockscope&amp;gt;&amp;lt;D:exclusive/&amp;gt;&amp;lt;/D:lockscope&amp;gt;
                        &amp;lt;D:locktype&amp;gt;&amp;lt;D:write/&amp;gt;&amp;lt;/D:locktype&amp;gt;
                    &amp;lt;/D:lockentry&amp;gt;
                &amp;lt;/D:supportedlock&amp;gt;
            &amp;lt;/D:prop&amp;gt;
            &amp;lt;D:status&amp;gt;HTTP/1.1 200 OK&amp;lt;/D:status&amp;gt;
        &amp;lt;/D:propstat&amp;gt;
    &amp;lt;/D:response&amp;gt;
&amp;lt;/D:multistatus&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12919603">SLING-5353</key>
            <summary>Test failures of WebDavDoubleSlashTest.testEmptyWorkspace</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 08:18:42 +0000</created>
                <updated>Mon, 7 Dec 2015 13:02:49 +0000</updated>
                            <resolved>Mon, 7 Dec 2015 13:02:49 +0000</resolved>
                                    <version>Launchpad Integration Tests 1.0.0</version>
                                    <fixVersion>Launchpad Integration Tests 1.0.2</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15044551" author="jsedding" created="Mon, 7 Dec 2015 08:22:43 +0000"  >&lt;p&gt;Response body is printed now in case of a failure: &lt;a href=&quot;https://svn.apache.org/r1718260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1718260&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15044584" author="bdelacretaz" created="Mon, 7 Dec 2015 08:59:13 +0000"  >&lt;p&gt;As per &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4976&quot; title=&quot;Clarify handling of empty JCR workspace name in WebDAV URLs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4976&quot;&gt;&lt;del&gt;SLING-4976&lt;/del&gt;&lt;/a&gt; it looks like a 207 status is the &quot;old&quot; behavior of  org.apache.felix.http.jetty before V3.1.0, and from that version on we got a 404. Not sure why we&apos;d see a 207 now.&lt;/p&gt;</comment>
                            <comment id="15044875" author="cziegeler" created="Mon, 7 Dec 2015 13:02:29 +0000"  >&lt;p&gt;Previous Http Jetty version was using a method which compacts &quot;a//b&quot; to&lt;br/&gt;
&quot;a/b&quot;. That&apos;s why we started getting the 404.&lt;br/&gt;
This code is not executed anymore, and a//b stays like this - which&lt;br/&gt;
gives us the old behaviour of Http Jetty 2.x.&lt;/p&gt;

&lt;p&gt;Jetty standalone treats &quot;a//b&quot; as a different url as &quot;a/b&quot;, so it seems&lt;br/&gt;
the temporary behaviour of the last Http Jetty versions was&lt;br/&gt;
wrong/unexpected.&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed the test case in rev 1718342&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12860637">SLING-4976</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12861244">SLING-4987</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2piov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5351] Thymeleaf fails loading version from properties</title>
                <link>https://issues.apache.org/jira/browse/SLING-5351</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;Thymeleaf&lt;/tt&gt; class fails loading &lt;tt&gt;thymeleaf.properties&lt;/tt&gt; and parsing the &lt;tt&gt;version&lt;/tt&gt; property. Hence &lt;tt&gt;Thymeleaf.VERSION&lt;/tt&gt; is &lt;tt&gt;null&lt;/tt&gt; and so &lt;tt&gt;ThymeleafScriptEngineFactory#getLanguageVersion()&lt;/tt&gt; returns &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;03.12.2015 23:01:07.519 *INFO* [Background Install ...] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory Adding ScriptEngine Apache Sling Scripting Thymeleaf, 0.1.7-SNAPSHOT for language Thymeleaf, null
[...]
03.12.2015 23:01:07.522 *ERROR* [Background Install ...] org.apache.sling.scripting.core [org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory(135)] The bindScriptEngineFactory method has thrown an exception (java.lang.NullPointerException)
java.lang.NullPointerException: null
	at java.util.Hashtable.put(Hashtable.java:459)
	at org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory.postEvent(ScriptEngineManagerFactory.java:305)
	at org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory.bindScriptEngineFactory(ScriptEngineManagerFactory.java:263)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)
	at org.apache.felix.scr.impl.helper.BindMethod.invoke(BindMethod.java:41)
	at org.apache.felix.scr.impl.manager.DependencyManager.doInvokeBindMethod(DependencyManager.java:1660)
	at org.apache.felix.scr.impl.manager.DependencyManager.invokeBindMethod(DependencyManager.java:1636)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.invokeBindMethod(SingleComponentManager.java:370)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:319)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:295)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:987)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4560)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3542)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:330)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:295)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:987)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4560)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3542)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:399)
	at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:676)
	at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:339)
	at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:360)
	at org.apache.felix.scr.impl.Activator.access$000(Activator.java:53)
	at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:260)
	at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
	at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:913)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:834)
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:516)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4544)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2166)
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:977)
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:964)
	at org.apache.felix.webconsole.internal.core.InstallHelper.doRun(InstallHelper.java:67)
	at org.apache.felix.webconsole.internal.core.BaseUpdateInstallHelper.doRun(BaseUpdateInstallHelper.java:93)
	at org.apache.felix.webconsole.internal.core.BaseUpdateInstallHelper.run(BaseUpdateInstallHelper.java:123)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This breaks the output of Web Console (&lt;tt&gt;status-slingscripting&lt;/tt&gt;) also.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12918161">SLING-5351</key>
            <summary>Thymeleaf fails loading version from properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2015 22:42:21 +0000</created>
                <updated>Mon, 4 Jul 2016 20:59:05 +0000</updated>
                            <resolved>Wed, 6 Jan 2016 10:23:08 +0000</resolved>
                                                    <fixVersion>Scripting Thymeleaf 1.0.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15038762" author="olli" created="Thu, 3 Dec 2015 22:47:56 +0000"  >&lt;p&gt;(initial) fix added in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1717859&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1717859&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15085373" author="olli" created="Wed, 6 Jan 2016 10:23:08 +0000"  >&lt;p&gt;r1722960&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p9sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5350] Unable to set empty mixin types for a newly created node</title>
                <link>https://issues.apache.org/jira/browse/SLING-5350</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;javax.jcr.nodetype.ConstraintViolationException: Unable to perform operation. Node is protected.
	at org.apache.jackrabbit.core.ItemValidator.checkCondition(ItemValidator.java:276)
	at org.apache.jackrabbit.core.ItemValidator.checkModify(ItemValidator.java:248)
	at org.apache.jackrabbit.core.PropertyImpl.checkSetValue(PropertyImpl.java:278)
	at org.apache.jackrabbit.core.PropertyImpl.setValue(PropertyImpl.java:780)
	at org.apache.jackrabbit.core.NodeImpl$7.perform(NodeImpl.java:2086)
	at org.apache.jackrabbit.core.NodeImpl$7.perform(NodeImpl.java:2076)
	at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:216)
	at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
	at org.apache.jackrabbit.core.NodeImpl.setProperty(NodeImpl.java:2076)
	at org.apache.jackrabbit.core.NodeImpl.setProperty(NodeImpl.java:1825)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.updateNode(AddOrUpdateNodeCommand.java:299)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.update(AddOrUpdateNodeCommand.java:108)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.execute0(AddOrUpdateNodeCommand.java:85)
	at org.apache.sling.ide.impl.vlt.AddOrUpdateNodeCommand.execute0(AddOrUpdateNodeCommand.java:1)
	at org.apache.sling.ide.impl.vlt.JcrCommand.execute(JcrCommand.java:68)
	... 27 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12918037">SLING-5350</key>
            <summary>Unable to set empty mixin types for a newly created node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2015 15:34:48 +0000</created>
                <updated>Wed, 20 Sep 2017 13:12:20 +0000</updated>
                            <resolved>Thu, 3 Dec 2015 15:51:09 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.1.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15037964" author="rombert" created="Thu, 3 Dec 2015 15:51:01 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1717783&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1717783&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p91j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5349] Empty multi-valued properties are not correctly handled</title>
                <link>https://issues.apache.org/jira/browse/SLING-5349</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following file is incorrectly parsed:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;jcr:root xmlns:sling=&quot;http://sling.apache.org/jcr/sling/1.0&quot; xmlns:jcr=&quot;http://www.jcp.org/jcr/1.0&quot;
    jcr:primaryType=&quot;nt:unstructured&quot;
    labels=&quot;[]&quot;
    values=&quot;{Long}[]&quot;/&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12917996">SLING-5349</key>
            <summary>Empty multi-valued properties are not correctly handled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2015 12:36:47 +0000</created>
                <updated>Wed, 20 Sep 2017 13:12:19 +0000</updated>
                            <resolved>Thu, 3 Dec 2015 15:30:17 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.0.10</version>
                                    <fixVersion>Sling Eclipse IDE 1.1.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15037934" author="rombert" created="Thu, 3 Dec 2015 15:30:21 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1717781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1717781&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p8sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5347] java.lang.NoClassDefFoundError: org/w3c/dom/ElementTraversal</title>
                <link>https://issues.apache.org/jira/browse/SLING-5347</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4425&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-4425&lt;/a&gt;. I&apos;ve tried to remove &lt;tt&gt;org.apache.sling.fragment.xml&lt;/tt&gt; and replace it with &lt;tt&gt;org.apache.servicemix.specs/org.apache.servicemix.specs.jaxp-api-1.4/2.4.0&lt;/tt&gt; using &lt;tt&gt;Sling Launchpad 8&lt;/tt&gt;. This results into incompatibilities after restarting Sling:&lt;/p&gt;

&lt;p&gt;Reported exception:&lt;br/&gt;
ch.qos.logback.core.joran.spi.JoranException: Parser configuration error occurred&lt;br/&gt;
	at ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:88)&lt;br/&gt;
	at ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:59)&lt;br/&gt;
	at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:134)&lt;br/&gt;
	at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:99)&lt;br/&gt;
	at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:49)&lt;br/&gt;
	at ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:75)&lt;br/&gt;
	at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:150)&lt;br/&gt;
	at org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:85)&lt;br/&gt;
	at org.slf4j.impl.StaticLoggerBinder.&amp;lt;clinit&amp;gt;(StaticLoggerBinder.java:55)&lt;br/&gt;
	at org.slf4j.LoggerFactory.bind(LoggerFactory.java:129)&lt;br/&gt;
	at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:108)&lt;br/&gt;
	at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:302)&lt;br/&gt;
	at org.apache.sling.commons.log.logback.internal.Activator.isSlf4jInitialized(Activator.java:108)&lt;br/&gt;
	at org.apache.sling.commons.log.logback.internal.Activator.start(Activator.java:54)&lt;br/&gt;
	at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697)&lt;br/&gt;
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:2220)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2138)&lt;br/&gt;
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1365)&lt;br/&gt;
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:724)&lt;br/&gt;
Caused by: java.lang.ClassCastException: com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl cannot be cast to javax.xml.parsers.SAXParserFactory&lt;br/&gt;
	at javax.xml.parsers.SAXParserFactory.newInstance(SAXParserFactory.java:115)&lt;br/&gt;
	at ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:81)&lt;br/&gt;
	... 19 more&lt;/p&gt;</description>
                <environment>Sling Launchpad 8</environment>
        <key id="12917700">SLING-5347</key>
            <summary>java.lang.NoClassDefFoundError: org/w3c/dom/ElementTraversal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="hzimpel">Helge-Frank Zimpel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2015 20:01:41 +0000</created>
                <updated>Thu, 3 Dec 2015 23:04:03 +0000</updated>
                            <resolved>Thu, 3 Dec 2015 23:04:03 +0000</resolved>
                                    <version>Scripting Thymeleaf 0.0.6</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15037609" author="olli" created="Thu, 3 Dec 2015 10:16:20 +0000"  >&lt;p&gt;The attached patch against Launchpad 9-SNAPSHOT removes conflicting bundles and adds the ones required for Thymeleaf 2 and a sample application. I had to remove support for Subsystems also because of this exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Failed to auto configure default logger context
Reported exception:
ch.qos.logback.core.joran.spi.JoranException: Parser configuration error occurred
	at ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:88)
	at ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:59)
	at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:134)
	at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:99)
	at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:49)
	at ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:75)
	at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:150)
	at org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:85)
	at org.slf4j.impl.StaticLoggerBinder.&amp;lt;clinit&amp;gt;(StaticLoggerBinder.java:55)
	at org.slf4j.LoggerFactory.bind(LoggerFactory.java:129)
	at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:108)
	at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:302)
	at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:276)
	at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:288)
	at org.apache.aries.subsystem.core.internal.Activator.&amp;lt;clinit&amp;gt;(Activator.java:47)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:422)
	at java.lang.Class.newInstance(Class.java:442)
	at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:4474)
	at org.apache.felix.framework.Felix.activateBundle(Felix.java:2221)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2144)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1371)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ClassCastException: com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl cannot be cast to javax.xml.parsers.SAXParserFactory
	at javax.xml.parsers.SAXParserFactory.newInstance(SAXParserFactory.java:115)
	at ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:81)
	... 25 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;, have you seen this before?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hzimpel&quot; class=&quot;user-hover&quot; rel=&quot;hzimpel&quot;&gt;hzimpel&lt;/a&gt;, you may want to try current Sling Scripting Thymeleaf snapshot which uses Thymeleaf 3 and Attoparser 2 (no more XML spec/parser problems).&lt;/p&gt;</comment>
                            <comment id="15037818" author="hzimpel" created="Thu, 3 Dec 2015 14:05:29 +0000"  >&lt;p&gt;I&apos;ve tried the Sling Scripting Thymeleaf snapshot &lt;tt&gt;org.apache.sling.scripting.thymeleaf-0.1.7-20151103.122946-1.jar&lt;/tt&gt; with a fresh installation of Sling Launchpad 8.&lt;/p&gt;

&lt;p&gt;The output of the registered scripting engines is:&lt;/p&gt;

&lt;p&gt;Available Script Engines&lt;br/&gt;
========================&lt;/p&gt;

&lt;p&gt;Apache Sling Scripting JavaScript Support (null) 2.0.26&lt;br/&gt;
-------------------------------------&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Language : ECMAScript, 0&lt;/li&gt;
	&lt;li&gt;Extensions : ecma, esp&lt;/li&gt;
	&lt;li&gt;MIME Types : text/javascript, application/ecmascript, application/javascript&lt;/li&gt;
	&lt;li&gt;Names : javascript, ecma, esp&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Apache Sling Scripting JSP Support 2.1.6&lt;br/&gt;
-------------------------------------&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Language : Java Server Pages, 2.1&lt;/li&gt;
	&lt;li&gt;Extensions : jsp, jspf, jspx&lt;/li&gt;
	&lt;li&gt;MIME Types : -&lt;/li&gt;
	&lt;li&gt;Names : jsp, JSP&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Apache Sling Scripting Sightly Engine 1.0.6&lt;br/&gt;
-------------------------------------&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Language : The Sightly Templating Language, 1.0&lt;/li&gt;
	&lt;li&gt;Extensions : html&lt;/li&gt;
	&lt;li&gt;MIME Types : -&lt;/li&gt;
	&lt;li&gt;Names : sightly&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;After installation of &lt;tt&gt;javassist/3.18.2-GA&lt;/tt&gt; and Sling Scripting Thymeleaf snapshot the output is:&lt;/p&gt;

&lt;p&gt;Available Script Engines&lt;br/&gt;
========================&lt;/p&gt;

&lt;p&gt;Apache Sling Scripting JavaScript Support (null) 2.0.26&lt;br/&gt;
-------------------------------------&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Language : ECMAScript, 0&lt;/li&gt;
	&lt;li&gt;Extensions : ecma, esp&lt;/li&gt;
	&lt;li&gt;MIME Types : text/javascript, application/ecmascript, application/javascript&lt;/li&gt;
	&lt;li&gt;Names : javascript, ecma, esp&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Apache Sling Scripting JSP Support 2.1.6&lt;br/&gt;
-------------------------------------&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Language : Java Server Pages, 2.1&lt;/li&gt;
	&lt;li&gt;Extensions : jsp, jspf, jspx&lt;/li&gt;
	&lt;li&gt;MIME Types : -&lt;/li&gt;
	&lt;li&gt;Names : jsp, JSP&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Apache Sling Scripting Thymeleaf 0.1.7-SNAPSHOT&lt;br/&gt;
-------------------------------------&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Language : Thymeleaf,&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Is there a conflict with Sling Scripting Sightly Engine (it gets removed from the listing and the listing of Sling Scripting Thymeleaf is incomplete)?&lt;/p&gt;

&lt;p&gt;You can see the following exception (error log):&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException: null&lt;br/&gt;
        at java.util.Hashtable.put(Hashtable.java:542)&lt;br/&gt;
        at org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory.postEvent(ScriptEngineManagerFactory.java:305)&lt;br/&gt;
        at org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory.bindScriptEngineFactory(ScriptEngineManagerFactory.java:263)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
        at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)&lt;br/&gt;
        at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)&lt;br/&gt;
        at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)&lt;br/&gt;
        at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)&lt;br/&gt;
        at org.apache.felix.scr.impl.helper.BindMethod.invoke(BindMethod.java:41)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.DependencyManager.doInvokeBindMethod(DependencyManager.java:1660)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.DependencyManager.invokeBindMethod(DependencyManager.java:1636)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.SingleComponentManager.invokeBindMethod(SingleComponentManager.java:370)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:319)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:295)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)&lt;br/&gt;
        at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:987)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)&lt;br/&gt;
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4560)&lt;br/&gt;
        at org.apache.felix.framework.Felix.registerService(Felix.java:3542)&lt;br/&gt;
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:330)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.addedService(DependencyManager.java:295)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)&lt;br/&gt;
        at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:120)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:987)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)&lt;br/&gt;
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4560)&lt;br/&gt;
        at org.apache.felix.framework.Felix.registerService(Felix.java:3542)&lt;br/&gt;
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)&lt;br/&gt;
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:399)&lt;br/&gt;
        at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:676)&lt;br/&gt;
        at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:339)&lt;br/&gt;
        at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:360)&lt;br/&gt;
        at org.apache.felix.scr.impl.Activator.access$000(Activator.java:53)&lt;br/&gt;
        at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:260)&lt;br/&gt;
        at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)&lt;br/&gt;
        at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)&lt;br/&gt;
        at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)&lt;br/&gt;
        at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)&lt;br/&gt;
        at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)&lt;br/&gt;
        at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:913)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:834)&lt;br/&gt;
        at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:516)&lt;br/&gt;
        at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4544)&lt;br/&gt;
        at org.apache.felix.framework.Felix.startBundle(Felix.java:2166)&lt;br/&gt;
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:977)&lt;br/&gt;
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:964)&lt;br/&gt;
        at org.apache.felix.webconsole.internal.core.InstallHelper.doRun(InstallHelper.java:67)&lt;br/&gt;
        at org.apache.felix.webconsole.internal.core.BaseUpdateInstallHelper.doRun(BaseUpdateInstallHelper.java:93)&lt;br/&gt;
        at org.apache.felix.webconsole.internal.core.BaseUpdateInstallHelper.run(BaseUpdateInstallHelper.java:123)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:724)&lt;/p&gt;
</comment>
                            <comment id="15038779" author="olli" created="Thu, 3 Dec 2015 23:04:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hzimpel&quot; class=&quot;user-hover&quot; rel=&quot;hzimpel&quot;&gt;hzimpel&lt;/a&gt;, your second problem is unrelated to the first one and a visual in Web Console only due to &lt;tt&gt;ThymeleafScriptEngineFactory#getLanguageVersion()&lt;/tt&gt; returning &lt;tt&gt;null&lt;/tt&gt;, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5351&quot; title=&quot;Thymeleaf fails loading version from properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5351&quot;&gt;&lt;del&gt;SLING-5351&lt;/del&gt;&lt;/a&gt;. Please ask for further support on users@sling.apache.org.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12775520">SLING-4425</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12775526" name="SLING-5347.patch" size="3739" author="olli" created="Thu, 3 Dec 2015 09:59:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p6yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5346] Clarify distribution queue statuses</title>
                <link>https://issues.apache.org/jira/browse/SLING-5346</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A distribution queue can be passive or active. Passive is when it does not have an associated processing action, and active when it does (for eg. delivery to an endpoint).&lt;/p&gt;

&lt;p&gt;An active queue can be in three states: Idle, Running, Blocked or Paused.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12917540">SLING-5346</key>
            <summary>Clarify distribution queue statuses</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2015 10:36:42 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:34 +0000</updated>
                            <resolved>Tue, 15 Dec 2015 12:11:10 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.12</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15057955" author="mpetria" created="Tue, 15 Dec 2015 12:11:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/commit/3a8e93e3a4e2526c2a111e31faa4adfa19b0d756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/3a8e93e3a4e2526c2a111e31faa4adfa19b0d756&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p5zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5345] StreamRendererServlet return no content-type</title>
                <link>https://issues.apache.org/jira/browse/SLING-5345</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In some situations the StreamRendererServlet return no content-type. This should be avoided.&lt;/p&gt;

&lt;p&gt;Unit tests to follow.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12917247">SLING-5345</key>
            <summary>StreamRendererServlet return no content-type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2015 13:43:09 +0000</created>
                <updated>Mon, 21 Dec 2015 08:48:20 +0000</updated>
                            <resolved>Mon, 14 Dec 2015 14:32:30 +0000</resolved>
                                                    <fixVersion>Servlets Get 2.1.14</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15056041" author="asanso" created="Mon, 14 Dec 2015 14:32:30 +0000"  >&lt;p&gt;fixed in rev. r1719924&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p467:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5344] Request log format string %D</title>
                <link>https://issues.apache.org/jira/browse/SLING-5344</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I came across what I believe to be a defect in the log format description [1]. The %D format string is described as &lt;em&gt;&quot;The time taken to serve the request, in microseconds&quot;&lt;/em&gt;. However, the default request exit format is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;%\{end}t \[%R] &amp;lt;\- %s %\{Content-Type}o %Dms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;indicating that %D actually produces &lt;em&gt;milliseconds&lt;/em&gt;, not microseconds. I also found the RequestLoggerResponse class [2] in the Sling code base, where it looks like request duration is recorded and reported in milliseconds.&lt;/p&gt;

&lt;p&gt;So is this simply a documentation bug, then? Maybe, maybe not. The Sling documentation [1] also states the Sling follows the Apache httpd log format description [3], where %D means duration in microseconds.&lt;/p&gt;

&lt;p&gt;Either the documentation should be updated to reflect the fact that %D produces milliseconds or the implementation should be updated to produce microseconds.&lt;/p&gt;

&lt;p&gt;[1]: &lt;a href=&quot;http://sling.apache.org/documentation/development/client-request-logging.html#log-format-specification&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/development/client-request-logging.html#log-format-specification&lt;/a&gt;&lt;br/&gt;
[2]: &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/log/RequestLoggerResponse.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/log/RequestLoggerResponse.java&lt;/a&gt;&lt;br/&gt;
[3]: &lt;a href=&quot;http://httpd.apache.org/docs/current/mod/mod_log_config.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://httpd.apache.org/docs/current/mod/mod_log_config.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12917233">SLING-5344</key>
            <summary>Request log format string %D</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="damaan">Jon Ekdahl</reporter>
                        <labels>
                            <label>requestlogger</label>
                    </labels>
                <created>Tue, 1 Dec 2015 12:19:49 +0000</created>
                <updated>Wed, 2 Dec 2015 15:35:06 +0000</updated>
                            <resolved>Wed, 2 Dec 2015 15:35:06 +0000</resolved>
                                                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15035976" author="rombert" created="Wed, 2 Dec 2015 15:35:06 +0000"  >&lt;p&gt;Thanks for the detailed report. I&apos;ve corrected the documentation in &lt;a href=&quot;https://svn.apache.org/r1717650&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1717650&lt;/a&gt; .&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p433:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5336] Investigate concurrency issue for shared distribution packages</title>
                <link>https://issues.apache.org/jira/browse/SLING-5336</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12916583">SLING-5336</key>
            <summary>Investigate concurrency issue for shared distribution packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Nov 2015 09:37:07 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:59 +0000</updated>
                            <resolved>Thu, 10 Dec 2015 11:59:12 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.12</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15029700" author="mpetria" created="Fri, 27 Nov 2015 09:53:08 +0000"  >&lt;p&gt;Committed revision 1716813.&lt;/p&gt;</comment>
                            <comment id="15050648" author="mpetria" created="Thu, 10 Dec 2015 11:59:02 +0000"  >&lt;p&gt;The core reason for this was that retrieving a job just after it was added sometimes produced a null reference. That happens because retrieve is based on queries and indexing could be out of sync.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p02v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5334] Improve Sightly script resolution for components using inheritance</title>
                <link>https://issues.apache.org/jira/browse/SLING-5334</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Assuming the following content structure:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&#9500;&#9472;&#9472; grandparent
&#9474;&#160;&#160; &#9500;&#9472;&#9472; S.java
&#9474;&#160;&#160; &#9500;&#9472;&#9472; grandparent.html
&#9474;&#160;&#160; &#9500;&#9472;&#9472; notoverlaid.js
&#9474;&#160;&#160; &#9500;&#9472;&#9472; s.ecma
&#9474;&#160;&#160; &#9500;&#9472;&#9472; s.js
&#9474;&#160;&#160; &#9492;&#9472;&#9472; templates.html
&#9500;&#9472;&#9472; parent [sling:resourceSuperType=grandparent]
&#9474;   &#9500;&#9472;&#9472; S.java
&#9474;   &#9500;&#9472;&#9472; s.ecma
&#9474;   &#9500;&#9472;&#9472; s.js
&#9474;   &#9492;&#9472;&#9472; templates.html
&#9492;&#9472;&#9472; child [sling:resourceSuperType=parent]
 &#160;&#160; &#9500;&#9472;&#9472; S.java
 &#160;&#160; &#9500;&#9472;&#9472; notoverlaid.html
 &#160;&#160; &#9500;&#9472;&#9472; s.ecma
 &#160;&#160; &#9500;&#9472;&#9472; s.js
 &#160;&#160; &#9492;&#9472;&#9472; templates.html
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If any of the used scripts / included files would not be directly under the component node, script resolution would fail. Sightly should be able to correctly load and overlay component scripts even if they&apos;re &lt;tt&gt;n&lt;/tt&gt; levels deep under the component node.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12916476">SLING-5334</key>
            <summary>Improve Sightly script resolution for components using inheritance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Nov 2015 15:34:56 +0000</created>
                <updated>Tue, 12 Jan 2016 09:45:40 +0000</updated>
                            <resolved>Fri, 27 Nov 2015 11:31:42 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.0</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.10</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15029782" author="radu.cotescu" created="Fri, 27 Nov 2015 11:31:42 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1716841&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1716841&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ozf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5328] some config properties are not documented (metatype.properties)</title>
                <link>https://issues.apache.org/jira/browse/SLING-5328</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;some config properties are not documented (metatype.properties)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915824">SLING-5328</key>
            <summary>some config properties are not documented (metatype.properties)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2015 15:43:33 +0000</created>
                <updated>Mon, 30 Nov 2015 08:44:14 +0000</updated>
                            <resolved>Tue, 24 Nov 2015 15:44:19 +0000</resolved>
                                    <version>Discovery Oak 1.1.0</version>
                                    <fixVersion>Discovery Oak 1.2.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15024704" author="egli" created="Tue, 24 Nov 2015 15:44:19 +0000"  >&lt;p&gt;done in rev 1716180&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ove7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5322] TopologyWebConsolePlugin should have mandatory dependency to SyncTokenService</title>
                <link>https://issues.apache.org/jira/browse/SLING-5322</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Same as &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5321&quot; title=&quot;DiscoveryServiceImpl should have mandatory dependency to SyncTokenService&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5321&quot;&gt;&lt;del&gt;SLING-5321&lt;/del&gt;&lt;/a&gt;, the TopologyWebConsolePlugin should also have a mandatory dependency on the SyncTokenService as it otherwise shows false &quot;no SyncTokenService available&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915394">SLING-5322</key>
            <summary>TopologyWebConsolePlugin should have mandatory dependency to SyncTokenService</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2015 16:23:26 +0000</created>
                <updated>Mon, 30 Nov 2015 08:43:13 +0000</updated>
                            <resolved>Mon, 23 Nov 2015 16:28:53 +0000</resolved>
                                    <version>Discovery Impl 1.2.2</version>
                                    <fixVersion>Discovery Impl 1.2.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15022399" author="egli" created="Mon, 23 Nov 2015 16:28:53 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1715867&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1715867&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2osqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5321] DiscoveryServiceImpl should have mandatory dependency to SyncTokenService</title>
                <link>https://issues.apache.org/jira/browse/SLING-5321</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently &lt;tt&gt;DiscoveryServiceImpl&lt;/tt&gt; has an &lt;tt&gt;OPTIONAL_UNARY&lt;/tt&gt; dependency to &lt;tt&gt;SyncTokenService&lt;/tt&gt;. This has the effect that at &lt;tt&gt;DiscoveryServiceImpl.activate&lt;/tt&gt; time, the &lt;tt&gt;SyncTokenService&lt;/tt&gt; might not yet be set, but that it would be set at a later point in time.&lt;/p&gt;

&lt;p&gt;Due to the fact that &lt;tt&gt;activate&lt;/tt&gt; is the only time when this &lt;tt&gt;SyncTokenService&lt;/tt&gt; is checked (depending on config) and set with the &lt;tt&gt;ViewStateManager&lt;/tt&gt;, it will be missed and assumed to be not available in this case.&lt;/p&gt;

&lt;p&gt;Which means you can have the sync token service available on one instance and not in another instance in the same cluster - leading to sync failure (where the only workaround is disabling the sync token service entirely)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915334">SLING-5321</key>
            <summary>DiscoveryServiceImpl should have mandatory dependency to SyncTokenService</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2015 13:49:12 +0000</created>
                <updated>Mon, 30 Nov 2015 08:43:14 +0000</updated>
                            <resolved>Mon, 23 Nov 2015 14:02:21 +0000</resolved>
                                    <version>Discovery Impl 1.2.2</version>
                                    <fixVersion>Discovery Impl 1.2.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15022123" author="egli" created="Mon, 23 Nov 2015 14:02:21 +0000"  >&lt;p&gt;fixed in rev 1715827&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2osdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5318] Sling provisioning model does not propagate Artifact metadata during processing</title>
                <link>https://issues.apache.org/jira/browse/SLING-5318</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The sling provisioning model does not propagate Artifact metadata in EffectiveModelProcessor.processArtifact. This means that if Artifact Metadata is specified in the model.txt file like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    commons-collections/commons-collections/3.2.1/jar [mykey=myvalue]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the &lt;tt&gt;mykey=myvalue&lt;/tt&gt; it will be lost at some point during processing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915040">SLING-5318</key>
            <summary>Sling provisioning model does not propagate Artifact metadata during processing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Nov 2015 00:54:04 +0000</created>
                <updated>Sun, 28 Feb 2016 20:52:47 +0000</updated>
                            <resolved>Fri, 27 Nov 2015 07:21:30 +0000</resolved>
                                    <version>Sling Provisioning Model 1.4.0</version>
                                    <fixVersion>Sling Provisioning Model 1.4.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15019217" author="bosschaert" created="Sat, 21 Nov 2015 00:55:03 +0000"  >&lt;p&gt;The attached patch contains a fix for the problem and also a unit test.&lt;/p&gt;</comment>
                            <comment id="15029549" author="cziegeler" created="Fri, 27 Nov 2015 07:21:30 +0000"  >&lt;p&gt;Thanks for your patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;. It&apos;s applied.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12773629" name="sling.diff" size="8515" author="bosschaert" created="Sat, 21 Nov 2015 00:55:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2oqk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5315] rescheduled failed jobs increment queued jobs counter</title>
                <link>https://issues.apache.org/jira/browse/SLING-5315</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a job fails and is rescheduled (eg in 60sec), then the statistics are skewed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a job start calls &lt;tt&gt;stats.addActive&lt;/tt&gt; which decrements &lt;tt&gt;queuedJobs&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;for a failed job, &lt;tt&gt;queue.finishJob&lt;/tt&gt; indirectly calls &lt;tt&gt;stats.failedJob&lt;/tt&gt; which increments &lt;tt&gt;queuedJobs&lt;/tt&gt; again&lt;/li&gt;
	&lt;li&gt;then the job is marked for rescheduling in eg 60sec&lt;/li&gt;
	&lt;li&gt;then upon rescheduling in &lt;tt&gt;queue.requeue&lt;/tt&gt;, indirectly &lt;tt&gt;stats.incQueued&lt;/tt&gt; is called, which increments &lt;tt&gt;queuedJobs&lt;/tt&gt; as well&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With the result that the &lt;tt&gt;queuedJobs&lt;/tt&gt; counter is incremented each time a job fails - even though there are not really more jobs in the queue.&lt;/p&gt;</description>
                <environment>seen in sling.event 3.7.6</environment>
        <key id="12914470">SLING-5315</key>
            <summary>rescheduled failed jobs increment queued jobs counter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Nov 2015 13:46:48 +0000</created>
                <updated>Thu, 26 Sep 2019 12:38:52 +0000</updated>
                            <resolved>Tue, 24 Nov 2015 16:40:50 +0000</resolved>
                                    <version>Event 3.7.6</version>
                                    <fixVersion>Event 4.0.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15022080" author="cziegeler" created="Mon, 23 Nov 2015 13:12:58 +0000"  >&lt;p&gt;The job queue has been changed from a version which holds all jobs in memory to a queue which just holds part of it in memory. The stats implementation seems not be adjusted to this.&lt;/p&gt;</comment>
                            <comment id="15022091" author="cziegeler" created="Mon, 23 Nov 2015 13:26:19 +0000"  >&lt;p&gt;I&apos;ve committed a potential fix in rev 1715803. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; Could you please cross check?&lt;/p&gt;</comment>
                            <comment id="15024786" author="egli" created="Tue, 24 Nov 2015 16:32:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, looks good to me.&lt;/p&gt;</comment>
                            <comment id="15024807" author="cziegeler" created="Tue, 24 Nov 2015 16:40:50 +0000"  >&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2on27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5304] Pattern Broken in resource resolver mapping</title>
                <link>https://issues.apache.org/jira/browse/SLING-5304</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Steps to Reproduce:&lt;br/&gt;
Create a Page and add the property vanityPath with the value &quot;/portal_&lt;span class=&quot;error&quot;&gt;&amp;#91;sS&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;uU&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bB&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;sS&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;iI&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tT&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;eE&amp;#93;&lt;/span&gt;&quot; to the jcr:conten &lt;br/&gt;
If you try to resolve  /portal_suBSite this will return NonExistingResource&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12913577">SLING-5304</key>
            <summary>Pattern Broken in resource resolver mapping</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Nov 2015 07:54:51 +0000</created>
                <updated>Tue, 11 Oct 2016 13:05:17 +0000</updated>
                            <resolved>Tue, 11 Oct 2016 13:05:16 +0000</resolved>
                                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15024230" author="cziegeler" created="Tue, 24 Nov 2015 10:40:09 +0000"  >&lt;p&gt;Looking at our documentation, we always said that a vanity path is a name or path (even external), but we do not support patterns.&lt;br/&gt;
It seems old implementations did support patterns accidentally (by simply converting the value into a pattern)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ohkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5298] Finish DiscoveryWithSyncTokenTest</title>
                <link>https://issues.apache.org/jira/browse/SLING-5298</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;DiscoveryWithSyncTokenTest is only half-done:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;it has a 100sec sleep at the end&lt;/li&gt;
	&lt;li&gt;doesn&apos;t really do any assertions&lt;/li&gt;
	&lt;li&gt;plus it interferes with other tests as it doesn&apos;t clean up the VirtualInstance (thus continues to write heartbeats and cause a little bit of load)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12913332">SLING-5298</key>
            <summary>Finish DiscoveryWithSyncTokenTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Nov 2015 14:54:28 +0000</created>
                <updated>Tue, 9 Feb 2016 12:20:46 +0000</updated>
                                            <version>Discovery Impl 1.2.2</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15006756" author="egli" created="Mon, 16 Nov 2015 15:10:15 +0000"  >&lt;p&gt;part 1: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1714599&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1714599&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15138860" author="egli" created="Tue, 9 Feb 2016 12:20:46 +0000"  >&lt;p&gt;properly closing i2 (in rev 1729369)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2og1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5297] Incorrect resource in ContentDispositionFilter </title>
                <link>https://issues.apache.org/jira/browse/SLING-5297</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The ContentDispositionFilter at the moment takes in consideration the wrong resource. This indeed maybe modified by a #forward method that is executed before #setContentType. For this reason the resource should be calculated while the RewriterResponse is created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12913320">SLING-5297</key>
            <summary>Incorrect resource in ContentDispositionFilter </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Nov 2015 14:03:34 +0000</created>
                <updated>Fri, 20 Nov 2015 06:43:29 +0000</updated>
                            <resolved>Mon, 16 Nov 2015 14:27:50 +0000</resolved>
                                                    <fixVersion>Security 1.0.18</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15006720" author="asanso" created="Mon, 16 Nov 2015 14:27:50 +0000"  >&lt;p&gt;fixed in rev. r1714593&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ofzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5296] scripting.sightly.testing build failure due to snapshot dependency on discovery</title>
                <link>https://issues.apache.org/jira/browse/SLING-5296</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;On jenkins every other day or so we now get a failure as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Jenkins to finish collecting data
[ERROR] Failed to execute goal on project org.apache.sling.scripting.sightly.testing: Could not resolve dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.sling:org.apache.sling.scripting.sightly.testing:slingstart:1.0.5-SNAPSHOT: The following artifacts could not be resolved: org.apache.sling:org.apache.sling.discovery.base:jar:1.0.0-SNAPSHOT, org.apache.sling:org.apache.sling.discovery.oak:jar:1.0.0-SNAPSHOT: Could not find artifact org.apache.sling:org.apache.sling.discovery.base:jar:1.0.0-SNAPSHOT in Nexus (http:&lt;span class=&quot;code-comment&quot;&gt;//repository.apache.org/snapshots) -&amp;gt; [Help 1]
&lt;/span&gt;[ERROR] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(eg &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/2720/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; or &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/2716/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;This seems to be due to the fact that the SNAPSHOT artifacts get removed (at midnight perhaps) and &lt;tt&gt;scripting.sightly.testing&lt;/tt&gt; gets built before &lt;tt&gt;discovery.*&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12913303">SLING-5296</key>
            <summary>scripting.sightly.testing build failure due to snapshot dependency on discovery</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Nov 2015 13:11:52 +0000</created>
                <updated>Mon, 16 Nov 2015 13:31:12 +0000</updated>
                            <resolved>Mon, 16 Nov 2015 13:31:12 +0000</resolved>
                                    <version>Launchpad Builder 8</version>
                                    <fixVersion>Launchpad Builder 9</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15006656" author="egli" created="Mon, 16 Nov 2015 13:28:41 +0000"  >&lt;p&gt;Looks like this was caused by sightly.testing starting a launchpad - which had this snapshot dependency to discovery.&lt;/p&gt;</comment>
                            <comment id="15006659" author="egli" created="Mon, 16 Nov 2015 13:31:12 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1714586&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1714586&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ofvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5295] Use slingRepository.impersonateFromService to impersonate distribution user</title>
                <link>https://issues.apache.org/jira/browse/SLING-5295</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12913295">SLING-5295</key>
            <summary>Use slingRepository.impersonateFromService to impersonate distribution user</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Nov 2015 12:29:19 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:41 +0000</updated>
                            <resolved>Tue, 15 Dec 2015 12:09:50 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.12</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15057953" author="mpetria" created="Tue, 15 Dec 2015 12:09:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/commit/283ee95c4221f37ae1b6460d91a2fecbb1dd29da#diff-f1ccda7fd026b49181e4c246e7dd6047&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/283ee95c4221f37ae1b6460d91a2fecbb1dd29da#diff-f1ccda7fd026b49181e4c246e7dd6047&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2oftr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5288] Restrict which classes can be deserialized</title>
                <link>https://issues.apache.org/jira/browse/SLING-5288</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;To avoid a recently reported Java deserialization vulnerability &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, we should restrict which classes are accepted when deserializing binaries.&lt;/p&gt;

&lt;p&gt;I have created a prototype SafeObjectInputStream at &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;, which refuses to operate on classes that are outside a whitelist.&lt;/p&gt;

&lt;p&gt;We probably also need a wrapper for ObjectInputStreams provided by the environment, that looks a bit harder to create, for now we can already discuss this prototype to see if we want to pursue the idea.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://blogs.apache.org/foundation/entry/apache_commons_statement_to_widespread&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://blogs.apache.org/foundation/entry/apache_commons_statement_to_widespread&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/whiteboard/bdelacretaz/safe-object-input-stream&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/whiteboard/bdelacretaz/safe-object-input-stream&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911857">SLING-5288</key>
            <summary>Restrict which classes can be deserialized</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Nov 2015 13:37:36 +0000</created>
                <updated>Mon, 25 Apr 2016 14:12:49 +0000</updated>
                            <resolved>Thu, 19 Nov 2015 17:11:55 +0000</resolved>
                                                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14998939" author="alexander.klimetschek" created="Tue, 10 Nov 2015 17:17:04 +0000"  >&lt;p&gt;For performance reasons I would use a hash set of strings (fully qualified class names) to do the check against and pass that into the object stream already, as you don&apos;t want to build the set every time. (I think in an osgi environment you have to use the names and checking for Class equality might not work as these could change over time.)&lt;/p&gt;

&lt;p&gt;I would also have the class validator be an interface that just does &quot;allows(Class class)&quot;, then provide one impl that does the above simple whitelist check, and pass that to the safe object stream. This way applications can provide their own whitelist logic.&lt;/p&gt;</comment>
                            <comment id="15000193" author="bdelacretaz" created="Wed, 11 Nov 2015 10:22:54 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexander.klimetschek&quot; class=&quot;user-hover&quot; rel=&quot;alexander.klimetschek&quot;&gt;alexander.klimetschek&lt;/a&gt; for your suggestions, good ideas indeed!&lt;/p&gt;

&lt;p&gt;I have implemented them and also added a RegexpClassAcceptor, with both white and black lists, so more flexible but less efficient than the WhitelistClassAcceptor.&lt;/p&gt;</comment>
                            <comment id="15004291" author="bdelacretaz" created="Fri, 13 Nov 2015 17:01:36 +0000"  >&lt;p&gt;I&apos;ve suggested donating this module to Apache Commons, let&apos;s see what they think. &lt;a href=&quot;http://commons.markmail.org/thread/x5ptocyptgfsit7n&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.markmail.org/thread/x5ptocyptgfsit7n&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15004371" author="bdelacretaz" created="Fri, 13 Nov 2015 17:49:57 +0000"  >&lt;p&gt;There&apos;s interest for commons-io, I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-487&quot; title=&quot;ValidatingObjectInputStream contribution - restrict which classes can be deserialized&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-487&quot;&gt;&lt;del&gt;IO-487&lt;/del&gt;&lt;/a&gt; with a patch for them.&lt;/p&gt;</comment>
                            <comment id="15013927" author="bdelacretaz" created="Thu, 19 Nov 2015 17:11:55 +0000"  >&lt;p&gt;Marking won&apos;t fix as my &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-487&quot; title=&quot;ValidatingObjectInputStream contribution - restrict which classes can be deserialized&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-487&quot;&gt;&lt;del&gt;IO-487&lt;/del&gt;&lt;/a&gt; contribution has been accepted in Apache Commons, we can then use that.&lt;/p&gt;</comment>
                            <comment id="15256267" author="bdelacretaz" created="Mon, 25 Apr 2016 12:15:24 +0000"  >&lt;p&gt;The &lt;a href=&quot;https://issues.apache.org/jira/browse/IO-487&quot; title=&quot;ValidatingObjectInputStream contribution - restrict which classes can be deserialized&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IO-487&quot;&gt;&lt;del&gt;IO-487&lt;/del&gt;&lt;/a&gt; &lt;tt&gt;ValidatingObjectInputStream&lt;/tt&gt; is now released as part of commons-io 2.5.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12912914">IO-487</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12962247">SLING-5685</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o707:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5282] cancel sync upon handleDeactivating</title>
                <link>https://issues.apache.org/jira/browse/SLING-5282</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In &lt;tt&gt;ViewStateManager.handleDeactivated&lt;/tt&gt; a &lt;tt&gt;consistencyService.cancelSync&lt;/tt&gt; was missing - which lead to syncing being left running even though the discovery service was already deactivated.&lt;/p&gt;

&lt;p&gt;Mostly affects tests only.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911534">SLING-5282</key>
            <summary>cancel sync upon handleDeactivating</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Nov 2015 13:58:53 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:13 +0000</updated>
                            <resolved>Mon, 9 Nov 2015 13:59:32 +0000</resolved>
                                    <version>Discovery Commons 1.0.2</version>
                                    <fixVersion>Discovery Commons 1.0.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14996556" author="egli" created="Mon, 9 Nov 2015 13:59:32 +0000"  >&lt;p&gt;done: 1713434&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o507:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5280] HeartbeatHandler can also be blocked while holding AnnouncementRegistry lock</title>
                <link>https://issues.apache.org/jira/browse/SLING-5280</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5195&quot; title=&quot;HeartbeatHandler should check for topology changes independently of long-during session.saves&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5195&quot;&gt;&lt;del&gt;SLING-5195&lt;/del&gt;&lt;/a&gt; introduces a separate thread that periodically checks if the local HeartbeatHandler is properly functional and has written a heartbeat &apos;recently enough&apos;. If not, it marks the local topology as TOPOLOGY_CHANGING and listeners are thus stepping back correctly (as the local instance is likely to be treated as dead by other instances in the local cluster soon).&lt;/p&gt;

&lt;p&gt;Now this works fine as long as the new, separate thread can operate uninterruptively. But besides the necessity that it is properly scheduled regularly (which it might not, thus we should probably rather use a dedicated thread than rely on the scheduler&apos;s pool to be available) it also requires that the check can go ahead without running into a locked monitor.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1960/testReport/org.apache.sling.discovery.impl.cluster/RepositoryDelaysTest/testSlowSessionSaves/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1960/testReport/org.apache.sling.discovery.impl.cluster/RepositoryDelaysTest/testSlowSessionSaves/&lt;/a&gt; however reports a situation where the blocked commit was not in &lt;tt&gt;HeartbeatHandler.issueClusterLocalHeartbeat&lt;/tt&gt; - but was in &lt;tt&gt;AnnouncementRegistry.checkExpiredAnnouncements&lt;/tt&gt; - and that one does a &lt;tt&gt;synchronized(this)&lt;/tt&gt; - which in turn blocks precisely this 2nd HeartbeatHandler&apos;s monitoring thread - yielding it useless..&lt;/p&gt;

&lt;p&gt;The following log excerpt (grepping thread-3/-4/main) proofs the above described scenario:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;06.11.2015 23:35:22.864 *INFO * [main] RepositoryDelaysTest: &amp;lt;main&amp;gt; both instances marked as delaying 1min - but with &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; background checks we should go changing within 3sec
06.11.2015 23:35:22.870 *DEBUG* [pool-1-thread-4] HeartbeatHandler: issueConnectorPings: not issuing remote heartbeat yet, startup not yet finished
06.11.2015 23:35:22.870 *INFO * [pool-1-thread-4] ArtificialDelay: delay: delaying [secondInstance] &lt;span class=&quot;code-quote&quot;&gt;&apos;pre.commit&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 60000ms...
06.11.2015 23:35:22.870 *INFO * [pool-1-thread-4] ArtificialDelay: delay: delaying [secondInstance] &lt;span class=&quot;code-quote&quot;&gt;&apos;pre.commit&apos;&lt;/span&gt; now &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 60000ms...
06.11.2015 23:35:22.909 *INFO * [Test-ViewCheckerRunner [firstInstance]] ArtificialDelay: delay: delaying [firstInstance] &lt;span class=&quot;code-quote&quot;&gt;&apos;pre.commit&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 59876ms...
06.11.2015 23:35:22.909 *INFO * [Test-ViewCheckerRunner [firstInstance]] ArtificialDelay: delay: delaying [firstInstance] &lt;span class=&quot;code-quote&quot;&gt;&apos;pre.commit&apos;&lt;/span&gt; now &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 59876ms...
06.11.2015 23:35:23.613 *DEBUG* [pool-1-thread-3] ViewHelper: getEstablishedView: no established view found: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/clusterC/establishedView
06.11.2015 23:35:23.613 *DEBUG* [pool-1-thread-3] ClusterViewServiceImpl: getClusterView: no view established at the moment. isolated mode
06.11.2015 23:35:23.613 *INFO * [pool-1-thread-3] BaseDiscoveryService: getTopology: undefined cluster view: NO_ESTABLISHED_VIEW] org.apache.sling.discovery.base.commons.UndefinedClusterViewException: no established view at the moment
06.11.2015 23:35:23.613 *INFO * [pool-1-thread-3] MinEventDelayHandler: asyncDelay.run: done delaying. &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; view (still/again) not current, delaying again
06.11.2015 23:35:23.613 *TRACE* [pool-1-thread-3] MinEventDelayHandler: runAfter: trying with scheduler.fireJob
06.11.2015 23:35:23.613 *INFO * [pool-1-thread-3] MinEventDelayHandler: triggerAsyncDelaying: asynch delaying of 1 triggered: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
06.11.2015 23:35:23.705 *INFO * [pool-1-thread-3] ClusterViewServiceImpl: getClusterView: the local instance (1b6e7530-0d41-46e7-8471-6ea7f5d3c2bc) is currently not included in the existing established view! This is normal at startup. At other times is pseudo-network-partitioning is an indicator &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; repository/network-delays or clocks-out-of-sync (SLING-3432). (increasing the heartbeatTimeout can help as a workaround too) The local instance will stay in TOPOLOGY_CHANGING or pre _INIT mode until a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; vote was successful.
06.11.2015 23:35:23.705 *INFO * [pool-1-thread-3] BaseDiscoveryService: getTopology: undefined cluster view: ISOLATED_FROM_TOPOLOGY] org.apache.sling.discovery.base.commons.UndefinedClusterViewException: established view does not include local instance - isolated
06.11.2015 23:35:23.705 *INFO * [pool-1-thread-3] MinEventDelayHandler: asyncDelay.run: done delaying. &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; view (still/again) not current, delaying again
06.11.2015 23:35:23.705 *TRACE* [pool-1-thread-3] MinEventDelayHandler: runAfter: trying with scheduler.fireJob
06.11.2015 23:35:23.705 *INFO * [pool-1-thread-3] MinEventDelayHandler: triggerAsyncDelaying: asynch delaying of 1 triggered: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
06.11.2015 23:35:23.840 *DEBUG* [pool-1-thread-3] HeartbeatHandler: checkForTopologyChange/.run: going to check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; topology change...
06.11.2015 23:35:30.865 *DEBUG* [main] ClusterViewServiceImpl: getClusterView: current establishedView is marked as invalid: d5f1101c-f693-44a4-9c79-f7277230591f
06.11.2015 23:35:30.865 *INFO * [main] BaseDiscoveryService: getTopology: undefined cluster view: NO_ESTABLISHED_VIEW] org.apache.sling.discovery.base.commons.UndefinedClusterViewException: current established view was marked as invalid
06.11.2015 23:36:22.786 *INFO * [Test-ViewCheckerRunner [firstInstance]] ArtificialDelay: delay: delaying [firstInstance]&lt;span class=&quot;code-quote&quot;&gt;&apos;pre.commit&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 59876ms done.
06.11.2015 23:36:22.809 *INFO * [Test-ViewCheckerRunner [firstInstance]] ArtificialDelay: delay: delaying [firstInstance] &lt;span class=&quot;code-quote&quot;&gt;&apos;pre.commit&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 59876ms...
06.11.2015 23:36:22.809 *INFO * [Test-ViewCheckerRunner [firstInstance]] ArtificialDelay: delay: delaying [firstInstance] &lt;span class=&quot;code-quote&quot;&gt;&apos;pre.commit&apos;&lt;/span&gt; now &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 59876ms...
06.11.2015 23:36:22.871 *INFO * [pool-1-thread-4] ArtificialDelay: delay: delaying [secondInstance]&lt;span class=&quot;code-quote&quot;&gt;&apos;pre.commit&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 60000ms done.
06.11.2015 23:36:22.871 *DEBUG* [pool-1-thread-4] 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb: analyzeVotings: start. slingId: 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb
06.11.2015 23:36:22.871 *DEBUG* [main] AnnouncementRegistryImpl: listInstances: start. localClusterView: a ClusterView[2 instances: 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb, 8f5168bd-1bb6-4333-9b66-97cb1ae4d9d5]
06.11.2015 23:36:22.871 *DEBUG* [main] AnnouncementRegistryImpl: listAnnouncementsInSameCluster: start. localClusterView: a ClusterView[2 instances: 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb, 8f5168bd-1bb6-4333-9b66-97cb1ae4d9d5]
06.11.2015 23:36:22.871 *DEBUG* [pool-1-thread-4] VotingHelper: listVotings: votings found: 0
06.11.2015 23:36:22.871 *DEBUG* [pool-1-thread-4] 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb: analyzeVotings: no ongoing votings at the moment. done.
06.11.2015 23:36:22.871 *DEBUG* [main] AnnouncementRegistryImpl: listAnnouncementsInSameCluster: handling clusterInstance: 8f5168bd-1bb6-4333-9b66-97cb1ae4d9d5
06.11.2015 23:36:22.871 *DEBUG* [main] AnnouncementRegistryImpl: listAnnouncementsInSameCluster: instance has announcements: 8f5168bd-1bb6-4333-9b66-97cb1ae4d9d5
06.11.2015 23:36:22.872 *DEBUG* [main] AnnouncementRegistryImpl: listAnnouncementsInSameCluster: handling clusterInstance: 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb
06.11.2015 23:36:22.872 *DEBUG* [main] AnnouncementRegistryImpl: listAnnouncementsInSameCluster: matched localInstance, filling with cache: 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb
06.11.2015 23:36:22.872 *INFO * [pool-1-thread-4] HeartbeatHandler: doCheckView: established view does not match. (details: old: 8f5168bd-1bb6-4333-9b66-97cb1ae4d9d5, old: 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb)
06.11.2015 23:36:22.872 *INFO * [pool-1-thread-4] HeartbeatHandler: doCheckViewWith: no matching established view, marking topology as changing
06.11.2015 23:36:22.872 *INFO * [pool-1-thread-4] HeartbeatHandler: invalidateCurrentEstablishedView: invalidating slingId=8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb, lastEstablishedViewId=d5f1101c-f693-44a4-9c79-f7277230591f
06.11.2015 23:36:22.872 *INFO * [pool-1-thread-4] ClusterViewServiceImpl: invalidateEstablishedViewId: marking established view as invalid: d5f1101c-f693-44a4-9c79-f7277230591f
06.11.2015 23:36:22.872 *DEBUG* [pool-1-thread-4] DiscoveryServiceImpl: handleTopologyChanging: invoking viewStateManager.handlechanging
06.11.2015 23:36:22.872 *TRACE* [pool-1-thread-4] ViewStateManagerImpl: handleChanging: start
06.11.2015 23:36:22.872 *DEBUG* [main] AnnouncementRegistryImpl: listAnnouncementsInSameCluster: result: 0
06.11.2015 23:36:22.872 *DEBUG* [main] AnnouncementRegistryImpl: listInstances: announcements added. end. instances: []
06.11.2015 23:36:22.873 *DEBUG* [pool-1-thread-3] AnnouncementRegistryImpl: listInstances: start. localClusterView: a ClusterView[2 instances: 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb, 8f5168bd-1bb6-4333-9b66-97cb1ae4d9d5]
06.11.2015 23:36:22.873 *DEBUG* [pool-1-thread-3] AnnouncementRegistryImpl: listAnnouncementsInSameCluster: start. localClusterView: a ClusterView[2 instances: 8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb, 8f5168bd-1bb6-4333-9b66-97cb1ae4d9d5]
06.11.2015 23:36:22.874 *INFO * [pool-1-thread-4] ViewStateManagerImpl: enqueueForAll: sending topologyEvent TopologyEvent [type=TOPOLOGY_CHANGING, oldView=DefaultTopologyView[current=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, num=2, instances=8f5168bd-1bb6-4333-9b66-97cb1ae4d9d5[local=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;],8674d4b6-fe1d-4f94-b7e5-b6fba0f3affb[local=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]], newView=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;], to all (0) listeners
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12911509">SLING-5280</key>
            <summary>HeartbeatHandler can also be blocked while holding AnnouncementRegistry lock</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Nov 2015 11:23:07 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:13 +0000</updated>
                            <resolved>Mon, 9 Nov 2015 17:53:55 +0000</resolved>
                                    <version>Discovery Impl 1.2.0</version>
                                    <fixVersion>Discovery Impl 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14996391" author="egli" created="Mon, 9 Nov 2015 11:24:15 +0000"  >&lt;p&gt;So it seems the only solution to this very problem is to make this 2nd-HeartbeatHandler-self-monitor-check non-blocking at all times - which means it must not go into the AnnouncementRegistry as that might be blocked&lt;/p&gt;</comment>
                            <comment id="14996392" author="egli" created="Mon, 9 Nov 2015 11:25:27 +0000"  >&lt;p&gt;Attaching &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12771328/12771328_testSlowSessionSaves.fail.txt&quot; title=&quot;testSlowSessionSaves.fail.txt attached to SLING-5280&quot;&gt;testSlowSessionSaves.fail.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; with the full console output from jenkins&lt;/p&gt;</comment>
                            <comment id="14997000" author="egli" created="Mon, 9 Nov 2015 17:53:55 +0000"  >&lt;p&gt;done in rev 1713491&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12771328" name="testSlowSessionSaves.fail.txt" size="1081252" author="stefanegli" created="Mon, 9 Nov 2015 11:25:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o4un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5279] VotingHandlerTest.setup/teardown failure on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5279</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There are several failures on jenkins with the very same pattern: VotingHandlerTest.setup and teardown fail with the following message:&lt;/p&gt;

&lt;p&gt;setup:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;javax.jcr.InvalidItemStateException: Unable to update a stale item: item.save()
	at org.apache.jackrabbit.core.state.SharedItemStateManager$Update.begin(SharedItemStateManager.java:680)
	at org.apache.jackrabbit.core.state.SharedItemStateManager.beginUpdate(SharedItemStateManager.java:1468)
	at org.apache.jackrabbit.core.state.SharedItemStateManager.update(SharedItemStateManager.java:1498)
	at org.apache.jackrabbit.core.state.LocalItemStateManager.update(LocalItemStateManager.java:398)
	at org.apache.jackrabbit.core.state.XAItemStateManager.update(XAItemStateManager.java:354)
	at org.apache.jackrabbit.core.state.LocalItemStateManager.update(LocalItemStateManager.java:373)
	at org.apache.jackrabbit.core.state.SessionItemStateManager.update(SessionItemStateManager.java:274)
	at org.apache.jackrabbit.core.ItemSaveOperation.perform(ItemSaveOperation.java:258)
	at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:200)
	at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
	at org.apache.jackrabbit.core.ItemImpl.save(ItemImpl.java:329)
	at org.apache.jackrabbit.core.session.SessionSaveOperation.perform(SessionSaveOperation.java:42)
	at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:200)
	at org.apache.jackrabbit.core.SessionImpl.perform(SessionImpl.java:355)
	at org.apache.jackrabbit.core.SessionImpl.save(SessionImpl.java:758)
	at org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.resetRepo(VotingHandlerTest.java:95)
	at org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.setUp(VotingHandlerTest.java:108)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;tearDown:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.tearDown(VotingHandlerTest.java:129)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2686/testReport/org.apache.sling.discovery.impl.cluster.voting/VotingHandlerTest/testVotingYesTwoNodes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2686/testReport/org.apache.sling.discovery.impl.cluster.voting/VotingHandlerTest/testVotingYesTwoNodes/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2682/testReport/org.apache.sling.discovery.impl.cluster.voting/VotingHandlerTest/testConcurrentVotesFourNodes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2682/testReport/org.apache.sling.discovery.impl.cluster.voting/VotingHandlerTest/testConcurrentVotesFourNodes/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2690/testReport/org.apache.sling.discovery.impl.cluster.voting/VotingHandlerTest/testConcurrentVotesFourNodes_2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2690/testReport/org.apache.sling.discovery.impl.cluster.voting/VotingHandlerTest/testConcurrentVotesFourNodes_2/&lt;/a&gt;&lt;br/&gt;
etc&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911495">SLING-5279</key>
            <summary>VotingHandlerTest.setup/teardown failure on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Nov 2015 09:59:27 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:14 +0000</updated>
                            <resolved>Mon, 9 Nov 2015 10:14:57 +0000</resolved>
                                    <version>Discovery Impl 1.2.0</version>
                    <version>Discovery Base 1.0.2</version>
                                    <fixVersion>Discovery Impl 1.2.2</fixVersion>
                    <fixVersion>Discovery Base 1.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14996320" author="egli" created="Mon, 9 Nov 2015 10:14:57 +0000"  >&lt;p&gt;made VirtualInstance.stop more reliable in 1713364 - as it looks like a VirtualInstance from a former test-run was not yet finished stopping down and interfered with a subsequent test.&lt;br/&gt;
Plus made tearDown do a NPE check&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o4rj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5278] discovery.oak.OakDiscoveryServiceTest.testDescriptorSeqNumChange failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5278</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There were failures for discovery.oak.OakDiscoveryServiceTest.testDescriptorSeqNumChange on jenkins:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.oak/1960/testReport/org.apache.sling.discovery.oak/OakDiscoveryServiceTest/testDescriptorSeqNumChange/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.oak/1960/testReport/org.apache.sling.discovery.oak/OakDiscoveryServiceTest/testDescriptorSeqNumChange/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.oak/1961/testReport/org.apache.sling.discovery.oak/OakDiscoveryServiceTest/testDescriptorSeqNumChange/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.oak/1961/testReport/org.apache.sling.discovery.oak/OakDiscoveryServiceTest/testDescriptorSeqNumChange/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.oak/1967/testReport/org.apache.sling.discovery.oak/OakDiscoveryServiceTest/testDescriptorSeqNumChange/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.oak/1967/testReport/org.apache.sling.discovery.oak/OakDiscoveryServiceTest/testDescriptorSeqNumChange/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;always with the same pattern:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;

Stacktrace

java.lang.AssertionError: expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.junit.Assert.assertEquals(Assert.java:542)
	at org.apache.sling.discovery.oak.OakDiscoveryServiceTest.testDescriptorSeqNumChange(OakDiscoveryServiceTest.java:167)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12911481">SLING-5278</key>
            <summary>discovery.oak.OakDiscoveryServiceTest.testDescriptorSeqNumChange failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Nov 2015 09:07:06 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:12 +0000</updated>
                            <resolved>Mon, 9 Nov 2015 09:08:26 +0000</resolved>
                                    <version>Discovery Oak 1.0.2</version>
                                    <fixVersion>Discovery Oak 1.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14996227" author="egli" created="Mon, 9 Nov 2015 09:08:26 +0000"  >&lt;p&gt;rev 1713352:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;adding a 2sec safety sleep to avoid failing test on jenkins - plus more logging in case it reoccurs&lt;/p&gt;&lt;/blockquote&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o4of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5277] Performance: per thread script resolver (admin session) is always created even if cache is hit</title>
                <link>https://issues.apache.org/jira/browse/SLING-5277</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3441&quot; title=&quot;Avoid shared resource resolver usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3441&quot;&gt;&lt;del&gt;SLING-3441&lt;/del&gt;&lt;/a&gt;, for every request, a new admin / privileged session is &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/servlets/resolver/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L532&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;created in the SlingServletResolver&lt;/a&gt;. It is created before the script/servlet cache is checked, so in most cases when the cache is hit it is never used, but the cost of creating an extra session (which can vary, especially with concurrent traffic) is incurred.&lt;/p&gt;

&lt;p&gt;The per thread script resolver can be created lazily instead of directly in the event to avoid this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911405">SLING-5277</key>
            <summary>Performance: per thread script resolver (admin session) is always created even if cache is hit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alexander.klimetschek">Alexander Klimetschek</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Nov 2015 03:04:59 +0000</created>
                <updated>Fri, 9 Nov 2018 07:24:28 +0000</updated>
                            <resolved>Fri, 9 Nov 2018 07:24:28 +0000</resolved>
                                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14997624" author="alexander.klimetschek" created="Mon, 9 Nov 2015 23:16:24 +0000"  >&lt;p&gt;Here is a patch: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12771459/12771459_SLING-5277.patch&quot; title=&quot;SLING-5277.patch attached to SLING-5277&quot;&gt;SLING-5277.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;This makes use of ThreadLocal.initialValue() to create the per thread resolver on demand. Quick testing improves performance (as the session is no longer cloned immediately and upon hitting the cache is never cloned apparently). Should be properly tested though, also in line of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3441&quot; title=&quot;Avoid shared resource resolver usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3441&quot;&gt;&lt;del&gt;SLING-3441&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15006088" author="cziegeler" created="Sun, 15 Nov 2015 23:13:47 +0000"  >&lt;p&gt;We can create it lazily but it needs to be created even if the resolution is coming from the cache as the script implementation might use the script resolver&lt;/p&gt;</comment>
                            <comment id="15006105" author="alexander.klimetschek" created="Mon, 16 Nov 2015 00:05:12 +0000"  >&lt;p&gt;The patch does exactly that.&lt;/p&gt;

&lt;p&gt;In my performance tests it made a noticeable difference, since the session creation cost essentially outweighed the cache benefit.&lt;/p&gt;</comment>
                            <comment id="15074862" author="cziegeler" created="Wed, 30 Dec 2015 09:44:38 +0000"  >&lt;p&gt;I think there is something wrong with your patch and your performance tests:&lt;br/&gt;
In your version, when the DESTROY event is received in the onEvent() method, this.perThreadScriptResolver.get() is called which creates the resource resolver (initial value) just to be closed again. Therefore I fail to see how this can be more performant as the resource resolver is created anyway on each request - nothing is saved.&lt;br/&gt;
In addition, changing the creation from the INIT event to an initial value is also a change in behaviour as with the initial value the resource resolver is always cloned on the first get. While with the previous it is only created if an event occurs. I&apos;m not sure about this impact though.&lt;/p&gt;</comment>
                            <comment id="15081834" author="alexander.klimetschek" created="Mon, 4 Jan 2016 21:24:15 +0000"  >&lt;p&gt;Good catch. It doesn&apos;t need to be created in the DESTROY event.&lt;/p&gt;

&lt;p&gt;For why it didn&apos;t affect my performance tests: Since the destroy event happens at the end of the request, it doesn&apos;t affect the latency of request handling from the client pov. I was focusing on the jcr &amp;amp; sling authentication overhead. It should still affect overall throughput, though.&lt;/p&gt;

&lt;p&gt;And probably the core problem was that concurrent resource resolver creation had a synchronization bottleneck that was fixed recently by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4937&quot; title=&quot;Drop per session namespace mapping support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4937&quot;&gt;&lt;del&gt;SLING-4937&lt;/del&gt;&lt;/a&gt; &#8211; see my comment there &#8211; which made any additional resource resolvers created per request a lot more costly. Still, this should be fixed here and a whole new resource resolver not unnecessarily created, since the sling servlet resolver doesn&apos;t have control over how costly creation of a resource resolver is (affected by custom resource providers, other sling issues like &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4937&quot; title=&quot;Drop per session namespace mapping support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4937&quot;&gt;&lt;del&gt;SLING-4937&lt;/del&gt;&lt;/a&gt;, jackrabbit issues...).&lt;/p&gt;</comment>
                            <comment id="15081843" author="alexander.klimetschek" created="Mon, 4 Jan 2016 21:32:38 +0000"  >&lt;p&gt;To fix the DESTROY handling, we can just call &lt;tt&gt;this.perThreadScriptResolver.remove()&lt;/tt&gt; without the &lt;tt&gt;get()&lt;/tt&gt; beforehand and the not null check.&lt;/p&gt;

&lt;p&gt;However, how do we close the per script resource resolver then, in case it was created? &lt;tt&gt;ThreadLocal.remove()&lt;/tt&gt; doesn&apos;t return the removed object. It seems we have to do the &lt;tt&gt;ThreadLocal.get() &amp;amp; initialValue()&lt;/tt&gt; logic ourselves (again), inside &lt;tt&gt;getScriptResourceResolver&lt;/tt&gt; using &lt;tt&gt;ThreadLocal.set()&lt;/tt&gt;, so that &lt;tt&gt;ThreadLocal.get()&lt;/tt&gt; will return null if no resolver was set for the current thread.&lt;/p&gt;</comment>
                            <comment id="15574823" author="joerghoh" created="Fri, 14 Oct 2016 09:40:03 +0000"  >&lt;p&gt;Is there any progress on this?&lt;/p&gt;</comment>
                            <comment id="15603702" author="alexander.klimetschek" created="Tue, 25 Oct 2016 00:25:59 +0000"  >&lt;p&gt;Attached new patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835048/12835048_SLING-5277-new.patch&quot; title=&quot;SLING-5277-new.patch attached to SLING-5277&quot;&gt;SLING-5277-new.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which solves the above discussed issue.&lt;/p&gt;

&lt;p&gt;The patch is against revision 1730513 though, right after the org.apache.sling.servlets.resolver 2.4.2 release, as afterwards a lot of sling changes happened that requires many bundles to update (which I couldn&apos;t easily do in my environment).&lt;/p&gt;

&lt;p&gt;I haven&apos;t got good test numbers yet (only tested this issue together with other changes), but independent tests would be great! /cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15604544" author="cziegeler" created="Tue, 25 Oct 2016 07:51:33 +0000"  >&lt;p&gt;Isn&apos;t this superceeded by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6165&quot; title=&quot;Expose a service for Sling Scripting that provides request-scoped Resource Resolvers for scripting dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6165&quot;&gt;&lt;del&gt;SLING-6165&lt;/del&gt;&lt;/a&gt;? /cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15605714" author="radu.cotescu" created="Tue, 25 Oct 2016 16:09:03 +0000"  >&lt;p&gt;I guess so. But we also haven&apos;t reached consensus in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6165&quot; title=&quot;Expose a service for Sling Scripting that provides request-scoped Resource Resolvers for scripting dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6165&quot;&gt;&lt;del&gt;SLING-6165&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15605790" author="alexander.klimetschek" created="Tue, 25 Oct 2016 16:36:10 +0000"  >&lt;p&gt;AFAICS, &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6165&quot; title=&quot;Expose a service for Sling Scripting that provides request-scoped Resource Resolvers for scripting dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6165&quot;&gt;&lt;del&gt;SLING-6165&lt;/del&gt;&lt;/a&gt; just moves this to a different place, but has the same problem that the admin/service resolver is created for each request (upon SlingRequestEvent.EventType.EVENT_INIT it does rrf.getServiceResourceResolver(null) in ScriptingResourceResolverFactoryImpl), even if it is never accessed, because nothing asks for resolving a resource type etc.&lt;/p&gt;

&lt;p&gt;Note that this issue is not about admin vs. service user but about performance of creating this extra session, which adds cost to every single sling request, even if not used at all.&lt;/p&gt;</comment>
                            <comment id="16680983" author="cziegeler" created="Fri, 9 Nov 2018 07:24:28 +0000"  >&lt;p&gt;As the code has changed in the meantime, I&apos;m resolving this as won&apos;t fix. If needed a new issue can be opened do address the problem based on todays situation&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835048" name="SLING-5277-new.patch" size="10041" author="alexander.klimetschek" created="Tue, 25 Oct 2016 00:25:59 +0000"/>
                            <attachment id="12771459" name="SLING-5277.patch" size="9599" author="alexander.klimetschek" created="Mon, 9 Nov 2015 23:16:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o47j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5276] Validator.validate throws StackOverflowError</title>
                <link>https://issues.apache.org/jira/browse/SLING-5276</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If I pass string &quot;[&quot; to org.apache.sling.commons.json.util.Validator.validate I will get  StackOverflowError&lt;/p&gt;</description>
                <environment>Linux</environment>
        <key id="12911353">SLING-5276</key>
            <summary>Validator.validate throws StackOverflowError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="krzysztofO">Krzysztof Otrebski</reporter>
                        <labels>
                    </labels>
                <created>Sun, 8 Nov 2015 07:04:01 +0000</created>
                <updated>Wed, 29 May 2019 17:33:49 +0000</updated>
                            <resolved>Mon, 9 Nov 2015 10:33:53 +0000</resolved>
                                    <version>Commons JSON 2.0.12</version>
                                    <fixVersion>Commons JSON 2.0.16</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14995746" author="olli" created="Sun, 8 Nov 2015 18:55:03 +0000"  >&lt;p&gt;test added in r1713280&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;testSLING_5276(org.apache.sling.commons.json.util.ValidatorTest)  Time elapsed: 0.021 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.Exception: Unexpected exception, expected&amp;lt;org.apache.sling.commons.json.JSONException&amp;gt; but was&amp;lt;java.lang.StackOverflowError&amp;gt;
	at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:28)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
Caused by: java.lang.StackOverflowError: null
	at org.apache.sling.commons.json.util.Validator.validate(Validator.java:52)
	at org.apache.sling.commons.json.util.Validator.validate(Validator.java:70)
	[...]
	at org.apache.sling.commons.json.util.Validator.validate(Validator.java:70)


Results :

Tests in error: 
  ValidatorTest.testSLING_5276 &#187;  Unexpected exception, expected&amp;lt;org.apache.slin...

Tests run: 70, Failures: 0, Errors: 1, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14996282" author="sseifert@pro-vision.de" created="Mon, 9 Nov 2015 09:52:16 +0000"  >&lt;p&gt;good catch - this error seemed to be present for a long time as well.&lt;br/&gt;
we will fix it before the release.&lt;/p&gt;</comment>
                            <comment id="14996340" author="sseifert@pro-vision.de" created="Mon, 9 Nov 2015 10:33:53 +0000"  >&lt;p&gt;Completed: At revision: 1713371  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o3vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5272] maven-sling-plugin: Potential resource leak in JAR file handling</title>
                <link>https://issues.apache.org/jira/browse/SLING-5272</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;eclipse complains about a resource leak in the AbstractBundleDeployMojo.changeVersion method - a &quot;JarFile&quot; instance is not closed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911041">SLING-5272</key>
            <summary>maven-sling-plugin: Potential resource leak in JAR file handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Nov 2015 13:01:57 +0000</created>
                <updated>Thu, 12 Nov 2015 17:30:31 +0000</updated>
                            <resolved>Fri, 6 Nov 2015 13:06:04 +0000</resolved>
                                    <version>Maven Sling Plugin 2.1.2</version>
                                    <fixVersion>Maven Sling Plugin 2.1.6</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14993628" author="sseifert@pro-vision.de" created="Fri, 6 Nov 2015 13:06:04 +0000"  >&lt;p&gt;Completed: At revision: 1712958  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o23z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5270] comons.json: JSON Validator does not fail on too many closing brackets</title>
                <link>https://issues.apache.org/jira/browse/SLING-5270</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the JSON validator (which is also used by the maven-sling-plugin) does not fail when the JSON contains too many closing brackets, esp.:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;too many &quot;}&quot; at the end of file&lt;/li&gt;
	&lt;li&gt;too many &quot;]&quot; at the end of file&lt;/li&gt;
	&lt;li&gt;too many &quot;}&quot; within the file&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;attached is a patch file with unit tests, three of them do not fail although the json is invalid.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911030">SLING-5270</key>
            <summary>comons.json: JSON Validator does not fail on too many closing brackets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Nov 2015 12:24:20 +0000</created>
                <updated>Thu, 12 Nov 2015 17:29:40 +0000</updated>
                            <resolved>Fri, 6 Nov 2015 12:43:56 +0000</resolved>
                                    <version>Commons JSON 2.0.12</version>
                                    <fixVersion>Commons JSON 2.0.16</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14993596" author="sseifert@pro-vision.de" created="Fri, 6 Nov 2015 12:43:56 +0000"  >&lt;p&gt;Completed: At revision: 1712953  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12911037">SLING-5271</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12771007" name="SLING-5270-ValidatorTest.java.patch" size="2757" author="sseifert" created="Fri, 6 Nov 2015 12:24:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o21j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5267] TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins, again</title>
                <link>https://issues.apache.org/jira/browse/SLING-5267</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins again, so &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5225&quot; title=&quot;TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5225&quot;&gt;&lt;del&gt;SLING-5225&lt;/del&gt;&lt;/a&gt; wasn&apos;t enough.&lt;br/&gt;
Details:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.commons/2652/testReport/org.apache.sling.discovery.commons.providers.spi.base/TestOakSyncTokenService/testTwoNodesOneLeaving/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.commons/2652/testReport/org.apache.sling.discovery.commons.providers.spi.base/TestOakSyncTokenService/testTwoNodesOneLeaving/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Regression

org.apache.sling.discovery.commons.providers.spi.base.TestOakSyncTokenService.testTwoNodesOneLeaving

Error Message

expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;

Stacktrace

java.lang.AssertionError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
	at org.junit.Assert.fail(Assert.java:74)
	at org.junit.Assert.failNotEquals(Assert.java:448)
	at org.junit.Assert.assertEquals(Assert.java:102)
	at org.junit.Assert.assertEquals(Assert.java:323)
	at org.junit.Assert.assertEquals(Assert.java:319)
	at org.apache.sling.discovery.commons.providers.spi.base.TestOakSyncTokenService.testTwoNodesOneLeaving(TestOakSyncTokenService.java:168)

Standard Output

04.11.2015 11:36:56.864 *INFO * [main] IndexUpdate: Found a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; index node [reference]. Reindexing is requested
04.11.2015 11:36:56.864 *WARN * [main] IndexUpdate: Missing index provider of type [reference], requesting reindex on [/oak:index/reference]
04.11.2015 11:36:57.001 *INFO * [main] IdMapService: registerEventHandler: bundleContext is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; - cannot register
04.11.2015 11:36:57.001 *INFO * [main] IdMapService: init: init failed: java.lang.Exception: No Descriptor value available
04.11.2015 11:36:57.001 *INFO * [main] IdMapService: backgroundCheck: spawning background-thread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;IdMapService-initializer&apos;&lt;/span&gt;
04.11.2015 11:36:57.002 *INFO * [main] OakBacklogClusterSyncService: activate: activated with slingId=5575618b-440a-4370-a27c-3223017bc528
04.11.2015 11:36:57.002 *INFO * [main] ViewStateManagerImpl: handleNewViewNonDelayed: ClusterSyncService set - invoking...
04.11.2015 11:36:57.002 *INFO * [main] ViewStateManagerImpl: handleNewViewNonDelayed: invoking waitForAsyncEvents, then clusterSyncService (modCnt=3)
04.11.2015 11:36:57.002 *INFO * [Discovery-AsyncEventSender] AsyncEventSender: AsyncEventSender.run: started.
04.11.2015 11:36:57.002 *INFO * [Discovery-AsyncEventSender] ViewStateManagerImpl: handleNewViewNonDelayed/waitForAsyncEvents.run: done, now invoking consistencyService (modCnt=3)
04.11.2015 11:36:57.002 *INFO * [Discovery-AsyncEventSender] OakBacklogClusterSyncService: sync: doing wait-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-backlog part &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; view=DefaultTopologyView[current=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, num=2, instances=a905fe58-aa7e-4861-bc9e-3d742746b270[local=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;],5575618b-440a-4370-a27c-3223017bc528[local=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]]
04.11.2015 11:36:57.003 *INFO * [Discovery-AsyncEventSender] OakBacklogClusterSyncService: waitWhileBacklog: could not initialize...
04.11.2015 11:36:57.003 *INFO * [main] IdMapService: registerEventHandler: bundleContext is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; - cannot register
04.11.2015 11:36:57.005 *INFO * [Discovery-AsyncEventSender] OakBacklogClusterSyncService: backgroundCheck: spawning background-thread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;OakBacklogClusterSyncService-backlog-waiting&apos;&lt;/span&gt;
04.11.2015 11:36:57.005 *INFO * [main] IdMapService: init: init failed: java.lang.Exception: No Descriptor value available
04.11.2015 11:36:57.005 *INFO * [main] IdMapService: backgroundCheck: spawning background-thread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;IdMapService-initializer&apos;&lt;/span&gt;
04.11.2015 11:36:57.008 *INFO * [IdMapService-initializer] IdMapService: init: added the following mapping: slingId=5575618b-440a-4370-a27c-3223017bc528 to discovery-lite id=1
04.11.2015 11:36:57.010 *INFO * [main] OakBacklogClusterSyncService: activate: activated with slingId=a905fe58-aa7e-4861-bc9e-3d742746b270
04.11.2015 11:36:57.011 *INFO * [OakBacklogClusterSyncService-backlog-waiting] IdMapService: toSlingId: mapping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1 to 5575618b-440a-4370-a27c-3223017bc528 was newly added.
04.11.2015 11:36:57.011 *INFO * [OakBacklogClusterSyncService-backlog-waiting] OakBacklogClusterSyncService: getBacklogStatus: no backlog (anymore)
04.11.2015 11:36:57.011 *INFO * [OakBacklogClusterSyncService-backlog-waiting] OakBacklogClusterSyncService: waitWhileBacklog: no backlog (anymore), done.
04.11.2015 11:36:57.014 *INFO * [OakBacklogClusterSyncService-backlog-waiting] ViewStateManagerImpl: consistencyService.callback.run: invoking doHandleConsistent.
04.11.2015 11:36:57.015 *INFO * [IdMapService-initializer] IdMapService: init: init failed: java.lang.Exception: No Descriptor value available
04.11.2015 11:36:57.015 *INFO * [OakBacklogClusterSyncService-backlog-waiting] ViewStateManagerImpl: enqueueForAll: sending topologyEvent TopologyEvent [type=TOPOLOGY_INIT, oldView=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, newView=DefaultTopologyView[current=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, num=2, instances=a905fe58-aa7e-4861-bc9e-3d742746b270[local=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;],5575618b-440a-4370-a27c-3223017bc528[local=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]]], to all (1) listeners
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12910682">SLING-5267</key>
            <summary>TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins, again</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2015 11:00:05 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:13 +0000</updated>
                            <resolved>Thu, 5 Nov 2015 11:03:29 +0000</resolved>
                                    <version>Discovery Commons 1.0.2</version>
                                    <fixVersion>Discovery Commons 1.0.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14991522" author="egli" created="Thu, 5 Nov 2015 11:00:46 +0000"  >&lt;p&gt;the test actually had a bug: it was assuming 0 events to be received at a certain point - even though there was the possibility that an event (TOPOLOGY_INIT) was already sent then. &lt;/p&gt;</comment>
                            <comment id="14991526" author="egli" created="Thu, 5 Nov 2015 11:03:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;fixed testTwoNodesOneLeaving by making wait times safer, asserting for background-runnable done-state, plus added more logging in case this one is still not perfectly stable on jenkins&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;in rev 1712742&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nzwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5264] DiscoveryServiceImplTest.testThirtyInstances failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5264</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;DiscoveryServiceImplTest.testThirtyInstances failed on jenkins: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/2659/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/2659/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;DiscoveryServiceImplTest&amp;gt;AbstractDiscoveryServiceTest.testThirtyInstances:304-&amp;gt;AbstractDiscoveryServiceTest.startRetryLoop:311-&amp;gt;AbstractDiscoveryServiceTest.startRetryLoop:315 RetryLoop failed, condition is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; after 100 seconds: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12910650">SLING-5264</key>
            <summary>DiscoveryServiceImplTest.testThirtyInstances failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2015 08:48:12 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:14 +0000</updated>
                            <resolved>Tue, 10 Nov 2015 13:01:28 +0000</resolved>
                                    <version>Discovery Impl 1.2.0</version>
                    <version>Discovery Base 1.0.2</version>
                                    <fixVersion>Discovery Impl 1.2.2</fixVersion>
                    <fixVersion>Discovery Base 1.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14991354" author="egli" created="Thu, 5 Nov 2015 08:58:17 +0000"  >&lt;p&gt;Attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770767/12770767_testThirtyInstances.txt.gz&quot; title=&quot;testThirtyInstances.txt.gz attached to SLING-5264&quot;&gt;testThirtyInstances.txt.gz&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which shows that what happens is that when 30 instances are busy voting, that it takes already quite a long time (46sec) until all the votes come in (as there are many competing votes), but also that the promotion takes long (14sec) - which is just what is configured as heartbeatTimeout: 60sec. So that&apos;s just too short for running this test on jenkins it seems.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;04.11.2015 23:42:50.628 *INFO * [Test-ViewCheckerRunner [i21]] VotingView: newVoting: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; voting started: newViewId=1d07b39a-f5b3-4e14-bf3e-a09b0d2e8c6e, initiatorId=fe69e98e-38b1-42fa-aa37-fb16dd71d8c5, resource=MockedResource, type=nt:unstructured, path=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/testing/ongoingVotings/1d07b39a-f5b3-4e14-bf3e-a09b0d2e8c6e, #members: 30, members: [b32c362d-a3b0-46de-b917-98750884819e, 6c07306f-a92e-455e-a962-cbc9c62af88a, bcbf490c-936d-487b-b81f-fac36b20237a, 7047ae33-2dd4-43d1-a761-3d688d5e3d47, c81bf19a-fbf8-4605-a7b7-3d160229f2e2, 67caf350-0669-4d36-98ce-a1fcdd5bf173, 4c0efefc-94c9-444d-9929-97ea80360e93, 6d7a6243-5157-44aa-b8d8-99fb50a1f09b, fe69e98e-38b1-42fa-aa37-fb16dd71d8c5, b33239d5-40cd-41f7-ae2a-e43d49d6135d, 102b4486-8d74-440d-82ef-81085323d9b8, 3aaf56c4-e4b6-4b49-a21f-f5653164cad8, f1b5d2e1-cc14-450f-83b9-c9905a51ccb1, e9903d05-5e9d-4674-8b46-37a5b03886a3, 3981e8a6-63bd-409e-aa51-622f9701a9d8, 5a6b0e90-919c-4480-9f96-0a11f19b700c, d5ea54dd-314f-4cd7-9a01-ec61f374a1e5, 8a09bf32-5240-417f-a6cc-6009b6e099b4, 70055d1f-c586-44c6-91bd-7c2612290ead, 34d63fbd-690c-4ee7-9f45-2271a67167ef, 4228b36d-a930-4675-aae1-12d99d6abedc, 7cc96bc7-d3b4-4aae-8974-eb2fdb664b6d, 5e1bb59e-5bd7-4a4a-b6f8-bc9ccdc8b862, ac051b29-8646-4933-91d3-4054dcb7996d, c29761b5-d3eb-4be7-bd01-4a0e96e501f8, 7a232c63-a378-4be3-a603-6c0ec1cff488, 804c8ece-58c6-4181-ad22-8cf8db1e7c52, cba9984e-12ed-4ed4-a3f4-38a3e43d206e, 603cc1f9-8193-4a5a-b214-6697b2203518, 4f67c617-95cc-4cd1-b4a5-0fb525c1c9b2]
...
04.11.2015 23:43:36.878 *INFO * [VotingEventListener-i21] fe69e98e-38b1-42fa-aa37-fb16dd71d8c5: promote: promote to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; established node /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/testing/establishedView/1d07b39a-f5b3-4e14-
bf3e-a09b0d2e8c6e

...

04.11.2015 23:43:49.791 *INFO * [VotingEventListener-i28] c81bf19a-fbf8-4605-a7b7-3d160229f2e2: analyzeVotings: deleting a timed out voting: a VotingView[viewId=3cb2332e-6b85-42f2-82cc-d7c952d2f398, id=1d07b39a-f5b3-4e14-bf3e-a09b0d2e8c6e, initiator=fe69e98e-38b1-42fa-aa37-fb16dd71d8c5, members=b32c362d-a3b0-46de-b917-98750884819e, 6c07306f-a92e-455e-a962-cbc9c62af88a, bcbf490c-936d-487b-b81f-fac36b20237a, 7047ae33-2dd4-43d1-a761-3d688d5e3d47, c81bf19a-fbf8-4605-a7b7-3d160229f2e2, 67caf350-0669-4d36-98ce-a1fcdd5bf173, 4c0efefc-94c9-444d-9929-97ea80360e93, 6d7a6243-5157-44aa-b8d8-99fb50a1f09b, fe69e98e-38b1-42fa-aa37-fb16dd71d8c5, b33239d5-40cd-41f7-ae2a-e43d49d6135d, 102b4486-8d74-440d-82ef-81085323d9b8, 3aaf56c4-e4b6-4b49-a21f-f5653164cad8, f1b5d2e1-cc14-450f-83b9-c9905a51ccb1, e9903d05-5e9d-4674-8b46-37a5b03886a3, 3981e8a6-63bd-409e-aa51-622f9701a9d8, 5a6b0e90-919c-4480-9f96-0a11f19b700c, d5ea54dd-314f-4cd7-9a01-ec61f374a1e5, 8a09bf32-5240-417f-a6cc-6009b6e099b4, 70055d1f-c586-44c6-91bd-7c2612290ead, 34d63fbd-690c-4ee7-9f45-2271a67167ef, 4228b36d-a930-4675-aae1-12d99d6abedc, 7cc96bc7-d3b4-4aae-8974-eb2fdb664b6d, 5e1bb59e-5bd7-4a4a-b6f8-bc9ccdc8b862, ac051b29-8646-4933-91d3-4054dcb7996d, c29761b5-d3eb-4be7-bd01-4a0e96e501f8, 7a232c63-a378-4be3-a603-6c0ec1cff488, 804c8ece-58c6-4181-ad22-8cf8db1e7c52, cba9984e-12ed-4ed4-a3f4-38a3e43d206e, 603cc1f9-8193-4a5a-b214-6697b2203518, 4f67c617-95cc-4cd1-b4a5-0fb525c1c9b2]
...

04.11.2015 23:43:50.228 *ERROR* [VotingEventListener-i21] fe69e98e-38b1-42fa-aa37-fb16dd71d8c5: handleEvent: got a PersistenceException during votings analysis: org.apache.sling.api.resource.PersistenceException: Unable to commit changes.
org.apache.sling.api.resource.PersistenceException: Unable to commit changes.
        at org.apache.sling.discovery.base.its.setup.mock.MockedResourceResolver.commit(MockedResourceResolver.java:323)
        at org.apache.sling.discovery.impl.cluster.voting.VotingHandler.promote(VotingHandler.java:504)
        at org.apache.sling.discovery.impl.cluster.voting.VotingHandler.analyzeVotings(VotingHandler.java:244)
        at org.apache.sling.discovery.impl.cluster.voting.VotingHandler.handleEvent(VotingHandler.java:211)
        at org.apache.sling.discovery.impl.setup.VotingEventListener$1.run(VotingEventListener.java:64)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:724)
Caused by: javax.jcr.RepositoryException: Unable to update item: item.save()
        at org.apache.jackrabbit.core.ItemSaveOperation.perform(ItemSaveOperation.java:265)
        at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:200)
        at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
        at org.apache.jackrabbit.core.ItemImpl.save(ItemImpl.java:329)
        at org.apache.jackrabbit.core.session.SessionSaveOperation.perform(SessionSaveOperation.java:42)
        at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:200)
        at org.apache.jackrabbit.core.SessionImpl.perform(SessionImpl.java:355)
        at org.apache.jackrabbit.core.SessionImpl.save(SessionImpl.java:758)
        at org.apache.sling.discovery.base.its.setup.mock.MockedResourceResolver.commit(MockedResourceResolver.java:321)
        ... 5 more
Caused by: org.apache.jackrabbit.core.state.NoSuchItemStateException: c8309a03-0c9b-4575-88a1-f81246d3eef9
        at org.apache.jackrabbit.core.state.SharedItemStateManager.getItemState(SharedItemStateManager.java:282)
        at org.apache.jackrabbit.core.state.SharedItemStateManager$Update.begin(SharedItemStateManager.java:606)
        at org.apache.jackrabbit.core.state.SharedItemStateManager.beginUpdate(SharedItemStateManager.java:1468)
        at org.apache.jackrabbit.core.state.SharedItemStateManager.update(SharedItemStateManager.java:1498)
        at org.apache.jackrabbit.core.state.LocalItemStateManager.update(LocalItemStateManager.java:398)
        at org.apache.jackrabbit.core.state.XAItemStateManager.update(XAItemStateManager.java:354)
        at org.apache.jackrabbit.core.state.LocalItemStateManager.update(LocalItemStateManager.java:373)
        at org.apache.jackrabbit.core.state.SessionItemStateManager.update(SessionItemStateManager.java:274)
        at org.apache.jackrabbit.core.ItemSaveOperation.perform(ItemSaveOperation.java:258)
        ... 13 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14991357" author="egli" created="Thu, 5 Nov 2015 08:59:28 +0000"  >&lt;p&gt;Increased timeouts to account for slowness of apache jenkins in rev 1712724&lt;/p&gt;</comment>
                            <comment id="14991657" author="egli" created="Thu, 5 Nov 2015 13:35:22 +0000"  >&lt;p&gt;test failed again - perhaps some swallowed runtimeexception/error :&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/1946/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/1946/console&lt;/a&gt;&lt;br/&gt;
reopening..&lt;/p&gt;</comment>
                            <comment id="14991659" author="egli" created="Thu, 5 Nov 2015 13:35:43 +0000"  >&lt;p&gt;added some more logging in 1712764&lt;/p&gt;</comment>
                            <comment id="14998284" author="egli" created="Tue, 10 Nov 2015 09:10:45 +0000"  >&lt;p&gt;Seen OOME with this test - handling that separately in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5287&quot; title=&quot;OOME with DiscoveryServiceImplTest.testThirtyInstances on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5287&quot;&gt;&lt;del&gt;SLING-5287&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14998515" author="egli" created="Tue, 10 Nov 2015 13:01:28 +0000"  >&lt;p&gt;Marking fixed as it might well have been a case of running low on memory (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5287&quot; title=&quot;OOME with DiscoveryServiceImplTest.testThirtyInstances on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5287&quot;&gt;&lt;del&gt;SLING-5287&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12911798">SLING-5287</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12770767" name="testThirtyInstances.txt.gz" size="1150678" author="stefanegli" created="Thu, 5 Nov 2015 08:58:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nzpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5261] Background servlets: use a separate session for captured output</title>
                <link>https://issues.apache.org/jira/browse/SLING-5261</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We use the bgservlet to perform batch actions on content in the background, decoupling it from the user request. We saw a case where these batch actions failed and also no log was written. We have lots of exceptions like this in the log:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;02.11.2015 23:50:32.264 *ERROR* [pool-5743-thread-3] com.day.cq.wcm.msm.impl.commands.RolloutCommand Trying to commit status change: {}
java.io.IOException: RepositoryException in flush()
        at org.apache.sling.bgservlets.impl.nodestream.NodeOutputStream.flush(NodeOutputStream.java:103)
        at org.apache.sling.bgservlets.impl.nodestream.NodeOutputStream.flushIfNeeded(NodeOutputStream.java:110)
        at org.apache.sling.bgservlets.impl.nodestream.NodeOutputStream.write(NodeOutputStream.java:129)
        at java.io.FilterOutputStream.write(FilterOutputStream.java:71)
        at org.apache.sling.bgservlets.impl.SuspendableOutputStream.write(SuspendableOutputStream.java:65)
        at org.apache.sling.bgservlets.BackgroundHttpServletResponse$ServletOutputStreamWrapper.write(BackgroundHttpServletResponse.java:47)
        at javax.servlet.ServletOutputStream.print(ServletOutputStream.java:101)
        at javax.servlet.ServletOutputStream.println(ServletOutputStream.java:252)
     ...
Caused by: javax.jcr.InvalidItemStateException: OakState0001: Unresolved conflicts in /content/foo/bar/jcr:content
        at org.apache.jackrabbit.oak.api.CommitFailedException.asRepositoryException(CommitFailedException.java:237)
        at org.apache.jackrabbit.oak.api.CommitFailedException.asRepositoryException(CommitFailedException.java:212)
        at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.newRepositoryException(SessionDelegate.java:664)
        at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.save(SessionDelegate.java:489)
        at org.apache.jackrabbit.oak.jcr.session.SessionImpl$8.performVoid(SessionImpl.java:406)
        at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.performVoid(SessionDelegate.java:268)
        at org.apache.jackrabbit.oak.jcr.session.SessionImpl.save(SessionImpl.java:403)
        at org.apache.sling.bgservlets.impl.DeepNodeCreator.deepCreateNode(DeepNodeCreator.java:60)
        at org.apache.sling.bgservlets.impl.nodestream.NodeOutputStream.flush(NodeOutputStream.java:92)
        ... 134 common frames omitted
Caused by: org.apache.jackrabbit.oak.api.CommitFailedException: OakState0001: Unresolved conflicts in /content/foo/bar/jcr:content
        at org.apache.jackrabbit.oak.plugins.commit.ConflictValidator.failOnMergeConflict(ConflictValidator.java:115)
        at org.apache.jackrabbit.oak.plugins.commit.ConflictValidator.propertyChanged(ConflictValidator.java:90)
        at org.apache.jackrabbit.oak.spi.commit.CompositeEditor.propertyChanged(CompositeEditor.java:91)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.propertyChanged(EditorDiff.java:93)
        at org.apache.jackrabbit.oak.spi.state.AbstractNodeState.comparePropertiesAgainstBaseState(AbstractNodeState.java:181)
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.compare(DocumentNodeStore.java:1394)
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeState.compareAgainstBaseState(DocumentNodeState.java:344)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeChanged(EditorDiff.java:148)
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.dispatch(DocumentNodeStore.java:2108)
     ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The exception happens when writing to the output stream (which is redirected to write to the repo somewhere below /var/bg), but it logs a conflict in /content.&lt;/p&gt;

&lt;p&gt;For me it looks like that the session which is attached to the user request is used for 2 different aspects:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;processing the actions on the content&lt;/li&gt;
	&lt;li&gt;logging the output to the repository&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;check the BackgroundRequestExecutionJob class, where the &#8222;resource resolver&#8220; is used for both constructing the &#8222;response&#8220; object and as parameter into the slingRequestProcessor.processRequest() call.&lt;/p&gt;

&lt;p&gt;For me it looks like if an repository exception happens on on the processing side, this effectively prevents the writing to the output stream as well (as seen by the path where this OakState0001 exception is being reported). I think, that the action doesn&#8217;t clear the JCR transient space after an exception which will cause any subsequent session.save() to fail as well.&lt;/p&gt;

&lt;p&gt;While we could consider this as a problematic case in the handling of the request itself, the bgservlets should at least be capable to store any issue written to the output stream successfully in the repository. So a dedicated session to write the output would be very good to have.&lt;/p&gt;

&lt;p&gt;But there is also a different problem with the current implementation: When the request fills the transient space and does call session.save() yet, but rather writes to the outpustream, it might be case that the bgservlets do the session.save(), thus saving the transient space created by the regular execution as well.&lt;/p&gt;

&lt;p&gt;So I suggest this patch:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Index: BackgroundRequestExecutionJob.java
===================================================================
--- BackgroundRequestExecutionJob.java    (revision 1710381)
+++ BackgroundRequestExecutionJob.java    (working copy)
@@ -50,6 +50,7 @@
     private final BackgroundHttpServletResponse response;
     private final SuspendableOutputStream stream;
     private final ResourceResolver resourceResolver;
+    private final ResourceResolver bgResponseResolver;
     private final SlingRequestProcessor slingRequestProcessor;
     private final String path;
     private final String streamPath;
@@ -72,8 +73,11 @@
         // current request, for the background request.
         resourceResolver = request.getResourceResolver().clone(null);

+    // create a dedicated session for the response object
+    bgResponseResolver = request.getResourceResolver().clone(null);
+
         // Get JobData, defines path and used to save servlet output to the repository
-        final Session s = resourceResolver.adaptTo(Session.class);
+        final Session s = bgResponseResolver.adaptTo(Session.class);
         if(s == null) {
             throw new IOException(&quot;Unable to get Session from ResourceResolver &quot; + resourceResolver);
         }
@@ -110,6 +114,8 @@

             // cleanup the resource resolver
             resourceResolver.close();
+        bgResponseResolver.close();
+
         }
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12910481">SLING-5261</key>
            <summary>Background servlets: use a separate session for captured output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Nov 2015 21:13:11 +0000</created>
                <updated>Tue, 8 Feb 2022 09:18:53 +0000</updated>
                            <resolved>Thu, 19 Nov 2015 21:01:21 +0000</resolved>
                                    <version>Background Servlets 1.0.0</version>
                                    <fixVersion>Background Servlets 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15006882" author="bdelacretaz" created="Mon, 16 Nov 2015 16:30:12 +0000"  >&lt;p&gt;Thanks for your contribution, it looks good to me. I have committed a slightly modified version of your patch in &lt;a href=&quot;http://svn.apache.org/r1714623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1714623&lt;/a&gt; - same mechanism but some name changes to clarify things. &lt;/p&gt;

&lt;p&gt;Please cross-check.&lt;/p&gt;</comment>
                            <comment id="15009734" author="joerghoh" created="Tue, 17 Nov 2015 22:34:46 +0000"  >&lt;p&gt;Looks good to me. &lt;/p&gt;

&lt;p&gt;What&apos;s your estimated date for the release of version 1.0.2 of the bgservlets?&lt;/p&gt;</comment>
                            <comment id="15012068" author="bdelacretaz" created="Wed, 18 Nov 2015 21:48:01 +0000"  >&lt;p&gt;I&apos;ll try to do this release later this week.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13015441">SLING-6191</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nynz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5260] AbstractClusterTest.testConnectorSwitching4139 test parameters too tight</title>
                <link>https://issues.apache.org/jira/browse/SLING-5260</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;AbstractClusterTest.testConnectorSwitching4139 has a part where it has 5 instances, then crashes 1 and wants to make sure that its crash is properly propagated through the topology. The problem is, that instance has a timeout of 10sec. And the loop does at least 20x500ms and ensures that the crashed instance is properly noticed &lt;b&gt;within its cluster by its peer instance&lt;/b&gt; (only). That doesn&apos;t mean though, that it also propagated to the others via connectors - as that would just yet happen with the next heartbeat.&lt;/p&gt;

&lt;p&gt;So in short: those 20x500ms looping are too close to the 10sec timeout.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12910346">SLING-5260</key>
            <summary>AbstractClusterTest.testConnectorSwitching4139 test parameters too tight</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Nov 2015 13:28:39 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:14 +0000</updated>
                            <resolved>Wed, 4 Nov 2015 13:41:32 +0000</resolved>
                                    <version>Discovery Base 1.0.2</version>
                                    <fixVersion>Discovery Base 1.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14989537" author="egli" created="Wed, 4 Nov 2015 13:41:32 +0000"  >&lt;p&gt;test adjusted in 1712546&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nxu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>