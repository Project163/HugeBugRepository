diff --git a/src/java/org/apache/commons/jelly/tags/core/SwitchTag.java b/src/java/org/apache/commons/jelly/tags/core/SwitchTag.java
index ae36c40b..89215fcc 100644
--- a/src/java/org/apache/commons/jelly/tags/core/SwitchTag.java
+++ b/src/java/org/apache/commons/jelly/tags/core/SwitchTag.java
@@ -31,7 +31,7 @@ import org.apache.commons.jelly.expression.Expression;
  * @see DefaultTag
  *
  * @author Rodney Waldhoff
- * @version $Revision: 1.7 $ $Date: 2004/09/09 12:27:53 $
+ * @version $Revision: 1.7 $ $Date$
  */
 public class SwitchTag extends TagSupport {
 
@@ -52,6 +52,10 @@ public class SwitchTag extends TagSupport {
     }
 
     public void doTag(XMLOutput output) throws MissingAttributeException, JellyTagException {
+        this.defaultEncountered = false;
+        this.someCaseMatched = false;
+        this.fallingThru = false;
+                
         if(null == on) {
             throw new MissingAttributeException("on");
         } else {
diff --git a/src/test/org/apache/commons/jelly/core/TestSwitchTag.java b/src/test/org/apache/commons/jelly/core/TestSwitchTag.java
index 5ea2f42d..6e685598 100644
--- a/src/test/org/apache/commons/jelly/core/TestSwitchTag.java
+++ b/src/test/org/apache/commons/jelly/core/TestSwitchTag.java
@@ -24,7 +24,7 @@ import org.apache.commons.jelly.test.BaseJellyTest;
 
 /**
  * @author Rodney Waldhoff
- * @version $Revision: 1.9 $ $Date: 2004/10/26 23:54:37 $
+ * @version $Revision: 1.9 $ $Date$
  */
 public class TestSwitchTag extends BaseJellyTest {
 
@@ -184,4 +184,12 @@ public class TestSwitchTag extends BaseJellyTest {
         }
     }
 
+    public void testSeveralCall() throws Exception {
+        setUpScript("testSeveralSwitchCall.jelly");
+        Script script = getJelly().compileScript();
+        getJellyContext().setVariable("var","foo");
+        script.run(getJellyContext(),getXMLOutput());        
+        assertEquals("defaultdefault",getJellyContext().getVariable("res"));
+    }
+
 }
diff --git a/src/test/org/apache/commons/jelly/core/testSeveralSwitchCall.jelly b/src/test/org/apache/commons/jelly/core/testSeveralSwitchCall.jelly
new file mode 100644
index 00000000..7cbe3bdc
--- /dev/null
+++ b/src/test/org/apache/commons/jelly/core/testSeveralSwitchCall.jelly
@@ -0,0 +1,15 @@
+<j:jelly xmlns:j="jelly:core">
+	<j:forEach var="var" items="a,b">
+		<j:switch on="${var}">
+			<j:case value="unencountered1">
+				<j:set var="res" value="1"/>
+			</j:case>
+			<j:case value="unencountered2">
+				<j:set var="res" value="2"/>
+			</j:case>			
+			<j:default>
+				<j:set var="res" value="${res}default"/>			
+			</j:default>
+		</j:switch>
+	</j:forEach>		
+</j:jelly>
