diff --git a/src/java/org/apache/commons/jelly/parser/XMLParser.java b/src/java/org/apache/commons/jelly/parser/XMLParser.java
index 413b801b..c4b928c4 100644
--- a/src/java/org/apache/commons/jelly/parser/XMLParser.java
+++ b/src/java/org/apache/commons/jelly/parser/XMLParser.java
@@ -68,7 +68,7 @@ import org.xml.sax.helpers.AttributesImpl;
  * The SAXParser and XMLReader portions of this code come from Digester.</p>
  *
  * @author <a href="mailto:jstrachan@apache.org">James Strachan</a>
- * @version $Revision: 1.49 $
+ * @version $Revision: 1.50 $
  */
 public class XMLParser extends DefaultHandler {
 
@@ -1069,12 +1069,12 @@ public class XMLParser extends DefaultHandler {
             // now iterate through through the expressions
             int size = list.getLength();
             for (int i = 0; i < size; i++) {
-                String attributeName = list.getLocalName(i);
                 String attributeValue = list.getValue(i);
                 Expression expression = CompositeExpression.parse(
-                    attributeValue, getExpressionFactory()
-                );
-                script.addAttribute(attributeName, expression);
+                        attributeValue, getExpressionFactory()
+                    );
+                String attrQName = list.getQName(i);
+                script.addAttribute(attrQName, expression);
             }
             return script;
         }
diff --git a/src/test/org/apache/commons/jelly/core/TestFileTag.java b/src/test/org/apache/commons/jelly/core/TestFileTag.java
index e177ced4..e65bd032 100644
--- a/src/test/org/apache/commons/jelly/core/TestFileTag.java
+++ b/src/test/org/apache/commons/jelly/core/TestFileTag.java
@@ -15,9 +15,6 @@
  */
 package org.apache.commons.jelly.core;
 
-import java.io.FileInputStream;
-import java.io.IOException;
-import java.io.InputStream;
 import java.io.StringWriter;
 
 import junit.framework.TestSuite;
@@ -31,7 +28,7 @@ import org.xml.sax.SAXException;
 
 /**
  * @author <a href="mailto:robert@bull-enterprises.com">Robert McIntosh</a>
- * @version $Revision: 1.4 $
+ * @version $Revision: 1.5 $
  */
 public class TestFileTag extends BaseJellyTest
 {
@@ -56,9 +53,9 @@ public class TestFileTag extends BaseJellyTest
         String data = (String)getJellyContext().getVariable("testFileTag");
 
         //FIXME This doesn't take into account attribute ordering
-        //assertEquals("target/testFileTag.tmp", 
-        //        "<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"></html>", 
-        //        data);
+        assertEquals("fully qualified attributes not passed", 
+                "<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"></html>", 
+                data);
     }
 
     public void testDom4Xmlns() throws SAXException {
