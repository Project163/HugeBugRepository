diff --git a/core/src/main/java/org/apache/commons/vfs/provider/sftp/SftpFileObject.java b/core/src/main/java/org/apache/commons/vfs/provider/sftp/SftpFileObject.java
index 14436e25..1ea77d07 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/sftp/SftpFileObject.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/sftp/SftpFileObject.java
@@ -56,6 +56,8 @@ public class SftpFileObject extends AbstractFileObject implements FileObject
 	private SftpATTRS attrs;
 	private final String relPath;
 
+	private boolean inRefresh;
+
 	protected SftpFileObject(final FileName name,
 			final SftpFileSystem fileSystem) throws FileSystemException
 	{
@@ -65,6 +67,36 @@ public class SftpFileObject extends AbstractFileObject implements FileObject
 				name));
 	}
 
+	protected void doDetach() throws Exception
+	{
+		attrs = null;
+	}
+
+	public void refresh() throws FileSystemException
+	{
+		if (!inRefresh)
+		{
+			try
+			{
+				inRefresh = true;
+				super.refresh();
+				try
+				{
+					attrs = null;
+					getType();
+				}
+				catch (IOException e)
+				{
+					throw new FileSystemException(e);
+				}
+			}
+			finally
+			{
+				inRefresh = false;
+			}
+		}
+	}
+
 	/**
 	 * Determines the type of this file, returns null if the file does not
 	 * exist.
