diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index fde22658..e772754a 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -95,6 +95,10 @@ The <action> type attribute can be add,update,fix,remove.
         Allow accessToUnderlyingConnectionAllowed to be configured when
         configuration takes place via JNDI in a JavaEE container.
       </action>
+      <action dev="markt" issue="DBCP-369" type="fix" due-to="Michael Pradel">
+        Fix threading issue when using multiple instances of the
+        SharedPoolDataSource concurrently.
+      </action>
     </release>
     <release version="1.5.1" date="TBD" description="TBD">
       <action dev="markt" issue="DBCP-400" type="fix">
diff --git a/src/main/java/org/apache/commons/dbcp2/datasources/InstanceKeyObjectFactory.java b/src/main/java/org/apache/commons/dbcp2/datasources/InstanceKeyObjectFactory.java
index 63c404a6..2cce68da 100644
--- a/src/main/java/org/apache/commons/dbcp2/datasources/InstanceKeyObjectFactory.java
+++ b/src/main/java/org/apache/commons/dbcp2/datasources/InstanceKeyObjectFactory.java
@@ -14,7 +14,6 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-
 package org.apache.commons.dbcp2.datasources;
 
 import java.io.ByteArrayInputStream;
@@ -23,10 +22,10 @@ import java.io.ObjectInputStream;
 
 import java.util.Hashtable;
 import java.util.Map;
-import java.util.HashMap;
 import java.util.Iterator;
 import java.util.Map.Entry;
 import java.util.Properties;
+import java.util.concurrent.ConcurrentHashMap;
 
 import javax.naming.Context;
 import javax.naming.Name;
@@ -40,11 +39,10 @@ import javax.naming.spi.ObjectFactory;
  *
  * @version $Revision$ $Date$
  */
-abstract class InstanceKeyObjectFactory
-    implements ObjectFactory
-{
+abstract class InstanceKeyObjectFactory implements ObjectFactory {
+
     private static final Map<String, InstanceKeyDataSource> instanceMap =
-            new HashMap<>();
+            new ConcurrentHashMap<>();
 
     synchronized static String registerNewInstance(InstanceKeyDataSource ds) {
         int max = 0;
