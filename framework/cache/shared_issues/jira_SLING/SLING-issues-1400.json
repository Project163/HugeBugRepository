<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:37:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22SLING%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="1400" end="1600" total="4707"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[SLING-8010] Flaw when executionplans are configured as empty in packageinit</title>
                <link>https://issues.apache.org/jira/browse/SLING-8010</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While adding a bit more test coverage I noticed that there is a refactoring flaw in the code not handling the case well where packageinit should skip when no executionplan is configured.&lt;/p&gt;

&lt;p&gt;The background is that an early draft was based on ConfigurationPolicy where this SlingRepositoryInitializer Service is supposed to always be active but skip in case there is nothing to install.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13191183">SLING-8010</key>
            <summary>Flaw when executionplans are configured as empty in packageinit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="dsuess">Dominik S&#252;&#223;</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Oct 2018 12:22:38 +0000</created>
                <updated>Tue, 2 Feb 2021 16:50:52 +0000</updated>
                            <resolved>Fri, 12 Oct 2018 13:30:03 +0000</resolved>
                                                    <fixVersion>JCR Package Init 1.0.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16647876" author="githubbot" created="Fri, 12 Oct 2018 12:49:39 +0000"  >&lt;p&gt;DominikSuess closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8010&quot; title=&quot;Flaw when executionplans are configured as empty in packageinit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8010&quot;&gt;&lt;del&gt;SLING-8010&lt;/del&gt;&lt;/a&gt; - replacing nullcheck by check for empty list as it is alw&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-packageinit/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/.gitignore b/.gitignore&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..7aba5f8&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/.gitignore&lt;br/&gt;
@@ -0,0 +1,3 @@&lt;br/&gt;
+.settings&lt;br/&gt;
+.classpath&lt;br/&gt;
+.project&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/jcr/packageinit/impl/ExecutionPlanRepoInitializer.java b/src/main/java/org/apache/sling/jcr/packageinit/impl/ExecutionPlanRepoInitializer.java&lt;br/&gt;
index 8631cf7..9d5346f 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/jcr/packageinit/impl/ExecutionPlanRepoInitializer.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/jcr/packageinit/impl/ExecutionPlanRepoInitializer.java&lt;br/&gt;
@@ -143,7 +143,7 @@ private boolean isCandidateProcessed(String candidate, Integer executedHash) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public void processRepository(SlingRepository slingRepository) throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (executionPlans != null) {&lt;br/&gt;
+        if (!executionPlans.isEmpty()) {&lt;br/&gt;
             ServiceTracker&amp;lt;PackageRegistry, ?&amp;gt; st = new ServiceTracker&amp;lt;&amp;gt;(context, PackageRegistry.class, null);&lt;br/&gt;
             try {&lt;br/&gt;
                 st.open();&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/jcr/packageinit/ExecutionPlanRepoInitializerTest.java b/src/test/java/org/apache/sling/jcr/packageinit/ExecutionPlanRepoInitializerTest.java&lt;br/&gt;
index 40f4157..822ae8b 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/src/test/java/org/apache/sling/jcr/packageinit/ExecutionPlanRepoInitializerTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/jcr/packageinit/ExecutionPlanRepoInitializerTest.java&lt;br/&gt;
@@ -16,7 +16,9 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.sling.jcr.packageinit;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+import static org.hamcrest.CoreMatchers.is;&lt;br/&gt;
 import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertThat;&lt;br/&gt;
 import static org.junit.Assert.assertTrue;&lt;br/&gt;
 import static org.junit.Assert.fail;&lt;br/&gt;
 import static org.mockito.Mockito.never;&lt;br/&gt;
@@ -45,15 +47,23 @@&lt;br/&gt;
 import org.apache.sling.jcr.packageinit.impl.ExecutionPlanRepoInitializer;&lt;br/&gt;
 import org.apache.sling.testing.mock.osgi.MockOsgi;&lt;br/&gt;
 import org.apache.sling.testing.mock.sling.junit.SlingContext;&lt;br/&gt;
+import org.junit.After;&lt;br/&gt;
 import org.junit.Before;&lt;br/&gt;
 import org.junit.Rule;&lt;br/&gt;
 import org.junit.Test;&lt;br/&gt;
 import org.junit.rules.TemporaryFolder;&lt;br/&gt;
 import org.junit.runner.RunWith;&lt;br/&gt;
 import org.mockito.ArgumentCaptor;&lt;br/&gt;
+import org.mockito.Captor;&lt;br/&gt;
 import org.mockito.Mock;&lt;br/&gt;
 import org.mockito.Spy;&lt;br/&gt;
 import org.mockito.junit.MockitoJUnitRunner;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+import ch.qos.logback.classic.Logger;&lt;br/&gt;
+import ch.qos.logback.classic.spi.ILoggingEvent;&lt;br/&gt;
+import ch.qos.logback.classic.spi.LoggingEvent;&lt;br/&gt;
+import ch.qos.logback.core.Appender;&lt;/p&gt;

&lt;p&gt; @RunWith(MockitoJUnitRunner.class)&lt;br/&gt;
 public class ExecutionPlanRepoInitializerTest {&lt;br/&gt;
@@ -93,10 +103,15 @@&lt;br/&gt;
     @Mock&lt;br/&gt;
     ExecutionPlanBuilder builder2;&lt;/p&gt;

&lt;p&gt;-&lt;br/&gt;
     @Mock&lt;br/&gt;
     ExecutionPlan xplan;&lt;/p&gt;

&lt;p&gt;+    @Mock&lt;br/&gt;
+    private Appender&amp;lt;ILoggingEvent&amp;gt; mockAppender;&lt;br/&gt;
+    &lt;br/&gt;
+    @Captor&lt;br/&gt;
+    private ArgumentCaptor&amp;lt;LoggingEvent&amp;gt; captorLoggingEvent;&lt;br/&gt;
+&lt;br/&gt;
     private File statusFile;&lt;/p&gt;


&lt;p&gt;@@ -105,11 +120,31 @@ public void setup() throws IOException, PackageException &lt;/p&gt;
{
         when(registry.createExecutionPlan()).thenReturn(builder);
         when(builder.execute()).thenReturn(xplan);
         this.statusFile = temporaryFolder.newFile(STATUSFILE_NAME + UUID.randomUUID());
+        final Logger logger = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);
+        logger.addAppender(mockAppender);
     }

&lt;p&gt;+    @After&lt;br/&gt;
+    public void teardown() &lt;/p&gt;
{
+        final Logger logger = (Logger) LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);
+        logger.detachAppender(mockAppender);
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void skipWithoutExecution() throws Exception {&lt;br/&gt;
+        ExecutionPlanRepoInitializer initializer = registerRepoInitializer(new String[]{});&lt;br/&gt;
+&lt;br/&gt;
+        initializer.processRepository(slingRepo);&lt;br/&gt;
+        verify(mockAppender).doAppend(captorLoggingEvent.capture());&lt;br/&gt;
+        final LoggingEvent loggingEvent = captorLoggingEvent.getValue();&lt;br/&gt;
+        assertThat(loggingEvent.getFormattedMessage(),&lt;br/&gt;
+                is(&quot;No executionplans configured skipping init.&quot;));&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
     @Test&lt;br/&gt;
     public void waitForRegistryAndInstall() throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ExecutionPlanRepoInitializer initializer = registerRepoInitializer();&lt;br/&gt;
+        ExecutionPlanRepoInitializer initializer = registerRepoInitializer(EXECUTIONSPLANS);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         CountDownLatch cdl = new CountDownLatch(1);&lt;br/&gt;
         processRepository(initializer, cdl);&lt;br/&gt;
@@ -131,7 +166,7 @@ public void waitForRegistryAndInstall() throws Exception {&lt;/p&gt;

&lt;p&gt;     @Test&lt;br/&gt;
     public void doubleExecute() throws Exception {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ExecutionPlanRepoInitializer initializer = registerRepoInitializer();&lt;br/&gt;
+        ExecutionPlanRepoInitializer initializer = registerRepoInitializer(EXECUTIONSPLANS);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         CountDownLatch cdl = new CountDownLatch(1);&lt;br/&gt;
         processRepository(initializer, cdl);&lt;br/&gt;
@@ -147,7 +182,7 @@ public void doubleExecute() throws Exception {&lt;br/&gt;
         when(registry.createExecutionPlan()).thenReturn(builder2);&lt;/p&gt;

&lt;p&gt;         MockOsgi.deactivate(initializer, context.bundleContext());&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;initializer = registerRepoInitializer();&lt;br/&gt;
+        initializer = registerRepoInitializer(EXECUTIONSPLANS);&lt;br/&gt;
         processRepository(initializer, cdl);;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         cdl.await(500, TimeUnit.MILLISECONDS);&lt;br/&gt;
@@ -155,10 +190,10 @@ public void doubleExecute() throws Exception {&lt;/p&gt;

&lt;p&gt;     }&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private ExecutionPlanRepoInitializer registerRepoInitializer() {&lt;br/&gt;
+    private ExecutionPlanRepoInitializer registerRepoInitializer(String[] executionPlans) {&lt;br/&gt;
         ExecutionPlanRepoInitializer initializer = new ExecutionPlanRepoInitializer();&lt;br/&gt;
         Dictionary&amp;lt;String, Object&amp;gt; props = new Hashtable&amp;lt;String, Object&amp;gt;();&lt;/li&gt;
	&lt;li&gt;props.put(&quot;executionplans&quot;, EXECUTIONSPLANS);&lt;br/&gt;
+        props.put(&quot;executionplans&quot;, executionPlans);&lt;br/&gt;
         props.put(&quot;statusfilepath&quot;, statusFile.getAbsolutePath());&lt;br/&gt;
         context.registerInjectActivateService(initializer, props);&lt;br/&gt;
         return initializer;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16647904" author="dsuess" created="Fri, 12 Oct 2018 13:30:59 +0000"  >&lt;p&gt;Externally (gitbox) merged by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;  due to problems with github setup - thx.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3z4nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-8009] check_staged_release.sh should validate that the -source-release.zip file is present</title>
                <link>https://issues.apache.org/jira/browse/SLING-8009</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;check_staged_release.sh&lt;/tt&gt; script validates checksums and signatures, but does not ensure that the required &lt;tt&gt;-source-release.zip&lt;/tt&gt; file exists.&lt;/p&gt;

&lt;p&gt;There should be a strict check for that, to ensure incorrect releases don&apos;t slip through.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13191152">SLING-8009</key>
            <summary>check_staged_release.sh should validate that the -source-release.zip file is present</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Oct 2018 08:49:43 +0000</created>
                <updated>Fri, 12 Oct 2018 08:49:43 +0000</updated>
                                                                            <component>Build and Source Control</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3z4h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-8006] IndexOutOfBoundsException in ResourceProviderTracker.setObservationReporterGenerator</title>
                <link>https://issues.apache.org/jira/browse/SLING-8006</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a ResourceProvider goes away while being activated, we remove it from the list of handlers for a given path. However, we don&apos;t remove the empty list of handlers in the case where it was the only available handler for a given path. &lt;/p&gt;

&lt;p&gt;That can lead to a problem later on where we assume that if we have a list of handlers for a path it will at least contain one handler (and just use .get(0)). This happens in the ResourceProviderTracker.setObservationReporterGenerator method and will cause IOOB Exceptions from that point onwards.&lt;/p&gt;

&lt;p&gt;Looks like this:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
        at java.util.ArrayList.rangeCheck(ArrayList.java:657)
        at java.util.ArrayList.get(ArrayList.java:433)
        at org.apache.sling.resourceresolver.impl.providers.ResourceProviderTracker.setObservationReporterGenerator(ResourceProviderTracker.java:155) 
        at org.apache.sling.resourceresolver.impl.observation.ResourceChangeListenerWhiteboard.updateProviderTracker(ResourceChangeListenerWhiteboard.java:109) 
        at org.apache.sling.resourceresolver.impl.observation.ResourceChangeListenerWhiteboard.access$100(ResourceChangeListenerWhiteboard.java:44) 
        at org.apache.sling.resourceresolver.impl.observation.ResourceChangeListenerWhiteboard$1.addingService(ResourceChangeListenerWhiteboard.java:88) 
        at org.apache.sling.resourceresolver.impl.observation.ResourceChangeListenerWhiteboard$1.addingService(ResourceChangeListenerWhiteboard.java:64) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13190767">SLING-8006</key>
            <summary>IndexOutOfBoundsException in ResourceProviderTracker.setObservationReporterGenerator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Oct 2018 21:52:17 +0000</created>
                <updated>Thu, 1 Nov 2018 17:12:33 +0000</updated>
                            <resolved>Wed, 10 Oct 2018 21:57:53 +0000</resolved>
                                    <version>Resource Resolver 1.6.6</version>
                                    <fixVersion>Resource Resolver 1.6.8</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16645594" author="karlpauls" created="Wed, 10 Oct 2018 21:57:53 +0000"  >&lt;p&gt;Fixed in e1587c2..cbf85dd.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3z23j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-8004] CMS - UI - Fields Not Disabled on Form Submit</title>
                <link>https://issues.apache.org/jira/browse/SLING-8004</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We converted the &amp;lt;fieldset&amp;gt; container to a &amp;lt;div&amp;gt; and Bulma does not support marking fieldsets as disabled so the fields are not being marked as disabled when forms were submitted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13190709">SLING-8004</key>
            <summary>CMS - UI - Fields Not Disabled on Form Submit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Oct 2018 18:03:47 +0000</created>
                <updated>Fri, 9 Nov 2018 14:49:48 +0000</updated>
                            <resolved>Wed, 10 Oct 2018 18:27:14 +0000</resolved>
                                    <version>App CMS 0.10.0</version>
                                    <fixVersion>App CMS 0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16645384" author="klcodanr" created="Wed, 10 Oct 2018 18:27:14 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/a602a3981d999d482c32199e737b625f678d83fe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/a602a3981d999d482c32199e737b625f678d83fe&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3z1qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7998] The FeatureJSONReader doesn&apos;t report in which file it encountered an error when the location information is available</title>
                <link>https://issues.apache.org/jira/browse/SLING-7998</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a JSON file is invalid&#160;and is passed to the&#160;&lt;tt&gt;FeatureJSONReader&lt;/tt&gt;, then the reader&#160;doesn&apos;t report in which file it encountered an error when the location information is available.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13190349">SLING-7998</key>
            <summary>The FeatureJSONReader doesn&apos;t report in which file it encountered an error when the location information is available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Oct 2018 11:57:43 +0000</created>
                <updated>Thu, 13 Feb 2020 09:06:07 +0000</updated>
                            <resolved>Tue, 9 Oct 2018 12:52:19 +0000</resolved>
                                    <version>Feature Model IO 0.1.2</version>
                                    <fixVersion>Feature Model IO 0.2.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16643224" author="githubbot" created="Tue, 9 Oct 2018 12:08:00 +0000"  >&lt;p&gt;raducotescu opened a new pull request #5: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7998&quot; title=&quot;The FeatureJSONReader doesn&amp;#39;t report in which file it encountered an error when the location information is available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7998&quot;&gt;&lt;del&gt;SLING-7998&lt;/del&gt;&lt;/a&gt; - The FeatureJSONReader doesn&apos;t report in which file it encountered an error when the location information is available&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;handle `javax.json.stream.JsonParsingException`&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643232" author="githubbot" created="Tue, 9 Oct 2018 12:13:51 +0000"  >&lt;p&gt;simonetripodi commented on issue #5: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7998&quot; title=&quot;The FeatureJSONReader doesn&amp;#39;t report in which file it encountered an error when the location information is available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7998&quot;&gt;&lt;del&gt;SLING-7998&lt;/del&gt;&lt;/a&gt; - The FeatureJSONReader doesn&apos;t report in which file it encountered an error when the location information is available&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5#issuecomment-428168705&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5#issuecomment-428168705&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   LGTM!!! &#129351; &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643294" author="githubbot" created="Tue, 9 Oct 2018 12:51:37 +0000"  >&lt;p&gt;bosschaert closed pull request #5: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7998&quot; title=&quot;The FeatureJSONReader doesn&amp;#39;t report in which file it encountered an error when the location information is available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7998&quot;&gt;&lt;del&gt;SLING-7998&lt;/del&gt;&lt;/a&gt; - The FeatureJSONReader doesn&apos;t report in which file it encountered an error when the location information is available&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643295" author="githubbot" created="Tue, 9 Oct 2018 12:51:58 +0000"  >&lt;p&gt;bosschaert commented on issue #5: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7998&quot; title=&quot;The FeatureJSONReader doesn&amp;#39;t report in which file it encountered an error when the location information is available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7998&quot;&gt;&lt;del&gt;SLING-7998&lt;/del&gt;&lt;/a&gt; - The FeatureJSONReader doesn&apos;t report in which file it encountered an error when the location information is available&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5#issuecomment-428179516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5#issuecomment-428179516&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the pull request @raducotescu - it&apos;s merged!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643297" author="bosschaert" created="Tue, 9 Oct 2018 12:52:19 +0000"  >&lt;p&gt;Thanks for the fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16643398" author="githubbot" created="Tue, 9 Oct 2018 13:08:02 +0000"  >&lt;p&gt;raducotescu commented on issue #5: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7998&quot; title=&quot;The FeatureJSONReader doesn&amp;#39;t report in which file it encountered an error when the location information is available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7998&quot;&gt;&lt;del&gt;SLING-7998&lt;/del&gt;&lt;/a&gt; - The FeatureJSONReader doesn&apos;t report in which file it encountered an error when the location information is available&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5#issuecomment-428184698&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/5#issuecomment-428184698&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks a lot, guys! &#128077; &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yzjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7995] Manifold pipe not registered in PlumberServlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-7995</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Can&apos;t start a root Manifold pipe via http, as the type is not registered with PlumberServlet.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13190333">SLING-7995</key>
            <summary>Manifold pipe not registered in PlumberServlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="stefanp@gmail.com">Stefan Popescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Oct 2018 10:07:00 +0000</created>
                <updated>Fri, 15 Feb 2019 15:54:47 +0000</updated>
                            <resolved>Tue, 9 Oct 2018 10:11:04 +0000</resolved>
                                    <version>Pipes 3.0.2</version>
                                    <fixVersion>Pipes 3.1.0</fixVersion>
                                    <component>Extensions</component>
                    <component>pipes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16643081" author="stefanp@gmail.com" created="Tue, 9 Oct 2018 10:11:04 +0000"  >&lt;p&gt;PR:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-pipes/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-pipes/pull/8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16769446" author="npeltier" created="Fri, 15 Feb 2019 15:54:47 +0000"  >&lt;p&gt;3.1.0 is released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yzfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7987] AnalyseFeaturesMojo accidentally bound to the wrong Maven phase</title>
                <link>https://issues.apache.org/jira/browse/SLING-7987</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Actually, &lt;tt&gt;AnalyseFeaturesMojo&lt;/tt&gt; is bound to the &lt;tt&gt;defaultPhase = LifecyclePhase.VERIFY&lt;/tt&gt;, but it should be &lt;tt&gt;defaultPhase = LifecyclePhase.VALIDATE&lt;/tt&gt; since the &lt;tt&gt;analyse-features&lt;/tt&gt; has been designed in order to be run before any other &lt;tt&gt;slingfeature-maven-plugin&lt;/tt&gt; goal.&lt;/p&gt;

&lt;p&gt;PR is coming&lt;/p&gt;</description>
                <environment></environment>
        <key id="13190084">SLING-7987</key>
            <summary>AnalyseFeaturesMojo accidentally bound to the wrong Maven phase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="simone.tripodi">Simone Tripodi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Oct 2018 13:21:12 +0000</created>
                <updated>Mon, 8 Oct 2018 13:39:54 +0000</updated>
                            <resolved>Mon, 8 Oct 2018 13:35:34 +0000</resolved>
                                                                    <component>Feature Model</component>
                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16641821" author="githubbot" created="Mon, 8 Oct 2018 13:22:43 +0000"  >&lt;p&gt;simonetripodi opened a new pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7987&quot; title=&quot;AnalyseFeaturesMojo accidentally bound to the wrong Maven phase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7987&quot;&gt;&lt;del&gt;SLING-7987&lt;/del&gt;&lt;/a&gt; - AnalyseFeaturesMojo accidentally bound to the wrong Maven phase&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;   from LifecyclePhase.VERIFY to LifecyclePhase.VALIDATE&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641841" author="githubbot" created="Mon, 8 Oct 2018 13:34:21 +0000"  >&lt;p&gt;bosschaert closed pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7987&quot; title=&quot;AnalyseFeaturesMojo accidentally bound to the wrong Maven phase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7987&quot;&gt;&lt;del&gt;SLING-7987&lt;/del&gt;&lt;/a&gt; - AnalyseFeaturesMojo accidentally bound to the wrong Maven phase&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641843" author="githubbot" created="Mon, 8 Oct 2018 13:34:37 +0000"  >&lt;p&gt;bosschaert commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7987&quot; title=&quot;AnalyseFeaturesMojo accidentally bound to the wrong Maven phase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7987&quot;&gt;&lt;del&gt;SLING-7987&lt;/del&gt;&lt;/a&gt; - AnalyseFeaturesMojo accidentally bound to the wrong Maven phase&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/pull/3#issuecomment-427835021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/pull/3#issuecomment-427835021&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for your pull request, @simonetripodi - it&apos;s merged!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16641852" author="githubbot" created="Mon, 8 Oct 2018 13:39:54 +0000"  >&lt;p&gt;simonetripodi commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7987&quot; title=&quot;AnalyseFeaturesMojo accidentally bound to the wrong Maven phase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7987&quot;&gt;&lt;del&gt;SLING-7987&lt;/del&gt;&lt;/a&gt; - AnalyseFeaturesMojo accidentally bound to the wrong Maven phase&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/pull/3#issuecomment-427837008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/pull/3#issuecomment-427837008&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   thanks a lot @bosschaert for taking care of it, very appreciated! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yxyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7985] ProjectHelper#getConfigValue() puts null values to the resulting Set&lt;String&gt; values</title>
                <link>https://issues.apache.org/jira/browse/SLING-7985</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Looks like &lt;tt&gt;null&lt;/tt&gt; values can be erroneously added in the &lt;tt&gt;Set&amp;lt;String&amp;gt;&lt;/tt&gt; values and that are preferred to the default value.&lt;/p&gt;

&lt;p&gt;A safer way is adding more safe guards, i.e.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;            if ( pluginNode != null
                    &amp;amp;&amp;amp; pluginNode.getValue() != null
                    &amp;amp;&amp;amp; !pluginNode.getValue().isEmpty() ) {
                values.add(pluginNode.getValue());
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;PR is coming&lt;/p&gt;</description>
                <environment></environment>
        <key id="13189675">SLING-7985</key>
            <summary>ProjectHelper#getConfigValue() puts null values to the resulting Set&lt;String&gt; values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="simone.tripodi">Simone Tripodi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Oct 2018 10:00:18 +0000</created>
                <updated>Sat, 6 Oct 2018 10:43:21 +0000</updated>
                            <resolved>Sat, 6 Oct 2018 10:15:52 +0000</resolved>
                                                                    <component>Feature Model</component>
                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16639595" author="githubbot" created="Fri, 5 Oct 2018 10:02:13 +0000"  >&lt;p&gt;simonetripodi opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7985&quot; title=&quot;ProjectHelper#getConfigValue() puts null values to the resulting Set&amp;lt;String&amp;gt; values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7985&quot;&gt;&lt;del&gt;SLING-7985&lt;/del&gt;&lt;/a&gt; - ProjectHelper#getConfigValue() puts null values to the resulting Set&amp;lt;String&amp;gt; values&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/pull/2&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   proposed fix&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640663" author="githubbot" created="Sat, 6 Oct 2018 10:15:06 +0000"  >&lt;p&gt;bosschaert closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7985&quot; title=&quot;ProjectHelper#getConfigValue() puts null values to the resulting Set&amp;lt;String&amp;gt; values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7985&quot;&gt;&lt;del&gt;SLING-7985&lt;/del&gt;&lt;/a&gt; - ProjectHelper#getConfigValue() puts null values to the resulting Set&amp;lt;String&amp;gt; values&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-slingfeature-maven-plugin/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingfeature-maven-plugin/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640664" author="bosschaert" created="Sat, 6 Oct 2018 10:15:52 +0000"  >&lt;p&gt;Thanks for your pull request &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=simone.tripodi&quot; class=&quot;user-hover&quot; rel=&quot;simone.tripodi&quot;&gt;simone.tripodi&lt;/a&gt;, it&apos;s merged!&lt;/p&gt;</comment>
                            <comment id="16640677" author="simone.tripodi" created="Sat, 6 Oct 2018 10:43:21 +0000"  >&lt;p&gt;Awersome &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;, thanks! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yvg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7979] Breadcrumb is wrong on https://sling.apache.org/documentation/development/sling-mock.html</title>
                <link>https://issues.apache.org/jira/browse/SLING-7979</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The breadcrumb generation seems broken for certain edge cases. The bread crumb at &lt;a href=&quot;https://sling.apache.org/documentation/development/sling-mock.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/sling-mock.html&lt;/a&gt; lists &quot;Maven Sling Plugin&quot; (sling) as the direct parent although &quot;Development&quot; would be correct in this case. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13189466">SLING-7979</key>
            <summary>Breadcrumb is wrong on https://sling.apache.org/documentation/development/sling-mock.html</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Oct 2018 15:57:58 +0000</created>
                <updated>Thu, 4 Oct 2018 17:12:20 +0000</updated>
                            <resolved>Thu, 4 Oct 2018 17:12:20 +0000</resolved>
                                                                    <component>Site</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16638431" author="kwin" created="Thu, 4 Oct 2018 15:58:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; Do you have an idea what could be the issue? I guess some JBake templates need some fixing here. Most probably it is &lt;a href=&quot;https://github.com/apache/sling-site/blob/2986f8d9f1569f30c9c417859aae07344660972d/src/main/jbake/templates/includes/U.groovy#L42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/blob/2986f8d9f1569f30c9c417859aae07344660972d/src/main/jbake/templates/includes/U.groovy#L42&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16638555" author="bdelacretaz" created="Thu, 4 Oct 2018 17:12:07 +0000"  >&lt;p&gt;Ugly bug indeed (in that ugly code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, a few other pages were also affected.&lt;/p&gt;

&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-site/commit/21ade42727b4cfb748f62b5e41991e41016ff1a8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/commit/21ade42727b4cfb748f62b5e41991e41016ff1a8&lt;/a&gt; , corresponding live content changes at &lt;a href=&quot;https://github.com/apache/sling-site/commit/4f60628d4a1de6747051aaddfdd034c46daae5ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/commit/4f60628d4a1de6747051aaddfdd034c46daae5ec&lt;/a&gt; &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yu5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7974] CMS - Core - Can&apos;t Send Email</title>
                <link>https://issues.apache.org/jira/browse/SLING-7974</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Previously I was able to use Commons Email to send emails via Apache Sling, but after updating to new JRE support, I&apos;m running into the following exception when attempting to send emails:&lt;br/&gt;
org.apache.commons.mail.EmailException:&#160;Sending&#160;the&#160;email&#160;to&#160;the&#160;following&#160;server&#160;failed&#160;:&#160;&lt;a href=&quot;http://smtp.sendgrid.net:2525/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;smtp.sendgrid.net:2525&lt;/a&gt; at&#160;org.apache.commons.mail.Email.sendMimeMessage(Email.java:1469)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.commons.email:1.5.0&amp;#93;&lt;/span&gt; at&#160;org.apache.commons.mail.Email.send(Email.java:1496)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.commons.email:1.5.0&amp;#93;&lt;/span&gt; at&#160;org.adobecommunity.site.impl.jobs.EmailQueueConsumer.process(EmailQueueConsumer.java:113)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.adobecommunity.site:1.0.0.SNAPSHOT&amp;#93;&lt;/span&gt; at&#160;org.apache.sling.event.impl.jobs.JobConsumerManager$JobConsumerWrapper.process(JobConsumerManager.java:502)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.event:4.2.12&amp;#93;&lt;/span&gt; at&#160;org.apache.sling.event.impl.jobs.queues.JobQueueImpl.startJob(JobQueueImpl.java:293)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.event:4.2.12&amp;#93;&lt;/span&gt; at&#160;org.apache.sling.event.impl.jobs.queues.JobQueueImpl.access$100(JobQueueImpl.java:60)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.event:4.2.12&amp;#93;&lt;/span&gt; at&#160;org.apache.sling.event.impl.jobs.queues.JobQueueImpl$1.run(JobQueueImpl.java:229)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.event:4.2.12&amp;#93;&lt;/span&gt; at&#160;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at&#160;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at&#160;java.lang.Thread.run(Thread.java:748) Caused&#160;by:&#160;javax.mail.MessagingException:&#160;IOException&#160;while&#160;sending&#160;message at&#160;com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1167)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;javax.mail:1.5.0.b01&amp;#93;&lt;/span&gt; at&#160;javax.mail.Transport.send0(Transport.java:254)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;javax.mail:1.5.0.b01&amp;#93;&lt;/span&gt; at&#160;javax.mail.Transport.send(Transport.java:124)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;javax.mail:1.5.0.b01&amp;#93;&lt;/span&gt; at&#160;org.apache.commons.mail.Email.sendMimeMessage(Email.java:1459)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.commons.email:1.5.0&amp;#93;&lt;/span&gt; ...&#160;9&#160;common&#160;frames&#160;omitted Caused&#160;by:&#160;javax.activation.UnsupportedDataTypeException:&#160;text/plain;&#160;charset=us-ascii at&#160;javax.activation.DataHandler.writeTo(DataHandler.java:78)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.geronimo.specs.geronimo-activation_1.1_spec:1.1.0&amp;#93;&lt;/span&gt; at&#160;javax.mail.internet.MimeBodyPart.writeTo(MimeBodyPart.java:1574)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;javax.mail:1.5.0.b01&amp;#93;&lt;/span&gt; at&#160;javax.mail.internet.MimeMessage.writeTo(MimeMessage.java:1840)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;javax.mail:1.5.0.b01&amp;#93;&lt;/span&gt; at&#160;com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1119)&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;javax.mail:1.5.0.b01&amp;#93;&lt;/span&gt; ...&#160;12&#160;common&#160;frames&#160;omitted&lt;br/&gt;
&#160;&lt;br/&gt;
This is due to&#160;including the Geronimo Specs Activation as indicated by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13188984">SLING-7974</key>
            <summary>CMS - Core - Can&apos;t Send Email</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Oct 2018 21:36:15 +0000</created>
                <updated>Fri, 9 Nov 2018 14:48:12 +0000</updated>
                            <resolved>Tue, 2 Oct 2018 21:36:31 +0000</resolved>
                                    <version>App CMS 0.10.0</version>
                                    <fixVersion>App CMS 0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16636150" author="klcodanr" created="Tue, 2 Oct 2018 21:36:31 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/4b689c9c382827802509f04bb5117d1e6d497c8f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/4b689c9c382827802509f04bb5117d1e6d497c8f&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yr73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7972] CMS - UI - Template Edit / Move / Delete Title Missing</title>
                <link>https://issues.apache.org/jira/browse/SLING-7972</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When editing / moving or deleting a template, the modal title is blank.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13188909">SLING-7972</key>
            <summary>CMS - UI - Template Edit / Move / Delete Title Missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Oct 2018 17:00:04 +0000</created>
                <updated>Fri, 9 Nov 2018 14:51:23 +0000</updated>
                            <resolved>Tue, 2 Oct 2018 20:27:53 +0000</resolved>
                                    <version>App CMS 0.10.0</version>
                                    <fixVersion>App CMS 0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16636078" author="klcodanr" created="Tue, 2 Oct 2018 20:27:53 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/c0b341bff51253cfb59ed2e8902c0cbce13f98ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/c0b341bff51253cfb59ed2e8902c0cbce13f98ca&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yqqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7971] CMS - UI - Whole Dialog Add Template Draggable </title>
                <link>https://issues.apache.org/jira/browse/SLING-7971</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The whole Add Template dialog is draggable, including fields, etc. This is different than other dialogs where only the header is draggable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13188899">SLING-7971</key>
            <summary>CMS - UI - Whole Dialog Add Template Draggable </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Oct 2018 16:22:26 +0000</created>
                <updated>Fri, 9 Nov 2018 14:50:58 +0000</updated>
                            <resolved>Tue, 2 Oct 2018 20:28:01 +0000</resolved>
                                    <version>App CMS 0.10.0</version>
                                    <fixVersion>App CMS 0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16636076" author="klcodanr" created="Tue, 2 Oct 2018 20:27:42 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/c0b341bff51253cfb59ed2e8902c0cbce13f98ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/c0b341bff51253cfb59ed2e8902c0cbce13f98ca&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yqof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7969] Memory leak in DiscoveryLiteDescriptor</title>
                <link>https://issues.apache.org/jira/browse/SLING-7969</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As identified in &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt;&apos;s adaptTo &lt;a href=&quot;https://adapt.to/2018/en/schedule/sling-memory-deep-dive.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;presentation&lt;/a&gt;, it seems that Sling Discovery on Oak is consuming 42MB of RAM on a standard instance.&lt;/p&gt;

&lt;p&gt;Sling discovery deals with transient states (the views, leases, etc.) and is not caching significant amount of data. The 42MB figure for the discovery feature seems like a symptom of a memory leak.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; shared in his presentation that the 42MB worth of RAM was mainly consumed by a Json Factory reference. There is one static JsonReaderFactory in the discovery commons module, in the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-discovery-commons/blob/master/src/main/java/org/apache/sling/discovery/commons/providers/spi/base/DiscoveryLiteDescriptor.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DiscoveryLiteDescriptor&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Looking at the code, it seems that each invocation of the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-discovery-commons/blob/master/src/main/java/org/apache/sling/discovery/commons/providers/spi/base/DiscoveryLiteDescriptor.java#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;getDescriptorFrom&lt;/a&gt; method creates a JSON reader but never close it. This may may leave resources behind as hinted by the description of the &lt;a href=&quot;https://docs.oracle.com/javaee/7/api/javax/json/JsonReader.html#close--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;close&lt;/a&gt; method in the API. AFAIK, the&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-discovery-commons/blob/master/src/main/java/org/apache/sling/discovery/commons/providers/spi/base/DiscoveryLiteDescriptor.java#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;getDescriptorFrom&lt;/a&gt;&#160;is invoked periodically on a relatively high frequency (&amp;lt;&#160;seconds)&#160;which&#160;may be the trigger for the leak on all instances.&lt;/p&gt;

&lt;p&gt;This is only a supposition for now, it should be investigated further, simply by running&#160;a patched version of &lt;tt&gt;org.apache.sling.discovery.commons&lt;/tt&gt; that&#160;make sure&#160;each JSON reader is properly closed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13188772">SLING-7969</key>
            <summary>Memory leak in DiscoveryLiteDescriptor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                            <label>discovery</label>
                    </labels>
                <created>Tue, 2 Oct 2018 08:03:06 +0000</created>
                <updated>Mon, 14 Mar 2022 15:29:01 +0000</updated>
                            <resolved>Wed, 9 Mar 2022 10:06:59 +0000</resolved>
                                    <version>Discovery Commons 1.0.20</version>
                                    <fixVersion>Discovery Commons 1.0.26</fixVersion>
                                    <component>Discovery</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16635133" author="marett" created="Tue, 2 Oct 2018 08:14:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/tmaret/sling-org-apache-sling-discovery-commons/commit/edba8e9d8a5ec21f6a95945440e9c9825f00e666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmaret/sling-org-apache-sling-discovery-commons/commit/edba8e9d8a5ec21f6a95945440e9c9825f00e666&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16635134" author="marett" created="Tue, 2 Oct 2018 08:15:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt; could you give it a shot in your test infrastructure ?&lt;/p&gt;</comment>
                            <comment id="16635308" author="volteanu" created="Tue, 2 Oct 2018 11:16:03 +0000"  >&lt;p&gt;I&apos;ve checked again on a fresh instance and the Json Factory has a buffer of exactly 21103224 bytes. This happens both with and without the patch. Probably, over time, the buffer get doubled in size and doesn&apos;t shrink back.&lt;/p&gt;

&lt;p&gt;Looking over on the internet, I&apos;ve stumbled upon &lt;a href=&quot;http://tomee-openejb.979440.n4.nabble.com/JsonParserFactoryImpl-holds-20mb-heap-memory-when-used-as-jaxrs-client-in-tomee-td4678031.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this discussion&lt;/a&gt;, where johnzon maintainers state that is by design. So I&apos;m not sure how much can be done in this case.&lt;/p&gt;</comment>
                            <comment id="16749911" author="marett" created="Wed, 23 Jan 2019 12:33:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt;! Indeed, it seems the Johzon library is taking a bold approach to memory management. This may have changed with &lt;a href=&quot;https://issues.apache.org/jira/browse/JOHNZON-125&quot; title=&quot;Support any buffer size and avoid memory issues with small allocations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JOHNZON-125&quot;&gt;&lt;del&gt;JOHNZON-125&lt;/del&gt;&lt;/a&gt;. I&apos;ll provide a patch to leverage and test it.&lt;/p&gt;

&lt;p&gt;Other than that, maybe we can entirely avoid the JsonReaderFactory which seems to come from &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-discovery-commons/commit/709c0c23ec5721f33d792082b737cd2809c7c9b0#diff-7f4a97d3aa096f752d678f3f90c374d3R45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;that change&lt;/a&gt; supposedly to parse commented JSON. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; do we expect commented JSON in the &lt;tt&gt;DiscoveryLiteDescriptor&lt;/tt&gt; ?&lt;/p&gt;

</comment>
                            <comment id="16749940" author="marett" created="Wed, 23 Jan 2019 13:06:40 +0000"  >&lt;p&gt;Looking at the Johnzon code base, it seems that the support for auto adjusting buffer has been added and enabled by default as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/JOHNZON-125&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JOHNZON-125&lt;/a&gt; in the commit &lt;a href=&quot;https://github.com/apache/johnzon/commit/d5ba838e476ae59aae883f9f582dad2e70d6a346#diff-72ad12815bbfcf2af29bf57c8e965ae2R67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d5ba838e&lt;/a&gt; and the default buffer has been adjusted to 256KB (from 10MB) as part of&#160;in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/JOHNZON-134&quot; title=&quot;performance regression due to releaseFallBackCopyBufferLength&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JOHNZON-134&quot;&gt;&lt;del&gt;JOHNZON-134&lt;/del&gt;&lt;/a&gt;&#160;in the commit &lt;a href=&quot;https://github.com/apache/johnzon/commit/d7a4a2f9de8c39b84fbb8b73b13c6f7f6514a9cf#diff-72ad12815bbfcf2af29bf57c8e965ae2R67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d7a4a2f9&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Both fixes should be contained in &lt;a href=&quot;https://search.maven.org/artifact/org.apache.johnzon/johnzon-core/1.1.4/bundle&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;johnzon-core/1.1.4&lt;/a&gt; onward.&lt;/p&gt;</comment>
                            <comment id="16749961" author="marett" created="Wed, 23 Jan 2019 13:19:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/tmaret/sling-org-apache-sling-commons-johnzon/tree/SLING-7969&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Wrapped&lt;/a&gt; the latest released Johnzon core version (1.1.11).&lt;/p&gt;</comment>
                            <comment id="16749971" author="marett" created="Wed, 23 Jan 2019 13:28:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volteanu&quot; class=&quot;user-hover&quot; rel=&quot;volteanu&quot;&gt;volteanu&lt;/a&gt;&#160;the two bundles attached to this&#160;issue&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12955970/12955970_org.apache.sling.commons.johnzon-1.1.11-SLING-7969.jar&quot; title=&quot;org.apache.sling.commons.johnzon-1.1.11-SLING-7969.jar attached to SLING-7969&quot;&gt;org.apache.sling.commons.johnzon-1.1.11-SLING-7969.jar&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12955971/12955971_org.apache.sling.discovery.commons-1.0.23-SLING-7969.jar&quot; title=&quot;org.apache.sling.discovery.commons-1.0.23-SLING-7969.jar attached to SLING-7969&quot;&gt;org.apache.sling.discovery.commons-1.0.23-SLING-7969.jar&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;contains the &lt;a href=&quot;https://github.com/tmaret/sling-org-apache-sling-discovery-commons/commit/edba8e9d8a5ec21f6a95945440e9c9825f00e666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fix&lt;/a&gt; for unclosed &lt;tt&gt;JsonReader&lt;/tt&gt;&#160;as well as the memory johzon memory improvements (should be enabled by default). If you still have your test environment, would it be possible to test with those two bundles ?&lt;/p&gt;</comment>
                            <comment id="16749987" author="volteanu" created="Wed, 23 Jan 2019 13:39:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, that&apos;s so nice for you to follow up on this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; and glad to see things moved on on JOHNZON side. &lt;/p&gt;

&lt;p&gt;Unfortunately I don&apos;t have the test environment anymore and re-creating would be too much effort. I think it&apos;s fine to close this issue and follow-up on it if there&apos;s another holistic memory analysis done on sling.&lt;/p&gt;</comment>
                            <comment id="16750894" author="egli" created="Thu, 24 Jan 2019 09:11:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;do we expect commented JSON in the &lt;tt&gt;DiscoveryLiteDescriptor&lt;/tt&gt; ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No we don&apos;t. That JSON comes from oak (from &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/trunk/oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterView.java#L181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; for DocumentNodeStore and &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/trunk/oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentDiscoveryLiteDescriptors.java#L91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; for SegmentNodeStore) - both don&apos;t include comments and I don&apos;t see a reason why they should in the future&lt;/p&gt;</comment>
                            <comment id="17502181" author="sagarmiglani" created="Mon, 7 Mar 2022 10:18:03 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I checked the memory dumps of few AEM instances, and here are the findings:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1)&lt;/b&gt; In an instance having johnzon lib version &amp;lt; 1.1.4, I found that DiscoveryLiteDescriptor having retained memory size of ~40MBs, this big memory reference is stored when close method of the &lt;a href=&quot;https://github.com/apache/johnzon/blob/v1.1.0/johnzon-core/src/main/java/org/apache/johnzon/core/JsonStreamParserImpl.java#L921&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JsonStreamParserImpl&lt;/a&gt; is called. &lt;a href=&quot;https://github.com/apache/johnzon/blob/v1.1.0/johnzon-core/src/main/java/org/apache/johnzon/core/BufferStrategy.java#L241&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Close method stores&lt;/a&gt; the released buffer in a queue (which is default BufferStrategy in Johnzon) for &lt;a href=&quot;https://github.com/apache/johnzon/blob/v1.1.0/johnzon-core/src/main/java/org/apache/johnzon/core/BufferStrategy.java#L232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;future re-use&lt;/a&gt;. And because default buffer size(length) was 10MB before johnzon 1.1.4, each stored buffer will take ~20MB&lt;/p&gt;

&lt;p&gt;Also note that the close method was interally being called &lt;a href=&quot;https://github.com/apache/johnzon/blob/v1.1.0/johnzon-core/src/main/java/org/apache/johnzon/core/JsonReaderImpl.java#L65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;after reading the json&lt;/a&gt; in older versions of johnzon. So, DiscoveryLiteDescriptor whether called close or not, buffer was still getting released (stored in queue).&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13040782/13040782_Screenshot+2022-03-07+at+12.26.11+PM.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2)&lt;/b&gt; When I tried the same with johnzon lib version &amp;gt; 1.1.4 (used 1.2.8, sling-commons-johnzon is already available with this new version), I found that the memory footprint was much low. Also, In this version of johnzon close method was not being called by the JsonReader after reading, so buffer was never being released (stored in the queue) and while creating the new JsonReader, always &lt;a href=&quot;https://github.com/apache/johnzon/blob/v1.1.0/johnzon-core/src/main/java/org/apache/johnzon/core/BufferStrategy.java#L234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;new buffer was created&lt;/a&gt;. &lt;b&gt;But I believe we should close the JsonReader as you provided in this &lt;a href=&quot;https://github.com/tmaret/sling-org-apache-sling-discovery-commons/commit/edba8e9d8a5ec21f6a95945440e9c9825f00e666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt; (to clear the resources), WDYT? Can you please provide the fix in new release of Discovery Commons?&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Dump ss without the &lt;a href=&quot;https://github.com/tmaret/sling-org-apache-sling-discovery-commons/commit/edba8e9d8a5ec21f6a95945440e9c9825f00e666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;:&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13040783/13040783_Screenshot+2022-03-07+at+1.05.33+PM.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;Dump ss with the &lt;a href=&quot;https://github.com/tmaret/sling-org-apache-sling-discovery-commons/commit/edba8e9d8a5ec21f6a95945440e9c9825f00e666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13040784/13040784_Screenshot+2022-03-07+at+1.14.57+PM.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;3)&lt;/b&gt; Apart from the above, I found that an instance of older version of JsonProviderImpl was present which was causing the similar problem and I belive that should be coming from the sling-installer-core version 3.9.0 (present in my instance) which was &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/blob/org.apache.sling.installer.core-3.9.0/pom.xml#L63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;embedding&lt;/a&gt; Johnzon core. Newer version (3.11.0+) of sling-installer-core should not have this issue.&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13040786/13040786_Screenshot+2022-03-07+at+1.18.16+PM.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13040788/13040788_Screenshot+2022-03-07+at+1.18.07+PM.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17502782" author="marett" created="Tue, 8 Mar 2022 07:59:13 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarmiglani&quot; class=&quot;user-hover&quot; rel=&quot;sagarmiglani&quot;&gt;sagarmiglani&lt;/a&gt; for your analysis. I think that closing the reader makes sense. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; wdyt ? &lt;/p&gt;

&lt;p&gt;I have opened the PR &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-discovery-commons/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#5&lt;/a&gt; with the change.&lt;/p&gt;</comment>
                            <comment id="17503436" author="egli" created="Wed, 9 Mar 2022 09:33:50 +0000"  >&lt;p&gt;Indeed, thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarmiglani&quot; class=&quot;user-hover&quot; rel=&quot;sagarmiglani&quot;&gt;sagarmiglani&lt;/a&gt; for the analysis! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, the PR looks good, thx!&lt;/p&gt;</comment>
                            <comment id="17503461" author="marett" created="Wed, 9 Mar 2022 10:05:45 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; . I have merged the PR.&lt;/p&gt;</comment>
                            <comment id="17503462" author="sagarmiglani" created="Wed, 9 Mar 2022 10:07:20 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13104379">JOHNZON-134</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13078884">JOHNZON-125</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13211283">SLING-8232</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13040783" name="Screenshot 2022-03-07 at 1.05.33 PM.png" size="150740" author="sagarmiglani" created="Mon, 7 Mar 2022 10:13:44 +0000"/>
                            <attachment id="13040785" name="Screenshot 2022-03-07 at 1.14.57 PM-1.png" size="180666" author="sagarmiglani" created="Mon, 7 Mar 2022 10:14:23 +0000"/>
                            <attachment id="13040784" name="Screenshot 2022-03-07 at 1.14.57 PM.png" size="180666" author="sagarmiglani" created="Mon, 7 Mar 2022 10:13:55 +0000"/>
                            <attachment id="13040788" name="Screenshot 2022-03-07 at 1.18.07 PM.png" size="26414" author="sagarmiglani" created="Mon, 7 Mar 2022 10:16:36 +0000"/>
                            <attachment id="13040786" name="Screenshot 2022-03-07 at 1.18.16 PM.png" size="35519" author="sagarmiglani" created="Mon, 7 Mar 2022 10:15:03 +0000"/>
                            <attachment id="13040782" name="Screenshot 2022-03-07 at 12.26.11 PM.png" size="35362" author="sagarmiglani" created="Mon, 7 Mar 2022 10:13:07 +0000"/>
                            <attachment id="12955970" name="org.apache.sling.commons.johnzon-1.1.11-SLING-7969.jar" size="147142" author="marett" created="Wed, 23 Jan 2019 13:23:00 +0000"/>
                            <attachment id="12955971" name="org.apache.sling.discovery.commons-1.0.23-SLING-7969.jar" size="92934" author="marett" created="Wed, 23 Jan 2019 13:24:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ypw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7967] CMS - UI - Search Does not Update Path in Component Editor</title>
                <link>https://issues.apache.org/jira/browse/SLING-7967</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, when you edit a component and use the path finder to find a link the select button does not update the field.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13188581">SLING-7967</key>
            <summary>CMS - UI - Search Does not Update Path in Component Editor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Oct 2018 16:31:42 +0000</created>
                <updated>Fri, 9 Nov 2018 14:48:08 +0000</updated>
                            <resolved>Tue, 2 Oct 2018 21:33:27 +0000</resolved>
                                    <version>App CMS 0.10.0</version>
                                    <fixVersion>App CMS 0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16636145" author="klcodanr" created="Tue, 2 Oct 2018 21:33:27 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/2fce173c67b55ff8adf21d55012bcaec35592a66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/2fce173c67b55ff8adf21d55012bcaec35592a66&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yopr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7963] CMS - Core - Error Handler Post Handling</title>
                <link>https://issues.apache.org/jira/browse/SLING-7963</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, when a post request fails, the error Handler forward the post to the Handler page. This causes the sling post servlet to be involved. Interest, the requires should be transformed into a get request to avoid additional writes it potential unexpected changes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13188401">SLING-7963</key>
            <summary>CMS - Core - Error Handler Post Handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Sep 2018 15:28:33 +0000</created>
                <updated>Fri, 9 Nov 2018 14:48:05 +0000</updated>
                            <resolved>Thu, 4 Oct 2018 13:46:15 +0000</resolved>
                                    <version>App CMS 0.10.0</version>
                                    <fixVersion>App CMS 0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16638244" author="klcodanr" created="Thu, 4 Oct 2018 13:46:15 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/ae114f70acb54fb33023e85d7fbbb5cb5678daa9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/ae114f70acb54fb33023e85d7fbbb5cb5678daa9&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ynlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7960] Repoinit: &quot;delete user&quot; also deletes service user</title>
                <link>https://issues.apache.org/jira/browse/SLING-7960</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;My current application uses a regular user, but with some changes to the framework we need to migrate to regular service users. The service user is being added as part of the deployment.&lt;/p&gt;

&lt;p&gt;To automate this I decided to use the repoinit to remove the regular user and then deploy the service user. Which works fine, but only until the next time the repoinit is executed again. Because then the repoinit statement&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;delete user foo&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;purges the newly created serviceuser &quot;foo&quot;. Which is totally unexpected, because there is a dedicated command &quot;delete service user&quot; which is supposed to remove users. So &quot;delete user foo&quot; must only delete a regular user &quot;foo&quot; but not a service user named &quot;foo&quot;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13188110">SLING-7960</key>
            <summary>Repoinit: &quot;delete user&quot; also deletes service user</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Sep 2018 08:50:05 +0000</created>
                <updated>Sun, 21 Oct 2018 15:39:30 +0000</updated>
                                            <version>Repoinit JCR 1.1.8</version>
                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16631551" author="joerghoh" created="Fri, 28 Sep 2018 08:51:47 +0000"  >&lt;p&gt;I can reproduce this easily with a testcase (see attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12941664/12941664_SLING-7960.patch&quot; title=&quot;SLING-7960.patch attached to SLING-7960&quot;&gt;SLING-7960.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;), the output is then:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Failed tests:&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; CreateServiceUsersTest.createServiceUserAndDeleteUser:146 after deletion of the regular user, expecting Principal to exist:user_-248792245_serviceUser&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16631677" author="joerghoh" created="Fri, 28 Sep 2018 10:37:04 +0000"  >&lt;p&gt;It looks to me, that the implementation of both visitDeleteUser and visitDeleteServiceUser are identical.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/blob/master/src/main/java/org/apache/sling/jcr/repoinit/impl/UserVisitor.java#L94&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/blob/master/src/main/java/org/apache/sling/jcr/repoinit/impl/UserVisitor.java#L94&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/blob/master/src/main/java/org/apache/sling/jcr/repoinit/impl/UserVisitor.java#L60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-repoinit/blob/master/src/main/java/org/apache/sling/jcr/repoinit/impl/UserVisitor.java#L60&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There should be an additional check that deleteUser does not accidently delete a service user.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16631816" author="joerghoh" created="Fri, 28 Sep 2018 13:09:28 +0000"  >&lt;p&gt;I updated the failing testcase and provided a new patch ( &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12941684/12941684_SLING-7960-2.patch&quot; title=&quot;SLING-7960-2.patch attached to SLING-7960&quot;&gt;SLING-7960-2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; ) containing the fix plus an extended version of the testcase.&lt;/p&gt;</comment>
                            <comment id="16633795" author="bdelacretaz" created="Mon, 1 Oct 2018 10:04:49 +0000"  >&lt;p&gt;Thank you very much for your patch - this was a bug indeed, as the syntax differentiates between service users and regular users for deletions.&lt;/p&gt;

&lt;p&gt;The corrected behavior won&apos;t be fully backwards compatible, as DELETE USER previously also deleted service users but won&apos;t do that anymore. &lt;/p&gt;

&lt;p&gt;Do you see this as a problem in the field and do you have suggestions (besides release notes) on how to best avoid surprises when users switch to the fixed &lt;tt&gt;jcr.repoinit&lt;/tt&gt; module? &lt;/p&gt;

&lt;p&gt;Maybe log a WARN message if a DELETE USER statement points to a service user that would previously have been deleted?&lt;/p&gt;</comment>
                            <comment id="16633892" author="bdelacretaz" created="Mon, 1 Oct 2018 11:46:17 +0000"  >&lt;p&gt;Until this is fixed, a workaround is to implement a &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; service which runs before the repoinit one (using the appropriate OSGi service ranking) to delete the appropriate users.&lt;/p&gt;</comment>
                            <comment id="16633980" author="joerghoh" created="Mon, 1 Oct 2018 13:20:10 +0000"  >&lt;p&gt;Yes, we are changing behavior of the implementation. To point out that in some cases the delete does not work (&quot;delete user foo&quot; does not delete a service, and &quot;delete service user foo&quot; does not delete a regular user&quot;) I added INFO statements (WARN is not justified IMO) in &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12941974/12941974_SLING-7960-3.patch&quot; title=&quot;SLING-7960-3.patch attached to SLING-7960&quot;&gt;SLING-7960-3.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Regarding the &quot;avoid surprises&quot;: If we would have a language specification for repo init, we could create a dependency towards it. If we don&apos;t want to do that, we could somehow add a dependency towards the jcr.repoinit module; for examples we could use OSGI capabilities to express the implementation level.&lt;/p&gt;</comment>
                            <comment id="16634061" author="bdelacretaz" created="Mon, 1 Oct 2018 14:00:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;If we would have a language specification for repo init, we could create a dependency towards it. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good point! Although we don&apos;t have a formal specification, the releases of the repoinit components do define a language + implementation version.&lt;/p&gt;

&lt;p&gt;To stay backwards compatible I agree that repoinit scripts need to define which version of the language + implementation they expect.&lt;/p&gt;

&lt;p&gt;I have started a discussion about this on our dev list in the &quot;How to manage repoinit language + implementation evolutions?&quot; thread.&lt;/p&gt;</comment>
                            <comment id="16658268" author="joerghoh" created="Sun, 21 Oct 2018 15:39:30 +0000"  >&lt;p&gt;Bertrand suggested this:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Introduce a new DELETE REAL USER &amp;lt;u&amp;gt; command that only deletes real users.&lt;/li&gt;
	&lt;li&gt;Keep DELETE USER &amp;lt;u&amp;gt; as is, deleting both types of users. Document these commands better to avoid confusion here.&lt;/li&gt;
	&lt;li&gt;Fix DELETE SERVICE USER &amp;lt;u&amp;gt; so that it only deletes service users.&lt;/li&gt;
	&lt;li&gt;None of these commands fail if &amp;lt;u&amp;gt; is not of the expected type or does not exist, they just log INFO messages in such cases.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Let&apos;s do it as Bertrand suggested.&lt;/p&gt;

&lt;p&gt;To get this work I needed to change both the repoinit-parser and jcr-repoinit modules. Therefor I have 2 patches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12944903/12944903_SLING-7960-4-oasrp.patch&quot; title=&quot;SLING-7960-4-oasrp.patch attached to SLING-7960&quot;&gt;SLING-7960-4-oasrp.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;  for org.apache.sling.repoinit.parser and&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12944904/12944904_SLING-7960-4-oasjr.patch&quot; title=&quot;SLING-7960-4-oasjr.patch attached to SLING-7960&quot;&gt;SLING-7960-4-oasjr.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;  for org.apache.sling.jcr.repoinit&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Notable changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I needed to bump the package version of org.apache.sling.repoinit.parser.operations to 4.2.0&lt;/li&gt;
	&lt;li&gt;&quot;DELETE USER u&quot; will work as it did before, but I it will always log a warning to user either &quot;DELETE SERVICE USER&quot; or &quot;DELETE REAL USER&quot; for disambiguation.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12941684" name="SLING-7960-2.patch" size="4195" author="joerghoh" created="Fri, 28 Sep 2018 13:08:30 +0000"/>
                            <attachment id="12941974" name="SLING-7960-3.patch" size="4230" author="joerghoh" created="Mon, 1 Oct 2018 13:15:23 +0000"/>
                            <attachment id="12944904" name="SLING-7960-4-oasjr.patch" size="6548" author="joerghoh" created="Sun, 21 Oct 2018 15:30:54 +0000"/>
                            <attachment id="12944903" name="SLING-7960-4-oasrp.patch" size="5944" author="joerghoh" created="Sun, 21 Oct 2018 15:30:39 +0000"/>
                            <attachment id="12941664" name="SLING-7960.patch" size="1431" author="joerghoh" created="Fri, 28 Sep 2018 08:50:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ylu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7959] ContentParser: Complete support for (Extended) DocView</title>
                <link>https://issues.apache.org/jira/browse/SLING-7959</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following features from either standard JCR 2.0 or extended docview (&lt;a href=&quot;http://jackrabbit.apache.org/filevault/docview.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/filevault/docview.html&lt;/a&gt;) are not properly supported yet:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;root node with a name different than jcr:root (standard JCR 2.0 docview)&lt;/li&gt;
	&lt;li&gt;same-name-siblings with an element name like &lt;tt&gt;&amp;lt;nodename&amp;gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;lt;index&amp;gt;&amp;#93;&lt;/span&gt;&lt;/tt&gt; (the index should then be stripped out, as at least Sling Resource Providers in general don&apos;t have a limitation on same name siblings) (extended docview)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13187919">SLING-7959</key>
            <summary>ContentParser: Complete support for (Extended) DocView</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Sep 2018 13:46:46 +0000</created>
                <updated>Tue, 14 Sep 2021 19:15:20 +0000</updated>
                                            <version>JCR Content Parser 1.2.4</version>
                                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13253250">JCRVLT-357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12993521">SLING-5922</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yknr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7957] CMS - Reference - Fix Path of Reference App Template</title>
                <link>https://issues.apache.org/jira/browse/SLING-7957</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In Global config under base-template allowed path for Apache website is wrong. It should be &quot;/content/apache/sling-apache-org.&lt;b&gt;&quot; rather than &quot;/content/apache/apache-sling-org.&lt;/b&gt;&quot;. This causes an error when you try to create a page under apache-sling-org site.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13187891">SLING-7957</key>
            <summary>CMS - Reference - Fix Path of Reference App Template</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Sep 2018 12:28:32 +0000</created>
                <updated>Fri, 9 Nov 2018 14:50:33 +0000</updated>
                            <resolved>Thu, 27 Sep 2018 19:09:32 +0000</resolved>
                                    <version>App CMS 0.10.0</version>
                                    <fixVersion>App CMS 0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16630917" author="klcodanr" created="Thu, 27 Sep 2018 19:09:32 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/e4db1a0942020c119ee1fb27372fc7f25395d30c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/e4db1a0942020c119ee1fb27372fc7f25395d30c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ykhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7937] A post to update a nested &quot;Date&quot; property for a user or group sets the property at the wrong path</title>
                <link>https://issues.apache.org/jira/browse/SLING-7937</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When posting an update for a user or group, the handing of nested &quot;Date&quot; properties is not correct as it is setting the property at the wrong path.&#160; It is ignoring the posted property path and setting the value using the property name as the path.&#160; So post an update to &quot;nested/key1&quot; would store the value at &quot;key1&quot; instead of &quot;nested/key1&quot;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;create a test user&lt;br/&gt;
 curl -u admin -F:name=user1 -Fpwd=password -FpwdConfirm=password &lt;a href=&quot;http://localhost:8080/system/userManager/user.create.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/userManager/user.create.html&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;update a nested date property for the user&lt;br/&gt;
 curl -u user1 &quot;-Fnested/key1=2018-10-10&quot; &quot;-Fnested/key1@TypeHint=Date&quot; &lt;a href=&quot;http://localhost:8080/system/userManager/user/user1.update.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/userManager/user/user1.update.html&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;fetching the user resource json should not contain the &quot;key1&quot; value&lt;br/&gt;
 curl -u user1 &lt;a href=&quot;http://localhost:8080/system/userManager/user/user1.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/userManager/user/user1.json&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;instead it is expected that the &quot;nested/key1&quot;&#160;should be stored under the /home/users/&lt;b&gt;/&lt;/b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;rep:User&amp;#93;&lt;/span&gt;/nested folder for the user&lt;br/&gt;
 curl -u user1 &lt;a href=&quot;http://localhost:8080/user_path_from_json_from_#3_here/nested.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/user_path_from_json_from_#3_here/nested.json&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13185920">SLING-7937</key>
            <summary>A post to update a nested &quot;Date&quot; property for a user or group sets the property at the wrong path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Sep 2018 22:22:24 +0000</created>
                <updated>Tue, 4 Aug 2020 18:21:11 +0000</updated>
                            <resolved>Wed, 19 Sep 2018 01:00:01 +0000</resolved>
                                    <version>JCR Jackrabbit User Manager 2.2.8</version>
                                    <fixVersion>JCR Jackrabbit User Manager 2.2.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16619932" author="enorman" created="Wed, 19 Sep 2018 01:00:01 +0000"  >&lt;p&gt;Fixed at: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/116c63ec34cd104bea355aecadf0b3a8c7b6c312&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/116c63ec34cd104bea355aecadf0b3a8c7b6c312&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17171024" author="enorman" created="Tue, 4 Aug 2020 18:21:11 +0000"  >&lt;p&gt;Completed with the 2.2.10 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y8db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7933] Evaluate Referrer Filter also for anonymous users</title>
                <link>https://issues.apache.org/jira/browse/SLING-7933</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Referrer Filter is not evaluate for anonymous users.&lt;/p&gt;

&lt;p&gt;This is a mix of a by design/regression.&lt;/p&gt;

&lt;p&gt;Earlier the Filter were executing before authentication. This is not anymore the case, hence we need a fix for it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13185532">SLING-7933</key>
            <summary>Evaluate Referrer Filter also for anonymous users</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Sep 2018 14:10:24 +0000</created>
                <updated>Tue, 25 Sep 2018 09:49:55 +0000</updated>
                            <resolved>Tue, 18 Sep 2018 09:37:26 +0000</resolved>
                                                    <fixVersion>Security 1.1.16</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16617638" author="asanso" created="Mon, 17 Sep 2018 14:51:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; suggested a really simple fix . It is indeed enough to rely on &lt;a href=&quot;https://osgi.org/javadoc/osgi.cmpn/7.0.0/org/osgi/service/http/whiteboard/Preprocessor.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/osgi.cmpn/7.0.0/org/osgi/service/http/whiteboard/Preprocessor.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16618772" author="asanso" created="Tue, 18 Sep 2018 09:37:05 +0000"  >&lt;p&gt;fixed in 0d85834b841fa3485679f3c03583cabac8346f9d&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y5z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7931] SlingQuery - Last method doesn&apos;t work as expected</title>
                <link>https://issues.apache.org/jira/browse/SLING-7931</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Last() method of the Sling Query doesn&apos;t return the correct value in case you have filtered the resources before. I&apos;ll try to describe the problem with an example.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;[ 1 , 2 , 3 , 4 ] &#8211;&amp;gt; FILTER (&lt;span class=&quot;error&quot;&gt;&amp;#91;n=1&amp;#93;&lt;/span&gt;)&#160;= [ 1 ] &#8211;&amp;gt; LAST = [ 1 ]&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Current behavior&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;[ 1 , 2 , 3 , 4 ]&#160;&#8211;&amp;gt; FILTER (&lt;span class=&quot;error&quot;&gt;&amp;#91;n=1&amp;#93;&lt;/span&gt;) = [ 1 ]&#160;&#8211;&amp;gt; LAST =&#160;NULL&lt;/p&gt;

&lt;p&gt;I think the problem is related to last iterator that doesn&apos;t check if the next element is an empty option or a valid one.&lt;/p&gt;

&lt;p&gt;As attachment there is and an example that&#160;shows the bug.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>Java 8, AEM 6.4 SP1, Linux x64 Fedora</environment>
        <key id="13185452">SLING-7931</key>
            <summary>SlingQuery - Last method doesn&apos;t work as expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jebailey">Jason E Bailey</assignee>
                                    <reporter username="kele23">Michele Scala</reporter>
                        <labels>
                            <label>sling-query</label>
                    </labels>
                <created>Mon, 17 Sep 2018 09:35:34 +0000</created>
                <updated>Mon, 2 May 2022 12:55:28 +0000</updated>
                            <resolved>Mon, 24 Sep 2018 18:53:41 +0000</resolved>
                                    <version>Sling Query 4.0.2</version>
                                    <fixVersion>Sling Query 4.0.4</fixVersion>
                                    <component>Sling Query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16626161" author="jebailey" created="Mon, 24 Sep 2018 17:40:50 +0000"  >&lt;p&gt;Thanks for the bug report! I&apos;ll get the fix for this in it&apos;s next release.&lt;/p&gt;</comment>
                            <comment id="16626263" author="jebailey" created="Mon, 24 Sep 2018 18:53:41 +0000"  >&lt;p&gt;fixed in commit e5cc4ffc98a8aca2ea3994cafdcf16ea1c505ffd&lt;/p&gt;</comment>
                            <comment id="16627231" author="kele23" created="Tue, 25 Sep 2018 12:11:39 +0000"  >&lt;p&gt;Thanks!&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12939949" name="sling-query-test-result.jpg" size="100067" author="kele23" created="Mon, 17 Sep 2018 09:20:44 +0000"/>
                            <attachment id="12939948" name="test-sling-query.groovy" size="1240" author="kele23" created="Mon, 17 Sep 2018 09:20:44 +0000"/>
                            <attachment id="12939947" name="test-sling-query.infinity.json" size="340" author="kele23" created="Mon, 17 Sep 2018 09:20:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y5hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7927] JSON Content Loading errors out import on malformed json</title>
                <link>https://issues.apache.org/jira/browse/SLING-7927</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Current Behaviour:&lt;/p&gt;

&lt;p&gt;During the importing of json content from a bundle. If one of the files contains malformed json the load process is discontinued and exits. This stops the loading of any other, correctly formatted, data.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Expected Behaviour:&lt;/p&gt;

&lt;p&gt;If a single file contains malformed content, that specific file should discontinue, the error logged and then the process continues to import the rest of the provided content.&lt;/p&gt;

&lt;p&gt;As it is right now, it&apos;s possible to load the bundle and have the application in an unworkable state. preventing the ability to trouble shoot and investigate the root cause.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13185156">SLING-7927</key>
            <summary>JSON Content Loading errors out import on malformed json</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jebailey">Jason E Bailey</assignee>
                                    <reporter username="jebailey">Jason E Bailey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Sep 2018 14:12:59 +0000</created>
                <updated>Fri, 10 Dec 2021 09:00:51 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16891875" author="radu.cotescu" created="Wed, 24 Jul 2019 14:01:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt;, isn&apos;t this issue about the JCR Content Loader and &lt;em&gt;not&lt;/em&gt; the Parser?&lt;/p&gt;</comment>
                            <comment id="16891975" author="jebailey" created="Wed, 24 Jul 2019 16:24:06 +0000"  >&lt;p&gt;I&apos;ll review and correct, the line at times between the two are odd.&lt;/p&gt;</comment>
                            <comment id="16901326" author="jebailey" created="Tue, 6 Aug 2019 17:38:06 +0000"  >&lt;p&gt;This is definitely an issue with the Content Loader. Because this happened in AEM land. BTW the Content Loader does not use the Content Parser in the way that you would think. It embeds one or two specific files into the Content Loader bundle.&lt;/p&gt;</comment>
                            <comment id="16901344" author="enorman" created="Tue, 6 Aug 2019 18:05:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; How would you anticipate dealing with dependencies between the JSON files?&#160; If loading a JSON&#160;file fails for some reason, how can you be sure the other&#160;JSON files do not depend on something loaded by the one that failed?&lt;/p&gt;

&lt;p&gt;For example, the failing file creates some users and then the other files try to assign permissions for those users?&lt;/p&gt;

&lt;p&gt;In other words, failing fast (and stopping the loading attempt) may be the safer approach for certain scenarios and attempting to load the other files could potentially be harmful and obscure the root reason for subsequent failures.&lt;/p&gt;</comment>
                            <comment id="16902083" author="jebailey" created="Wed, 7 Aug 2019 13:57:23 +0000"  >&lt;p&gt;&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edn&quot; class=&quot;user-hover&quot; rel=&quot;edn&quot;&gt;edn&lt;/a&gt; you&apos;re absolutely right, there are situations where we want to fail and then there&apos;s situations where we want it to log and proceed. So a good solution would be to come up with a way of handling both scenarios. May a `load(content)` versus a &apos;loadQuietly(content)`&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16902340" author="enorman" created="Wed, 7 Aug 2019 17:38:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt;&#160;In your proposal, may I ask who would make the decision on how to handle errors?&#160; In other words, how it would be pre-determined whether to call `load(content)` versus a &apos;loadQuietly(content)`?&lt;/p&gt;

&lt;p&gt;Also, I am curious how these new skipped errors would impact the existing content loading &apos;retry&apos; logic.&#160; Would the quiet content loading errors trigger an attempt to re-try content loading later or would that bundle content loading be considered complete&#160;with no retries?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Alternatively, perhaps a better solution would be to create a new maven plugin to parse and validate that&#160;your JSON files are well formed?&#160; This should&#160;catch&#160;malformed content&#160;problems earlier at&#160;build time so you wouldn&apos;t have to try to debug the troubles later in the runtime?&#160; I&apos;m imagining something similar to how the syntax of htl files are validated at build time by&#160;&lt;a href=&quot;https://sling.apache.org/components/htl-maven-plugin/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/components/htl-maven-plugin/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y3nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7924] ValidationModelRetriever does not correctly evaluate &quot;applicable path&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-7924</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-validation-core/blob/4d56bb636a3b68cd1bed5d6b03f194a41e0aef75/src/main/java/org/apache/sling/validation/impl/ValidationModelRetrieverImpl.java#L114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-validation-core/blob/4d56bb636a3b68cd1bed5d6b03f194a41e0aef75/src/main/java/org/apache/sling/validation/impl/ValidationModelRetrieverImpl.java#L114&lt;/a&gt; there is a PatriciaTrie from Apache Commons Collections being used to figure out the validation model bound to a specific resource with the most specific applicable path which still matches.&lt;/p&gt;

&lt;p&gt;This does not work as the method &lt;tt&gt;PatriciaTrie.subMap&lt;/tt&gt; returns all keys which are less than the given path according to lexicographical ordering.&lt;/p&gt;

&lt;p&gt;That means, in case the trie would contain entries for &quot;/&quot;, and &quot;/a/b&quot;, a lookup for &quot;/a/c&quot; would return &quot;/a/b&quot; although the latter does not start with the former.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13184992">SLING-7924</key>
            <summary>ValidationModelRetriever does not correctly evaluate &quot;applicable path&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Sep 2018 20:00:18 +0000</created>
                <updated>Fri, 14 Sep 2018 08:40:08 +0000</updated>
                            <resolved>Fri, 14 Sep 2018 08:40:08 +0000</resolved>
                                    <version>Validation Core 1.0.4</version>
                                    <fixVersion>Validation Core 1.0.6</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16614519" author="kwin" created="Fri, 14 Sep 2018 08:40:02 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-validation-core/commit/1509a0c083a939a177e88cfccff74ef7cbebf236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-validation-core/commit/1509a0c083a939a177e88cfccff74ef7cbebf236&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y2nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7921] upgrade to parent 34</title>
                <link>https://issues.apache.org/jira/browse/SLING-7921</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Current core parent version is set to 26, moving it up implies at least&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;245 classes updates of scr annotations,&lt;/li&gt;
	&lt;li&gt;removal of org.osgi.service.cm.ConfigurationAdmin usage&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment></environment>
        <key id="13184886">SLING-7921</key>
            <summary>upgrade to parent 34</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Sep 2018 12:49:17 +0000</created>
                <updated>Thu, 13 Sep 2018 12:49:17 +0000</updated>
                                            <version>Content Distribution Core 0.3.0</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y1zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7920] IllegalStateException in Model-to-Feature converter for multiple repoinit sections</title>
                <link>https://issues.apache.org/jira/browse/SLING-7920</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Trying to convert the sling-org-apache-sling-starter I get the below exception, as due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7919&quot; title=&quot;Duplicate feature name &amp;quot;sling-event&amp;quot; in sling-org-apache-sling-starter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7919&quot;&gt;&lt;del&gt;SLING-7919&lt;/del&gt;&lt;/a&gt; the sling-event feature there contains two :repoinit sections.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.IllegalStateException
	at org.apache.sling.feature.Extension.getText(Extension.java:111)
	at org.apache.sling.feature.modelconverter.ProvisioningToFeature.buildFromFeature(ProvisioningToFeature.java:444)
	at org.apache.sling.feature.modelconverter.ProvisioningToFeature.buildFeatures(ProvisioningToFeature.java:477)
	at org.apache.sling.feature.modelconverter.ProvisioningToFeature.convert(ProvisioningToFeature.java:113)
	at org.apache.sling.feature.modelconverter.impl.Main.main(Main.java:195)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13184856">SLING-7920</key>
            <summary>IllegalStateException in Model-to-Feature converter for multiple repoinit sections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Sep 2018 10:15:49 +0000</created>
                <updated>Thu, 13 Feb 2020 09:03:12 +0000</updated>
                            <resolved>Mon, 12 Nov 2018 07:22:23 +0000</resolved>
                                                    <fixVersion>Feature Model Converter 0.8.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16613307" author="bdelacretaz" created="Thu, 13 Sep 2018 10:39:01 +0000"  >&lt;p&gt;Fixed with this commit, by accumulating multiple repoinit sections and outputting a single repoinit extension json:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-modelconverter/commit/fb225c9b480ea330c1212833a237e5b4cf00258a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-modelconverter/commit/fb225c9b480ea330c1212833a237e5b4cf00258a&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt; I think you wrote the original code, could you review my changes and tests?&lt;/p&gt;

&lt;p&gt;I&apos;m throwing the &lt;tt&gt;IllegalStateException(&quot;Repoinit sections already processed&quot;)&lt;/tt&gt; exception if the repoinit extension was already present in the feature model, as I don&apos;t have a use case to test that branch. It wasn&apos;t tested before my changes either, and caused the &lt;tt&gt;IllegalStateException&lt;/tt&gt;. In this way that untested use case will fail loudly if we encounter it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13184852">SLING-7919</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y1tb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7919] Duplicate feature name &quot;sling-event&quot; in sling-org-apache-sling-starter</title>
                <link>https://issues.apache.org/jira/browse/SLING-7919</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The sling-discovery feature is named &quot;sling-event&quot; in the txt file:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ grep &lt;span class=&quot;code-quote&quot;&gt;&quot;feature &quot;&lt;/span&gt; src/main/provisioning/*.txt | grep event
src/main/provisioning/sling-discovery.txt:[feature name=sling-event]
src/main/provisioning/sling-event.txt:[feature name=sling-event]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13184852">SLING-7919</key>
            <summary>Duplicate feature name &quot;sling-event&quot; in sling-org-apache-sling-starter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Sep 2018 10:06:27 +0000</created>
                <updated>Tue, 23 Oct 2018 09:18:28 +0000</updated>
                            <resolved>Thu, 13 Sep 2018 10:43:39 +0000</resolved>
                                                    <fixVersion>Starter 11</fixVersion>
                                    <component>Starter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16613311" author="bdelacretaz" created="Thu, 13 Sep 2018 10:43:39 +0000"  >&lt;p&gt;Fixed by commit 22a7f13. Shouldn&apos;t impact anything, but the duplicate name exposed &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7920&quot; title=&quot;IllegalStateException in Model-to-Feature converter for multiple repoinit sections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7920&quot;&gt;&lt;del&gt;SLING-7920&lt;/del&gt;&lt;/a&gt; when converting to the Feature Model.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13184856">SLING-7920</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y1sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7917] jcrinstall-bundle-archetype shoud use the specific Simple WebDAV servlet entry point for deployment</title>
                <link>https://issues.apache.org/jira/browse/SLING-7917</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7916&quot; title=&quot;Update documentation for WebDAV bundle deployment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7916&quot;&gt;&lt;del&gt;SLING-7916&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13184639">SLING-7917</key>
            <summary>jcrinstall-bundle-archetype shoud use the specific Simple WebDAV servlet entry point for deployment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Sep 2018 14:43:35 +0000</created>
                <updated>Wed, 12 Sep 2018 14:48:22 +0000</updated>
                            <resolved>Wed, 12 Sep 2018 14:48:22 +0000</resolved>
                                                    <fixVersion>JCRInstall Bundle Archetype 1.0.8</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13184331">SLING-7912</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13184598">SLING-7916</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y0hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7913] Ban snapshots in the Sling starter</title>
                <link>https://issues.apache.org/jira/browse/SLING-7913</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We have agreed to keep only releases in the Sling starter to make it easier to release and to make builds reproducible.&lt;/p&gt;

&lt;p&gt;We should enforce this policy to make it impossible to mistakenly add SNAPSHOT versions to the project.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13184359">SLING-7913</key>
            <summary>Ban snapshots in the Sling starter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Sep 2018 14:07:17 +0000</created>
                <updated>Thu, 19 Dec 2024 08:22:39 +0000</updated>
                                                            <fixVersion>Starter 14</fixVersion>
                                    <component>Starter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16610775" author="enorman" created="Tue, 11 Sep 2018 15:10:53 +0000"  >&lt;p&gt;Is this realistic or even a good idea?&#160; How will integration testing of unreleased snapshots be done if they can&apos;t be added to the starter until they are released?&lt;/p&gt;

&lt;p&gt;I would argue that the snapshot (trunk) version of the starter should have more&#160;snapshot artifacts in it, not less.&#160; It would be better to include snapshots of all artifacts that have deviated from the last released version to catch integration bugs early.&lt;/p&gt;

&lt;p&gt;Then when you are preparing a release you can rollback to include only the released artifacts if the snapshots are not ready to go.&lt;/p&gt;</comment>
                            <comment id="16610800" author="rombert" created="Tue, 11 Sep 2018 15:31:21 +0000"  >&lt;p&gt;The &quot;ban&quot; would be enforced at build-time only. Integration testing would be possible either by deploying the artifact using the OSGi console/JCR installer or by skipping the enforcer plug-in configuration.&lt;/p&gt;

&lt;p&gt;We previously had SNAPSHOT versions in the starter and it was (IMO) a pain:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;builds were not reproducible&lt;/li&gt;
	&lt;li&gt;Starter releases were hard since we had to either roll-back (and miss out on bugfixes) or release (which took a long time for dozens of modules)&lt;/li&gt;
	&lt;li&gt;releases themselves were hard to manage in the starter
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;initially we had version X.Y.Z-SNAPSHOT in the starter&lt;/li&gt;
		&lt;li&gt;for the release, we moved to X.Y.(Z+2)-SNAPSHOT since the older SNAPSHOT was deleted by Nexus&lt;/li&gt;
		&lt;li&gt;after the release we moved to the released X.Y.Z+1&lt;/li&gt;
		&lt;li&gt;for the first change we moved to X.Y.(Z+2)-SNAPSHOT&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;My answer to testing problems would be to make it easier to test the starter with a certain SNAPSHOT and also to automatically run it for pull requests.&lt;/p&gt;</comment>
                            <comment id="16610835" author="enorman" created="Tue, 11 Sep 2018 15:59:26 +0000"  >&lt;p&gt;Hmm...&#160; I&apos;m still not convinced.&#160; Do you mean enforced at release-time only?&#160; A ban at build time doesn&apos;t really work unless a lot more work is done everywhere that the starter is referenced whenever you want to do integration testing of a snapshot.&lt;/p&gt;

&lt;p&gt;For example, I believe the starter snapshot is used for launchpad-testing and other places:&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-testing/blob/0b750515f80db769976231bf0da05ab4f92f3342/src/main/provisioning/model.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-testing/blob/0b750515f80db769976231bf0da05ab4f92f3342/src/main/provisioning/model.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Aren&apos;t we just trading one problem for another for the convenience of the person doing the release?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16610851" author="rombert" created="Tue, 11 Sep 2018 16:07:37 +0000"  >&lt;p&gt;Sorry, the title might&apos;ve been misleading. I don&apos;t want to ban snapshot references &lt;em&gt;to&lt;/em&gt; the starter application. It&apos;s references to snapshot &lt;em&gt;within&lt;/em&gt; the starter that I&apos;m after.&lt;/p&gt;

&lt;p&gt;For instance we currently have in the sling starter&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;src/main/provisioning/sling.txt:&#160;&#160;&#160; org.apache.sling/org.apache.sling.sample.slingshot/0.8.1-SNAPSHOT/slingfeature/slingfeature
src/main/provisioning/sling.txt:&#160;&#160;&#160; org.apache.sling/org.apache.sling.jcr.jackrabbit.usermanager/2.2.7-SNAPSHOT
src/main/provisioning/sling.txt:&#160;&#160;&#160; org.apache.sling/org.apache.sling.jcr.jackrabbit.accessmanager/3.0.1-SNAPSHOT
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
These I would like to avoid in the future and stick with releases only.&lt;/p&gt;

&lt;p&gt;See also &lt;a href=&quot;https://lists.apache.org/thread.html/bc3c8d9450a715e6d8a04e7d237278384eab37bcca5b5630820394f9@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/bc3c8d9450a715e6d8a04e7d237278384eab37bcca5b5630820394f9@%3Cdev.sling.apache.org%3E&lt;/a&gt; where we briefly discussed this.&lt;/p&gt;</comment>
                            <comment id="16610893" author="enorman" created="Tue, 11 Sep 2018 16:28:00 +0000"  >&lt;p&gt;I wasn&apos;t confused about that.&#160; I&apos;m saying that in order to integration test those various SNAPSHOT artifacts, you have to get them into the launchpad-testing sling runtime so the tests can run against those unreleased artifacts.&lt;/p&gt;

&lt;p&gt;If I am not mistaken, this is currently done for launchpad-testing (and others) by&#160;pulling in the artifacts from the starter-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;So in that case, if I can&apos;t use a SNAPSHOT in the starter models, then I also can&apos;t add new tests in launchpad-testing or change existing tests in launchpad-testing without a lot of extra work to pull in the SNAPSHOT artifacts that the new tests would be covering.&lt;/p&gt;

&lt;p&gt;It seems simpler to me to just use SNAPSHOTS in the starter model so I only have to change things in one place.&#160; If there are problems with any of the SNAPSHOT artifacts, then the automated tests should detect those problems early and the person responsible should be ready to address those problems or revert their changes.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16611753" author="rombert" created="Wed, 12 Sep 2018 08:30:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;I wasn&apos;t confused about that.  I&apos;m saying that in order to integration test those various SNAPSHOT artifacts, you have to get them into the launchpad-testing sling runtime so the tests can run against those unreleased artifacts.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If I am not mistaken, this is currently done for launchpad-testing (and others) by pulling in the artifacts from the starter-SNAPSHOT.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, with the note that we currently test (almost exclusively) released artifacts with the starter.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So in that case, if I can&apos;t use a SNAPSHOT in the starter models, then I also can&apos;t add new tests in launchpad-testing or change existing tests in launchpad-testing without a lot of extra work to pull in the SNAPSHOT artifacts that the new tests would be covering.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;New tests and new artifacts would come with a new release.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It seems simpler to me to just use SNAPSHOTS in the starter model so I only have to change things in one place.  If there are problems with any of the SNAPSHOT artifacts, then the automated tests should detect those problems early and the person responsible should be ready to address those problems or revert their changes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problems are the ones that I outlined at &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7913?focusedCommentId=16610800&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16610800&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7913?focusedCommentId=16610800&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16610800&lt;/a&gt; , and some time ago we decided to no longer use SNAPSHOT versions . I don&apos;t say that the system is perfect &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; but IMO it&apos;s better than what we had before. I am just trying to &apos;formalize&apos; from a tooling POV what we agreed on.&lt;/p&gt;

&lt;p&gt;I am of course happy for us to revisit the decision, but let&apos;s please do so on the Sling dev mailing list, I don&apos;t think this Jira issue is getting much attention beyond the two of us.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xyrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7902] The http.conn.timeout property on ForwardDistributionAgentFactory does not pick user entered values.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7902</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As part of one of the projects we were trying to use Sling Content Distribution. Whenever our package size grew to a number which took more than 10 seconds to process our distribution queue on the Author instance would go into a blocked state and was irrecoverable from. We had to manually clean the queue in order to proceed.&lt;/p&gt;

&lt;p&gt;While trying to troubleshoot the issue we tried to increase the http.conn.timeout but this did not take hold. While trying to debug the issue further we came across the file ForwardDistributionAgentFactory and found that this parameter was not being read from the configs and hence getting hard coded to a default value of 10 seconds.&#160;&lt;/p&gt;

&lt;p&gt;On further investigation we found its the same case with the Reverse/Sync Distribution Agent Factory classes too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13184018">SLING-7902</key>
            <summary>The http.conn.timeout property on ForwardDistributionAgentFactory does not pick user entered values.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="adityasharma0001@gmail.com">Adityasharma</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Sep 2018 11:43:54 +0000</created>
                <updated>Fri, 21 Sep 2018 07:49:46 +0000</updated>
                            <resolved>Thu, 13 Sep 2018 14:25:08 +0000</resolved>
                                    <version>Content Distribution Core 0.2.10</version>
                                    <fixVersion>Content Distribution Core 0.3.4</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                <comments>
                            <comment id="16609059" author="adityasharma0001@gmail.com" created="Mon, 10 Sep 2018 11:53:18 +0000"  >&lt;p&gt;A PR for the same has been raised here(&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/10&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xwqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7901] Update User/Group delete nested property does not work</title>
                <link>https://issues.apache.org/jira/browse/SLING-7901</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The POST request to update a user or group is failing to remove nested properties when requested.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;curl -u admin -Fnested1/property1@Delete=true &lt;a href=&quot;http://localhost:8080/system/userManager/user/testuser1.update.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/userManager/user/testuser1.update.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183862">SLING-7901</key>
            <summary>Update User/Group delete nested property does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Sep 2018 22:38:41 +0000</created>
                <updated>Fri, 20 Sep 2019 11:34:42 +0000</updated>
                            <resolved>Sat, 8 Sep 2018 22:44:58 +0000</resolved>
                                    <version>JCR Jackrabbit User Manager 2.2.6</version>
                                    <fixVersion>JCR Jackrabbit User Manager 2.2.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16608228" author="enorman" created="Sat, 8 Sep 2018 22:44:58 +0000"  >&lt;p&gt;Fixed at: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/06c81b2d82306ebb517abfe73102893e2a122f6b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/06c81b2d82306ebb517abfe73102893e2a122f6b&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Test added at: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/7a8f8d9508d4059ba5a5a901e805323307b7e683&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/7a8f8d9508d4059ba5a5a901e805323307b7e683&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xvrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7890] JSON-related IT failures when upgrading sling.servlets to 2.1.34</title>
                <link>https://issues.apache.org/jira/browse/SLING-7890</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the following change in the sling starter&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/src/main/provisioning/sling.txt b/src/main/provisioning/sling.txt
index 0f76c0b..4904fc3 100644
--- a/src/main/provisioning/sling.txt
+++ b/src/main/provisioning/sling.txt
@@ -62,7 +62,7 @@
     org.apache.sling/org.apache.sling.resourceresolver/1.6.6
     org.apache.sling/org.apache.sling.serviceusermapper/1.4.0
     org.apache.sling/org.apache.sling.serviceuser.webconsole/1.0.0
-    org.apache.sling/org.apache.sling.servlets.get/2.1.30
+    org.apache.sling/org.apache.sling.servlets.get/2.1.34
     org.apache.sling/org.apache.sling.servlets.post/2.3.26
     org.apache.sling/org.apache.sling.servlets.resolver/2.4.22
     org.apache.sling/org.apache.sling.xss/2.0.12
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get multiple IT failures, and the root cause seems top be&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ClassCastException: org.apache.johnzon.core.JsonObjectImpl cannot be cast to javax.json.JsonArray
	at org.apache.sling.servlets.get.impl.util.JsonToText.valueToString(JsonToText.java:164)
	at org.apache.sling.servlets.get.impl.util.JsonToText.prettyPrint(JsonToText.java:209)
	at org.apache.sling.servlets.get.impl.VersionInfoServlet.doGet(VersionInfoServlet.java:124)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.mayService(SlingSafeMethodsServlet.java:266)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:342)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:374)
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:82)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
	at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:82)
	at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:72)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:78)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.NoPropertyFilter.doFilter(NoPropertyFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:72)
	at org.apache.sling.launchpad.testservices.filters.TestFilter.doFilter(TestFilter.java:47)
	at org.apache.sling.launchpad.testservices.filters.SlingFilter.doFilter(SlingFilter.java:25)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:72)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:131)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:72)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
	at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:234)
	at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:120)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:86)
	at org.apache.sling.junit.impl.servlet.TestLogServlet$TestNameLoggingFilter.doFilter(TestLogServlet.java:257)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
	at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:131)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
	at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
	at org.apache.sling.engine.impl.parameters.RequestParameterSupportConfigurer.doFilter(RequestParameterSupportConfigurer.java:63)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher$1.doFilter(Dispatcher.java:146)
	at org.apache.felix.http.base.internal.whiteboard.WhiteboardManager.invokePreprocessors(WhiteboardManager.java:1000)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:91)
	at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:865)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1317)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1219)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
	at org.eclipse.jetty.server.Server.handle(Server.java:531)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281)
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)
	at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)
	at java.lang.Thread.run(Thread.java:748)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13183596">SLING-7890</key>
            <summary>JSON-related IT failures when upgrading sling.servlets to 2.1.34</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jebailey">Jason E Bailey</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Sep 2018 09:16:40 +0000</created>
                <updated>Tue, 23 Oct 2018 09:21:41 +0000</updated>
                            <resolved>Wed, 19 Sep 2018 00:55:47 +0000</resolved>
                                    <version>Servlets Get 2.1.34</version>
                                    <fixVersion>Launchpad Integration Tests 1.0.8</fixVersion>
                    <fixVersion>Servlets Get 2.1.36</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16606879" author="rombert" created="Fri, 7 Sep 2018 09:19:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; - since you did most of the changes between 2.1.30 and 2.1.34 would you have time to do a first assessment of the problem? To reproduce, update the &lt;tt&gt;servlets.get&lt;/tt&gt; bundle to the latest version in the starter and run the integration tests.&lt;/p&gt;</comment>
                            <comment id="16607027" author="jebailey" created="Fri, 7 Sep 2018 11:58:19 +0000"  >&lt;p&gt;I see the problem. I&apos;ll work on the fix and a unit test.&lt;/p&gt;</comment>
                            <comment id="16607120" author="jebailey" created="Fri, 7 Sep 2018 13:26:01 +0000"  >&lt;p&gt;There&apos;s a number of tests failing related to my changes beyond this specific error. So I&apos;m running through all of them and fixing what I can. Some of these are fails because the test included a very explicit String check that failed. e.g. It was looking for &quot;dumped by PlainTextRendererServlet&quot; and I had changed the name of the class to PlainTextRenderer because it was no longer a Servlet, and I changed the wording as well.&lt;/p&gt;</comment>
                            <comment id="16607251" author="jebailey" created="Fri, 7 Sep 2018 15:25:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I&apos;ve committed changes to both the default servlets and the integration tests. The last issue I&apos;d like another opinion on. They current problem is that the json response for the VersionHistory was incorrectly returning a boolean property of true as &quot;true&quot; the integration test was set up to match on the String. It&apos;s now correctly responding with the boolean value. However this is a break if someone was expecting a String like the integration test.&lt;/p&gt;</comment>
                            <comment id="16609733" author="bdelacretaz" created="Mon, 10 Sep 2018 20:10:23 +0000"  >&lt;p&gt;The commit that you mention is &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/7e70e9f8fa79ae27576ca73a6b48fd5107e19c7a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/7e70e9f8fa79ae27576ca73a6b48fd5107e19c7a&lt;/a&gt; , right?&lt;/p&gt;

&lt;p&gt;Have there been any changes to the JSON output of the VersionInfoServlet? &lt;/p&gt;

&lt;p&gt;If the JSON output has changed, I think that&apos;s where we need to make a decision - even if the new output is more right, breaking backwards compatibility is not good in general.&lt;/p&gt;

&lt;p&gt;Here&apos;s an example output from Sling 10, does the current trunk return something different?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;versions&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:rootVersion&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Mon Sep 10 2018 21:57:16 GMT+0200&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;successors&quot;&lt;/span&gt;: [
        &lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;
      ],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;predecessors&quot;&lt;/span&gt;: [],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;: [],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;baseVersion&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Mon Sep 10 2018 21:57:16 GMT+0200&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;successors&quot;&lt;/span&gt;: [],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;predecessors&quot;&lt;/span&gt;: [
        &lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:rootVersion&quot;&lt;/span&gt;
      ],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;: [],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;baseVersion&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
    }
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16609761" author="jebailey" created="Mon, 10 Sep 2018 20:26:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; yes there is a difference in the output, &quot;baseVersion&quot; is now returning a boolean&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;baseVersion&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16609770" author="bdelacretaz" created="Mon, 10 Sep 2018 20:34:17 +0000"  >&lt;p&gt;Ok, got it - sorry that I didn&apos;t figure it out earlier.&lt;/p&gt;

&lt;p&gt;I think it&apos;s similar to the ECMA dates thing then, fixing this means the output is not fully backwards compatible anymore.&lt;/p&gt;

&lt;p&gt;Personally I would prefer that we keep the old, imperfect behavior - what do others think?&lt;/p&gt;</comment>
                            <comment id="16609975" author="jebailey" created="Tue, 11 Sep 2018 01:08:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; So something is odd here. The reason this is being returned as a String is that in 2.1.30 all boolean values are being returned as Strings when you add the tidy selector to the URL. This is effecting the default json as well. I don&apos;t think this was always the case. I&apos;m researching.&lt;/p&gt;</comment>
                            <comment id="16610242" author="rombert" created="Tue, 11 Sep 2018 08:06:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;Personally I would prefer that we keep the old, imperfect behavior - what do others think?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I also am a fan of keeping backwards compatibility. At this point we have many systems depending on the current behaviour and should avoid and such changes.&lt;/p&gt;</comment>
                            <comment id="16610625" author="jebailey" created="Tue, 11 Sep 2018 13:54:38 +0000"  >&lt;p&gt;Additional information&lt;/p&gt;

&lt;p&gt;The issue that is occurring is happening in two use cases, in the VersionInfo servlet and in the Default JSON Renderer when the selector of &quot;tidy&quot; is used. In these cases all values are being returned as Strings. This was introduced in release 2.1.26 as part of the change to apache johnzon json implementation. The class org.apache.sling.servlets.get.impl.util.JsonRenderer was added and the method valueToString(Object value)&#160; incorrectly handled numbers and booleans.&lt;/p&gt;

&lt;p&gt;Here is a version request prior to 2.1.26&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;versions&quot;&lt;/span&gt;: {
&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:rootVersion&quot;&lt;/span&gt;: {
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Mon Sep 10 2018 08:50:23 GMT-0400&quot;&lt;/span&gt;,
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;successors&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;predecessors&quot;&lt;/span&gt;: [],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;: [],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;baseVersion&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&#160;&#160; &#160;&#160;&#160; &#160;},
&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;: {
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Tue Sep 11 2018 09:26:52 GMT-0400&quot;&lt;/span&gt;,
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;successors&quot;&lt;/span&gt;: [],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;predecessors&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:rootVersion&quot;&lt;/span&gt;],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;: [],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;baseVersion&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&#160;&#160; &#160;&#160;&#160; &#160;}
&#160;&#160; &#160;}
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The same request via 2.1.30&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;versions&quot;&lt;/span&gt;: {
&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:rootVersion&quot;&lt;/span&gt;: {
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Mon Sep 10 2018 08:50:23 GMT-0400&quot;&lt;/span&gt;,
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;successors&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;predecessors&quot;&lt;/span&gt;: [],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;: [],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;baseVersion&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;
&#160;&#160; &#160;&#160;&#160; &#160;},
&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;: {
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Tue Sep 11 2018 09:26:52 GMT-0400&quot;&lt;/span&gt;,
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;successors&quot;&lt;/span&gt;: [],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;predecessors&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:rootVersion&quot;&lt;/span&gt;],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;: [],
&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;baseVersion&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
&#160;&#160; &#160;&#160;&#160; &#160;}
&#160;&#160; &#160;}
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice that the booleans are being returned as boolean. I suspect the issue came about with how JsonObject.getString is being implemented. In the old library it would convert a value to String, where as in Johnzon it&apos;s expecting a JsonString. So when the change was made to Johnzon and the results were changed to return a String rather than a boolean, no errors were detected.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here is the same issue in 2.1.30 appearing with the default JSON Renderer: &lt;a href=&quot;http://localhost:8080/content/apache/sling-apache-org/index.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/content/apache/sling-apache-org/index.json&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:primaryType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:title&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling - Bringing Back the Fun!&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:template&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;/conf/global/site/templates/base-page&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:taxonomy&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;/etc/taxonomy/reference/community&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;reference/components/pages/base&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;published&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;hideInSitemap&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;and with tidy: &lt;a href=&quot;http://localhost:8080/content/apache/sling-apache-org/index.tidy.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/content/apache/sling-apache-org/index.tidy.json&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:primaryType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:title&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling - Bringing Back the Fun!&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:template&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;/conf/global/site/templates/base-page&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:taxonomy&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;/etc/taxonomy/reference/community&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;reference/components/pages/base&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;published&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;,
&#160;&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;hideInSitemap&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I would say that if this hasn&apos;t shown up as a bug yet, that it will, because the boolean as a String is a fairly recent development.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16610718" author="rombert" created="Tue, 11 Sep 2018 14:35:13 +0000"  >&lt;p&gt;Nice investigation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt;! So, IIUC, the &quot;native&quot; boolean rendering was there up to 2.1.26, switched to &quot;String&quot; rendering in 2.1.30 and then it was changed back with your recent refactorings?&lt;/p&gt;</comment>
                            <comment id="16610720" author="jebailey" created="Tue, 11 Sep 2018 14:37:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Correct.&lt;/p&gt;</comment>
                            <comment id="16610724" author="rombert" created="Tue, 11 Sep 2018 14:39:22 +0000"  >&lt;p&gt;Then I guess that the correct behaviour is to have the older one - boolean rendered as it is and change the tests rather than the impl. What do you think about this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16610869" author="bdelacretaz" created="Tue, 11 Sep 2018 16:17:57 +0000"  >&lt;p&gt;I have added some tests for the &lt;tt&gt;JsonRenderer&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-get/commit/79e861f1e2e19a2dca71fbab55e9c1c01d01c5ee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-get/commit/79e861f1e2e19a2dca71fbab55e9c1c01d01c5ee&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;testBooleansNoTidy&lt;/tt&gt; is as expected for me, b1 and b2 are booleans as expected and s1 and s2 are strings.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;testBooleansWithTidy&lt;/tt&gt; however does not expose the conversion to String that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; is describing, did I miss something in those tests? I think it&apos;s good to nail the problem down with tests before fixing it, as it looks like it&apos;s only the (much further away) integration test that exposed the issue.&lt;/p&gt;

&lt;p&gt;But maybe I&apos;m totally confused at this point &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16610943" author="jebailey" created="Tue, 11 Sep 2018 17:09:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; You got the tests right, it&apos;s that I had inadvertently fixed the boolean to String issue as part of my refactoring work. The current master branch is &quot;correct&quot; in the way it handles booleans and the problem was that the integration test was failing because it was expecting a String which it shouldn&apos;t have.&lt;/p&gt;</comment>
                            <comment id="16611273" author="bdelacretaz" created="Tue, 11 Sep 2018 21:30:38 +0000"  >&lt;p&gt;Ok got it, so I agree with changing the &lt;tt&gt;VersionInfoServletTest&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16617787" author="rombert" created="Mon, 17 Sep 2018 16:37:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; - are you still looking into this? It&apos;s ok if you&apos;re not, but I wanted to double-check as we still have a failing IT and getting ready for the Sling 11 release.&lt;/p&gt;</comment>
                            <comment id="16617816" author="jebailey" created="Mon, 17 Sep 2018 16:55:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; 2.1.34, as it stands, has a bug and should not be part of Sling 11.&lt;/p&gt;

&lt;p&gt;I have made the necessary changes to correct the problem and made the commits to the 2.1.36-SNAPSHOT master branch. I have also had to make a change to the&#160; Launchpad integration tests. Both will need to be released.&lt;/p&gt;</comment>
                            <comment id="16618687" author="rombert" created="Tue, 18 Sep 2018 08:26:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; - so should we be safe to release the new Servlets GET bundle now and the bug should be fixed?&lt;/p&gt;</comment>
                            <comment id="16618899" author="jebailey" created="Tue, 18 Sep 2018 10:39:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Yes it&apos;s ready to be released. I was hoping to do a release of both bundles last night but I&apos;m running into some time constraints. I&apos;ll be able to get to it by tonight if someone else doens&apos;t pick up that task.&lt;/p&gt;</comment>
                            <comment id="16618960" author="rombert" created="Tue, 18 Sep 2018 11:23:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; - I&apos;ll release the IT bundle anyway for the Sling 11 release so you can skip on that. If for any reason you can&apos;t make the release let me know and I&apos;ll do it.&lt;/p&gt;</comment>
                            <comment id="16619159" author="rombert" created="Tue, 18 Sep 2018 14:05:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; - I still get test failures with:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;locally installed latest servlets.get bundle&lt;/li&gt;
	&lt;li&gt;switching the starter to user servlets.get 2.1.35-SNAPSHOT&lt;/li&gt;
	&lt;li&gt;running launchpad-testing with {{mvn -U clean verify)}&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failures: 
[ERROR]   VersionInfoServletTest.testStandardVersionsList:77 Expecting true baseVersion expected:&amp;lt;true&amp;gt; but was:&amp;lt;true&amp;gt;
[INFO] 
[ERROR] Tests run: 655, Failures: 1, Errors: 0, Skipped: 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Are there changes at your end that are not pushed? Also there are still some TODOs in the servlets.get bundle added by Bertrand that we should probably address.&lt;/p&gt;</comment>
                            <comment id="16619174" author="jebailey" created="Tue, 18 Sep 2018 14:18:15 +0000"  >&lt;p&gt;looking into it&lt;/p&gt;</comment>
                            <comment id="16619481" author="jebailey" created="Tue, 18 Sep 2018 18:01:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; You should be able to update the tests and have it pass now&lt;/p&gt;</comment>
                            <comment id="16620300" author="rombert" created="Wed, 19 Sep 2018 08:45:41 +0000"  >&lt;p&gt;Confirmed, thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13184318">SLING-7905</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xu4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7887] The CreateUserServlet should allow non-admin users to create a user if sufficient privileges have been granted</title>
                <link>https://issues.apache.org/jira/browse/SLING-7887</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the current user has been granted the following privileges then they have enough rights to create a user in the oak impl of UserManager and should be allowed to do so:&lt;/p&gt;

&lt;p&gt;jcr:readAccessControl &lt;br/&gt;
 jcr:modifyAccessControl &lt;br/&gt;
 rep:userManagement&lt;br/&gt;
 jcr:read&lt;br/&gt;
 rep:write&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183557">SLING-7887</key>
            <summary>The CreateUserServlet should allow non-admin users to create a user if sufficient privileges have been granted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Sep 2018 05:29:36 +0000</created>
                <updated>Fri, 20 Sep 2019 11:34:41 +0000</updated>
                            <resolved>Sat, 8 Sep 2018 22:55:19 +0000</resolved>
                                    <version>JCR Jackrabbit User Manager 2.2.6</version>
                                    <fixVersion>JCR Jackrabbit User Manager 2.2.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16608233" author="enorman" created="Sat, 8 Sep 2018 22:55:19 +0000"  >&lt;p&gt;Fixed at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/d89bcd92f48bf42c28e9cd37a81d8f5b38361db5#diff-ad9077962ed0c1d4663683f490b1a073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/d89bcd92f48bf42c28e9cd37a81d8f5b38361db5#diff-ad9077962ed0c1d4663683f490b1a073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/141637a6afaae62f593eb45ab4721b5b356e3182#diff-ad9077962ed0c1d4663683f490b1a073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/141637a6afaae62f593eb45ab4721b5b356e3182#diff-ad9077962ed0c1d4663683f490b1a073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Tests added at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/a65f6db6734fc04f288e307fc94c863ca1e69ee1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/a65f6db6734fc04f288e307fc94c863ca1e69ee1&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xtw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7886] AuthorizablePrivilegesInfo returns incorrect information for non-admin user who has been granted sufficient privileges to do User/Group Management activites</title>
                <link>https://issues.apache.org/jira/browse/SLING-7886</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;AuthorizablePrivilegesInfo returns incorrect information for non-admin user who has been granted sufficient privileges to do User/Group Management activities&lt;/p&gt;

&lt;p&gt;It looks like the oak impl of UserManager requires these privileges to be granted on the /home/users or /home/groups folders for the user to be able to do user/group management calls:&lt;/p&gt;

&lt;p&gt;jcr:readAccessControl &lt;br/&gt;
 jcr:modifyAccessControl &lt;br/&gt;
 rep:userManagement&lt;br/&gt;
 jcr:read&lt;br/&gt;
 rep:write&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So if those privileges are granted, then the&#160;AuthorizablePrivilegesInfo#can* calls should return true.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183556">SLING-7886</key>
            <summary>AuthorizablePrivilegesInfo returns incorrect information for non-admin user who has been granted sufficient privileges to do User/Group Management activites</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Sep 2018 05:27:24 +0000</created>
                <updated>Fri, 20 Sep 2019 11:34:41 +0000</updated>
                            <resolved>Sat, 8 Sep 2018 22:55:07 +0000</resolved>
                                    <version>JCR Jackrabbit User Manager 2.2.6</version>
                                    <fixVersion>JCR Jackrabbit User Manager 2.2.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16608232" author="enorman" created="Sat, 8 Sep 2018 22:55:07 +0000"  >&lt;p&gt;Fixed at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/d89bcd92f48bf42c28e9cd37a81d8f5b38361db5#diff-ad9077962ed0c1d4663683f490b1a073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/d89bcd92f48bf42c28e9cd37a81d8f5b38361db5#diff-ad9077962ed0c1d4663683f490b1a073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/141637a6afaae62f593eb45ab4721b5b356e3182#diff-ad9077962ed0c1d4663683f490b1a073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-usermanager/commit/141637a6afaae62f593eb45ab4721b5b356e3182#diff-ad9077962ed0c1d4663683f490b1a073&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Tests added at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/a65f6db6734fc04f288e307fc94c863ca1e69ee1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/a65f6db6734fc04f288e307fc94c863ca1e69ee1&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xtvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7885] CMS - Core - UGC Service Not Registered</title>
                <link>https://issues.apache.org/jira/browse/SLING-7885</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently when you start a new installation of the CMS Reference App, the UGC Service will not start because it is missing the user sling-ugc whom should be used to create the User Generated content.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183496">SLING-7885</key>
            <summary>CMS - Core - UGC Service Not Registered</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Sep 2018 20:38:01 +0000</created>
                <updated>Mon, 24 Sep 2018 16:51:44 +0000</updated>
                            <resolved>Thu, 6 Sep 2018 20:40:02 +0000</resolved>
                                                    <fixVersion>App CMS 0.10.0</fixVersion>
                                    <component>App CMS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16606368" author="klcodanr" created="Thu, 6 Sep 2018 20:40:02 +0000"  >&lt;p&gt;Resolved in: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/495190f81647393cf2c64d7e704be5cbc5d9590b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/495190f81647393cf2c64d7e704be5cbc5d9590b&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xtin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7884] Sanitize output of appender names</title>
                <link>https://issues.apache.org/jira/browse/SLING-7884</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;apache/sling-org-apache-sling-commons-log had an logging bug.&#160; Created a PR to address this:&lt;/p&gt;



&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/5/commits/f82aa61cc3c375b05663362ff861345fb2e0213e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/5/commits/f82aa61cc3c375b05663362ff861345fb2e0213e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This ticket is for version tracking.&#160;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183434">SLING-7884</key>
            <summary>Sanitize output of appender names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="OSGDuff">Devin Duffy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Sep 2018 15:46:17 +0000</created>
                <updated>Mon, 10 Sep 2018 09:43:08 +0000</updated>
                            <resolved>Fri, 7 Sep 2018 08:40:11 +0000</resolved>
                                                    <fixVersion>Commons Log 5.1.10</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16606847" author="rombert" created="Fri, 7 Sep 2018 08:40:11 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/commit/8f46d53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-commons-log commit 8f46d53&lt;/a&gt;, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=OSGDuff&quot; class=&quot;user-hover&quot; rel=&quot;OSGDuff&quot;&gt;OSGDuff&lt;/a&gt; for the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xt53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7883] Sling Tools - No valid filter found in this project!</title>
                <link>https://issues.apache.org/jira/browse/SLING-7883</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I get &quot;No valid filter found in this project!&quot; in Import from Repository dialog. Unable to click on finish button.&lt;/p&gt;

&lt;p&gt;Eclipse is 4.8.0.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12938652/12938652_image-2018-09-06-15-27-40-455.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12938651/12938651_image-2018-09-06-15-28-14-960.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12938650/12938650_image-2018-09-06-15-28-42-140.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183396">SLING-7883</key>
            <summary>Sling Tools - No valid filter found in this project!</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="roland.gruber@valtech.de">Roland Gruber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Sep 2018 13:31:14 +0000</created>
                <updated>Thu, 6 Sep 2018 13:57:26 +0000</updated>
                            <resolved>Thu, 6 Sep 2018 13:57:26 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.2.2</version>
                                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16605778" author="rombert" created="Thu, 6 Sep 2018 13:35:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roland.gruber%40valtech.de&quot; class=&quot;user-hover&quot; rel=&quot;roland.gruber@valtech.de&quot;&gt;roland.gruber@valtech.de&lt;/a&gt; - can you please upload a sample project which reproduces the problem? Thanks!&lt;/p&gt;</comment>
                            <comment id="16605790" author="roland.gruber@valtech.de" created="Thu, 6 Sep 2018 13:46:07 +0000"  >&lt;p&gt;Comparing the project with one that works I found that it has no filter.xml on file system. The filters are all defined in pom.xml (content-package-maven-plugin).&lt;/p&gt;

&lt;p&gt;Does this help?&lt;/p&gt;</comment>
                            <comment id="16605793" author="rombert" created="Thu, 6 Sep 2018 13:48:03 +0000"  >&lt;p&gt;Ah, that makes sense. I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; has done some work in this direction. Konrad, any idea about that it takes to support importing projects with filters defined in the pom file?&lt;/p&gt;</comment>
                            <comment id="16605809" author="kwin" created="Thu, 6 Sep 2018 13:55:21 +0000"  >&lt;p&gt;I think we can close this as duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6344&quot; title=&quot;Support filter.xmls being generated by the content-package-maven-plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6344&quot;&gt;SLING-6344&lt;/a&gt;. Check for the latest state there.&lt;/p&gt;</comment>
                            <comment id="16605817" author="rombert" created="Thu, 6 Sep 2018 13:57:26 +0000"  >&lt;p&gt;Agreed, let&apos;s use &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6344&quot; title=&quot;Support filter.xmls being generated by the content-package-maven-plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6344&quot;&gt;SLING-6344&lt;/a&gt; to track this&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13024386">SLING-6344</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12938652" name="image-2018-09-06-15-27-40-455.png" size="35561" author="roland.gruber@valtech.de" created="Thu, 6 Sep 2018 13:27:41 +0000"/>
                            <attachment id="12938651" name="image-2018-09-06-15-28-14-960.png" size="48094" author="roland.gruber@valtech.de" created="Thu, 6 Sep 2018 13:28:15 +0000"/>
                            <attachment id="12938650" name="image-2018-09-06-15-28-42-140.png" size="100011" author="roland.gruber@valtech.de" created="Thu, 6 Sep 2018 13:28:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xswn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7882] HTL null pointer exception if resource type is not set with sling:resourceType</title>
                <link>https://issues.apache.org/jira/browse/SLING-7882</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;ve created a small content three with two pages. Every page have the jcr:primaryType set to &quot;kcs:Page&quot; (a custom type that I&apos;ve registered into repository).&lt;/p&gt;

&lt;p&gt;Under the &quot;/apps/kcs/Page&quot; i&apos;ve created some HTL scripts, so now I expect that if I request the page with my browser the scripts are executed using the resource type set in the primaryType of the node; but it doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;I&apos;ve got a Null pointer exception (see stack trace as attachment) that I&apos;ve find it is caused by the missing of the &quot;sling:resourceType&quot; property.&lt;/p&gt;

&lt;p&gt;Trying with the sling:resourceType property set in the resource, the page works correctly.&#160; &#160;Analyzing the issue more in depth I found that the problem is related to the presence of some&#160; &quot;data-sly-include&quot; inside the HTL code that if the &quot;sling:resourceType&quot; is missing it doesn&apos;t work.&lt;/p&gt;</description>
                <environment>ApacheSling/2.6 (jetty/9.3.22.v20171030, OpenJDK 64-Bit Server VM 1.8.0_172, Linux 4.16.3-301.fc28.x86_64 amd64)</environment>
        <key id="13183063">SLING-7882</key>
            <summary>HTL null pointer exception if resource type is not set with sling:resourceType</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kele23">Michele Scala</reporter>
                        <labels>
                            <label>htl</label>
                            <label>nullpointerexception</label>
                            <label>scripting</label>
                    </labels>
                <created>Wed, 5 Sep 2018 07:56:12 +0000</created>
                <updated>Thu, 23 May 2019 17:56:18 +0000</updated>
                                            <version>Scripting HTL Engine 1.0.54-1.4.0</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16846924" author="radu.cotescu" created="Thu, 23 May 2019 17:56:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kele23&quot; class=&quot;user-hover&quot; rel=&quot;kele23&quot;&gt;kele23&lt;/a&gt; , can you please provide me with the said content package if this is still an issue?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12938422" name="content.png" size="4462" author="kele23" created="Wed, 5 Sep 2018 07:54:24 +0000"/>
                            <attachment id="12938425" name="stack_trace.txt" size="8318" author="kele23" created="Wed, 5 Sep 2018 07:54:16 +0000"/>
                            <attachment id="12938424" name="with_sling_resource_type.png" size="34424" author="kele23" created="Wed, 5 Sep 2018 07:54:19 +0000"/>
                            <attachment id="12938423" name="without_sling_resource_type.png" size="46047" author="kele23" created="Wed, 5 Sep 2018 07:54:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xqv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7881] Resource resolver may calculate incorrect map path for an address that is a selector on the root resource</title>
                <link>https://issues.apache.org/jira/browse/SLING-7881</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Prerequistes: The requesting user&#160;has rights to read the &quot;/content&quot; resource but no rights to read the root resource of the repository.&#160; This would force the resource resolver to do a mapping of the request to the &quot;/content&quot; resource instead of the root resource.&lt;/p&gt;

&lt;p&gt;For example: &lt;a href=&quot;http://localhost:8080/.2.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/.2.json&lt;/a&gt; should&#160;be mapped to&#160;/content.2.json instead of /content/.2.json&lt;/p&gt;

&lt;p&gt;In this scenario the current behavior resolves to a resource with a &quot;path&quot; value of &quot;/content/&quot; and the trailing slash in the &quot;path&quot; value has side effects elsewhere if other resources are resolved relative to this one (i.e. double slashes in the path of child resources, or garbage returned by ResourceResolver#map).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Expected:&#160; If the mapping redirect value ends with &quot;/&quot; and the replacement address suffix starts with a dot, then it should remove the trailing slash from the redirect value to make a valid path when the redirect and suffix values are combined.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13182900">SLING-7881</key>
            <summary>Resource resolver may calculate incorrect map path for an address that is a selector on the root resource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Sep 2018 19:32:48 +0000</created>
                <updated>Fri, 20 Sep 2019 11:34:44 +0000</updated>
                            <resolved>Tue, 4 Sep 2018 20:09:16 +0000</resolved>
                                    <version>Resource Resolver 1.6.6</version>
                                    <fixVersion>Resource Resolver 1.6.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16603529" author="enorman" created="Tue, 4 Sep 2018 20:09:17 +0000"  >&lt;p&gt;Fixed and added a few unit tests at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/34f301b18227cbca24a8f5e636c405fc844077da&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/34f301b18227cbca24a8f5e636c405fc844077da&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xpzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7880] Avoid NPE when adapting to Tenant for a system users</title>
                <link>https://issues.apache.org/jira/browse/SLING-7880</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when trying to adapt a Resource to a tenant:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    Tenant tenant = resourceResolver.adaptTo(Tenant.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this can lead to a NPE in the &lt;tt&gt;TenantAdapterFactory&lt;/tt&gt; which is catched and logged:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;02.09.2018 11:14:27.586 *ERROR* [0:0:0:0:0:0:0:1 [1535879667510] GET /content/alpha64Project/en.html HTTP/1.1] org.apache.sling.tenant.internal.TenantAdapterFactory can not get user from session
java.lang.NullPointerException: null
	at org.apache.sling.tenant.internal.TenantAdapterFactory.getAdapter(TenantAdapterFactory.java:122)
	at org.apache.sling.tenant.internal.TenantAdapterFactory.getAdapter(TenantAdapterFactory.java:101)
	at org.apache.sling.adapter.internal.AdapterManagerImpl.getAdapter(AdapterManagerImpl.java:143)
	at org.apache.sling.api.adapter.SlingAdaptable.adaptTo(SlingAdaptable.java:104)
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.adaptTo(ResourceResolverImpl.java:818)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;when the user of the resource resolver is a system user, and this user has no special access privileges to it&apos;s own home path.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13182521">SLING-7880</key>
            <summary>Avoid NPE when adapting to Tenant for a system users</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Sep 2018 09:19:58 +0000</created>
                <updated>Wed, 5 Sep 2018 20:48:52 +0000</updated>
                            <resolved>Sun, 2 Sep 2018 09:21:55 +0000</resolved>
                                    <version>Tenant 1.1.0</version>
                                    <fixVersion>Tenant 1.1.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16601152" author="sseifert@pro-vision.de" created="Sun, 2 Sep 2018 09:21:55 +0000"  >&lt;p&gt;fixed: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-tenant/commit/80853919ca46788370ed98cce593345fad19d458&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-tenant/commit/80853919ca46788370ed98cce593345fad19d458&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;in this case it&apos;s safe to assume that the user has not tenant context, as it&apos;s a system user and has not even access to it&apos;s own home directory. this should &lt;b&gt;not&lt;/b&gt; be logged as error.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xnof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7876] Launchpad Base needs to take framework restarts due to extension bundle refresh into account.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7876</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since OSGi R7 the framework will return a new exit code on stop when it is being shutdown because of an extension bundle refresh. Up until Felix 6 the launchpad base handled this case together with an update call on the framework itself (as Felix internally went through the same update method in both cases) - however, due to the new R7 way of doing things this has stopped working and the framework will not be restarted if the stop was because of a refresh of an extension bundle.&#160;&lt;/p&gt;

&lt;p&gt;We need to trap the refresh exit code and restart the framework in that case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13182342">SLING-7876</key>
            <summary>Launchpad Base needs to take framework restarts due to extension bundle refresh into account.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2018 11:26:50 +0000</created>
                <updated>Mon, 3 Sep 2018 11:07:48 +0000</updated>
                            <resolved>Fri, 31 Aug 2018 12:56:17 +0000</resolved>
                                    <version>Launchpad Base 2.6.30</version>
                                    <fixVersion>Launchpad Base 2.6.32</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16598699" author="karlpauls" created="Fri, 31 Aug 2018 12:56:17 +0000"  >&lt;p&gt;Done in f3b86ac32208017d21a9e1d62c629b3ca8a92720&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xmkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7869] Update javax.json.spi.JsonProvider to 1.1</title>
                <link>https://issues.apache.org/jira/browse/SLING-7869</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The provided javax.json.spi.JsonProvider interface hasn&apos;t been updated to 1.1 when we did the update to the 1.1 spec. That causes problems when one is trying to use 1.1 features. We need to update the interface and release a fix version (this will need to skip the bnd version check).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13182140">SLING-7869</key>
            <summary>Update javax.json.spi.JsonProvider to 1.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Aug 2018 14:16:08 +0000</created>
                <updated>Sun, 22 Dec 2019 12:18:57 +0000</updated>
                            <resolved>Thu, 30 Aug 2018 14:20:52 +0000</resolved>
                                    <version>Commons Johnzon 1.1.0</version>
                                    <fixVersion>Commons Johnzon 1.1.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16597509" author="karlpauls" created="Thu, 30 Aug 2018 14:20:52 +0000"  >&lt;p&gt;Done in&#160;d5ea83c669c060eaee393c73036d499de4d78771&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13275928">SLING-8950</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xlc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7862] CMS - UI - Editor Shows Previous Form</title>
                <link>https://issues.apache.org/jira/browse/SLING-7862</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When opening the editor, the previous screen is shown until the iframe loads the new URL. This can display for awhile on slow connections / slow servers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13181636">SLING-7862</key>
            <summary>CMS - UI - Editor Shows Previous Form</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Aug 2018 15:17:45 +0000</created>
                <updated>Mon, 24 Sep 2018 16:51:50 +0000</updated>
                            <resolved>Tue, 28 Aug 2018 15:18:10 +0000</resolved>
                                                    <fixVersion>App CMS 0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16595127" author="klcodanr" created="Tue, 28 Aug 2018 15:18:05 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/25d8cb5b6f0dab8ede23ba1bb1dc841dc2b6761c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/25d8cb5b6f0dab8ede23ba1bb1dc841dc2b6761c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xi8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7861] CMS - UI - Delete / Move Page Error</title>
                <link>https://issues.apache.org/jira/browse/SLING-7861</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When moving or deleting a page from the page editor the page refreshes to show an error page since the current page was deleted / moved.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13181635">SLING-7861</key>
            <summary>CMS - UI - Delete / Move Page Error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Aug 2018 15:14:55 +0000</created>
                <updated>Mon, 24 Sep 2018 16:51:56 +0000</updated>
                            <resolved>Tue, 28 Aug 2018 15:16:10 +0000</resolved>
                                                    <fixVersion>App CMS 0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16595124" author="klcodanr" created="Tue, 28 Aug 2018 15:16:10 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/15637ebdd35d9e311b600130ed3894cd52ddd5cd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;15637ebdd35d9e311b600130ed3894cd52ddd5cd&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xi87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7859] The HTL engine sets the script bindings two times</title>
                <link>https://issues.apache.org/jira/browse/SLING-7859</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When calling &lt;tt&gt;org.apache.sling.scripting.sightly.impl.engine.SightlyScriptEngine#eval&lt;/tt&gt; the bindings from the script context will be set two times: once by the engine and once more by the resulting compiled script. Although it has no side-effect, executing the same operation twice is redundant. Only the compiled script should perform this operation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13181513">SLING-7859</key>
            <summary>The HTL engine sets the script bindings two times</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Aug 2018 06:28:42 +0000</created>
                <updated>Tue, 2 Oct 2018 09:18:26 +0000</updated>
                            <resolved>Tue, 28 Aug 2018 06:40:44 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.26</version>
                                    <fixVersion>Scripting HTL Engine 1.0.56-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16594600" author="radu.cotescu" created="Tue, 28 Aug 2018 06:40:44 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/4d605e8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 4d605e8&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13013425">SLING-6173</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xhh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7857] Unclosed ResourceResolver in org.apache.sling.extensions.webconsolesecurityprovider.internal.SlingWebConsoleSecurityProvider2</title>
                <link>https://issues.apache.org/jira/browse/SLING-7857</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This issue is still observed with org.apache.sling.auth.core v 1.4.0 which &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6011&quot; title=&quot;Register request listener through http whiteboard&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6011&quot;&gt;&lt;del&gt;SLING-6011&lt;/del&gt;&lt;/a&gt; specifies the issue was resolved in version 1.3.18.&lt;/p&gt;

&lt;p&gt;The SlingWebConsoleSecurityProvider it is handling the authentication but it is not registering a servlet request listener to close the session at the end of the request. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;15.09.2017 18:07:59.044 *INFO* [Apache Sling Resource Resolver Finalizer Thread] org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl Unclosed ResourceResolver was created here:
java.lang.Exception: Opening Stacktrace
at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl$ResolverReference.&amp;lt;init&amp;gt;(CommonResourceResolverFactoryImpl.java:521)
at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.register(CommonResourceResolverFactoryImpl.java:218)
at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.&amp;lt;init&amp;gt;(ResourceResolverImpl.java:101)
at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.&amp;lt;init&amp;gt;(ResourceResolverImpl.java:94)
at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getResourceResolverInternal(CommonResourceResolverFactoryImpl.java:263)
at org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl.getResourceResolver(CommonResourceResolverFactoryImpl.java:173)
at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryImpl.getResourceResolver(ResourceResolverFactoryImpl.java:105)
at org.apache.sling.auth.core.impl.SlingAuthenticator.getResolver(SlingAuthenticator.java:791)
at org.apache.sling.auth.core.impl.SlingAuthenticator.doHandleSecurity(SlingAuthenticator.java:506)
at org.apache.sling.auth.core.impl.SlingAuthenticator.handleSecurity(SlingAuthenticator.java:460)
at org.apache.sling.extensions.webconsolesecurityprovider.internal.SlingWebConsoleSecurityProvider2.authenticate(SlingWebConsoleSecurityProvider2.java:69)
at org.apache.felix.webconsole.internal.servlet.OsgiManagerHttpContext.handleSecurity(OsgiManagerHttpContext.java:103)
at org.apache.felix.http.base.internal.service.ServletContextImpl.handleSecurity(ServletContextImpl.java:421)
at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:57)
at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128)
at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:587)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:221)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
at org.eclipse.jetty.server.Server.handle(Server.java:499)
at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)
at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)
at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)
at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;We should add this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13181062">SLING-7857</key>
            <summary>Unclosed ResourceResolver in org.apache.sling.extensions.webconsolesecurityprovider.internal.SlingWebConsoleSecurityProvider2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="akhoury">Andrew Khoury</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Aug 2018 21:20:58 +0000</created>
                <updated>Mon, 27 Aug 2018 07:42:17 +0000</updated>
                            <resolved>Mon, 27 Aug 2018 07:41:43 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13105006">SLING-7152</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13105006">SLING-7152</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13000290">SLING-6011</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xep3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7856] option basename for @i18n is not documented</title>
                <link>https://issues.apache.org/jira/browse/SLING-7856</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using @i18n in HTL you can also use the option &apos;basename&apos;&lt;/p&gt;

&lt;p&gt;However this is not documented.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13180947">SLING-7856</key>
            <summary>option basename for @i18n is not documented</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fvisser">Feike Visser</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Aug 2018 11:00:08 +0000</created>
                <updated>Fri, 24 Aug 2018 11:00:08 +0000</updated>
                                            <version>Scripting HTL Testing 1.0.10-1.4.0</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xdzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7844] Format change in JSON date format due to SLING-7670</title>
                <link>https://issues.apache.org/jira/browse/SLING-7844</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7670&quot; title=&quot;Default JSON Get Servlet provide ISO-8601 formatted date&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7670&quot;&gt;&lt;del&gt;SLING-7670&lt;/del&gt;&lt;/a&gt; changes the default rendering of a date in JSON by default which is an incompatible change and potentially breaks clients.&lt;br/&gt;
The default of the servlet should generate the old format, the new format must require a config change.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13180389">SLING-7844</key>
            <summary>Format change in JSON date format due to SLING-7670</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jebailey">Jason E Bailey</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Aug 2018 06:33:06 +0000</created>
                <updated>Tue, 12 Jan 2021 23:56:02 +0000</updated>
                            <resolved>Wed, 22 Aug 2018 16:56:46 +0000</resolved>
                                    <version>Servlets Get 2.1.32</version>
                                    <fixVersion>Servlets Get 2.1.34</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16588819" author="jebailey" created="Wed, 22 Aug 2018 13:08:09 +0000"  >&lt;p&gt;This was discussed here &lt;a href=&quot;http://apache-sling.73963.n3.nabble.com/Discussion-Date-handling-inconsistencies-resend-td4082548.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-sling.73963.n3.nabble.com/Discussion-Date-handling-inconsistencies-resend-td4082548.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There is a configuration option in place right now, so if there is a need to change the default, it&apos;s a simple change. I stand by the original logic though that the format that was being used is a deprecated format and that, since it will need to eventually go away, changing the default now rather then later is appropriate.&lt;/p&gt;</comment>
                            <comment id="16588844" author="rombert" created="Wed, 22 Aug 2018 13:30:49 +0000"  >&lt;p&gt;I think Carsten&apos;s point was that upgrading to a new version of a bundle should be seamless. It&apos;s the trade-off we usually have to make - the new (and many times better) stuff is gated behind a configuration option so those that want it can activate it, but on the other hand no one gets broken when upgrading.&lt;/p&gt;</comment>
                            <comment id="16588863" author="jebailey" created="Wed, 22 Aug 2018 13:46:36 +0000"  >&lt;p&gt;Having spent years on the receiving side of these minor changes that breaks everything under the sun. I appreciate that thought. And yes, someone somewhere wrote a custom piece of code to parse that specific format to do something very specific and highly important. However on the other side of that, anyone coming to Sling or writing something new to access that legacy date string will have to write something custom, or in the case of a browser rely on the default failover handling once it fails to parse as an ISO8601.&lt;/p&gt;

&lt;p&gt;I&apos;m not against the changing of the default value, I just don&apos;t agree. If my disagreement prevents a change going in that others want, I&apos;ll change it to a frown.&lt;/p&gt;</comment>
                            <comment id="16588872" author="cziegeler" created="Wed, 22 Aug 2018 13:50:41 +0000"  >&lt;p&gt;The bundle is not a drop in replacement of a previous version anymore. We&apos;ve seen breakage of tests and application functionality just by updating to the latest release. Which is really unexpected.&lt;/p&gt;</comment>
                            <comment id="16588884" author="sseifert@pro-vision.de" created="Wed, 22 Aug 2018 13:58:51 +0000"  >&lt;p&gt;a compromise would be to switch back to the old behavior as default (fulfilling carstens requirement), but configuring it in the sling starter to the new behavior (fulfilling jasons requirement for users starting new with sling).&lt;/p&gt;</comment>
                            <comment id="16588895" author="bdelacretaz" created="Wed, 22 Aug 2018 14:05:09 +0000"  >&lt;p&gt;Earlier, Jason said:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;There is a configuration option in place right now, so if there is a need to change the default, it&apos;s a simple change&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So I think changing the default value of that configuration to &quot;legacy mode&quot; should fulfill our backward compatibility requirements? And maybe log an INFO message if that legacy mode is active, and document it at &lt;a href=&quot;https://sling.apache.org/documentation/bundles/rendering-content-default-get-servlets.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/rendering-content-default-get-servlets.html&lt;/a&gt; to give new users a good chance of finding that setting?&lt;/p&gt;

&lt;p&gt;IIUC that configuration is the DefaultGetServlet&apos;s &quot;ecmaSupport&quot; parameter, if that&apos;s correct I think a better label would be &quot;Legacy ECMA date format&quot; and description &quot;Enable legacy Sling ECMA format for dates&quot; to make things clearer.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Update: I see Stefan&apos;s comment in the meantime, great idea! But my proposal for more precise configuration parameter names stands.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-get/blob/master/src/main/java/org/apache/sling/servlets/get/impl/DefaultGetServlet.java#L132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-get/blob/master/src/main/java/org/apache/sling/servlets/get/impl/DefaultGetServlet.java#L132&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16589102" author="jebailey" created="Wed, 22 Aug 2018 16:36:58 +0000"  >&lt;p&gt;I&apos;m good. Is there a protocol for who does the fix? I can make the changes now.&lt;/p&gt;</comment>
                            <comment id="16589115" author="jebailey" created="Wed, 22 Aug 2018 16:56:46 +0000"  >&lt;p&gt;Updated wording and defaulted ECMA support to true for both the default GET servlet and the VersionInfo servlet.&lt;/p&gt;</comment>
                            <comment id="16589192" author="cziegeler" created="Wed, 22 Aug 2018 17:57:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; Thanks for the quick change. I changed the default in the get servlet to TRUE in rev dd8af0d&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13347381">SLING-10020</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xajz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7840] Image rendering broken on sling.apache.org</title>
                <link>https://issues.apache.org/jira/browse/SLING-7840</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While reviewing &lt;a href=&quot;https://github.com/apache/sling-site/pull/19&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/19&lt;/a&gt; we discovered that image links are rendered:&lt;/p&gt;

&lt;p&gt;1. always with the sling.apache.org domain ( so images added locally will not be considered )&lt;br/&gt;
1. with a wrong path, no longer appending the parents of the current page&lt;/p&gt;

&lt;p&gt;So the image links at both&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8820/documentation/development/ide-tooling.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8820/documentation/development/ide-tooling.html&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://sling.apache.org/documentation/development/ide-tooling.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/ide-tooling.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;are broken, being rendered as &lt;a href=&quot;http://sling.apache.org/ide-tooling/new-server.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/ide-tooling/new-server.png&lt;/a&gt;, whereas they should be&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8820/documentation/development/ide-tooling/new-server.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8820/documentation/development/ide-tooling/new-server.png&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://sling.apache.org/documentation/development/ide-tooling/new-server.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/ide-tooling/new-server.png&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13179958">SLING-7840</key>
            <summary>Image rendering broken on sling.apache.org</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Aug 2018 13:17:59 +0000</created>
                <updated>Tue, 18 Dec 2018 09:53:45 +0000</updated>
                            <resolved>Sun, 26 Aug 2018 12:07:45 +0000</resolved>
                                                                    <component>Site</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16585916" author="rombert" created="Mon, 20 Aug 2018 13:18:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - maybe related to your jbake version updgrades?&lt;/p&gt;</comment>
                            <comment id="16586001" author="bdelacretaz" created="Mon, 20 Aug 2018 14:22:51 +0000"  >&lt;p&gt;Prefixing relative image paths with ./ fixes this for me, &lt;a href=&quot;https://github.com/apache/sling-site/pull/20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/20&lt;/a&gt; , but it looks like more pages are affected.&lt;/p&gt;

&lt;p&gt;I saved a diff of the website generation between the old and new jbake, attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7776&quot; title=&quot;Upgrade to latest jbake version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7776&quot;&gt;&lt;del&gt;SLING-7776&lt;/del&gt;&lt;/a&gt; -I attach a quick analysis of those diffs, broken-images.txt where we missed the &quot;img src&quot; changes that cause this.&lt;/p&gt;

&lt;p&gt;It looks like that&apos;s a dozen pages to fix, by prefixing relative image paths with ./ so we might just do that manually, or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; maybe you have a different suggestion, a jbake option maybe?&lt;/p&gt;</comment>
                            <comment id="16586169" author="kwin" created="Mon, 20 Aug 2018 16:21:52 +0000"  >&lt;p&gt;It seems we are suffering from &lt;a href=&quot;https://github.com/jbake-org/jbake/issues/455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jbake-org/jbake/issues/455&lt;/a&gt; which is supposed to be fixed with the upcoming 2.6.2.&lt;/p&gt;</comment>
                            <comment id="16587177" author="rombert" created="Tue, 21 Aug 2018 08:50:25 +0000"  >&lt;p&gt;Good catch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Should we maybe revert to the old jbake version until 2.6.2 get released? The &lt;span class=&quot;error&quot;&gt;&amp;#91;2.6.2 release board&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/jbake-org/jbake/projects/5#card-12088358&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jbake-org/jbake/projects/5#card-12088358&lt;/a&gt;) shows 7 issues still in progress and 1 to-do, so I would not expect a release in the coming days.&lt;/p&gt;</comment>
                            <comment id="16592872" author="kwin" created="Sun, 26 Aug 2018 11:49:48 +0000"  >&lt;p&gt;yes, I reverted to JBake 2.5.1 with &lt;a href=&quot;https://github.com/apache/sling-site/commit/2e1fce78e1f88e62e2d0cf662f72e2ecacf7079d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/commit/2e1fce78e1f88e62e2d0cf662f72e2ecacf7079d&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16593334" author="rombert" created="Mon, 27 Aug 2018 08:41:04 +0000"  >&lt;p&gt;All good now, thanks Konrad.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13171691">SLING-7776</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12936276" name="broken-images.txt" size="29690" author="bdelacretaz" created="Mon, 20 Aug 2018 14:19:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x7x3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7838] Bundle resource overrides listChildren</title>
                <link>https://issues.apache.org/jira/browse/SLING-7838</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;BundleResource overrides listChildren which it shouldn&apos;t do as this is bypassing any additional logic from the resource resolver like resource decoration etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13179898">SLING-7838</key>
            <summary>Bundle resource overrides listChildren</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Aug 2018 08:34:46 +0000</created>
                <updated>Mon, 27 Aug 2018 13:18:16 +0000</updated>
                            <resolved>Tue, 21 Aug 2018 14:31:57 +0000</resolved>
                                    <version>Bundle Resource Provider 2.3.0</version>
                                    <fixVersion>Bundle Resource Provider 2.3.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16587506" author="cziegeler" created="Tue, 21 Aug 2018 14:31:57 +0000"  >&lt;p&gt;Fixed in rev 6352e4b4c9c7256084f495341b3c964a5060d704&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13153648">SLING-7593</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x7jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7837] Revert SLING-7593 changes for the Sling API bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-7837</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I had to revert the changes to the API bundle (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/commit/88b2222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-api commit 88b2222&lt;/a&gt;&lt;br/&gt;
) as they caused a regression - see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7833&quot; title=&quot;BundleContentTest.testBundleContentParentFromMultipleBundles fails: Expected sling.js in the /system folder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7833&quot;&gt;&lt;del&gt;SLING-7833&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;For tracking purposes, as &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7593&quot; title=&quot;ResourceTraversor doesn&amp;#39;t support ResourceDecorator pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7593&quot;&gt;&lt;del&gt;SLING-7593&lt;/del&gt;&lt;/a&gt; is closed, I created this new issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13179896">SLING-7837</key>
            <summary>Revert SLING-7593 changes for the Sling API bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Aug 2018 08:25:00 +0000</created>
                <updated>Mon, 27 Aug 2018 13:40:33 +0000</updated>
                            <resolved>Mon, 20 Aug 2018 08:25:12 +0000</resolved>
                                                    <fixVersion>API 2.18.4</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16587494" author="cziegeler" created="Tue, 21 Aug 2018 14:26:44 +0000"  >&lt;p&gt;After looking into this issue again, I think the implementation as it is now is correct as it correctly calls into the resource resolver to list the children&lt;/p&gt;</comment>
                            <comment id="16593625" author="kwin" created="Mon, 27 Aug 2018 13:09:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; As this issue is about reverting and the original issue  &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7593&quot; title=&quot;ResourceTraversor doesn&amp;#39;t support ResourceDecorator pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7593&quot;&gt;&lt;del&gt;SLING-7593&lt;/del&gt;&lt;/a&gt; was not reopened we definitely now lack one open ticket for the issue originally mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7593&quot; title=&quot;ResourceTraversor doesn&amp;#39;t support ResourceDecorator pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7593&quot;&gt;&lt;del&gt;SLING-7593&lt;/del&gt;&lt;/a&gt;. I think reopening &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7593&quot; title=&quot;ResourceTraversor doesn&amp;#39;t support ResourceDecorator pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7593&quot;&gt;&lt;del&gt;SLING-7593&lt;/del&gt;&lt;/a&gt; is fine, but I can also live with new (properly linked) ticket.&lt;/p&gt;</comment>
                            <comment id="16593628" author="rombert" created="Mon, 27 Aug 2018 13:14:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - I can&apos;t reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7593&quot; title=&quot;ResourceTraversor doesn&amp;#39;t support ResourceDecorator pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7593&quot;&gt;&lt;del&gt;SLING-7593&lt;/del&gt;&lt;/a&gt; and I asked to submitted to re-create it if still important.&lt;/p&gt;</comment>
                            <comment id="16593664" author="cziegeler" created="Mon, 27 Aug 2018 13:40:33 +0000"  >&lt;p&gt;There should be no need to reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7593&quot; title=&quot;ResourceTraversor doesn&amp;#39;t support ResourceDecorator pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7593&quot;&gt;&lt;del&gt;SLING-7593&lt;/del&gt;&lt;/a&gt;. As mentioned the implementation as it is &lt;b&gt;now&lt;/b&gt; is correct.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13153648">SLING-7593</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x7jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7835] PrivilegesInfo#getEffectiveAccessControlEntries returns incorrect information</title>
                <link>https://issues.apache.org/jira/browse/SLING-7835</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The PrivilegesInfo#getEffectiveAccessControlEntries only appears to reflect the permissions on lowest node in the requested hierarchy that has an ACL, rather than aggregating all entries.&lt;/p&gt;

&lt;p&gt;A similar problem was corrected for the Effective ACL Servlet with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2600&quot; title=&quot;Effective ACL servlet returns incorrect information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2600&quot;&gt;&lt;del&gt;SLING-2600&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The same correction needs to also be done in the PrivilegesInfo class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13179833">SLING-7835</key>
            <summary>PrivilegesInfo#getEffectiveAccessControlEntries returns incorrect information</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Sun, 19 Aug 2018 20:18:57 +0000</created>
                <updated>Fri, 20 Sep 2019 11:34:39 +0000</updated>
                            <resolved>Sun, 19 Aug 2018 21:16:14 +0000</resolved>
                                    <version>JCR Jackrabbit Access Manager 3.0.0</version>
                    <version>Launchpad Integration Tests 1.0.6</version>
                                    <fixVersion>JCR Jackrabbit Access Manager 3.0.2</fixVersion>
                    <fixVersion>Launchpad Integration Tests 1.0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16585273" author="enorman" created="Sun, 19 Aug 2018 21:16:14 +0000"  >&lt;p&gt;fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x75b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7833] BundleContentTest.testBundleContentParentFromMultipleBundles fails: Expected sling.js in the /system folder</title>
                <link>https://issues.apache.org/jira/browse/SLING-7833</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This test consistently fails locally and on Jenkins:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;junit.framework.AssertionFailedError: Expected sling.js in the /system folder
	at org.apache.sling.launchpad.webapp.integrationtest.BundleContentTest.testBundleContentParentFromMultipleBundles(BundleContentTest.java:54)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13179537">SLING-7833</key>
            <summary>BundleContentTest.testBundleContentParentFromMultipleBundles fails: Expected sling.js in the /system folder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Fri, 17 Aug 2018 08:35:57 +0000</created>
                <updated>Mon, 27 Aug 2018 12:33:47 +0000</updated>
                            <resolved>Fri, 17 Aug 2018 15:55:37 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.6.6</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16584077" author="rombert" created="Fri, 17 Aug 2018 15:33:31 +0000"  >&lt;p&gt;Reverting the updates to the resourceresolver and api bundles fixes the test - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter/commit/d8a2076&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-starter commit d8a2076&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16584114" author="rombert" created="Fri, 17 Aug 2018 15:55:37 +0000"  >&lt;p&gt;Reverted changed to API bundle so that&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;test passes now (older bundles)&lt;/li&gt;
	&lt;li&gt;test will pass with the next release of the API and ResourceResolver bundles&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16584293" author="jebailey" created="Fri, 17 Aug 2018 19:11:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; any idea why that particular change caused the regression?&lt;/p&gt;</comment>
                            <comment id="16584358" author="rombert" created="Fri, 17 Aug 2018 20:38:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; - not really, it was more of an educated guess.&lt;/p&gt;</comment>
                            <comment id="16585129" author="cziegeler" created="Sun, 19 Aug 2018 11:45:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I think this is an indication of a wrongly implemented resource provider. The calls to a resource to list children and to the resource resolver to list children must return the exact same resources.&lt;/p&gt;</comment>
                            <comment id="16585610" author="rombert" created="Mon, 20 Aug 2018 08:23:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - that may very well be the case. I was for that specific moment focused on removing the regression to make sure the release can go through.&lt;/p&gt;</comment>
                            <comment id="16587498" author="cziegeler" created="Tue, 21 Aug 2018 14:28:21 +0000"  >&lt;p&gt;After some investigation, I found that &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7838&quot; title=&quot;Bundle resource overrides listChildren&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7838&quot;&gt;&lt;del&gt;SLING-7838&lt;/del&gt;&lt;/a&gt; is actually the problem&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13153648">SLING-7593</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x5br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7832] ResourceResolverProxyTest fails: write(param) is only valid in arrays</title>
                <link>https://issues.apache.org/jira/browse/SLING-7832</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This test consistently fails locally and on Jenkins:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;javax.json.stream.JsonGenerationException: write(param) is only valid in arrays
	at org.apache.sling.launchpad.webapp.integrationtest.ResourceResolverProxyTest.runWriteableResourcesTest(ResourceResolverProxyTest.java:26)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13179535">SLING-7832</key>
            <summary>ResourceResolverProxyTest fails: write(param) is only valid in arrays</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Aug 2018 08:34:16 +0000</created>
                <updated>Tue, 23 Oct 2018 09:21:41 +0000</updated>
                            <resolved>Fri, 17 Aug 2018 14:12:59 +0000</resolved>
                                                    <fixVersion>Launchpad Integration Tests 1.0.8</fixVersion>
                    <fixVersion>Launchpad Testing Services 2.0.16</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16583691" author="rombert" created="Fri, 17 Aug 2018 09:25:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; - maybe you can shed some light into this? It seems that the error is coming from the {{org.apache.slling.junit.&lt;/p&gt;
{core,remote}
&lt;p&gt;}} bundles but I can&apos;t find anything related to that in the error log. Do you have a better idea about where to start looking or how to pinpoint the exact location?&lt;/p&gt;</comment>
                            <comment id="16583769" author="bdelacretaz" created="Fri, 17 Aug 2018 10:50:36 +0000"  >&lt;p&gt;That test was using the old proxied remote testing mechanism which is not convenient to troubleshoot, I have converted it into a teleported test in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7834&quot; title=&quot;Transform ResourceResolverProxyTest into a teleported test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7834&quot;&gt;&lt;del&gt;SLING-7834&lt;/del&gt;&lt;/a&gt; , the test is now called &lt;tt&gt;ResourceResolverGeneralTest&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;If running the test several times against the same Sling instance, it only fails the first time:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ResourceResolverGeneralTest.testResolveRemovedResourceAlias:1203 
  expected:&amp;lt;sling:[OrderedFolder]&amp;gt; but was:&amp;lt;sling:[redirect]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll have a look at that in a few hours, or let me know if you beat me to it!&lt;/p&gt;</comment>
                            <comment id="16583833" author="rombert" created="Fri, 17 Aug 2018 12:22:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; - actually the test passes for me, maybe you have some changes in your local instance that cause this?&lt;/p&gt;</comment>
                            <comment id="16583843" author="bdelacretaz" created="Fri, 17 Aug 2018 12:28:41 +0000"  >&lt;p&gt;You mean that it passes against a fresh Sling instance that you just started? It doesn&apos;t here, I&apos;ll investigate further.&lt;/p&gt;</comment>
                            <comment id="16583852" author="rombert" created="Fri, 17 Aug 2018 12:40:26 +0000"  >&lt;p&gt;I am running &lt;tt&gt;mvn clean verify&lt;/tt&gt; in the integration-testing project, the test does not run on an OOTB Sling starter since some required bundles are missing.&lt;/p&gt;</comment>
                            <comment id="16583956" author="rombert" created="Fri, 17 Aug 2018 13:42:14 +0000"  >&lt;p&gt;I think that this test fails only when run standalone, and runs just fine with the whole test suite, which hints on it relying on content written by previous tests.&lt;/p&gt;</comment>
                            <comment id="16583961" author="bdelacretaz" created="Fri, 17 Aug 2018 13:53:05 +0000"  >&lt;p&gt;Found the weirdness, the test uses the &lt;tt&gt;/content&lt;/tt&gt; node and in my test setup was bothered by pre-existing content there, and deleted that node after the test, meaning that further tests ran fine.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;/content&lt;/tt&gt; node is now moved aside and restored &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, which should fix this issue.&lt;/p&gt;

&lt;p&gt;Let&apos;s wait for the Jenkins results to confirm if we can mark this resolved.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/48c0e963b781974a6bf2613e97701f5571bc6953&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/48c0e963b781974a6bf2613e97701f5571bc6953&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16583979" author="bdelacretaz" created="Fri, 17 Aug 2018 14:12:59 +0000"  >&lt;p&gt;Jenkins build passed, there&apos;s one failure but from a different unrelated test, &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-org-apache-sling-launchpad-testing-1.8/178/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-org-apache-sling-launchpad-testing-1.8/178/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Marking this issue resolved.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13179556">SLING-7834</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x5bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7831] support injecting custom/alternate PostResponse implementations for the servlets in the usermanager and accessmanager bundles</title>
                <link>https://issues.apache.org/jira/browse/SLING-7831</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2223&quot; title=&quot;add an SPI interface for injecting custom/alternate PostResponse implementations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2223&quot;&gt;&lt;del&gt;SLING-2223&lt;/del&gt;&lt;/a&gt; added support for custom PostResponse implementations in the main sling post servlet, but the same changes were not done for the similar&#160;implementations from these other locations:&lt;/p&gt;

&lt;p&gt;1.&#160;AbstractPostServlet#createHtmlResponse in the org.apache.sling.jcr.jackrabbit.usermanager&#160;bundle&lt;/p&gt;

&lt;p&gt;2. AbstractAccessPostServlet#createHtmlResponse in the org.apache.sling.jcr.jackrabbit.accessmanager bundle.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Adding the same support in those additional locations&#160;should make it possible for the developer to provide more user friendly UI when something goes wrong in usermanager or accessmanager POST calls.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13179438">SLING-7831</key>
            <summary>support injecting custom/alternate PostResponse implementations for the servlets in the usermanager and accessmanager bundles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enorman">Eric Norman</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Aug 2018 19:11:23 +0000</created>
                <updated>Fri, 20 Sep 2019 11:34:39 +0000</updated>
                            <resolved>Sun, 19 Aug 2018 21:12:29 +0000</resolved>
                                    <version>JCR Jackrabbit User Manager 2.2.6</version>
                    <version>JCR Jackrabbit Access Manager 3.0.0</version>
                    <version>Launchpad Integration Tests 1.0.6</version>
                                    <fixVersion>JCR Jackrabbit User Manager 2.2.8</fixVersion>
                    <fixVersion>JCR Jackrabbit Access Manager 3.0.2</fixVersion>
                    <fixVersion>Launchpad Integration Tests 1.0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16585272" author="enorman" created="Sun, 19 Aug 2018 21:12:29 +0000"  >&lt;p&gt;fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x4pr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7828] Generating adapter metadata fails when using Java 8 features: invalid constant type: 18</title>
                <link>https://issues.apache.org/jira/browse/SLING-7828</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When building a project that uses Java 8 features ( I used lambdas ) the &lt;tt&gt;maven-sling-plugin&lt;/tt&gt; fails to generate the adapter metadata:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failed to execute goal org.apache.sling:maven-sling-plugin:2.3.6:generate-adapter-metadata (generate-adapter-metadata) on project org.apache.sling.resourceresolver: Unable to generate metadata: invalid constant type: 18 -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This stems from an using an old version of the Javassist library.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13178886">SLING-7828</key>
            <summary>Generating adapter metadata fails when using Java 8 features: invalid constant type: 18</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Aug 2018 15:48:39 +0000</created>
                <updated>Fri, 17 Aug 2018 16:44:43 +0000</updated>
                            <resolved>Tue, 14 Aug 2018 15:49:59 +0000</resolved>
                                                    <fixVersion>Maven Sling Plugin 2.3.8</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16579984" author="rombert" created="Tue, 14 Aug 2018 15:49:59 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-maven-sling-plugin/commit/ca7dd5d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-maven-sling-plugin commit ca7dd5d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x1bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7820] Scheduler&apos;s WhiteboardHandler impl not in sync with Scheduler&apos;s Javadoc</title>
                <link>https://issues.apache.org/jira/browse/SLING-7820</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-scheduler/blob/d954255a750113c024a9323ed0d5d85d1ee69a5a/src/main/java/org/apache/sling/commons/scheduler/Scheduler.java#L26-L48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Sling Commons Scheduler&apos;s Javadoc&lt;/a&gt; asserts that:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt; A job can be scheduled either by creating a &lt;tt&gt;ScheduleOptions&lt;/tt&gt; instance through one of the scheduler methods and then calling &lt;tt&gt;schedule(Object, ScheduleOptions)&lt;/tt&gt; or by using the whiteboard pattern and registering a Runnable service with either the &lt;tt&gt;PROPERTY_SCHEDULER_EXPRESSION&lt;/tt&gt; or &lt;tt&gt;PROPERTY_SCHEDULER_PERIOD&lt;/tt&gt; property. &lt;b&gt;If both properties are specified, only &lt;tt&gt;PROPERTY_SCHEDULER_PERIOD&lt;/tt&gt; is considered for scheduling.&lt;/b&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The part in &lt;b&gt;bold&lt;/b&gt; above suggests that &lt;tt&gt;PROPERTY_SCHEDULER_PERIOD&lt;/tt&gt; has a higher precedence than &lt;tt&gt;PROPERTY_SCHEDULER_EXPRESSION&lt;/tt&gt; in case both are present for a component.&lt;br/&gt;
However, the implementation in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-scheduler/blame/d954255a750113c024a9323ed0d5d85d1ee69a5a/src/main/java/org/apache/sling/commons/scheduler/impl/WhiteboardHandler.java#L189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;WhiteboardHandler#register&lt;/tt&gt;&lt;/a&gt; does the opposite. It gives &lt;tt&gt;PROPERTY_SCHEDULER_EXPRESSION&lt;/tt&gt; a higher precedence by evaluating it first.&lt;/p&gt;

&lt;p&gt;Either the Javadoc, or the implementation must be modified to keep both in sync.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13178106">SLING-7820</key>
            <summary>Scheduler&apos;s WhiteboardHandler impl not in sync with Scheduler&apos;s Javadoc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="ashishc">Ashish Chopra</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Aug 2018 19:14:30 +0000</created>
                <updated>Tue, 6 Oct 2020 08:14:24 +0000</updated>
                            <resolved>Mon, 14 Sep 2020 11:03:20 +0000</resolved>
                                    <version>Commons Scheduler 2.7.2</version>
                                    <fixVersion>Commons Scheduler 2.7.12</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17195380" author="karlpauls" created="Mon, 14 Sep 2020 11:03:21 +0000"  >&lt;p&gt;Fixed the javadoc in: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-scheduler/commit/edc969dcc2cb6c0f091140c5d7ac29e57047d746&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-scheduler/commit/edc969dcc2cb6c0f091140c5d7ac29e57047d746&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashishc&quot; class=&quot;user-hover&quot; rel=&quot;ashishc&quot;&gt;ashishc&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wwif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7818] CMS - Core Packages Exposed</title>
                <link>https://issues.apache.org/jira/browse/SLING-7818</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The CMS Core bundle exposes a lot of internal code which shouldn&apos;t be exposed including the servlets, filters, rewriter and operations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13178016">SLING-7818</key>
            <summary>CMS - Core Packages Exposed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Aug 2018 14:51:22 +0000</created>
                <updated>Mon, 24 Sep 2018 16:52:48 +0000</updated>
                            <resolved>Thu, 9 Aug 2018 14:52:03 +0000</resolved>
                                                    <fixVersion>App CMS 0.10.0</fixVersion>
                                    <component>App CMS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16574944" author="klcodanr" created="Thu, 9 Aug 2018 14:52:03 +0000"  >&lt;p&gt;Fixed in the following commits:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/f2fa3075c8903d12f994a4e142003b469cac1109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/f2fa3075c8903d12f994a4e142003b469cac1109&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/e2ac7c93c7079e6ac9c6364e7a97da68226ae91a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/e2ac7c93c7079e6ac9c6364e7a97da68226ae91a&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wvyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7816] The GetAclServlet and GetEffectiveAclServlet components should be only mapped to the json extension</title>
                <link>https://issues.apache.org/jira/browse/SLING-7816</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The GetAclServlet and GetEffectiveAclServlet are missing the &quot;sling.servlet.extensions=json&quot; property which means that those servlets may get unintentionally mapped to other (non-json) file extensions.&lt;/p&gt;

&lt;p&gt;This defect can prevent the developer from providing a custom libs/sling/servlet/default/acl.html script to provide an HTML view of the acl of a JCR node.&lt;/p&gt;

&lt;p&gt;For example, without the missing &quot;sling.servlet.extensions=json&quot; property, a request to /node.acl.html may return the json response&#160;instead of the expected response from the acl.html script.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13177748">SLING-7816</key>
            <summary>The GetAclServlet and GetEffectiveAclServlet components should be only mapped to the json extension</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="enorman">Eric Norman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Aug 2018 17:49:56 +0000</created>
                <updated>Fri, 20 Sep 2019 11:34:36 +0000</updated>
                            <resolved>Wed, 8 Aug 2018 18:05:13 +0000</resolved>
                                    <version>JCR Jackrabbit Access Manager 3.0.0</version>
                                    <fixVersion>JCR Jackrabbit Access Manager 3.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16573613" author="enorman" created="Wed, 8 Aug 2018 18:05:14 +0000"  >&lt;p&gt;Resolved with:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-accessmanager/commit/dd9f3e19d8060608c2e28f3bb83d699d4a170305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-jackrabbit-accessmanager/commit/dd9f3e19d8060608c2e28f3bb83d699d4a170305&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wuav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7814] URLs with JCR namespaces can get double encoded by XSSAPI.getValidHref</title>
                <link>https://issues.apache.org/jira/browse/SLING-7814</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following URLs, when passed to &lt;tt&gt;org.apache.sling.xss.XSSAPI#getValidHref&lt;/tt&gt;, get double encoded:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;/content/page with spaces/jcr:content&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;/content/page%20with%20spaces/jcr:content&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The bug seems to be in the &lt;tt&gt;org.apache.sling.xss.impl.XSSAPIImpl#mangleNamespaces&lt;/tt&gt; method.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13177629">SLING-7814</key>
            <summary>URLs with JCR namespaces can get double encoded by XSSAPI.getValidHref</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Aug 2018 09:29:41 +0000</created>
                <updated>Thu, 24 Jan 2019 13:29:27 +0000</updated>
                            <resolved>Wed, 8 Aug 2018 09:35:52 +0000</resolved>
                                    <version>XSS Protection API 2.0.8</version>
                                    <fixVersion>XSS Protection API 2.0.14</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16572931" author="radu.cotescu" created="Wed, 8 Aug 2018 09:35:52 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/714ae03&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 714ae03&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13166372">SLING-7741</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wtkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7811] NPE when repository is starting up due to repository manager shutdown</title>
                <link>https://issues.apache.org/jira/browse/SLING-7811</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the latest Sling Starter, the following NPE occurs in the logs. It seems to be harmless, nevertheless we should fix it:&lt;/p&gt;

&lt;p&gt;For now I assigned it to both, JCR Base and Oak Server, as it&apos;s unclear which one it is. Interestingly we&apos;ve released Oak Server 1.2.0 but are not using it in the starter.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;06.08.2018 15:45:18.396 *ERROR* [Apache Sling Repository Startup Thread] org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager start: Uncaught Throwable trying to access Repository, calling stopRepository()
java.lang.NullPointerException: null
        at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:192) [com.google.guava:15.0.0]
        at org.apache.jackrabbit.oak.jcr.Jcr.with(Jcr.java:296) [org.apache.jackrabbit.oak-jcr:1.6.8]
        at org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager.acquireRepository(OakSlingRepositoryManager.java:161) [org.apache.sling.jcr.oak.server:1.1.4]
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.initializeAndRegisterRepositoryService(AbstractSlingRepositoryManager.java:471) [org.apache.sling.jcr.base:3.0.4]
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.access$300(AbstractSlingRepositoryManager.java:85) [org.apache.sling.jcr.base:3.0.4]
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$4.run(AbstractSlingRepositoryManager.java:455) [org.apache.sling.jcr.base:3.0.4]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The stack trace points to a null workspace name ( see &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.8/oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/Jcr.java#L296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.8/oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/Jcr.java#L296&lt;/a&gt; ).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13177150">SLING-7811</key>
            <summary>NPE when repository is starting up due to repository manager shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Aug 2018 16:00:11 +0000</created>
                <updated>Mon, 10 Aug 2020 11:35:42 +0000</updated>
                            <resolved>Tue, 4 Aug 2020 14:10:10 +0000</resolved>
                                    <version>JCR Base 3.0.4</version>
                    <version>JCR Oak Server 1.1.4</version>
                                    <fixVersion>JCR Base 3.1.4</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16570449" author="rombert" created="Mon, 6 Aug 2018 16:38:56 +0000"  >&lt;p&gt;AFAIR Oak Server 1.2.0 supports Oak 1.8+, and I&apos;m waiting for the JCR Registration release to update to Oak Server 1.2.0 in the starter.&lt;/p&gt;</comment>
                            <comment id="16570508" author="rombert" created="Mon, 6 Aug 2018 17:13:00 +0000"  >&lt;p&gt;What happens is that the AbstractSlingRepositoryManager starts up, quickly stops, and then starts up again. Since the repository initialisation is done on a separate thread, that thread will get nulled out values of various configuration settings.&lt;/p&gt;

&lt;p&gt;The problems are twofold:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;we should optimise startup and make sure that we don&apos;t restart the repository&lt;/li&gt;
	&lt;li&gt;the repository restart sequence should be robust enough to not generate exceptions&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16571431" author="rombert" created="Tue, 7 Aug 2018 10:37:27 +0000"  >&lt;p&gt;I&apos;m a bit stuck here, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;, maybe you have a better idea. With the root cause identified in my comment above, I reviewed the &lt;tt&gt;AbstractSlingRepositoryManager&lt;/tt&gt; and wanted to simplify things a bit (maybe a bad idea &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;/p&gt;

&lt;p&gt;The first suspect was the async initialisation of the repository, from &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-base/blob/org.apache.sling.jcr.base-3.0.4/src/main/java/org/apache/sling/jcr/base/AbstractSlingRepositoryManager.java#L450-L460&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-base/blob/org.apache.sling.jcr.base-3.0.4/src/main/java/org/apache/sling/jcr/base/AbstractSlingRepositoryManager.java#L450-L460&lt;/a&gt; :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// start repository asynchronously to allow LoginAdminWhitelist to become available
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// NOTE: making &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; conditional allows tests to register a mock whitelist before
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// activating the RepositoryManager, so they don&apos;t need to deal with async startup
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Repository Startup &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&quot;&lt;/span&gt;) {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                    waitForWhitelist.await();
                    initializeAndRegisterRepositoryService();
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Interrupted &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; LoginAdminWhitelist&quot;&lt;/span&gt;, e);
                }
            }
}.start();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;waitForWhiteList.await()&lt;/tt&gt; call waits for &lt;tt&gt;waitForWhiteList.countDown()&lt;/tt&gt; to be invoked in a &lt;tt&gt;ServiceTracker&lt;/tt&gt;, see &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-base/blob/org.apache.sling.jcr.base-3.0.4/src/main/java/org/apache/sling/jcr/base/AbstractSlingRepositoryManager.java#L431-L445&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-base/blob/org.apache.sling.jcr.base-3.0.4/src/main/java/org/apache/sling/jcr/base/AbstractSlingRepositoryManager.java#L431-L445&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// If allowLoginAdministrativeForBundle is overridden we assume we don&apos;t need
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// a LoginAdminWhitelist service - that&apos;s the &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the derived class
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; its own strategy and the LoginAdminWhitelist &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; is
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// not exported by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; bundle anyway, so cannot be implemented differently.
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; enableWhitelist = !isAllowLoginAdministrativeForBundleOverridden();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CountDownLatch waitForWhitelist = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CountDownLatch(enableWhitelist ? 1 : 0);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (enableWhitelist) {
            whitelistTracker = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServiceTracker&amp;lt;LoginAdminWhitelist, LoginAdminWhitelist&amp;gt;(bundleContext, LoginAdminWhitelist.class, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                @Override
                &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; LoginAdminWhitelist addingService(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ServiceReference&amp;lt;LoginAdminWhitelist&amp;gt; reference) {
                    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.addingService(reference);
                    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
                        waitForWhitelist.countDown();
                    }
                }
            };
            whitelistTracker.open();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;IMO there is no need to start the repository in an async manner as the &lt;tt&gt;ServiceTracker&lt;/tt&gt; will be invoked on a different thread. Making the removing the thread and starting the repository in the same thread had the nasty side effect to no bundle being considered as whitelisted for login administrative.&lt;/p&gt;

&lt;p&gt;I debugged this and apparently the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; component is registered well ahead and receives no &lt;tt&gt;LoginAdminWhitelist.fragment&lt;/tt&gt; configs until later on.&lt;/p&gt;

&lt;p&gt;I tried to configure the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; component to wait for a number of references to come up before being registered:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  org.apache.sling.jcr.base.internal.LoginAdminWhitelist
    WhitelistFragment.cardinality.minimum=&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But unfortunately that configuration is also applied too late and the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; service is registered too early.&lt;/p&gt;

&lt;p&gt;Any ideas on how to approach this are very much welcome.&lt;/p&gt;</comment>
                            <comment id="16571447" author="cziegeler" created="Tue, 7 Aug 2018 10:56:43 +0000"  >&lt;p&gt;The service tracker might be invoked on the same thread if such a service is already registered - and I assume that makes the difference in timing which makes it work in the end.&lt;br/&gt;
But it looks like this is really fragile, I would think that the LoginAdminWhitelist should require a configuration and then we can use the minimum cardinality feature that it waits for that number of references. I&apos;m not 100% sure but maybe you have to also use a lower case &quot;w&quot; for whitelistFragment&lt;/p&gt;</comment>
                            <comment id="16571454" author="rombert" created="Tue, 7 Aug 2018 11:00:02 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - I&apos;ll try making the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; require a configuration and see where that takes us. BTW, I also started with a lowercase property name, but surprisingly the reference name is with a capital &apos;W&apos;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;scr:component xmlns:scr=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.osgi.org/xmlns/scr/v1.3.0&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.base.internal.LoginAdminWhitelist&quot;&lt;/span&gt; activate=&lt;span class=&quot;code-quote&quot;&gt;&quot;configure&quot;&lt;/span&gt; modified=&lt;span class=&quot;code-quote&quot;&gt;&quot;configure&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;  &amp;lt;implementation class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.base.internal.LoginAdminWhitelist&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;service&amp;gt;
    &amp;lt;provide &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.base.internal.LoginAdminWhitelist&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/service&amp;gt;
  &amp;lt;reference name=&lt;span class=&quot;code-quote&quot;&gt;&quot;WhitelistFragment&quot;&lt;/span&gt; cardinality=&lt;span class=&quot;code-quote&quot;&gt;&quot;0..n&quot;&lt;/span&gt; policy=&lt;span class=&quot;code-quote&quot;&gt;&quot;dynamic&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.base.internal.WhitelistFragment&quot;&lt;/span&gt; bind=&lt;span class=&quot;code-quote&quot;&gt;&quot;bindWhitelistFragment&quot;&lt;/span&gt; unbind=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbindWhitelistFragment&quot;&lt;/span&gt; policy-option=&lt;span class=&quot;code-quote&quot;&gt;&quot;greedy&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;whitelist.bypass&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;service.vendor&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;The Apache Software Foundation&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;service.description&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Login Admin Whitelist&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;whitelist.bundles.regexp&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&quot;&lt;/span&gt; value=&quot;&quot;/&amp;gt;
&amp;lt;/scr:component&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16571774" author="rombert" created="Tue, 7 Aug 2018 14:45:30 +0000"  >&lt;p&gt;Making the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; require a configuration has the nice effect of locking up the whole initialisation process, which is I guess correct, but suboptimal &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;My understanding is that the following happens:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the configadmin bundle starts processing configurations and configuring components&lt;/li&gt;
	&lt;li&gt;the OakSlingRepositoryManager component is configured
	&lt;ul&gt;
		&lt;li&gt;in the activate method, it calls &lt;tt&gt;AbstractSlingRepositoryManager#start&lt;/tt&gt;&lt;/li&gt;
		&lt;li&gt;in this method, we wait for the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; service&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;since that component needs a configuration &lt;b&gt;and&lt;/b&gt; we&apos;re blocking in the thread that configures component, we&apos;re effectively in a deadlock&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I found 2 solutions that fix startup, but I don&apos;t think any is optimal&lt;/p&gt;
&lt;h1&gt;&lt;a name=&quot;Teachthe%7B%7BAbstractSlingRepositoryManager%7D%7Dtowaitsmarterfortheloginadminwhitelist&quot;&gt;&lt;/a&gt;Teach the &lt;tt&gt;AbstractSlingRepositoryManager&lt;/tt&gt; to wait smarter for the login admin whitelist&lt;/h1&gt;

&lt;p&gt;I added a stricter way of waiting for the whitelist service, still in an async thread. I am now waiting for a configurable number of &lt;tt&gt;WhitelistFragment&lt;/tt&gt; services and only then looking for the &lt;tt&gt;LoginWhitelistComponent&lt;/tt&gt;. That, coupled with a proper shutdown handling of the init thread leads to a nicer (subjectively speaking) log entry:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;07.08.2018 15:23:30.219 *INFO* [Apache Sling Repository Startup Thread #1] org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager Interrupted while waiting for the LoginAdminWhitelist service, cancelling initialisation
java.lang.InterruptedException: null
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:998)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
        at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:231)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$ServiceTrackerBarrier.await(AbstractSlingRepositoryManager.java:700) [org.apache.sling.jcr.base:3.0.5.SNAPSHOT]
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$3.run(AbstractSlingRepositoryManager.java:451) [org.apache.sling.jcr.base:3.0.5.SNAPSHOT]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Pros&lt;/b&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;fixes the error log&lt;/li&gt;
	&lt;li&gt;fix self-contained in the jcr.base bundle&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Cons&lt;/b&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;too much knowledge about the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; baked into the &lt;tt&gt;AbstractSlingRepositoryManager&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;usually the repository start fails once (interrupted) and then works&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;&lt;a name=&quot;Handletheextrarequirementusingdeclarativeservices&quot;&gt;&lt;/a&gt;Handle the extra requirement using declarative services&lt;/h1&gt;

&lt;p&gt;I tried making the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; a dependency of the &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt;, but since it&apos;s an internal class I can&apos;t depend on it from the &lt;tt&gt;oak-server&lt;/tt&gt; bundle.&lt;/p&gt;

&lt;p&gt;I convinced the &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt; to wait for the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; by adding a &lt;tt&gt;RepositoryRequirement&lt;/tt&gt; marker interface to &lt;tt&gt;jcr.base&lt;/tt&gt; and registering the login admin component under that service as well. Then, from the &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt; I added a dependency to 0..n &lt;tt&gt;RepositoryRequirement&lt;/tt&gt; instances, and tweaked the cardinality requirements as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  # SLING-7811 - wait until at all admin config fragments exist
  org.apache.sling.jcr.base.internal.LoginAdminWhitelist
    WhitelistFragment.cardinality.minimum=I&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;

  # SLING-7811 - wait until at all admin config fragments exist
  org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager
    prerequisites.cardinality.minimum=I&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In practice, this means that the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; is registered after the first fragment and only then the &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt; is started.&lt;/p&gt;

&lt;p&gt;Repository initialisation is still done in an async manner.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Pros&lt;/b&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;streamlined startup, no cancellations&lt;/li&gt;
	&lt;li&gt;removes code for waiting on the login admin whitelist&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Cons&lt;/b&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;two components now have required configurations&lt;/li&gt;
	&lt;li&gt;the dependency is in the wrong place, the requirement is for the base class &lt;tt&gt;AbstractSlingRepositoryManager&lt;/tt&gt; but it&apos;s expressed in the &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;adds API&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="16571869" author="cziegeler" created="Tue, 7 Aug 2018 15:49:20 +0000"  >&lt;p&gt;I think LoginAdminWhitelist should only be registered if it is fully configured, that means if all fragments are there as references&lt;br/&gt;
So we should require a configuration there and set the minimum cardinality accordingly.&lt;/p&gt;

&lt;p&gt;The repository should only start if such a LoginAdminWhitelist service is registered.&lt;/p&gt;

&lt;p&gt;I think with these two conditions we should have everything for an ordering.&lt;/p&gt;

&lt;p&gt;As the start method is doing the actual starting in a new thread, why do we have a deadlock?&lt;/p&gt;</comment>
                            <comment id="16571880" author="jebailey" created="Tue, 7 Aug 2018 15:58:05 +0000"  >&lt;p&gt;Naive question. Couldn&apos;t you handle this by modifying the start levels as well so that the LoginAdminWhitelist is activated first?&lt;/p&gt;</comment>
                            <comment id="16571891" author="cziegeler" created="Tue, 7 Aug 2018 16:04:12 +0000"  >&lt;p&gt;Start levels should never be used for ordering things, its fragile - in a dynamic system it&apos;s always better to declare everything through dependencies.&lt;br/&gt;
Start levels can be used to optimise the startup&lt;/p&gt;</comment>
                            <comment id="16572962" author="rombert" created="Wed, 8 Aug 2018 09:55:25 +0000"  >&lt;p&gt;With requiring a config for &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; and setting the minimum cardinality I still get a cancelled registration ( which is not that bad ). But also there seem to be some runaway tasks which are not properly cancelled when startup is cancelled, e.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;08.08.2018 12:46:10.372 *WARN* [oak-executor-3] org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor Error while dispatching observation events for //*[11111b]@org.apache.sling.jcr.resource.internal.JcrResourceListener
java.lang.IllegalStateException: Resource resolver is already closed.
        at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.checkClosed(ResourceResolverImpl.java:189) [org.apache.sling.resourceresolver:1.6.4]
        at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.getResource(ResourceResolverImpl.java:633) [org.apache.sling.resourceresolver:1.6.4]
        at org.apache.sling.i18n.impl.JcrResourceBundleProvider.isDictionaryResource(JcrResourceBundleProvider.java:265) [org.apache.sling.i18n:2.5.12]
        at org.apache.sling.i18n.impl.JcrResourceBundleProvider.onChange(JcrResourceBundleProvider.java:254) [org.apache.sling.i18n:2.5.12]
        at org.apache.sling.i18n.impl.JcrResourceBundleProvider.onChange(JcrResourceBundleProvider.java:214) [org.apache.sling.i18n:2.5.12]
        at org.apache.sling.resourceresolver.impl.observation.BasicObservationReporter.reportChanges(BasicObservationReporter.java:211)
        at org.apache.sling.jcr.resource.internal.JcrResourceListener.onEvent(JcrResourceListener.java:155) [org.apache.sling.jcr.resource:3.0.10]
        at org.apache.jackrabbit.commons.observation.ListenerTracker$1.onEvent(ListenerTracker.java:190) [org.apache.jackrabbit.jackrabbit-jcr-commons:2.14.4]
        at org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor.contentChanged(ChangeProcessor.java:507) [org.apache.jackrabbit.oak-jcr:1.6.8]
        at org.apache.jackrabbit.oak.plugins.observation.FilteringDispatcher.contentChanged(FilteringDispatcher.java:53) [org.apache.jackrabbit.oak-core:1.6.8]
        at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:134) [org.apache.jackrabbit.oak-core:1.6.8]
        at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:128) [org.apache.jackrabbit.oak-core:1.6.8]
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;08.08.2018 12:46:10.696 *ERROR* [FelixDispatchQueue] org.apache.sling.starter.startup FrameworkEvent ERROR (org.osgi.framework.ServiceException: Service factory returned null. (Component: org.apache.sling.servlets.resolver.SlingServletRes
olver (268)))
org.osgi.framework.ServiceException: Service factory returned null. (Component: org.apache.sling.servlets.resolver.SlingServletResolver (268))
        at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:380)
        at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
        at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:350)
        at org.apache.felix.framework.Felix.getService(Felix.java:3737)
        at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470)
        at org.apache.sling.starter.startup.impl.Activator.checkServices(Activator.java:146)
        at org.apache.sling.starter.startup.impl.Activator.access$100(Activator.java:32)
        at org.apache.sling.starter.startup.impl.Activator$1$1.run(Activator.java:108)
        at java.util.TimerThread.mainLoop(Timer.java:555)
        at java.util.TimerThread.run(Timer.java:505)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the meantime I&apos;ve improved the robustness of the repository manager for restarts and will keep debugging&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-base/commit/3de2b9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-jcr-base commit 3de2b9f&lt;/a&gt; - name individual startup threads&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-base/commit/6f5771a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-jcr-base commit 6f5771a&lt;/a&gt; - safer shutdown&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="16572994" author="rombert" created="Wed, 8 Aug 2018 10:30:29 +0000"  >&lt;p&gt;With the current master branch, plus&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/src/main/java/org/apache/sling/jcr/base/internal/LoginAdminWhitelist.java b/src/main/java/org/apache/sling/jcr/base/internal/LoginAdminWhitelist.java
index 5bd5d38..38c001b 100644
--- a/src/main/java/org/apache/sling/jcr/base/internal/LoginAdminWhitelist.java
+++ b/src/main/java/org/apache/sling/jcr/base/internal/LoginAdminWhitelist.java
@@ -29,6 +29,7 @@ import org.osgi.framework.Bundle;
 import org.osgi.framework.Constants;
 import org.osgi.service.component.annotations.Activate;
 import org.osgi.service.component.annotations.Component;
+import org.osgi.service.component.annotations.ConfigurationPolicy;
 import org.osgi.service.component.annotations.Modified;
 import org.osgi.service.component.annotations.Reference;
 import org.osgi.service.component.annotations.ReferenceCardinality;
@@ -52,7 +53,8 @@ import static org.apache.sling.commons.osgi.PropertiesUtil.toStringArray;
         property = {
                 Constants.SERVICE_DESCRIPTION + &quot;=Apache Sling Login Admin Whitelist&quot;,
                 Constants.SERVICE_VENDOR + &quot;=The Apache Software Foundation&quot;
-        }
+        },
+        configurationPolicy = ConfigurationPolicy.REQUIRE
 )
 @Designate(
         ocd = LoginAdminWhitelistConfiguration.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/src/main/provisioning/sling.txt b/src/main/provisioning/sling.txt
index e72e122..d779e1f 100644
--- a/src/main/provisioning/sling.txt
+++ b/src/main/provisioning/sling.txt
@@ -106,7 +106,7 @@
 [artifacts startLevel=15]
     org.apache.sling/org.apache.sling.jcr.jcr-wrapper/2.0.0
     org.apache.sling/org.apache.sling.jcr.api/2.4.0
-    org.apache.sling/org.apache.sling.jcr.base/3.0.4
+    org.apache.sling/org.apache.sling.jcr.base/3.0.5-SNAPSHOT
     org.apache.sling/org.apache.sling.jcr.registration/1.0.4
     org.apache.jackrabbit/jackrabbit-api/${jackrabbit.version}
     org.apache.jackrabbit/jackrabbit-jcr-commons/${jackrabbit.version}
@@ -153,6 +153,10 @@
     org.apache.sling.commons.log.file=&quot;logs/request.log&quot;
     org.apache.sling.commons.log.level=&quot;info&quot;
 
+  # SLING-7811 - wait until at all admin config fragments exist
+  org.apache.sling.jcr.base.internal.LoginAdminWhitelist
+    WhitelistFragment.cardinality.minimum=I&quot;1&quot;
+
   # TODO: remove bundles as their dependency on admin login is fixed, see SLING-5355 for linked issues
   # For these bundles, admin login is considered &quot;ok&quot;:
   # org.apache.sling.jcr.contentloader
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get a single restart of the repository startup sequence, but multiple service-related errors ( also see above ). One of the things that puzzles me is that the &lt;tt&gt;SlingServletResolver&lt;/tt&gt; is registered, but can&apos;t be accessed for some reason, &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;08.08.2018 12:46:10.398 *INFO* [Apache Sling Repository Startup Thread #2] org.apache.sling.servlets.resolver Service [org.apache.sling.servlets.resolver.SlingServletResolver,638, [org.apache.sling.api.servlets.ServletResolver, org.apache.sling.api.scripting.SlingScriptResolver, org.apache.sling.engine.servlets.ErrorHandler, org.apache.sling.api.request.SlingRequestListener]] ServiceEvent REGISTERED
...
08.08.2018 12:46:10.694 *INFO* [Timer-1] org.apache.sling.servlets.resolver bundle org.apache.sling.servlets.resolver:2.4.22 (158)[org.apache.sling.servlets.resolver.SlingServletResolver(268)] :  Could not obtain all required dependencies, getService returning null
...
08.08.2018 12:46:10.696 *ERROR* [FelixDispatchQueue] org.apache.sling.starter.startup FrameworkEvent ERROR (org.osgi.framework.ServiceException: Service factory returned null. (Component: org.apache.sling.servlets.resolver.SlingServletResolver (268)))
org.osgi.framework.ServiceException: Service factory returned null. (Component: org.apache.sling.servlets.resolver.SlingServletResolver (268))
        at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:380)
        at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
        at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:350)
        at org.apache.felix.framework.Felix.getService(Felix.java:3737)
        at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470)
        at org.apache.sling.starter.startup.impl.Activator.checkServices(Activator.java:146)
        at org.apache.sling.starter.startup.impl.Activator.access$100(Activator.java:32)
        at org.apache.sling.starter.startup.impl.Activator$1$1.run(Activator.java:108)
        at java.util.TimerThread.mainLoop(Timer.java:555)
        at java.util.TimerThread.run(Timer.java:505)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That &lt;em&gt;Timer-1&lt;/em&gt; thread comes from the &lt;tt&gt;org.apache.sling.starter.startup&lt;/tt&gt; bundle, but I can&apos;t find anything wrong with the code. It is a timer, indeed, but it&apos;s not hanging on to stale service references. The same thing happens to the &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;08.08.2018 12:46:10.724 *INFO* [Apache Sling Repository Startup Thread #2] org.apache.sling.servlets.resolver bundle org.apache.sling.servlets.resolver:2.4.22 (158)[org.apache.sling.servlets.resolver.SlingServletResolver(268)] :  Could not obtain all required dependencies, getService returning null
08.08.2018 12:46:10.725 *ERROR* [FelixDispatchQueue] org.apache.sling.engine FrameworkEvent ERROR (org.osgi.framework.ServiceException: Service factory returned null. (Component: org.apache.sling.servlets.resolver.SlingServletResolver (268)))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The error message points to &lt;tt&gt;org.apache.felix.scr.impl.manager.SimpleComponentManager&lt;/tt&gt;: &lt;a href=&quot;https://github.com/apache/felix/blob/org.apache.felix.scr-2.1.0/src/main/java/org/apache/felix/scr/impl/manager/SingleComponentManager.java#L906-L911&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/blob/org.apache.felix.scr-2.1.0/src/main/java/org/apache/felix/scr/impl/manager/SingleComponentManager.java#L906-L911&lt;/a&gt; . &lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;ServletResolver&lt;/tt&gt; not being available is responsible for most (all?) the logged errors after the repository restart, but I&apos;m not sure why this happens. My (simplistic) view on OSGi services is that once registered, the service is available for being accessed, given that it&apos;s visible from a classloaded point of view.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - what possible reasons could there be for the service not being able to be retrieved?&lt;/p&gt;</comment>
                            <comment id="16572998" author="cziegeler" created="Wed, 8 Aug 2018 10:34:55 +0000"  >&lt;p&gt;This could be a timing problem: DS figures out that all dependencies are satisfied, registers the service (at this point it is not instantiated as it is lazily done). Now concurrently someone asks for the service and at least one of the dependencies goes away. DS has not unregistered yet, but the reference is not available and therefore the instantiation fails. I think that&apos;s the most plausible reason.&lt;/p&gt;

&lt;p&gt;Do we know why the repository restarts in the first place?&lt;/p&gt;</comment>
                            <comment id="16573005" author="rombert" created="Wed, 8 Aug 2018 10:41:41 +0000"  >&lt;p&gt;I am pretty sure it&apos;s because of the configuration for the &lt;tt&gt;org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider&lt;/tt&gt;, which leads to the &lt;tt&gt;org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistration&lt;/tt&gt; unregistering the &lt;tt&gt;SecurityProvider&lt;/tt&gt; instance, which in turns makes the &lt;tt&gt;OakSlingRepositoryManager&lt;/tt&gt; component deactivate.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;08.08.2018 12:46:03.865 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider)] org.apache.jackrabbit.oak-core Service [org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider,118, [org.apache.jackrabbit.oak.spi.security.user.action.AuthorizableActionProvider]] ServiceEvent UNREGISTERING
08.08.2018 12:46:03.865 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider)] org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistration Trying to unregister the SecurityProvider...
08.08.2018 12:46:03.865 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider)] org.apache.jackrabbit.oak-core Service [387, [org.apache.jackrabbit.oak.spi.security.SecurityProvider]] ServiceEvent UNREGISTERING
08.08.2018 12:46:03.872 *INFO* [Apache Sling Repository Startup Thread #1] org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager Interrupted while waiting for the LoginAdminWhitelist service, cancelling repository initialisation
java.lang.InterruptedException: null
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:998)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
        at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:231)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$4.run(AbstractSlingRepositoryManager.java:461) [org.apache.sling.jcr.base:3.0.5.SNAPSHOT]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16573007" author="rombert" created="Wed, 8 Aug 2018 10:43:33 +0000"  >&lt;p&gt;Does it make sense to instruct the OSGi installer to install the configurations first and then start the bundles? This way we would ensure configurations are always present when services are started and we could get rid of the start/stop/configure/start cycle.&lt;/p&gt;</comment>
                            <comment id="16573031" author="cziegeler" created="Wed, 8 Aug 2018 11:09:30 +0000"  >&lt;p&gt;I&apos;m not sure if we can make this reliable and if we should go. In the launchpad we have the incremental start level increase feature which I think we&apos;re not using in the Sling starter. Enabling this, should actually ensure that configurations are there first.&lt;br/&gt;
Is it fair to assume that a SecurityProviderRegistration needs at least one provider? Or in other words can we avoid the re-registration of the SecurityProviderRegistration through similar means as we use for the whitelist thing?&lt;/p&gt;</comment>
                            <comment id="16573171" author="rombert" created="Wed, 8 Aug 2018 12:48:30 +0000"  >&lt;p&gt;The &lt;tt&gt;SecurityProviderRegistration&lt;/tt&gt; (SPR) already has the needed &lt;tt&gt;AuthorizableActionProvider&lt;/tt&gt; (AAP). The problematic sequence is:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;AAP bound to SPR&lt;/li&gt;
	&lt;li&gt;SPR registers &lt;tt&gt;SecurityProvider&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Configuration is found for AAP&lt;/li&gt;
	&lt;li&gt;AAP unbound from SPR&lt;/li&gt;
	&lt;li&gt;SPR unregisters &lt;tt&gt;SecurityProvider&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Repository startup interrupted&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;AAP deactivated&lt;/li&gt;
	&lt;li&gt;AAP activated with configuration&lt;/li&gt;
	&lt;li&gt;AAP bound to SPR&lt;/li&gt;
	&lt;li&gt;SPR registers &lt;tt&gt;SecurityProvider&lt;/tt&gt; again&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The SPR actually has more references, all of which can trigger this behaviour. With the following patch, the restart problem no longer occurs:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/src/main/provisioning/oak.txt b/src/main/provisioning/oak.txt
index 5d2675c..5af546c 100644
--- a/src/main/provisioning/oak.txt
+++ b/src/main/provisioning/oak.txt
@@ -76,11 +76,6 @@
   org.apache.jackrabbit.oak.security.user.RandomAuthorizableNodeName
     length=I&quot;21&quot;
 
-  org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider
-    enabledActions=[&quot;org.apache.jackrabbit.oak.spi.security.user.action.AccessControlAction&quot;]
-    userPrivilegeNames=[&quot;jcr:all&quot;]
-    groupPrivilegeNames=[&quot;jcr:read&quot;]
-
 [configurations runModes=oak_tar]
   org.apache.jackrabbit.oak.segment.SegmentNodeStoreService
     name=&quot;Default\ NodeStore&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But obviously that&apos;s not desireable &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;So I guess we can&apos;t use the same mechanism as for the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; as the references are already there.&lt;/p&gt;</comment>
                            <comment id="16573177" author="rombert" created="Wed, 8 Aug 2018 12:49:40 +0000"  >&lt;p&gt;Another semi-random thought is whether we could (should?) change the SCR components to have &lt;tt&gt;ConfigurationPolicy.REQUIRE&lt;/tt&gt; is a configuration is declared for them. The intent is clearly to have the component configured, not started without configuration and then reconfigured.&lt;/p&gt;</comment>
                            <comment id="16573186" author="jsedding" created="Wed, 8 Aug 2018 12:56:08 +0000"  >&lt;p&gt;Sorry for the delayed response. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; the commits regarding robustness definitely look good!&lt;/p&gt;

&lt;p&gt;I remember making startup async when I added the whitelist fragment feature, but I also remember that I had noticed at the time that the RepositoryInitializer instances &lt;b&gt;never&lt;/b&gt; ran before the repo was published - which IIRC was the intention when they were introduced. The details evade me, but the async startup improved that situation.&lt;/p&gt;

&lt;p&gt;For this issue, which is essentially an optimization of the startup sequence IIUC, there are multiple aspects:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;restarting and/or reinitializing the &lt;tt&gt;SlingRepository&lt;/tt&gt;&#160;should be graceful&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;SecurityProviderRegistration&lt;/tt&gt; causes the &lt;tt&gt;SecurityProvider&lt;/tt&gt; to &quot;bounce&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In order to get the better startup experience, I think we would need to prevent the &lt;tt&gt;SecurityProvider&lt;/tt&gt; from bouncing. In order to do that, I see the following options:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;set target filters for references on &lt;tt&gt;SecurityProviderRegistration&lt;/tt&gt; to prevent it binding to undesired services that later are dynamically exchanged - if this is done via configuration, the lack of config policy REQUIRED on &lt;tt&gt;SecurityProviderRegistration&lt;/tt&gt; could lead to further timing issues and thus bouncing&lt;/li&gt;
	&lt;li&gt;provide a fully dynamic &lt;tt&gt;SecurityProvider&lt;/tt&gt;, which is not unregistered due to changing references (this might be a refactoring of &lt;tt&gt;SecurityProviderRegistration&lt;/tt&gt; into a &lt;tt&gt;DynamicDelegatingSecurityProvider&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;let &lt;tt&gt;SecurityProviderRegistration&lt;/tt&gt; register &lt;tt&gt;SecurityProvider&lt;/tt&gt; with service properties that advertise which service implementations it is using (e.g. authorizableActionProvider=org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider). Then the &lt;tt&gt;*SlingRepositoryManager&lt;/tt&gt;&#160;could require configuration and bind to the &lt;tt&gt;SecurityProvider&lt;/tt&gt; only once it is using the correct services under the hood (this is somewhat similar to 1.)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;All of the above need changes in Oak, however.&lt;/p&gt;</comment>
                            <comment id="16573194" author="jsedding" created="Wed, 8 Aug 2018 13:01:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; sorry, your latest comments arrived while I was typing mine. I think the points of my previous comment are still valid. And yes, I think we need more &lt;tt&gt;ConfigurationPolicy.REQUIRED&lt;/tt&gt;&#160;&lt;b&gt;and&lt;/b&gt; probably be more explicit about which implementations we want to bind to. Therefore I think this needs to be solved in collaboration with the Oak project.&lt;/p&gt;</comment>
                            <comment id="16573196" author="cziegeler" created="Wed, 8 Aug 2018 13:02:44 +0000"  >&lt;p&gt;+1 for ConfigurationPolicy.REQUIRE&lt;/p&gt;</comment>
                            <comment id="16691526" author="rombert" created="Mon, 19 Nov 2018 10:27:57 +0000"  >&lt;p&gt;Unassigning since not actively working on it.&lt;/p&gt;</comment>
                            <comment id="16900949" author="rombert" created="Tue, 6 Aug 2019 12:04:15 +0000"  >&lt;p&gt;Linked a couple of Oak issues that appear due to the repository service restarting.&lt;/p&gt;</comment>
                            <comment id="17098313" author="kwin" created="Sun, 3 May 2020 09:36:12 +0000"  >&lt;p&gt;I just experienced this exception when starting Sling Starter 12-SNAPSHOT:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
03.05.2020 11:22:33.372 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider)] org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistration Trying to unregister the SecurityProvider...
03.05.2020 11:22:33.405 *ERROR* [Apache Sling Repository Startup &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; #1] org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager start: Uncaught Throwable trying to access Repository, calling stopRepository()
java.lang.RuntimeException: org.apache.jackrabbit.oak.api.CommitFailedException: OakSegment0002: Merge interrupted
	at org.apache.jackrabbit.oak.OakInitializer.initialize(OakInitializer.java:50) [org.apache.jackrabbit.oak-core:1.26.0]
	at org.apache.jackrabbit.oak.Oak.initialContent(Oak.java:689) [org.apache.jackrabbit.oak-core:1.26.0]
	at org.apache.jackrabbit.oak.Oak.createNewContentRepository(Oak.java:734) [org.apache.jackrabbit.oak-core:1.26.0]
	at org.apache.jackrabbit.oak.Oak.createContentRepository(Oak.java:673) [org.apache.jackrabbit.oak-core:1.26.0]
	at org.apache.jackrabbit.oak.jcr.Jcr.createContentRepository(Jcr.java:376) [org.apache.jackrabbit.oak-jcr:1.26.0]
	at org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager.acquireRepository(OakSlingRepositoryManager.java:152) [org.apache.sling.jcr.oak.server:1.2.4]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.initializeAndRegisterRepositoryService(AbstractSlingRepositoryManager.java:515) [org.apache.sling.jcr.base:3.1.0]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.access$300(AbstractSlingRepositoryManager.java:92) [org.apache.sling.jcr.base:3.1.0]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$4.run(AbstractSlingRepositoryManager.java:496) [org.apache.sling.jcr.base:3.1.0]
Caused by: org.apache.jackrabbit.oak.api.CommitFailedException: OakSegment0002: Merge interrupted
	at org.apache.jackrabbit.oak.segment.scheduler.LockBasedScheduler.schedule(LockBasedScheduler.java:284) [org.apache.jackrabbit.oak-segment-tar:1.26.0]
	at org.apache.jackrabbit.oak.segment.SegmentNodeStore.merge(SegmentNodeStore.java:211) [org.apache.jackrabbit.oak-segment-tar:1.26.0]
	at org.apache.jackrabbit.oak.OakInitializer.initialize(OakInitializer.java:48) [org.apache.jackrabbit.oak-core:1.26.0]
	... 8 common frames omitted
Caused by: java.lang.InterruptedException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1302)
	at java.util.concurrent.Semaphore.acquire(Semaphore.java:312)
	at org.apache.jackrabbit.oak.segment.scheduler.LockBasedScheduler.schedule(LockBasedScheduler.java:262) [org.apache.jackrabbit.oak-segment-tar:1.26.0]
	... 10 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17098317" author="kwin" created="Sun, 3 May 2020 09:43:59 +0000"  >&lt;p&gt;I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-9047&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OAK-9047&lt;/a&gt; to make the &lt;tt&gt;DefaultAuthorizableActionProvider&lt;/tt&gt; require a configuration. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Please extend if other components should also be deferred until a config is in place.&lt;/p&gt;</comment>
                            <comment id="17098357" author="kwin" created="Sun, 3 May 2020 10:46:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Also we should revert &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-base/commit/6f5771a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-base/commit/6f5771a&lt;/a&gt; as that is relying on &lt;tt&gt;Thread.interrupt(...)&lt;/tt&gt; which is not supported by Oak (&lt;a href=&quot;https://jackrabbit.apache.org/oak/docs/dos_and_donts.html#Dont_use_Thread.interrupt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/oak/docs/dos_and_donts.html#Dont_use_Thread.interrupt&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17098916" author="rombert" created="Mon, 4 May 2020 13:12:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - I am working on a version of the stop method that does not rely on &lt;tt&gt;Thread#interrupt&lt;/tt&gt; , but unfortunately that does not work reliably yet. My test bed is in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9118&quot; title=&quot;Sling fails to start when database exists but &amp;#39;sling&amp;#39; directory is missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9118&quot;&gt;&lt;del&gt;SLING-9118&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17102666" author="rombert" created="Fri, 8 May 2020 15:19:27 +0000"  >&lt;p&gt;FWIW, I have started Sling using the Feature Launcher, using the slightly old conversion result from &lt;a href=&quot;https://github.com/apache/sling-whiteboard/blob/master/sling-org-apache-sling-kickstart/src/main/resources/feature-sling12.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-whiteboard/blob/master/sling-org-apache-sling-kickstart/src/main/resources/feature-sling12.json&lt;/a&gt; , and I did not see any repository service restarts.&lt;/p&gt;</comment>
                            <comment id="17162079" author="rombert" created="Tue, 21 Jul 2020 14:44:15 +0000"  >&lt;p&gt;I&apos;m going to finish my work on no longer using &lt;tt&gt;Thread#interrupt&lt;/tt&gt;. I am not 100% convinced this will reliably solve the problem, but at least Oak will be happier.&lt;/p&gt;</comment>
                            <comment id="17170818" author="rombert" created="Tue, 4 Aug 2020 14:10:10 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-base/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-base/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13176750">SLING-7805</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13302496">OAK-9047</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13249095">OAK-8529</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13249096">OAK-8530</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13286828">SLING-9118</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wqlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7809] File Optimization Operation Not Working</title>
                <link>https://issues.apache.org/jira/browse/SLING-7809</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Optimize File Operation does not update the image correctly as the original and optimized image are flipped.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13177131">SLING-7809</key>
            <summary>File Optimization Operation Not Working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Aug 2018 14:57:04 +0000</created>
                <updated>Mon, 15 Oct 2018 15:46:35 +0000</updated>
                            <resolved>Mon, 6 Aug 2018 15:02:34 +0000</resolved>
                                                    <fixVersion>File Optimization 0.9.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16570319" author="klcodanr" created="Mon, 6 Aug 2018 15:02:34 +0000"  >&lt;p&gt;Fixed in commit: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-file-optimization/commit/29ef19c95a0e09e420ffac82b00af599f5d60938&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-file-optimization/commit/29ef19c95a0e09e420ffac82b00af599f5d60938&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16650387" author="klcodanr" created="Mon, 15 Oct 2018 15:46:35 +0000"  >&lt;p&gt;Closed with the release of &lt;a href=&quot;https://issues.apache.org/jira/projects/SLING/versions/12343855&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;File Optimization 0.9.2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wqhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7807] CMS - Error Handler Returns 404</title>
                <link>https://issues.apache.org/jira/browse/SLING-7807</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The error handler returns a 404 error code when the content is denied to the user&apos;s via ACL instead of 401 or 403 as appropriate.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13177127">SLING-7807</key>
            <summary>CMS - Error Handler Returns 404</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Aug 2018 14:45:42 +0000</created>
                <updated>Mon, 24 Sep 2018 16:53:08 +0000</updated>
                            <resolved>Mon, 6 Aug 2018 15:04:15 +0000</resolved>
                                                    <fixVersion>App CMS 0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16570323" author="klcodanr" created="Mon, 6 Aug 2018 15:04:15 +0000"  >&lt;p&gt;Fixed in commit: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-app-cms/commit/815d56d1daf213cd6ac1a7457a2a3a22fcf247e0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-app-cms/commit/815d56d1daf213cd6ac1a7457a2a3a22fcf247e0&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wqgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7805] NPE in Oak SessionImpl when starting up</title>
                <link>https://issues.apache.org/jira/browse/SLING-7805</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;WIth the latest resource resolver I get:&lt;br/&gt;
I suspect this has to do with the revert of some mapping code before the 1.6.4 release (which I unfortunately did not test):&lt;br/&gt;
03.08.2018 18:04:26.528 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;FelixStartLevel&amp;#93;&lt;/span&gt; org.apache.sling.resourceresolver.impl.CommonResourceResolverFactoryImpl activate: Cannot access repository, failed setting up Mapping Support&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
	at org.apache.jackrabbit.oak.jcr.session.SessionImpl.getWorkspace(SessionImpl.java:265) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.jackrabbit.oak-jcr:1.9.6.R1836532&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at com.adobe.granite.repository.impl.CRX3SessionImpl.getWorkspace(CRX3SessionImpl.java:133) &lt;span class=&quot;error&quot;&gt;&amp;#91;com.adobe.granite.repository:1.6.4&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.jcr.resource.internal.helper.jcr.BasicQueryLanguageProvider.getSupportedLanguages(BasicQueryLanguageProvider.java:69) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.jcr.resource:3.0.14&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.providers.stateful.AuthenticatedResourceProvider.getSupportedLanguages(AuthenticatedResourceProvider.java:249) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.resourceresolver:1.6.4&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.getQueryableProviders(ResourceResolverControl.java:469) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.resourceresolver:1.6.4&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.findResources(ResourceResolverControl.java:456) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.resourceresolver:1.6.4&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.findResources(ResourceResolverImpl.java:739) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.resourceresolver:1.6.4&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.loadVanityPaths(MapEntries.java:1130) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.sling.resourceresolver:1.6.4&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13176750">SLING-7805</key>
            <summary>NPE in Oak SessionImpl when starting up</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2018 16:13:34 +0000</created>
                <updated>Tue, 14 Aug 2018 12:44:15 +0000</updated>
                            <resolved>Wed, 8 Aug 2018 12:20:50 +0000</resolved>
                                    <version>JCR Resource 3.0.14</version>
                                    <fixVersion>JCR Resource 3.0.16</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16569211" author="cziegeler" created="Sat, 4 Aug 2018 15:37:07 +0000"  >&lt;p&gt;It seems this has nothing to do with the revert/changes in MapEntries - MapEntries seems to be correct like 1.6.0&lt;/p&gt;

&lt;p&gt;It rather seems to be a problem in Oak 1.9.6.R1836532; the Oak version we&apos;re currently using in Sling Starter does not work either as it is throwing a NPE at a different place.&lt;/p&gt;</comment>
                            <comment id="16570016" author="rombert" created="Mon, 6 Aug 2018 10:32:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - the NPE might&apos;ve been caused by the fact that the bundle did not resolve with the older api bundle. I updated the API and ResourceResolver bundles in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter/commit/b5b5b82&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-starter commit b5b5b82&lt;/a&gt; and Sling starts up just fine. Can you double-check if that works for you as well?&lt;/p&gt;</comment>
                            <comment id="16570029" author="cziegeler" created="Mon, 6 Aug 2018 10:46:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Yes, you&apos;re right with just those two updates, everything works in Sling. Did you try it with that interims Oak version as well?&lt;/p&gt;

&lt;p&gt;However updating jcr.resource to the latest 3.0.14 brings me:&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.jackrabbit.oak.jcr.session.SessionImpl.getAttribute(SessionImpl.java:255)&lt;br/&gt;
	at org.apache.sling.jcr.oak.server.internal.TcclWrappingJackrabbitSession.getAttribute(TcclWrappingJackrabbitSession.java:110)&lt;br/&gt;
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.getAttribute(JcrResourceProvider.java:400)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.providers.stateful.AuthenticatedResourceProvider.getAttribute(AuthenticatedResourceProvider.java:168)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.helper.ResourceResolverControl.getAttribute(ResourceResolverControl.java:359)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.getAttribute(ResourceResolverImpl.java:217)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.getUserID(ResourceResolverImpl.java:774)&lt;/p&gt;
</comment>
                            <comment id="16570043" author="rombert" created="Mon, 6 Aug 2018 10:57:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - I did not, since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7423&quot; title=&quot;Upgrade Oak to 1.8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7423&quot;&gt;&lt;del&gt;SLING-7423&lt;/del&gt;&lt;/a&gt; is technically not done. But I&apos;ll tackle that and then try with the 1.9.6 interim version.&lt;/p&gt;</comment>
                            <comment id="16570107" author="cziegeler" created="Mon, 6 Aug 2018 11:55:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I gave it a quick try. Without updating jcr.resource to 3.0.14 it works with the 1.9.6&lt;br/&gt;
With updating jcr.resource to 3.0.14, I get the below NPE - makes me start to believe that this is more a jcr.resource problem, than the resource resolver&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.jackrabbit.oak.jcr.session.SessionImpl.getUserManager(SessionImpl.java:773)&lt;br/&gt;
	at com.adobe.granite.repository.impl.CRX3SessionImpl.getUserManager(CRX3SessionImpl.java:93)&lt;br/&gt;
	at com.day.cq.security.impl.SecurityAdapterFactory.getAdapter(SecurityAdapterFactory.java:130)&lt;br/&gt;
	at org.apache.sling.adapter.internal.AdapterManagerImpl.getAdapter(AdapterManagerImpl.java:143)&lt;br/&gt;
	at org.apache.sling.api.adapter.SlingAdaptable.adaptTo(SlingAdaptable.java:104)&lt;br/&gt;
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.adaptTo(ResourceResolverImpl.java:821)&lt;br/&gt;
	at com.day.cq.security.widgets.impl.NonExistingAuthorizableServlet.accepts(NonExistingAuthorizableServlet.java:67)&lt;br/&gt;
	at com.day.cq.commons.servlets.NonExistingDispatcherServlet.findServlet(NonExistingDispatcherServlet.java:160)&lt;br/&gt;
	at com.day.cq.commons.servlets.NonExistingDispatcherServlet.accepts(NonExistingDispatcherServlet.java:104)&lt;/p&gt;</comment>
                            <comment id="16570110" author="rombert" created="Mon, 6 Aug 2018 11:57:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - maybe related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3524&quot; title=&quot;ResourceResolver.clone(null) should not share the same JCR session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3524&quot;&gt;&lt;del&gt;SLING-3524&lt;/del&gt;&lt;/a&gt; then?&lt;/p&gt;</comment>
                            <comment id="16570161" author="cziegeler" created="Mon, 6 Aug 2018 12:41:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I guess so as 3.0.10 works fine&lt;/p&gt;</comment>
                            <comment id="16570173" author="rombert" created="Mon, 6 Aug 2018 12:49:30 +0000"  >&lt;p&gt;What I get with the current starter + jcr.resource 3.0.14 is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;06.08.2018 15:45:18.396 *ERROR* [Apache Sling Repository Startup Thread] org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager start: Uncaught Throwable trying to access Repository, calling stopRepository()
java.lang.NullPointerException: null
        at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:192) [com.google.guava:15.0.0]
        at org.apache.jackrabbit.oak.jcr.Jcr.with(Jcr.java:296) [org.apache.jackrabbit.oak-jcr:1.6.8]
        at org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager.acquireRepository(OakSlingRepositoryManager.java:161) [org.apache.sling.jcr.oak.server:1.1.4]
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.initializeAndRegisterRepositoryService(AbstractSlingRepositoryManager.java:471) [org.apache.sling.jcr.base:3.0.4]
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.access$300(AbstractSlingRepositoryManager.java:85) [org.apache.sling.jcr.base:3.0.4]
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$4.run(AbstractSlingRepositoryManager.java:455) [org.apache.sling.jcr.base:3.0.4]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The stack trace points to a null workspace name ( see &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.8/oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/Jcr.java#L296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.8/oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/Jcr.java#L296&lt;/a&gt; ).&lt;/p&gt;</comment>
                            <comment id="16570297" author="cziegeler" created="Mon, 6 Aug 2018 14:50:10 +0000"  >&lt;p&gt;I&apos;ve changed the component/version now to reflect jcr resource, and slightly adjusted the title&lt;/p&gt;</comment>
                            <comment id="16570388" author="cziegeler" created="Mon, 6 Aug 2018 15:49:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; The NPE you see occurs with the current Sling Starter as well; it seems to be harmless (although we probably should look into it)&lt;/p&gt;</comment>
                            <comment id="16573027" author="rombert" created="Wed, 8 Aug 2018 11:08:24 +0000"  >&lt;p&gt;Both NPEs that are related to this issue only - in the Oak &lt;tt&gt;SessionImpl&lt;/tt&gt; class point to to a null &lt;tt&gt;sessionContext&lt;/tt&gt; field.&lt;/p&gt;</comment>
                            <comment id="16573040" author="rombert" created="Wed, 8 Aug 2018 11:19:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - after reverting back to &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-resource/commit/bf18d145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-jcr-resource commit bf18d145&lt;/a&gt;, which includes &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7591&quot; title=&quot;Session leak when a ResourceResolver is created from a Session then gets cloned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7591&quot;&gt;&lt;del&gt;SLING-7591&lt;/del&gt;&lt;/a&gt; but not &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3524&quot; title=&quot;ResourceResolver.clone(null) should not share the same JCR session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3524&quot;&gt;&lt;del&gt;SLING-3524&lt;/del&gt;&lt;/a&gt;, the problem seems to go away. I suggest that we reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3524&quot; title=&quot;ResourceResolver.clone(null) should not share the same JCR session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3524&quot;&gt;&lt;del&gt;SLING-3524&lt;/del&gt;&lt;/a&gt; and revert the changes for it and make a new release.&lt;/p&gt;

&lt;p&gt;Then we can track down the problems with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3524&quot; title=&quot;ResourceResolver.clone(null) should not share the same JCR session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3524&quot;&gt;&lt;del&gt;SLING-3524&lt;/del&gt;&lt;/a&gt; ( unless you or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Csaba+Varga&quot; class=&quot;user-hover&quot; rel=&quot;Csaba Varga&quot;&gt;Csaba Varga&lt;/a&gt; can quickly spot the problem and propose a fix ).&lt;/p&gt;</comment>
                            <comment id="16573109" author="cziegeler" created="Wed, 8 Aug 2018 12:02:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Sounds like a good proposal to me&lt;/p&gt;</comment>
                            <comment id="16573134" author="rombert" created="Wed, 8 Aug 2018 12:20:50 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-resource/commit/882a5386&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-jcr-resource commit 882a5386&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - can you try at your end and see if it fixes the problem? I will start a release if all is OK.&lt;/p&gt;</comment>
                            <comment id="16573172" author="cziegeler" created="Wed, 8 Aug 2018 12:48:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Thanks, this indeed fixes the problem. I&apos;ve tested with resource resolver 1.6.4, API 2.18.2 and this version of jcr resource&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13177150">SLING-7811</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12711002">SLING-3524</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wo53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7804] sling-mock: Instantiate MockRequestPathInfo for resource resolver context</title>
                <link>https://issues.apache.org/jira/browse/SLING-7804</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;to apply the fix to servlet-helpers from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7744&quot; title=&quot;MockRequestPathInfo: Implement getSuffixResource()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7744&quot;&gt;&lt;del&gt;SLING-7744&lt;/del&gt;&lt;/a&gt; to sling-mock as well we need to use the new constructor with resource resolver context.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13176715">SLING-7804</key>
            <summary>sling-mock: Instantiate MockRequestPathInfo for resource resolver context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Fri, 3 Aug 2018 13:53:40 +0000</created>
                <updated>Tue, 21 Aug 2018 14:32:55 +0000</updated>
                            <resolved>Fri, 3 Aug 2018 14:17:49 +0000</resolved>
                                    <version>Testing Sling Mock 2.2.20</version>
                                    <fixVersion>Testing Sling Mock 2.3.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16568249" author="sseifert@pro-vision.de" created="Fri, 3 Aug 2018 14:17:49 +0000"  >&lt;p&gt;fixed &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-sling-mock/commit/27d24e052f0e5168a180f51782e99505f0232935&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-sling-mock/commit/27d24e052f0e5168a180f51782e99505f0232935&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13166707">SLING-7744</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wnxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7801] Optimise AntiSamy logging for null input in org.apache.sling.xss.impl.HtmlToHtmlContentContext</title>
                <link>https://issues.apache.org/jira/browse/SLING-7801</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;AntiSamy throws exceptions when scanning null input. Although the exceptions are handled correctly, they have the potential to fill up the logs. A null check is better suited in this case, so that the only thrown exceptions are in case there&apos;s a real scan / policy issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13176701">SLING-7801</key>
            <summary>Optimise AntiSamy logging for null input in org.apache.sling.xss.impl.HtmlToHtmlContentContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2018 12:37:52 +0000</created>
                <updated>Tue, 7 Aug 2018 12:20:50 +0000</updated>
                            <resolved>Fri, 3 Aug 2018 13:01:05 +0000</resolved>
                                    <version>XSS Protection API 2.0.6</version>
                                    <fixVersion>XSS Protection API 2.0.12</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16568174" author="radu.cotescu" created="Fri, 3 Aug 2018 13:01:05 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/271bfe5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 271bfe5&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13136771">SLING-7476</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wnu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7797] Servlet Helpers - SimpleDateFormatter not thread safe</title>
                <link>https://issues.apache.org/jira/browse/SLING-7797</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;SimpleDateFormatter in the HeaderSupport class is not thread safe. Updated java version to 8 and replaced SimpleDateFormatter with with thread safe DateTimeFormatter which has the appropriate RFC1123 support OOTB&lt;/p&gt;</description>
                <environment></environment>
        <key id="13176199">SLING-7797</key>
            <summary>Servlet Helpers - SimpleDateFormatter not thread safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jebailey">Jason E Bailey</assignee>
                                    <reporter username="jebailey">Jason E Bailey</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Aug 2018 18:02:09 +0000</created>
                <updated>Thu, 7 Mar 2019 16:07:06 +0000</updated>
                            <resolved>Wed, 1 Aug 2018 18:04:20 +0000</resolved>
                                                    <fixVersion>Servlet Helpers 1.1.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wl1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7795] Get Servlets - JsonGenerator may not close properly on exception</title>
                <link>https://issues.apache.org/jira/browse/SLING-7795</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;During the json rendering an exception may cause the JsonGenerator to never close. This could occur in the SlingInfoServlet and the JsonRenderer&lt;/p&gt;</description>
                <environment></environment>
        <key id="13175833">SLING-7795</key>
            <summary>Get Servlets - JsonGenerator may not close properly on exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jebailey">Jason E Bailey</assignee>
                                    <reporter username="jebailey">Jason E Bailey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jul 2018 13:28:55 +0000</created>
                <updated>Fri, 12 Oct 2018 22:10:04 +0000</updated>
                            <resolved>Tue, 31 Jul 2018 13:33:16 +0000</resolved>
                                                    <fixVersion>Servlets Get 2.1.34</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13191312">SLING-8011</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wirz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7792] Resource Resolver should return more than one resolved path if available</title>
                <link>https://issues.apache.org/jira/browse/SLING-7792</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The current &lt;tt&gt;ResourceResolver#map&lt;/tt&gt; methods return a single &quot;path mapped from the (resource) path&quot;. However, it is possible than a given path can be mapped to multiple others while using features such as &lt;tt&gt;sling:alias&lt;/tt&gt; and &lt;tt&gt;sling:vanityUrl&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In order to support that scenario, it is require to implement new maps method for &lt;tt&gt;ResourceResolver&lt;/tt&gt; which returns a collection of &quot;resolved path&quot;. This collection must contain the resources mapped through &lt;tt&gt;/etc/map&lt;/tt&gt;, &lt;tt&gt;sling:alias&lt;/tt&gt; and &lt;tt&gt;sling:vanityUrl&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The current API suggests to implement a second method to be consistent/symmetric with the existing map operations&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;@Nonnull java.util.Collection&amp;lt;java.lang.String&amp;gt; maps(@Nonnull java.lang.String resourcePath)&lt;br/&gt;
@Nonnull java.util.Collection&amp;lt;java.lang.String&amp;gt; maps(@Nonnull javax.servlet.http.HttpServletRequest request, @Nonnull java.lang.String resourcePath)&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13175505">SLING-7792</key>
            <summary>Resource Resolver should return more than one resolved path if available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="acollign">Alex Collignon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jul 2018 09:09:40 +0000</created>
                <updated>Fri, 20 Jan 2023 14:18:34 +0000</updated>
                            <resolved>Fri, 17 Aug 2018 14:11:52 +0000</resolved>
                                    <version>Resource Resolver 1.6.0</version>
                                    <fixVersion>API 2.18.4</fixVersion>
                    <fixVersion>Resource Resolver 1.6.6</fixVersion>
                                    <component>API</component>
                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="16561756" author="bdelacretaz" created="Mon, 30 Jul 2018 10:39:28 +0000"  >&lt;p&gt;How will the client code select which path to use if you resolve to multiple candidates and return just their paths?&lt;/p&gt;

&lt;p&gt;We probably need to see the whole picture of how you intend to use this to understand better, but if there are multiple candidates I think the resolver should provide values such as which one are favorites, or why each candidate is present in the result set, to be able to make a sensible decision about which path to actually use.&lt;/p&gt;

&lt;p&gt;Or maybe it&apos;s just a question of assigning priorities to the various mapping mechanisms, if their precedence is currently undefined (I&apos; don&apos;t know if that&apos;s the case).&lt;/p&gt;</comment>
                            <comment id="16561768" author="rombert" created="Mon, 30 Jul 2018 10:57:55 +0000"  >&lt;p&gt;As this is based on an offline discussion between myself, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acollign&quot; class=&quot;user-hover&quot; rel=&quot;acollign&quot;&gt;acollign&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, I&apos;ll add some more details.&lt;/p&gt;

&lt;p&gt;The background is that for a given resource client code needs to know all possible variations so that they are added as requirements for an authentication handler. In case multiple mappings are found, e.g. the page has an alias but there are also matching entries under &lt;tt&gt;/etc/map&lt;/tt&gt; the current &lt;tt&gt;ResourceResolver#map&lt;/tt&gt; is not enough, as it only returns one entry.&lt;/p&gt;</comment>
                            <comment id="16561778" author="bdelacretaz" created="Mon, 30 Jul 2018 11:09:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;The background is that for a given resource client code needs to know all possible variations so that they are added as requirements for an authentication handler.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah ok, I see the idea now, thanks for clarifying.&lt;/p&gt;

&lt;p&gt;Maybe &lt;tt&gt;getMapppingCandidates&lt;/tt&gt; expresses this better than &lt;tt&gt;maps&lt;/tt&gt; as a method name?&lt;/p&gt;</comment>
                            <comment id="16561780" author="rombert" created="Mon, 30 Jul 2018 11:10:35 +0000"  >&lt;p&gt;I like that better than &lt;tt&gt;maps&lt;/tt&gt;, indeed.&lt;/p&gt;</comment>
                            <comment id="16563273" author="jsedding" created="Tue, 31 Jul 2018 08:07:26 +0000"  >&lt;p&gt;I think providing this information is valuable. I&apos;m reluctant to just add it to &lt;tt&gt;ResourceResolver&lt;/tt&gt;, however. It doesn&apos;t seem like a method that would get used a lot. Maybe we could introduce a &lt;tt&gt;Mapper&lt;/tt&gt; interface (better names welcome!), which can provide detailed information about mappings and resolutions. The methods &lt;tt&gt;ResourceResolver#map&lt;/tt&gt; and &lt;tt&gt;ResourceResolver#resolve&lt;/tt&gt; would then become mere convenience methods, but the canonical source of truth for mappings would be the &lt;tt&gt;Mapper&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Background: for quite some time I have come to the conclusion that the &lt;tt&gt;ResourceResolver&lt;/tt&gt; conflates two responsibilities:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;accessing the &lt;tt&gt;Resource&lt;/tt&gt; tree&lt;/li&gt;
	&lt;li&gt;mapping/resolving URLs to/from the &lt;tt&gt;Resource&lt;/tt&gt; tree&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The current implementation shows that these ideas are conflated, which IMHO is why the mapping/resolution code is not very modular. In an ideal future, we could get to a point where mapping/resolution is pluggable (via OSGi services) and the current implementations (i.e. /etc/maps, sling:alias, sling:vanityPaths) are hooked into this extension point. The &lt;tt&gt;Mapper&lt;/tt&gt; would be the service that provides a compound view of all applied mappings/resolutions.&lt;/p&gt;</comment>
                            <comment id="16563563" author="cziegeler" created="Tue, 31 Jul 2018 12:18:41 +0000"  >&lt;p&gt;Sounds good to me and I agree a separate service makes sense.&lt;br/&gt;
In that case we should probably put it into a separate package which will allows us to evolve it easier&lt;/p&gt;</comment>
                            <comment id="16565999" author="rombert" created="Wed, 1 Aug 2018 21:17:48 +0000"  >&lt;p&gt;Draft API pull request at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/pull/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-api/pull/6&lt;/a&gt; . Wanted to get the proposal out since I&apos;ll be travelling tomorrow.&lt;/p&gt;</comment>
                            <comment id="16566417" author="cziegeler" created="Thu, 2 Aug 2018 06:46:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, I think the api for the mapping service itself looks good. If a couple of comments&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;in the javadocs it&apos;s better to reference the full qualified service if it&apos;s in another package, this way there is no &quot;import&quot; statement between the packages required&lt;/li&gt;
	&lt;li&gt;the current ResourceResolver.map() method is bound to the resource resolver and therefore to a user, which means different users might get different results. The new service does not have the notation of a user, so I assume we&apos;ll use a service user which then means that the results might be different&lt;/li&gt;
	&lt;li&gt;as the map() method is frequently used and due to the above reason (bound to a user), I don&apos;t think we should deprecate it&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16566423" author="kwin" created="Thu, 2 Aug 2018 06:52:48 +0000"  >&lt;p&gt;What about also implementing the reverse (i.e. resolveAll) which should return all potential resource candidates for a certain request. That is sometimes useful as well (compare with &lt;a href=&quot;https://www.mail-archive.com/dev@sling.apache.org/msg56451.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@sling.apache.org/msg56451.html&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16566478" author="bdelacretaz" created="Thu, 2 Aug 2018 08:08:57 +0000"  >&lt;p&gt;I agree with Carsten about the current mapping methods being bound to a ResourceResolver, if the new ResourceMapper is standalone it might provide different results.&lt;/p&gt;

&lt;p&gt;Maybe the mappiig methods need a ResourceResolver parameter? Or a Request object to establish that context?&lt;/p&gt;</comment>
                            <comment id="16566479" author="sseifert@pro-vision.de" created="Thu, 2 Aug 2018 08:09:09 +0000"  >&lt;p&gt;how do we get a ResourceMapper instance? adapting from ResourceResolver or osgi service?&lt;br/&gt;
the javadocs should give a hint how to achieve it.&lt;/p&gt;</comment>
                            <comment id="16566484" author="bdelacretaz" created="Thu, 2 Aug 2018 08:19:21 +0000"  >&lt;p&gt;&amp;gt; how do we get a ResourceMapper instance? ...&lt;/p&gt;

&lt;p&gt;Great question, and if it&apos;s by adapting a ResourceResolver that would provide the context mentioned in my previous comment.&lt;/p&gt;</comment>
                            <comment id="16568232" author="rombert" created="Fri, 3 Aug 2018 13:57:48 +0000"  >&lt;p&gt;I like Stefan and Bertrand&apos;s idea of adapting the &lt;tt&gt;ResourceResolver&lt;/tt&gt; to a &lt;tt&gt;ResourceMapper&lt;/tt&gt;, as it makes it very clear which user the mappings are based on. I will un-deprecate the &lt;tt&gt;map&lt;/tt&gt; methods in &lt;tt&gt;ResourceResolver&lt;/tt&gt; and instruct the user to access the ones on the mapper in case more results are needed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - I think &lt;tt&gt;resolveAll&lt;/tt&gt; would sit well in the &lt;tt&gt;ResourceResolver&lt;/tt&gt;, not in a new service.&lt;/p&gt;</comment>
                            <comment id="16574774" author="rombert" created="Thu, 9 Aug 2018 12:27:31 +0000"  >&lt;p&gt;I&apos;ve updated the API PR to reflect the discussion from this Jira issue and dev@sling . I&apos;ll start working on the implementation part in parallel, but more comments are always welcome.&lt;/p&gt;</comment>
                            <comment id="16582736" author="rombert" created="Thu, 16 Aug 2018 15:57:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - we could use your opinion regarding the ResourceProvider overlay test issue, see &lt;a href=&quot;https://lists.apache.org/thread.html/45f7055091070c378bf7e40904d5f697bcb57809fe061a6b5865802f@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/45f7055091070c378bf7e40904d5f697bcb57809fe061a6b5865802f@%3Cdev.sling.apache.org%3E&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;Other than that, I think this are working as expected now, see &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/pull/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-api/pull/6&lt;/a&gt; for the final API and also &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/9&lt;/a&gt; , but I want to refactor the impl a bit more as right now the ResourceResolver exposes a bit too much as the ResourceMapper needs it.&lt;/p&gt;</comment>
                            <comment id="16583391" author="cziegeler" created="Fri, 17 Aug 2018 05:41:57 +0000"  >&lt;p&gt;I think the test is wrong - the API of the ResourceProvider states that if there is more than one provider with the same root path, the one with the highest service ranking is used.&lt;br/&gt;
As both providers are registered with the same bundle id, the one registered first has the lower service id and therefore, it should one.&lt;br/&gt;
I think we should change the test to explicitely use service ranking and register the second one with a higher ranking.&lt;/p&gt;</comment>
                            <comment id="16583663" author="rombert" created="Fri, 17 Aug 2018 09:04:55 +0000"  >&lt;p&gt;Thanks for the confirmation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;. For the record, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; already merged the changes required.&lt;/p&gt;</comment>
                            <comment id="16583665" author="rombert" created="Fri, 17 Aug 2018 09:06:29 +0000"  >&lt;p&gt;Fixed, with&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/commit/64e2a90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-api commit 64e2a90&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/bdfa9e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-resourceresolver commit bdfa9e3&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/b01bea8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-resourceresolver commit b01bea8&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/def05b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-resourceresolver commit def05b6&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16583842" author="rombert" created="Fri, 17 Aug 2018 12:28:01 +0000"  >&lt;p&gt;Reopening, seems I did not preserve some backwards compatibility scenarios&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Tests run: 62, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 37.627 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.resourceresolver.ResourceResolverGeneralTest
[ERROR] testMapResourceAliasJcrContent(org.apache.sling.launchpad.webapp.integrationtest.resourceresolver.ResourceResolverGeneralTest)  Time elapsed: 0.591 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: expected:&amp;lt;/[testAlias/]_jcr_content&amp;gt; but was:&amp;lt;/[]_jcr_content&amp;gt;
	at org.apache.sling.launchpad.webapp.integrationtest.resourceresolver.ResourceResolverGeneralTest.testMapResourceAliasJcrContent(ResourceResolverGeneralTest.java:2360)

[ERROR] testMapResourceAlias(org.apache.sling.launchpad.webapp.integrationtest.resourceresolver.ResourceResolverGeneralTest)  Time elapsed: 0.661 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: expected:&amp;lt;/[testAlias/]child&amp;gt; but was:&amp;lt;/[]child&amp;gt;
	at org.apache.sling.launchpad.webapp.integrationtest.resourceresolver.ResourceResolverGeneralTest.testMapResourceAlias(ResourceResolverGeneralTest.java:2334)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16583978" author="rombert" created="Fri, 17 Aug 2018 14:11:52 +0000"  >&lt;p&gt;Fixed edge case in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/9ff4836&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-resourceresolver commit 9ff4836&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16584022" author="rombert" created="Fri, 17 Aug 2018 14:46:29 +0000"  >&lt;p&gt;I&apos;ve also updated the web console in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/commit/69c3a3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-resourceresolver commit 69c3a3e&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12936038/12936038_console.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13520063">SLING-11757</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12977519">SLING-5773</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12936038" name="console.png" size="21309" author="rombert" created="Fri, 17 Aug 2018 14:45:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wgrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7791] ContentImporter does not import characters such as &quot;&amp;&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-7791</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We are using the org.apache.sling.jcr.contentloader.ContentImporter API to import data from an UTF-8 encoded XML file into the JCR repository.&lt;/p&gt;

&lt;p&gt;Only the ImportOptions&#160;has been&#160;customized, and the InputStream contains values such as&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
liberty &amp;amp;amp; equality
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This will get saved as &quot;&lt;b&gt;liberty equality&lt;/b&gt;&quot; when I expect &quot;&lt;b&gt;liberty &amp;amp; equality&lt;/b&gt;&quot;, which I don&apos;t understand as I never saw any issue posting such characters into the JCR.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;org.apache.sling.jcr.contentloader&#160;dependency version is&#160;2.1.10&lt;/p&gt;</description>
                <environment></environment>
        <key id="13175492">SLING-7791</key>
            <summary>ContentImporter does not import characters such as &quot;&amp;&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vanvn">Van</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jul 2018 08:30:15 +0000</created>
                <updated>Mon, 30 Jul 2018 08:47:23 +0000</updated>
                                            <version>JCR ContentLoader 2.1.10</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16561641" author="jsedding" created="Mon, 30 Jul 2018 08:45:01 +0000"  >&lt;p&gt;Thanks for reporting this issue. It would be helpful if you could add a failing test to &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-contentloader/blob/master/src/test/java/org/apache/sling/jcr/contentloader/internal/readers/XmlReaderTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;XmlReaderTest&lt;/a&gt;. A PR on Github works fine.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wgof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7789] Security bug CVE-2015-9251 with some sling dependent jars</title>
                <link>https://issues.apache.org/jira/browse/SLING-7789</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hi Experts,&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160; In our product we are using Sling version 6 in one of our release.(Working on Migration to Sling 10 for next versions)&lt;/p&gt;


&lt;p&gt;&#160;&#160;&#160; Recently we came across a security bug CVE-2015-9251.&lt;br/&gt;
&#160;&#160;&#160; (CVE-2015-9251 is a vulnerability to allow an attacker to execute arbitrary code when text/javascript responses are received from cross-origin ajax requests not containing the option `dataType`. Its CVSS score is 6.1 in NVD.).&lt;br/&gt;
&#160;&#160; &#160;&lt;/p&gt;

&lt;p&gt;&#160;&#160; To fix this an up-gradation of jQuery to versions greater than 3.0.0 is required.&lt;br/&gt;
&#160;&#160; &#160;&lt;br/&gt;
&#160;&#160; &#160;In our product we are using two Sling dependencies which contains jQuery.&lt;br/&gt;
&#160;&#160; &#160;1) org.apache.sling.launchpad.webapp - v6 (war) - contains org.apache.felix.webconsole-3.1.6.jar which internally uses jQuery v1.3.2.js.&lt;br/&gt;
&#160;&#160; &#160;2) org.apache.sling.extensions.explorer - v1.0.3(jar) - contains jQuery v1.4.2.min.js&lt;br/&gt;
&#160;&#160; &#160;&lt;br/&gt;
&#160;&#160; &#160;As part of the fix for the security bug we need to upgrade the jQuery in the jars that are mentioned above.&lt;br/&gt;
&#160;&#160; &#160;For that we checked the latest versions for the above mentioned jars and identified that the jQuery versions are not above v3.0.0.&lt;br/&gt;
&#160;&#160;&#160; So could you please help us in upgrading them as soon as possible.&lt;br/&gt;
&#160;&#160; &#160;&lt;br/&gt;
Thanks,&lt;br/&gt;
Varun.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13175135">SLING-7789</key>
            <summary>Security bug CVE-2015-9251 with some sling dependent jars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Varun G">Varun Ganesh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jul 2018 10:58:19 +0000</created>
                <updated>Mon, 30 Jul 2018 11:03:11 +0000</updated>
                            <resolved>Mon, 30 Jul 2018 11:03:11 +0000</resolved>
                                    <version>Launchpad Builder 6</version>
                    <version>Sling Explorer 1.0.2</version>
                    <version>Sling Explorer 1.0.4</version>
                                                    <component>Extensions</component>
                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16561771" author="rombert" created="Mon, 30 Jul 2018 11:03:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Varun+G&quot; class=&quot;user-hover&quot; rel=&quot;Varun G&quot;&gt;Varun G&lt;/a&gt; - thank you for your report. For the sling explorer part - we&apos;re not shipping that anymore as part of the Sling Starter ( formerly named the Sling Launchpad ) so there&apos;s nothing for us to do here.&lt;/p&gt;

&lt;p&gt;For the Felix Web Console please file a bug with the Felix project. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3weh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7788] registerInjectActivateService() causes non-conform ServiceRegistration</title>
                <link>https://issues.apache.org/jira/browse/SLING-7788</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to the OSGI R6 Spec 5.2.3 the framework has to&#160;automatically set the &lt;tt&gt;objectClass&lt;/tt&gt; property to the service registration for the&#160;types the service is registered for.&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The service interface names under which a service object has been successfully registered are automatically added to the service&apos;s properties under the key objectClass. This value must be set automatically by the Framework and any value provided by the bundle must be overridden.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is correctly implemented in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/blob/5adc8b7eb2c2bbffdd422959388e8c998684eda0/src/main/java/org/apache/sling/testing/mock/osgi/MockServiceRegistration.java#L67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MockServiceRegistration#L67&lt;/a&gt; by using the passed array of full qualified class names given to it from the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/blob/5adc8b7eb2c2bbffdd422959388e8c998684eda0/src/main/java/org/apache/sling/testing/mock/osgi/MockBundleContext.java#L101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MockBundleContext#L101&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/blob/5adc8b7eb2c2bbffdd422959388e8c998684eda0/src/main/java/org/apache/sling/testing/mock/osgi/MockBundleContext.java#L121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MockBundleContext#L121&lt;/a&gt; respectively.&lt;/p&gt;

&lt;p&gt;On the other hand the the execution flow of &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/blob/5adc8b7eb2c2bbffdd422959388e8c998684eda0/src/main/java/org/apache/sling/testing/mock/osgi/context/OsgiContextImpl.java#L155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;registerInjectActivateService&lt;/a&gt; always causes &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/blob/5adc8b7eb2c2bbffdd422959388e8c998684eda0/src/main/java/org/apache/sling/testing/mock/osgi/MockBundleContext.java#L101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MockBundleContext#L101&lt;/a&gt; to be called with &lt;tt&gt;null&lt;/tt&gt; as service class and so the array of services provided by the given object is missing for that registration.&lt;/p&gt;

&lt;p&gt;This causes for example the ServiceTracker according to 701.6.4.6 OSGI R6 to not work properly as the Filter it creates internally is referring to objectClass.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13175109">SLING-7788</key>
            <summary>registerInjectActivateService() causes non-conform ServiceRegistration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jul 2018 09:03:10 +0000</created>
                <updated>Mon, 6 Aug 2018 08:18:06 +0000</updated>
                            <resolved>Tue, 31 Jul 2018 10:01:30 +0000</resolved>
                                    <version>Testing OSGi Mock 2.3.8</version>
                                    <fixVersion>Testing OSGi Mock 2.3.10</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16559483" author="diru" created="Fri, 27 Jul 2018 09:30:04 +0000"  >&lt;p&gt;I added an&#160;ignored test that&#160;illustrates the misbehaviour for the&#160;ServiceTracker here:&#160;&lt;a href=&quot;https://github.com/Buuhuu/sling-org-apache-sling-testing-osgi-mock/commit/01d0eba3e64b0dca06054f6a568e0dc32b165b3b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;01d0eba&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16559600" author="diru" created="Fri, 27 Jul 2018 11:32:38 +0000"  >&lt;p&gt;In the test a MyComponent implementation provides a MyService using DS annotations and metadata&#160;provided as XML.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// doesn&apos;t work
&lt;/span&gt;context.registerInjectActivateService(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyComponent())

&lt;span class=&quot;code-comment&quot;&gt;// working fallback duplicating the information in the annotation
&lt;/span&gt;MyComponent component = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyComponent();
MockOsgi.injectServices(component, context.bundleContext());
context.registerService(MyService.class, component);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16563420" author="sseifert@pro-vision.de" created="Tue, 31 Jul 2018 10:01:30 +0000"  >&lt;p&gt;thanks - i&apos;ve applied the PR&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/commit/bf71f40288c140b9206b1e55b9e90b21431a29a5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/commit/bf71f40288c140b9206b1e55b9e90b21431a29a5&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3webb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7784] Unable to add comments to the removals &#8594; bundles section</title>
                <link>https://issues.apache.org/jira/browse/SLING-7784</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With a configuration such as&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  includes: [
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;com.example:example:some-feature:1.0.0&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;removals&quot;&lt;/span&gt;: {
                &lt;span class=&quot;code-quote&quot;&gt;&quot;bundles&quot;&lt;/span&gt;: [
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;# &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is a comment&quot;&lt;/span&gt;,
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;something:something-&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;:1.9&quot;&lt;/span&gt;
                ]
            }
        }
  ]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get an error saying that&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Error reading feature: features/app.json
	at org.apache.sling.feature.applicationbuilder.impl.Main.assembleApplication(Main.java:231)
	at org.apache.sling.feature.applicationbuilder.impl.Main.main(Main.java:200)
Caused by: java.io.IOException: java.lang.IllegalArgumentException: Unable to parse mvn coordinates/url: # this is a comment
	at org.apache.sling.feature.io.json.FeatureJSONReader.read(FeatureJSONReader.java:80)
	at org.apache.sling.feature.io.json.FeatureJSONReader.read(FeatureJSONReader.java:57)
	at org.apache.sling.feature.io.IOUtils.getFeature(IOUtils.java:180)
	at org.apache.sling.feature.applicationbuilder.impl.Main.assembleApplication(Main.java:226)
	... 1 more
Caused by: java.lang.IllegalArgumentException: Unable to parse mvn coordinates/url: # this is a comment
	at org.apache.sling.feature.ArtifactId.parse(ArtifactId.java:96)
	at org.apache.sling.feature.io.json.FeatureJSONReader.readIncludes(FeatureJSONReader.java:213)
	at org.apache.sling.feature.io.json.FeatureJSONReader.readFeature(FeatureJSONReader.java:144)
	at org.apache.sling.feature.io.json.FeatureJSONReader.read(FeatureJSONReader.java:78)
	... 4 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13174361">SLING-7784</key>
            <summary>Unable to add comments to the removals &#8594; bundles section</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jul 2018 13:32:46 +0000</created>
                <updated>Thu, 13 Feb 2020 09:06:06 +0000</updated>
                            <resolved>Wed, 25 Jul 2018 19:20:16 +0000</resolved>
                                    <version>Feature Model IO 0.1.2</version>
                                    <fixVersion>Feature Model IO 0.2.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16555669" author="rombert" created="Wed, 25 Jul 2018 13:34:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - FYI&lt;/p&gt;</comment>
                            <comment id="16555813" author="cziegeler" created="Wed, 25 Jul 2018 15:10:00 +0000"  >&lt;p&gt;As far as I can tell, comments are currently only allowed as keys, but not for a value&lt;/p&gt;</comment>
                            <comment id="16556154" author="cziegeler" created="Wed, 25 Jul 2018 19:20:09 +0000"  >&lt;p&gt;I&apos;ve added extra checks for comments in the bundles and artifacts sections&lt;/p&gt;</comment>
                            <comment id="16558044" author="rombert" created="Thu, 26 Jul 2018 08:11:39 +0000"  >&lt;p&gt;Thanks for the quick fixes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w9pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7783] Unable to remove bundles without specifying a version</title>
                <link>https://issues.apache.org/jira/browse/SLING-7783</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When processing an include I want to remove a bundle without specifying the version. As the included feature evolves, the removal will probably not work anymore without me knowing.&lt;/p&gt;

&lt;p&gt;I tried the following:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;specifying the bundle as &quot;groupId:artifactId&quot; -&amp;gt; Illegal maven coordinates&lt;/li&gt;
	&lt;li&gt;specifying the bundle as &quot;groupId:artifactId:&quot; -&amp;gt; Illegal maven coordinates&lt;/li&gt;
	&lt;li&gt;specifying the bundle as &quot;groupId:artifactId:0.0.0&quot; -&amp;gt; Bundle is not removed&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13174359">SLING-7783</key>
            <summary>Unable to remove bundles without specifying a version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jul 2018 13:25:39 +0000</created>
                <updated>Thu, 13 Feb 2020 09:06:33 +0000</updated>
                            <resolved>Wed, 25 Jul 2018 14:58:12 +0000</resolved>
                                    <version>Feature Model 0.1.2</version>
                                    <fixVersion>Feature Model 0.2.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16555646" author="rombert" created="Wed, 25 Jul 2018 13:26:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - FYI&lt;/p&gt;</comment>
                            <comment id="16555709" author="cziegeler" created="Wed, 25 Jul 2018 13:51:31 +0000"  >&lt;p&gt;After a short discussion with Robert, we came to the conclusion that:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;you have to specify a version&lt;/li&gt;
	&lt;li&gt;if a version other than 0.0.0 is specified, that exact version is tried to be removed, if it fails, an error should be thrown&lt;/li&gt;
	&lt;li&gt;if version 0.0.0 is specified, any bundle with those ids (not regarding the version) is removed&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16555799" author="cziegeler" created="Wed, 25 Jul 2018 14:58:12 +0000"  >&lt;p&gt;Implemented as explained above, added tests. Also implemented this for artifacts in an extension in the same way and fixed a bug in removal of artifacts from extensions&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3w9ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7781] LogoutServlet does not define &quot;sing.servlet.paths&quot; as an array</title>
                <link>https://issues.apache.org/jira/browse/SLING-7781</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The org.apache.sling.auth.core.impl.LogoutServlet defines the sling.servlet.paths without a cardinality, thus the respective configuration dialog does not allow specifying multiple entries. It should be like so:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   /**
     * The servlet is registered on &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; path.
     */
    @Property(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;sling.servlet.paths&quot;&lt;/span&gt;, cardinality=&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; SERVLET_PATH = &lt;span class=&quot;code-quote&quot;&gt;&quot;/system/sling/logout&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13172582">SLING-7781</key>
            <summary>LogoutServlet does not define &quot;sing.servlet.paths&quot; as an array</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="o.otto">Olaf Otto</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Jul 2018 07:54:07 +0000</created>
                <updated>Fri, 19 Mar 2021 09:54:34 +0000</updated>
                            <resolved>Fri, 19 Mar 2021 09:54:34 +0000</resolved>
                                    <version>Auth Core 1.4.2</version>
                                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16546496" author="rombert" created="Tue, 17 Jul 2018 12:05:06 +0000"  >&lt;p&gt;Thanks for the report &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=o.otto&quot; class=&quot;user-hover&quot; rel=&quot;o.otto&quot;&gt;o.otto&lt;/a&gt;! Would you like to submit a PR with a fix?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vyqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7778] race-condition in scheduled job creation might keep scheduled job in-memory, and cause a duplicate scheduled job execution</title>
                <link>https://issues.apache.org/jira/browse/SLING-7778</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;h2&gt;&lt;a name=&quot;case1%3A%28extremelyunlikely%29observationfasterthanaddOrUpdateJobcanevenfinish&quot;&gt;&lt;/a&gt;case 1 : (extremely unlikely) observation faster than addOrUpdateJob can even finish&lt;/h2&gt;

&lt;p&gt;The creation of a scheduled job is handled in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/JobSchedulerImpl.java#L501&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;JobSchedulerImpl.addScheduledJob&lt;/tt&gt;&lt;/a&gt; which in turn &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/JobSchedulerImpl.java#L523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;calls &lt;tt&gt;scheduledJobHandler.addOrUpdateJob&lt;/tt&gt;&lt;/a&gt;. There, the job is first persisted to the repository via &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java#L213&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;calling &lt;tt&gt;writeScheduledJob&lt;/tt&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Normally the sequence of events is then as follows:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;A&amp;#93;&lt;/span&gt; the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java#L216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;synchronized block in &lt;tt&gt;addOrUpdateJob&lt;/tt&gt;&lt;/a&gt; is entered and the job is scheduled with quartz.&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;B&amp;#93;&lt;/span&gt; then shortly afterwards, observation is triggered and &lt;tt&gt;handleAddOrUpdate&lt;/tt&gt; is called. This will, as a &lt;b&gt;side-effect&lt;/b&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java#L446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;add the scheduled job to the &lt;tt&gt;scheduledJobs&lt;/tt&gt; map&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;the result of this being that the scheduled job is now in &lt;tt&gt;ScheduledJobHandler.scheduledJobs&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;later on, when the scheduled job is finished, &lt;tt&gt;handleRemove()&lt;/tt&gt; (or similar) is called, and it checks if it finds the scheduled job in &lt;tt&gt;ScheduledJobHandler.scheduledJobs&lt;/tt&gt;. if it does, all good. And here we&apos;re in the all good case, so all is fine&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, there&apos;s the following race-condition:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;first &lt;span class=&quot;error&quot;&gt;&amp;#91;B&amp;#93;&lt;/span&gt; happens, ie first the observation event is triggered, so &lt;tt&gt;handleAddOrUpdate&lt;/tt&gt; is called, and again the side-effect hits: the scheduled job is added to the &lt;tt&gt;ScheduledJobHandler.scheduledJobs&lt;/tt&gt;. all good so far&lt;/li&gt;
	&lt;li&gt;then &lt;span class=&quot;error&quot;&gt;&amp;#91;A&amp;#93;&lt;/span&gt; continues into the synchronized block. &lt;b&gt;But&lt;/b&gt; now, the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java#L217&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;remove of the scheduled job&lt;/a&gt; actually does damage: the scheduled job ends up &lt;b&gt;not&lt;/b&gt; being in the &lt;tt&gt;ScheduledJobHandler.scheduledJobs&lt;/tt&gt; map.&lt;/li&gt;
	&lt;li&gt;so in this scenario, when a later &lt;tt&gt;handleRemove()&lt;/tt&gt; (or similar) happens, it can&apos;t find the scheduled job (see &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java#L370&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; h being null)&lt;/li&gt;
	&lt;li&gt;the result being that &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/ScheduledJobHandler.java#L371&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;JobScheduler.unscheduleJob&lt;/tt&gt;&lt;/a&gt; is &lt;b&gt;not invoked&lt;/b&gt;, &lt;b&gt;leaving the scheduled job with the JobSchedulerImpl&lt;/b&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And the result of this race-condition is that &lt;tt&gt;JobSchedulerImpl.scheduledJobs&lt;/tt&gt; map has a zombie scheduled job, which it shouldn&apos;t actually have. Note &lt;b&gt;this situation can be verified in the /system/console/slingevent webconsole&lt;/b&gt; under &quot;Scheduled Jobs&quot;.&lt;/p&gt;

&lt;p&gt;So later on for example, a topology event happens, such as a mere PROPERTIES_CHANGED_EVENT. That in turn will trigger &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/ca009499cbe30ae30df5069effe051e0bef9ef72/src/main/java/org/apache/sling/event/impl/jobs/scheduling/JobSchedulerImpl.java#L152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;JobSchedulerImpl.configurationChanged()&lt;/tt&gt;&lt;/a&gt; which will now &lt;b&gt;re-schedule the previously scheduled job&lt;/b&gt;. And we have a duplicate scheduled job execution.&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;case2%3A%28likely%29scheduledjobfinishesbeforeobservationeventtriggered&quot;&gt;&lt;/a&gt;case 2: (likely) scheduled job finishes before observation event triggered&lt;/h2&gt;

&lt;p&gt;Besides case 1, there&apos;s also the &lt;b&gt;more likely&lt;/b&gt; case 2: where a scheduled job finishes (thus calls &lt;tt&gt;ScheduledJobHandler.remove()&lt;/tt&gt;) before the observation event for &lt;tt&gt;ADDED&lt;/tt&gt; was ever called (leading to &lt;tt&gt;ScheduledJobHandler.handleAddOrUpdate()&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;In this case, the &lt;tt&gt;remove()&lt;/tt&gt; fails to delete the scheduled job from the (parent) &lt;tt&gt;JobSchedulerImpl&lt;/tt&gt;, as it doesn&apos;t have it in the &lt;tt&gt;scheduledJob&lt;/tt&gt; list yet.&lt;/p&gt;

&lt;p&gt;Which results - same as case 1 - in an inconsistency leading to a stale &lt;tt&gt;ScheduledJobInfoImpl&lt;/tt&gt; in &lt;tt&gt;JobSchedulerImpl.scheduledJobs&lt;/tt&gt; map - which when a PROPERTIES_CHANGED_EVENT is called leads to duplicate scheduled job execution.&lt;/p&gt;

&lt;p&gt;Note that this is only likely to happen if the schedule is set for &apos;very soon now&apos;, eg &lt;tt&gt;at(NOW+1000)&lt;/tt&gt; or something along those lines. If the schedule is couple minutes in the future, the likelyhood of observation not triggering before drops towards zero.&lt;/p&gt;

&lt;p&gt;So overall, this scenario is likely to happen only with such &apos;immediate schedules&apos; and could be mitigated by increasing the delay to eg 1 or a couple of minutes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13171756">SLING-7778</key>
            <summary>race-condition in scheduled job creation might keep scheduled job in-memory, and cause a duplicate scheduled job execution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jul 2018 15:31:18 +0000</created>
                <updated>Thu, 26 Sep 2019 12:39:37 +0000</updated>
                            <resolved>Tue, 17 Jul 2018 09:33:44 +0000</resolved>
                                    <version>Event 4.2.0</version>
                                    <fixVersion>Event 4.2.12</fixVersion>
                                    <component>Event</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16545055" author="egli" created="Mon, 16 Jul 2018 10:49:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4680&quot; title=&quot;Decouple scheduled jobs from observation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4680&quot;&gt;&lt;del&gt;SLING-4680&lt;/del&gt;&lt;/a&gt; introdued the ScheduledJobHandler and the problematic code (not adding the Holder to the &lt;tt&gt;scheduledJobs&lt;/tt&gt;) was there since then.&lt;/p&gt;</comment>
                            <comment id="16545113" author="egli" created="Mon, 16 Jul 2018 12:02:16 +0000"  >&lt;p&gt;I&apos;ve attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12931775/12931775_SLING-7778.patch&quot; title=&quot;SLING-7778.patch attached to SLING-7778&quot;&gt;SLING-7778.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which suggests as a fix to add the &lt;tt&gt;Holder&lt;/tt&gt; to the &lt;tt&gt;scheduledJobs&lt;/tt&gt; map in &lt;tt&gt;ScheduledJobHandler.addOrUpdateJob&lt;/tt&gt;. The idea being that without this, the &lt;tt&gt;scheduledJobs&lt;/tt&gt; maps between &lt;tt&gt;JobSchedulerImpl&lt;/tt&gt; and &lt;tt&gt;ScheduledJobHandler&lt;/tt&gt; are not in sync, leading to &lt;tt&gt;ScheduledJobHandler.remove&lt;/tt&gt; not calling &lt;tt&gt;JobSchedulerImpl.unscheduleJob&lt;/tt&gt;, thus leaving a stale scheduled job with the &lt;tt&gt;JobSchedulerImpl&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;With this, the synchronization in &lt;tt&gt;ScheduledJobHandler.addOrUpdateJob&lt;/tt&gt; doesn&apos;t need to be touched at all.&lt;/p&gt;

&lt;p&gt;Note that the patch fixes both cases mentioned&lt;/p&gt;

&lt;p&gt;What I&apos;m not sure is, if there was perhaps some reason for not adding it originally, therefore I would appreciate if someone (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; ?) could give this a review, thx!!&lt;/p&gt;</comment>
                            <comment id="16545946" author="cziegeler" created="Tue, 17 Jul 2018 02:17:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; The fix looks ok to me. As far as I can remember, the put was not in there as the basic idea was that observation will be kicked by the write and therefore there is no need for the additional put. Clearly, this didn&apos;t consider potential race conditions as found in this issue&lt;br/&gt;
This fix is definitely easier than using larger sync blocks and should do the trick as well. Thanks&lt;/p&gt;</comment>
                            <comment id="16546251" author="egli" created="Tue, 17 Jul 2018 09:33:44 +0000"  >&lt;p&gt;Thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;!&lt;br/&gt;
I&apos;ve committed the change&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/commit/7d356b47a135823b81402788e3a6cb3ed9b667e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; plus increased a test timeout &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/commit/fb84d55fc8de806182a70b4fdc5affe4891f8b74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;br/&gt;
Marking as resolved.&lt;br/&gt;
Release 4.2.12 coming up next&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13170091">SLING-7762</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12825964">SLING-4680</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12931775" name="SLING-7778.patch" size="3788" author="stefanegli" created="Mon, 16 Jul 2018 11:58:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vtun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7777] XSSFilter is rejecting URLs containing only queries or fragments</title>
                <link>https://issues.apache.org/jira/browse/SLING-7777</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The XSSFilter is erroneously rejecting URLs that consist only of queries, (potentially empty) fragments or both, e.g. &quot;#&quot;, &quot;#test&quot;, &quot;?foo=bar&quot; etc.&#160;&lt;/p&gt;

&lt;p&gt;Even though the RELATIVE_PART regexp contains an PATH_EMPTY group, it is explicitly matching the &lt;b&gt;entire&lt;/b&gt;&#160;string, so&#160;will fail&#160;if the QUERY or FRAGMENT groups match.&lt;/p&gt;

&lt;p&gt;A potential solution (see attached patch and tests) might be to remove the PATH_EMPTY group from the RELATIVE_PART, and make the entire RELATIVE_PART optional by adding ? to the group in RELATIVE_REF. This will still match completely empty URLs.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13171736">SLING-7777</key>
            <summary>XSSFilter is rejecting URLs containing only queries or fragments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="chaotic">Lars Krapf</reporter>
                        <labels>
                            <label>XSS</label>
                    </labels>
                <created>Thu, 12 Jul 2018 13:46:10 +0000</created>
                <updated>Tue, 7 Aug 2018 12:20:44 +0000</updated>
                            <resolved>Thu, 2 Aug 2018 15:21:54 +0000</resolved>
                                    <version>XSS Protection API 2.0.10</version>
                                    <fixVersion>XSS Protection API 2.0.12</fixVersion>
                                    <component>XSS Protection API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16566939" author="radu.cotescu" created="Thu, 2 Aug 2018 15:21:54 +0000"  >&lt;p&gt;Applied Lars&apos; patch in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/4a90915&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 4a90915&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12931327" name="sling_xssfilter_patch.txt" size="26861" author="chaotic" created="Thu, 12 Jul 2018 13:45:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vtq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7774] Integrate Kerberos into Apache Sling</title>
                <link>https://issues.apache.org/jira/browse/SLING-7774</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Probably this is not a bug but we tried to enable Kerberos authentication in Sling but were not able to accomplish it. Documentation also gives us no hint how to do that.&lt;/p&gt;

&lt;p&gt;What would be the correct way to add Kerberos authentication to Sling?&lt;/p&gt;

&lt;p&gt;This is what we did:&lt;/p&gt;

&lt;p&gt;First of all we changed all default JAAS entries in the &quot;Apache Felix JAAS Configuration Factory&quot; to &quot;Control Flag&quot;=&quot;sufficient&quot;.&lt;/p&gt;

&lt;p&gt;Then we added a&#160;JAAS Kerberos configuration with &quot;Ranking&quot;=0, &quot;Class Name&quot;=&quot;com.sun.security.auth.module.Krb5LoginModule&quot;, an empty &quot;Realm&quot; and the following options:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
doNotPrompt=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
principal=&lt;span class=&quot;code-quote&quot;&gt;&quot;http/dnsname@windows_domain_name&quot;&lt;/span&gt;
useKeyTab=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
keyTab=&lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/sling/krb5.keytab&quot;&lt;/span&gt;
storeKey=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When running a `curl -u : --negotiate` against the web server, we get the following error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt; GET /bin/browser.html HTTP/1.1
&amp;gt; Host:&#160;dnsname
&amp;gt; User-Agent: curl/7.59.0
&amp;gt; Accept: */*
&amp;gt;
&amp;lt; HTTP/1.1 500 Server Error
&amp;lt; Server: nginx/1.13.8
&amp;lt; Date: Tue, 10 Jul 2018 15:05:12 GMT
&amp;lt; Content-Type: text/html;charset=utf-8
&amp;lt; Transfer-Encoding: chunked
&amp;lt; Connection: keep-alive
&amp;lt;
&amp;lt;!DOCTYPE HTML PUBLIC &lt;span class=&quot;code-quote&quot;&gt;&quot;-&lt;span class=&quot;code-comment&quot;&gt;//IETF//DTD HTML 2.0//EN&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;500 Internal Server Error&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;h1&amp;gt;Internal Server Error (500)&amp;lt;/h1&amp;gt;
&amp;lt;p&amp;gt;The requested URL /bin/browser.html resulted in an error in com.composum.sling.nodes.browser.BrowserServlet.&amp;lt;/p&amp;gt;
&amp;lt;h3&amp;gt;Exception:&amp;lt;/h3&amp;gt;
&amp;lt;pre&amp;gt;
java.lang.NullPointerException
 at com.composum.sling.core.util.LinkUtil.getExtension(LinkUtil.java:342)
 at com.composum.sling.core.util.LinkUtil.getExtension(LinkUtil.java:299)
 at com.composum.sling.core.util.LinkUtil.getUrl(LinkUtil.java:136)
 at com.composum.sling.core.util.LinkUtil.getUrl(LinkUtil.java:94)
 at com.composum.sling.core.util.LinkUtil.getUrl(LinkUtil.java:45)
 at com.composum.sling.core.servlet.AbstractConsoleServlet.doGet(AbstractConsoleServlet.java:80)
 at org.apache.sling.api.servlets.SlingSafeMethodsServlet.mayService(SlingSafeMethodsServlet.java:266)
 at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:342)
 at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:374)
 at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
 at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
 at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
 at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
 at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
 at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
 at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107)
 at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
 at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:131)
 at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
 at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
 at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:234)
 at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:120)
 at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:86)
 at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96)
 at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
 at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
 at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:131)
 at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
 at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
 at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72)
 at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
 at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
 at org.apache.sling.engine.impl.parameters.RequestParameterSupportConfigurer.doFilter(RequestParameterSupportConfigurer.java:63)
 at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
 at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:81)
 at org.apache.felix.http.base.internal.dispatch.Dispatcher$1.doFilter(Dispatcher.java:146)
 at org.apache.felix.http.base.internal.whiteboard.WhiteboardManager.invokePreprocessors(WhiteboardManager.java:1000)
 at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:91)
 at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
 at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:864)
 at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:535)
 at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
 at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595)
 at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
 at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253)
 at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)
 at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473)
 at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564)
 at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)
 at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155)
 at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)
 at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219)
 at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
 at org.eclipse.jetty.server.Server.handle(Server.java:531)
 at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352)
 at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)
 at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281)
 at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)
 at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)
 at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:319)
 at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:175)
 at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:133)
 at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)
 at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:754)
 at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:672)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&amp;lt;/pre&amp;gt;
&amp;lt;h3&amp;gt;Request Progress:&amp;lt;/h3&amp;gt;
&amp;lt;pre&amp;gt;
 0 TIMER_START{Request Processing}
 1 COMMENT timer_end format is {&amp;amp;lt;elapsed microseconds&amp;amp;gt;,&amp;amp;lt;timer name&amp;amp;gt;} &amp;amp;lt;optional message&amp;amp;gt;
 7 LOG Method=GET, PathInfo=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
 9 TIMER_START{handleSecurity}
 935 TIMER_END{924,handleSecurity} authenticator org.apache.sling.auth.core.impl.SlingAuthenticator@135b75c4 returns &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 1688 TIMER_START{ResourceResolution}
 1774 TIMER_END{83,ResourceResolution} URI=/bin/browser.html resolves to Resource=ServletResource, servlet=com.composum.sling.nodes.browser.BrowserServlet, path=/bin/browser
 1790 LOG Resource Path Info: SlingRequestPathInfo: path=&amp;amp;apos;/bin/browser&amp;amp;apos;, selectorString=&amp;amp;apos;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;amp;apos;, extension=&amp;amp;apos;html&amp;amp;apos;, suffix=&amp;amp;apos;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;amp;apos;
 1790 TIMER_START{ServletResolution}
 1794 TIMER_START{resolveServlet(/bin/browser)}
 1806 TIMER_END{11,resolveServlet(/bin/browser)} Using servlet com.composum.sling.nodes.browser.BrowserServlet
 1808 TIMER_END{17,ServletResolution} URI=/bin/browser.html handled by Servlet=com.composum.sling.nodes.browser.BrowserServlet
 1811 LOG Applying Requestfilters
 1818 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter
 1822 LOG Calling filter: org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter
 1828 LOG Applying Componentfilters
 1836 TIMER_START{com.composum.sling.nodes.browser.BrowserServlet#0}
 2150 TIMER_END{313,com.composum.sling.nodes.browser.BrowserServlet#0}
 2194 LOG Filter timing: filter=org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter, &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;=0, total=0, &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt;=0
 2707 LOG Applying Error filters
 2710 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter
 2718 TIMER_START{handleError:throwable=java.lang.NullPointerException}
 3386 TIMER_END{667,handleError:throwable=java.lang.NullPointerException} Using handler org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet
 4113 TIMER_END{4112,Request Processing} Dumping SlingRequestProgressTracker Entries
&amp;lt;/pre&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;address&amp;gt;ApacheSling/2.6 (jetty/9.4.9.v20180320, OpenJDK 64-Bit Server VM 1.8.0_151, Linux 4.4.0-119-&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt; amd64)&amp;lt;/address&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When doing the same against&#160;/system/console/bundles the reply is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt; HTTP/1.1 401 Unauthorized
&amp;lt; Server: nginx/1.13.8
&amp;lt; Date: Tue, 10 Jul 2018 15:18:30 GMT
&amp;lt; Content-Length: 0
&amp;lt; Connection: keep-alive
&amp;lt; WWW-Authenticate: Basic realm=&lt;span class=&quot;code-quote&quot;&gt;&quot;OSGi Management Console&quot;&lt;/span&gt;
&amp;lt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here we are missing the &quot;WWW-Authenticate: Negotiate&quot; header.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13171185">SLING-7774</key>
            <summary>Integrate Kerberos into Apache Sling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="web">Georg Weber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jul 2018 15:20:58 +0000</created>
                <updated>Wed, 11 Jul 2018 11:46:06 +0000</updated>
                                                                            <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16539952" author="rombert" created="Wed, 11 Jul 2018 11:46:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=web&quot; class=&quot;user-hover&quot; rel=&quot;web&quot;&gt;web&lt;/a&gt; - I think you&apos;re running into &lt;a href=&quot;https://github.com/ist-dresden/composum/issues/132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ist-dresden/composum/issues/132&lt;/a&gt; . I would suggest removing the composum bundles from Sling and trying again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vqbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7773] Upgrade to ASF Parent 20</title>
                <link>https://issues.apache.org/jira/browse/SLING-7773</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;To benefit from some version upgrades in ASF Parent 20 (&lt;a href=&quot;https://lists.apache.org/thread.html/7f3a1248062eb91f29d6dcba8d5c5567c48d61ee5f9a9ae3b5e3a64e@%3Cdev.maven.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/7f3a1248062eb91f29d6dcba8d5c5567c48d61ee5f9a9ae3b5e3a64e@%3Cdev.maven.apache.org%3E&lt;/a&gt;) sling parent should leverage this version.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13171070">SLING-7773</key>
            <summary>Upgrade to ASF Parent 20</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jul 2018 06:38:51 +0000</created>
                <updated>Thu, 9 Aug 2018 18:26:52 +0000</updated>
                            <resolved>Tue, 10 Jul 2018 06:41:39 +0000</resolved>
                                                    <fixVersion>Parent 34</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16538115" author="kwin" created="Tue, 10 Jul 2018 06:41:39 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-parent/commit/17aca6d285b953c6d690c84a4f33f8dfcfcb465c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-parent/commit/17aca6d285b953c6d690c84a4f33f8dfcfcb465c&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vpmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7771] org.apache.sling.xss.impl.XSSFilterImpl#isValidHref can throw exceptions for illegal hex escape sequences</title>
                <link>https://issues.apache.org/jira/browse/SLING-7771</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The fix introduced in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7323&quot; title=&quot;Optimise URL handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7323&quot;&gt;&lt;del&gt;SLING-7323&lt;/del&gt;&lt;/a&gt; allows &lt;tt&gt;IllegalArgumentException&lt;/tt&gt; to be thrown in case a URL contains illegal hex escape characters. Instead of throwing a &lt;tt&gt;RuntimeException&lt;/tt&gt;, the implementation should just return &lt;tt&gt;false&lt;/tt&gt; and log the exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13170705">SLING-7771</key>
            <summary>org.apache.sling.xss.impl.XSSFilterImpl#isValidHref can throw exceptions for illegal hex escape sequences</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 8 Jul 2018 13:16:35 +0000</created>
                <updated>Thu, 12 Jul 2018 09:11:35 +0000</updated>
                            <resolved>Sun, 8 Jul 2018 13:21:59 +0000</resolved>
                                    <version>XSS Protection API 2.0.4</version>
                    <version>XSS Protection API 2.0.6</version>
                    <version>XSS Protection API 2.0.8</version>
                                    <fixVersion>XSS Protection API 2.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16536108" author="radu.cotescu" created="Sun, 8 Jul 2018 13:22:00 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/b2c44af&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit b2c44af&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vnfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7770] URLs ending in &quot;/&quot; get filtered by AntiSamy</title>
                <link>https://issues.apache.org/jira/browse/SLING-7770</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;URLs ending in &apos;/&apos; are filtered by AntiSamy. The bug was introduce by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7741&quot; title=&quot;org.apache.sling.xss.impl.XSSAPIImpl#getValidHref doesn&amp;#39;t correctly handle the &amp;quot;:&amp;quot; character in URL fragments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7741&quot;&gt;&lt;del&gt;SLING-7741&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13170703">SLING-7770</key>
            <summary>URLs ending in &quot;/&quot; get filtered by AntiSamy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 8 Jul 2018 13:00:31 +0000</created>
                <updated>Thu, 12 Jul 2018 09:11:35 +0000</updated>
                            <resolved>Sun, 8 Jul 2018 13:11:30 +0000</resolved>
                                    <version>XSS Protection API 2.0.8</version>
                                    <fixVersion>XSS Protection API 2.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16536100" author="radu.cotescu" created="Sun, 8 Jul 2018 13:11:30 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/5d74f0d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 5d74f0d&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13166372">SLING-7741</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vnf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7765] Application creation missing variable declarations</title>
                <link>https://issues.apache.org/jira/browse/SLING-7765</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When creating an application from one or more features, the &lt;tt&gt;variables&lt;/tt&gt; section is missing in the resulting application.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13170436">SLING-7765</key>
            <summary>Application creation missing variable declarations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jul 2018 08:25:40 +0000</created>
                <updated>Thu, 13 Feb 2020 09:06:09 +0000</updated>
                            <resolved>Tue, 17 Jul 2018 14:16:08 +0000</resolved>
                                    <version>Feature Model IO 0.1.2</version>
                    <version>Feature Model 0.1.2</version>
                                    <fixVersion>Feature Model 0.2.0</fixVersion>
                    <fixVersion>Feature Model IO 0.2.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16546623" author="bosschaert" created="Tue, 17 Jul 2018 13:46:14 +0000"  >&lt;p&gt;This commit adds it for the application creation: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/commit/7f2ea5e169b85086351f2aa33e68ae62d315301e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/commit/7f2ea5e169b85086351f2aa33e68ae62d315301e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However with that the variables are still not handled for the includes.&lt;/p&gt;</comment>
                            <comment id="16546678" author="bosschaert" created="Tue, 17 Jul 2018 14:15:28 +0000"  >&lt;p&gt;The following handles the includes: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/commit/577ca160e757c5042cd241c8544afdaa2d46f8ef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/commit/577ca160e757c5042cd241c8544afdaa2d46f8ef&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vlsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7763] Slingstart Maven Plugin looks at non-substituted files when converting to provisioning model</title>
                <link>https://issues.apache.org/jira/browse/SLING-7763</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The slingstart maven plugin converts feature model files back to provisioning model files. However it looks at the feature model files in src/main/features, these could contain maven variables such as ${project.groupId}, ${project.artifactId} and ${project.version}. It should used the files that are converted instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13170109">SLING-7763</key>
            <summary>Slingstart Maven Plugin looks at non-substituted files when converting to provisioning model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Jul 2018 15:43:42 +0000</created>
                <updated>Mon, 17 Jun 2019 12:55:54 +0000</updated>
                            <resolved>Thu, 13 Jun 2019 11:35:18 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.8.2</version>
                                    <fixVersion>Slingstart Maven Plugin 1.8.4</fixVersion>
                                    <component>Feature Model</component>
                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16532898" author="bosschaert" created="Wed, 4 Jul 2018 15:46:55 +0000"  >&lt;p&gt;Resolved in &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-slingstart-maven-plugin.git;a=commitdiff;h=c098628d7847186f735c411a2916d8cb5f8abe2c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=sling-slingstart-maven-plugin.git;a=commitdiff;h=c098628d7847186f735c411a2916d8cb5f8abe2c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vjrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7762] Sling jobs scheduled by date do not disappear from scheduledJobs map</title>
                <link>https://issues.apache.org/jira/browse/SLING-7762</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We are using&lt;/p&gt;

&lt;p&gt;Adobe&#160;Experience&#160;Manager&#160;(6.3.1.2)&lt;/p&gt;

&lt;p&gt;which has bundle Apache Sling Event Support (org.apache.sling.event) 4.2.0.&lt;/p&gt;

&lt;p&gt;We are using jobs scheduled by date. They execute and are removed from the repository but they remain&#160;listed in the sling event console under scheduled jobs. It looks like the jobs get executed after every deploy of our sites.&lt;/p&gt;

&lt;p&gt;After restarting the instance the jobs are gone from the console as well.&lt;/p&gt;

&lt;p&gt;I looked at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-event/blob/3d52d446e73bfae5043fe18be383ccc540660214/src/main/java/org/apache/sling/event/impl/jobs/scheduling/JobSchedulerImpl.java#L305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-event/blob/3d52d446e73bfae5043fe18be383ccc540660214/src/main/java/org/apache/sling/event/impl/jobs/scheduling/JobSchedulerImpl.java#L305&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could it be that a line is missing to also remove the job from the&#160;scheduledJobs map? Or am I missing something?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13170091">SLING-7762</key>
            <summary>Sling jobs scheduled by date do not disappear from scheduledJobs map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="kristof.vanbecelaere">Kristof Vanbecelaere</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Jul 2018 14:11:38 +0000</created>
                <updated>Wed, 8 Jun 2022 15:39:23 +0000</updated>
                            <resolved>Mon, 16 Jul 2018 07:35:39 +0000</resolved>
                                    <version>Event 4.2.0</version>
                                                    <component>Event</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16544901" author="egli" created="Mon, 16 Jul 2018 07:35:39 +0000"  >&lt;p&gt;This is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7778&quot; title=&quot;race-condition in scheduled job creation might keep scheduled job in-memory, and cause a duplicate scheduled job execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7778&quot;&gt;&lt;del&gt;SLING-7778&lt;/del&gt;&lt;/a&gt;. Further progress will be handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7778&quot; title=&quot;race-condition in scheduled job creation might keep scheduled job in-memory, and cause a duplicate scheduled job execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7778&quot;&gt;&lt;del&gt;SLING-7778&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13171756">SLING-7778</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vjnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7758] [XSS] Enable support for data attributes</title>
                <link>https://issues.apache.org/jira/browse/SLING-7758</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;AntiSamy has added support for &lt;tt&gt;data-&lt;/tt&gt; attributes in version 1.5.7. Sling&apos;s &lt;tt&gt;config.xml&lt;/tt&gt; file should be updated to enable the needed configurations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13169188">SLING-7758</key>
            <summary>[XSS] Enable support for data attributes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2018 15:42:59 +0000</created>
                <updated>Tue, 3 Jul 2018 10:04:44 +0000</updated>
                            <resolved>Fri, 29 Jun 2018 15:47:38 +0000</resolved>
                                                    <fixVersion>XSS Protection API 2.0.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16527843" author="radu.cotescu" created="Fri, 29 Jun 2018 15:47:38 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/778794d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 778794d&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ve3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7755] JavaUseProvider might attempt to instantiate interfaces or abstract classes</title>
                <link>https://issues.apache.org/jira/browse/SLING-7755</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If you have a data-sly-use which receives a FQN of an interface or abstract class, the Java Use provider will not make any checks and will try to instantiate it anyway, causing a&#160;java.lang.NoSuchMethodException com.example.InterfaceName.&amp;lt;init&amp;gt;().&lt;/p&gt;

&lt;p&gt;This is a problem when your code base normally relies in an adapter factory to get implementation of an interface and the adaptTo returns null, causing sightly to try the java Use provider&lt;/p&gt;

&lt;p&gt;The Java Use provider should not attempt to instantiate blindly classes that it receives.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13168598">SLING-7755</key>
            <summary>JavaUseProvider might attempt to instantiate interfaces or abstract classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="santiagozky">Santiago Garc&#237;a Pimentel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jun 2018 11:25:48 +0000</created>
                <updated>Tue, 2 Oct 2018 09:18:25 +0000</updated>
                            <resolved>Mon, 27 Aug 2018 16:34:14 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.18</version>
                                    <fixVersion>Scripting HTL Engine 1.0.56-1.4.0</fixVersion>
                    <fixVersion>Scripting HTL Testing Content 1.0.12-1.4.0</fixVersion>
                    <fixVersion>Scripting HTL Testing 1.0.12-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="16525099" author="santiagozky" created="Wed, 27 Jun 2018 13:34:08 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; . I think you are familiar with this (says git). would you mind having a look at this and my PR?&lt;/p&gt;

&lt;p&gt;thank you!&lt;/p&gt;</comment>
                            <comment id="16531641" author="radu.cotescu" created="Tue, 3 Jul 2018 16:28:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=santiagozky&quot; class=&quot;user-hover&quot; rel=&quot;santiagozky&quot;&gt;santiagozky&lt;/a&gt;, the PR looks okay. Could you please provide some tests with it too? You&apos;d have to provide some Java code in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; (the abstract class or interface) and a test in &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16533571" author="santiagozky" created="Thu, 5 Jul 2018 12:06:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; I think I managed&#160; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16539796" author="santiagozky" created="Wed, 11 Jul 2018 09:41:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;&#160;would you mind having a look at this when you have some time?&#160;&lt;/p&gt;

&lt;p&gt;thanks!&lt;/p&gt;</comment>
                            <comment id="16593911" author="radu.cotescu" created="Mon, 27 Aug 2018 16:34:14 +0000"  >&lt;p&gt;Applied PRs in:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/360df4e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 360df4e&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/commit/5169606&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 5169606&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/commit/d41ff5a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit d41ff5a&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vagf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7752] Deserializing and serializing a feature model file suffles the configurations</title>
                <link>https://issues.apache.org/jira/browse/SLING-7752</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h3&gt;

&lt;p&gt;Deserializing and serializing a feature model file suffles the configurations. This happens, because unordered maps (HashMaps/Hashtables) are used in the implementations. The problem is relevant in the context of adding these files in code versioning systems, because a minor change to a file, done in an automated fashion, produces a big diff in the versioning system and it becomes very hard to see exactly what is the relevant change.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13167580">SLING-7752</key>
            <summary>Deserializing and serializing a feature model file suffles the configurations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="andrei.tuicu">Andrei Tuicu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jun 2018 07:50:33 +0000</created>
                <updated>Thu, 13 Feb 2020 09:06:08 +0000</updated>
                            <resolved>Wed, 31 Oct 2018 09:36:18 +0000</resolved>
                                                    <fixVersion>Feature Model 0.2.0</fixVersion>
                    <fixVersion>Feature Model IO 0.2.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16520146" author="githubbot" created="Fri, 22 Jun 2018 09:19:13 +0000"  >&lt;p&gt;andreituicu opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520153" author="githubbot" created="Fri, 22 Jun 2018 09:24:41 +0000"  >&lt;p&gt;rombert commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197390050&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197390050&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Do you need the Map implementation as well? In `Configuration.java` it is only used as a `Dictionary` implementation.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520158" author="githubbot" created="Fri, 22 Jun 2018 09:27:05 +0000"  >&lt;p&gt;rombert commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197390598&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197390598&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;br/&gt;
+    private static class EnumarationImpl&amp;lt;E&amp;gt; implements Enumeration&amp;lt;E&amp;gt; {&lt;br/&gt;
+        private final Iterator&amp;lt;E&amp;gt; iterator;&lt;br/&gt;
+&lt;br/&gt;
+        public EnumarationImpl(Iterator&amp;lt;E&amp;gt; iterator) &lt;/p&gt;
{
+            this.iterator = iterator;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean hasMoreElements() &lt;/p&gt;
{
+            return iterator.hasNext();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public E nextElement() &lt;/p&gt;
{
+            return iterator.next();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    private Map map = Collections.synchronizedMap(new LinkedHashMap());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   There&apos;s a slight problem with the thread safety approach here. Collections.syncronizedMap warns that&lt;/p&gt;

&lt;p&gt;   &amp;gt; It is imperative that the user manually synchronize on the returned map when iterating over any of its collection views (...)&lt;/p&gt;

&lt;p&gt;   We don&apos;t expose that for the user. Do we really need a Dictionary implementation or can we replace the `properties` object with a LinkedHashMap?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520171" author="githubbot" created="Fri, 22 Jun 2018 09:38:41 +0000"  >&lt;p&gt;andreituicu commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197393248&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197393248&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @rombert Yes, that is true, in `Configuration.java` it is only used as `Dictionary`, but I wanted to maintain backwards compatibility with all the other code that unknowingly used the implementation details of `Hashtable`. For example I&apos;ve seen a lot of code doing things like `object instance of Map` and those conditions would fail.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520173" author="githubbot" created="Fri, 22 Jun 2018 09:40:21 +0000"  >&lt;p&gt;andreituicu commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197393774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197393774&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;br/&gt;
+    private static class EnumarationImpl&amp;lt;E&amp;gt; implements Enumeration&amp;lt;E&amp;gt; {&lt;br/&gt;
+        private final Iterator&amp;lt;E&amp;gt; iterator;&lt;br/&gt;
+&lt;br/&gt;
+        public EnumarationImpl(Iterator&amp;lt;E&amp;gt; iterator) &lt;/p&gt;
{
+            this.iterator = iterator;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean hasMoreElements() &lt;/p&gt;
{
+            return iterator.hasNext();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public E nextElement() &lt;/p&gt;
{
+            return iterator.next();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    private Map map = Collections.synchronizedMap(new LinkedHashMap());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I would be in favour of switching to `LinkedHashMap`, but the baseline plugin complained that I need to bump the major version and I thought I should try like this first. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520175" author="githubbot" created="Fri, 22 Jun 2018 09:41:16 +0000"  >&lt;p&gt;andreituicu commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197393774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197393774&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;br/&gt;
+    private static class EnumarationImpl&amp;lt;E&amp;gt; implements Enumeration&amp;lt;E&amp;gt; {&lt;br/&gt;
+        private final Iterator&amp;lt;E&amp;gt; iterator;&lt;br/&gt;
+&lt;br/&gt;
+        public EnumarationImpl(Iterator&amp;lt;E&amp;gt; iterator) &lt;/p&gt;
{
+            this.iterator = iterator;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean hasMoreElements() &lt;/p&gt;
{
+            return iterator.hasNext();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public E nextElement() &lt;/p&gt;
{
+            return iterator.next();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    private Map map = Collections.synchronizedMap(new LinkedHashMap());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   I would be in favour of switching to `LinkedHashMap`, but the baseline plugin complained that I need to bump the major version since it would change the getter API and I thought I should try like this first. Maybe @bosschaert could give his opinion too on this matter.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520179" author="githubbot" created="Fri, 22 Jun 2018 09:43:09 +0000"  >&lt;p&gt;andreituicu commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399386443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399386443&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rombert just so you know this is just one PR in a series of PRs that will touch:&lt;br/&gt;
   &lt;a href=&quot;https://github.com/apache/felix&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io&lt;/a&gt; too. I would hold off in merging anything until you can see the overall picture. Thank you!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520247" author="githubbot" created="Fri, 22 Jun 2018 10:57:14 +0000"  >&lt;p&gt;andreituicu commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197412875&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197412875&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;br/&gt;
+    private static class EnumarationImpl&amp;lt;E&amp;gt; implements Enumeration&amp;lt;E&amp;gt; {&lt;br/&gt;
+        private final Iterator&amp;lt;E&amp;gt; iterator;&lt;br/&gt;
+&lt;br/&gt;
+        public EnumarationImpl(Iterator&amp;lt;E&amp;gt; iterator) &lt;/p&gt;
{
+            this.iterator = iterator;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean hasMoreElements() &lt;/p&gt;
{
+            return iterator.hasNext();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public E nextElement() &lt;/p&gt;
{
+            return iterator.next();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    private Map map = Collections.synchronizedMap(new LinkedHashMap());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @rombert Looking at the code of SynchronizedMap, Hashtable and LinkedHashMap, it seems to me that the implementation has the same problems with the iterators as the Hashtable too, so the two implementations are equivalent in that regard, just that the Synchronized Map gives you the warning, while the Hashtable lets you figure that out for your self. I think it is the case for almost all collection implementations that Java offers. I could also add the warning to the Javadoc. Do you think we should do more than that or do you have a different recommendation?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520258" author="githubbot" created="Fri, 22 Jun 2018 11:22:25 +0000"  >&lt;p&gt;rombert commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197417458&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197417458&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   My personal preference would be to keep it simple in the beginning and add the extra baggage only when it&apos;s needed.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520265" author="githubbot" created="Fri, 22 Jun 2018 11:28:34 +0000"  >&lt;p&gt;rombert commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197418983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197418983&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;br/&gt;
+    private static class EnumarationImpl&amp;lt;E&amp;gt; implements Enumeration&amp;lt;E&amp;gt; {&lt;br/&gt;
+        private final Iterator&amp;lt;E&amp;gt; iterator;&lt;br/&gt;
+&lt;br/&gt;
+        public EnumarationImpl(Iterator&amp;lt;E&amp;gt; iterator) &lt;/p&gt;
{
+            this.iterator = iterator;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean hasMoreElements() &lt;/p&gt;
{
+            return iterator.hasNext();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public E nextElement() &lt;/p&gt;
{
+            return iterator.next();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    private Map map = Collections.synchronizedMap(new LinkedHashMap());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Did not see what we return it using a getter. Yes, that&apos;s a problem if changing to a LinkedHashMap, and probably @bosschaert or @cziegeler can tell us if that&apos;s a problem.&lt;/p&gt;

&lt;p&gt;   For the thread safety - I&apos;m not sure we need it. A `Hashtable` is thread-safe but a `Dictionary` does not have to be. So IMO we could go with either a `LinkedHashMap`, while breaking backwards compatibility, or with a non-thread-safe `Dictionary` implementation backed by a `LinkedHashMap`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520340" author="githubbot" created="Fri, 22 Jun 2018 13:19:33 +0000"  >&lt;p&gt;bosschaert commented on a change in pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197442380&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#discussion_r197442380&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: src/main/java/org/apache/sling/feature/impl/OrderedDictionary.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,137 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.feature.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.*;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * A dictionary implementation with predictable iteration order.&lt;br/&gt;
+ *&lt;br/&gt;
+ * Actually this class is a simple adapter from the Dictionary interface&lt;br/&gt;
+ * to a synchronized LinkedHashMap&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param &amp;lt;K&amp;gt;&lt;br/&gt;
+ * @param &amp;lt;V&amp;gt;&lt;br/&gt;
+ */&lt;br/&gt;
+public class OrderedDictionary&amp;lt;K, V&amp;gt; extends Dictionary&amp;lt;K, V&amp;gt; implements Map&amp;lt;K, V&amp;gt; {&lt;br/&gt;
+    private static class EnumarationImpl&amp;lt;E&amp;gt; implements Enumeration&amp;lt;E&amp;gt; {&lt;br/&gt;
+        private final Iterator&amp;lt;E&amp;gt; iterator;&lt;br/&gt;
+&lt;br/&gt;
+        public EnumarationImpl(Iterator&amp;lt;E&amp;gt; iterator) &lt;/p&gt;
{
+            this.iterator = iterator;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean hasMoreElements() &lt;/p&gt;
{
+            return iterator.hasNext();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public E nextElement() &lt;/p&gt;
{
+            return iterator.next();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
+    private Map map = Collections.synchronizedMap(new LinkedHashMap());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   We&apos;re still at version 0.1.2 which means we didn&apos;t do a 1.0 release yet. In OSGi versions starting with 0.x.x indicate &apos;beta&apos; releases and make no guarantees about backward compatibility, so I think we can apply that reasoning here too.&lt;/p&gt;

&lt;p&gt;   So I think we can still make things better without being 100% compatible. &lt;br/&gt;
   The previous use of Dictionary is probably somehow related to the fact that in OSGi configuration properties are stored in Dictionary objects (because this spec predates Java Collections) but I think that where we need Dictionaries we can quite easily convert to them there.&lt;/p&gt;

&lt;p&gt;   So from me +1 for switching to LinkedHashMap.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520430" author="githubbot" created="Fri, 22 Jun 2018 14:37:30 +0000"  >&lt;p&gt;andreituicu commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399464644&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399464644&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rombert @bosschaert Thank you for the review! I updated the PR according to your review. I changed the API to use `Map` and `LinkedHashMap` and updated the necessary code. One thing to note is that now the baseline plugin fails the build as it wants a version bump to `1.0.0` and this would take us out of the beta and into the backwards compatibility zone. Is there anything I can do to make it stop or will it have to be skipped at the release time? I&apos;ll see if this change has any implications on &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16520439" author="githubbot" created="Fri, 22 Jun 2018 14:41:32 +0000"  >&lt;p&gt;GitHub user andreituicu opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/144&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/andreituicu/felix&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andreituicu/felix&lt;/a&gt; issue/&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/pull/144.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/144.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #144&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d5b37ec936f34ab80d63cc47ca0af93e8dd4acd1&lt;br/&gt;
Author: Andrei Tuicu &amp;lt;andrei.tuicu@...&amp;gt;&lt;br/&gt;
Date:   2018-06-22T09:32:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16521460" author="githubbot" created="Sun, 24 Jun 2018 10:25:09 +0000"  >&lt;p&gt;bosschaert commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399745758&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399745758&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @andreituicu, after seeing the request to also change the Configurator Code in Felix I thought a little more about this... Would it be possible to implement a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; without the need to have ordering in the configurator? I put my concerns about changing that one at &lt;a href=&quot;https://github.com/apache/felix/pull/144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/felix/pull/144&lt;/a&gt; &lt;br/&gt;
   Sorry for being a little difficult, but I think requiring that change to the configurator makes for a brittle system... &lt;br/&gt;
   Another thought could be to use a TreeMap instead of the LinkedHashMap here in the feature model. That would mean that the keys will always be alphabetically sorted, and would ultimately also resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; I think.&lt;/p&gt;

&lt;p&gt;   On the BW compatibility plugin and it not considering 0.x versions separately. I&apos;m not sure how to deal with that. @rombert would you have an idea about this?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16521982" author="githubbot" created="Mon, 25 Jun 2018 08:11:12 +0000"  >&lt;p&gt;rombert commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399868731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399868731&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; On the BW compatibility plugin and it not considering 0.x versions separately. I&apos;m not sure how to deal with that. @rombert would you have an idea about this?&lt;/p&gt;

&lt;p&gt;   If we&apos;re sure about what we want the version to be, we can skip the check for a single release, e.g. `mvn release:prepare release:perform -Darguments=&quot;-Dbaseline.skip=true&quot;` . Not 100% sure about the exact syntax, but that should get you started.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16522021" author="githubbot" created="Mon, 25 Jun 2018 08:41:29 +0000"  >&lt;p&gt;bosschaert commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399876857&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-399876857&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Regarding the next version, I would increase the minor version to be 0.2.x. This indicates that it&apos;s more than a patch.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16555637" author="cziegeler" created="Wed, 25 Jul 2018 13:21:13 +0000"  >&lt;p&gt;I&apos;ve applied the patch to the Felix configurator. I guess we should release the configurator next&lt;/p&gt;</comment>
                            <comment id="16663807" author="githubbot" created="Thu, 25 Oct 2018 14:27:30 +0000"  >&lt;p&gt;andreituicu commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-433072825&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-433072825&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @bosschaert Please let me know if there is anything more required here. Thank you!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16665286" author="githubbot" created="Fri, 26 Oct 2018 15:14:34 +0000"  >&lt;p&gt;bosschaert commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-433442778&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-433442778&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hi @andreituicu thanks for this PR. Normally you&apos;d rebase your changes with the latest master rather than merging master out into your branch as that creates a slightly funny looking git history. I&apos;ll squash your changes and merge them into master so that history looks normal. Hope that this is ok.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16665288" author="githubbot" created="Fri, 26 Oct 2018 15:16:09 +0000"  >&lt;p&gt;bosschaert closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/feature/Configuration.java b/src/main/java/org/apache/sling/feature/Configuration.java&lt;br/&gt;
index c53c95c..4642952 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/feature/Configuration.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/feature/Configuration.java&lt;br/&gt;
@@ -16,8 +16,8 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.sling.feature;&lt;/p&gt;

&lt;p&gt;-import java.util.Dictionary;&lt;br/&gt;
-import java.util.Hashtable;&lt;br/&gt;
+import java.util.LinkedHashMap;&lt;br/&gt;
+import java.util.Map;&lt;/p&gt;


&lt;p&gt; /**&lt;br/&gt;
@@ -44,7 +44,7 @@&lt;br/&gt;
     private final String factoryPid;&lt;/p&gt;

&lt;p&gt;     /** The properties. */&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private final Dictionary&amp;lt;String, Object&amp;gt; properties = new Hashtable&amp;lt;&amp;gt;();&lt;br/&gt;
+    private final Map&amp;lt;String, Object&amp;gt; properties = new LinkedHashMap&amp;lt;&amp;gt;();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Create a new configuration&lt;br/&gt;
@@ -139,7 +139,7 @@ public boolean isFactoryConfiguration() {&lt;/li&gt;
	&lt;li&gt;Get all properties of the configuration.&lt;/li&gt;
	&lt;li&gt;@return The properties&lt;br/&gt;
      */&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public Dictionary&amp;lt;String, Object&amp;gt; getProperties() {&lt;br/&gt;
+    public Map&amp;lt;String, Object&amp;gt; getProperties() 
{
         return this.properties;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/src/main/java/org/apache/sling/feature/Feature.java b/src/main/java/org/apache/sling/feature/Feature.java&lt;br/&gt;
index a25eac7..4cdcaf1 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/feature/Feature.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/feature/Feature.java&lt;br/&gt;
@@ -17,7 +17,6 @@&lt;br/&gt;
 package org.apache.sling.feature;&lt;/p&gt;

&lt;p&gt; import java.util.ArrayList;&lt;br/&gt;
-import java.util.Enumeration;&lt;br/&gt;
 import java.util.List;&lt;/p&gt;

&lt;p&gt; import org.apache.felix.utils.resource.CapabilityImpl;&lt;br/&gt;
@@ -25,6 +24,8 @@&lt;br/&gt;
 import org.osgi.resource.Capability;&lt;br/&gt;
 import org.osgi.resource.Requirement;&lt;/p&gt;

&lt;p&gt;+import java.util.Iterator;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A feature consists of&lt;/li&gt;
	&lt;li&gt;&amp;lt;ul&amp;gt;&lt;br/&gt;
@@ -310,9 +311,9 @@ public Feature copy(final ArtifactId id) {&lt;br/&gt;
         // configurations&lt;br/&gt;
         for(final Configuration cfg : this.getConfigurations()) {&lt;br/&gt;
             final Configuration c = cfg.isFactoryConfiguration() ? new Configuration(cfg.getFactoryPid(), cfg.getName()) : new Configuration(cfg.getPid());&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Enumeration&amp;lt;String&amp;gt; keyEnum = cfg.getProperties().keys();&lt;/li&gt;
	&lt;li&gt;while ( keyEnum.hasMoreElements() ) {&lt;/li&gt;
	&lt;li&gt;final String key = keyEnum.nextElement();&lt;br/&gt;
+            final Iterator&amp;lt;String&amp;gt; keyEnum = cfg.getProperties().keySet().iterator();&lt;br/&gt;
+            while ( keyEnum.hasNext() ) 
{
+                final String key = keyEnum.next();
                 c.getProperties().put(key, cfg.getProperties().get(key));
             }
&lt;p&gt;             result.getConfigurations().add(c);&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/feature/builder/BuilderUtil.java b/src/main/java/org/apache/sling/feature/builder/BuilderUtil.java&lt;br/&gt;
index 372966f..ed7d355 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/src/main/java/org/apache/sling/feature/builder/BuilderUtil.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/feature/builder/BuilderUtil.java&lt;br/&gt;
@@ -30,6 +30,7 @@&lt;br/&gt;
 import java.io.StringReader;&lt;br/&gt;
 import java.io.StringWriter;&lt;br/&gt;
 import java.util.Enumeration;&lt;br/&gt;
+import java.util.Iterator;&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
 import java.util.stream.Stream;&lt;br/&gt;
@@ -148,9 +149,9 @@ static void mergeConfigurations(final Configurations target, final Configuration&lt;br/&gt;
                 if ( current.compareTo(cfg) == 0 ) {&lt;br/&gt;
                     found = true;&lt;br/&gt;
                     // merge / override properties&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;final Enumeration&amp;lt;String&amp;gt; i = cfg.getProperties().keys();&lt;/li&gt;
	&lt;li&gt;while ( i.hasMoreElements() ) {&lt;/li&gt;
	&lt;li&gt;final String key = i.nextElement();&lt;br/&gt;
+                    final Iterator&amp;lt;String&amp;gt; i = cfg.getProperties().keySet().iterator();&lt;br/&gt;
+                    while ( i.hasNext() ) 
{
+                        final String key = i.next();
                         current.getProperties().put(key, cfg.getProperties().get(key));
                     }
&lt;p&gt;                     break;&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/feature/builder/FeatureBuilder.java b/src/main/java/org/apache/sling/feature/builder/FeatureBuilder.java&lt;br/&gt;
index 19a56a7..059ae29 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/src/main/java/org/apache/sling/feature/builder/FeatureBuilder.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/feature/builder/FeatureBuilder.java&lt;br/&gt;
@@ -214,7 +214,7 @@ public static Feature assemble(&lt;br/&gt;
      */&lt;br/&gt;
     public static void resolveVariables(final Feature feature, final KeyValueMap additionalVariables) {&lt;br/&gt;
         for(final Configuration cfg : feature.getConfigurations()) {&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;final Set&amp;lt;String&amp;gt; keys = new HashSet&amp;lt;&amp;gt;(Collections.list(cfg.getProperties().keys()));&lt;br/&gt;
+            final Set&amp;lt;String&amp;gt; keys = new HashSet&amp;lt;&amp;gt;(cfg.getProperties().keySet());&lt;br/&gt;
             for(final String key : keys) {&lt;br/&gt;
                 final Object value = cfg.getProperties().get(key);&lt;br/&gt;
                 cfg.getProperties().put(key, replaceVariables(value, additionalVariables, feature));&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/feature/package-info.java b/src/main/java/org/apache/sling/feature/package-info.java&lt;br/&gt;
index 3d70902..8201ca5 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/src/main/java/org/apache/sling/feature/package-info.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/feature/package-info.java&lt;br/&gt;
@@ -17,7 +17,7 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;under the License.&lt;br/&gt;
  */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-@org.osgi.annotation.versioning.Version(&quot;0.1.0&quot;)&lt;br/&gt;
+@org.osgi.annotation.versioning.Version(&quot;0.2.0&quot;)&lt;br/&gt;
 package org.apache.sling.feature;&lt;/p&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16665539" author="githubbot" created="Fri, 26 Oct 2018 18:49:28 +0000"  >&lt;p&gt;andreituicu opened a new pull request #8: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file shuffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/8&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;Update feature-io module for the new API&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16665551" author="githubbot" created="Fri, 26 Oct 2018 18:56:54 +0000"  >&lt;p&gt;andreituicu commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-433510191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-433510191&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @bosschaert Thank you very much! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ll keep the rebasing in mind for future PRs. Some developers prefer merging the master because it doesn&apos;t require a `git push --force` and others prefer the rebasing, because of the cleaner git history.&lt;br/&gt;
   Also, I hope this helps in the future: Github should have a merging option that allows the developer who merges the PR to squash the commits and can also change the title of the commit that makes it in the master.&lt;br/&gt;
   &lt;a href=&quot;https://help.github.com/articles/about-pull-request-merges/#squash-and-merge-your-pull-request-commits&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://help.github.com/articles/about-pull-request-merges/#squash-and-merge-your-pull-request-commits&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16665552" author="githubbot" created="Fri, 26 Oct 2018 18:57:51 +0000"  >&lt;p&gt;andreituicu edited a comment on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file suffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-433510191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature/pull/2#issuecomment-433510191&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @bosschaert Thank you very much! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ll keep the rebasing in mind for future PRs. Some developers prefer merging the master because it doesn&apos;t require a `git push --force` and others prefer the rebasing, because of the cleaner git history.&lt;br/&gt;
   Also, I hope this helps in the future: Github should have a merging option that allows the developer who merges the PR to squash the commits and can also change the title of the commit that makes it in the master with a single click.&lt;br/&gt;
   &lt;a href=&quot;https://help.github.com/articles/about-pull-request-merges/#squash-and-merge-your-pull-request-commits&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://help.github.com/articles/about-pull-request-merges/#squash-and-merge-your-pull-request-commits&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16666420" author="cziegeler" created="Sun, 28 Oct 2018 14:39:58 +0000"  >&lt;p&gt;Commit 222c1bd02dfd4b4f54882e32e3584cb26cd92b40 broke all downstream users of the Feature API as the properties changed from a Dictionary to a Map. Furthermore, as ConfigurationAdmin is using a Dictionary, its preferable to keep a Dictionary&lt;/p&gt;</comment>
                            <comment id="16666422" author="cziegeler" created="Sun, 28 Oct 2018 14:51:35 +0000"  >&lt;p&gt;I&apos;ve changed back to a dictionary in b39edb5 - the dict is now ordered&lt;/p&gt;</comment>
                            <comment id="16666423" author="cziegeler" created="Sun, 28 Oct 2018 14:52:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt; Is there anything else to do here?&lt;/p&gt;</comment>
                            <comment id="16668261" author="githubbot" created="Tue, 30 Oct 2018 07:03:19 +0000"  >&lt;p&gt;andreituicu closed pull request #8: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7752&quot; title=&quot;Deserializing and serializing a feature model file suffles the configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7752&quot;&gt;&lt;del&gt;SLING-7752&lt;/del&gt;&lt;/a&gt; - Deserializing and serializing a feature model file shuffles the configurations&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/8&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java b/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java&lt;br/&gt;
index 3533e68..1a51d36 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java&lt;br/&gt;
@@ -19,10 +19,7 @@&lt;br/&gt;
 import java.io.StringReader;&lt;br/&gt;
 import java.io.Writer;&lt;br/&gt;
 import java.lang.reflect.Array;&lt;br/&gt;
-import java.util.Collections;&lt;br/&gt;
-import java.util.Enumeration;&lt;br/&gt;
-import java.util.List;&lt;br/&gt;
-import java.util.Map;&lt;br/&gt;
+import java.util.*;&lt;/p&gt;

&lt;p&gt; import javax.json.Json;&lt;br/&gt;
 import javax.json.JsonStructure;&lt;br/&gt;
@@ -109,9 +106,9 @@ protected void writeConfigurations(final JsonGenerator generator, final Configur&lt;/p&gt;

&lt;p&gt;             generator.writeStartObject(key);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Enumeration&amp;lt;String&amp;gt; e = cfg.getProperties().keys();&lt;/li&gt;
	&lt;li&gt;while ( e.hasMoreElements() ) {&lt;/li&gt;
	&lt;li&gt;final String name = e.nextElement();&lt;br/&gt;
+            final Iterator&amp;lt;String&amp;gt; e = cfg.getProperties().keySet().iterator();&lt;br/&gt;
+            while ( e.hasNext() ) {&lt;br/&gt;
+                final String name = e.next();&lt;br/&gt;
                 if ( Configuration.PROP_ARTIFACT_ID.equals(name) ) 
{
                     continue;
                 }&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16669703" author="cziegeler" created="Wed, 31 Oct 2018 07:32:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt; I think this is now fully working, or is there still anything left?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3v4fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7748] Value of Month from jcr:lastModified is INCORRECT when org.apache.sling.api.resource.Resource.getValueMap() is used</title>
                <link>https://issues.apache.org/jira/browse/SLING-7748</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using&#160;&lt;b&gt;org.apache.sling.api.resource.Resource&lt;/b&gt;&#160;, the method &lt;b&gt;getValueMap (&lt;/b&gt; &lt;a href=&quot;https://sling.apache.org/apidocs/sling9/org/apache/sling/api/resource/Resource.html#getValueMap--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/apidocs/sling9/org/apache/sling/api/resource/Resource.html#getValueMap--&lt;/a&gt;&#160;), returns a ValueMap of all the properties.&#160;&lt;/p&gt;

&lt;p&gt;We observed that the &quot;&lt;b&gt;month&lt;/b&gt;&quot;&#160;in &quot;&lt;b&gt;jcr:lastModified&lt;/b&gt;&quot; is off by 1 month. While Year, Day, Hour, Min, Seconds are all correct. Please see the attachments. And this is the same for all Nodes.&lt;/p&gt;

&lt;p&gt;The last date modified was &quot;2018-&lt;b&gt;&lt;font color=&quot;#d04437&quot;&gt;05&lt;/font&gt;&lt;/b&gt;-29T10:31:49.123-05:00&quot; while the value from the above method returned as below:&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;jcr:lastModified\&quot;{\&quot;year\&quot;:2018,*\&quot;month\&quot;:4,\{color}*&quot;dayOfMonth\&quot;:29,\&quot;hourOfDay\&quot;:10,\&quot;minute\&quot;:31,\&quot;second\&quot;:49}&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;We did not test this on all nodes though.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Sample code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Resource jcrdataResource = resource.getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:content&quot;&lt;/span&gt;);
ValueMap jcrProperties = ResourceUtil.getValueMap(jcrdataResource);
...
JsonObject assetMetadataJson.addProperty(hit.getPath(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Gson().toJson(allProperties));
...
JsonElement assetMetadataJsonElement = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Gson().fromJson(assetMetadataJson.toString(), JsonElement.class);
...
JsonObject mainjsonObject.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;assets&quot;&lt;/span&gt;, assetMetadataJsonElement);

&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; mainjsonObject;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13167010">SLING-7748</key>
            <summary>Value of Month from jcr:lastModified is INCORRECT when org.apache.sling.api.resource.Resource.getValueMap() is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ksurendra">Suren Konathala</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jun 2018 21:18:42 +0000</created>
                <updated>Thu, 28 Jun 2018 19:28:54 +0000</updated>
                            <resolved>Thu, 28 Jun 2018 19:28:54 +0000</resolved>
                                    <version>API 2.16.2</version>
                                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16518356" author="jebailey" created="Wed, 20 Jun 2018 17:12:21 +0000"  >&lt;p&gt;Taking a look at the attachments, I noticed that second attachment, which depicts the wrong date, has more information then the first image showing the crx console. The second image is showing data from what looks like the metadata node that&apos;s beneath the jcr:content node. Could you check the data on the metadata node to see if the incorrect jcr:lastModified date is coming from there?&lt;/p&gt;</comment>
                            <comment id="16518407" author="ksurendra" created="Wed, 20 Jun 2018 17:57:40 +0000"  >&lt;p&gt;I ran teh query to get th results and also tok screenshots of the data as saved on jcr:content node. The data that is being written to jcr:content node is correct. Because the last modified time stamp is correct after we make changes to the asset. But when we retrieve the data from the API we see the difference.&lt;/p&gt;

&lt;p&gt;Attached the screenshots.&lt;/p&gt;

&lt;p&gt;Having said the above, wonder what AEM maybe using internally to display the data on the jcr:content node show via crx/de? This seems to be correct.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12928513/12928513_service-result.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12928508/12928508_indy.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12928509/12928509_indy2.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12928514/12928514_how-to-create.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12928515/12928515_sand.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16526664" author="jebailey" created="Thu, 28 Jun 2018 18:43:07 +0000"  >&lt;p&gt;The jcr:lastModified property exists in most nodes. You are providing a screenshot of the jcr:content node, but the json you are providing contains data that&#160; is coming from the metadata node. The code snippet you provided also mentions metadata which seems to indicate that the person who wrote this was trying to get the asset metadata.&lt;/p&gt;

&lt;p&gt;I am unable to reproduce this issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12929610/12929610_12928514_how-to-create2.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16526700" author="ksurendra" created="Thu, 28 Jun 2018 19:28:54 +0000"  >&lt;p&gt;With help from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt;&#160;we found that the issue was with Gson&apos;s &quot;toJson&quot; method that is not&#160;&lt;/p&gt;

&lt;p&gt;Before the fix, my code was&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;Resource jcrdataResource = resource.getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:content&quot;&lt;/span&gt;);
ValueMap jcrProperties = ResourceUtil.getValueMap(jcrdataResource);
...
JsonObject assetMetadataJson.addProperty(hit.getPath(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Gson().toJson(allProperties));
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Modified this to be like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;Resource jcrdataResource = resource.getChild(&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:content&quot;&lt;/span&gt;);
ValueMap jcrProperties = ResourceUtil.getValueMap(jcrdataResource);
...
JsonObject assetMetadataJson.addProperty(hit.getPath(), customGson().toJson(allProperties));
...
...

&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Gson customGson() {
   GsonBuilder gsonBuilder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GsonBuilder();
   JsonSerializer&amp;lt;Calendar&amp;gt; serializer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JsonSerializer&amp;lt;Calendar&amp;gt;() {
      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JsonElement serialize(Calendar src, Type typeOfSrc, JsonSerializationContext context) {
         &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JsonPrimitive(ISO8601.format(src));
      }
   };

   gsonBuilder.registerTypeAdapter(Calendar.class, serializer);
   gsonBuilder.registerTypeAdapter(GregorianCalendar.class, serializer);

   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; gsonBuilder.create();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With the above change, the output JSON of all DATES is always in ISO8601 format (i&apos;ve removed all other properties and left just dates for reference)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;dc:title\&quot;&lt;/span&gt;:\&lt;span class=&quot;code-quote&quot;&gt;&quot;SiriusXM Sample Suren\&quot;&lt;/span&gt;,\&lt;span class=&quot;code-quote&quot;&gt;&quot;dam:extracted\&quot;&lt;/span&gt;:\&lt;span class=&quot;code-quote&quot;&gt;&quot;2018-01-31T15:31:15.119-05:00\&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;,\&quot;&lt;/span&gt;jcr:created\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;2018-01-31T15:31:14.978-05:00\&lt;span class=&quot;code-quote&quot;&gt;&quot;,\&quot;&lt;/span&gt;dc:modified\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;2018-04-25T18:08:40.335-04:00\&lt;span class=&quot;code-quote&quot;&gt;&quot;,\&quot;&lt;/span&gt;jcr:lastModified\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;2018-06-28T14:37:05.043-04:00\&lt;span class=&quot;code-quote&quot;&gt;&quot;,\&quot;&lt;/span&gt;cq:lastReplicated\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;2018-05-18T17:35:36.793-04:00\
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12929610" name="12928514_how-to-create2.png" size="68880" author="jebailey" created="Thu, 28 Jun 2018 18:20:27 +0000"/>
                            <attachment id="12928407" name="Screen Shot 2018-06-19 at 4.09.38 PM.png" size="170876" author="ksurendra" created="Tue, 19 Jun 2018 21:10:38 +0000"/>
                            <attachment id="12928406" name="Screen Shot 2018-06-19 at 4.09.56 PM.png" size="334524" author="ksurendra" created="Tue, 19 Jun 2018 21:10:39 +0000"/>
                            <attachment id="12928514" name="how-to-create.png" size="87212" author="ksurendra" created="Wed, 20 Jun 2018 17:57:29 +0000"/>
                            <attachment id="12928511" name="how-to-create.png" size="87212" author="ksurendra" created="Wed, 20 Jun 2018 17:55:58 +0000"/>
                            <attachment id="12928508" name="indy.png" size="105864" author="ksurendra" created="Wed, 20 Jun 2018 17:55:58 +0000"/>
                            <attachment id="12928509" name="indy2.png" size="106675" author="ksurendra" created="Wed, 20 Jun 2018 17:55:58 +0000"/>
                            <attachment id="12928515" name="sand.png" size="176758" author="ksurendra" created="Wed, 20 Jun 2018 17:57:36 +0000"/>
                            <attachment id="12928512" name="sand.png" size="176758" author="ksurendra" created="Wed, 20 Jun 2018 17:55:58 +0000"/>
                            <attachment id="12928513" name="service-result.png" size="596430" author="ksurendra" created="Wed, 20 Jun 2018 17:57:00 +0000"/>
                            <attachment id="12928510" name="service-result.png" size="596430" author="ksurendra" created="Wed, 20 Jun 2018 17:55:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3v0wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7747] Send a http response error code if distribution package cannot be exported</title>
                <link>https://issues.apache.org/jira/browse/SLING-7747</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In&#160;DistributionPackageExporterServlet &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; an error is logged if the package cannot be copied but it should also be signaled to the calling party by not sending 200 status code.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/7317793d754205b47c1edb24d259c725a12d4b67/src/main/java/org/apache/sling/distribution/servlet/DistributionPackageExporterServlet.java#L110&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166902">SLING-7747</key>
            <summary>Send a http response error code if distribution package cannot be exported</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jun 2018 11:07:18 +0000</created>
                <updated>Tue, 19 Jun 2018 11:35:53 +0000</updated>
                            <resolved>Tue, 19 Jun 2018 11:35:53 +0000</resolved>
                                    <version>Content Distribution Core 0.2.10</version>
                                    <fixVersion>Content Distribution Core 0.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16516964" author="mpetria" created="Tue, 19 Jun 2018 11:35:53 +0000"  >&lt;p&gt;Fixed in&#160; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/07a4c30adb053e8b4181736cd61ce28acf23e6e6&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3v08v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7742] Sling Dynamic Include Duplicates Selectors When Components are Nested</title>
                <link>https://issues.apache.org/jira/browse/SLING-7742</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m using Sling Dynamic Include to optimise the caching of a static site. Certain parts of our site are shared across all pages. For example, the header is created in one place in the repository and every page that need it, includes it using a special component.&#160;&lt;/p&gt;

&lt;p&gt;We have configured SDI so that the component is replaced with an SSI&#160; tag. This works fine and allows us to cache the header as a separate bit of HTML on the AEM dispatcher.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;cached page html&amp;gt;&#160;------SSIncludes----&amp;gt; &amp;lt;header html&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the SDI configuration, we use the &lt;tt&gt;shared&lt;/tt&gt;&#160;selector as the &lt;tt&gt;include-filter.config.selector&lt;/tt&gt; for the particular resource type so when the header is included, we get a request to &lt;tt&gt;/content/mysite/en_gb/content/snippets/header.shared.html&lt;/tt&gt;, so far so good.&lt;br/&gt;
 &#160;&lt;br/&gt;
 However, when we introduce another reusable bit of HTML and us it&#160;inside the header (therefore introducing nested components that are handled by SDI)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;cached page html&amp;gt; ----SSIncludes--&amp;gt; &amp;lt;header html&amp;gt; ---SSIncludes---&amp;gt; &amp;lt;main navigation html&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the&#160;&lt;tt&gt;shared&lt;/tt&gt; selector is added twice. The page still renders correctly but in the request log, as well as the dispatcher cache, we can see &lt;tt&gt;/content/mysite/en_gb/content/snippets/header.shared.html&lt;/tt&gt; (this is fine) and &lt;tt&gt;/content/mysite/en_gb/content/snippets/mainNavigation.shared.shared.html&lt;/tt&gt; (for instances where the &lt;tt&gt;mainNavigation&lt;/tt&gt; snippet is used in the header), as well as &lt;tt&gt;/content/mysite/en_gb/content/snippets/mainNavigation.shared.html&lt;/tt&gt; (for instances where the &lt;tt&gt;mainNavigation&lt;/tt&gt; snippet is included by a page directly).&lt;br/&gt;
 &#160;&lt;br/&gt;
 This leads to unnecessary caching of the same markup.&lt;br/&gt;
 &#160;&lt;br/&gt;
 While SDI is primarily intended for dynamic components, I think this is a valid use case for it.&lt;br/&gt;
 &#160;&lt;br/&gt;
 Before appending the selector determined by the &lt;tt&gt;filter.config.selector&lt;/tt&gt;&#160;property, SDI could check if the selector&apos;s already present in the selector string. That way, we could nest our components, cache them in one spot and make the invalidation quite simple.&lt;br/&gt;
 &#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve had a stab at solving this in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-dynamic-include/pull/5/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-dynamic-include/pull/5/files&lt;/a&gt;, the unit tests might actually be a bit clearer than my description above.&lt;/p&gt;

&lt;p&gt;Please let me know what you think.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166423">SLING-7742</key>
            <summary>Sling Dynamic Include Duplicates Selectors When Components are Nested</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="tomasz.k.niedzwiedz@gmail.com">Tomasz Nied&#378;wied&#378;</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2018 16:44:43 +0000</created>
                <updated>Tue, 14 Aug 2018 12:40:58 +0000</updated>
                            <resolved>Tue, 31 Jul 2018 16:16:26 +0000</resolved>
                                    <version>Dynamic Include 3.1.0</version>
                                    <fixVersion>Dynamic Include 3.1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16563904" author="rombert" created="Tue, 31 Jul 2018 16:16:26 +0000"  >&lt;p&gt;Fixed, thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomasz.k.niedzwiedz%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;tomasz.k.niedzwiedz@gmail.com&quot;&gt;tomasz.k.niedzwiedz@gmail.com&lt;/a&gt; for your contribution!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uxan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7741] org.apache.sling.xss.impl.XSSAPIImpl#getValidHref doesn&apos;t correctly handle the &quot;:&quot; character in URL fragments</title>
                <link>https://issues.apache.org/jira/browse/SLING-7741</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.sling.xss.impl.XSSAPIImpl#getValidHref&lt;/tt&gt; doesn&apos;t correctly handle the &quot;:&quot; character in URL fragments:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
https:&lt;span class=&quot;code-comment&quot;&gt;//sling.apache.org/#fragment:test -&amp;gt; https://sling.apache.org/_#fragment_test&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Namespace mangling should only occur for the path section of the URL.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166372">SLING-7741</key>
            <summary>org.apache.sling.xss.impl.XSSAPIImpl#getValidHref doesn&apos;t correctly handle the &quot;:&quot; character in URL fragments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2018 14:16:55 +0000</created>
                <updated>Wed, 8 Aug 2018 09:30:04 +0000</updated>
                            <resolved>Fri, 29 Jun 2018 15:48:22 +0000</resolved>
                                    <version>XSS Protection API 1.0.0</version>
                    <version>XSS Protection API 2.0.0</version>
                    <version>XSS Protection API Compat 1.1.0</version>
                                    <fixVersion>XSS Protection API 2.0.8</fixVersion>
                                    <component>XSS Protection API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16523925" author="radu.cotescu" created="Tue, 26 Jun 2018 16:11:34 +0000"  >&lt;p&gt;The PR &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; should solve this issue, however the current set of regexes doesn&apos;t validate some correctly formed URIs (for example the &lt;tt&gt;:&lt;/tt&gt; character can be used anywhere inside a URI).&lt;/p&gt;

&lt;p&gt;A nicer approach would have been the &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12929209/12929209_SLING-7741.correct_uri_parsing.patch&quot; title=&quot;SLING-7741.correct_uri_parsing.patch attached to SLING-7741&quot;&gt;SLING-7741.correct_uri_parsing.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; (which can be applied on top of&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/43947bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 43947bd&lt;/a&gt;), however the URI grammar (reproduced through the regexes added to the patch) cannot make a difference between a &lt;tt&gt;scheme://&lt;/tt&gt; and a path containing &lt;tt&gt;:&lt;/tt&gt;, followed by two empty segments.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;-&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-xss/pull/2&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16525078" author="radu.cotescu" created="Wed, 27 Jun 2018 13:18:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR 3&lt;/a&gt;&#160;addresses the concerns from the previous comment and implements the solution partially addressed in &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12929209/12929209_SLING-7741.correct_uri_parsing.patch&quot; title=&quot;SLING-7741.correct_uri_parsing.patch attached to SLING-7741&quot;&gt;SLING-7741.correct_uri_parsing.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="16527845" author="radu.cotescu" created="Fri, 29 Jun 2018 15:48:22 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/bfee439&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit bfee439&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13170703">SLING-7770</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13177629">SLING-7814</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12929209" name="SLING-7741.correct_uri_parsing.patch" size="22999" author="radu" created="Tue, 26 Jun 2018 16:06:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uwzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7736] OSGi Installer: Update OSGi installer&apos;s resource state in case of configuration/bundle updates outside of the OSGi Installer when JCR Installer Writeback is disabled</title>
                <link>https://issues.apache.org/jira/browse/SLING-7736</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the state of an OSGi installer&apos;s resource is only updated whenever it is newly added to the queue and subsequently processed. Manual configuration/bundle changes outside of the OSGi installer don&apos;t change the OSGi installer&apos;s resource state.&lt;/p&gt;

&lt;p&gt;Actually, with the help of the &lt;tt&gt;BundleListener&lt;/tt&gt; (&lt;a href=&quot;https://osgi.org/javadoc/r5/core/org/osgi/framework/BundleListener.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r5/core/org/osgi/framework/BundleListener.html&lt;/a&gt;) and the &lt;tt&gt;ConfigurationListener&lt;/tt&gt; (&lt;a href=&quot;https://osgi.org/javadoc/r5/cmpn/org/osgi/service/cm/ConfigurationListener.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r5/cmpn/org/osgi/service/cm/ConfigurationListener.html&lt;/a&gt;) the OSGi installer could mark the according OSGi installer resources as &lt;tt&gt;IGNORED&lt;/tt&gt; in case they have been overwritten.&lt;/p&gt;

&lt;p&gt;The tricky part is to filter out those event&apos;s which have been caused by the OSGi installer itself. The resource&apos;s digest cannot be used for that, as that is completely calculated by the Provider (i.e. is different between JCR and file provider).&lt;/p&gt;

&lt;p&gt;That would improve the effectiveness of the health check from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5888&quot; title=&quot;Health Check for detecting not-installed configurations/bundles from the OSGi installer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5888&quot;&gt;&lt;del&gt;SLING-5888&lt;/del&gt;&lt;/a&gt; and also allows the OSGi installer to better enforce its state during reinstallation in the future.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166289">SLING-7736</key>
            <summary>OSGi Installer: Update OSGi installer&apos;s resource state in case of configuration/bundle updates outside of the OSGi Installer when JCR Installer Writeback is disabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2018 08:06:11 +0000</created>
                <updated>Wed, 6 Mar 2019 14:32:11 +0000</updated>
                                            <version>Installer Core 3.8.10</version>
                    <version>Installer Configuration Factory 1.2.0</version>
                                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16527452" author="kwin" created="Fri, 29 Jun 2018 10:38:47 +0000"  >&lt;p&gt;The &lt;tt&gt;ConfigTaskCreator&lt;/tt&gt; already implements a configuration listener and notifies the OSGi Installer about the change (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/blob/0df065077af77f07955f9420158b008d73ce5ed3/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigTaskCreator.java#L99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/blob/0df065077af77f07955f9420158b008d73ce5ed3/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigTaskCreator.java#L99&lt;/a&gt;). But this is not correctly propagated then and does not lead to a resource status &quot;IGNORED&quot; yet (in case write back is not enabled)&lt;br/&gt;
Also for bundle events there is no such listener yet, which propagates changes to the OSGi Installer.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12991739">SLING-5888</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12991737">SLING-5887</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12972333">SLING-5745</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uwgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7735] OSGi installer configuration is marked as &quot;IGNORED&quot; in case the ConfigurationAdmin contains the correct configuration state already</title>
                <link>https://issues.apache.org/jira/browse/SLING-7735</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If I have a repository which first contains&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
.../config/myPID [sling:OsgiConfig]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and this is being changed to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
.../config/myPID.config [nt:file]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The latter configuration is marked as &lt;tt&gt;IGNORED&lt;/tt&gt; in the OSGi installer. This is the case, because the old configuration already had the correct data and hence the configuration has not been updated via the ConfigurationAdmin. The state is rather confusing though, because in fact, exactly that configuration is installed in the system. Therefore I would propose to mark the configuration installer resource rather with &lt;tt&gt;INSTALLED&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This would be especially helpful in the context of the health check being contributed via &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5888&quot; title=&quot;Health Check for detecting not-installed configurations/bundles from the OSGi installer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5888&quot;&gt;&lt;del&gt;SLING-5888&lt;/del&gt;&lt;/a&gt; as that will fail for every configuration in any other state but &lt;tt&gt;INSTALLED&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166205">SLING-7735</key>
            <summary>OSGi installer configuration is marked as &quot;IGNORED&quot; in case the ConfigurationAdmin contains the correct configuration state already</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jun 2018 20:53:12 +0000</created>
                <updated>Mon, 27 Aug 2018 08:16:16 +0000</updated>
                            <resolved>Wed, 27 Jun 2018 11:38:24 +0000</resolved>
                                    <version>Installer Configuration Factory 1.1.2</version>
                                    <fixVersion>Installer Configuration Factory 1.2.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16513006" author="kwin" created="Thu, 14 Jun 2018 21:18:56 +0000"  >&lt;p&gt;The problem is most probably coming from this line: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/blob/ac873e4465948eff12744495d52a95e523936673/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigInstallTask.java#L65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/blob/ac873e4465948eff12744495d52a95e523936673/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigInstallTask.java#L65&lt;/a&gt;. I would rather set the installer state to &lt;tt&gt;INSTALLED&lt;/tt&gt; in case a configuration with identical data is already installed.&lt;/p&gt;</comment>
                            <comment id="16513496" author="kwin" created="Fri, 15 Jun 2018 07:48:41 +0000"  >&lt;p&gt;Attached is a proposed patch:  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12927948/12927948_SLING-7735-v01.patch&quot; title=&quot;SLING-7735-v01.patch attached to SLING-7735&quot;&gt;SLING-7735-v01.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Can you have a look?&lt;/p&gt;</comment>
                            <comment id="16524944" author="kwin" created="Wed, 27 Jun 2018 11:38:24 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/commit/0df065077af77f07955f9420158b008d73ce5ed3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/commit/0df065077af77f07955f9420158b008d73ce5ed3&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12991739">SLING-5888</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12927948" name="SLING-7735-v01.patch" size="1559" author="kwin" created="Fri, 15 Jun 2018 07:48:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uvyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7734] Slingstart Maven Plugin does not provide context to realize inherited features</title>
                <link>https://issues.apache.org/jira/browse/SLING-7734</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When converting features that inherit other features to the provisioning model context needs to be provided to allow the system to find inherited features.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166104">SLING-7734</key>
            <summary>Slingstart Maven Plugin does not provide context to realize inherited features</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jun 2018 13:31:34 +0000</created>
                <updated>Mon, 17 Jun 2019 12:56:01 +0000</updated>
                            <resolved>Fri, 15 Jun 2018 09:54:18 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.8.2</version>
                                    <fixVersion>Slingstart Maven Plugin 1.8.4</fixVersion>
                                    <component>Feature Model</component>
                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16513623" author="bosschaert" created="Fri, 15 Jun 2018 09:54:08 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-slingstart-maven-plugin.git;a=commitdiff;h=73ba101a6ed15ebd09a6714638192b12a8a751c7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=sling-slingstart-maven-plugin.git;a=commitdiff;h=73ba101a6ed15ebd09a6714638192b12a8a751c7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13166054">SLING-7732</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uv1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7732] Feature Model Converter ignores inheritance when converting to provisioning model</title>
                <link>https://issues.apache.org/jira/browse/SLING-7732</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a feature is inheriting from another feature, this is completely ignored at the when using the model converter to convert to the provisioning model. When using inheritance and converting to the provisioning model the inherited bundles are not in the resulting provisioning model.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166054">SLING-7732</key>
            <summary>Feature Model Converter ignores inheritance when converting to provisioning model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jun 2018 09:56:33 +0000</created>
                <updated>Thu, 13 Feb 2020 09:05:20 +0000</updated>
                            <resolved>Fri, 15 Jun 2018 12:37:29 +0000</resolved>
                                    <version>Feature Model Converter 0.1.2</version>
                                    <fixVersion>Feature Model Converter 0.2.0</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16512461" author="bosschaert" created="Thu, 14 Jun 2018 13:25:00 +0000"  >&lt;p&gt;Implemented in the following commit: &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-feature-modelconverter.git;a=commitdiff;h=34bf8df2379b690e7f3cf01644454525d511799d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-feature-modelconverter.git;a=commitdiff;h=34bf8df2379b690e7f3cf01644454525d511799d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16512521" author="bosschaert" created="Thu, 14 Jun 2018 14:13:30 +0000"  >&lt;p&gt;Further implementation: &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-feature-modelconverter.git;a=commitdiff;h=f743568d915d5e72bd3a13810a943902f8f5e756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-feature-modelconverter.git;a=commitdiff;h=f743568d915d5e72bd3a13810a943902f8f5e756&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13166104">SLING-7734</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uuqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7731] Call to addService is no longer needed for modification events in SlingAuthenticatorServiceListener</title>
                <link>https://issues.apache.org/jira/browse/SLING-7731</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After introduction of modifiedService(...) method in SlingAuthenticatorServiceListener, calling addService(...) is no longer needed for modification event.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-core/blob/master/src/main/java/org/apache/sling/auth/core/impl/SlingAuthenticatorServiceListener.java#L85&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-auth-core/blob/master/src/main/java/org/apache/sling/auth/core/impl/SlingAuthenticatorServiceListener.java#L85&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Therefore line 85 should be changed from:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((event.getType() &amp;amp; (ServiceEvent.REGISTERED | ServiceEvent.MODIFIED)) != 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((event.getType() &amp;amp; ServiceEvent.REGISTERED) != 0) {

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13165815">SLING-7731</key>
            <summary>Call to addService is no longer needed for modification events in SlingAuthenticatorServiceListener</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="vfrey">Vincent Frey</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jun 2018 11:29:11 +0000</created>
                <updated>Mon, 22 Jun 2020 12:15:16 +0000</updated>
                            <resolved>Thu, 18 Jun 2020 08:39:11 +0000</resolved>
                                    <version>Auth Core 1.3.18</version>
                                    <fixVersion>Auth Core 1.4.8</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16511039" author="rombert" created="Wed, 13 Jun 2018 12:24:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vfrey&quot; class=&quot;user-hover&quot; rel=&quot;vfrey&quot;&gt;vfrey&lt;/a&gt; - can you create a PR with the proposed change so we can discuss it and properly attribute it to you? Also, it would be good to see if any changes should be added to SlingAuthenticatorServiceListenerTest.&lt;/p&gt;</comment>
                            <comment id="17138121" author="taestell" created="Wed, 17 Jun 2020 05:47:14 +0000"  >&lt;p&gt;This bug is causing a major performance problem with my team&apos;s production application, because both modifiedService() and addService() get called on every modification event.&lt;/p&gt;

&lt;p&gt;I have submitted a pull request here:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-auth-core/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-auth-core/pull/3&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17139220" author="rombert" created="Thu, 18 Jun 2020 08:39:12 +0000"  >&lt;p&gt;PR applied, thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vfrey&quot; class=&quot;user-hover&quot; rel=&quot;vfrey&quot;&gt;vfrey&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=taestell&quot; class=&quot;user-hover&quot; rel=&quot;taestell&quot;&gt;taestell&lt;/a&gt; for the contribution. I&apos;ll start a release vote early next week at the latest.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ut9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7730] Distribution package is lost if there is an installation error on receiver side</title>
                <link>https://issues.apache.org/jira/browse/SLING-7730</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There is a little test to reproduce the error:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;register namespaces on each:
	&lt;ul&gt;
		&lt;li&gt;Sender
		&lt;ul&gt;
			&lt;li&gt;URI = &lt;a href=&quot;http://testsender&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://testsender&lt;/a&gt;&lt;/li&gt;
			&lt;li&gt;Prefix = test&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
		&lt;li&gt;Receiver
		&lt;ul&gt;
			&lt;li&gt;URI = &lt;a href=&quot;http://testreceiver&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://testreceiver&lt;/a&gt;&lt;/li&gt;
			&lt;li&gt;Prefix = test&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Create a resource on Sender&lt;/li&gt;
	&lt;li&gt;Add a property &quot;test:testprop = testvalue&quot; to the resource.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;On the Sender, SCD will indicate that this was a success, but on Receiver, the resource is still missing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
22.05.2018 18:29:42.881 *ERROR* [127.0.0.1 [1527010182811] POST /libs/sling/distribution/services/importers/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; HTTP/1.1] org.apache.jackrabbit.vault.fs.impl.io.GenericArtifactHandler Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; parsing &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;: {}
org.xml.sax.SAXException: Unknown namespace URI: http:&lt;span class=&quot;code-comment&quot;&gt;//testauthor
&lt;/span&gt;	at org.apache.jackrabbit.vault.fs.impl.io.DocViewSAXImporter.startPrefixMapping(DocViewSAXImporter.java:511) [org.apache.jackrabbit.vault:3.1.44]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13165787">SLING-7730</key>
            <summary>Distribution package is lost if there is an installation error on receiver side</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simone.tripodi">Simone Tripodi</assignee>
                                    <reporter username="simone.tripodi">Simone Tripodi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jun 2018 09:30:21 +0000</created>
                <updated>Thu, 21 Jun 2018 09:55:42 +0000</updated>
                            <resolved>Thu, 21 Jun 2018 09:55:42 +0000</resolved>
                                    <version>Content Distribution Core 0.2.10</version>
                                    <fixVersion>Content Distribution Core 0.3.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16510852" author="simone.tripodi" created="Wed, 13 Jun 2018 09:33:12 +0000"  >&lt;p&gt;Attached patch contains the resolution proposal&lt;/p&gt;</comment>
                            <comment id="16510855" author="marett" created="Wed, 13 Jun 2018 09:34:26 +0000"  >&lt;p&gt;Path LGTM, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=simone.tripodi&quot; class=&quot;user-hover&quot; rel=&quot;simone.tripodi&quot;&gt;simone.tripodi&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16510862" author="simone.tripodi" created="Wed, 13 Jun 2018 09:37:22 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt; for the prompt review, I am pushing the modifications to the repository!&lt;/p&gt;</comment>
                            <comment id="16510869" author="simone.tripodi" created="Wed, 13 Jun 2018 09:40:57 +0000"  >&lt;p&gt;Resolved in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/d89583d04f34fa9707eba38005f5cc9143e99a01&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d89583d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16518172" author="mpetria" created="Wed, 20 Jun 2018 14:04:02 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=simone.tripodi&quot; class=&quot;user-hover&quot; rel=&quot;simone.tripodi&quot;&gt;simone.tripodi&lt;/a&gt;, I am reopening this issue as we should provide an option on the vault package builder whether to run in strict mode or not (the default should be strict true). I want us to mitigate the possible impact of some usecases where this used to work and suddenly it will casue blocked queues.&lt;/p&gt;</comment>
                            <comment id="16518179" author="simone.tripodi" created="Wed, 20 Jun 2018 14:08:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; it makes a lot of sense, new modifications will be soon pushed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16519171" author="simone.tripodi" created="Thu, 21 Jun 2018 09:55:42 +0000"  >&lt;p&gt;Configuration added in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/36902234b950596342d0f3da4d771fd9101285bc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3690223&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;/CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12927618" name="SLING-7730.patch" size="561" author="simone.tripodi" created="Wed, 13 Jun 2018 09:32:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ut3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7726] Sling content loader fails to load big -1mb+ /many files</title>
                <link>https://issues.apache.org/jira/browse/SLING-7726</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;ve been playing around with sling, migrating our setup and content and&lt;br/&gt;
 I think I have discovered a bug when loading content into sling.&lt;/p&gt;

&lt;p&gt;I&apos;m using a sling-starter project and sling-started-content. I&apos;ve&lt;br/&gt;
 updated started-contnet to include some frontend dependencies downloaded&lt;br/&gt;
 with npm.&lt;/p&gt;

&lt;p&gt;The content jar size is 9mb and contains an extra ~ 3300 files and 330&lt;br/&gt;
 folders.&lt;/p&gt;

&lt;p&gt;When I start sling-starter I get 403 page with the bellow error.&lt;/p&gt;

&lt;p&gt;I believe there is a time-out loading the content or the content takes&lt;br/&gt;
 more than 1-5 minutes to load so that is why things break.&lt;/p&gt;

&lt;p&gt;At a minimum, I do belive the logging can be improved to know if the&lt;br/&gt;
 content is loading or not or maybe I just need to switch to debug.&lt;/p&gt;

&lt;p&gt;I have created a branch to reproduce the bug &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. Use the following steps:&lt;/p&gt;

&lt;p&gt;&#8212;&lt;/p&gt;

&lt;p&gt;git clone&lt;br/&gt;
 &lt;a href=&quot;https://github.com/netdava/sling-org-apache-sling-starter-content.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/netdava/sling-org-apache-sling-starter-content.git&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;cd sling-org-apache-sling-starter-content &amp;amp;&amp;amp; git co &lt;br/&gt;
 content-loading-bug-improvement&lt;/p&gt;

&lt;p&gt;mvn clean install&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Once the content is built, go to a sling-starter project and in&lt;br/&gt;
 sling.txt update version like this&lt;br/&gt;
 &quot;org.apache.sling/org.apache.sling.starter.content/1.0.1-loadbug&quot;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Forbidden (403)&lt;/p&gt;

&lt;p&gt;The requested URL / resulted in an error in&lt;br/&gt;
 org.apache.sling.servlets.get.DefaultGetServlet.&lt;br/&gt;
 Request Progress:&lt;/p&gt;

&lt;p&gt;0 TIMER_START&lt;/p&gt;

{Request Processing}

&lt;p&gt;6 COMMENT timer_end format is&lt;/p&gt;

{&amp;lt;elapsed microseconds&amp;gt;,&amp;lt;timer name&amp;gt;}

&lt;p&gt;&amp;lt;optional message&amp;gt;&lt;br/&gt;
 20 LOG Method=GET, PathInfo=null&lt;br/&gt;
 39 TIMER_START&lt;/p&gt;

{handleSecurity}

&lt;p&gt;2731 TIMER_END&lt;/p&gt;

{2688,handleSecurity}

&lt;p&gt;authenticator&lt;br/&gt;
 org.apache.sling.auth.core.impl.SlingAuthenticator@54b78198 returns true&lt;br/&gt;
 6147 TIMER_START&lt;/p&gt;

{ResourceResolution}

&lt;p&gt;7266 TIMER_END&lt;/p&gt;

{1108,ResourceResolution}

&lt;p&gt;URI=/ resolves to&lt;br/&gt;
 Resource=JcrNodeResource, type=sling:OrderedFolder, superType=null,&lt;br/&gt;
 path=/content&lt;br/&gt;
 7297 LOG Resource Path Info: SlingRequestPathInfo: path=&apos;/content&apos;,&lt;br/&gt;
 selectorString=&apos;null&apos;, extension=&apos;null&apos;, suffix=&apos;/&apos;&lt;br/&gt;
 7299 TIMER_START&lt;/p&gt;

{ServletResolution}

&lt;p&gt;7318 TIMER_START&lt;/p&gt;

{resolveServlet(/content)}

&lt;p&gt;7468 TIMER_END&lt;/p&gt;

{146,resolveServlet(/content)}

&lt;p&gt;Using servlet&lt;br/&gt;
 org.apache.sling.servlets.get.DefaultGetServlet&lt;br/&gt;
 7481 TIMER_END&lt;/p&gt;

{180,ServletResolution}

&lt;p&gt;URI=/ handled by&lt;br/&gt;
 Servlet=org.apache.sling.servlets.get.DefaultGetServlet&lt;br/&gt;
 7510 LOG Applying Requestfilters&lt;br/&gt;
 7522 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter&lt;br/&gt;
 7534 LOG Calling filter:&lt;br/&gt;
 org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter&lt;br/&gt;
 7541 LOG Applying Componentfilters&lt;br/&gt;
 7582 TIMER_START&lt;/p&gt;

{org.apache.sling.servlets.get.DefaultGetServlet#0}

&lt;p&gt;7601 LOG Using&lt;br/&gt;
 org.apache.sling.servlets.get.impl.helpers.StreamRendererServlet to&lt;br/&gt;
 render for extension=null&lt;br/&gt;
 7687 LOG Applying Error filters&lt;br/&gt;
 7699 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter&lt;br/&gt;
 7713 TIMER_START&lt;/p&gt;

{handleError:status=403}

&lt;p&gt;8362 TIMER_END&lt;/p&gt;

{646,handleError:status=403}

&lt;p&gt;Using handler&lt;br/&gt;
 org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet&lt;br/&gt;
 8916 TIMER_END&lt;/p&gt;

{8914,Request Processing}

&lt;p&gt;Dumping&lt;br/&gt;
 SlingRequestProgressTracker Entries&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
 &lt;a href=&quot;https://github.com/netdava/sling-org-apache-sling-starter-content/tree/content-loading-bug-improvement&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/netdava/sling-org-apache-sling-starter-content/tree/content-loading-bug-improvement&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165554">SLING-7726</key>
            <summary>Sling content loader fails to load big -1mb+ /many files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ieugen">Ioan Eugen Stan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jun 2018 12:53:17 +0000</created>
                <updated>Tue, 12 Jun 2018 12:53:17 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3urnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7725] Sling repository corrupted</title>
                <link>https://issues.apache.org/jira/browse/SLING-7725</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hi Team,&lt;/p&gt;

&lt;p&gt;Suddenly our Sling repository got corrupted and we got an error while we accessing CMS repository (503 error (Authenticationsupport service missing)).&lt;/p&gt;

&lt;p&gt;We failed by restoring the repository so we created new one.&lt;/p&gt;

&lt;p&gt;We don&apos;t know why it is happend in production.&lt;/p&gt;

&lt;p&gt;This is should not be happend in future&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165546">SLING-7725</key>
            <summary>Sling repository corrupted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sribharanidharan.s">sribharanidharan subramanian</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jun 2018 12:26:26 +0000</created>
                <updated>Tue, 12 Jun 2018 12:44:56 +0000</updated>
                            <resolved>Tue, 12 Jun 2018 12:44:56 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16509592" author="rombert" created="Tue, 12 Jun 2018 12:44:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sribharanidharan.s&quot; class=&quot;user-hover&quot; rel=&quot;sribharanidharan.s&quot;&gt;sribharanidharan.s&lt;/a&gt;. I would definitely like to help you understand what happened to your repository - data loss is a big issue.&lt;/p&gt;

&lt;p&gt;Please write an email to users@sling.apache.org and include any details that you think are relevant, including - Sling version, whether you&apos;re using Jackrabbit or Oak ( and which version ) , operating system, Java version, etc.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3urlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7724] Change scope to QueryServlet dependencies</title>
                <link>https://issues.apache.org/jira/browse/SLING-7724</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, all the server-side dependencies for &lt;tt&gt;QueryServlet&lt;/tt&gt; are listed with &lt;tt&gt;&amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;&lt;/tt&gt; in the pom. &lt;/p&gt;

&lt;p&gt;These dependencies get lost in test bundles that have a dependency to sling.testing.clients, so &lt;tt&gt;TinyBundles&lt;/tt&gt; fails to create a bundle with &lt;tt&gt;QueryServlet&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;The dependencies need to be compile-scoped to keep them in the resulting jar.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165528">SLING-7724</key>
            <summary>Change scope to QueryServlet dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="volteanu">Valentin Olteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jun 2018 09:21:04 +0000</created>
                <updated>Wed, 13 Jun 2018 06:45:03 +0000</updated>
                            <resolved>Wed, 13 Jun 2018 06:44:35 +0000</resolved>
                                    <version>Apache Sling Testing Clients 1.2.0</version>
                                    <fixVersion>Apache Sling Testing Clients 1.2.2</fixVersion>
                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16509595" author="volteanu" created="Tue, 12 Jun 2018 12:48:22 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrei.dulvac&quot; class=&quot;user-hover&quot; rel=&quot;andrei.dulvac&quot;&gt;andrei.dulvac&lt;/a&gt; for merging the PR. Could you please also close the issue?&lt;/p&gt;</comment>
                            <comment id="16510690" author="andrei.dulvac" created="Wed, 13 Jun 2018 06:45:03 +0000"  >&lt;p&gt;Thanks for the PR! &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3urhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7722] Container pipe is not always cut when empty pipe in the middle</title>
                <link>https://issues.apache.org/jira/browse/SLING-7722</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
.echo(PATH_FRUITS) &lt;span class=&quot;code-comment&quot;&gt;//should &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fruit root
&lt;/span&gt;                .echo(&lt;span class=&quot;code-quote&quot;&gt;&quot;nonexisting&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;// /content/fruits/nonexisting does not exist
&lt;/span&gt;                .echo(PATH_APPLE) &lt;span class=&quot;code-comment&quot;&gt;// existing apple&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;does actually return PATH_APPLE&apos;s resource. &lt;br/&gt;
wether nonexisting is a configuration mistake or some contextual problem, this pipe should be cut, and not remove anything.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165311">SLING-7722</key>
            <summary>Container pipe is not always cut when empty pipe in the middle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Jun 2018 12:03:25 +0000</created>
                <updated>Fri, 21 Sep 2018 08:02:50 +0000</updated>
                            <resolved>Mon, 11 Jun 2018 12:07:25 +0000</resolved>
                                    <version>Pipes 2.0.2</version>
                                    <fixVersion>Pipes 3.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16623241" author="npeltier" created="Fri, 21 Sep 2018 08:02:50 +0000"  >&lt;p&gt;Sling Pipes 3.0.2 is released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uq5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7721] [HTL] Redirect user to login form in REPL if the user is not already authenticated</title>
                <link>https://issues.apache.org/jira/browse/SLING-7721</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to the changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6130&quot; title=&quot;Restrict access for principal everyone and move configuration to repoinit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6130&quot;&gt;&lt;del&gt;SLING-6130&lt;/del&gt;&lt;/a&gt; the &lt;tt&gt;/htl&lt;/tt&gt; folder is now protected, since the &lt;tt&gt;everyone&lt;/tt&gt; access has been removed. Therefore, a not yet authenticated user should be redirected to the authentication form when trying to access &lt;tt&gt;/htl/repl.html&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165291">SLING-7721</key>
            <summary>[HTL] Redirect user to login form in REPL if the user is not already authenticated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Jun 2018 10:25:21 +0000</created>
                <updated>Fri, 22 Jun 2018 14:12:11 +0000</updated>
                            <resolved>Mon, 11 Jun 2018 10:27:37 +0000</resolved>
                                    <version>Scripting HTL REPL 1.0.4</version>
                                    <fixVersion>Scripting HTL REPL 1.0.6</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16507896" author="radu.cotescu" created="Mon, 11 Jun 2018 10:27:37 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-repl/commit/545a5df&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 545a5df&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13011339">SLING-6130</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uq1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7720] Conflicting lifecycle mapping bnd-maven-plugin:bnd-process</title>
                <link>https://issues.apache.org/jira/browse/SLING-7720</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Whenever a project is leveraging the &lt;tt&gt;biz.aQute.bnd:bnd-maven-plugin&lt;/tt&gt; with goal &lt;tt&gt;bnd-process&lt;/tt&gt;, Eclipse emits the errors &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Conflicting lifecycle mapping (plugin execution &lt;span class=&quot;code-quote&quot;&gt;&quot;biz.aQute.bnd:bnd-maven-plugin:4.0.0:bnd-process (execution: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, phase: process-classes)&quot;&lt;/span&gt;). To enable full functionality, remove the conflicting mapping and run Maven-&amp;gt;Update Project Configuration.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Plugin execution not covered by lifecycle configuration: biz.aQute.bnd:bnd-maven-plugin:4.0.0:bnd-process (execution: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, phase: process-classes)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This can e.g. be reproduced with the project at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-annotations-it&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-annotations-it&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The reasons for that seems to be that both the plugin itself as well as the Sling IDE provide a lifecycle mapping for that specific goal (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6129&quot; title=&quot;Sling IDE: Support bnd-maven-plugin as well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6129&quot;&gt;&lt;del&gt;SLING-6129&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165191">SLING-7720</key>
            <summary>Conflicting lifecycle mapping bnd-maven-plugin:bnd-process</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Jun 2018 15:49:42 +0000</created>
                <updated>Fri, 15 Jun 2018 14:21:37 +0000</updated>
                            <resolved>Fri, 15 Jun 2018 14:21:37 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.2.2</version>
                                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16507436" author="kwin" created="Sun, 10 Jun 2018 16:31:40 +0000"  >&lt;p&gt;The error is emitted from &lt;a href=&quot;https://github.com/eclipse/m2e-core/blob/a1e24f9f417719d3685824383291f05a111a409e/org.eclipse.m2e.core/src/org/eclipse/m2e/core/internal/lifecyclemapping/LifecycleMappingFactory.java#L643&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/m2e-core/blob/a1e24f9f417719d3685824383291f05a111a409e/org.eclipse.m2e.core/src/org/eclipse/m2e/core/internal/lifecyclemapping/LifecycleMappingFactory.java#L643&lt;/a&gt;. Maybe we are just lacking the according &lt;tt&gt;runsBefore&lt;/tt&gt; directive in &lt;a href=&quot;https://github.com/apache/sling-ide-tooling/blob/39ed806bbfe505d3120b07646c37b950ca9981c3/eclipse/eclipse-m2e-ui/plugin.xml#L58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-ide-tooling/blob/39ed806bbfe505d3120b07646c37b950ca9981c3/eclipse/eclipse-m2e-ui/plugin.xml#L58&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16513875" author="kwin" created="Fri, 15 Jun 2018 14:21:26 +0000"  >&lt;p&gt;Actually it turned out I had a conflicting Eclipse plugin installed, namely &quot;bndtools&quot; (&lt;a href=&quot;http://bndtools.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bndtools.org/&lt;/a&gt;). After uninstalling it, everything is fine again.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13011286">SLING-6129</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3upfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7714] SCD FileVault packages created with root filter which removes ACEs</title>
                <link>https://issues.apache.org/jira/browse/SLING-7714</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After upgrading the customer stage instances, it has been observed that the user synchronization is broken.&lt;/p&gt;

&lt;p&gt;After investigation, I observed that not only the user sync is broken but possible the whole instance, as many &quot;rep:policy&quot; nodes have been removed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;Stepstoreproduce&quot;&gt;&lt;/a&gt;Steps to reproduce&lt;/h4&gt;
&lt;ol&gt;
	&lt;li&gt;start&#160;a 3 instances (1 author, 2 publishers) setup on AEM 6.3&lt;/li&gt;
	&lt;li&gt;enable the user synchronization following the documentation&lt;/li&gt;
	&lt;li&gt;upgrade publishers to SP2, then author&lt;/li&gt;
	&lt;li&gt;create a new user on pub1&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Expected result:&lt;/p&gt;

&lt;p&gt;User is propagated/synchronized on pub2 without side-effect&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Actual result:&lt;/p&gt;

&lt;p&gt;User is propagated/synchronized on pub2, but the following rep:policy nodes are removed (maybe non exhaustive list):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/rep:policy&lt;/li&gt;
	&lt;li&gt;/home/rep:policy&lt;/li&gt;
	&lt;li&gt;/home/users/rep:policy&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I reproduce this issue and tested again the procedure, but I disabled the sync agent on Author, so that I could retrieve the package being replicated on the other publisher (pub2) to inspect its definition.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/secure/attachment/2594552/2594552_faulty-pkg-4503-1.0.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;faulty-pkg-4503-1.0.zip^&lt;img src=&quot;https://issues.apache.org/jira/images/icons/attach/noimage.png&quot; imagetext=&quot;/images/icons/link_attachment_7.gif&quot; align=&quot;absmiddle&quot; border=&quot;0&quot; /&gt;^&lt;/a&gt;&#160;is a raw package containing the &quot;/var/sling/distribution&quot; and &quot;/var/eventing/jobs/unassigned&quot; of pub1 where I created the new user post-SP2 install, if you require more details.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/secure/attachment/2594549/2594549_pkg-4503-base.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pkg-4503-base.zip^&lt;img src=&quot;https://issues.apache.org/jira/images/icons/attach/noimage.png&quot; imagetext=&quot;/images/icons/link_attachment_7.gif&quot; align=&quot;absmiddle&quot; border=&quot;0&quot; /&gt;^&lt;/a&gt;&#160;and&#160;&lt;a href=&quot;https://issues.apache.org/secure/attachment/2594550/2594550_pkg-4503-additionnal.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pkg-4503-additionnal.zip^&lt;img src=&quot;https://issues.apache.org/jira/images/icons/attach/noimage.png&quot; imagetext=&quot;/images/icons/link_attachment_7.gif&quot; align=&quot;absmiddle&quot; border=&quot;0&quot; /&gt;^&lt;/a&gt;&#160;are the actual packages that will be distributed by SCD, and installed on pub2. I extracted them from&#160;&lt;a href=&quot;https://issues.apache.org/secure/attachment/2594552/2594552_faulty-pkg-4503-1.0.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;faulty-pkg-4503-1.0.zip^&lt;img src=&quot;https://issues.apache.org/jira/images/icons/attach/noimage.png&quot; imagetext=&quot;/images/icons/link_attachment_7.gif&quot; align=&quot;absmiddle&quot; border=&quot;0&quot; /&gt;^&lt;/a&gt;&#160;from the following path &quot;faulty-pkg-4503-1.0.zip\jcr_root\var\sling\distribution\packages\socialpubsync-vlt\data\dstrpck-1528203802286-58c3aa28-a83a-4a74-a781-e48e5415a541\&quot; and &quot;dstrpck-1528203802288-c6416288-9b4d-43cc-8967-c09215bd6a91&quot; (they are the &quot;bin&quot; file renamed).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Checking their&#160;&lt;em&gt;META-INF\vault\filter.xml,&lt;/em&gt;&#160;I think that the filter definition is incorrect:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;workspaceFilter version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;filter root=&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/users/6&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;include pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/users/6&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/filter&amp;gt;

  &amp;lt;filter root=&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/users/6/68dhk9JC3OnZO5Z87rLR&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;include pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/users/6/68dhk9JC3OnZO5Z87rLR&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/filter&amp;gt;

  &amp;lt;filter root=&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/workspaceFilter&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;The last entry with filter on &quot;/&quot; looks suspicious.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;On a pre-SP2 instance, I have the following which is correct:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;workspaceFilter version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;filter root=&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/users/L&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;include pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/users/L&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/filter&amp;gt;

  &amp;lt;filter root=&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/users/L/L3q-3NdVN-uV1eawzefF&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;include pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;/home/users/L/L3q-3NdVN-uV1eawzefF&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/filter&amp;gt;
&amp;lt;/workspaceFilter&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I assume that the ACL are merged and as the filter is pointing to &quot;/&quot; and the package doesn&apos;t have any rep:policy for any nodes in the hierarchy, it is removing the existing ones.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;PS: I have some instances setup to share if needed.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Btw now that the issue is qualified I guess you only need to setup one single publisher, enable usersync, and create a new user. This should trigger the package creation containing the invalid filter definition.&lt;/b&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13164688">SLING-7714</key>
            <summary>SCD FileVault packages created with root filter which removes ACEs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="aagarwa">Ankit Aggarwal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jun 2018 13:08:53 +0000</created>
                <updated>Thu, 21 Jun 2018 16:08:03 +0000</updated>
                            <resolved>Wed, 13 Jun 2018 16:07:06 +0000</resolved>
                                    <version>Content Distribution Core 0.2.10</version>
                                    <fixVersion>Content Distribution Core 0.3.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16504657" author="aagarwa" created="Thu, 7 Jun 2018 13:12:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have attached two patches&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12926891/12926891_CQ-4245994_2.patch&quot; title=&quot;CQ-4245994_2.patch attached to SLING-7714&quot;&gt;CQ-4245994_2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12926890/12926890_CQ-4245994.patch&quot; title=&quot;CQ-4245994.patch attached to SLING-7714&quot;&gt;CQ-4245994.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;with minor differences but the resultant vault packages are different in each case when there are no properties filter&#160;configured. Both works fine when there are properties filter configured in &quot;Apache Sling Distribution Packaging - Vault Package Builder Factory&quot;.&lt;/p&gt;</comment>
                            <comment id="16506029" author="mpetria" created="Fri, 8 Jun 2018 13:34:05 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aagarwa&quot; class=&quot;user-hover&quot; rel=&quot;aagarwa&quot;&gt;aagarwa&lt;/a&gt;. I think the second patch, that ignores property filters all together if they are not set, is the safest.&lt;/p&gt;</comment>
                            <comment id="16506310" author="aagarwa" created="Fri, 8 Jun 2018 17:38:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Second patch should have worked fine but in case when no property filters are present, user properties are missing in .content.xml of the user node.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;jcr:root xmlns:jcr=&lt;span class=&quot;code-quote&quot;&gt;&quot;[http:&lt;span class=&quot;code-comment&quot;&gt;//www.jcp.org/jcr/1.0&quot;&lt;/span&gt;|http://www.jcp.org/jcr/1.0%22]&amp;gt;
&lt;/span&gt;&amp;lt;profile/&amp;gt;
&amp;lt;/jcr:root&amp;gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;May be we should initialize the default property filters like &quot;/|-^.*&quot;.&lt;br/&gt;
I have made this default and tested as well. Which works fine. Attached&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12927075/12927075_CQ-4245994_3.patch&quot; title=&quot;CQ-4245994_3.patch attached to SLING-7714&quot;&gt;CQ-4245994_3.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;.&lt;/p&gt;

&lt;p&gt;Please review.&lt;/p&gt;</comment>
                            <comment id="16508061" author="marett" created="Mon, 11 Jun 2018 13:36:17 +0000"  >&lt;p&gt;This issue relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-278&quot; title=&quot;Root path ACEs removed due to JCRVLT-227 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-278&quot;&gt;&lt;del&gt;JCRVLT-278&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-227&quot; title=&quot;Import fail if user does not have access to the root path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-227&quot;&gt;&lt;del&gt;JCRVLT-227&lt;/del&gt;&lt;/a&gt;. The root cause of this issue, is a property filter set to the root path independently of a property filter being configured or not. The workaround for this issue, is to set the &lt;tt&gt;MERGE_PRESERVE&lt;/tt&gt; ACL handling in the &lt;tt&gt;o.a.s.d.s.i.v.VaultDistributionPackageBuilderFactory&lt;/tt&gt; configuration. I&apos;ll review the fix.&lt;/p&gt;</comment>
                            <comment id="16509718" author="marett" created="Tue, 12 Jun 2018 14:56:14 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-197&quot; title=&quot;AggregateImpl.includesProperty fails with multiple filter roots&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-197&quot;&gt;&lt;del&gt;JCRVLT-197&lt;/del&gt;&lt;/a&gt;, FileVault deprecated the ability to define multiple filter roots, we reuse the path as root.&lt;br/&gt;
The signature &lt;tt&gt;DefaultWorkspaceFilter#addPropertyFilterSet&lt;/tt&gt; has been deprecated in favor of &lt;tt&gt;DefaultWorkspaceFilter#add(PathFilterSet, PathFilterSet)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/blob/trunk/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/config/DefaultWorkspaceFilter.java#L121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/blob/trunk/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/config/DefaultWorkspaceFilter.java#L121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7238&quot; title=&quot;Import fail if user does not have access to the root path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7238&quot;&gt;&lt;del&gt;SLING-7238&lt;/del&gt;&lt;/a&gt;, the SCD code has been adapted to use the new signature&lt;/p&gt;

&lt;p&gt;	&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/16a4ed809aaf935c29c2b19237e5c54c5d0c9384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/16a4ed809aaf935c29c2b19237e5c54c5d0c9384&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The new signature &lt;tt&gt;DefaultWorkspaceFilter#add(PathFilterSet, PathFilterSet)&lt;/tt&gt; is not semantically equivalent to the previous combination of &lt;tt&gt;DefaultWorkspaceFilter#add&lt;/tt&gt; and &lt;tt&gt;DefaultWorkspaceFilter#addPropertyFilterSet&lt;/tt&gt;. The new signature produces a single workspace filter entry instead of the two. It turns out it keeps the last filter entry which is the one with the root path.&lt;/p&gt;</comment>
                            <comment id="16510700" author="mpetria" created="Wed, 13 Jun 2018 07:05:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt; I think we have 2 things to solve:&lt;br/&gt;
1. make it work without property filters (these were added recently and they are not used a lot)&lt;br/&gt;
2. make it work with property filters&lt;br/&gt;
I am trying to split this in two because maybe we can solve 1 without fixing filevault. I think for that &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12926890/CQ-4245994.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;CQ-4245994.patch&lt;/a&gt; looks to be the best. Even if the resulting filter.xml looks like a &quot;deep filter&quot; (with not include pattern) only the distributed node is packaged.&lt;/p&gt;</comment>
                            <comment id="16510708" author="aagarwa" created="Wed, 13 Jun 2018 07:15:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12927075/12927075_CQ-4245994_3.patch&quot; title=&quot;CQ-4245994_3.patch attached to SLING-7714&quot;&gt;CQ-4245994_3.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;, I have provided the default value to the property filters in addition to the fix in&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12926890/12926890_CQ-4245994.patch&quot; title=&quot;CQ-4245994.patch attached to SLING-7714&quot;&gt;CQ-4245994.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16510711" author="aagarwa" created="Wed, 13 Jun 2018 07:22:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Initially the nodeFilterSet&#160;was used to create filter.xml but now propertiesFilterSet is used to create the same.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;DefaultWorkspaceFilter#add(PathFilterSet, PathFilterSet)&lt;/tt&gt;&#160;does not keep the last filter entry but while generating the filter it iterates over&#160;propertiesFilterSet&#160; &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&#160;.&#160;Here&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;we are creating a PropertyFilter at root path &quot;/&quot; which is causing this problem. &lt;br/&gt;
I have set the root path to the node path.&lt;/p&gt;


&lt;p&gt;Is there any specific reason of setting propertyFilterSet root to &quot;/&quot; here&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. I think this should have been set to same path&#160;as that of the node filter.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/16a4ed809aaf935c29c2b19237e5c54c5d0c9384/src/main/java/org/apache/sling/distribution/serialization/impl/vlt/VltUtils.java#L97&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/16a4ed809aaf935c29c2b19237e5c54c5d0c9384/src/main/java/org/apache/sling/distribution/serialization/impl/vlt/VltUtils.java#L97&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/16a4ed809aaf935c29c2b19237e5c54c5d0c9384/src/main/java/org/apache/sling/distribution/serialization/impl/vlt/VltUtils.java#L97&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/blob/16a4ed809aaf935c29c2b19237e5c54c5d0c9384/src/main/java/org/apache/sling/distribution/serialization/impl/vlt/VltUtils.java#L97&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/blob/trunk/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/config/DefaultWorkspaceFilter.java#L429&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/blob/trunk/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/config/DefaultWorkspaceFilter.java#L429&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16511074" author="aagarwa" created="Wed, 13 Jun 2018 12:50:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I had shared the buddy build from&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12927075/12927075_CQ-4245994_3.patch&quot; title=&quot;CQ-4245994_3.patch attached to SLING-7714&quot;&gt;CQ-4245994_3.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;with a customer and it is working fine on their test environment as of now.&lt;/p&gt;</comment>
                            <comment id="16511275" author="marett" created="Wed, 13 Jun 2018 15:06:30 +0000"  >&lt;p&gt;In SCD, we currently allow to build any combinations of deep/shallow packages with/without property filter. FileVault can support those combinations, I have built test cases for FileVault to cover each combination, see &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-304&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/JCRVLT-304&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aagarwa&quot; class=&quot;user-hover&quot; rel=&quot;aagarwa&quot;&gt;aagarwa&lt;/a&gt; patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12926890/12926890_CQ-4245994.patch&quot; title=&quot;CQ-4245994.patch attached to SLING-7714&quot;&gt;CQ-4245994.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; does the right thing it seems, but the filters are indeed wrong in the package built by FileVault. &lt;/p&gt;</comment>
                            <comment id="16511370" author="mpetria" created="Wed, 13 Jun 2018 16:06:30 +0000"  >&lt;p&gt;I applied the first patch to SCD and filled &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-305&quot; title=&quot;DefaultWorkspaceFilter.add(nodeFilters) does not include properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-305&quot;&gt;&lt;del&gt;JCRVLT-305&lt;/del&gt;&lt;/a&gt; to track the filter.xml problem.&lt;/p&gt;</comment>
                            <comment id="16512109" author="marett" created="Thu, 14 Jun 2018 07:49:12 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13165875">JCRVLT-305</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13116937">JCRVLT-227</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13140424">JCRVLT-278</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13165863">JCRVLT-304</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12926890" name="CQ-4245994.patch" size="1653" author="aagarwa" created="Thu, 7 Jun 2018 13:08:44 +0000"/>
                            <attachment id="12926891" name="CQ-4245994_2.patch" size="2064" author="aagarwa" created="Thu, 7 Jun 2018 13:08:44 +0000"/>
                            <attachment id="12927075" name="CQ-4245994_3.patch" size="5452" author="aagarwa" created="Fri, 8 Jun 2018 17:37:38 +0000"/>
                            <attachment id="12926889" name="faulty-pkg-4503-1.0.zip" size="35128" author="aagarwa" created="Thu, 7 Jun 2018 13:08:45 +0000"/>
                            <attachment id="12926888" name="pkg-4503-additionnal.zip" size="5709" author="aagarwa" created="Thu, 7 Jun 2018 13:08:44 +0000"/>
                            <attachment id="12926887" name="pkg-4503-base.zip" size="5216" author="aagarwa" created="Thu, 7 Jun 2018 13:08:45 +0000"/>
                            <attachment id="12926886" name="pre-SP2-1.0.zip" size="32993" author="aagarwa" created="Thu, 7 Jun 2018 13:08:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3umbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7705] dryRun parameter no longer allows GET requests on pipe modifying content</title>
                <link>https://issues.apache.org/jira/browse/SLING-7705</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;it&apos;s not possible anymore to do a GET call on a pipe modifying content with dry run parameter set&lt;/p&gt;</description>
                <environment></environment>
        <key id="13163896">SLING-7705</key>
            <summary>dryRun parameter no longer allows GET requests on pipe modifying content</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jun 2018 16:15:45 +0000</created>
                <updated>Fri, 21 Sep 2018 08:02:48 +0000</updated>
                            <resolved>Tue, 5 Jun 2018 11:22:28 +0000</resolved>
                                    <version>Pipes 2.0.2</version>
                                    <fixVersion>Pipes 3.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16623238" author="npeltier" created="Fri, 21 Sep 2018 08:02:48 +0000"  >&lt;p&gt;Sling Pipes 3.0.2 is released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uhfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7703] XSSFilter.filter(XSSFilter.DEFAULT_CONTEXT, ...) unescapes given unicode escape sequences</title>
                <link>https://issues.apache.org/jira/browse/SLING-7703</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When giving a unicode escape sequence like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
test &amp;amp;#9989; test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to &lt;tt&gt;XSSFilter.filter(...)&lt;/tt&gt; the returned value contains the unescaped unicode escape sequence.&lt;br/&gt;
This is always a problem if the output is not UTF-8.&lt;/p&gt;

&lt;p&gt;And even worse &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
test&amp;amp;shy;test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;leads to the full removal of the semantically significant soft-hyphen.&lt;/p&gt;

&lt;p&gt;The expected behaviour is that those non-dangerous unicode escape sequences as well as non-dangerous html escapes pass the filter without getting unescaped/removed.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;XSSFilter.filter(...)&lt;/tt&gt; is used e.g. from HTL with display context &quot;html&quot; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/f46ff4d97b96d21da521651fe9f789f89253452f/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/XSSRuntimeExtension.java#L123&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/f46ff4d97b96d21da521651fe9f789f89253452f/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/XSSRuntimeExtension.java#L123&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Attached is a failing test case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13163601">SLING-7703</key>
            <summary>XSSFilter.filter(XSSFilter.DEFAULT_CONTEXT, ...) unescapes given unicode escape sequences</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Jun 2018 10:45:53 +0000</created>
                <updated>Sat, 2 Jun 2018 16:33:28 +0000</updated>
                                            <version>XSS Protection API 2.0.6</version>
                                                    <component>XSS Protection API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13158116">SLING-7658</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12926233" name="SLING-7703-v02.patch" size="851" author="kwin" created="Sat, 2 Jun 2018 16:33:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ufmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7696] Includes are not taken into account when assembling an application</title>
                <link>https://issues.apache.org/jira/browse/SLING-7696</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When more than one feature is provided to the ApplicationBuilder and one of the provided features includes another provided feature, currently the included feature is merged which should not be the case as it is included by another feature.&lt;br/&gt;
Example:&lt;br/&gt;
Feature B includes feature A&lt;br/&gt;
Feature A and B are provided to the builder, only feature B should be used to build the application&lt;br/&gt;
Currently A and B are used&lt;/p&gt;</description>
                <environment></environment>
        <key id="13162950">SLING-7696</key>
            <summary>Includes are not taken into account when assembling an application</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 May 2018 16:58:08 +0000</created>
                <updated>Thu, 13 Feb 2020 09:06:55 +0000</updated>
                            <resolved>Wed, 30 May 2018 17:04:53 +0000</resolved>
                                    <version>Feature Model 0.1.0</version>
                                    <fixVersion>Feature Model 0.1.2</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16495443" author="cziegeler" created="Wed, 30 May 2018 17:04:53 +0000"  >&lt;p&gt;I fixed this in rev 0a203c3 and added a test case for this&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ublz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7693] PathPipe should support pure JCR path creation when nodeType is specified</title>
                <link>https://issues.apache.org/jira/browse/SLING-7693</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6998&quot; title=&quot;PathPipe should use ResourceUtil.getOrCreateResource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6998&quot;&gt;&lt;del&gt;SLING-6998&lt;/del&gt;&lt;/a&gt;, looks like some JCR paths are no longer creatable because of some node type restrictions.&lt;br/&gt;
When a node type is specified in the pipe configuration, we should explicitally use JCR api to create the path&lt;/p&gt;</description>
                <environment></environment>
        <key id="13162892">SLING-7693</key>
            <summary>PathPipe should support pure JCR path creation when nodeType is specified</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 May 2018 12:53:51 +0000</created>
                <updated>Fri, 21 Sep 2018 08:02:46 +0000</updated>
                            <resolved>Wed, 30 May 2018 13:00:56 +0000</resolved>
                                    <version>Pipes 2.0.2</version>
                                    <fixVersion>Pipes 3.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16623237" author="npeltier" created="Fri, 21 Sep 2018 08:02:46 +0000"  >&lt;p&gt;Sling Pipes 3.0.2 is released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ub93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7689] Conversion feature model to provisioning model files should only consider .json files</title>
                <link>https://issues.apache.org/jira/browse/SLING-7689</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The conversion process that converts feature files to provisioning model files should only look at .json files and ignore any other files.&lt;br/&gt;
Currently it tries to json-parse all files in the features directory, if there are any unrelated files, like editor swap files or hidden files placed there by the OS this will cause errors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13162592">SLING-7689</key>
            <summary>Conversion feature model to provisioning model files should only consider .json files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 May 2018 13:46:27 +0000</created>
                <updated>Fri, 8 Jun 2018 14:34:08 +0000</updated>
                            <resolved>Fri, 8 Jun 2018 14:34:08 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.7.16</version>
                                    <fixVersion>Slingstart Maven Plugin 1.8.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3u9en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7687] Some Adapters don&apos;t work during service deactivation</title>
                <link>https://issues.apache.org/jira/browse/SLING-7687</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If we have an AdapterFactory and a Service registered by the following code:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;SlingContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingContext();
context.registerInjectActivateService(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestAdapterFactory());
context.registerInjectActivateService(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestService());&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it turns out that adapting a Resource to another Class (defined by the TestAdapterFactory) returns null when done in the deactivate method of the TestService, i.e.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
resource.adaptTo(TestClass.class) &lt;span class=&quot;code-comment&quot;&gt;// returns &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; in the deactivate method.
&lt;/span&gt;resource.adaptTo(TestClass.class) &lt;span class=&quot;code-comment&quot;&gt;// works correctly in any other method.&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Reason:&lt;/p&gt;

&lt;p&gt;It looks like the registered adapters are cleaned up before registered services are deactivated in the tearDown method of SlingContextImpl.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// SlingContextImpl
&lt;/span&gt;void tearDown() {
    ...
    MockSling.clearAdapterManagerBundleContext();
    ...
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.tearDown(); &lt;span class=&quot;code-comment&quot;&gt;// calls the deactivate of the registered services.
&lt;/span&gt;}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Cleaning up the registered adapters after deactivating the services seems to solve the issue.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// SlingContextImpl
&lt;/span&gt;void tearDown() {
    ...
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.tearDown();
    MockSling.clearAdapterManagerBundleContext();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but I&apos;m not sure about any other potential impacts of this change (attached patch).&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13162485">SLING-7687</key>
            <summary>Some Adapters don&apos;t work during service deactivation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="arnehjain">Arneh Jain</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Tue, 29 May 2018 06:18:01 +0000</created>
                <updated>Mon, 6 Aug 2018 08:18:29 +0000</updated>
                            <resolved>Tue, 31 Jul 2018 10:51:29 +0000</resolved>
                                    <version>Testing Sling Mock 2.2.18</version>
                                    <fixVersion>Testing Sling Mock 2.2.20</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16494710" author="rombert" created="Wed, 30 May 2018 05:40:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; - WDYT about this patch?&lt;/p&gt;</comment>
                            <comment id="16495324" author="sseifert@pro-vision.de" created="Wed, 30 May 2018 15:36:42 +0000"  >&lt;p&gt;i think it makes sense.&lt;/p&gt;</comment>
                            <comment id="16563462" author="sseifert@pro-vision.de" created="Tue, 31 Jul 2018 10:51:29 +0000"  >&lt;p&gt;patch applied&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-sling-mock/commit/944c00112bc64a103715d06c3bbb53723fe57020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-sling-mock/commit/944c00112bc64a103715d06c3bbb53723fe57020&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12925497" name="patch.txt" size="918" author="arnehjain" created="Tue, 29 May 2018 06:17:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3u8qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7685] data-sly-resource throws RecursionTooDeepException when used with dynamic variables that are null / empty</title>
                <link>https://issues.apache.org/jira/browse/SLING-7685</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I am on AEM 6.3.1.2.&lt;/p&gt;

&lt;p&gt;If&#160;I use &lt;b&gt;data-sly-resource&lt;/b&gt; w/ dynamic variable which is null or empty, I get a&#160;&lt;b&gt;RecursionTooDeepException&lt;/b&gt;&#160;runtime.&#160;The stack looks something like this (redacting project specific stuff):&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-05-26 20:18:33,335 *ERROR* [0:0:0:0:0:0:0:1 [1527380309473] GET /content/&amp;lt;path&amp;gt; HTTP/1.1] org.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught SlingException
org.apache.sling.scripting.sightly.SightlyException: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.SlingException: Cannot get DefaultSlingScript: org.apache.sling.api.request.RecursionTooDeepException: /content/&amp;lt;path&amp;gt;
at com.adobe.cq.sightly.WCMScriptHelper.includeScript(WCMScriptHelper.java:227)
at com.adobe.cq.sightly.internal.extensions.IncludeExtension.call(IncludeExtension.java:73)
at org.apache.sling.scripting.sightly.impl.engine.runtime.RenderContextImpl.call(RenderContextImpl.java:69)
at  org.apache.sling.scripting.sightly.java.compiler.RenderUnit.render(RenderUnit.java:48)
at org.apache.sling.scripting.sightly.impl.engine.SightlyCompiledScript.eval(SightlyCompiledScript.java:61)
at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:386)
at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)
at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)
at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552)
at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
at com.adobe.acs.commons.wcm.impl.ComponentErrorHandlerImpl.doFilter(ComponentErrorHandlerImpl.java:217)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.core.impl.WCMDebugFilter.doFilterWithErrorHandling(WCMDebugFilter.java:192)
at com.day.cq.wcm.core.impl.WCMDebugFilter.doFilter(WCMDebugFilter.java:159)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.dynamicinclude.IncludeTagFilter.doFilter(IncludeTagFilter.java:71)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.core.impl.WCMDeveloperModeFilter.doFilter(WCMDeveloperModeFilter.java:119)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.wcm.core.impl.WCMComponentFilter.doFilter(WCMComponentFilter.java:278)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at  org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at com.day.cq.personalization.impl.TargetComponentFilter.doFilter(TargetComponentFilter.java:96)
at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
at org.apache.sling.engine.impl.SlingRequestProcessorImpl.dispatchRequest(SlingRequestProcessorImpl.java:322)
at org.apache.sling.engine.impl.request.SlingRequestDispatcher.dispatch(SlingRequestDispatcher.java:211)
at org.apache.sling.engine.impl.request.SlingRequestDispatcher.include(SlingRequestDispatcher.java:104)
at com.day.cq.wcm.core.impl.WCMComponentFilter$ForwardRequestDispatcher.include(WCMComponentFilter.java:516)
at org.apache.jsp.libs.cq.Page.Page_jsp._jspService(Page_jsp.java:106)
at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It seems like the resource include implementation is scanning the page&apos;s whole resource tree. I think the behavior is similar to what&apos;s mentioned in the thread&#160;&lt;a href=&quot;https://forums.adobe.com/message/9720147#9720147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I can get around this by&#160;putting a&#160;&lt;b&gt;data-sly-test&lt;/b&gt; in the same sly tag as the&#160;&lt;b&gt;data-sly-resource&lt;/b&gt; tag.&#160;&lt;/p&gt;

&lt;p&gt;(This is a follow up on discussion &lt;a href=&quot;https://twitter.com/sagarsane/status/999675314937778176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;A simple way to reproduce this is to have a Sling Model like :&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.sling7685;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.api.SlingHttpServletRequest;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.api.resource.Resource;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.models.annotations.DefaultInjectionStrategy;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.models.annotations.Model;

@Model(adaptables = {SlingHttpServletRequest.class, Resource.class},
        defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ReproduceSling7685 {

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; testVariable;


    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getTestVariable() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; testVariable;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then the HTL script could be something like :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sly data-sly-use.model=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.sling7685.ReproduceSling7685&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sly&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sly data-sly-resource=&lt;span class=&quot;code-quote&quot;&gt;&quot;${model.testVariable @ wcmmode=&lt;span class=&quot;code-quote&quot;&gt;&apos;disabled&apos;&lt;/span&gt;}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/sly&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please let me know if I should add any more details.&#160;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13162266">SLING-7685</key>
            <summary>data-sly-resource throws RecursionTooDeepException when used with dynamic variables that are null / empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="sagarsane">Sagar Sane</reporter>
                        <labels>
                    </labels>
                <created>Sun, 27 May 2018 00:42:21 +0000</created>
                <updated>Fri, 22 Jun 2018 14:12:35 +0000</updated>
                            <resolved>Mon, 18 Jun 2018 15:54:01 +0000</resolved>
                                                    <fixVersion>Scripting HTL Engine 1.0.54-1.4.0</fixVersion>
                    <fixVersion>Scripting HTL Testing Content 1.0.10-1.4.0</fixVersion>
                    <fixVersion>Scripting HTL Testing 1.0.10-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16491953" author="fvisser" created="Sun, 27 May 2018 07:59:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarsane&quot; class=&quot;user-hover&quot; rel=&quot;sagarsane&quot;&gt;sagarsane&lt;/a&gt; can you check the bundle version of your HTL-bundles? To make sure we have the complete picture.&lt;/p&gt;</comment>
                            <comment id="16491954" author="fvisser" created="Sun, 27 May 2018 08:01:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarsane&quot; class=&quot;user-hover&quot; rel=&quot;sagarsane&quot;&gt;sagarsane&lt;/a&gt; can you also put a sample of HTL script into this issue?&lt;/p&gt;</comment>
                            <comment id="16492003" author="sagarsane" created="Sun, 27 May 2018 12:28:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fvisser&quot; class=&quot;user-hover&quot; rel=&quot;fvisser&quot;&gt;fvisser&lt;/a&gt; please find the details below :&#160;&lt;/p&gt;

&lt;p&gt;All HTL Bundle versions &#8211;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;
{
name:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;Adobe Experience Manager HTL Extension&quot;&lt;/span&gt;,
version:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;1.4.32&quot;&lt;/span&gt;,
symbolicName:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;com.adobe.cq.sightly.cq-wcm-sightly-extension&quot;&lt;/span&gt;
},
{
name:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Scripting HTL &lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt;&quot;&lt;/span&gt;,
version:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0.14&quot;&lt;/span&gt;,
symbolicName:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.scripting.sightly.compiler&quot;&lt;/span&gt;
},
{
name:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Scripting HTL Engine&quot;&lt;/span&gt;,
version:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0.42&quot;&lt;/span&gt;,
symbolicName:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.scripting.sightly&quot;&lt;/span&gt;,
},
{
name:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Scripting HTL Java &lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt;&quot;&lt;/span&gt;,
version:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0.14&quot;&lt;/span&gt;,
symbolicName:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.scripting.sightly.compiler.java&quot;&lt;/span&gt;
},
{
name:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Scripting HTL JavaScript Use Provider&quot;&lt;/span&gt;,
version:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0.24&quot;&lt;/span&gt;,
symbolicName:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.scripting.sightly.js.provider&quot;&lt;/span&gt;
},
{
name:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;Apache Sling Scripting HTL Sling Models Use Provider&quot;&lt;/span&gt;,
version:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0.6&quot;&lt;/span&gt;,
symbolicName:&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.scripting.sightly.models.provider&quot;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Also added&#160;test class &amp;amp; HTL script in the description.&lt;/p&gt;</comment>
                            <comment id="16504455" author="radu.cotescu" created="Thu, 7 Jun 2018 09:30:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarsane&quot; class=&quot;user-hover&quot; rel=&quot;sagarsane&quot;&gt;sagarsane&lt;/a&gt;, can you validate this issue on Apache Sling? Your stack trace shows that the caller is &lt;tt&gt;com.adobe.cq.sightly.WCMScriptHelper.includeScript(WCMScriptHelper.java:227)&lt;/tt&gt;, hence I think this might be a bug in AEM.&lt;/p&gt;</comment>
                            <comment id="16515921" author="radu.cotescu" created="Mon, 18 Jun 2018 15:51:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sagarsane&quot; class=&quot;user-hover&quot; rel=&quot;sagarsane&quot;&gt;sagarsane&lt;/a&gt;, I can reproduce the mentioned issue in Apache Sling, but your problem should be handled in Adobe&apos;s code since in your case it&apos;s AEM&apos;s code performing the resource inclusion.&lt;/p&gt;</comment>
                            <comment id="16515928" author="radu.cotescu" created="Mon, 18 Jun 2018 15:54:01 +0000"  >&lt;p&gt;Fixed in:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/ddfc954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit ddfc954&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/commit/18fe234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 18fe234&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/commit/6d4a265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 6d4a265&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16518376" author="sagarsane" created="Wed, 20 Jun 2018 17:26:26 +0000"  >&lt;p&gt;Sorry for the late reply&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;. Thank you for the update.. I agree that this should be handled in Adobe&apos;s code too!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3u7e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7677] FeatureJSONWriter uses isOptional instead of isRequired</title>
                <link>https://issues.apache.org/jira/browse/SLING-7677</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;FeatureJSONWriter uses isOptional instead of isRequired.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/blob/master/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java#L221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/blob/master/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java#L221&lt;/a&gt;&#160;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13161495">SLING-7677</key>
            <summary>FeatureJSONWriter uses isOptional instead of isRequired</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="andrei.tuicu">Andrei Tuicu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 May 2018 16:24:58 +0000</created>
                <updated>Thu, 13 Feb 2020 09:07:12 +0000</updated>
                            <resolved>Thu, 24 May 2018 08:31:39 +0000</resolved>
                                    <version>Feature Model IO 0.1.0</version>
                                    <fixVersion>Feature Model IO 0.1.2</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16487587" author="githubbot" created="Wed, 23 May 2018 16:29:27 +0000"  >&lt;p&gt;andreituicu commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7677&quot; title=&quot;FeatureJSONWriter uses isOptional instead of isRequired&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7677&quot;&gt;&lt;del&gt;SLING-7677&lt;/del&gt;&lt;/a&gt; - FeatureJSONWriter uses isOptional instead of isRequired&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1#issuecomment-391412489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1#issuecomment-391412489&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rombert @bosschaert : Created JIRA issue, added tests, updated commit and PR description. Thank you!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16487588" author="githubbot" created="Wed, 23 May 2018 16:29:47 +0000"  >&lt;p&gt;andreituicu commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7677&quot; title=&quot;FeatureJSONWriter uses isOptional instead of isRequired&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7677&quot;&gt;&lt;del&gt;SLING-7677&lt;/del&gt;&lt;/a&gt; - FeatureJSONWriter uses isOptional instead of isRequired&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1#issuecomment-391412489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1#issuecomment-391412489&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rombert @bosschaert : Created JIRA issue, added tests, updated commit and PR title. Thank you!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16487601" author="andrei.tuicu" created="Wed, 23 May 2018 16:36:09 +0000"  >&lt;p&gt;Submitted PR: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1&lt;/a&gt;&#160;.&#160;&lt;/p&gt;</comment>
                            <comment id="16488647" author="githubbot" created="Thu, 24 May 2018 08:30:21 +0000"  >&lt;p&gt;bosschaert closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7677&quot; title=&quot;FeatureJSONWriter uses isOptional instead of isRequired&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7677&quot;&gt;&lt;del&gt;SLING-7677&lt;/del&gt;&lt;/a&gt; - FeatureJSONWriter uses isOptional instead of isRequired&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java b/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java&lt;br/&gt;
index cfb6d9b..388bc69 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/feature/io/json/JSONWriterBase.java&lt;br/&gt;
@@ -218,7 +218,7 @@ protected void writeExtensions(final JsonObjectBuilder ob,&lt;br/&gt;
             final List&amp;lt;Extension&amp;gt; extensions,&lt;br/&gt;
             final Configurations allConfigs) {&lt;br/&gt;
         for(final Extension ext : extensions) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final String key = ext.getName() + &quot;:&quot; + ext.getType().name() + &quot;|&quot; + ext.isOptional();&lt;br/&gt;
+            final String key = ext.getName() + &quot;:&quot; + ext.getType().name() + &quot;|&quot; + ext.isRequired();&lt;br/&gt;
             if ( ext.getType() == ExtensionType.JSON ) {&lt;br/&gt;
                 final JsonStructure struct;&lt;br/&gt;
                 try ( final StringReader reader = new StringReader(ext.getJSON()) ) {&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/feature/io/json/ArtifactsExtensions.java b/src/test/java/org/apache/sling/feature/io/json/ArtifactsExtensions.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..bdd34f1
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/feature/io/json/ArtifactsExtensions.java&lt;br/&gt;
@@ -0,0 +1,56 @@&lt;br/&gt;
+package org.apache.sling.feature.io.json;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.feature.ArtifactId;&lt;br/&gt;
+import org.apache.sling.feature.Extension;&lt;br/&gt;
+import org.apache.sling.feature.Extensions;&lt;br/&gt;
+import org.apache.sling.feature.Feature;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertNotNull;&lt;br/&gt;
+&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+public class ArtifactsExtensions 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {++    public static void testReadArtifactsExtensions(Feature feature) {
+        Extensions extensions = feature.getExtensions();
+
+        assertEquals(2, extensions.size());
+
+        Extension extension1 = extensions.getByName(&quot;my-extension1&quot;);
+        assertNotNull(extension1);
+        assertEquals(extension1.getName(), &quot;my-extension1&quot;);
+        assertEquals(extension1.isRequired(), false);
+        assertEquals(1, extension1.getArtifacts().size());
+
+        ArtifactId artifactId1 = extension1.getArtifacts().get(0).getId();
+        assertEquals(artifactId1.getGroupId(), &quot;org.apache.sling&quot;);
+        assertEquals(artifactId1.getArtifactId(), &quot;my-extension1&quot;);
+        assertEquals(artifactId1.getVersion(), &quot;1.2.3&quot;);
+
+        Extension extension2 = extensions.getByName(&quot;my-extension2&quot;);
+        assertNotNull(extension2);
+        assertEquals(extension2.getName(), &quot;my-extension2&quot;);
+        assertEquals(extension2.isRequired(), true);
+        assertEquals(1, extension2.getArtifacts().size());
+
+        ArtifactId artifactId2 = extension2.getArtifacts().get(0).getId();
+        assertEquals(artifactId2.getGroupId(), &quot;org.apache.sling&quot;);
+        assertEquals(artifactId2.getArtifactId(), &quot;my-extension2&quot;);
+        assertEquals(artifactId2.getVersion(), &quot;1.2.3&quot;);
+    }+}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;diff --git a/src/test/java/org/apache/sling/feature/io/json/FeatureJSONReaderTest.java b/src/test/java/org/apache/sling/feature/io/json/FeatureJSONReaderTest.java&lt;br/&gt;
index 6acd293..aa7559c 100644&lt;/p&gt;&lt;/li&gt;
			&lt;li&gt;a/src/test/java/org/apache/sling/feature/io/json/FeatureJSONReaderTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/feature/io/json/FeatureJSONReaderTest.java&lt;br/&gt;
@@ -213,6 +213,11 @@&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+    @Test public void testReadArtifactsExtensions() throws Exception &lt;/p&gt;
{
+        final Feature feature = U.readFeature(&quot;artifacts-extension&quot;, SubstituteVariables.NONE);
+        ArtifactsExtensions.testReadArtifactsExtensions(feature);
+    }
&lt;p&gt;+&lt;br/&gt;
     private void setPrivateField(Object obj, String name, Object value) throws Exception &lt;/p&gt;
{
         Field field = obj.getClass().getDeclaredField(name);
         field.setAccessible(true);
diff --git a/src/test/java/org/apache/sling/feature/io/json/FeatureJSONWriterTest.java b/src/test/java/org/apache/sling/feature/io/json/FeatureJSONWriterTest.java
index 81db5e6..79609f2 100644
--- a/src/test/java/org/apache/sling/feature/io/json/FeatureJSONWriterTest.java
+++ b/src/test/java/org/apache/sling/feature/io/json/FeatureJSONWriterTest.java
@@ -47,4 +47,17 @@
                 U.findCapability(rf.getCapabilities(), &quot;osgi.service&quot;).getAttributes().get(&quot;objectClass&quot;));
     }

&lt;p&gt;+    @Test public void testExtensionsWriteRead() throws Exception {&lt;br/&gt;
+        final Feature f = U.readFeature(&quot;artifacts-extension&quot;);&lt;br/&gt;
+        final Feature rf;&lt;br/&gt;
+        try ( final StringWriter writer = new StringWriter() ) {&lt;br/&gt;
+            FeatureJSONWriter.write(writer, f);&lt;br/&gt;
+            try ( final StringReader reader = new StringReader(writer.toString()) ) &lt;/p&gt;
{
+                rf = FeatureJSONReader.read(reader, null, SubstituteVariables.RESOLVE);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+&lt;br/&gt;
+        ArtifactsExtensions.testReadArtifactsExtensions(rf);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/src/test/resources/features/artifacts-extension.json b/src/test/resources/features/artifacts-extension.json&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..3bcd47a&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/src/test/resources/features/artifacts-extension.json&lt;br/&gt;
@@ -0,0 +1,9 @@&lt;br/&gt;
+&lt;/p&gt;
{
+  &quot;id&quot;: &quot;test/artifacts-extension/1.0.0&quot;,
+  &quot;my-extension1:ARTIFACTS|false&quot;:[
+    &quot;org.apache.sling/my-extension1/1.2.3&quot;
+  ],
+  &quot;my-extension2:ARTIFACTS|true&quot;:[
+    &quot;org.apache.sling/my-extension2/1.2.3&quot;
+  ]
+}
&lt;p&gt;\ No newline at end of file&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16488648" author="githubbot" created="Thu, 24 May 2018 08:30:26 +0000"  >&lt;p&gt;bosschaert commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7677&quot; title=&quot;FeatureJSONWriter uses isOptional instead of isRequired&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7677&quot;&gt;&lt;del&gt;SLING-7677&lt;/del&gt;&lt;/a&gt; - FeatureJSONWriter uses isOptional instead of isRequired&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1#issuecomment-391633367&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-io/pull/1#issuecomment-391633367&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for your contribution, JIRA and tests @andreituicu ! I&apos;ve applied your changes.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16488650" author="bosschaert" created="Thu, 24 May 2018 08:31:39 +0000"  >&lt;p&gt;Thanks for your fix and unit test &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrei.tuicu&quot; class=&quot;user-hover&quot; rel=&quot;andrei.tuicu&quot;&gt;andrei.tuicu&lt;/a&gt;! I&apos;ve merged your branch to main.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3u2nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7673] slingwriter configuration not printing when transformers are empty</title>
                <link>https://issues.apache.org/jira/browse/SLING-7673</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When no transformer is specified the sling rewriter print configuartion response fails to complete normally. This prevents other configurations from displaying. So you end up with something like&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Configuration no-transformer-test

Name&#160;:&#160;no-transformer-test
Content&#160;Types&#160;:&#160;[text/html]
Order&#160;:&#160;1
Active&#160;:&#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Valid&#160;:&#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;&#160;Error&#160;Response&#160;:&#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Pipeline&#160;:&#160;
&#160;&#160;&#160;&#160;Generator&#160;:&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;htmlparser&#160;:&#160;{includeTags=[Ljava.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;@53a5f224}
&#160;&#160;&#160;&#160;Transformers&#160;:&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;vs expected&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Configuration no-transformer-test

Name&#160;:&#160;no-transformer-test
Content&#160;Types&#160;:&#160;[text/html]
Order&#160;:&#160;1
Active&#160;:&#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Valid&#160;:&#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;&#160;Error&#160;Response&#160;:&#160;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Pipeline&#160;:&#160;
&#160;&#160;&#160;&#160;Generator&#160;:&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;htmlparser&#160;:&#160;{includeTags=[Ljava.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;@53a5f224}
&#160;&#160;&#160;&#160;Transformers&#160;:
    Serializer&#160;:&#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;htmlwriter
Resource&#160;path:&#160;/apps/sample/config/rewriter/no-transformer-test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Looks like it fails here when writing out configurations:&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-rewriter/blob/a40b7ffe18af122e1eeb09c1b32735d34a3d167d/src/main/java/org/apache/sling/rewriter/impl/ProcessorConfigurationImpl.java#L245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-rewriter/blob/a40b7ffe18af122e1eeb09c1b32735d34a3d167d/src/main/java/org/apache/sling/rewriter/impl/ProcessorConfigurationImpl.java#L245&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;More notes from the &lt;a href=&quot;https://forums.adobe.com/message/10387734&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AEM side on their forum&lt;/a&gt; if needed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>Running this as part of AEM 6.3 instance&lt;br/&gt;
Symbolic Name:	org.apache.sling.rewriter&lt;br/&gt;
Version:	1.2.1.R1777332</environment>
        <key id="13159938">SLING-7673</key>
            <summary>slingwriter configuration not printing when transformers are empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="lukegrover">Luke Grover</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 May 2018 06:29:47 +0000</created>
                <updated>Tue, 19 Jan 2021 20:18:39 +0000</updated>
                            <resolved>Thu, 17 May 2018 10:32:41 +0000</resolved>
                                                    <fixVersion>Rewriter 1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16478634" author="rombert" created="Thu, 17 May 2018 07:00:48 +0000"  >&lt;p&gt;Thanks for your report &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lukegrover&quot; class=&quot;user-hover&quot; rel=&quot;lukegrover&quot;&gt;lukegrover&lt;/a&gt; . Your report points to the web console plug-in, but my reading of the AEM forum is that the problem happens when handling user request. Can you clarify what the problem is and what steps we can take to reproduce it in Sling? Thanks!&lt;/p&gt;</comment>
                            <comment id="16478635" author="lukegrover" created="Thu, 17 May 2018 07:02:25 +0000"  >&lt;p&gt;Looks like a null check could resolve:&lt;/p&gt;

&lt;p&gt;PR Opened:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-rewriter/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-rewriter/pull/3&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16478644" author="lukegrover" created="Thu, 17 May 2018 07:16:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, I updated my description... sorry, the request didn&apos;t make sense after I re-read it. The issue described on the Adobe Forum was for handling the user request... however, in the solution there are four takeaways. Item #4 is the issue being addressed by this ticket. &lt;a href=&quot;http://localhost:4502/system/console/status-slingrewriter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/system/console/status-slingrewriter&lt;/a&gt;&#160;fails to return all of the configurations as expected.&lt;/p&gt;</comment>
                            <comment id="16478869" author="rombert" created="Thu, 17 May 2018 10:32:41 +0000"  >&lt;p&gt;Fix makes sense - nowhere do we guarantee that the &lt;tt&gt;transformerConfigurations&lt;/tt&gt; array is not null. Applied in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-rewriter/commit/ea03bf9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-rewriter commit ea03bf9&lt;/a&gt;, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lukegrover&quot; class=&quot;user-hover&quot; rel=&quot;lukegrover&quot;&gt;lukegrover&lt;/a&gt; for your contribution!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ttgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7672] The feature model converter should not overwrite exising newer file.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7672</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The feature model converter overwrites a target file that it converts to even if its newer than the source of conversion and already exist. It should not do this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13159734">SLING-7672</key>
            <summary>The feature model converter should not overwrite exising newer file.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2018 13:26:46 +0000</created>
                <updated>Thu, 13 Feb 2020 09:07:33 +0000</updated>
                            <resolved>Wed, 16 May 2018 14:19:16 +0000</resolved>
                                    <version>Feature Model Converter 0.1.0</version>
                                    <fixVersion>Feature Model Converter 0.1.2</fixVersion>
                                    <component>Feature Model</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16477493" author="bosschaert" created="Wed, 16 May 2018 14:19:16 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-feature-modelconverter.git;a=commit;h=b22096a017864a98256db516dbd68bf1d215ab8f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-feature-modelconverter.git;a=commit;h=b22096a017864a98256db516dbd68bf1d215ab8f&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ts7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7669] StartupManager overwrites the frameworkstartlevel property and there is no way to retrieve the intended target start level</title>
                <link>https://issues.apache.org/jira/browse/SLING-7669</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In incremental mode, the &lt;tt&gt;StartupManager&lt;/tt&gt; keeps the target startlevel in a private field, but overwrites &quot;org.osgi.framework.startlevel.beginning&quot; (for a reason), but leaves no other way to retrieve the &quot;target start level&quot; of the application.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13159427">SLING-7669</key>
            <summary>StartupManager overwrites the frameworkstartlevel property and there is no way to retrieve the intended target start level</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 May 2018 14:17:10 +0000</created>
                <updated>Thu, 19 Jul 2018 21:33:47 +0000</updated>
                            <resolved>Thu, 7 Jun 2018 06:21:19 +0000</resolved>
                                    <version>Launchpad Base 2.6.26</version>
                                    <fixVersion>Launchpad Base 2.6.28</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tqbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7662] Cannot use slingstart-maven-plugin for starting a server only with referencing a launchpad by dependency due to the DependencyLifecycleParticipant</title>
                <link>https://issues.apache.org/jira/browse/SLING-7662</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Whenever the slingstart-maven-plugin is only used to start a server which is referenced via the parameter &lt;tt&gt;launchpadDependency&lt;/tt&gt; the following error is being emitted from Maven.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
[ERROR] No model files found in /Users/konradwindszus/workspaces/sling/sling-org-apache-sling-servlets-annotations/src/test/provisioning, and no model inlined in POM. -&amp;gt; [Help 1]
org.apache.maven.MavenExecutionException: No model files found in /Users/konradwindszus/workspaces/sling/sling-org-apache-sling-servlets-annotations/src/test/provisioning, and no model inlined in POM.
    at org.apache.sling.maven.slingstart.ModelPreprocessor.readLocalModel (ModelPreprocessor.java:552)
    at org.apache.sling.maven.slingstart.ModelPreprocessor.addDependencies (ModelPreprocessor.java:131)
    at org.apache.sling.maven.slingstart.ModelPreprocessor.addDependencies (ModelPreprocessor.java:89)
    at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.afterProjectsRead (DependencyLifecycleParticipant.java:100)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:267)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:498)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http:&lt;span class=&quot;code-comment&quot;&gt;//cwiki.apache.org/confluence/display/MAVEN/MavenExecutionException&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The pom.xml looks like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
&amp;lt;build&amp;gt;
&amp;lt;plugins&amp;gt;
&amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;slingstart-maven-plugin&amp;lt;/artifactId&amp;gt;
                &amp;lt;extensions&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/extensions&amp;gt;
                &amp;lt;executions&amp;gt;
                    &amp;lt;execution&amp;gt;
                        &amp;lt;id&amp;gt;start-container-before-IT&amp;lt;/id&amp;gt;
                        &amp;lt;goals&amp;gt;
                            &amp;lt;goal&amp;gt;start&amp;lt;/goal&amp;gt;
                        &amp;lt;/goals&amp;gt;
                        &amp;lt;configuration&amp;gt;
                            &amp;lt;launchpadDependency&amp;gt;
                                &amp;lt;artifactId&amp;gt;org.apache.sling.launchpad&amp;lt;/artifactId&amp;gt;
                                &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;
                                &amp;lt;version&amp;gt;9&amp;lt;/version&amp;gt;
                            &amp;lt;/launchpadDependency&amp;gt;
                        &amp;lt;/configuration&amp;gt;
                    &amp;lt;/execution&amp;gt;
                    &amp;lt;execution&amp;gt;
                        &amp;lt;id&amp;gt;stop-container-after-IT&amp;lt;/id&amp;gt;
                        &amp;lt;goals&amp;gt;
                            &amp;lt;goal&amp;gt;stop&amp;lt;/goal&amp;gt;
                        &amp;lt;/goals&amp;gt;
                        &amp;lt;configuration&amp;gt;
                            &amp;lt;shouldBlockUntilKeyIsPressed&amp;gt;${keepITServerRunning}&amp;lt;/shouldBlockUntilKeyIsPressed&amp;gt;
                        &amp;lt;/configuration&amp;gt;
                    &amp;lt;/execution&amp;gt;
                &amp;lt;/executions&amp;gt;
                &amp;lt;configuration&amp;gt;
                    &amp;lt;servers&amp;gt;
                        &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; configuration applies to both &lt;span class=&quot;code-quote&quot;&gt;&apos;start&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;stop&apos;&lt;/span&gt; --&amp;gt;
                        &amp;lt;server&amp;gt;
                            &amp;lt;id&amp;gt;singleinstance&amp;lt;/id&amp;gt;
                            &amp;lt;port&amp;gt;${http.port}&amp;lt;/port&amp;gt;
                            &amp;lt;vmOpts&amp;gt;${sling.vm.options}&amp;lt;/vmOpts&amp;gt;
                            &amp;lt;stdOutFile&amp;gt;sling/logs/stdout.log&amp;lt;/stdOutFile&amp;gt;
                        &amp;lt;/server&amp;gt;
                    &amp;lt;/servers&amp;gt;
                    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; configuration only applies to &lt;span class=&quot;code-quote&quot;&gt;&apos;prepare-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;&apos;&lt;/span&gt; --&amp;gt;
                    &amp;lt;!-- &amp;lt;disableExtendingMavenClasspath&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/disableExtendingMavenClasspath&amp;gt;  --&amp;gt;
                &amp;lt;/configuration&amp;gt;
            &amp;lt;/plugin&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Actually the DependencyLifecycleParticipant is only relevant for the goals &lt;tt&gt;prepare-package&lt;/tt&gt; and &lt;tt&gt;package&lt;/tt&gt;. When the slingstart-maven-plugin is exclusively used to run some tests on a freshly provisioned server leveraging an already existing launchpad/starter the DependencyLifecycleParticipant should not be triggered at all!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13158727">SLING-7662</key>
            <summary>Cannot use slingstart-maven-plugin for starting a server only with referencing a launchpad by dependency due to the DependencyLifecycleParticipant</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bosschaert">David Bosschaert</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 May 2018 13:38:18 +0000</created>
                <updated>Tue, 29 May 2018 18:00:04 +0000</updated>
                            <resolved>Wed, 23 May 2018 08:27:35 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.7.16</version>
                                    <fixVersion>Slingstart Maven Plugin 1.8.2</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16471979" author="kwin" created="Fri, 11 May 2018 13:56:00 +0000"  >&lt;p&gt;Apart from that the whole testing model logic added with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6068&quot; title=&quot;slingstart-maven-plugin: Allow to start a quickstart JAR based on a provisioning model even for non &amp;quot;slingstart&amp;quot; packagings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6068&quot;&gt;&lt;del&gt;SLING-6068&lt;/del&gt;&lt;/a&gt; has been broken by &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/commit/55d84e85f29567b847fd96c5e10690350c65a2ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/commit/55d84e85f29567b847fd96c5e10690350c65a2ec&lt;/a&gt; (in the context of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7535&quot; title=&quot;Make slingstart-maven-plugin understand sling feature model files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7535&quot;&gt;&lt;del&gt;SLING-7535&lt;/del&gt;&lt;/a&gt;). The reason is that for testing only provisioning models (like used in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-validation-impl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-validation-impl&lt;/a&gt;) there is an exception being thrown before that (namely in &lt;a href=&quot;https://github.com/apache/sling-slingstart-maven-plugin/blob/3d92853ba3cb56536ca6b1666308ad6292424146/src/main/java/org/apache/sling/maven/slingstart/ModelPreprocessor.java#L141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-slingstart-maven-plugin/blob/3d92853ba3cb56536ca6b1666308ad6292424146/src/main/java/org/apache/sling/maven/slingstart/ModelPreprocessor.java#L141&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt; Can you have a look?&lt;/p&gt;</comment>
                            <comment id="16482369" author="bosschaert" created="Mon, 21 May 2018 10:17:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I made some changes that can be seen here on my &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7662&quot; title=&quot;Cannot use slingstart-maven-plugin for starting a server only with referencing a launchpad by dependency due to the DependencyLifecycleParticipant&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7662&quot;&gt;&lt;del&gt;SLING-7662&lt;/del&gt;&lt;/a&gt; branch here: &lt;a href=&quot;https://github.com/bosschaert/sling-slingstart-maven-plugin/tree/SLING-7662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bosschaert/sling-slingstart-maven-plugin/tree/SLING-7662&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you please check if these address the issue for you?&lt;/p&gt;</comment>
                            <comment id="16486893" author="bosschaert" created="Wed, 23 May 2018 08:27:35 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-slingstart-maven-plugin.git;a=commitdiff;h=611d0014015cbd0f4ee252ef86b0be00621719e7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=sling-slingstart-maven-plugin.git;a=commitdiff;h=611d0014015cbd0f4ee252ef86b0be00621719e7&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I wasn&apos;t able to test this in exactly your context, please reopen if you are still seeing this problem.&lt;/p&gt;</comment>
                            <comment id="16487054" author="kwin" created="Wed, 23 May 2018 10:31:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt; Thanks for the fix, works for me now. We still somehow have to clean up the inline pom model handling (because right now for that to become effective an empty folder at either &lt;tt&gt;src/main/provisioning&lt;/tt&gt; or &lt;tt&gt;src/test/provisioning&lt;/tt&gt; must exist which seems a bit weird and is right now completely undocumented).&lt;/p&gt;</comment>
                            <comment id="16487093" author="bosschaert" created="Wed, 23 May 2018 11:13:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; thanks for confirming. Would it make sense to create a different issue for the cleanup task you&apos;re mentioning?&lt;/p&gt;</comment>
                            <comment id="16488881" author="kwin" created="Thu, 24 May 2018 12:18:08 +0000"  >&lt;p&gt;Yes, makes sense. I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7679&lt;/a&gt; for that.&lt;/p&gt;</comment>
                            <comment id="16493737" author="kwin" created="Tue, 29 May 2018 15:47:13 +0000"  >&lt;p&gt;This is still not fully working: &lt;a href=&quot;https://builds.apache.org/job/sling-org-apache-sling-servlets-annotations-it-1.8/1/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-org-apache-sling-servlets-annotations-it-1.8/1/console&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] No model files found in /home/jenkins/jenkins-slave/workspace/sling-org-apache-sling-servlets-annotations-it-1.8/src/main/provisioning, and no model inlined in POM. -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16493784" author="bosschaert" created="Tue, 29 May 2018 16:18:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; would it be possible to provide a unit test that exposes the problem?&lt;/p&gt;</comment>
                            <comment id="16493967" author="kwin" created="Tue, 29 May 2018 18:00:04 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;, this was obviously a temporary issue. After going back to the release parent pom (and still referencing the latest 1.8.1-SNAPSHOT of the slingstart-maven-plugin it works again (&lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-org-apache-sling-servlets-annotations-it-1.8/4/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-org-apache-sling-servlets-annotations-it-1.8/4/&lt;/a&gt;). Also it always worked for my local builds. So I assume this was a temporary glitch with one Jenkins node.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13161754">SLING-7679</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tm0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7658] XSSApi.encodeForHtml doesn&apos;t leave unicode character escapes untouched</title>
                <link>https://issues.apache.org/jira/browse/SLING-7658</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Whenever &lt;tt&gt;encodeForHtml&lt;/tt&gt; is called with a string containing a unicode character escapes (&lt;a href=&quot;https://www.w3.org/International/questions/qa-escapes#answer&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/International/questions/qa-escapes#answer&lt;/a&gt;), the &lt;tt&gt;&amp;amp;&lt;/tt&gt; gets escaped again. I.e. &lt;tt&gt;&amp;#9989;&lt;/tt&gt; becomes &lt;tt&gt;&amp;amp;#9989;&lt;/tt&gt;.&lt;br/&gt;
Compare with the discussion at &lt;a href=&quot;https://www.mail-archive.com/dev@sling.apache.org/msg76863.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@sling.apache.org/msg76863.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Attached is a patch with a failing test.&lt;/p&gt;

&lt;p&gt;Another use case for using unicode character escapes is the soft hyphen (&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens#Suggesting_line_break_opportunities&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens#Suggesting_line_break_opportunities&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13158116">SLING-7658</key>
            <summary>XSSApi.encodeForHtml doesn&apos;t leave unicode character escapes untouched</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 May 2018 07:23:19 +0000</created>
                <updated>Sat, 2 Jun 2018 10:48:13 +0000</updated>
                            <resolved>Sat, 2 Jun 2018 10:48:13 +0000</resolved>
                                    <version>XSS Protection API 2.1.0</version>
                                                    <component>XSS Protection API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16468510" author="kwin" created="Wed, 9 May 2018 07:29:15 +0000"  >&lt;p&gt;The reason for this issue is actually the underlying &lt;tt&gt;org.owasp.encoder.Encode&lt;/tt&gt; class which will always replace &lt;tt&gt;&amp;amp;&lt;/tt&gt; by &lt;tt&gt;&amp;amp;&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16494700" author="igurjar" created="Wed, 30 May 2018 05:21:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&#160;I think&#160; XSSAPI.encodeForHTML() API is working as designed as it protects from introducing html entities. the unicode escaped characters are like html entities and not simple text.&lt;/p&gt;

&lt;p&gt;We expect browser to not interpret(render) the encoded string as html entity but as plain text. so when we encode &quot;&amp;amp;#9989;&quot; , we expect this to be rendered as &quot;&amp;amp;#9989;&quot;, not render differently and&#160;XSSAPI.encodeForHTML() API is doing this very well.&lt;/p&gt;

&lt;p&gt;I have opened issue - &lt;a href=&quot;https://github.com/OWASP/owasp-java-encoder/issues/18&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/OWASP/owasp-java-encoder/issues/18&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;at OWASP java encoder project and this is their view:&lt;/p&gt;

&lt;p&gt;&quot;The encoder is meant, on purpose, to encode all dangerous characters like you are describing. This is not the right tool for you. If you have HTML entities that you wish to preserve then your input is HTML. Consider using the OWASP HTML Sanitizer instead.&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Can&#160;XSSFilter&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; help here?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;:&#160;&lt;a href=&quot;https://github.com/OWASP/java-html-sanitizer/blob/master/src/main/java/org/owasp/html/HtmlSanitizer.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/OWASP/java-html-sanitizer/blob/master/src/main/java/org/owasp/html/HtmlSanitizer.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;:&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/blob/master/src/main/java/org/apache/sling/xss/XSSFilter.java#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-xss/blob/master/src/main/java/org/apache/sling/xss/XSSFilter.java#L51&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16498315" author="kwin" created="Fri, 1 Jun 2018 17:40:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=igurjar&quot; class=&quot;user-hover&quot; rel=&quot;igurjar&quot;&gt;igurjar&lt;/a&gt; Thanks for following up on this. Actually I have an issue with the HTL engine which is internally using &lt;tt&gt;XSSApi.encodeForHtml&lt;/tt&gt; for the Display Context &lt;tt&gt;text&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/f46ff4d97b96d21da521651fe9f789f89253452f/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/XSSRuntimeExtension.java#L99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/f46ff4d97b96d21da521651fe9f789f89253452f/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/XSSRuntimeExtension.java#L99&lt;/a&gt;). But maybe just using &lt;tt&gt;html&lt;/tt&gt; is enough here, as that internally relies on the mentioned XSSFilter. It seems though that by default for all content within almost every html tag the context &lt;tt&gt;text&lt;/tt&gt; is choosen by default, so I need to overwrite that, to achieve my goal. I will let you know whether that works.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="16498990" author="kwin" created="Sat, 2 Jun 2018 10:35:13 +0000"  >&lt;p&gt;Actually even &lt;tt&gt;XSSFilter.filter(...)&lt;/tt&gt; doesn&apos;t leave unicode escape sequences untouched but rather unescapes those. Please see the attached failing test  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12926226/12926226_SLING-7658-v02.patch&quot; title=&quot;SLING-7658-v02.patch attached to SLING-7658&quot;&gt;SLING-7658-v02.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. This is an issue for HTML which is not using UTF-8! As this issue is no longer related to this original issue I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7703&quot; title=&quot;XSSFilter.filter(XSSFilter.DEFAULT_CONTEXT, ...) unescapes given unicode escape sequences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7703&quot;&gt;SLING-7703&lt;/a&gt; for the new issue and close this one as Won&apos;t fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13163601">SLING-7703</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12922602" name="SLING-7658-v01.patch" size="1105" author="kwin" created="Wed, 9 May 2018 07:24:08 +0000"/>
                            <attachment id="12926226" name="SLING-7658-v02.patch" size="764" author="kwin" created="Sat, 2 Jun 2018 10:32:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tiaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7655] TagFileTest fails semi-randomly</title>
                <link>https://issues.apache.org/jira/browse/SLING-7655</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;TagFileTest&lt;/tt&gt; integration test sometimes fails on Jenkins, as shown below.&lt;/p&gt;

&lt;p&gt;It is currently the first test that executes, so that&apos;s probably because its test taglib is not yet registered at testing time.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Incorrect output from rendering script expected:&amp;lt;[TEST OUTPUT]&amp;gt; 
but was:&amp;lt;[&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;?&amp;gt;
...
&amp;lt;h1&amp;gt;Resource dumped by HtmlRendererServlet&amp;lt;/h1&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13157568">SLING-7655</key>
            <summary>TagFileTest fails semi-randomly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Mon, 7 May 2018 11:41:14 +0000</created>
                <updated>Mon, 7 May 2018 11:44:35 +0000</updated>
                            <resolved>Mon, 7 May 2018 11:44:35 +0000</resolved>
                                                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16465813" author="bdelacretaz" created="Mon, 7 May 2018 11:44:35 +0000"  >&lt;p&gt;Should be fixed by commit &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/991023efbd57e9f2e2e24b68c0ac3ebb6e0742f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/991023efbd57e9f2e2e24b68c0ac3ebb6e0742f2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tewv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7651] POST to / creates nodes instead of setting properties</title>
                <link>https://issues.apache.org/jira/browse/SLING-7651</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The changes that I had to make to &lt;tt&gt;PostToRootTest&lt;/tt&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; indicate that the POST behavior has changed since sling10, at least on /.&lt;/p&gt;

&lt;p&gt;With sling10 this request sets a property {{x=y }}on the root node, while with the current trunk it creates a node under the root.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 curl -u admin:admin -Fx=y http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It looks like the culprit is &lt;tt&gt;resource&lt;/tt&gt; being null in &lt;tt&gt;AbstractCreateOperation.processCreate&lt;/tt&gt;, in this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = response.getPath();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Resource resource = resolver.getResource(path);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ll investigate further - and the changes to &lt;tt&gt;PostToRootTest&lt;/tt&gt; should be reverted once this is fixed.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/3750eb05dc038544ba155d91de8991114077ac0c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/3750eb05dc038544ba155d91de8991114077ac0c&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13157093">SLING-7651</key>
            <summary>POST to / creates nodes instead of setting properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 May 2018 09:26:08 +0000</created>
                <updated>Sat, 5 May 2018 20:03:16 +0000</updated>
                            <resolved>Fri, 4 May 2018 14:02:54 +0000</resolved>
                                    <version>Servlets Post 2.3.24</version>
                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16463673" author="bdelacretaz" created="Fri, 4 May 2018 10:29:08 +0000"  >&lt;p&gt;It looks like the root cause is that in trunk the root resource is resolved to a &lt;tt&gt;SyntheticResource&lt;/tt&gt;, while in sling10 that&apos;s a &lt;tt&gt;JcrNodeResource&lt;/tt&gt;. The POST servlet code, when getting a synthetic resource, correctly decides that it needs to create a concrete resource, hence this changed behavior.&lt;/p&gt;

&lt;p&gt;I thought this might have to do with recent changes to default access control on the root, but adding the below privileges on / doesn&apos;t help:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;everyone&quot;&lt;/span&gt;:{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;principal&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;everyone&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;granted&quot;&lt;/span&gt;:[
      &lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:all&quot;&lt;/span&gt;
    ],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;order&quot;&lt;/span&gt;:6
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll ask for hints on our dev list before digging too deep.&lt;/p&gt;</comment>
                            <comment id="16463680" author="bdelacretaz" created="Fri, 4 May 2018 10:35:00 +0000"  >&lt;p&gt;To be more precise the resource type for a POST to / is a &lt;tt&gt;RedirectResource&lt;/tt&gt; which inherits from &lt;tt&gt;SyntheticResource&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Interestingly, with trunk a GET on / with admin credentials gets at &lt;tt&gt;JcrNodeResource&lt;/tt&gt; which is processed by the &lt;tt&gt;RedirectServlet&lt;/tt&gt;, it&apos;s only POST that leads to a &lt;tt&gt;SyntheticResource&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;With sling10 both GET and POST requests get a &lt;tt&gt;JcrNodeResource&lt;/tt&gt; &lt;/p&gt;</comment>
                            <comment id="16463685" author="bdelacretaz" created="Fri, 4 May 2018 10:40:46 +0000"  >&lt;p&gt;Note also that a POST to &lt;tt&gt;/.json&lt;/tt&gt; or any other extension resolves to a &lt;tt&gt;JcrNodeResource&lt;/tt&gt; on trunk, it&apos;s only without an extension that the changed behavior is seen.&lt;/p&gt;</comment>
                            <comment id="16463908" author="bdelacretaz" created="Fri, 4 May 2018 14:02:54 +0000"  >&lt;p&gt;Turns out this was caused by an &lt;tt&gt;/etc/map&lt;/tt&gt; mapping for localhost &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from the starter-content module.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klcodanr&quot; class=&quot;user-hover&quot; rel=&quot;klcodanr&quot;&gt;klcodanr&lt;/a&gt; could you review my changes from this commit?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter-content/commit/268299d1a18184c568fe99db63a93622f6929a66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter-content/commit/268299d1a18184c568fe99db63a93622f6929a66&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have removed the mapping on localhost...it feels weird to have such a specific mapping in our default config, maybe that was an oversight or leftover from some tests?&lt;/p&gt;

&lt;p&gt;Anyway, with that mapping removed all is good and I could revert the unwanted &lt;tt&gt;PostToRootTest&lt;/tt&gt;&#160;changes of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7636&quot; title=&quot;Some login ITs fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7636&quot;&gt;&lt;del&gt;SLING-7636&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16464884" author="klcodanr" created="Sat, 5 May 2018 20:03:16 +0000"  >&lt;p&gt;Thanks and sorry for causing the digging &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;! I think the original thought was to have the default URL be the Sling Starter page, but I&apos;m not sure why the mapping was required considering there was already a redirect. Changes look good +1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13156574">SLING-7636</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tcbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7649] Sling Pages Do Not Display Full Height in Firefox</title>
                <link>https://issues.apache.org/jira/browse/SLING-7649</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Login, Loading and other screens do not display at full height when using Firefox due to the Style sheet not setting the height to 100%.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156953">SLING-7649</key>
            <summary>Sling Pages Do Not Display Full Height in Firefox</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 May 2018 19:49:21 +0000</created>
                <updated>Mon, 15 Oct 2018 15:37:36 +0000</updated>
                            <resolved>Thu, 3 May 2018 19:56:39 +0000</resolved>
                                    <version>Launchpad Content 2.0.12</version>
                    <version>Starter Startup 1.0.4</version>
                                    <fixVersion>Starter Content 1.0.0</fixVersion>
                    <fixVersion>Starter Startup 1.0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16462986" author="klcodanr" created="Thu, 3 May 2018 19:56:39 +0000"  >&lt;p&gt;Resolved by updating:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Starter Startup: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter-startup/commit/f389a9d883ddb22a00c7d9d4d4132f156666d77e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter-startup/commit/f389a9d883ddb22a00c7d9d4d4132f156666d77e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Starter Content:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter-content/commit/49da64fe6d91e10465e35c08eea73dc64f06371c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-starter-content/commit/49da64fe6d91e10465e35c08eea73dc64f06371c&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16650372" author="klcodanr" created="Mon, 15 Oct 2018 15:37:36 +0000"  >&lt;p&gt;Closed with the release of &lt;a href=&quot;https://issues.apache.org/jira/projects/SLING/versions/12342990&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Sling Starter Content 1.0.0&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12921824" name="Screen Shot 2018-05-03 at 3.45.30 PM.png" size="143456" author="klcodanr" created="Thu, 3 May 2018 19:47:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tbgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7647] Anonymous access to content stopped working</title>
                <link>https://issues.apache.org/jira/browse/SLING-7647</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7636&quot; title=&quot;Some login ITs fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7636&quot;&gt;&lt;del&gt;SLING-7636&lt;/del&gt;&lt;/a&gt; and especially the &lt;tt&gt;AnonymousAccessTest&lt;/tt&gt; shows that anonymous access stopped working. The following scenario works with the sling10 jar but not with the current trunk:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl -u admin:admin -Ftitle=test http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp/test1234
&lt;/span&gt;curl -u admin:admin http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp/test1234.json
&lt;/span&gt;curl http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp/test1234.tidy.json&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With sling10 the last request gets content, while with the current trunk it gets a 404.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach the logs of that last request on both versions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156867">SLING-7647</key>
            <summary>Anonymous access to content stopped working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Thu, 3 May 2018 13:02:33 +0000</created>
                <updated>Thu, 3 May 2018 16:03:05 +0000</updated>
                            <resolved>Thu, 3 May 2018 14:15:06 +0000</resolved>
                                                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16462398" author="bdelacretaz" created="Thu, 3 May 2018 13:04:31 +0000"  >&lt;p&gt;We should revisit the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7637&quot; title=&quot;PropertyRenderingTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7637&quot;&gt;&lt;del&gt;SLING-7637&lt;/del&gt;&lt;/a&gt; &quot;fixes&quot; once this issue is clarified.&lt;/p&gt;</comment>
                            <comment id="16462411" author="rombert" created="Thu, 3 May 2018 13:08:27 +0000"  >&lt;p&gt;Maybe this is due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6130&quot; title=&quot;Restrict access for principal everyone and move configuration to repoinit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6130&quot;&gt;&lt;del&gt;SLING-6130&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="16462425" author="bdelacretaz" created="Thu, 3 May 2018 13:15:27 +0000"  >&lt;p&gt;The failing (trunk) log has&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.jackrabbit.oak.spi.security.authentication.AbstractLoginModule Login: Credentials &lt;span class=&quot;code-quote&quot;&gt;&apos;javax.jcr.GuestCredentials@6938bd73&apos;&lt;/span&gt; obtained from callback
...
org.apache.sling.jcr.resource.internal.helper.jcr.JcrItemResourceFactory createResource: No JCR Item exists at path &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/test1234&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which seems to indicate that it&apos;s Oak which is rejecting access to the &lt;tt&gt;/tmp/test1234&lt;/tt&gt; node for the &lt;tt&gt;GuestCredentials&lt;/tt&gt; user. &lt;/p&gt;

&lt;p&gt;At the same point, the sling10 log says &lt;tt&gt;Found JCR Node Resource at path &apos;/tmp/test1234&apos;&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16462430" author="bdelacretaz" created="Thu, 3 May 2018 13:20:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe this is due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6130&quot; title=&quot;Restrict access for principal everyone and move configuration to repoinit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6130&quot;&gt;&lt;del&gt;SLING-6130&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Of course...I did vaguely remember that something changed in that area &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Let&apos;s discuss on list, if we want to change the tests to run under /content or change the &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6130&quot; title=&quot;Restrict access for principal everyone and move configuration to repoinit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6130&quot;&gt;&lt;del&gt;SLING-6130&lt;/del&gt;&lt;/a&gt; settings for testing.&lt;/p&gt;</comment>
                            <comment id="16462502" author="bdelacretaz" created="Thu, 3 May 2018 14:15:06 +0000"  >&lt;p&gt;As briefly discussed on list, and based on some simple changes that I did for the affected tests, it seems like running tests under &lt;tt&gt;/content&lt;/tt&gt; is the cleanest way to fix this. Marking this ticket fixed accordingly.&lt;/p&gt;</comment>
                            <comment id="16462660" author="bdelacretaz" created="Thu, 3 May 2018 16:03:05 +0000"  >&lt;p&gt;...and later I found out that &lt;tt&gt;/content&lt;/tt&gt; can be troublesome as there&apos;s a resource resolver mapping on that path by default, meaning that a POST to create a node under &lt;tt&gt;/content&lt;/tt&gt; might return a URL that&apos;s mapped to omit &lt;tt&gt;/content&lt;/tt&gt;. As the tests that we are talking about as mostly old ones that we don&apos;t want to touch more than strictly needed, &lt;/p&gt;

&lt;p&gt;To fix this I&apos;m creating an &lt;tt&gt;/ANON_CAN_READ&lt;/tt&gt; path in the repoinit setup of the launchpad-testing module, that can be used for the few tests that need anonymous access and are not convenient to run under &lt;tt&gt;/content&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13156574">SLING-7636</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13156575">SLING-7637</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13011339">SLING-6130</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12921762" name="sling10-get-request.txt" size="21896" author="bdelacretaz" created="Thu, 3 May 2018 13:10:17 +0000"/>
                            <attachment id="12921763" name="trunk-get-request.txt" size="42755" author="bdelacretaz" created="Thu, 3 May 2018 13:10:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3taz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7644] Maven-Sling-Plugin requires Java 8</title>
                <link>https://issues.apache.org/jira/browse/SLING-7644</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using the maven sling plugin 2.3.4 with Java 7, the following error occurs:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.sling:maven-sling-plugin:2.3.4:generate-adapter-metadata (generate-adapter-metadata) on project org.apache.sling.resourceresolver: Execution generate-adapter-metadata of goal org.apache.sling:maven-sling-plugin:2.3.4:generate-adapter-metadata failed: An API incompatibility was encountered while executing org.apache.sling:maven-sling-plugin:2.3.4:generate-adapter-metadata: java.lang.UnsupportedClassVersionError: javax/json/JsonException : Unsupported major.minor version 52.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -----------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; realm =&#160;&#160;&#160; plugin&amp;gt;org.apache.sling:maven-sling-plugin:2.3.4&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; urls&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = &lt;a href=&quot;file:/Users/cziegeler/.m2/repository/org/apache/sling/maven-sling-plugin/2.3.4/maven-sling-plugin-2.3.4.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/Users/cziegeler/.m2/repository/org/apache/sling/maven-sling-plugin/2.3.4/maven-sling-plugin-2.3.4.jar&lt;/a&gt;&lt;br/&gt;
[&lt;/p&gt;

&lt;p&gt;Reverting to version 2.3.2 fixes the problem&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156785">SLING-7644</key>
            <summary>Maven-Sling-Plugin requires Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 May 2018 05:55:04 +0000</created>
                <updated>Mon, 7 May 2018 08:36:57 +0000</updated>
                            <resolved>Thu, 3 May 2018 06:52:45 +0000</resolved>
                                    <version>Maven Sling Plugin 2.3.4</version>
                                    <fixVersion>Maven Sling Plugin 2.3.6</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16461992" author="sseifert@pro-vision.de" created="Thu, 3 May 2018 06:28:22 +0000"  >&lt;p&gt;ah, the reason is this commit:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-maven-sling-plugin/commit/9579510a3c3efde58319fc25749836c18c4e9644&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-maven-sling-plugin/commit/9579510a3c3efde58319fc25749836c18c4e9644&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;which references&lt;br/&gt;
&lt;a href=&quot;http://repo1.maven.org/maven2/org/apache/geronimo/specs/geronimo-json_1.1_spec/1.0/geronimo-json_1.1_spec-1.0.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repo1.maven.org/maven2/org/apache/geronimo/specs/geronimo-json_1.1_spec/1.0/geronimo-json_1.1_spec-1.0.pom&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://repo1.maven.org/maven2/org/apache/geronimo/genesis/genesis-java8-flava/2.3/genesis-java8-flava-2.3.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repo1.maven.org/maven2/org/apache/geronimo/genesis/genesis-java8-flava/2.3/genesis-java8-flava-2.3.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;which compiles to java 8. strange why this spec requires java 8. we may downgrade to json spec 1.0, i assume the code has no direct dependencies to the API updates.&lt;/p&gt;

&lt;p&gt;on the other hand: what speaks against just declaring the java 8 dependency for the maven-sling-plugin - who wants to run it with java 7? it&apos;s only required in the development environment.&lt;/p&gt;</comment>
                            <comment id="16461997" author="cziegeler" created="Thu, 3 May 2018 06:33:35 +0000"  >&lt;p&gt;As version 2.3.4 is mentioned in our parent pom, it&apos;s impossible to build our java 7 based modules with Java 7. &lt;br/&gt;
So we have two options, either move back to 2.3.2 for our parent pom and declare that the maven sling plugin requires Java 8&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;fix this Java 8 dependency in 2.3.6 and change our parent pom to 2.3.6&lt;/p&gt;

&lt;p&gt;But the way it is atm does not make that much sense.&lt;/p&gt;</comment>
                            <comment id="16462006" author="sseifert@pro-vision.de" created="Thu, 3 May 2018 06:39:20 +0000"  >&lt;p&gt;then i think it&apos;s the best way to switch back to java 7 for now.&lt;/p&gt;</comment>
                            <comment id="16462015" author="sseifert@pro-vision.de" created="Thu, 3 May 2018 06:52:45 +0000"  >&lt;p&gt;fixed: &lt;a href=&quot;https://github.com/apache/sling-maven-sling-plugin/commit/5032ce9f2a62a2f7804c946ab3ef6efd9b222964&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-maven-sling-plugin/commit/5032ce9f2a62a2f7804c946ab3ef6efd9b222964&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13156796">SLING-7646</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tahb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7641] Use Default if Value is Blank on sling:encode Tag</title>
                <link>https://issues.apache.org/jira/browse/SLING-7641</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to the description in the TLD, the blank value is:&lt;/p&gt;

&lt;p&gt;&quot;The default value to be used if the value is either&#160;null or an empty string.&quot;&#160;&lt;/p&gt;

&lt;p&gt;However, the Encode Tag only uses a null check to decide to use the default value. This should instead check if the string is null or empty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156701">SLING-7641</key>
            <summary>Use Default if Value is Blank on sling:encode Tag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 May 2018 21:15:42 +0000</created>
                <updated>Mon, 15 Oct 2018 15:59:17 +0000</updated>
                            <resolved>Wed, 2 May 2018 21:22:37 +0000</resolved>
                                    <version>Scripting JSP Taglib 2.2.6</version>
                                    <fixVersion>Scripting JSP Taglib 2.3.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16461636" author="klcodanr" created="Wed, 2 May 2018 21:22:37 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-jsp-taglib/commit/48cd7272aac009022b0ccc3e7ff0fc9e36d872f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-jsp-taglib/commit/48cd7272aac009022b0ccc3e7ff0fc9e36d872f0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16650411" author="klcodanr" created="Mon, 15 Oct 2018 15:59:17 +0000"  >&lt;p&gt;Closed with the release of &lt;a href=&quot;https://issues.apache.org/jira/projects/SLING/versions/12342671&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Sling JSP Taglib 2.3.0&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t9yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7637] PropertyRenderingTest fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-7637</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;org.apache.sling.launchpad.webapp.integrationtest.PropertyRenderingTest.testMultiValuedTextNoExt fails with &lt;tt&gt;&lt;a href=&quot;http://localhost:41000/PropertyRenderingTest/1525143696194/this_is_a_test_15251/multiText&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:41000/PropertyRenderingTest/1525143696194/this_is_a_test_15251/multiText&lt;/a&gt; expected:&amp;lt;403&amp;gt; but was:&amp;lt;404&amp;gt;&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156575">SLING-7637</key>
            <summary>PropertyRenderingTest fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 2 May 2018 11:46:51 +0000</created>
                <updated>Thu, 3 May 2018 13:38:49 +0000</updated>
                            <resolved>Thu, 3 May 2018 12:08:53 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16462342" author="bdelacretaz" created="Thu, 3 May 2018 12:08:54 +0000"  >&lt;p&gt;I have fixed the test with this commit:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/2001e979f756eba37aa71e6c6db850987e8e33ed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/2001e979f756eba37aa71e6c6db850987e8e33ed&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But I&apos;m not sure what caused it to fail. The root cause is that HttpClient gets a redirect if the URL ends with /multiText without a trailing / and the GET request that follows the redirect doesn&apos;t include credentials (see requests dump below).&lt;/p&gt;

&lt;p&gt;The change might be that Sling previously didn&apos;t send a redirect, or that it didn&apos;t require credentials before. Or maybe that the httpclient version changed and behaves differently.&lt;/p&gt;

&lt;p&gt;Requests/responses:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
##
T 127.0.0.1:57426 -&amp;gt; 127.0.0.1:8080 [AP]
  GET /PropertyRenderingTest/1525348448317/this_is_a_test_15253/multiText HTTP
  /1.1..Authorization: Basic YWRtaW46YWRtaW4=..User-Agent: Jakarta Commons-Htt
  pClient/3.1..Host: localhost:8080....                                       
##
T 127.0.0.1:8080 -&amp;gt; 127.0.0.1:57426 [AP]
  HTTP/1.1 302 Found..Date: Thu, 03 May 2018 11:54:40 GMT..X-Content-Type-Opti
  ons: nosniff..X-Frame-Options: SAMEORIGIN..FILTER_COUNTER_SLING: 1..FILTER_C
  OUNTER_NOPROP: 1..Location: http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/PropertyRenderingTest/1525
&lt;/span&gt;  348448317/this_is_a_test_15253/multiText/..Content-Length: 0....            
##
T 127.0.0.1:57426 -&amp;gt; 127.0.0.1:8080 [AP]
  GET /PropertyRenderingTest/1525348448317/this_is_a_test_15253/multiText/ HTT
  P/1.1..User-Agent: Jakarta Commons-HttpClient/3.1..Host: localhost:8080.... 
##
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The second GET does not include the &lt;tt&gt;Authorization&lt;/tt&gt; header.&lt;/p&gt;</comment>
                            <comment id="16462397" author="bdelacretaz" created="Thu, 3 May 2018 13:03:54 +0000"  >&lt;p&gt;It looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7647&quot; title=&quot;Anonymous access to content stopped working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7647&quot;&gt;&lt;del&gt;SLING-7647&lt;/del&gt;&lt;/a&gt; might have caused this, we should try to undo this change once that one is fixed.&lt;/p&gt;</comment>
                            <comment id="16462454" author="bdelacretaz" created="Thu, 3 May 2018 13:38:49 +0000"  >&lt;p&gt;Thanks to Robert&apos;s hint that &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6130&quot; title=&quot;Restrict access for principal everyone and move configuration to repoinit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6130&quot;&gt;&lt;del&gt;SLING-6130&lt;/del&gt;&lt;/a&gt; is causing this, I have now properly fixed the test by creating the test nodes under &lt;tt&gt;/content&lt;/tt&gt; where anonymous access is allowed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13156867">SLING-7647</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t96n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7636] Some login ITs fail</title>
                <link>https://issues.apache.org/jira/browse/SLING-7636</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Some for the Login ITs fail&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;org.apache.sling.launchpad.webapp.integrationtest.login.AuthRequestLoginTest.testForcedLogin&lt;/li&gt;
	&lt;li&gt;org.apache.sling.launchpad.webapp.integrationtest.login.RedirectOnLoginErrorTest.testGetDefaultLoginPage&lt;/li&gt;
	&lt;li&gt;org.apache.sling.launchpad.webapp.integrationtest.login.AnonymousAccessTest.testAnonymousContent&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The common root cause seems to be not finding resources where expected:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Expected 20x or 30x status, got 404&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:41000/system/sling/login&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:41000/system/sling/login&lt;/a&gt; expected:&amp;lt;200&amp;gt; but was:&amp;lt;404&amp;gt;&lt;/li&gt;
	&lt;li&gt;Expected status 200 for &lt;a href=&quot;http://localhost:41000/AnonymousAccessTest/1525143663600/test_text_1525143663.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:41000/AnonymousAccessTest/1525143663600/test_text_1525143663.txt&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13156574">SLING-7636</key>
            <summary>Some login ITs fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 2 May 2018 11:46:09 +0000</created>
                <updated>Fri, 4 May 2018 11:58:01 +0000</updated>
                            <resolved>Fri, 4 May 2018 09:49:17 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16462395" author="bdelacretaz" created="Thu, 3 May 2018 13:03:04 +0000"  >&lt;p&gt;It looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7647&quot; title=&quot;Anonymous access to content stopped working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7647&quot;&gt;&lt;del&gt;SLING-7647&lt;/del&gt;&lt;/a&gt; might be the root cause of at least some of these failures.&lt;/p&gt;</comment>
                            <comment id="16462674" author="bdelacretaz" created="Thu, 3 May 2018 16:09:14 +0000"  >&lt;p&gt;&lt;tt&gt;AnonymousAccessTest&lt;/tt&gt; is fixed now, &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7647&quot; title=&quot;Anonymous access to content stopped working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7647&quot;&gt;&lt;del&gt;SLING-7647&lt;/del&gt;&lt;/a&gt; has more details. &lt;/p&gt;

&lt;p&gt;On my box the following IT failures are left:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.007 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.servlets.post.PostToRootTest
[ERROR] Tests run: 7, Failures: 5, Errors: 0, Skipped: 0, Time elapsed: 0.474 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.userManager.UserPrivilegesInfoTest
[ERROR] Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.004 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.login.RedirectOnLoginErrorTest
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.003 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.login.AuthRequestLoginTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16462711" author="bdelacretaz" created="Thu, 3 May 2018 16:24:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/3750eb05dc038544ba155d91de8991114077ac0c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/3750eb05dc038544ba155d91de8991114077ac0c&lt;/a&gt; fixes &lt;tt&gt;PostToRootTest&lt;/tt&gt; - the POST behavior has slightly changed though, will discuss on the dev list (update: that&apos;s &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7651&quot; title=&quot;POST to / creates nodes instead of setting properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7651&quot;&gt;&lt;del&gt;SLING-7651&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16463484" author="bdelacretaz" created="Fri, 4 May 2018 07:22:50 +0000"  >&lt;p&gt;Confirmed, besides &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7635&quot; title=&quot;UserPrivilegesInfoTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7635&quot;&gt;&lt;del&gt;SLING-7635&lt;/del&gt;&lt;/a&gt; (&lt;tt&gt;UserPrivilegesInfoTest&lt;/tt&gt;), on Jenkins only &lt;tt&gt;RedirectOnLoginErrorTest&lt;/tt&gt; and &lt;tt&gt;AuthRequestLoginTest&lt;/tt&gt; are still failing.&lt;/p&gt;</comment>
                            <comment id="16463551" author="bdelacretaz" created="Fri, 4 May 2018 08:25:09 +0000"  >&lt;p&gt;Commit 3c533f5 should fix &lt;tt&gt;RedirectOnLoginErrorTest&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16463574" author="bdelacretaz" created="Fri, 4 May 2018 08:49:34 +0000"  >&lt;p&gt;And commit eed4540 should fix &lt;tt&gt;AuthRequestLoginTest&lt;/tt&gt; by also making it less brittle.&lt;/p&gt;

&lt;p&gt;I&apos;ll wait for the Jenkins runs before marking this fixed.&lt;/p&gt;</comment>
                            <comment id="16463636" author="bdelacretaz" created="Fri, 4 May 2018 09:49:17 +0000"  >&lt;p&gt;Confirmed, the 3 launchpad-testing jobs pass without errors from these tests, as well as the &lt;tt&gt;sling-org-apache-sling-launchpad-testing-war-1.8&lt;/tt&gt; job.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13156867">SLING-7647</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13157093">SLING-7651</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t96f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7635] UserPrivilegesInfoTest fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-7635</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following tests consistently fail on Jenkins and locally:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;org.apache.sling.launchpad.webapp.integrationtest.userManager.UserPrivilegesInfoTest.testCanUpdateUserProperties&lt;/li&gt;
	&lt;li&gt;org.apache.sling.launchpad.webapp.integrationtest.userManager.UserPrivilegesInfoTest.testCanUpdateGroupProperties&lt;/li&gt;
	&lt;li&gt;org.apache.sling.launchpad.webapp.integrationtest.userManager.UserPrivilegesInfoTest.testCanRemoveGroup&lt;/li&gt;
	&lt;li&gt;org.apache.sling.launchpad.webapp.integrationtest.userManager.UserPrivilegesInfoTest.testCanRemoveUser&lt;/li&gt;
	&lt;li&gt;org.apache.sling.launchpad.webapp.integrationtest.userManager.UserPrivilegesInfoTest.testCanUpdateGroupMembers&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The shared root error seems to be &lt;tt&gt;org.mozilla.javascript.EcmaError: TypeError: Cannot call method &amp;quot;getID&amp;quot; of undefined (/apps/sling/servlet/default/privileges-info.json.esp#27)&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156572">SLING-7635</key>
            <summary>UserPrivilegesInfoTest fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 2 May 2018 11:39:38 +0000</created>
                <updated>Mon, 7 May 2018 08:47:35 +0000</updated>
                            <resolved>Mon, 7 May 2018 08:47:35 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16465638" author="bdelacretaz" created="Mon, 7 May 2018 08:47:35 +0000"  >&lt;p&gt;Fixed by adding a null check in the test script,&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/6d00403830dc5f991b0463db3913ea88b3efd547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-launchpad-integration-tests/commit/6d00403830dc5f991b0463db3913ea88b3efd547&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t95z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7634] Launchpad testing fails with Java 10</title>
                <link>https://issues.apache.org/jira/browse/SLING-7634</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;It seems the version of the failsafe plugin we&apos;re using is not compatible with Java 10:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.20.1:integration-test (default) on project org.apache.sling.launchpad.testing: Execution default of goal org.apache.maven.plugins:maven-failsafe-plugin:2.20.1:integration-test failed. NullPointerException -&amp;gt; [Help 1]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13156571">SLING-7634</key>
            <summary>Launchpad testing fails with Java 10</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 May 2018 11:33:58 +0000</created>
                <updated>Tue, 23 Oct 2018 09:24:09 +0000</updated>
                            <resolved>Wed, 2 May 2018 11:35:37 +0000</resolved>
                                                    <fixVersion>Launchpad Testing 11</fixVersion>
                                    <component>Build and Source Control</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16460910" author="rombert" created="Wed, 2 May 2018 11:35:37 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-testing/commit/18e7c24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-launchpad-testing commit 18e7c24&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t95r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7631] Wrong log debug statement in ResourceResolverImpl</title>
                <link>https://issues.apache.org/jira/browse/SLING-7631</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There is a wrong log debug statement in &lt;tt&gt;ResourceResolverImpl#map&lt;/tt&gt; in &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;resolve: MapEntry {} matches, mapped path is {}&quot;&lt;/span&gt;, mapEntry, mappedPath);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it should be &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;map: MapEntry {} matches, mapped path is {}&quot;&lt;/span&gt;, mapEntry, mappedPath);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/master/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java#L568&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/blob/master/src/main/java/org/apache/sling/resourceresolver/impl/ResourceResolverImpl.java#L568&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156514">SLING-7631</key>
            <summary>Wrong log debug statement in ResourceResolverImpl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 May 2018 06:22:52 +0000</created>
                <updated>Fri, 3 Aug 2018 13:10:27 +0000</updated>
                            <resolved>Wed, 2 May 2018 06:29:17 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.6.4</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16460578" author="asanso" created="Wed, 2 May 2018 06:28:35 +0000"  >&lt;p&gt;fixed in rev. 31d72ce..2a87d59&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t8t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7630] Sling IDE Tooling OSGi Component should provide Constructor for References</title>
                <link>https://issues.apache.org/jira/browse/SLING-7630</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;OSGi Components / Services should provide a Constructor for all OSGi References to make sure IntelliJ and other non-OSGi container IDEs can instantiate them properly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13156125">SLING-7630</key>
            <summary>Sling IDE Tooling OSGi Component should provide Constructor for References</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Apr 2018 15:13:53 +0000</created>
                <updated>Tue, 12 Jun 2018 15:04:36 +0000</updated>
                                                                            <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="16460619" author="rombert" created="Wed, 2 May 2018 07:21:12 +0000"  >&lt;p&gt;Yes, would be great to ensure they are usable OOTB in non-OSGi environments. I would suggest setters rather than constructor injection since it keeps the same behaviour as the OSGi ones - for now we don&apos;t have constructor injection via SCR in Eclipse ( added via OSGi R7 IIRC ).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t6ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7628] Event support depends on Discovery Commons</title>
                <link>https://issues.apache.org/jira/browse/SLING-7628</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5560&quot; title=&quot;Delay job processing at startup to avoid unnecessary stale job handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5560&quot;&gt;&lt;del&gt;SLING-5560&lt;/del&gt;&lt;/a&gt; added a dependency on Discovery Commons (&lt;tt&gt;InitDelayingTopologyEventListener&lt;/tt&gt;) which means Event support is no longer useable in (Discovery) standalone setups.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13155979">SLING-7628</key>
            <summary>Event support depends on Discovery Commons</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Apr 2018 11:47:37 +0000</created>
                <updated>Wed, 25 Jul 2018 14:45:17 +0000</updated>
                            <resolved>Sat, 5 May 2018 19:07:56 +0000</resolved>
                                    <version>Event 4.0.2</version>
                                    <fixVersion>Event 4.2.12</fixVersion>
                                    <component>Event</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16464105" author="olli" created="Fri, 4 May 2018 16:34:18 +0000"  >&lt;p&gt;&lt;tt&gt;InitDelayingTopologyEventListener&lt;/tt&gt; doesn&apos;t fit into any other discovery bundle (&lt;tt&gt;base&lt;/tt&gt; depends on &lt;tt&gt;commons&lt;/tt&gt;, &lt;tt&gt;support&lt;/tt&gt; contains a single component and the API bundle is quite uncluttered), so I tend to copy &lt;tt&gt;InitDelayingTopologyEventListener&lt;/tt&gt; (without deprecated methods and support for logger) into &lt;tt&gt;event&lt;/tt&gt; bundle itself. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, WDYT?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12944781">SLING-5560</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t5if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7627] CAConfig Impl: Wrong config name when adapting ConfigurationBuilder multiple times from same resource</title>
                <link>https://issues.apache.org/jira/browse/SLING-7627</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when adapting a &lt;tt&gt;ConfigurationBuilder&lt;/tt&gt; from a resource the instance is cached (this is a default feature of SlingAdaptable).&lt;/p&gt;

&lt;p&gt;when the &lt;tt&gt;ConfiguationBuilder&lt;/tt&gt; is adapted/used multiple times with and without configuration name, the configuration name is saved in the instance. if calling the builder next time without configuration name the configuration name is still set.&lt;/p&gt;

&lt;p&gt;the configuration name must not be saved in the instance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13155806">SLING-7627</key>
            <summary>CAConfig Impl: Wrong config name when adapting ConfigurationBuilder multiple times from same resource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>contextaware-config</label>
                    </labels>
                <created>Fri, 27 Apr 2018 21:40:26 +0000</created>
                <updated>Mon, 7 May 2018 08:36:36 +0000</updated>
                            <resolved>Fri, 27 Apr 2018 21:52:01 +0000</resolved>
                                    <version>Context-Aware Configuration Impl 1.4.10</version>
                                    <fixVersion>Context-Aware Configuration Impl 1.4.12</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16457125" author="sseifert@pro-vision.de" created="Fri, 27 Apr 2018 21:52:02 +0000"  >&lt;p&gt;fixed: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-caconfig-impl/commit/d4bb850a3adb91369c2bf8c9b1552ec099733225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-caconfig-impl/commit/d4bb850a3adb91369c2bf8c9b1552ec099733225&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t4fz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7623] Launchpad tests are failing massively</title>
                <link>https://issues.apache.org/jira/browse/SLING-7623</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently 552 out of 554 tests are failing for sling-org-apache-sling-launchpad-testing-1.8 . &lt;/p&gt;</description>
                <environment></environment>
        <key id="13155667">SLING-7623</key>
            <summary>Launchpad tests are failing massively</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Apr 2018 09:37:15 +0000</created>
                <updated>Fri, 27 Apr 2018 09:47:44 +0000</updated>
                            <resolved>Fri, 27 Apr 2018 09:47:44 +0000</resolved>
                                                    <fixVersion>Launchpad Test Services 2.0.14</fixVersion>
                                    <component>Launchpad</component>
                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16456166" author="rombert" created="Fri, 27 Apr 2018 09:38:53 +0000"  >&lt;p&gt;Sling does not start up properly, the error is &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;junit.framework.AssertionFailedError: 
Server does not seem to be ready, after 60000 msec, got the following 119 Exceptions:org.apache.sling.commons.testing.integration.HttpStatus
CodeException: Expected status code 302 for POST, got 503, URL=http://localhost:41000/WaitForSlingStartup/1524821641671, &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16456168" author="rombert" created="Fri, 27 Apr 2018 09:41:14 +0000"  >&lt;p&gt;Probable root cause is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.osgi.framework.BundleException: Unable to resolve org.apache.sling.launchpad.test-services [40](R 40.0): missing requirement [org.apache.sling.launchpad.test-services [40](R 40.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.sling.api.resource)(version&amp;gt;=2.10.0)(!(version&amp;gt;=2.11.0))) Unresolved requirements: [[org.apache.sling.launchpad.test-services [40](R 40.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.sling.api.resource)(version&amp;gt;=2.10.0)(!(version&amp;gt;=2.11.0)))]
	at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4149)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2119)
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998)
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:984)
	at org.apache.sling.installer.core.impl.tasks.BundleStartTask.execute(BundleStartTask.java:97)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.doExecuteTasks(OsgiInstallerImpl.java:902)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.executeTasks(OsgiInstallerImpl.java:737)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.run(OsgiInstallerImpl.java:287)
	at java.lang.Thread.run(Thread.java:748)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16456177" author="rombert" created="Fri, 27 Apr 2018 09:47:44 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-test-services/commit/b609ef3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-launchpad-test-services commit b609ef3&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0klu7:iirf</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7620] Bypassing Ghost Packages in SCD</title>
                <link>https://issues.apache.org/jira/browse/SLING-7620</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sometimes the distribution package gets deleted from the queue &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; but the actual item in the distribution queue &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;is not deleted leading it become a Ghost Package. Because of this same item is picked up again and again resulting in queue blocking and repeated warnings:&#160;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;19.03.2018 15:10:04.130&#160;&lt;b&gt;WARN&lt;/b&gt;&#160;[10.43.32.54&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;1521486603947&amp;#93;&lt;/span&gt;&#160;POST /libs/sling/distribution/services/exporters/socialpubsync-reverse HTTP/1.1] org.apache.sling.distribution.packaging.impl.exporter.AgentDistributionPackageExporter cannot get package DistributionPackageInfo{ request.type=ADD, request.paths=&lt;span class=&quot;error&quot;&gt;&amp;#91;/home/groups/umuc/tus/cmit/cmit372/2188/027346-01-2188-OL1-6380/tnWOVAWBzaSHIzeDWana/rep:policy&amp;#93;&lt;/span&gt;}&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We need to make the code fail safe to handle such situations i.e. deleting the item in the distribution queue if it is not able to find the corresponding package.&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;/var/sling/distribution/packages/socialpubsync-vlt/data&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&#160;/var/eventing/jobs/unassigned/org.apache.sling.distribution.queue.socialpubsync-reverse.default&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13155319">SLING-7620</key>
            <summary>Bypassing Ghost Packages in SCD</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ankitagarwaladobe">Ankit Aggarwal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Apr 2018 06:46:14 +0000</created>
                <updated>Thu, 8 Aug 2019 11:42:50 +0000</updated>
                            <resolved>Thu, 26 Apr 2018 07:31:08 +0000</resolved>
                                    <version>Content Distribution Core 0.2.8</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16453631" author="mpetria" created="Thu, 26 Apr 2018 07:31:08 +0000"  >&lt;p&gt;Thanks&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ankitagarwaladobe&quot; class=&quot;user-hover&quot; rel=&quot;ankitagarwaladobe&quot;&gt;ankitagarwaladobe&lt;/a&gt; for the report, the issue is already tracked in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7555&quot; title=&quot;Remove ghost packages from distribution agent queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7555&quot;&gt;&lt;del&gt;SLING-7555&lt;/del&gt;&lt;/a&gt; so I will close this and follow up on that one.&#160;&lt;/p&gt;</comment>
                            <comment id="16453653" author="ankitagarwaladobe" created="Thu, 26 Apr 2018 08:04:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have raised the PR&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;. Please review.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/pull/7&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13147902">SLING-7555</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t1j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7618] Multiple exclusion for the same entity ids but with different version should be supported</title>
                <link>https://issues.apache.org/jira/browse/SLING-7618</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If multiple exclusions for &lt;tt&gt;skipEntityIds&lt;/tt&gt; are maintained with the same entity id but different versions, only the last entry is currently kept in the internal HashMap (as the entity id is used as key).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13154826">SLING-7618</key>
            <summary>Multiple exclusion for the same entity ids but with different version should be supported</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2018 14:34:27 +0000</created>
                <updated>Mon, 15 Oct 2018 19:01:25 +0000</updated>
                            <resolved>Mon, 15 Oct 2018 19:01:25 +0000</resolved>
                                    <version>Installer Health Checks 2.0.0</version>
                                    <fixVersion>Installer Health Checks 2.0.2</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16650631" author="kwin" created="Mon, 15 Oct 2018 19:01:25 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-hc/commit/4c3d75ed0829e2204b9e69ad8e656931e2a65815&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-hc/commit/4c3d75ed0829e2204b9e69ad8e656931e2a65815&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13150232">SLING-7569</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3syhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7617] Tags component properties are maintained with the wrong name</title>
                <link>https://issues.apache.org/jira/browse/SLING-7617</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the migration from Felix SCR Annotations to DS/Metatype annotations the property name for &quot;hc.tags&quot; was inadvertently changed to &quot;tags&quot;. As only the multivalue property &quot;hc.tags&quot; is evaluated by the Sling Health Checks maintaining &quot;tags&quot; has no functional impact.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13154820">SLING-7617</key>
            <summary>Tags component properties are maintained with the wrong name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2018 14:28:02 +0000</created>
                <updated>Tue, 24 Apr 2018 14:31:10 +0000</updated>
                            <resolved>Tue, 24 Apr 2018 14:30:39 +0000</resolved>
                                    <version>Installer Health Checks 2.0.0</version>
                                    <fixVersion>Installer Health Checks 2.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16449963" author="kwin" created="Tue, 24 Apr 2018 14:30:39 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-hc/commit/551c798a9eb82e728dfa2d0a768bd5213f104eac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-hc/commit/551c798a9eb82e728dfa2d0a768bd5213f104eac&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13150386">SLING-7573</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sygf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7615] HTL integration tests should use authentication</title>
                <link>https://issues.apache.org/jira/browse/SLING-7615</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6130&quot; title=&quot;Restrict access for principal everyone and move configuration to repoinit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6130&quot;&gt;&lt;del&gt;SLING-6130&lt;/del&gt;&lt;/a&gt; was applied to the Apache Sling Starter application, the HTL integration tests need to execute their HTTP requests using authentication.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13154740">SLING-7615</key>
            <summary>HTL integration tests should use authentication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2018 09:09:31 +0000</created>
                <updated>Fri, 22 Jun 2018 14:12:47 +0000</updated>
                            <resolved>Tue, 24 Apr 2018 09:23:58 +0000</resolved>
                                                    <fixVersion>Scripting HTL Testing 1.0.10-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16449517" author="radu.cotescu" created="Tue, 24 Apr 2018 09:23:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/commit/dc755d7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit dc755d7&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13011339">SLING-6130</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sxyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7593] ResourceTraversor doesn&apos;t support ResourceDecorator pattern</title>
                <link>https://issues.apache.org/jira/browse/SLING-7593</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In my current project, we are using ResourceDecorator pattern. In one case we would like to decorate a resource&#160;with additional children. Unfortunately ResourceTraversor object doesn&apos;t accept information about children from ResourceDecorator. It is caused by usage of ResourceUtil.listChildren(resource) method (inside ResourceTraversor class) which is deprecated. Under the hood the method invokes resource.getResourceResolver.listChildren(resource) method which reads data directly from repo. In result our additional children are not returned. Moreover, we don&apos;t have a place to add them to the list returned from resourceResolver.listChildren method.&lt;/p&gt;

&lt;p&gt;When we change the approach and we invoke resource.listChildren() method instead of ResourceUtil.listChildren(resource) then we get solution which is compatible with ResourceDecorator pattern and on the other hand when resources are not decorated then no changes should be observed.&lt;/p&gt;

&lt;p&gt;Additionally I have one additional question about org.apache.sling.servlets.get bundle imported packages. Why do we have the following dependency org.apache.sling.api.resource.external;version=&quot;[1.0,2)&quot; in the latest released version? On the other hand the same bundle has dependency on org.apache.sling.api.resource; version=&quot;[2.10,3)&quot;. Is it expected? If yes then how to provide org.apache.sling.api.resource.external;version=&quot;[1.0,2)&quot; on my environment, because now I don&apos;t have it.&lt;/p&gt;

&lt;p&gt;In the attachment section, you could find patch containing fix for the described scenario.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13153648">SLING-7593</key>
            <summary>ResourceTraversor doesn&apos;t support ResourceDecorator pattern</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="joannajasnowska">Joanna Jasnowska</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Apr 2018 10:16:17 +0000</created>
                <updated>Mon, 3 Sep 2018 12:26:29 +0000</updated>
                            <resolved>Tue, 24 Apr 2018 17:49:40 +0000</resolved>
                                                    <fixVersion>API 2.18.2</fixVersion>
                    <fixVersion>Servlets Get 2.1.32</fixVersion>
                                    <component>API</component>
                    <component>Servlets</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16444390" author="cziegeler" created="Thu, 19 Apr 2018 17:03:31 +0000"  >&lt;p&gt;Thanks for reporting. I think the best fix for this is probably the ResourceUtil.listChildren method - otherwise we have to fix each and every place.&lt;br/&gt;
As a quick fix we could also change the code in servlets.get as proposed by the patch&lt;/p&gt;</comment>
                            <comment id="16445390" author="joannajasnowska" created="Fri, 20 Apr 2018 06:51:17 +0000"  >&lt;p&gt;Hi, thank you for&#160;fast response.&lt;/p&gt;

&lt;p&gt;If&#160;it&apos;s&#160;ok to fix ResourceUtil.listChildren method,&#160;I&apos;d propose additional patch for&#160;that:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12919973/12919973_listChildren_method_fixed.patch&quot; title=&quot;listChildren_method_fixed.patch attached to SLING-7593&quot;&gt;listChildren_method_fixed.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16450290" author="cziegeler" created="Tue, 24 Apr 2018 17:49:33 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joannajasnowska&quot; class=&quot;user-hover&quot; rel=&quot;joannajasnowska&quot;&gt;joannajasnowska&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;thanks for providing the patches. I&apos;ve applied both of them&lt;/p&gt;

&lt;p&gt;Regarding you&apos;re question with the package import of o.a.s.r.external. Newer versions of the servlets get bundle provide a new feature based on that API addition. So in order to use latest servlets get you need a more recent Sling API bundle providing that package&lt;/p&gt;</comment>
                            <comment id="16451695" author="joannajasnowska" created="Wed, 25 Apr 2018 06:04:35 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;thank you for applying fixes and explanation. When&#160;can I expect release of these fixes?&lt;/p&gt;</comment>
                            <comment id="16468484" author="joannajasnowska" created="Wed, 9 May 2018 06:56:47 +0000"  >&lt;p&gt;Hi, my question is still valid.&#160;Could you please provide more or less expected release date?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16468739" author="jebailey" created="Wed, 9 May 2018 11:49:05 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joannajasnowska&quot; class=&quot;user-hover&quot; rel=&quot;joannajasnowska&quot;&gt;joannajasnowska&lt;/a&gt; I&apos;m in the process of doing some updates to that bundle. I&apos;m hoping to get a release out no later then the end of next week, March 18th&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16483587" author="joannajasnowska" created="Tue, 22 May 2018 07:23:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt;,&#160;is there any update on release date?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16484016" author="jebailey" created="Tue, 22 May 2018 14:16:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joannajasnowska&quot; class=&quot;user-hover&quot; rel=&quot;joannajasnowska&quot;&gt;joannajasnowska&lt;/a&gt; processes are sometimes slow. Technically the release date was yesterday, but I&apos;m waiting to have the release pushed to our download site before I can update all of the pages.&lt;/p&gt;</comment>
                            <comment id="16531438" author="dawid.klos" created="Tue, 3 Jul 2018 13:53:32 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jebailey&quot; class=&quot;user-hover&quot; rel=&quot;jebailey&quot;&gt;jebailey&lt;/a&gt; is there any update expected release date? I would be grateful for estimate when it may happen. Is it matter of days or weeks?&lt;/p&gt;</comment>
                            <comment id="16584111" author="rombert" created="Fri, 17 Aug 2018 15:53:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joana&quot; class=&quot;user-hover&quot; rel=&quot;joana&quot;&gt;joana&lt;/a&gt; - I unfortunately had to revert the changes to the API bundle (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/commit/88b2222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-api commit 88b2222&lt;/a&gt;&lt;br/&gt;
) as they caused a regression - see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7833&quot; title=&quot;BundleContentTest.testBundleContentParentFromMultipleBundles fails: Expected sling.js in the /system folder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7833&quot;&gt;&lt;del&gt;SLING-7833&lt;/del&gt;&lt;/a&gt; . I can&apos;t reopen this bug since it was already closed, so please open a new bug which contains an updated fix.&lt;/p&gt;

&lt;p&gt;To minimize the changes of breakage, please run the Sling ITs with the updated bundles.&lt;/p&gt;</comment>
                            <comment id="16587495" author="cziegeler" created="Tue, 21 Aug 2018 14:27:37 +0000"  >&lt;p&gt;I investigated here again and actually the code before this patch (as it is now reverted) is &quot;more&quot; correct as it uses the resource resolver to list children. &lt;/p&gt;</comment>
                            <comment id="16593634" author="kwin" created="Mon, 27 Aug 2018 13:17:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Do you mean that with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7838&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7838&lt;/a&gt; we actually have the better fix for this issue? Then there is no need to reopen this issue then.&lt;/p&gt;</comment>
                            <comment id="16593662" author="cziegeler" created="Mon, 27 Aug 2018 13:39:26 +0000"  >&lt;p&gt;I think there should be no need to reopen this as the initial implementation was actually correct and if there are problems they are most likely in other areas&lt;/p&gt;</comment>
                            <comment id="16602061" author="joannajasnowska" created="Mon, 3 Sep 2018 11:37:57 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;to summarize all activities within this issue; (please confirm or correct me if I&apos;m wrong)&lt;/p&gt;

&lt;p&gt;1. proposed change has been released in&#160;&lt;a href=&quot;https://issues.apache.org/jira/issues/?jql=project+%3D+SLING+AND+fixVersion+%3D+%22Servlets+Get+2.1.32%22&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Servlets Get 2.1.32&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2. while releasing changes to&#160;&lt;a href=&quot;https://issues.apache.org/jira/issues/?jql=project+%3D+SLING+AND+fixVersion+%3D+%22API+2.18.2%22&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;API 2.18.2&lt;/a&gt;&#160;some internal tests have failed and changes has been reverted.&lt;/p&gt;

&lt;p&gt;Please provide information on what shall we do to&#160;resolve issue with ResourceDecorator pattern. Specifically - what Jira issue shall we raise, and would you like us to contribute (if yes - could you please provide some tips on how this shall be implemented).&lt;/p&gt;

&lt;p&gt;Regards,&#160;&lt;/p&gt;

&lt;p&gt;Joanna Jasnowska&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16602105" author="cziegeler" created="Mon, 3 Sep 2018 12:26:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joannajasnowska&quot; class=&quot;user-hover&quot; rel=&quot;joannajasnowska&quot;&gt;joannajasnowska&lt;/a&gt; Thanks for following up here. In the initial description you wrote:&lt;br/&gt;
&quot;Under the hood the method invokes resource.getResourceResolver.listChildren(resource) method which reads data directly from repo. In result our additional children are not returned&quot;&lt;br/&gt;
But actually the listChildren method of the resource resolver implementation is the central method applying the resource decorators to resources.&lt;br/&gt;
Therefore if the problem still exists for you, I suggest to open a new issue with a detailed description of what you&apos;re trying to do and the outcome of it. Best would be a test case demonstrating your problem.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13179537">SLING-7833</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13179896">SLING-7837</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13179898">SLING-7838</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12919786" name="calling_deprecated_ResourceUtil_listChildren(resource)_replaced_with_resource_listChildren.patch" size="908" author="joannajasnowska" created="Thu, 19 Apr 2018 10:15:33 +0000"/>
                            <attachment id="12919973" name="listChildren_method_fixed.patch" size="720" author="joannajasnowska" created="Fri, 20 Apr 2018 06:50:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sr9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7591] Session leak when a ResourceResolver is created from a Session then gets cloned</title>
                <link>https://issues.apache.org/jira/browse/SLING-7591</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following steps will cause a new JCR session to be opened then leaked:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Create a ResourceResolver out of an existing JCR session (using&#160;AUTHENTICATION_INFO_SESSION)&lt;/li&gt;
	&lt;li&gt;Call clone() on the ResourceResolver created in step 1, passing the&#160;ResourceResolverFactory.USER_IMPERSONATION key with a username to impersonate&lt;/li&gt;
	&lt;li&gt;Close the ResourceResolver created in step 2.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The expected behavior is that since step 2 opened a new JCR Session in the background, step 3 should close it. The actual behavior is that the JCR session stays open without an obvious way to close it, and these leaked sessions can pile up if this sequence is executed often.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13153081">SLING-7591</key>
            <summary>Session leak when a ResourceResolver is created from a Session then gets cloned</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="Csaba Varga">Csaba Varga</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2018 17:59:05 +0000</created>
                <updated>Fri, 3 Aug 2018 13:10:08 +0000</updated>
                            <resolved>Tue, 24 Apr 2018 17:53:23 +0000</resolved>
                                    <version>JCR Resource 3.0.8</version>
                                    <fixVersion>JCR Resource 3.0.14</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16441265" author="csaba varga" created="Tue, 17 Apr 2018 18:00:35 +0000"  >&lt;p&gt;I&apos;ll try to create a pull request with a unit test demonstration and a proposed fix. This is my first time working on this code base, so I&apos;m not sure when I can complete it.&lt;/p&gt;</comment>
                            <comment id="16441347" author="csaba varga" created="Tue, 17 Apr 2018 19:00:58 +0000"  >&lt;p&gt;Created PR with proposed fix:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-resource/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-resource/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16450295" author="cziegeler" created="Tue, 24 Apr 2018 17:53:23 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Csaba+Varga&quot; class=&quot;user-hover&quot; rel=&quot;Csaba Varga&quot;&gt;Csaba Varga&lt;/a&gt; . It&apos;s applied&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3snsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7589] HTL doesn&apos;t correctly handle synthetic resource inclusions</title>
                <link>https://issues.apache.org/jira/browse/SLING-7589</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a synthetic resource is included in a &lt;tt&gt;data-sly-resource&lt;/tt&gt; block element without any &lt;tt&gt;resourceType&lt;/tt&gt; information, the HTL &lt;tt&gt;ResourceRuntimeExtension&lt;/tt&gt; will not correctly dispatch the request. In those cases the request&apos;s resource type should be used as a fallback, to identify the correct scripts.&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
Assuming &lt;tt&gt;caller.html&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;div id=&quot;caller&quot; data-sly-resource=&quot;${&apos;/content/lorem-ipsum&apos; @ resourceType=&apos;syntheticresource&apos;}&quot;&amp;gt;&amp;lt;/div&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and &lt;tt&gt;syntheticresource.html&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;div id=&quot;synthetic-resource&quot;&amp;gt;
    &amp;lt;span class=&quot;wrapper-text&quot;&amp;gt;Testing synthetic resource delegation&amp;lt;/span&amp;gt;
    &amp;lt;div class=&quot;wrapper&quot; data-sly-resource=&quot;${@ selectors=&apos;selector&apos;}&quot;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in the &lt;tt&gt;selector.html&lt;/tt&gt; script not being found, due to not taking into consideration the original resource type of the request.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13153033">SLING-7589</key>
            <summary>HTL doesn&apos;t correctly handle synthetic resource inclusions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2018 14:54:25 +0000</created>
                <updated>Fri, 22 Jun 2018 14:12:27 +0000</updated>
                            <resolved>Tue, 24 Apr 2018 09:25:33 +0000</resolved>
                                                    <fixVersion>Scripting HTL Engine 1.0.54-1.4.0</fixVersion>
                    <fixVersion>Scripting HTL Testing Content 1.0.10-1.4.0</fixVersion>
                    <fixVersion>Scripting HTL Testing 1.0.10-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16449518" author="radu.cotescu" created="Tue, 24 Apr 2018 09:25:33 +0000"  >&lt;p&gt;Fixed in:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/f46ff4d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit f46ff4d&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/commit/cf3a27d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit cf3a27d&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/commit/ba328da&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit ba328da&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3snhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7586] [Sling Models] Memory Leak in cached adapters</title>
                <link>https://issues.apache.org/jira/browse/SLING-7586</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There is a potential memory leak in the adapterCache in ModelAdapterFactory when the model class references the adaptable. The solution is to wrap the model object in a WeakReference. That ensures that the model can be GC&apos;d and then the key can be GC&apos;d.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13152974">SLING-7586</key>
            <summary>[Sling Models] Memory Leak in cached adapters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2018 11:48:05 +0000</created>
                <updated>Wed, 24 Oct 2018 22:40:08 +0000</updated>
                            <resolved>Wed, 17 Oct 2018 15:23:49 +0000</resolved>
                                    <version>Sling Models Impl 1.4.0</version>
                    <version>Models Impl 1.4.2</version>
                    <version>Models Impl 1.4.4</version>
                    <version>Models Impl 1.4.6</version>
                    <version>Models Impl 1.4.8</version>
                                    <fixVersion>Models Impl 1.4.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6000">1h 40m</timespent>
                                <comments>
                            <comment id="16653735" author="klcodanr" created="Wed, 17 Oct 2018 15:23:49 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/9/commits/5b472557cc6e6057e781a4bf0e65ddfe3d3e8430&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/9/commits/5b472557cc6e6057e781a4bf0e65ddfe3d3e8430&lt;/a&gt;, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paul.bjorkstrand&quot; class=&quot;user-hover&quot; rel=&quot;paul.bjorkstrand&quot;&gt;paul.bjorkstrand&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13065879">SLING-6785</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sn4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7584] Only the last DisposalCallbackRegistry is disposed when multiple models are adapted in the same request</title>
                <link>https://issues.apache.org/jira/browse/SLING-7584</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The implementation of&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5668&quot; title=&quot;Models: Leverage ServletRequestListener.requestDestroyed for calling DisposalCallback in case the model was created from a request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5668&quot;&gt;&lt;del&gt;SLING-5668&lt;/del&gt;&lt;/a&gt; naively assumes that only a single disposal callback registry will be used per request. This is plainly not the case and unfortunately results in only the last callback for a given request to be invoked.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13152792">SLING-7584</key>
            <summary>Only the last DisposalCallbackRegistry is disposed when multiple models are adapted in the same request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Apr 2018 18:21:02 +0000</created>
                <updated>Thu, 24 Jan 2019 14:13:38 +0000</updated>
                            <resolved>Wed, 17 Oct 2018 17:22:03 +0000</resolved>
                                    <version>Models Impl 1.4.6</version>
                    <version>Models Impl 1.4.8</version>
                                    <fixVersion>Models Impl 1.4.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16439818" author="justinedelson" created="Mon, 16 Apr 2018 18:22:13 +0000"  >&lt;p&gt;pull request: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16653901" author="klcodanr" created="Wed, 17 Oct 2018 17:22:03 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/commit/68aea6f3ab554e6a09c670e4dea14a2a7bf74fa2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/commit/68aea6f3ab554e6a09c670e4dea14a2a7bf74fa2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13211572">SLING-8237</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sm0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7583] Log tracer runs into ClassCastException for oak-queries</title>
                <link>https://issues.apache.org/jira/browse/SLING-7583</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Oak&apos;s &lt;tt&gt;QueryEngineImpl&lt;/tt&gt;&#160;logs the following &quot;cost: {} for query {}&quot; with the first parameter being a primitive &lt;tt&gt;double&lt;/tt&gt; and the second being an instance of &lt;tt&gt;QueryImpl&lt;/tt&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. On the other hand the TraceContext casts thats second parameter to &lt;tt&gt;String&lt;/tt&gt; without a type check &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. I would propose to use &lt;tt&gt;String.valueOf()&lt;/tt&gt; here to get the proper &lt;tt&gt;toString()&lt;/tt&gt; implementation of the &lt;tt&gt;QueryImpl&lt;/tt&gt; object.&lt;br/&gt;
 &#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.7/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java#L311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.7/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java#L311&lt;/a&gt;&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-tracer/blob/master/src/main/java/org/apache/sling/tracer/internal/TracerContext.java#L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-tracer/blob/master/src/main/java/org/apache/sling/tracer/internal/TracerContext.java#L92&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13152677">SLING-7583</key>
            <summary>Log tracer runs into ClassCastException for oak-queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Apr 2018 10:13:33 +0000</created>
                <updated>Mon, 7 Aug 2023 08:53:09 +0000</updated>
                            <resolved>Wed, 18 Apr 2018 08:19:56 +0000</resolved>
                                    <version>Log Tracer 1.0.6</version>
                    <version>Log Tracer 1.0.4</version>
                                    <fixVersion>Log Tracer 1.0.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16442108" author="chetanm" created="Wed, 18 Apr 2018 08:19:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;I would propose to use &lt;tt&gt;String.valueOf()&lt;/tt&gt; here to get the proper &lt;tt&gt;toString()&lt;/tt&gt; implementation of the &lt;tt&gt;QueryImpl&lt;/tt&gt; object.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1. Fixed as per your suggestion in &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-tracer.git;a=commit;h=ee13d5caf8ef714bcd2ad51d4ae414ccfbb37946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16572975" author="marko.donke" created="Wed, 8 Aug 2018 10:03:22 +0000"  >&lt;p&gt;Is there a way for a convenient download of Log Tracer 1.0.8 ?&lt;br/&gt;
Can&apos;t find it here:&#160;&lt;a href=&quot;https://sling.apache.org/downloads.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/downloads.cgi&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16573019" author="rombert" created="Wed, 8 Aug 2018 10:58:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marko.donke&quot; class=&quot;user-hover&quot; rel=&quot;marko.donke&quot;&gt;marko.donke&lt;/a&gt; - there is no Log Tracer 1.0.8 release at the moment, but you can build it yourself from source - &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-tracer&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-tracer&lt;/a&gt; . &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; - do you plan to make a log tracer 1.0.8 release in the near future?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3slb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7581] Using data-sly-use with two classes with same name will generate uncompilable code</title>
                <link>https://issues.apache.org/jira/browse/SLING-7581</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If you have an HTL file with two data-sly-use with classes with the same name HTL will generate a java file which cannot be compiled.&lt;/p&gt;

&lt;p&gt;e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
data-sly-use.first=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.adobe.cq.wcm.core.components.models.Page&quot;&lt;/span&gt;
data-sly-use.second=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.client.project.Page&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Will generate&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.client.project.Page;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.adobe.cq.wcm.core.components.models.Page;
 ...
 ...
 _global_first= renderContext.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;use&quot;&lt;/span&gt;, Page.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), obj());
 _global_second = renderContext.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;use&quot;&lt;/span&gt;, Page.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), obj());

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Causing a compilation error as Page is not fully qualified in the code and therefore an ambiguous reference (due to the two imports of same class names)&lt;/p&gt;

&lt;p&gt;This seems to have been introduced by&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7205&quot; title=&quot;Generate import statements for data-sly-use Java use objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7205&quot;&gt;&lt;del&gt;SLING-7205&lt;/del&gt;&lt;/a&gt;&#160;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13152282">SLING-7581</key>
            <summary>Using data-sly-use with two classes with same name will generate uncompilable code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="santiagozky">Santiago Garc&#237;a Pimentel</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Apr 2018 13:28:26 +0000</created>
                <updated>Tue, 7 Aug 2018 12:19:59 +0000</updated>
                            <resolved>Fri, 3 Aug 2018 15:33:59 +0000</resolved>
                                    <version>Scripting HTL Java Compiler 1.0.16</version>
                    <version>HTL Maven Plugin 1.1.0</version>
                                    <fixVersion>Scripting HTL Java Compiler 1.0.26-1.4.0</fixVersion>
                    <fixVersion>HTL Maven Plugin 1.1.8-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16516695" author="kwin" created="Tue, 19 Jun 2018 06:04:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Would it be possible to switch to fully-qualified class names in the generated servlet?&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="16517003" author="radu.cotescu" created="Tue, 19 Jun 2018 12:19:00 +0000"  >&lt;p&gt;Grrr... Wish I had seen this issue earlier - I&apos;ve just started a release thread. Anyways, releases are cheap so expect a fix next week. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, we don&apos;t generate servlets - in the HTL world we call them &lt;tt&gt;RenderUnits&lt;/tt&gt;. Luckily the code change is trivial:&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/blob/org.apache.sling.scripting.sightly.compiler.java-1.0.24-1.4.0/src/main/java/org/apache/sling/scripting/sightly/java/compiler/impl/ExpressionTranslator.java#L155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/blob/org.apache.sling.scripting.sightly.compiler.java-1.0.24-1.4.0/src/main/java/org/apache/sling/scripting/sightly/java/compiler/impl/ExpressionTranslator.java#L155&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16568183" author="radu.cotescu" created="Fri, 3 Aug 2018 13:11:45 +0000"  >&lt;p&gt;Next week turned to be one month and a half later. Sorry for that, it slipped under the radar before my holiday. On it now.&lt;/p&gt;</comment>
                            <comment id="16568358" author="radu.cotescu" created="Fri, 3 Aug 2018 15:33:59 +0000"  >&lt;p&gt;Fixed in:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-htl-maven-plugin/commit/5a21b39&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 5a21b39&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler-java/commit/08b103b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 08b103b&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13110307">SLING-7205</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sivb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7580] Servlets GET: JsonRendererServlet: ResourceTraversor: New optional request parameter appendChildResourceTypes should be provided to have the childresourceTypes array for each JsonObjectBuilder object in the response.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7580</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;1) Provide a new optional request query parameter &quot;appendChildResourceTypes&quot;.When appendChildResourceTypes is provided as true,ChildResourceTypes Attribute should be defined for all the JsonObjectBuilder Objects in the response containing its respective immediate children&apos;s resourceTypes array.&lt;br/&gt;
 2) Provide a new optional request query parameter &quot;filterResourceTypes&quot;.Filter the response to return only those&#160;JsonObjectBuilder objects whose resourceTypes are not&#160;present in the array of the&#160;filterResourceTypes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13152229">SLING-7580</key>
            <summary>Servlets GET: JsonRendererServlet: ResourceTraversor: New optional request parameter appendChildResourceTypes should be provided to have the childresourceTypes array for each JsonObjectBuilder object in the response.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Avani Sarsani">Avani Sarsani</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Apr 2018 09:29:04 +0000</created>
                <updated>Tue, 17 Apr 2018 10:38:41 +0000</updated>
                                            <version>Servlets Get 2.1.30</version>
                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sijj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7568] Logs not generating for Sling under Karaf</title>
                <link>https://issues.apache.org/jira/browse/SLING-7568</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sling Feature for Karaf&#160;works well but&#160; I could not see any errro.log or any kind&#160;of Sling custom logs being generated.&#160;&lt;/p&gt;

&lt;p&gt;I am not sure if this is a bug or any custom settings which&#160;is required to get various sling related logs .&lt;/p&gt;</description>
                <environment></environment>
        <key id="13149570">SLING-7568</key>
            <summary>Logs not generating for Sling under Karaf</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pursingh">Purnendra Pratap Singh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Apr 2018 20:09:31 +0000</created>
                <updated>Tue, 3 Apr 2018 17:05:05 +0000</updated>
                            <resolved>Tue, 3 Apr 2018 17:05:05 +0000</resolved>
                                                                    <component>Karaf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16424300" author="olli" created="Tue, 3 Apr 2018 17:05:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pursingh&quot; class=&quot;user-hover&quot; rel=&quot;pursingh&quot;&gt;pursingh&lt;/a&gt;, please use&#160;our &lt;a href=&quot;https://sling.apache.org/project-information.html#mailing-lists&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mailings lists&lt;/a&gt; for questions.&lt;/p&gt;

&lt;p&gt;You need to configure &lt;a href=&quot;https://karaf.apache.org/manual/latest/#_log&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Pax Logging in Karaf&lt;/a&gt; to get something like &lt;tt&gt;error.log&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3s28v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7567] Unable to logout from Sling Starter Index page , Comopsum Browser , system/console</title>
                <link>https://issues.apache.org/jira/browse/SLING-7567</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have installed Sling feature&#160;on Apache Karaf .&lt;/p&gt;

&lt;p&gt;I am able to login into Sling using admin/admin and Felix console using karaf/karaf&#160;.&lt;/p&gt;

&lt;p&gt;but for any of the&#160;logout link for&#160; :&#160;bin/browser.html ,&#160; and /system/console is not logging me out.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I am not sure if this is because of Sling feature or Karaf issue in itself.&#160;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13149567">SLING-7567</key>
            <summary>Unable to logout from Sling Starter Index page , Comopsum Browser , system/console</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="pursingh">Purnendra Pratap Singh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Apr 2018 19:57:38 +0000</created>
                <updated>Sat, 16 Jun 2018 13:51:09 +0000</updated>
                            <resolved>Sat, 16 Jun 2018 13:50:47 +0000</resolved>
                                                                    <component>Karaf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16427565" author="olli" created="Thu, 5 Apr 2018 20:47:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pursingh&quot; class=&quot;user-hover&quot; rel=&quot;pursingh&quot;&gt;pursingh&lt;/a&gt;, I cannot reproduce your issues. Please describe exactly your steps and which browser you are using. See &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-3006&quot; title=&quot;Please create a logout button for the web console screen&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-3006&quot;&gt;&lt;del&gt;FELIX-3006&lt;/del&gt;&lt;/a&gt; also.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3s287:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7566] Typo in sling maven archetypes page</title>
                <link>https://issues.apache.org/jira/browse/SLING-7566</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In this &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; page, there is a typo in the&#160;&lt;em&gt;sling-intitial-content-archetype.&lt;/em&gt; It should be&#160;&lt;em&gt;sling-initial-content-archetype&lt;/em&gt; instead.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://sling.apache.org/documentation/development/maven-archetypes.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/maven-archetypes.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13149284">SLING-7566</key>
            <summary>Typo in sling maven archetypes page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="sabyamon@gmail.com">Sabyasachi Mukherjee</reporter>
                        <labels>
                            <label>documentation</label>
                    </labels>
                <created>Sat, 31 Mar 2018 06:58:05 +0000</created>
                <updated>Mon, 2 Apr 2018 06:56:27 +0000</updated>
                            <resolved>Mon, 2 Apr 2018 06:56:26 +0000</resolved>
                                                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16421199" author="sabyamon@gmail.com" created="Sat, 31 Mar 2018 07:10:46 +0000"  >&lt;p&gt;Please see this&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; PR for the typo fix.&lt;/p&gt;

&lt;p&gt;[&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/apache/sling-site/pull/12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/12&lt;/a&gt;|https://github.com/apache/sling-site/pull/12]&lt;/p&gt;</comment>
                            <comment id="16421976" author="rombert" created="Mon, 2 Apr 2018 06:56:27 +0000"  >&lt;p&gt;Applied, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sabyamon%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;sabyamon@gmail.com&quot;&gt;sabyamon@gmail.com&lt;/a&gt; for the fix!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3s0hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7565] Sling Composum shows error 500 on loading on Karaf and Starter</title>
                <link>https://issues.apache.org/jira/browse/SLING-7565</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After installing Composum feature on Apache Karaf for Sling .&lt;/p&gt;

&lt;p&gt;if&#160;I am trying to load /bin/browser.html first time I am seeing error 500 pop up ( see screenshot&#160;attached&#160;for the error) and same error also comes everytime we click on &apos;jcr:root&apos; node on the Node Browser&#160;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ist-dresden/composum/issues/128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Composum #128 - ClassCastException: java.lang.Integer cannot be cast to java.lang.Long&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13149227">SLING-7565</key>
            <summary>Sling Composum shows error 500 on loading on Karaf and Starter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="pursingh">Purnendra Pratap Singh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Mar 2018 19:12:48 +0000</created>
                <updated>Tue, 23 Oct 2018 09:18:29 +0000</updated>
                            <resolved>Mon, 9 Apr 2018 18:43:13 +0000</resolved>
                                                    <fixVersion>Karaf Features 1.0.0</fixVersion>
                    <fixVersion>Starter 11</fixVersion>
                                    <component>Karaf</component>
                    <component>Starter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16420928" author="olli" created="Fri, 30 Mar 2018 20:56:41 +0000"  >&lt;p&gt;Same error happens also on Sling Starter (so not a Karaf issue):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;30.03.2018 22:48:48.952 *ERROR* [0:0:0:0:0:0:0:1 [1522442928947] GET /bin/cpm/nodes/property.map.json/ HTTP/1.1] org.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught Throwable
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long
	at com.composum.sling.core.util.JsonUtil.writeJsonValue(JsonUtil.java:896) [com.composum.core.commons:1.8.2]
	at com.composum.sling.core.util.JsonUtil.writeJsonProperty(JsonUtil.java:827) [com.composum.core.commons:1.8.2]
	at com.composum.sling.core.util.JsonUtil.writeJsonValueMap(JsonUtil.java:729) [com.composum.core.commons:1.8.2]
	at com.composum.sling.nodes.servlet.PropertyServlet$MapGetOperation.doIt(PropertyServlet.java:147) [com.composum.core.console:1.8.2]
	at com.composum.sling.core.servlet.ServletOperationSet.doGet(ServletOperationSet.java:145) [com.composum.core.commons:1.8.2]
	at com.composum.sling.core.servlet.AbstractServiceServlet.doGet(AbstractServiceServlet.java:75) [com.composum.core.commons:1.8.2]
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.mayService(SlingSafeMethodsServlet.java:266) [org.apache.sling.api:2.18.0]
	at org.apache.sling.api.servlets.SlingAllMethodsServlet.mayService(SlingAllMethodsServlet.java:137) [org.apache.sling.api:2.18.0]
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:342) [org.apache.sling.api:2.18.0]
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:374) [org.apache.sling.api:2.18.0]
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:552) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:107) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:131) [org.apache.sling.i18n:2.5.12]
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151) [org.apache.sling.engine:2.6.12]
	at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:234) [org.apache.sling.engine:2.6.12]
	at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:96) [org.apache.felix.http.sslfilter:1.2.4]
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:131) [org.apache.sling.i18n:2.5.12]
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:72) [org.apache.sling.engine:2.6.12]
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.sling.engine.impl.parameters.RequestParameterSupportConfigurer.doFilter(RequestParameterSupportConfigurer.java:63) [org.apache.sling.engine:2.6.12]
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:128) [org.apache.felix.http.jetty:3.4.8]
	at org.apache.felix.http.base.internal.dispatch.DispatcherServlet.service(DispatcherServlet.java:49) [org.apache.felix.http.jetty:3.4.8]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:725) [org.apache.felix.http.servlet-api:1.1.2]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:848) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:584) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:224) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.Server.handle(Server.java:534) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:333) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:108) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671) [org.apache.felix.http.jetty:3.4.8]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589) [org.apache.felix.http.jetty:3.4.8]
	at java.lang.Thread.run(Thread.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16423044" author="pursingh" created="Mon, 2 Apr 2018 19:49:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; If I install Standalone JAR for Sling , I could not see this issue there.&#160;&lt;/p&gt;</comment>
                            <comment id="16424280" author="olli" created="Tue, 3 Apr 2018 16:56:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pursingh&quot; class=&quot;user-hover&quot; rel=&quot;pursingh&quot;&gt;pursingh&lt;/a&gt;, the error above is from current Starter 11-SNAPSHOT.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13151145">SLING-7576</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12917057" name="Screen Shot 2018-03-30 at 3.06.35 PM.png" size="355971" author="pursingh" created="Fri, 30 Mar 2018 19:09:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3s04n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7564] Unable to add Sling feature on Karaf 4.2.0.M2</title>
                <link>https://issues.apache.org/jira/browse/SLING-7564</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I am trying to run sling feature on Apache Karaf 4.2.0&#160;&lt;/p&gt;

&lt;p&gt;I am following exact steps from here: &lt;a href=&quot;https://sling.apache.org/documentation/karaf.html#sling-karaf-features&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/karaf.html#sling-karaf-features&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;on running&#160;command :&#160;&lt;/p&gt;

&lt;p&gt;feature:install sling-launchpad-content&lt;/p&gt;

&lt;p&gt;but I am getting below error :&#160;&lt;/p&gt;

&lt;p&gt;Error executing the command: No matching features for sling-launchpad-content/0&lt;/p&gt;</description>
                <environment></environment>
        <key id="13148986">SLING-7564</key>
            <summary>Unable to add Sling feature on Karaf 4.2.0.M2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="pursingh">Purnendra Pratap Singh</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2018 20:14:19 +0000</created>
                <updated>Fri, 30 Mar 2018 19:59:08 +0000</updated>
                            <resolved>Fri, 30 Mar 2018 19:59:08 +0000</resolved>
                                                                    <component>Documentation</component>
                    <component>Karaf</component>
                    <component>Site</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16420808" author="pursingh" created="Fri, 30 Mar 2018 18:27:45 +0000"  >&lt;p&gt;I think this is documentation mistake on :&#160;&#160;&lt;a href=&quot;https://sling.apache.org/documentation/karaf.html#sling-karaf-features&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/karaf.html#sling-karaf-features&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As correct feature&#160;should be:&#160;sling-starter-content not&#160;sling-launchpad-content&lt;/p&gt;</comment>
                            <comment id="16420880" author="olli" created="Fri, 30 Mar 2018 19:59:08 +0000"  >&lt;p&gt;The feature &lt;tt&gt;sling-launchpad-content&lt;/tt&gt; was replaced by &lt;tt&gt;sling-starter-content&lt;/tt&gt; recently, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7532&quot; title=&quot;Replace feature sling-launchpad-content by sling-starter-content&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7532&quot;&gt;&lt;del&gt;SLING-7532&lt;/del&gt;&lt;/a&gt;. Documentation fixed in &lt;a href=&quot;https://github.com/apache/sling-site/commit/9d8bbff2d8d4ec745401be1fbff7a92d486d1226&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;9d8bbff&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rynb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7560] Logging in still shows the &apos;Login&apos; link on the start page</title>
                <link>https://issues.apache.org/jira/browse/SLING-7560</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This is due to a now broken link to &apos;system/sling.js&apos;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13148897">SLING-7560</key>
            <summary>Logging in still shows the &apos;Login&apos; link on the start page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2018 14:45:35 +0000</created>
                <updated>Mon, 15 Oct 2018 15:37:09 +0000</updated>
                            <resolved>Thu, 29 Mar 2018 14:47:11 +0000</resolved>
                                                    <fixVersion>Starter Content 1.0.0</fixVersion>
                                    <component>Starter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16419112" author="rombert" created="Thu, 29 Mar 2018 14:47:11 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-launchpad-content/commit/cc9c5f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit cc9c5f0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16650371" author="klcodanr" created="Mon, 15 Oct 2018 15:37:09 +0000"  >&lt;p&gt;Closed with the release of&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;Sling Starter Content 1.0.0&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/projects/SLING/versions/12342990&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/SLING/versions/12342990&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ry3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7554] Link to Slingshot sample does not work</title>
                <link>https://issues.apache.org/jira/browse/SLING-7554</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In the current master of the starter, the link to the slingshot sample does not work anymore. It seems to be wrong (pointing to /starter/slingshot.html). But even correcting it by hand, results in a 404&lt;/p&gt;</description>
                <environment></environment>
        <key id="13147384">SLING-7554</key>
            <summary>Link to Slingshot sample does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Mar 2018 08:20:58 +0000</created>
                <updated>Mon, 17 Sep 2018 15:33:47 +0000</updated>
                            <resolved>Sun, 25 Mar 2018 10:30:23 +0000</resolved>
                                                    <fixVersion>Slingshot 0.9.0</fixVersion>
                    <fixVersion>Starter 11</fixVersion>
                    <fixVersion>Starter Content 1.0.0</fixVersion>
                                    <component>Launchpad</component>
                    <component>Samples</component>
                    <component>Starter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16411991" author="olli" created="Fri, 23 Mar 2018 20:15:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, can you check if it&apos;s fixed for you?&lt;/p&gt;</comment>
                            <comment id="16412925" author="cziegeler" created="Sun, 25 Mar 2018 07:46:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; Thanks, yes, works for me now&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13011339">SLING-6130</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13137165">SLING-7484</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rosv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7550] MockBundleContext does not get service references when class is null and filter is non-null</title>
                <link>https://issues.apache.org/jira/browse/SLING-7550</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When invoking BundleContext &lt;a href=&quot;https://osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html#getServiceReferences(java.lang.String, java.lang.String)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;api&lt;/a&gt;, when the class parameter is specified as null and filter param is non-null, it is expected to return reference of all services which satisfy the filter regardless of their class.&#160;&lt;/p&gt;

&lt;p&gt;When the same api is invoked in MockBundleContext, it does not returns any service references when class param is null and filter param is non-null. MockBundleContextshould behave is a way which is similar to original implementation&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146493">SLING-7550</key>
            <summary>MockBundleContext does not get service references when class is null and filter is non-null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sufyanharoon">Sufyan Haroon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2018 09:32:57 +0000</created>
                <updated>Fri, 23 Mar 2018 11:41:57 +0000</updated>
                            <resolved>Tue, 20 Mar 2018 09:57:22 +0000</resolved>
                                    <version>Testing OSGi Mock 2.3.6</version>
                                    <fixVersion>Testing OSGi Mock 2.3.8</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16406024" author="githubbot" created="Tue, 20 Mar 2018 09:40:17 +0000"  >&lt;p&gt;sufyanharoon opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7550&quot; title=&quot;MockBundleContext does not get service references when class is null and filter is non-null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7550&quot;&gt;&lt;del&gt;SLING-7550&lt;/del&gt;&lt;/a&gt; Return services even when class param is null in&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/2&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   MockBundleContext.getServiceReferences api&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16406043" author="githubbot" created="Tue, 20 Mar 2018 09:56:14 +0000"  >&lt;p&gt;stefanseifert closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7550&quot; title=&quot;MockBundleContext does not get service references when class is null and filter is non-null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7550&quot;&gt;&lt;del&gt;SLING-7550&lt;/del&gt;&lt;/a&gt; Return services even when class param is null in&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-testing-osgi-mock/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/testing/mock/osgi/MockServiceRegistration.java b/src/main/java/org/apache/sling/testing/mock/osgi/MockServiceRegistration.java&lt;br/&gt;
index 7a2e87d..095d3dc 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/testing/mock/osgi/MockServiceRegistration.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/testing/mock/osgi/MockServiceRegistration.java&lt;br/&gt;
@@ -93,7 +93,7 @@ public void unregister() {&lt;/p&gt;

&lt;p&gt;     boolean matches(final String clazz, final String filter) throws InvalidSyntaxException &lt;/p&gt;
{
         // ignore filter for now
-        return this.clazzes.contains(clazz)
+        return (clazz == null || this.clazzes.contains(clazz))
                 &amp;amp;&amp;amp; (filter == null || new FilterImpl(filter).match(properties));
     }

&lt;p&gt;diff --git a/src/test/java/org/apache/sling/testing/mock/osgi/MockBundleContextTest.java b/src/test/java/org/apache/sling/testing/mock/osgi/MockBundleContextTest.java&lt;br/&gt;
index 1760ced..e031f72 100644&lt;br/&gt;
&amp;#8212; a/src/test/java/org/apache/sling/testing/mock/osgi/MockBundleContextTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/testing/mock/osgi/MockBundleContextTest.java&lt;br/&gt;
@@ -297,6 +297,18 @@ public void testGetServiceOrderWithoutRanking() &lt;/p&gt;
{
         
         bundleContext.ungetService(ref);
     }
&lt;p&gt;+    &lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testGetServicesWithNoClassOnlyFilter() throws InvalidSyntaxException &lt;/p&gt;
{
+        bundleContext.registerService(String.class, &quot;service1&quot;, testProperty());
+        bundleContext.registerService(Long.class, new Long(2), testProperty());
+        bundleContext.registerService(Integer.class, new Integer(9), testProperty());
+        
+        // should return service with lowest service id = which was registered first
+        ServiceReference[] refs = bundleContext.getServiceReferences((String)null, &quot;(prop1=value1)&quot;);
+        assertNotNull(refs);
+        assertEquals(3, refs.length);
+    }

&lt;p&gt;     private static Dictionary&amp;lt;String, Object&amp;gt; ranking(final Integer serviceRanking) {&lt;br/&gt;
         Dictionary&amp;lt;String, Object&amp;gt; props = new Hashtable&amp;lt;String, Object&amp;gt;();&lt;br/&gt;
@@ -305,5 +317,11 @@ public void testGetServiceOrderWithoutRanking() {&lt;br/&gt;
         }&lt;br/&gt;
         return props;&lt;br/&gt;
     }&lt;br/&gt;
+    &lt;br/&gt;
+    private static Dictionary&amp;lt;String, Object&amp;gt; testProperty() &lt;/p&gt;
{
+        Dictionary&amp;lt;String, Object&amp;gt; props = new Hashtable&amp;lt;String, Object&amp;gt;();
+        props.put(&quot;prop1&quot;, &quot;value1&quot;);
+        return props;
+    }

&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16406044" author="sseifert@pro-vision.de" created="Tue, 20 Mar 2018 09:57:22 +0000"  >&lt;p&gt;thanks - i&apos;ve merged it!&lt;/p&gt;</comment>
                            <comment id="16406075" author="sufyanharoon" created="Tue, 20 Mar 2018 10:21:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt;, thanks for merging it. Can you please let me know when can I expect a release for this component?&lt;/p&gt;</comment>
                            <comment id="16406132" author="sseifert@pro-vision.de" created="Tue, 20 Mar 2018 10:58:36 +0000"  >&lt;p&gt;i can do a release today&lt;/p&gt;</comment>
                            <comment id="16407546" author="sufyanharoon" created="Wed, 21 Mar 2018 07:29:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt;, can you please release it?&lt;/p&gt;</comment>
                            <comment id="16407578" author="sseifert@pro-vision.de" created="Wed, 21 Mar 2018 08:09:14 +0000"  >&lt;p&gt;release voting is started and if all goes well the release will be available on friday&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rjbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7549] &lt;link&gt; tag is not being treated as &quot;self closing&quot; when used in conjunction with HTL block statements</title>
                <link>https://issues.apache.org/jira/browse/SLING-7549</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using HTL block statements some tags that are assumed to be &quot;self closing&quot; by browsers are not handled in that manner by the HTL engine. This can cause hard to find problems with the rendering of the page. in this example, the &lt;tt&gt;&amp;lt;link&amp;gt;&lt;/tt&gt; tag was the culprit.&#160;&lt;/p&gt;

&lt;p&gt;I was diagnosing an issue where under a certain set of circumstances all of my page&apos;s css was not being rendered. This happened to be due a &lt;tt&gt;&amp;lt;link&amp;gt;&lt;/tt&gt;&#160;tag that was not closed, but had a block statement added to it:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;link data-sly-test=&lt;span class=&quot;code-quote&quot;&gt;&quot;${metadata.prerenderUrl}&quot;&lt;/span&gt; rel=&lt;span class=&quot;code-quote&quot;&gt;&quot;prerender&quot;&lt;/span&gt; href=&lt;span class=&quot;code-quote&quot;&gt;&quot;${metadata.prerenderUrl}&quot;&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That seemingly innocuous tag caused the HTL engine to assume that all contents following, (until the the parent head closing tag), to be inside that link tag.&lt;/p&gt;

&lt;p&gt;According to the &lt;a href=&quot;https://www.w3.org/TR/2014/REC-html5-20141028/document-metadata.html#the-link-element&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;html5 spec&lt;/a&gt; the content of the &lt;tt&gt;&amp;lt;link&amp;gt;&lt;/tt&gt; element is empty. Nearly every browser in use today treats &lt;tt&gt;&amp;lt;link ...&amp;gt;&lt;/tt&gt; the same as &lt;tt&gt;&amp;lt;link .../&amp;gt;&lt;/tt&gt;. Given this, it is not a stretch to assume that HTL would treat it in the same manner.&lt;/p&gt;

&lt;p&gt;It is my belief that HTL should mimic the html5 specification. At minimum, I would hope to get a clear answer on which HTML specification it follows, or a statement that HTL does not/will not follow an HTML specification.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note&lt;/b&gt;: I was unsure if this should be something in the HTL spec or in the implementation. Since I found no reference in the specification regarding html5/xhtml/html4 compliance, I came here with my request instead. Please let me know if this is something that should be addressed at the specification level.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146446">SLING-7549</key>
            <summary>&lt;link&gt; tag is not being treated as &quot;self closing&quot; when used in conjunction with HTL block statements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="paul.bjorkstrand">Paul Bjorkstrand</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2018 03:52:32 +0000</created>
                <updated>Mon, 22 Oct 2018 13:26:53 +0000</updated>
                            <resolved>Mon, 18 Jun 2018 14:58:04 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.32</version>
                                    <fixVersion>Scripting HTL Compiler 1.0.22-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16488923" author="radu.cotescu" created="Thu, 24 May 2018 12:48:40 +0000"  >&lt;p&gt;The HTL specification doesn&apos;t mention any HTML version it supports, however the implementation&apos;s HTML parser is lenient. In this regard I think we can just add some more rules for the HTML 5 void elements.&lt;/p&gt;</comment>
                            <comment id="16488975" author="kwin" created="Thu, 24 May 2018 13:24:31 +0000"  >&lt;p&gt;I think at least all elements listed in &lt;a href=&quot;https://www.w3.org/TR/html5/syntax.html#void-elements&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/TR/html5/syntax.html#void-elements&lt;/a&gt; should be accepted without a closing tag.&lt;/p&gt;</comment>
                            <comment id="16506478" author="radu.cotescu" created="Fri, 8 Jun 2018 19:22:37 +0000"  >&lt;p&gt;Added support for void elements in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-compiler/commit/c470800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit c470800&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rj1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7548] HTL url manipulation for external link without extension</title>
                <link>https://issues.apache.org/jira/browse/SLING-7548</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For ${&apos;&lt;a href=&quot;https://www.adobe.com/fr/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.adobe.com&lt;/a&gt;&apos; @ extension =&apos;html&apos;}, the url is untouched. OK&lt;/p&gt;

&lt;p&gt;For ${&apos;&lt;a href=&quot;https://www.adobe.com/fr/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.adobe.com/fr/&lt;/a&gt;&apos; @ extension =&apos;html&apos;}, &apos;.html&apos; is added to the url. KO&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146286">SLING-7548</key>
            <summary>HTL url manipulation for external link without extension</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Pony Soeung">Pony Soeung</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2018 16:22:17 +0000</created>
                <updated>Fri, 11 Oct 2019 12:15:15 +0000</updated>
                                                                                <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16468306" author="marulanda" created="Wed, 9 May 2018 04:16:31 +0000"  >&lt;p&gt;It seems this also happens for external links with a different extension than html.&lt;/p&gt;

&lt;p&gt;For example, for &lt;b&gt;${&apos;http://www.dre.vanderbilt.edu/~schmidt/PDF/reactor-siemens.pdf&apos; @ extension =&apos;html&apos;}&lt;/b&gt; the resulting URL is &quot;&lt;a href=&quot;http://www.dre.vanderbilt.edu/~schmidt/PDF/reactor-siemens.html*&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.dre.vanderbilt.edu/~schmidt/PDF/reactor-siemens.html&lt;/a&gt;&quot; (.html instead of .pdf)&lt;/p&gt;</comment>
                            <comment id="16618789" author="jochen.bieler" created="Tue, 18 Sep 2018 09:46:56 +0000"  >&lt;p&gt;This also happens for me. Is there any estimation when this could be fixed?&lt;/p&gt;</comment>
                            <comment id="16618883" author="kwin" created="Tue, 18 Sep 2018 10:30:25 +0000"  >&lt;p&gt;The filter doesn&apos;t distinguish between absolute paths and absolute URLs (including host). The latter could in theory also point to an internal resource. Right now the extension is only added if the path part of the URL is not empty (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5632&quot; title=&quot;[Sightly] URI manipulation options that process a path should not alter URIs that don&amp;#39;t provide path information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5632&quot;&gt;&lt;del&gt;SLING-5632&lt;/del&gt;&lt;/a&gt;). Therefore in the above example you don&apos;t get the extension for &lt;tt&gt;&lt;a href=&quot;https://www.adobe.com/fr/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.adobe.com&lt;/a&gt;&lt;/tt&gt; (a URL without a part) but for the other one you do. I think this is correct behaviour. Why do you expect that only URLs not starting with a host are modified through that filter?&lt;/p&gt;</comment>
                            <comment id="16949403" author="ali.shah" created="Fri, 11 Oct 2019 12:15:15 +0000"  >&lt;p&gt;Hi Konrad!&lt;/p&gt;

&lt;p&gt;To make this request clear and to answer your question &quot;Why do you expect that only URLs not starting with a host are modified through that filter?&quot;&lt;/p&gt;

&lt;p&gt;Recently, I had a case where we are adding different icons for links on a website depending on whether external or internal as a visual help for a website visitor.&lt;/p&gt;

&lt;p&gt;Editors are adding relative paths for internal links as usual and for external link with an external domain (e.g. &lt;a href=&quot;http://www.guugle.com/dir/index.asp)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;www.guugle.com/dir/index.asp).&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In our case this filter would produce urls like this ..&lt;/p&gt;

&lt;p&gt;path: /content/siteA/page1 -&amp;gt; /content/siteA/page1.html&lt;/p&gt;

&lt;p&gt;path: /content/siteA/page2-&amp;gt; /content/siteA/page2.html&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.guugle.com/dir/index.asp)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;path: www.guugle.com/dir/index.asp&#160;&lt;/a&gt;-&amp;gt; &lt;a href=&quot;http://www.guugle.com/dir/index.htl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;www.guugle.com/dir/index.html &lt;/a&gt;(not desired)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The external link becomes here unaccessibe due to the wrong extension. We could not use the filter here, a parameter to ignore the links with domain name woud help.&lt;/p&gt;

&lt;p&gt;Yes, absolute paths with a domain can also point to internal resources. But mostly on an author instance editors while editing links would not add domain names for internal links ?!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12954755">SLING-5632</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13085223">SLING-7000</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ri1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7547] Wrong package range for resource package import</title>
                <link>https://issues.apache.org/jira/browse/SLING-7547</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the jcr bundle has a narrow&#160; &lt;span class=&quot;error&quot;&gt;&amp;#91;2.10,2.11&amp;#93;&lt;/span&gt; import range for the resource package. This is wrong as the jcr bundle can run with all versions from 2.10 upto but not including 3.&lt;/p&gt;

&lt;p&gt;The wrong calculation comes from the extra &quot;implements Resource&quot; statement in the JcrItemResource class - which can easily be removed. AbstractResource already contains it&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146175">SLING-7547</key>
            <summary>Wrong package range for resource package import</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2018 09:55:53 +0000</created>
                <updated>Thu, 22 Mar 2018 14:38:51 +0000</updated>
                            <resolved>Mon, 19 Mar 2018 09:58:28 +0000</resolved>
                                    <version>JCR Resource 3.0.8</version>
                                    <fixVersion>JCR Resource 3.0.10</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16404573" author="cziegeler" created="Mon, 19 Mar 2018 09:58:28 +0000"  >&lt;p&gt;Solved with rev 3eb2dcd&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rhdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7545] Groovy Scripting Engine not loading in Apache Sling 10</title>
                <link>https://issues.apache.org/jira/browse/SLING-7545</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the latest release of Apache Sling (10) the Groovy Scripting engine is no longer loading.&lt;/p&gt;

&lt;p&gt;The impact is that scripts with a (*.groovy) extension aren&apos;t rendering.&lt;/p&gt;

&lt;p&gt;This works with Apache Sling 9, so I believe there was a change in the Apache Sling Scripting Core that broke the Groovy implementation.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;

&lt;p&gt;Load groovy-all JAR into Apache Sling as a bundle, under the url&#160;&lt;a href=&quot;http://localhost:8080/system/console/status-slingscripting&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/status-slingscripting&lt;/a&gt;&#160;the following should display:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Groovy&#160;Scripting&#160;Engine&#160;2.0
-------------------------------------
-&#160;Language&#160;:&#160;Groovy,&#160;2.4.14
-&#160;Extensions&#160;:&#160;groovy
-&#160;MIME&#160;Types&#160;:&#160;application/x-groovy
-&#160;Names&#160;:&#160;groovy,&#160;Groovy&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This works with Apache Sling 9, not with Sling 10&lt;/p&gt;</description>
                <environment></environment>
        <key id="13145947">SLING-7545</key>
            <summary>Groovy Scripting Engine not loading in Apache Sling 10</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="fortuna">Ben Fortuna</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Mar 2018 12:06:20 +0000</created>
                <updated>Tue, 4 Dec 2018 12:28:54 +0000</updated>
                            <resolved>Tue, 20 Mar 2018 13:12:54 +0000</resolved>
                                    <version>Scripting Core 2.0.54</version>
                                    <fixVersion>Scripting Core 2.0.56</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16405599" author="fortuna" created="Mon, 19 Mar 2018 23:45:05 +0000"  >&lt;p&gt;Possibly caused by changes to sling-sciprting-core in last release (2.0.54):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7311&quot; title=&quot;The SlingScriptEngineManager doesn&amp;#39;t correctly flush script engine associations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7311&quot;&gt;&lt;del&gt;SLING-7311&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16406076" author="rombert" created="Tue, 20 Mar 2018 10:21:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fortuna&quot; class=&quot;user-hover&quot; rel=&quot;fortuna&quot;&gt;fortuna&lt;/a&gt; - does rolling back to an older version work? If it does, which is the newest version that works?&lt;/p&gt;</comment>
                            <comment id="16406192" author="bdelacretaz" created="Tue, 20 Mar 2018 11:39:42 +0000"  >&lt;p&gt;I think this commit fixes this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/7f6145e79666c49844c49e9ce0d49d7954713a88&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/7f6145e79666c49844c49e9ce0d49d7954713a88&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For some reason the &lt;tt&gt;SlingScriptEngineManager&lt;/tt&gt; was not registered as a &lt;tt&gt;BundleListener&lt;/tt&gt; anymore but that&apos;s needed to correctly handle scripting bundles like &lt;tt&gt;groovy-all.jar&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fortuna&quot; class=&quot;user-hover&quot; rel=&quot;fortuna&quot;&gt;fortuna&lt;/a&gt; could you try with this fix? You&apos;ll need to build the master branch of &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core&lt;/a&gt; for that.&lt;/p&gt;</comment>
                            <comment id="16406245" author="fortuna" created="Tue, 20 Mar 2018 12:22:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Sling 9 uses version 2.0.46, which does work.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; I&apos;ve built and installed from master branch and it works. Just had to restart the Groovy bundle after installing.&lt;/p&gt;</comment>
                            <comment id="16406299" author="bdelacretaz" created="Tue, 20 Mar 2018 13:12:54 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fortuna&quot; class=&quot;user-hover&quot; rel=&quot;fortuna&quot;&gt;fortuna&lt;/a&gt; for verfiying, marking this fixed.&lt;/p&gt;

&lt;p&gt;Digging deeper it looks like this bug has been introduced by the following commit for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7134&quot; title=&quot;Script execution order is not deterministic on Java 9 and nashorn engine is missing in java8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7134&quot;&gt;&lt;del&gt;SLING-7134&lt;/del&gt;&lt;/a&gt; - I&apos;ll add a comment there to verify that fixing this one does not cause trouble there.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/2e15bd4f230d390ceadc9481627156bb3b6caaa3#diff-502d0f72184777e3bfd2f0e1dca75eff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/commit/2e15bd4f230d390ceadc9481627156bb3b6caaa3#diff-502d0f72184777e3bfd2f0e1dca75eff&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;IIUC this means that scripting-core V 2.0.52 also has this bug.&lt;/p&gt;</comment>
                            <comment id="16406404" author="kwin" created="Tue, 20 Mar 2018 14:28:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; I don&apos;t think that a &lt;tt&gt;BundleListener&lt;/tt&gt; should be registered as a regular service (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/7f6145e79666c49844c49e9ce0d49d7954713a88/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java#L60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/7f6145e79666c49844c49e9ce0d49d7954713a88/src/main/java/org/apache/sling/scripting/core/impl/jsr223/SlingScriptEngineManager.java#L60&lt;/a&gt;) as the registration according to the Javadoc should be only done via getBundleContext().addBundleListener(); WDYT?&lt;/p&gt;</comment>
                            <comment id="16406431" author="bdelacretaz" created="Tue, 20 Mar 2018 14:46:42 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, I was wondering about that indeed, should have asked.&lt;/p&gt;

&lt;p&gt;I have removed the &lt;tt&gt;BundleListener.class&lt;/tt&gt; element of the services annotation, in commit 0339ac9&lt;/p&gt;</comment>
                            <comment id="16407784" author="bdelacretaz" created="Wed, 21 Mar 2018 11:52:45 +0000"  >&lt;p&gt;I have also added an integration test that would have exposed this regression:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/master/src/test/java/org/apache/sling/scripting/core/impl/jsr223/Jsr223ScriptEngineBundleIT.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-core/blob/master/src/test/java/org/apache/sling/scripting/core/impl/jsr223/Jsr223ScriptEngineBundleIT.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16678230" author="fortuna" created="Wed, 7 Nov 2018 13:37:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; just curious to note that the latest Sling release (V11) doesn&apos;t include the latest sling-scripting-core bundle (still using 2.0.54).&lt;/p&gt;

&lt;p&gt;Any reason why this fix wasn&apos;t included? Many thanks.&lt;/p&gt;</comment>
                            <comment id="16678289" author="rombert" created="Wed, 7 Nov 2018 14:28:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fortuna&quot; class=&quot;user-hover&quot; rel=&quot;fortuna&quot;&gt;fortuna&lt;/a&gt; - Sling 11 contains the latest version of scripting.core - there was no release done with the fixes for this bug. I&apos;ve made a note to start a release this week.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13103074">SLING-7134</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13145904">GROOVY-8513</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rfyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7542] Avoid shared session/resource resolver usage</title>
                <link>https://issues.apache.org/jira/browse/SLING-7542</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The i18n code is currently using a shared session, while all operations seem to be just reading, the session is refreshed from time to time and a refresh is actually considered a write operation.&lt;/p&gt;

&lt;p&gt;&#160;Therefore we need to change the code to not share a session/resource resolver&lt;/p&gt;</description>
                <environment></environment>
        <key id="13145617">SLING-7542</key>
            <summary>Avoid shared session/resource resolver usage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Mar 2018 08:26:25 +0000</created>
                <updated>Sun, 29 Apr 2018 21:28:43 +0000</updated>
                            <resolved>Fri, 16 Mar 2018 09:21:25 +0000</resolved>
                                    <version>i18n 2.5.12</version>
                                    <fixVersion>i18n 2.5.14</fixVersion>
                                    <component>i18n</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16401650" author="cziegeler" created="Fri, 16 Mar 2018 09:21:25 +0000"  >&lt;p&gt;Resolved in rev dc13b3c - the resource resolver is only created if needed in the change event handling&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rdxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7538] Request attributes not correctly reset after using data-sly-resource or data-sly-include with requestAttributes</title>
                <link>https://issues.apache.org/jira/browse/SLING-7538</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The option &lt;tt&gt;requestAttributes&lt;/tt&gt; introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5812&quot; title=&quot;Add option to include attributes in request scope for Sightly data-sly-resource and data-sly-include&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5812&quot;&gt;&lt;del&gt;SLING-5812&lt;/del&gt;&lt;/a&gt; does not correctly reset the request attributes after the request dispatcher returned. The reason for that is that &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/3b50f91c4f600081f0585e50dfb775c4b2856b89/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/3b50f91c4f600081f0585e50dfb775c4b2856b89/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L115&lt;/a&gt; does only reset those reset attributes which have been previously attached to the request. In fact also all attributes which have been added initially through the &lt;tt&gt;requestAttributes&lt;/tt&gt; option need to be removed as well. If you add a new request attribute to the request this new request attribute will not be removed and would still be leveraged in a subsequent call to `data-sly-resource` based on the same request (even if that one doesn&apos;t even set an option &lt;tt&gt;requestAttributes&lt;/tt&gt;).&lt;br/&gt;
The same applies to &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/3b50f91c4f600081f0585e50dfb775c4b2856b89/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/IncludeRuntimeExtension.java#L73&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/3b50f91c4f600081f0585e50dfb775c4b2856b89/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/IncludeRuntimeExtension.java#L73&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13143584">SLING-7538</key>
            <summary>Request attributes not correctly reset after using data-sly-resource or data-sly-include with requestAttributes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Mar 2018 15:35:20 +0000</created>
                <updated>Tue, 20 Mar 2018 09:27:47 +0000</updated>
                            <resolved>Tue, 20 Mar 2018 09:27:47 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.20</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16391427" author="kwin" created="Thu, 8 Mar 2018 15:53:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Can you have a look?&lt;/p&gt;</comment>
                            <comment id="16404560" author="radu.cotescu" created="Mon, 19 Mar 2018 09:48:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, I cannot fully understand what seems to be the problem. Only the attributes passed through the &lt;tt&gt;requestAttributes&lt;/tt&gt; option are supposed to be removed / brought back to their initial state.&lt;/p&gt;</comment>
                            <comment id="16404629" author="kwin" created="Mon, 19 Mar 2018 10:50:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;Only the attributes passed through the requestAttributes option are supposed to be removed / brought back to their initial state&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is unfortunately not the case. Only the attributes which have been overwritten are actually reset. &lt;/p&gt;

&lt;p&gt;Just think about the following HTL snippet&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;sly data-sly-resource=&lt;span class=&quot;code-quote&quot;&gt;&quot;${ &lt;span class=&quot;code-quote&quot;&gt;&apos;child1&apos;&lt;/span&gt; @ requestAttributes=some request attributes}&quot;&lt;/span&gt; /&amp;gt;
&amp;lt;sly data-sly-resource=&lt;span class=&quot;code-quote&quot;&gt;&quot;${ &lt;span class=&quot;code-quote&quot;&gt;&apos;child2&apos;&lt;/span&gt; }&quot;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The request attributes being set for &lt;tt&gt;child1&lt;/tt&gt; are bound to the current request and will also be used for &lt;tt&gt;child2&lt;/tt&gt; because they are not correctly reset after the first &lt;tt&gt;data-sly-resource&lt;/tt&gt;. That is a problem if child1 and child2 use the same underlying resource type and based on the request attributes they do render a bit differently. I would expect that then child2 does not see any of the request attributes set for child1 which is right now not the case.&lt;/p&gt;

&lt;p&gt;It is easy to spot the mistake in the code in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/3b50f91c4f600081f0585e50dfb775c4b2856b89/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/3b50f91c4f600081f0585e50dfb775c4b2856b89/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L115&lt;/a&gt; because only those request attributes which have been overwritten are actually being reset. But in fact all attributes should be reset (even new ones being introduced by &lt;tt&gt;requestAttributes&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="16404772" author="radu.cotescu" created="Mon, 19 Mar 2018 13:02:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, can you provide a test? The ones we have seem to already cover the scenario you describe.&lt;/p&gt;</comment>
                            <comment id="16404892" author="vladb" created="Mon, 19 Mar 2018 14:20:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, all attributes included in the &lt;tt&gt;requestAttributes&lt;/tt&gt; option are being reset, even if they were present/overwritten or new. They are being collected at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/master/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L78&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/master/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L78&lt;/a&gt; and null values are kept for the new attributes (see &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/master/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ExtensionUtils.java#L60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/master/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ExtensionUtils.java#L60&lt;/a&gt;) so they get reset at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/master/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/master/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L111&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However, we are intentionally not taking a full snapshot of existing request attributes and resetting to that, so that we allow people to set their own attributes in their code after the include (which they should also take care to cleanup when needed).&lt;/p&gt;</comment>
                            <comment id="16404967" author="kwin" created="Mon, 19 Mar 2018 15:22:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vladb&quot; class=&quot;user-hover&quot; rel=&quot;vladb&quot;&gt;vladb&lt;/a&gt; Thanks for the explanation. I can see now. I will try to investigate what the issue was then in my case and update the issue. But I guess it was related to the fact that I use the ResourceRuntimeExtension from AEM 6.3 which obviously is another code base.&lt;/p&gt;</comment>
                            <comment id="16404975" author="vladb" created="Mon, 19 Mar 2018 15:27:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, there was a regression that was fixed in &lt;a href=&quot;https://helpx.adobe.com/experience-manager/release-notes--aem-6-3-cumulative-fix-pack.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://helpx.adobe.com/experience-manager/release-notes--aem-6-3-cumulative-fix-pack.html&lt;/a&gt;, can you check if that helps?&lt;/p&gt;</comment>
                            <comment id="16406007" author="kwin" created="Tue, 20 Mar 2018 09:27:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vladb&quot; class=&quot;user-hover&quot; rel=&quot;vladb&quot;&gt;vladb&lt;/a&gt; Thanks for the info. Indeed upgrading to the latest CFP fixes this. So definitely not a Sling issue here but rather with the AEM implementation.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12983408">SLING-5812</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3r1tr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7533] plumber service user if not configured should be ignored</title>
                <link>https://issues.apache.org/jira/browse/SLING-7533</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;if no service user is defined, following error appears:&lt;/p&gt;

&lt;p&gt;28.02.2018 08:17:57.689 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;FelixStartLevel&amp;#93;&lt;/span&gt; org.apache.sling.pipes.internal.PlumberImpl unable to retrieve resolver for collecting exposed pipes&lt;br/&gt;
org.apache.sling.api.resource.LoginException: Cannot derive user name for bundle org.apache.sling.pipes &lt;span class=&quot;error&quot;&gt;&amp;#91;543&amp;#93;&lt;/span&gt; and sub service null&lt;br/&gt;
        at org.apache.sling.resourceresolver.impl.ResourceResolverFactoryImpl.getServiceResourceResolver(ResourceResolverFactoryImpl.java:86)&lt;br/&gt;
        at org.apache.sling.pipes.internal.PlumberImpl.getMonitoredPipes(PlumberImpl.java:413)&lt;br/&gt;
        at org.apache.sling.pipes.internal.PlumberImpl.refreshMonitoredPipes(PlumberImpl.java:397)&lt;br/&gt;
        at org.apache.sling.pipes.internal.PlumberImpl.activate(PlumberImpl.java:158)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13142451">SLING-7533</key>
            <summary>plumber service user if not configured should be ignored</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Mar 2018 09:09:33 +0000</created>
                <updated>Fri, 21 Sep 2018 08:02:34 +0000</updated>
                            <resolved>Mon, 5 Mar 2018 09:26:42 +0000</resolved>
                                    <version>Pipes 2.0.2</version>
                                    <fixVersion>Pipes 3.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16623224" author="npeltier" created="Fri, 21 Sep 2018 08:02:34 +0000"  >&lt;p&gt;Sling Pipes 3.0.2 is released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qutz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7529] Log message layouts are not property inherited</title>
                <link>https://issues.apache.org/jira/browse/SLING-7529</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Steps to reproduce on AEM 6.3 with Apache Sling Commons Log 5.1.2:&lt;br/&gt;
1. Create&#160;Logger Configuration for Logger &quot;my.project&quot;, log file &quot;error.log&quot;, log level &apos;Information&quot; and message pattern &quot;My project: {5}&quot;&lt;br/&gt;
2. Create an Slf4J logger for class my.project.Sample and use it to infolog message &quot;test foo&quot;&lt;br/&gt;
3. Change the configuration created in step 1 - update logger to &quot;my.project.Sample&quot;&lt;br/&gt;
4. Use the logger created in step 2 to infolog message &quot;test bar&quot;&lt;/p&gt;

&lt;p&gt;Expected result:&lt;br/&gt;
5. error.log file would contain messages &quot;My project: test foo&quot; and &quot;My project: test bar&quot;&lt;/p&gt;

&lt;p&gt;Actual result:&lt;br/&gt;
5. error.log file contains the message &quot;test foo&quot; in the format configured as the default format, but also contains the message &quot;My project: test bar&quot; - the second message, in the appropriate format.&lt;/p&gt;

&lt;p&gt;Investigation:&lt;br/&gt;
Checking the source code, I&apos;ve discovered the following in class &apos;LoggerSpecificEncoder&apos;, starting from line 47:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Layout&amp;lt;ILoggingEvent&amp;gt; getLayout(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; loggerName) {
        &lt;span class=&quot;code-comment&quot;&gt;// TODO Handle layout inheritance wrt logger names
&lt;/span&gt;        Layout&amp;lt;ILoggingEvent&amp;gt; layout = layoutByCategory.get(loggerName);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (layout == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            layout = defaultLayout;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; layout;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which means that, unless the configuration is created for the exact logger name, the default one will be used - the functionality is not broken, but simply not implemented.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13142084">SLING-7529</key>
            <summary>Log message layouts are not property inherited</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="CptBartender">Fryderyk Wysocki</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2018 11:38:50 +0000</created>
                <updated>Mon, 26 Mar 2018 13:11:39 +0000</updated>
                            <resolved>Mon, 12 Mar 2018 09:04:40 +0000</resolved>
                                    <version>Commons Log 5.1.2</version>
                                    <fixVersion>Commons Log 5.1.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16383534" author="githubbot" created="Fri, 2 Mar 2018 12:24:08 +0000"  >&lt;p&gt;CptBartender opened a new pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7529&quot; title=&quot;Log message layouts are not property inherited&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7529&quot;&gt;&lt;del&gt;SLING-7529&lt;/del&gt;&lt;/a&gt; - implemented layout inheritance in log encoder&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I&apos;ve implemented a simple method that finds the best (longest) match among the registered layouts and put it in place of the //TODO tag within the code.&lt;/p&gt;

&lt;p&gt;   I did not run the tests as these don&apos;t pass on my environment for unrelated reasons, however the class is not mentioned in any tests so I&apos;m assuming this shouldn&apos;t break existing tests.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16384714" author="githubbot" created="Sat, 3 Mar 2018 16:10:24 +0000"  >&lt;p&gt;chetanmeh commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7529&quot; title=&quot;Log message layouts are not property inherited&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7529&quot;&gt;&lt;del&gt;SLING-7529&lt;/del&gt;&lt;/a&gt; - implemented layout inheritance in log encoder&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-370158930&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-370158930&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Looks fine. Can you add a test case for the same&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16385871" author="githubbot" created="Mon, 5 Mar 2018 09:53:44 +0000"  >&lt;p&gt;CptBartender commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7529&quot; title=&quot;Log message layouts are not property inherited&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7529&quot;&gt;&lt;del&gt;SLING-7529&lt;/del&gt;&lt;/a&gt; - implemented layout inheritance in log encoder&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-370366380&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-370366380&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @chetanmeh I&apos;ve added some simple JUnit tests as well as fixed one conrnercase where loggers for similarly-named packages might end up using wrong layouts - probably wouldn&apos;t occur in AEM setup, but it theoretically can happen and thus is a bug - I&apos;ve added a test case for it as well.&lt;/p&gt;

&lt;p&gt;   If the code is ok as-is, then please let me know if it would be possible to release it soon as 5.1.3, otherwise please let me know your thoughts on the code.&lt;/p&gt;

&lt;p&gt;   Cheers&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16392622" author="githubbot" created="Fri, 9 Mar 2018 09:03:44 +0000"  >&lt;p&gt;CptBartender commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7529&quot; title=&quot;Log message layouts are not property inherited&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7529&quot;&gt;&lt;del&gt;SLING-7529&lt;/del&gt;&lt;/a&gt; - implemented layout inheritance in log encoder&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-371754265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-371754265&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @chetanmeh : any chance you could find some time to take a look at the update to this PR?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16392658" author="githubbot" created="Fri, 9 Mar 2018 09:46:02 +0000"  >&lt;p&gt;chetanmeh commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7529&quot; title=&quot;Log message layouts are not property inherited&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7529&quot;&gt;&lt;del&gt;SLING-7529&lt;/del&gt;&lt;/a&gt; - implemented layout inheritance in log encoder&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-371764459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-371764459&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @CptBartender Sorry for the delay here. Would look into this early next week&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16394932" author="githubbot" created="Mon, 12 Mar 2018 08:04:36 +0000"  >&lt;p&gt;chetanmeh commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7529&quot; title=&quot;Log message layouts are not property inherited&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7529&quot;&gt;&lt;del&gt;SLING-7529&lt;/del&gt;&lt;/a&gt; - implemented layout inheritance in log encoder&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-372222722&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-372222722&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @CptBartender Can you add license headers on the newly added files in test. Without that build fails for `mvn verfiy` in RAT check&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16394965" author="githubbot" created="Mon, 12 Mar 2018 08:57:43 +0000"  >&lt;p&gt;CptBartender commented on issue #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7529&quot; title=&quot;Log message layouts are not property inherited&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7529&quot;&gt;&lt;del&gt;SLING-7529&lt;/del&gt;&lt;/a&gt; - implemented layout inheritance in log encoder&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-372235458&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3#issuecomment-372235458&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @chetanmeh I&apos;ve added the requested headers&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16394969" author="githubbot" created="Mon, 12 Mar 2018 09:02:53 +0000"  >&lt;p&gt;chetanmeh closed pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7529&quot; title=&quot;Log message layouts are not property inherited&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7529&quot;&gt;&lt;del&gt;SLING-7529&lt;/del&gt;&lt;/a&gt; - implemented layout inheritance in log encoder&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/commons/log/logback/internal/util/LoggerSpecificEncoder.java b/src/main/java/org/apache/sling/commons/log/logback/internal/util/LoggerSpecificEncoder.java&lt;br/&gt;
index 702acf8..996a5b0 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/commons/log/logback/internal/util/LoggerSpecificEncoder.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/commons/log/logback/internal/util/LoggerSpecificEncoder.java&lt;br/&gt;
@@ -45,12 +45,24 @@ public LoggerSpecificEncoder(Layout&amp;lt;ILoggingEvent&amp;gt; defaultLayout) {&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     private Layout&amp;lt;ILoggingEvent&amp;gt; getLayout(String loggerName) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// TODO Handle layout inheritance wrt logger names&lt;/li&gt;
	&lt;li&gt;Layout&amp;lt;ILoggingEvent&amp;gt; layout = layoutByCategory.get(loggerName);&lt;/li&gt;
	&lt;li&gt;if (layout == null) 
{
-            layout = defaultLayout;
+        String bestMatchLayoutKey = getBestMatchLayoutKey(loggerName);
+        return layoutByCategory.getOrDefault(bestMatchLayoutKey, defaultLayout);
+    }
&lt;p&gt;+&lt;br/&gt;
+    private String getBestMatchLayoutKey(String loggerName) {&lt;br/&gt;
+        if (layoutByCategory.containsKey(loggerName)) &lt;/p&gt;
{
+            // fastpath for exact name match
+            return loggerName;
+        }
&lt;p&gt;+        String bestMatch = loggerName;&lt;br/&gt;
+        int bestMatchLength = 0;&lt;br/&gt;
+        for (String layoutKey : layoutByCategory.keySet()) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+            if (loggerName.startsWith(layoutKey) &amp;amp;&amp;amp; loggerName.charAt(layoutKey.length()) == &amp;#39;.&amp;#39; &amp;amp;&amp;amp; layoutKey.length() &amp;gt; bestMatchLength) {
+                bestMatch = layoutKey;
+                bestMatchLength = layoutKey.length();
+            }         }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;return layout;&lt;br/&gt;
+        return bestMatch;&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     private byte[] convertToBytes(String s) {&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/commons/log/logback/internal/util/AbstractPatternLayoutWrapper.java b/src/test/java/org/apache/sling/commons/log/logback/internal/util/AbstractPatternLayoutWrapper.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..93ed24f&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/commons/log/logback/internal/util/AbstractPatternLayoutWrapper.java&lt;br/&gt;
@@ -0,0 +1,177 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.sling.commons.log.logback.internal.util;&lt;br/&gt;
+&lt;br/&gt;
+import ch.qos.logback.classic.PatternLayout;&lt;br/&gt;
+import ch.qos.logback.classic.spi.ILoggingEvent;&lt;br/&gt;
+import ch.qos.logback.core.Context;&lt;br/&gt;
+import ch.qos.logback.core.pattern.PostCompileProcessor;&lt;br/&gt;
+import ch.qos.logback.core.status.Status;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.Map;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Abstract wrapper for &lt;/p&gt;
{@link PatternLayout} class. Can be extended to implement &apos;Decorator&apos; design pattern.&lt;br/&gt;
+ *&lt;br/&gt;
+ * @apiNote This has probably no use outside of testing&lt;br/&gt;
+ */&lt;br/&gt;
+public abstract class AbstractPatternLayoutWrapper extends PatternLayout {&lt;br/&gt;
+&lt;br/&gt;
+    protected final PatternLayout wrapped;&lt;br/&gt;
+&lt;br/&gt;
+    protected AbstractPatternLayoutWrapper(final PatternLayout wrapped) {
+        this.wrapped = wrapped;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String doLayout(final ILoggingEvent event) {
+        return wrapped.doLayout(event);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String getFileHeader() {
+        return wrapped.getFileHeader();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String getPresentationHeader() {
+        return wrapped.getPresentationHeader();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String getPresentationFooter() {
+        return wrapped.getPresentationFooter();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String getFileFooter() {
+        return wrapped.getFileFooter();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String getContentType() {
+        return wrapped.getContentType();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void setContext(final Context context) {
+        wrapped.setContext(context);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Context getContext() {
+        return wrapped.getContext();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void addStatus(final Status status) {
+        wrapped.addStatus(status);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void addInfo(final String s) {
+        wrapped.addInfo(s);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void addInfo(final String msg, final Throwable ex) {
+        wrapped.addInfo(msg, ex);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void addWarn(final String s) {
+        wrapped.addWarn(s);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void addWarn(final String msg, final Throwable ex) {
+        wrapped.addWarn(msg, ex);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void addError(final String s) {
+        wrapped.addError(s);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void addError(final String msg, final Throwable ex) {
+        wrapped.addError(msg, ex);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void start() {
+        wrapped.start();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void stop() {
+        wrapped.stop();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public boolean isStarted() {
+        return wrapped.isStarted();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Map&amp;lt;String, String&amp;gt; getDefaultConverterMap() {
+        return wrapped.getDefaultConverterMap();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Map&amp;lt;String, String&amp;gt; getEffectiveConverterMap() {
+        return wrapped.getEffectiveConverterMap();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void setPostCompileProcessor(PostCompileProcessor&amp;lt;ILoggingEvent&amp;gt; postCompileProcessor) {
+        wrapped.setPostCompileProcessor(postCompileProcessor);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String getPattern() {
+        return wrapped.getPattern();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void setPattern(String pattern) {
+        wrapped.setPattern(pattern);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public String toString() {
+        return wrapped.toString();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Map&amp;lt;String, String&amp;gt; getInstanceConverterMap() {
+        return wrapped.getInstanceConverterMap();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public boolean isOutputPatternAsHeader() {
+        return wrapped.isOutputPatternAsHeader();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void setOutputPatternAsHeader(boolean outputPatternAsHeader) {
+        wrapped.isOutputPatternAsHeader();
+    }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/commons/log/logback/internal/util/LoggerSpecificEncoderTest.java b/src/test/java/org/apache/sling/commons/log/logback/internal/util/LoggerSpecificEncoderTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..a32e406&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/commons/log/logback/internal/util/LoggerSpecificEncoderTest.java&lt;br/&gt;
@@ -0,0 +1,118 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.sling.commons.log.logback.internal.util;&lt;br/&gt;
+&lt;br/&gt;
+import ch.qos.logback.classic.PatternLayout;&lt;br/&gt;
+import ch.qos.logback.classic.spi.ILoggingEvent;&lt;br/&gt;
+import org.apache.felix.framework.util.ImmutableList;&lt;br/&gt;
+import org.apache.sling.commons.log.logback.internal.LogConfig;&lt;br/&gt;
+import org.junit.Before;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.junit.runner.RunWith;&lt;br/&gt;
+import org.mockito.Mock;&lt;br/&gt;
+import org.mockito.junit.MockitoJUnitRunner;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.HashSet;&lt;br/&gt;
+&lt;br/&gt;
+import static org.hamcrest.Matchers.equalTo;&lt;br/&gt;
+import static org.hamcrest.Matchers.is;&lt;br/&gt;
+import static org.junit.Assert.assertThat;&lt;br/&gt;
+import static org.mockito.Mockito.mock;&lt;br/&gt;
+import static org.mockito.Mockito.when;&lt;br/&gt;
+&lt;br/&gt;
+@RunWith(MockitoJUnitRunner.class)&lt;br/&gt;
+public class LoggerSpecificEncoderTest {&lt;br/&gt;
+&lt;br/&gt;
+    private LoggerSpecificEncoder tested;&lt;br/&gt;
+&lt;br/&gt;
+    @Mock&lt;br/&gt;
+    private ILoggingEvent mockTestEvent;&lt;br/&gt;
+&lt;br/&gt;
+    @Before&lt;br/&gt;
+    public void setUp() {
+        tested = new LoggerSpecificEncoder(new PrefixTestLayout(&quot;DEFAULT:&quot;));
+        when(mockTestEvent.getMessage()).thenReturn(&quot;test message&quot;);
+        when(mockTestEvent.getLoggerName()).thenReturn(&quot;org.apache.sling.testing.FooBar&quot;);
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testShouldReturnWithDefaultLayoutForNoConfigs() {
+        assertThat(tested.encode(mockTestEvent), is(equalTo(&quot;DEFAULT:test message&quot;.getBytes())));
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testShouldIgnoreNonmatchingLayoutCategories() {
+        LogConfig logConfigMock = mock(LogConfig.class);
+        when(logConfigMock.getCategories()).thenReturn(new HashSet&amp;lt;&amp;gt;(ImmutableList.newInstance(&quot;org.apache.commons&quot;, &quot;com.initech.sling&quot;)));
+        when(logConfigMock.createLayout()).thenReturn(new PrefixTestLayout(&quot;INITECH:&quot;));
+        tested.addLogConfig(logConfigMock);
+
+        assertThat(tested.encode(mockTestEvent), is(equalTo(&quot;DEFAULT:test message&quot;.getBytes())));
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testShouldIgnorePartialMatchingPackageName() {
+        LogConfig logConfigMock = mock(LogConfig.class);
+        when(logConfigMock.getCategories()).thenReturn(new HashSet&amp;lt;&amp;gt;(ImmutableList.newInstance(&quot;org.apache.sling.test&quot;)));
+        when(logConfigMock.createLayout()).thenReturn(new PrefixTestLayout(&quot;INITECH:&quot;));
+        tested.addLogConfig(logConfigMock);
+
+        assertThat(tested.encode(mockTestEvent), is(equalTo(&quot;DEFAULT:test message&quot;.getBytes())));
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testShouldUseExactMatchingCategoryLayout() {
+        LogConfig logConfigMock = mock(LogConfig.class);
+        when(logConfigMock.getCategories()).thenReturn(new HashSet&amp;lt;&amp;gt;(ImmutableList.newInstance(&quot;org.apache.sling.testing.FooBar&quot;)));
+        when(logConfigMock.createLayout()).thenReturn(new PrefixTestLayout(&quot;INITECH:&quot;));
+        tested.addLogConfig(logConfigMock);
+
+        assertThat(tested.encode(mockTestEvent), is(equalTo(&quot;INITECH:test message&quot;.getBytes())));
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testShouldUseInheritedCategoryLayout() {
+        LogConfig logConfigMock = mock(LogConfig.class);
+        when(logConfigMock.getCategories()).thenReturn(new HashSet&amp;lt;&amp;gt;(ImmutableList.newInstance(&quot;org.apache&quot;)));
+        when(logConfigMock.createLayout()).thenReturn(new PrefixTestLayout(&quot;INITECH:&quot;));
+        tested.addLogConfig(logConfigMock);
+
+        assertThat(tested.encode(mockTestEvent), is(equalTo(&quot;INITECH:test message&quot;.getBytes())));
+    }&lt;br/&gt;
+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * Simple partial implementation of {@link PatternLayout}
&lt;p&gt; that redirects all method calls that are not explicitly extended to an&lt;br/&gt;
+     * underlying mock (available as a protected &lt;/p&gt;
{@link PrefixTestLayout#wrapped}
&lt;p&gt; field).&lt;br/&gt;
+     */&lt;br/&gt;
+    private static class PrefixTestLayout extends AbstractPatternLayoutWrapper {&lt;br/&gt;
+&lt;br/&gt;
+        private final String prefix;&lt;br/&gt;
+&lt;br/&gt;
+        private PrefixTestLayout(String prefix) &lt;/p&gt;
{
+            super(mock(PatternLayout.class));
+            this.prefix = prefix;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public String doLayout(ILoggingEvent event) &lt;/p&gt;
{
+            return prefix + event.getMessage();
+        }
&lt;p&gt;+    }&lt;br/&gt;
+}&lt;br/&gt;
\ No newline at end of file&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16394971" author="chetanm" created="Mon, 12 Mar 2018 09:04:40 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=CptBartender&quot; class=&quot;user-hover&quot; rel=&quot;CptBartender&quot;&gt;CptBartender&lt;/a&gt; for the PR. Its now merged to master&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qskf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7528] org.apache.sling.jcr.webdav fails for files containing &quot;%&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-7528</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Adding (PUTting) a file with a properly escaped percent sign leads to:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;02.03.2018 10:04:10.301 *ERROR* [127.0.0.1 [1519981450286] PUT /content/dam/test/10%20100%25%20Total%20Success.mp3 HTTP/1.1] org.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught Throwable
java.lang.IllegalArgumentException: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: &quot; T&quot;
       at java.net.URLDecoder.decode(URLDecoder.java:194)
       at org.apache.sling.jcr.webdav.impl.helper.SlingTikaDetector.detect(SlingTikaDetector.java:68) [org.apache.sling.jcr.webdav:2.3.8]
       at org.apache.jackrabbit.server.io.ImportContextImpl.&amp;lt;init&amp;gt;(ImportContextImpl.java:87) [org.apache.sling.jcr.webdav:2.3.8]
       at org.apache.jackrabbit.webdav.simple.DavResourceImpl.getImportContext(DavResourceImpl.java:888) [org.apache.sling.jcr.webdav:2.3.8]
       at org.apache.jackrabbit.webdav.simple.DavResourceImpl.addMember(DavResourceImpl.java:529) [org.apache.sling.jcr.webdav:2.3.8]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because &lt;tt&gt;SlingTikaDetector&lt;/tt&gt; tries to handle a URI where actually a repository path is supplied (apart from that, the attempt to do URI parsing is very interesting...).&lt;/p&gt;

&lt;p&gt;The proper fix seems to be to just remove any attempt to deal with URIs here.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13142063">SLING-7528</key>
            <summary>org.apache.sling.jcr.webdav fails for files containing &quot;%&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2018 10:10:14 +0000</created>
                <updated>Mon, 16 Dec 2024 11:01:35 +0000</updated>
                            <resolved>Fri, 23 Mar 2018 10:59:20 +0000</resolved>
                                    <version>JCR Webdav 2.3.8</version>
                                    <fixVersion>JCR Webdav 2.3.10</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16383423" author="githubbot" created="Fri, 2 Mar 2018 10:14:18 +0000"  >&lt;p&gt;reschke opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7528&quot; title=&quot;org.apache.sling.jcr.webdav fails for files containing &amp;quot;%&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7528&quot;&gt;&lt;del&gt;SLING-7528&lt;/del&gt;&lt;/a&gt;: remove broken attempt to handle URIs&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-webdav/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-webdav/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16383424" author="reschke" created="Fri, 2 Mar 2018 10:14:45 +0000"  >&lt;p&gt;Proposed patch: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-jcr-webdav/pull/1/commits/dcc9e38799fda9f16472576a6d5628966147a7d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-jcr-webdav/pull/1/commits/dcc9e38799fda9f16472576a6d5628966147a7d8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16386306" author="rombert" created="Mon, 5 Mar 2018 16:31:50 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;. I&apos;d like to have some tests included as well, as we have none for this bundle. Can you add some for the SlingTikaDetector?&lt;/p&gt;</comment>
                            <comment id="16386310" author="reschke" created="Mon, 5 Mar 2018 16:37:33 +0000"  >&lt;p&gt;I can try, but that would just be low level unit tests based on my assertion about what &lt;b&gt;I&lt;/b&gt; think the code is supposed to do...&lt;/p&gt;</comment>
                            <comment id="16391403" author="reschke" created="Thu, 8 Mar 2018 15:35:34 +0000"  >&lt;p&gt;Looked at the module and found it doesn&apos;t have any tests. I&apos;d need some hand-holding how to get the mime type service in the test.&lt;/p&gt;</comment>
                            <comment id="16391480" author="rombert" created="Thu, 8 Mar 2018 16:27:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; - here&apos;s what I started with some time ago&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/pom.xml b/pom.xml
index f2834f1..74c2f27 100644
--- a/pom.xml
+++ b/pom.xml
@@ -177,5 +177,9 @@
             &amp;lt;version&amp;gt;2.0.8&amp;lt;/version&amp;gt;
             &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;
         &amp;lt;/dependency&amp;gt;
+        &amp;lt;dependency&amp;gt;
+            &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;
+            &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;
+        &amp;lt;/dependency&amp;gt;
     &amp;lt;/dependencies&amp;gt;
 &amp;lt;/project&amp;gt;
diff --git a/src/test/java/org/apache/sling/jcr/webdav/impl/helper/SlingTikaDetectorTest.java b/src/test/java/org/apache/sling/jcr/webdav/impl/helper/SlingTikaDetectorTest.java
new file mode 100644
index 0000000..894c667
--- /dev/null
+++ b/src/test/java/org/apache/sling/jcr/webdav/impl/helper/SlingTikaDetectorTest.java
@@ -0,0 +1,65 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * &quot;License&quot;); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+package org.apache.sling.jcr.webdav.impl.helper;
+
+import static org.junit.Assert.assertEquals;
+
+import java.io.ByteArrayInputStream;
+import java.io.IOException;
+import java.io.InputStream;
+
+import org.apache.sling.commons.mime.MimeTypeService;
+import org.apache.tika.metadata.Metadata;
+import org.apache.tika.mime.MediaType;
+import org.junit.Test;
+
+
+public class SlingTikaDetectorTest {
+
+    private static final ByteArrayInputStream EMPTY_INPUT_STREAM = new ByteArrayInputStream(new byte[0]);
+
+    @Test
+    public void noName() {
+        
+        MimeTypeService mimeTypeService = new MimeTypeService() {
+            
+            @Override
+            public void registerMimeType(String arg0, String... arg1) { }
+            
+            @Override
+            public void registerMimeType(InputStream arg0) throws IOException { // TODO Auto-generated method stub 
+            }
+            
+            @Override
+            public String getMimeType(String arg0) { // TODO Auto-generated method stub
+                return null;
+            }
+            
+            @Override
+            public String getExtension(String arg0) {
+                return null;
+            }
+        };
+        SlingTikaDetector detector = new SlingTikaDetector(mimeTypeService);
+        
+        Metadata metadata = new Metadata();
+        
+        assertEquals(MediaType.OCTET_STREAM, detector.detect(EMPTY_INPUT_STREAM, metadata));
+    }
+}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16391486" author="reschke" created="Thu, 8 Mar 2018 16:32:17 +0000"  >&lt;p&gt;Good idea. I&apos;ll start from there.&lt;/p&gt;</comment>
                            <comment id="16411217" author="rombert" created="Fri, 23 Mar 2018 10:59:20 +0000"  >&lt;p&gt;PR merged, thanks for the contribution + test &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qsfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7526] NPE in DefaultThreadPool$LoggingThreadLocalChangeListener.changed</title>
                <link>https://issues.apache.org/jira/browse/SLING-7526</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Randomly a NullPointerException is happening in &lt;em&gt;DefaultThreadPool$LoggingThreadLocalChangeListener.changed&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;sling-oak-1&quot; java.lang.NullPointerException
	at org.apache.sling.commons.threads.impl.DefaultThreadPool$LoggingThreadLocalChangeListener.changed(DefaultThreadPool.java:172)
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.changed(ThreadLocalCleaner.java:210)
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.diff(ThreadLocalCleaner.java:173)
	at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.cleanup(ThreadLocalCleaner.java:148)
	at org.apache.sling.commons.threads.impl.ThreadPoolExecutorCleaningThreadLocals.afterExecute(ThreadPoolExecutorCleaningThreadLocals.java:75)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1157)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>MacOS, jdk18&lt;br/&gt;
Linux, oracle-jdk18</environment>
        <key id="13142060">SLING-7526</key>
            <summary>NPE in DefaultThreadPool$LoggingThreadLocalChangeListener.changed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="krystian">Krystian Nowak</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2018 09:56:49 +0000</created>
                <updated>Tue, 19 Jun 2018 12:54:29 +0000</updated>
                            <resolved>Wed, 13 Jun 2018 15:00:47 +0000</resolved>
                                    <version>Commons Threads 3.2.16</version>
                                    <fixVersion>Commons Threads 3.2.18</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16383411" author="rombert" created="Fri, 2 Mar 2018 10:00:11 +0000"  >&lt;p&gt;Looking at the stack trace and the code, it seems that the listener is getting a null thread local value. There should be no impact other than&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the log entry&lt;/li&gt;
	&lt;li&gt;the thread being terminated and another one being created&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16511265" author="rombert" created="Wed, 13 Jun 2018 15:00:47 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/830c606&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-commons-threads commit 830c606&lt;/a&gt; .&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qsf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7525] Content-Type missing after applying the ContentDispositionFilter twice</title>
                <link>https://issues.apache.org/jira/browse/SLING-7525</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The issue started with&#160;the&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7219&quot; title=&quot;Add scope forward to ContentDispositionFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7219&quot;&gt;&lt;del&gt;SLING-7219&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When the &lt;tt&gt;ContentDispositionFilter&lt;/tt&gt;&#160;is called twice (as a request filter and as a forward filter) on a single request then the &lt;tt&gt;Content-Type&lt;/tt&gt;&#160;is not propagated and missing in the Response.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;On the second pass in the &lt;tt&gt;setContentType()&lt;/tt&gt;&#160;the condition &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (previousContentType != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; previousContentType.equals(type))&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will be fulfilled so&#160;the &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.setContentType(type);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will not be called.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-security/blob/master/src/main/java/org/apache/sling/security/impl/ContentDispositionFilter.java#L208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-security/blob/master/src/main/java/org/apache/sling/security/impl/ContentDispositionFilter.java#L208&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-security/blob/master/src/main/java/org/apache/sling/security/impl/ContentDispositionFilter.java#L253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-security/blob/master/src/main/java/org/apache/sling/security/impl/ContentDispositionFilter.java#L253&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13142057">SLING-7525</key>
            <summary>Content-Type missing after applying the ContentDispositionFilter twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="orlowska">Orlowska</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2018 09:54:33 +0000</created>
                <updated>Mon, 19 Mar 2018 10:14:34 +0000</updated>
                            <resolved>Wed, 14 Mar 2018 08:09:41 +0000</resolved>
                                    <version>Security 1.1.8</version>
                    <version>Security 1.1.10</version>
                                    <fixVersion>Security 1.1.12</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16396924" author="asanso" created="Tue, 13 Mar 2018 13:13:15 +0000"  >&lt;p&gt;I can reproduce. Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=orlowska&quot; class=&quot;user-hover&quot; rel=&quot;orlowska&quot;&gt;orlowska&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16398213" author="asanso" created="Wed, 14 Mar 2018 08:09:41 +0000"  >&lt;p&gt;fixed in &#160;2cd13b2..8e37dda&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qsef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7523] Java Use object with trailing whitespace in the package declaration freezes the SightlyJavaCompilerService</title>
                <link>https://issues.apache.org/jira/browse/SLING-7523</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A Java Use object with a trailing whitespace in the package declaration will freeze the &lt;tt&gt;SightlyJavaCompilerService&lt;/tt&gt;, by generating a catastrophic backtracking when attempting to match the package declaration line.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13141737">SLING-7523</key>
            <summary>Java Use object with trailing whitespace in the package declaration freezes the SightlyJavaCompilerService</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Mar 2018 09:17:06 +0000</created>
                <updated>Fri, 16 Mar 2018 09:04:12 +0000</updated>
                            <resolved>Wed, 7 Mar 2018 18:08:32 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.10</version>
                    <version>Scripting HTL Engine 1.0.20</version>
                                    <fixVersion>Scripting HTL Engine 1.0.52-1.3.1</fixVersion>
                    <fixVersion>Scripting HTL Testing 1.0.8-1.3.1</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16387916" author="radu.cotescu" created="Tue, 6 Mar 2018 15:08:52 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/afd82b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit afd82b9&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16389753" author="radu.cotescu" created="Wed, 7 Mar 2018 16:20:39 +0000"  >&lt;p&gt;I&apos;ve apparently executed the wrong tests when validating the fix and a regression slipped through.&lt;/p&gt;</comment>
                            <comment id="16389899" author="radu.cotescu" created="Wed, 7 Mar 2018 18:08:32 +0000"  >&lt;p&gt;Finally fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/e97d983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;e97d983&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qqfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7522] Scheduler bundle/package version mismatch</title>
                <link>https://issues.apache.org/jira/browse/SLING-7522</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I just tried to upgrade from scheduler 2.5.2 to 2.7.2, and it did not go smooth.&lt;/p&gt;

&lt;p&gt;First, there appears to be a new dependency on org.apache.sling.commons.metrics and io.dropwizard.metrics, which I didn&apos;t see documented anywhere, but ok.&lt;/p&gt;

&lt;p&gt;More importantly, the scheduler bundle version (and maven dependency version I specified) is 2.7.2, but the packages exported (and imported back) by the bundle is org.apache.sling.commons.scheduler;version=2.5.1. This version mismatch seems to confuse karaf, which is expecting to find 2.7.2 but doesn&apos;t, so my feature does not resolve. While there&apos;s a chance this is a bug in Karaf or there is some sort of workaround in generating the feature, the version mismatch does seem strange and a likely bug in the scheduler as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13141537">SLING-7522</key>
            <summary>Scheduler bundle/package version mismatch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="amichai">Amichai Rothman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Feb 2018 14:25:38 +0000</created>
                <updated>Thu, 1 Mar 2018 08:31:10 +0000</updated>
                            <resolved>Thu, 1 Mar 2018 05:32:03 +0000</resolved>
                                    <version>Commons Scheduler 2.7.2</version>
                                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16380394" author="cziegeler" created="Wed, 28 Feb 2018 14:43:25 +0000"  >&lt;p&gt;The new dependencies are unfortunate but also come with new features.&lt;/p&gt;

&lt;p&gt;There is no requirement for an OSGi bundle to have the bundle version and the version of the exported packages being the same. So if you have problems due to this, this is clearly not a problem of this bundle.&lt;/p&gt;

&lt;p&gt;Therefore I think we can resolve this issue&lt;/p&gt;</comment>
                            <comment id="16380532" author="olli" created="Wed, 28 Feb 2018 16:02:50 +0000"  >&lt;p&gt;Everything is fine with Commons Scheduler and Karaf, see&#160;feature &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-karaf-features/blob/master/src/main/feature/feature.xml#L115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-commons-scheduler&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  &amp;lt;feature name=&quot;sling-commons-scheduler&quot; version=&quot;${project.version}&quot;&amp;gt;
    &amp;lt;bundle&amp;gt;mvn:org.apache.sling/org.apache.sling.commons.scheduler/2.7.2&amp;lt;/bundle&amp;gt;
    &amp;lt;!-- dependencies --&amp;gt;
    &amp;lt;feature&amp;gt;scr&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&quot;${project.version}&quot;&amp;gt;sling-commons-threads&amp;lt;/feature&amp;gt;
    &amp;lt;bundle dependency=&quot;true&quot;&amp;gt;mvn:javax.servlet/javax.servlet-api/3.1.0&amp;lt;/bundle&amp;gt;
    &amp;lt;bundle dependency=&quot;true&quot;&amp;gt;mvn:org.apache.geronimo.specs/geronimo-jta_1.1_spec/1.1.1&amp;lt;/bundle&amp;gt;
    &amp;lt;bundle dependency=&quot;true&quot;&amp;gt;mvn:io.dropwizard.metrics/metrics-core/3.2.6&amp;lt;/bundle&amp;gt;
  &amp;lt;/feature&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16381166" author="amichai" created="Wed, 28 Feb 2018 22:52:54 +0000"  >&lt;p&gt;And if you also have a project bundle that depends on sling scheduler 2.7.2? Then it tries to import 2.7.2, but there&apos;s only a 2.5.1 being exported, so it fails. At least that&apos;s what happens in my scenario.&lt;/p&gt;

&lt;p&gt;Note that I don&apos;t actually use this feature you quoted, but create an application feature that includes sling scheduler among other things (using the karaf-maven-plugin to create it), and an application bundle that consumes it (using maven-bundle-plugin). Both poms specify scheduler 2.7.2, and it doesn&apos;t work. Using previous versions (2.5.2 and earlier) this setup worked fine. I suppose I can specify 2.7.2 to be added to the feature, and 2.5.x in the consuming bundle... but that&apos;s just weird.&lt;/p&gt;</comment>
                            <comment id="16381543" author="cziegeler" created="Thu, 1 Mar 2018 05:32:03 +0000"  >&lt;p&gt;This is a tooling problem on your end. bnd and all bnd based tooling does not use the bundle version to create the import but the package version, so you are either hand crafting the import or use a tool which is buggy for this&lt;/p&gt;</comment>
                            <comment id="16381646" author="amichai" created="Thu, 1 Mar 2018 07:53:47 +0000"  >&lt;p&gt;Ok, I guess it&apos;s a bug elsewhere. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qp7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7518] Deploying a new Sling bundle project from the create bundle wizard fails: Add and remove cannot both be null/empty</title>
                <link>https://issues.apache.org/jira/browse/SLING-7518</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: Add and remove cannot both be null/empty
	at org.eclipse.wst.server.core.internal.Server.canModifyModules(Server.java:2489)
	at org.eclipse.wst.server.core.internal.ServerWorkingCopy.modifyModules(ServerWorkingCopy.java:546)
	at org.apache.sling.ide.eclipse.ui.wizards.AbstractNewSlingApplicationWizard.deployProjectsOnServer(AbstractNewSlingApplicationWizard.java:190)
	at org.apache.sling.ide.eclipse.ui.wizards.AbstractNewSlingApplicationWizard$3.execute(AbstractNewSlingApplicationWizard.java:134)
	at org.eclipse.ui.actions.WorkspaceModifyOperation.lambda$0(WorkspaceModifyOperation.java:107)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2214)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2241)
	at org.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:128)
	at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:437)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:353)
	at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:980)
	at org.apache.sling.ide.eclipse.ui.wizards.AbstractNewSlingApplicationWizard.performFinish(AbstractNewSlingApplicationWizard.java:130)
	at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:778)
	at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:417)
	at org.eclipse.jface.dialogs.Dialog.lambda$0(Dialog.java:619)
	at org.eclipse.swt.events.SelectionListener$1.widgetSelected(SelectionListener.java:81)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:249)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:86)
	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5627)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1363)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4880)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4461)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:818)
	at org.eclipse.jface.window.Window.open(Window.java:794)
	at org.eclipse.ui.actions.NewProjectAction.run(NewProjectAction.java:115)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:473)
	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:565)
	at org.eclipse.jface.action.ActionContributionItem.lambda$4(ActionContributionItem.java:397)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:86)
	at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5627)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1363)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4880)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4461)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1150)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
	at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1039)
	at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:153)
	at org.eclipse.ui.internal.Workbench.lambda$3(Workbench.java:681)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:595)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:148)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:152)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:388)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:656)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:592)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1498)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1471)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13141034">SLING-7518</key>
            <summary>Deploying a new Sling bundle project from the create bundle wizard fails: Add and remove cannot both be null/empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Feb 2018 20:26:28 +0000</created>
                <updated>Wed, 9 May 2018 10:48:53 +0000</updated>
                            <resolved>Mon, 26 Feb 2018 20:55:51 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.2.2</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16377533" author="rombert" created="Mon, 26 Feb 2018 20:27:17 +0000"  >&lt;p&gt;Content projects are not affected, just tried&lt;/p&gt;</comment>
                            <comment id="16377566" author="rombert" created="Mon, 26 Feb 2018 20:55:51 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-ide-tooling/commit/d59bb679&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-ide-tooling commit d59bb679&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;Problem was that we did not properly detect projects configured with the &lt;tt&gt;bnd-maven-plugin&lt;/tt&gt; as bundle projects.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qm3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7517] Memory Leak for &quot;fake&quot; Request objects in ModelAdapterFactory with interface-based models</title>
                <link>https://issues.apache.org/jira/browse/SLING-7517</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The functionality added in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5668&quot; title=&quot;Models: Leverage ServletRequestListener.requestDestroyed for calling DisposalCallback in case the model was created from a request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5668&quot;&gt;&lt;del&gt;SLING-5668&lt;/del&gt;&lt;/a&gt; to dispose of OSGi services (or anything else needing disposal when creating a Sling Model object) based on the ServletRequest lifecycle only works if the ServletRequest object was actually created by the ServletContext. In some cases, applications make construct &quot;fake&quot; request object (primarily for use with SlingRequestProcessor). In these cases, since the&#160;ServletContext didn&apos;t create these requests, it won&apos;t call the requestDestroyed method when they are complete.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The easiest way to resolve this is to only apply the special behavior in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5668&quot; title=&quot;Models: Leverage ServletRequestListener.requestDestroyed for calling DisposalCallback in case the model was created from a request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5668&quot;&gt;&lt;del&gt;SLING-5668&lt;/del&gt;&lt;/a&gt; to request objects actually created by the ServletContext and use the&#160;general-purpose ReferenceQueue method for all other requests (and all other adaptables).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7470&quot; title=&quot;Memory Leak for &amp;quot;fake&amp;quot; Request objects in ModelAdapterFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7470&quot;&gt;&lt;del&gt;SLING-7470&lt;/del&gt;&lt;/a&gt; was incomplete and only addressed class-based models. Interface-based models were not fixed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13141018">SLING-7517</key>
            <summary>Memory Leak for &quot;fake&quot; Request objects in ModelAdapterFactory with interface-based models</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Feb 2018 19:25:06 +0000</created>
                <updated>Mon, 5 Mar 2018 12:24:07 +0000</updated>
                            <resolved>Mon, 26 Feb 2018 19:33:19 +0000</resolved>
                                    <version>Models Impl 1.4.6</version>
                                    <fixVersion>Models Impl 1.4.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16377443" author="justinedelson" created="Mon, 26 Feb 2018 19:33:19 +0000"  >&lt;p&gt;Fixed with&#160;b1ac26cfe2a6b4c6c20bbe30c5d2b3191e8bb5dc&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13135969">SLING-7470</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qm0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7516] ResourceRuntimeExtension: Selectors containing a comma are not treated correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-7516</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to the way how the request dispatcher options are serialized into one big string in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/cd7d67e66f624c66fe88dd208c4d2b8f7e85c8ec/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/blob/cd7d67e66f624c66fe88dd208c4d2b8f7e85c8ec/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/ResourceRuntimeExtension.java#L214&lt;/a&gt; you cannot use e.g. selectors which contain a comma. This is a problem because currently selectors are the only way to propagate parameters from one HTL script to another script/servlet (compare with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7515&quot; title=&quot;ResourceRuntimeExtension: Allow to pass arbitrary options a request attributes via data-sly-resource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7515&quot;&gt;SLING-7515&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The method &lt;tt&gt;createDispatcherOptions&lt;/tt&gt; generates a String from a Map where the entries are separated by &lt;tt&gt;,&lt;/tt&gt; i.e. comma. If either the map key or the map value contain a comma itself the tokenization in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/blob/ec3dcf291b26e833b07a1f9c485bbe713a7ad4d5/src/main/java/org/apache/sling/api/request/RequestDispatcherOptions.java#L100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-api/blob/ec3dcf291b26e833b07a1f9c485bbe713a7ad4d5/src/main/java/org/apache/sling/api/request/RequestDispatcherOptions.java#L100&lt;/a&gt; works incorrectly! &lt;/p&gt;

&lt;p&gt;Therefore instead of using the constructor with a string (with very simple/incorrect parsing) the &lt;tt&gt;RequestDispatcherOptions&lt;/tt&gt; should rather be created with an empty string and then the map should be filled with the according put/set methods.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13140984">SLING-7516</key>
            <summary>ResourceRuntimeExtension: Selectors containing a comma are not treated correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                            <label>patch-available</label>
                    </labels>
                <created>Mon, 26 Feb 2018 17:15:10 +0000</created>
                <updated>Fri, 6 Aug 2021 14:59:03 +0000</updated>
                            <resolved>Mon, 19 Mar 2018 12:41:39 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.48-1.3.1</version>
                                    <fixVersion>Scripting HTL Engine 1.0.54-1.4.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16377285" author="githubbot" created="Mon, 26 Feb 2018 18:02:28 +0000"  >&lt;p&gt;kwin opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7516&quot; title=&quot;ResourceRuntimeExtension: Selectors containing a comma are not treated correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7516&quot;&gt;&lt;del&gt;SLING-7516&lt;/del&gt;&lt;/a&gt; support comma in selectors for data-sly-resource&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16404627" author="radu.cotescu" created="Mon, 19 Mar 2018 10:48:40 +0000"  >&lt;p&gt;There are some errors in the PR related to how the &lt;tt&gt;RequestDispatcherOptions&lt;/tt&gt; are created:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cd org-apache-sling-scripting-sightly-testing
mvncv -Pstable
[...]
Running org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT
Tests run: 28, Failures: 0, Errors: 4, Skipped: 0, Time elapsed: 12.406 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT
testDataSlyResourceResolution(org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT)  Time elapsed: 0.255 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
io.sightly.tck.http.ClientException: Received status code 500, expected 200 - url http://localhost:65500//sightly/resource.html
	at org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT.testDataSlyResourceResolution(SlingSpecificsSightlyIT.java:133)

testRequestAttributes(org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT)  Time elapsed: 0.151 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
io.sightly.tck.http.ClientException: Received status code 500, expected 200 - url http://localhost:65500//sightly/requestattributes.html
	at org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT.testRequestAttributes(SlingSpecificsSightlyIT.java:312)

testDataSlyResourceArraySelectors(org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT)  Time elapsed: 0.204 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
io.sightly.tck.http.ClientException: Received status code 500, expected 200 - url http://localhost:65500//sightly/resource.html
	at org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT.testDataSlyResourceArraySelectors(SlingSpecificsSightlyIT.java:118)

actualResource(org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT)  Time elapsed: 0.121 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
io.sightly.tck.http.ClientException: Received status code 500, expected 200 - url http://localhost:65500//sightly/actualresource.html
	at org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT.actualResource(SlingSpecificsSightlyIT.java:301)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m correcting them and pushing a new commit to the branch.&lt;/p&gt;</comment>
                            <comment id="16404741" author="githubbot" created="Mon, 19 Mar 2018 12:39:08 +0000"  >&lt;p&gt;raducotescu closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7516&quot; title=&quot;ResourceRuntimeExtension: Selectors containing a comma are not treated correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7516&quot;&gt;&lt;del&gt;SLING-7516&lt;/del&gt;&lt;/a&gt; support comma in selectors for data-sly-resource&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16404747" author="radu.cotescu" created="Mon, 19 Mar 2018 12:41:39 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly/commit/36bbbc1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit 36bbbc1&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13140981">SLING-7515</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13393907">SLING-10707</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qlsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7513] VltUtils#createFilter adds an empty property filter when no filter is configured </title>
                <link>https://issues.apache.org/jira/browse/SLING-7513</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="13140860">SLING-7513</key>
            <summary>VltUtils#createFilter adds an empty property filter when no filter is configured </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Feb 2018 08:41:17 +0000</created>
                <updated>Thu, 13 Sep 2018 14:43:57 +0000</updated>
                                            <version>Content Distribution Core 0.2.10</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ql27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7508] StackOverflowError adapting ServletResource to Sling Model with impl picker</title>
                <link>https://issues.apache.org/jira/browse/SLING-7508</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Adapting a &lt;tt&gt;SlingHttpServletRequest&lt;/tt&gt; to a servlet that is registered using sling.servlet.paths to a &lt;tt&gt;@Model&lt;/tt&gt; fails in the following StackOverflowError:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.StackOverflowError: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        ...
        at org.apache.sling.models.impl.AdapterImplementations.getModelClassForResource(AdapterImplementations.java:318)
        at org.apache.sling.models.impl.AdapterImplementations.getModelClassForResource(AdapterImplementations.java:322)
        at org.apache.sling.models.impl.AdapterImplementations.getModelClassForResource(AdapterImplementations.java:322)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See for example the following pseudo code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@SlingServlet(paths = &lt;span class=&quot;code-quote&quot;&gt;&quot;/apps/mypath&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyServlet &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; SlingSafeMethodsServlet {
 doGet(request) { request.adaptTo(Model.class); }
}

&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Model {
 ...
}

@Model(adaptables = SlingHttpServletRequest.class, adapters = {ModelImpl.class, Model.class})
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ModelImpl &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Model {
 ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See the example here: &lt;a href=&quot;https://github.com/Buuhuu/sling-org-apache-sling-models-integration-tests/commit/db174f7a8d43432e4445f4e0aa90487827f66f72&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Buuhuu/sling-org-apache-sling-models-integration-tests/commit/db174f7a8d43432e4445f4e0aa90487827f66f72&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13139991">SLING-7508</key>
            <summary>StackOverflowError adapting ServletResource to Sling Model with impl picker</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Feb 2018 19:38:32 +0000</created>
                <updated>Mon, 5 Mar 2018 12:24:06 +0000</updated>
                            <resolved>Mon, 26 Feb 2018 21:26:54 +0000</resolved>
                                    <version>Models Impl 1.4.2</version>
                                    <fixVersion>Models Impl 1.4.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16371918" author="diru" created="Wed, 21 Feb 2018 19:52:05 +0000"  >&lt;p&gt;As far as I can see the issue is caused by the &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/blob/master/src/main/java/org/apache/sling/models/impl/ResourceTypeBasedResourcePicker.java#L46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ResourceTypeBasedResourcePicker.java#L46&lt;/a&gt; calling &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/blob/master/src/main/java/org/apache/sling/models/impl/AdapterImplementations.java#L321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AdapterImplementations#getModelClassForResource()&lt;/a&gt; which walks up the resourceType hierarchy until it finds an implementation. For the SerlvetResource in that case the resourceSuperTypes are &quot;sling/bundle/resource&quot; and null, so it ends up getting the resource of the originalResourceType of the ServletResource which is again the ServletResource causing the endless loop.&lt;/p&gt;</comment>
                            <comment id="16371933" author="diru" created="Wed, 21 Feb 2018 20:08:57 +0000"  >&lt;p&gt;To reproduce use the AdaptFromServletResourceRequestIT integration test in &lt;a href=&quot;https://github.com/Buuhuu/sling-org-apache-sling-models-integration-tests/tree/SLING-7508-integration-test-for-endless-recursion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SLING-7508-integration-test-for-endless-recursion&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16371952" author="githubbot" created="Wed, 21 Feb 2018 20:24:17 +0000"  >&lt;p&gt;Buuhuu opened a new pull request #4: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7508&quot; title=&quot;StackOverflowError adapting ServletResource to Sling Model with impl picker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7508&quot;&gt;&lt;del&gt;SLING-7508&lt;/del&gt;&lt;/a&gt;: fixed endless recursion getModelClassForResource()&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/4&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   check if the resourceTypeResource differs from the resource to prevent endless recursion&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16371957" author="diru" created="Wed, 21 Feb 2018 20:25:42 +0000"  >&lt;p&gt;The smartes that came to my mind to resolve that is checking if the resourceTypeResource is not the same as the resource before stepping further into the recursion. Equality is checked based on the resources&apos; path.&lt;/p&gt;</comment>
                            <comment id="16376617" author="diru" created="Mon, 26 Feb 2018 10:07:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; thoughts?&lt;/p&gt;</comment>
                            <comment id="16377597" author="githubbot" created="Mon, 26 Feb 2018 21:25:43 +0000"  >&lt;p&gt;justinedelson closed pull request #4: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7508&quot; title=&quot;StackOverflowError adapting ServletResource to Sling Model with impl picker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7508&quot;&gt;&lt;del&gt;SLING-7508&lt;/del&gt;&lt;/a&gt;: fixed endless recursion getModelClassForResource()&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/pull/4&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/models/impl/AdapterImplementations.java b/src/main/java/org/apache/sling/models/impl/AdapterImplementations.java&lt;br/&gt;
index 3ee2fa5..8bac535 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/models/impl/AdapterImplementations.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/models/impl/AdapterImplementations.java&lt;br/&gt;
@@ -319,7 +319,11 @@ public void removeResourceTypeBindings(final Bundle bundle) {&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;br/&gt;
             Resource resourceTypeResource = resolver.getResource(originalResourceType);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return getModelClassForResource(resourceTypeResource, map);&lt;br/&gt;
+            if (resourceTypeResource != null &amp;amp;&amp;amp; !resourceTypeResource.getPath().equals(resource.getPath())) 
{
+                return getModelClassForResource(resourceTypeResource, map);
+            }
&lt;p&gt; else &lt;/p&gt;
{
+                return null;
+            }
&lt;p&gt;         }&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16377598" author="justinedelson" created="Mon, 26 Feb 2018 21:25:53 +0000"  >&lt;p&gt;sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diru&quot; class=&quot;user-hover&quot; rel=&quot;diru&quot;&gt;diru&lt;/a&gt; was on vacation. the patch looks good to me. I wanted to make sure there is a&#160;clean IT for this before merging &#8211; the IT you have is a bit complicated. PR has been merged and a new IT has been added.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16378230" author="diru" created="Tue, 27 Feb 2018 08:29:08 +0000"  >&lt;p&gt;I thought so. Thank you very much, I like the IT you wrote.&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qfpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7507] Tracker open to early which can cause a NPE.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7507</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The FilterTracker and TurboFilterTracker service tracker are opened in the constructor of the LogbackManager at a time when it isn&apos;t fully configured yet. That can lead to an NPE if there is a service found right away.&#160;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.apache.sling.commons.log.logback.internal.LogbackManager$LoggerStateContext.&amp;lt;init&amp;gt;(LogbackManager.java:733)
        at org.apache.sling.commons.log.logback.internal.LogbackManager.determineLoggerState(LogbackManager.java:663)
        at org.apache.sling.commons.log.logback.internal.FilterTracker.getAppenderMap(FilterTracker.java:173)
        at org.apache.sling.commons.log.logback.internal.FilterTracker.addingService(FilterTracker.java:67)
        at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)
        at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)
        at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)
        at org.osgi.util.tracker.AbstractTracked.trackInitial(AbstractTracked.java:183)
        at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:318)
        at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:261)
        at org.apache.sling.commons.log.logback.internal.FilterTracker.&amp;lt;init&amp;gt;(FilterTracker.java:55)
        at org.apache.sling.commons.log.logback.internal.LogbackManager.&amp;lt;init&amp;gt;(LogbackManager.java:153)
        at org.apache.sling.commons.log.logback.internal.Activator.initializeLogbackManager(Activator.java:75)
        at org.apache.sling.commons.log.logback.internal.Activator.start(Activator.java:55)
        at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697)
        at org.apache.felix.framework.Felix.activateBundle(Felix.java:2240)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13139895">SLING-7507</key>
            <summary>Tracker open to early which can cause a NPE.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Feb 2018 13:07:03 +0000</created>
                <updated>Wed, 28 Feb 2018 16:55:24 +0000</updated>
                            <resolved>Wed, 21 Feb 2018 13:37:00 +0000</resolved>
                                    <version>Commons Log 5.1.0</version>
                                    <fixVersion>Commons Log 5.1.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16371382" author="githubbot" created="Wed, 21 Feb 2018 13:09:41 +0000"  >&lt;p&gt;karlpauls opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7507&quot; title=&quot;Tracker open to early which can cause a NPE.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7507&quot;&gt;&lt;del&gt;SLING-7507&lt;/del&gt;&lt;/a&gt;: open the service tracker when the LogbackManager is inita&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/2&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;lized to prevent an NPE.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16371383" author="karlpauls" created="Wed, 21 Feb 2018 13:10:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;,&#160;the PR seems to fix it. WDYT?&lt;/p&gt;</comment>
                            <comment id="16371411" author="cziegeler" created="Wed, 21 Feb 2018 13:36:10 +0000"  >&lt;p&gt;Lgtm, thanks&lt;/p&gt;</comment>
                            <comment id="16371412" author="githubbot" created="Wed, 21 Feb 2018 13:36:13 +0000"  >&lt;p&gt;karlpauls closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7507&quot; title=&quot;Tracker open to early which can cause a NPE.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7507&quot;&gt;&lt;del&gt;SLING-7507&lt;/del&gt;&lt;/a&gt;: open the service tracker when the LogbackManager is inita&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-log/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-log/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qf4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7503] OSGi Installer Web Console: Error not exposed</title>
                <link>https://issues.apache.org/jira/browse/SLING-7503</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6176&quot; title=&quot;Installer: Persist optional error text per resource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6176&quot;&gt;&lt;del&gt;SLING-6176&lt;/del&gt;&lt;/a&gt; was supposed to expose the error string of each resource (in case one was set). Unfortunately the column is empty under certain circumstances.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13139287">SLING-7503</key>
            <summary>OSGi Installer Web Console: Error not exposed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Sun, 18 Feb 2018 09:22:32 +0000</created>
                <updated>Mon, 24 Feb 2020 18:39:00 +0000</updated>
                            <resolved>Sun, 18 Feb 2018 12:32:07 +0000</resolved>
                                    <version>Installer Console 1.0.2</version>
                                    <fixVersion>Installer Console 1.1.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16368531" author="kwin" created="Sun, 18 Feb 2018 12:31:48 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-console/commit/8081c7363ff427280e5ed6c36014b83237b75b9d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-console/commit/8081c7363ff427280e5ed6c36014b83237b75b9d&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13013792">SLING-6176</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qbdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7502] Resource Digest Calculation returns different values for the same data</title>
                <link>https://issues.apache.org/jira/browse/SLING-7502</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This causes issues that sometimes resources are internally seen as different versions of the same resource which messes up the bookkeeping of resources in the installer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13139066">SLING-7502</key>
            <summary>Resource Digest Calculation returns different values for the same data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Feb 2018 15:43:59 +0000</created>
                <updated>Mon, 27 Aug 2018 08:15:03 +0000</updated>
                            <resolved>Fri, 16 Feb 2018 16:05:57 +0000</resolved>
                                    <version>Installer Core 3.8.10</version>
                                    <fixVersion>Installer Core 3.9.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16367484" author="bosschaert" created="Fri, 16 Feb 2018 15:44:22 +0000"  >&lt;p&gt;I have a testcase and a fix for this. Will file a pull request soon.&lt;/p&gt;</comment>
                            <comment id="16367496" author="githubbot" created="Fri, 16 Feb 2018 15:51:19 +0000"  >&lt;p&gt;bosschaert opened a new pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7502&quot; title=&quot;Resource Digest Calculation returns different values for the same data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7502&quot;&gt;&lt;del&gt;SLING-7502&lt;/del&gt;&lt;/a&gt; Resource Digest Calculation returns different values for the same data&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16367501" author="githubbot" created="Fri, 16 Feb 2018 15:57:08 +0000"  >&lt;p&gt;cziegeler closed pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7502&quot; title=&quot;Resource Digest Calculation returns different values for the same data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7502&quot;&gt;&lt;del&gt;SLING-7502&lt;/del&gt;&lt;/a&gt; Resource Digest Calculation returns different values for the same data&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/installer/core/impl/FileDataStore.java b/src/main/java/org/apache/sling/installer/core/impl/FileDataStore.java&lt;br/&gt;
index f7e2990..3b5242a 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/installer/core/impl/FileDataStore.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/installer/core/impl/FileDataStore.java&lt;br/&gt;
@@ -29,6 +29,7 @@&lt;br/&gt;
 import java.io.OutputStream;&lt;br/&gt;
 import java.math.BigInteger;&lt;br/&gt;
 import java.security.MessageDigest;&lt;br/&gt;
+import java.util.Collection;&lt;br/&gt;
 import java.util.Dictionary;&lt;br/&gt;
 import java.util.Enumeration;&lt;br/&gt;
 import java.util.HashMap;&lt;br/&gt;
@@ -46,7 +47,7 @@&lt;br/&gt;
 public class FileDataStore {&lt;/p&gt;

&lt;p&gt;     private static final Logger log = LoggerFactory.getLogger(FileDataStore.class);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
     /**&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;The name of the bundle context property defining the location for the&lt;/li&gt;
	&lt;li&gt;installer files (value is &quot;sling.installer.dir&quot;).&lt;br/&gt;
@@ -159,7 +160,7 @@ public File createNewDataFile(final InputStream stream,&lt;br/&gt;
                 final CacheEntry storedDigest = this.digestCache.get(url);&lt;br/&gt;
                 if ( storedDigest != null &amp;amp;&amp;amp; storedDigest.digest.equals(digest) ) {&lt;br/&gt;
                     log.debug(&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;File {} with digest {} found, returning {}&quot;,&lt;br/&gt;
+                            &quot;File {} with digest {} found, returning {}&quot;,&lt;br/&gt;
                             url, digest, safePath(storedDigest.file));&lt;br/&gt;
                     return storedDigest.file;&lt;br/&gt;
                 }&lt;br/&gt;
@@ -280,12 +281,7 @@ public static String computeDigest(Dictionary&amp;lt;String, Object&amp;gt; data) {&lt;br/&gt;
             }&lt;br/&gt;
             for(final String key : sortedKeys) {&lt;br/&gt;
                 oos.writeObject(key);&lt;/li&gt;
	&lt;li&gt;final Object val = data.get(key);&lt;/li&gt;
	&lt;li&gt;if ( val instanceof Number ) 
{
-                    oos.writeObject(String.valueOf(val));
-                }
&lt;p&gt; else &lt;/p&gt;
{
-                    oos.writeObject(val);
-                }
&lt;p&gt;+                writeValue(data.get(key), oos);&lt;br/&gt;
             }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             oos.flush();&lt;br/&gt;
@@ -299,7 +295,21 @@ public static String computeDigest(Dictionary&amp;lt;String, Object&amp;gt; data) &lt;/p&gt;
{
             return result;
         }
&lt;p&gt;     }&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
+    private static void writeValue(final Object val, final ObjectOutputStream oos) throws IOException {&lt;br/&gt;
+        if ( val instanceof Number ) &lt;/p&gt;
{
+            writeValue(String.valueOf(val), oos);
+        }
&lt;p&gt; else if ( val instanceof Collection ) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+            for (Object o }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; else if ( val instanceof String ) &lt;/p&gt;
{
+            oos.writeUTF((String) val);
+        }
&lt;p&gt; else &lt;/p&gt;
{
+            oos.writeObject(val);
+        }
&lt;p&gt;+    }&lt;br/&gt;
+&lt;br/&gt;
     private static final String safePath(File f) &lt;/p&gt;
{
         return f == null ? null : f.getAbsolutePath();
     }
&lt;p&gt;diff --git a/src/test/java/org/apache/sling/installer/core/impl/FileDataStoreTest.java b/src/test/java/org/apache/sling/installer/core/impl/FileDataStoreTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..3c00352&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/installer/core/impl/FileDataStoreTest.java&lt;br/&gt;
@@ -0,0 +1,92 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.sling.installer.core.impl;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.ArrayList;&lt;br/&gt;
+import java.util.Dictionary;&lt;br/&gt;
+import java.util.Hashtable;&lt;br/&gt;
+import java.util.LinkedList;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertNotEquals;&lt;br/&gt;
+&lt;br/&gt;
+public class FileDataStoreTest {&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDigestFromDictionary() 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        Dictionary&amp;lt;String,Object&amp;gt; dict1 = new Hashtable&amp;lt;&amp;gt;();+        List&amp;lt;String&amp;gt; l1 = new ArrayList&amp;lt;&amp;gt;();+        l1.add(&amp;quot;x&amp;quot;);+        l1.add(&amp;quot;y&amp;quot;);+        dict1.put(&amp;quot;la&amp;quot;, l1);+        dict1.put(&amp;quot;foo&amp;quot;, new int[] {3, 2, 7});&lt;br/&gt;
+        String dig1 = FileDataStore.computeDigest(dict1);&lt;br/&gt;
+&lt;br/&gt;
+        Dictionary&amp;lt;String,Object&amp;gt; dict2 = new Hashtable&amp;lt;&amp;gt;();&lt;br/&gt;
+        List&amp;lt;String&amp;gt; l2 = new LinkedList&amp;lt;&amp;gt;();&lt;br/&gt;
+        l2.add(&quot;x&quot;);&lt;br/&gt;
+        l2.add(&quot;y&quot;);&lt;br/&gt;
+        dict2.put(&quot;la&quot;, l2);&lt;br/&gt;
+        dict2.put(&quot;foo&quot;, new int[] {3, 2, 7});+        String dig2 = FileDataStore.computeDigest(dict2);+        assertEquals(dig1, dig2);+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDigestFromDictionaryNegative1() &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        Dictionary&amp;lt;String,Object&amp;gt; dict1 = new Hashtable&amp;lt;&amp;gt;();+        List&amp;lt;String&amp;gt; l1 = new ArrayList&amp;lt;&amp;gt;();+        l1.add(&amp;quot;y&amp;quot;);+        l1.add(&amp;quot;x&amp;quot;);+        dict1.put(&amp;quot;la&amp;quot;, l1);+        dict1.put(&amp;quot;foo&amp;quot;, new int[] {3, 2, 7});&lt;br/&gt;
+        String dig1 = FileDataStore.computeDigest(dict1);&lt;br/&gt;
+&lt;br/&gt;
+        Dictionary&amp;lt;String,Object&amp;gt; dict2 = new Hashtable&amp;lt;&amp;gt;();&lt;br/&gt;
+        List&amp;lt;String&amp;gt; l2 = new LinkedList&amp;lt;&amp;gt;();&lt;br/&gt;
+        l2.add(&quot;x&quot;);&lt;br/&gt;
+        l2.add(&quot;y&quot;);&lt;br/&gt;
+        dict2.put(&quot;la&quot;, l2);&lt;br/&gt;
+        dict2.put(&quot;foo&quot;, new int[] {3, 2, 7});+        String dig2 = FileDataStore.computeDigest(dict2);+        assertNotEquals(dig1, dig2);+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testDigestFromDictionaryNegative2() &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        Dictionary&amp;lt;String,Object&amp;gt; dict1 = new Hashtable&amp;lt;&amp;gt;();+        List&amp;lt;String&amp;gt; l1 = new ArrayList&amp;lt;&amp;gt;();+        l1.add(&amp;quot;x&amp;quot;);+        l1.add(&amp;quot;y&amp;quot;);+        dict1.put(&amp;quot;la&amp;quot;, l1);+        dict1.put(&amp;quot;foo&amp;quot;, new int[] {7, 2, 3});+        String dig1 = FileDataStore.computeDigest(dict1);++        Dictionary&amp;lt;String,Object&amp;gt; dict2 = new Hashtable&amp;lt;&amp;gt;();+        List&amp;lt;String&amp;gt; l2 = new LinkedList&amp;lt;&amp;gt;();+        l2.add(&amp;quot;x&amp;quot;);+        l2.add(&amp;quot;y&amp;quot;);+        dict2.put(&amp;quot;la&amp;quot;, l2);+        dict2.put(&amp;quot;foo&amp;quot;, new int[] {3, 2, 7});+        String dig2 = FileDataStore.computeDigest(dict2);+        assertNotEquals(dig1, dig2);+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+}&lt;/p&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16367521" author="cziegeler" created="Fri, 16 Feb 2018 16:05:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s somehow strange that we never encountered this before and only in some cases&lt;/p&gt;</comment>
                            <comment id="16368605" author="kwin" created="Sun, 18 Feb 2018 17:45:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; This commit ended up after the release for 3.8.12 has been done (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/commit/ed77209775fde2809c3aaa8af9d2cc51dfcdcc7a).&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/commit/ed77209775fde2809c3aaa8af9d2cc51dfcdcc7a).&lt;/a&gt; I therefore adjusted the fix version to 3.8.14 accordingly.&lt;/p&gt;</comment>
                            <comment id="16368818" author="cziegeler" created="Mon, 19 Feb 2018 06:25:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I don&apos;t see a 3.8.12 release in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and it&apos;s not marked as released&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;http://repo1.maven.org/maven2/org/apache/sling/org.apache.sling.installer.core/&lt;/p&gt;</comment>
                            <comment id="16368820" author="kwin" created="Mon, 19 Feb 2018 06:38:03 +0000"  >&lt;p&gt;Release vote is ongoing:&#160;&lt;a href=&quot;http://apache-sling.73963.n3.nabble.com/VOTE-Release-Apache-Sling-Installer-version-3-8-12-td4081006.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-sling.73963.n3.nabble.com/VOTE-Release-Apache-Sling-Installer-version-3-8-12-td4081006.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16368867" author="rombert" created="Mon, 19 Feb 2018 08:20:39 +0000"  >&lt;p&gt;Ooops, sorry about that. Will wrap up the release shortly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qa07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7501] FilveVault 3.1.38 breaks the Sling IDE Tools &quot;Import from server...&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-7501</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Apache Jackrabbit FileVault tool is responsible for Synchronizing files in the File System with content in the JCR repository. Sadly, FileVault version 3.1.38 has a bug that serializes&#160;.content.xml&#160;file (&lt;del&gt;the one that contains the node properties&lt;/del&gt;) almost empty.&lt;/p&gt;

&lt;p&gt;Since&#160;&lt;b&gt;AEM plugin for Eclipse&lt;/b&gt;&#160;uses Sling-Ide-Tooling internally (&lt;a href=&quot;https://forums.adobe.com/external-link.jspa?url=https%3A%2F%2Fhelpx.adobe.com%2Fexperience-manager%2F6-3%2Fsites%2Fdeveloping%2Fusing%2Faem-eclipse.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AEM Developer Tools for Eclipse&lt;/a&gt;&#160;), and&#160;*Sling-Ide-tooling*uses Apache Jackrabbit FileVault tool behind the scenes (&lt;a href=&quot;https://forums.adobe.com/external-link.jspa?url=https%3A%2F%2Fgithub.com%2Fapache%2Fsling-ide-tooling%2Ftree%2Fmaster%2Fimpl-vlt%2Fsrc%2Forg%2Fapache%2Fsling%2Fide&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-ide-tooling/impl-vlt/src/org/apache/sling/ide at master -  apache/sling-ide-tooling -  GitHub&lt;/a&gt;&#160;), we end up having that same issue (&lt;del&gt;almost empty .content.xml files&lt;/del&gt;) when using AEM plugin for Eclipse.&lt;/p&gt;

&lt;p&gt;This issue is also discussed here: &lt;a href=&quot;https://forums.adobe.com/message/10181131#10181131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://forums.adobe.com/message/10181131#10181131&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Upgrading to FileVault 3.1.42 (latest) is recommended.&lt;/p&gt;</description>
                <environment>All</environment>
        <key id="13138875">SLING-7501</key>
            <summary>FilveVault 3.1.38 breaks the Sling IDE Tools &quot;Import from server...&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="atrsd">Alex Ramos</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Feb 2018 19:35:13 +0000</created>
                <updated>Wed, 9 May 2018 10:48:53 +0000</updated>
                            <resolved>Mon, 19 Feb 2018 12:25:51 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.2.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.2.2</fixVersion>
                                    <component>IDE</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16368925" author="kwin" created="Mon, 19 Feb 2018 09:34:23 +0000"  >&lt;p&gt;Can we please link the according JCRVLT Jira issue of this bug?&lt;/p&gt;</comment>
                            <comment id="16369073" author="rombert" created="Mon, 19 Feb 2018 12:25:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atrsd&quot; class=&quot;user-hover&quot; rel=&quot;atrsd&quot;&gt;atrsd&lt;/a&gt; - I&apos;ve updated the dependency to FileVault 3.1.42, it would be great to double-check that this fixes your problem. Also please link to the FileVault regression as asked by Konrad, so we can better track what caused this. Thanks!&lt;/p&gt;</comment>
                            <comment id="16369100" author="kwin" created="Mon, 19 Feb 2018 12:55:09 +0000"  >&lt;p&gt;Actually 3.1.42 suffers from some other regressions (&lt;a href=&quot;https://www.mail-archive.com/dev@jackrabbit.apache.org/msg40591.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@jackrabbit.apache.org/msg40591.html&lt;/a&gt;), therefore I would suggest we wait for 3.1.44 which should be available soon (tm, see &lt;a href=&quot;https://www.mail-archive.com/dev@jackrabbit.apache.org/msg40607.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@jackrabbit.apache.org/msg40607.html&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16369102" author="rombert" created="Mon, 19 Feb 2018 12:57:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - those regressions don&apos;t look like they will affect us. But I won&apos;t release immediately the IDE tooling so we should be able to incorporate 3.1.44 for this release.&lt;/p&gt;</comment>
                            <comment id="16369472" author="atrsd" created="Mon, 19 Feb 2018 20:08:59 +0000"  >&lt;p&gt;I&apos;ve tested with the latest 1.2.1-SNAPSHOT and I can confirm the issue is resolved. Thank you&lt;/p&gt;</comment>
                            <comment id="16369473" author="kwin" created="Mon, 19 Feb 2018 20:11:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atrsd&quot; class=&quot;user-hover&quot; rel=&quot;atrsd&quot;&gt;atrsd&lt;/a&gt; Can you please still point me to the JCRVLT issue which has been fixed in more recent releases? I could not find anything related in the release notes of either 3.1.40 (&lt;a href=&quot;https://issues.apache.org/jira/projects/JCRVLT/versions/12339160)&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/JCRVLT/versions/12339160)&lt;/a&gt; nor 3.1.42 (&lt;a href=&quot;https://issues.apache.org/jira/projects/JCRVLT/versions/12341017&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/JCRVLT/versions/12341017&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16369481" author="atrsd" created="Mon, 19 Feb 2018 20:18:22 +0000"  >&lt;p&gt;Without digging into the code and just looking at the descriptions, I think it might be &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-177&quot; title=&quot;jcr:content and its children not overwritten during installation of Simple File Aggregate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-177&quot;&gt;&lt;del&gt;JCRVLT-177&lt;/del&gt;&lt;/a&gt;. I also linked to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-255&quot; title=&quot;ImportModes act on file serialization level not on node level&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-255&quot;&gt;&lt;del&gt;JCRVLT-255&lt;/del&gt;&lt;/a&gt; as I think the fix for that should be watched.&lt;/p&gt;</comment>
                            <comment id="16369484" author="atrsd" created="Mon, 19 Feb 2018 20:26:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-197&quot; title=&quot;AggregateImpl.includesProperty fails with multiple filter roots&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-197&quot;&gt;&lt;del&gt;JCRVLT-197&lt;/del&gt;&lt;/a&gt; also is a potential culprit. My projects have multiple filter roots as described. Unfortunately the specific symptoms are not detailed out in this ticket,&#160;so I can&apos;t confirm it&apos;s &quot;the one&quot;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13073370">JCRVLT-177</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13090721">JCRVLT-197</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13125575">JCRVLT-255</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q8tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7499] ResourceResolver trims whitespace at the end of path.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7499</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a sling:alias is set for a page and contains a whitespace at the end of its name, then this is cut off by resourceResolver.map().&lt;/p&gt;

&lt;p&gt;The trimming is only performed for the trailing white-space.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13138498">SLING-7499</key>
            <summary>ResourceResolver trims whitespace at the end of path.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Feb 2018 14:14:52 +0000</created>
                <updated>Tue, 20 Feb 2018 09:50:23 +0000</updated>
                            <resolved>Wed, 14 Feb 2018 15:17:36 +0000</resolved>
                                    <version>Resource Resolver 1.5.34</version>
                                    <fixVersion>Resource Resolver 1.5.36</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16364103" author="githubbot" created="Wed, 14 Feb 2018 14:17:27 +0000"  >&lt;p&gt;karlpauls opened a new pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7499&quot; title=&quot;ResourceResolver trims whitespace at the end of path.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7499&quot;&gt;&lt;del&gt;SLING-7499&lt;/del&gt;&lt;/a&gt;: don&apos;t trim whitespace at the end of URI.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16364106" author="karlpauls" created="Wed, 14 Feb 2018 14:18:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, wdyt?&lt;/p&gt;</comment>
                            <comment id="16364186" author="cziegeler" created="Wed, 14 Feb 2018 14:56:09 +0000"  >&lt;p&gt;Looks basically good to me, two comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the initial trim() is not really needed (just to detect the delimiters) and in most cases wasted work (I don&apos;t think it matters that much though)&lt;/li&gt;
	&lt;li&gt;the new trim code only trims spaces but not whitespaces&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16364246" author="githubbot" created="Wed, 14 Feb 2018 15:16:58 +0000"  >&lt;p&gt;karlpauls closed pull request #3: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7499&quot; title=&quot;ResourceResolver trims whitespace at the end of path.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7499&quot;&gt;&lt;del&gt;SLING-7499&lt;/del&gt;&lt;/a&gt;: don&apos;t trim whitespace at the end of URI.&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-resourceresolver/pull/3&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16364247" author="karlpauls" created="Wed, 14 Feb 2018 15:17:36 +0000"  >&lt;p&gt;Thanks. I optimzed it somewhat and merged the PR.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q6i7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7496] Factory config deleted with ConfigAdmin immediately after creation</title>
                <link>https://issues.apache.org/jira/browse/SLING-7496</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In some cases when a factory configuration is created using the OSGi ConfigAdmin API, the configuration gets a call to &lt;tt&gt;delete()&lt;/tt&gt; immediately when &lt;tt&gt;update()&lt;/tt&gt; on the configuration is called.&lt;br/&gt;
&#160;&lt;/p&gt;

&lt;p&gt;The issue comes down to the fact that the factory prefix is prepended twice to the configuration at some point in the installer, which is then assigned to the resource &lt;tt&gt;entityId&lt;/tt&gt;. This mismatch causes the initial configuration to receive a delete callback as the system thinks it&apos;s no longer there.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13137907">SLING-7496</key>
            <summary>Factory config deleted with ConfigAdmin immediately after creation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Feb 2018 17:10:24 +0000</created>
                <updated>Mon, 27 Aug 2018 08:16:27 +0000</updated>
                            <resolved>Mon, 19 Feb 2018 16:29:18 +0000</resolved>
                                    <version>Installer Configuration Factory 1.1.2</version>
                                    <fixVersion>Installer Configuration Factory 1.2.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16367544" author="githubbot" created="Fri, 16 Feb 2018 16:22:28 +0000"  >&lt;p&gt;bosschaert opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7496&quot; title=&quot;Factory config deleted with ConfigAdmin immediately after creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7496&quot;&gt;&lt;del&gt;SLING-7496&lt;/del&gt;&lt;/a&gt; Factory configurations get deleted on update()&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   The factory prefix was prepended twice which caused the installer to&lt;br/&gt;
   think that the original configuration being updated was gone, which&lt;br/&gt;
   triggered a callback to Configuration.delete();&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16367545" author="githubbot" created="Fri, 16 Feb 2018 16:24:52 +0000"  >&lt;p&gt;cziegeler closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7496&quot; title=&quot;Factory config deleted with ConfigAdmin immediately after creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7496&quot;&gt;&lt;del&gt;SLING-7496&lt;/del&gt;&lt;/a&gt; Factory configurations get deleted on update()&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/pom.xml b/pom.xml&lt;br/&gt;
index c835e26..3ad5109 100644&lt;br/&gt;
&amp;#8212; a/pom.xml&lt;br/&gt;
+++ b/pom.xml&lt;br/&gt;
@@ -90,6 +90,13 @@&lt;br/&gt;
         &amp;lt;dependency&amp;gt;&lt;br/&gt;
             &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;&lt;br/&gt;
             &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
+        &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+        &amp;lt;dependency&amp;gt;&lt;br/&gt;
+            &amp;lt;groupId&amp;gt;org.mockito&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+            &amp;lt;artifactId&amp;gt;mockito-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;2.15.0&amp;lt;/version&amp;gt;&lt;br/&gt;
+            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
         &amp;lt;/dependency&amp;gt;&lt;br/&gt;
     &amp;lt;/dependencies&amp;gt;&lt;br/&gt;
 &amp;lt;/project&amp;gt;&lt;br/&gt;
diff --git a/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigTaskCreator.java b/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigTaskCreator.java&lt;br/&gt;
index afa7293..6e0845c 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigTaskCreator.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigTaskCreator.java&lt;br/&gt;
@@ -106,7 +106,7 @@ public void configurationEvent(final ConfigurationEvent event) {&lt;br/&gt;
             } else &lt;/p&gt;
{
                 pid = (event.getPid().startsWith(event.getFactoryPid() + &apos;.&apos;) ?
                         event.getPid().substring(event.getFactoryPid().length() + 1) : event.getPid());
-                id = event.getFactoryPid() + &apos;.&apos; + event.getPid();
+                id = event.getFactoryPid() + &apos;.&apos; + pid;
             }
&lt;p&gt;             if ( event.getType() == ConfigurationEvent.CM_DELETED ) {&lt;br/&gt;
                 final Coordinator.Operation op = Coordinator.SHARED.get(event.getPid(), event.getFactoryPid(), true);&lt;br/&gt;
@@ -191,22 +191,7 @@ public void configurationEvent(final ConfigurationEvent event) {&lt;br/&gt;
         final String configPid;&lt;br/&gt;
         int n = pid.indexOf(&apos;-&apos;);&lt;br/&gt;
         if (n &amp;gt; 0) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// quick check if this is an existing configuration&lt;/li&gt;
	&lt;li&gt;final String fString = pid.substring(0, n);&lt;/li&gt;
	&lt;li&gt;final String cString = pid.substring(n + 1);&lt;/li&gt;
	&lt;li&gt;boolean useExtendedPid = false;&lt;/li&gt;
	&lt;li&gt;try {&lt;/li&gt;
	&lt;li&gt;if ( ConfigUtil.getConfiguration(this.configAdmin, fString, fString + &apos;.&apos; + cString) != null ) 
{
-                    useExtendedPid = true;
-                }&lt;/li&gt;
	&lt;li&gt;} catch ( final Exception ignore) 
{
-                // ignore this
-            }&lt;/li&gt;
	&lt;li&gt;if ( useExtendedPid ) 
{
-                configPid = fString + &apos;.&apos; + cString;
-            }
&lt;p&gt; else &lt;/p&gt;
{
-                configPid = pid.substring(n + 1);
-            }
&lt;p&gt;+            configPid = pid.substring(n + 1);&lt;br/&gt;
             factoryPid = pid.substring(0, n);&lt;br/&gt;
         } else &lt;/p&gt;
{
             factoryPid = null;
diff --git a/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtil.java b/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtil.java
index 981d590..a9eba9f 100644
--- a/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtil.java
+++ b/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtil.java
@@ -193,6 +193,12 @@ private static Configuration getOrCreateConfiguration(final ConfigurationAdmin c
                         + &quot;)(&quot; + Constants.SERVICE_PID + &quot;=&quot; + encode(configPid)
                         + &quot;))&quot;);
             }
&lt;p&gt;+            if (configs == null || configs.length == 0) &lt;/p&gt;
{
+                configs = ca.listConfigurations(&quot;(&amp;amp;(&quot;
+                        + ConfigurationAdmin.SERVICE_FACTORYPID + &quot;=&quot; + encode(factoryPid)
+                        + &quot;)(&quot; + Constants.SERVICE_PID + &quot;=&quot; + encode(factoryPid + &quot;.&quot; + configPid)
+                        + &quot;))&quot;);
+            }
&lt;p&gt;             if (configs == null || configs.length == 0) {&lt;br/&gt;
                 // check for old style with alias pid&lt;br/&gt;
                 configs = ca.listConfigurations(&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtilTest.java b/src/test/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtilTest.java&lt;br/&gt;
index 7ef7ca9..2b0c9a6 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/src/test/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtilTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtilTest.java&lt;br/&gt;
@@ -18,14 +18,19 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.sling.installer.factories.configuration.impl;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-import static org.junit.Assert.assertFalse;&lt;br/&gt;
-import static org.junit.Assert.assertTrue;&lt;br/&gt;
-&lt;br/&gt;
 import java.util.Dictionary;&lt;br/&gt;
 import java.util.Enumeration;&lt;br/&gt;
 import java.util.Hashtable;&lt;/p&gt;

&lt;p&gt; import org.junit.Test;&lt;br/&gt;
+import org.mockito.Mockito;&lt;br/&gt;
+import org.osgi.service.cm.Configuration;&lt;br/&gt;
+import org.osgi.service.cm.ConfigurationAdmin;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertFalse;&lt;br/&gt;
+import static org.junit.Assert.assertNull;&lt;br/&gt;
+import static org.junit.Assert.assertSame;&lt;br/&gt;
+import static org.junit.Assert.assertTrue;&lt;/p&gt;

&lt;p&gt; public class ConfigUtilTest &lt;/p&gt;
{
 
@@ -105,4 +110,44 @@
         assertTrue(ConfigUtil.isSameData(a, b));
         assertTrue(ConfigUtil.isSameData(b, a));
     }
&lt;p&gt;+&lt;br/&gt;
+    @Test public void testGetOrCreateConfiguration() throws Exception {&lt;br/&gt;
+        Configuration c1 = Mockito.mock(Configuration.class);&lt;br/&gt;
+        Configuration c2 = Mockito.mock(Configuration.class);&lt;br/&gt;
+        ConfigurationAdmin cm = Mockito.mock(ConfigurationAdmin.class);&lt;br/&gt;
+        Mockito.when(cm.listConfigurations(&lt;br/&gt;
+                &quot;(&amp;amp;(service.factoryPid=a.b.c)(service.pid=c1))&quot;))&lt;br/&gt;
+                .thenReturn(new Configuration[] &lt;/p&gt;
{c1});&lt;br/&gt;
+        Mockito.when(cm.listConfigurations(&lt;br/&gt;
+                &quot;(&amp;amp;(service.factoryPid=a.b.c)(service.pid=a.b.c.c1))&quot;))&lt;br/&gt;
+                .thenReturn(new Configuration[] {c2});&lt;br/&gt;
+        Configuration cfg = ConfigUtil.getConfiguration(cm, &quot;a.b.c&quot;, &quot;c1&quot;);&lt;br/&gt;
+        assertSame(c1, cfg);&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test public void testGetOrCreateConfigurationFactoryPrefix() throws Exception {&lt;br/&gt;
+        Configuration c1 = Mockito.mock(Configuration.class);&lt;br/&gt;
+        Configuration c2 = Mockito.mock(Configuration.class);&lt;br/&gt;
+        ConfigurationAdmin cm = Mockito.mock(ConfigurationAdmin.class);&lt;br/&gt;
+        Mockito.when(cm.listConfigurations(&lt;br/&gt;
+                &quot;(&amp;amp;(service.factoryPid=a.b.c)(service.pid=a.b.c.c1))&quot;))&lt;br/&gt;
+                .thenReturn(new Configuration[] {c1}
&lt;p&gt;);&lt;br/&gt;
+        Mockito.when(cm.listConfigurations(&lt;br/&gt;
+                &quot;(&amp;amp;(service.factoryPid=a.b.c)(org.apache.sling.installer.osgi.factoryaliaspid=c1))&quot;))&lt;br/&gt;
+                .thenReturn(new Configuration[] &lt;/p&gt;
{c2}
&lt;p&gt;);&lt;br/&gt;
+        Configuration cfg = ConfigUtil.getConfiguration(cm, &quot;a.b.c&quot;, &quot;c1&quot;);&lt;br/&gt;
+        assertSame(c1, cfg);&lt;br/&gt;
+&lt;br/&gt;
+        assertNull(ConfigUtil.getConfiguration(cm, &quot;a.b.c&quot;, &quot;c2&quot;));&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test public void testGetOrCreateConfigurationAliasKey() throws Exception {&lt;br/&gt;
+        Configuration c1 = Mockito.mock(Configuration.class);&lt;br/&gt;
+        ConfigurationAdmin cm = Mockito.mock(ConfigurationAdmin.class);&lt;br/&gt;
+        Mockito.when(cm.listConfigurations(&lt;br/&gt;
+                &quot;(&amp;amp;(service.factoryPid=a.b.c)(org.apache.sling.installer.osgi.factoryaliaspid=c1))&quot;))&lt;br/&gt;
+                .thenReturn(new Configuration[] &lt;/p&gt;
{c1}
&lt;p&gt;);&lt;br/&gt;
+        Configuration cfg = ConfigUtil.getConfiguration(cm, &quot;a.b.c&quot;, &quot;c1&quot;);&lt;br/&gt;
+        assertSame(c1, cfg);&lt;br/&gt;
+    }&lt;br/&gt;
 }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16367550" author="cziegeler" created="Fri, 16 Feb 2018 16:35:35 +0000"  >&lt;p&gt;Thanks for your patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt; I&apos;ve applied it&lt;/p&gt;

&lt;p&gt;While it looks ok to me, we now have two failing test cases in the installer-it module:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;&#160;&#160; ConfigInstallTest.testInstallUpdateRemoveConfigFactory:370-&amp;gt;OsgiInstallerTestBase.waitForResource:607 Resource OsgiInstallerTest:/configA/ConfigInstallTest.1_1518798684784-alias2_1518798684784 not found with state IGNORED : InstallationState[active resources: [], installed resources: [group[[resource&lt;span class=&quot;error&quot;&gt;&amp;#91;entityId=config:ConfigInstallTest.1_1518798684784.alias2_1518798684784, scheme=OsgiInstallerTest, url=OsgiInstallerTest:/configA/ConfigInstallTest.1_1518798684784-alias2_1518798684784, type=config, error=null, state=INSTALLED, version=null, lastChange=1518798684794, priority=10, digest=9ee95e734039f9382ed7d4efd70b59f0&amp;#93;&lt;/span&gt;]]], untransformed resources: []]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;&#160;&#160; ConfigInstallTest.testInstallUpdateRemoveTemplateConfigFactory:403-&amp;gt;OsgiInstallerTestBase.waitForResource:607 Resource OsgiInstallerTest:/configA/ConfigInstallTest.1_1518798675679-alias2_1518798675679 not found with state IGNORED : InstallationState[active resources: [], installed resources: [group[[resource&lt;span class=&quot;error&quot;&gt;&amp;#91;entityId=config:ConfigInstallTest.1_1518798675679.alias2_1518798675679, scheme=OsgiInstallerTest, url=OsgiInstallerTest:/configA/ConfigInstallTest.1_1518798675679-alias2_1518798675679, type=config, error=null, state=INSTALLED, version=null, lastChange=1518798675690, priority=10, digest=43cce692adda50cd4af84fedfca210e4&amp;#93;&lt;/span&gt;]]], untransformed resources: []]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;It could just be that the test cases need updating, I haven&apos;t looked at them yet&lt;/p&gt;</comment>
                            <comment id="16368205" author="bosschaert" created="Sat, 17 Feb 2018 12:24:23 +0000"  >&lt;p&gt;I&apos;ll have a look at that test failure early next week. &lt;/p&gt;</comment>
                            <comment id="16369000" author="bosschaert" created="Mon, 19 Feb 2018 11:16:01 +0000"  >&lt;p&gt;Looking at this issue now...&lt;/p&gt;</comment>
                            <comment id="16369082" author="githubbot" created="Mon, 19 Feb 2018 12:30:45 +0000"  >&lt;p&gt;bosschaert opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7496&quot; title=&quot;Factory config deleted with ConfigAdmin immediately after creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7496&quot;&gt;&lt;del&gt;SLING-7496&lt;/del&gt;&lt;/a&gt; Factory config deleted with ConfigAdmin immediately after creation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/2&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   The PID alias should not have the factory pid prefix twice. This fix is&lt;br/&gt;
   needed to address the&lt;br/&gt;
   ConfigInstallTest.testInstallUpdateRemoveTemplateConfigFactory() failure&lt;br/&gt;
   that was introduced with the previous commit for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7496&quot; title=&quot;Factory config deleted with ConfigAdmin immediately after creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7496&quot;&gt;&lt;del&gt;SLING-7496&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16369093" author="bosschaert" created="Mon, 19 Feb 2018 12:39:35 +0000"  >&lt;p&gt;I created 2 pull requests to address the issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/2&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-it/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-it/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16369099" author="cziegeler" created="Mon, 19 Feb 2018 12:49:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt; Why does the test case needs that change?&lt;/p&gt;</comment>
                            <comment id="16369105" author="bosschaert" created="Mon, 19 Feb 2018 13:02:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I could be wrong but this is I think the thing that we aimed to fix in this issue in the first place. Originally, because of a mismatch in pids (that had a double factory pid prefixed) when a configuration was created, it was deleted immediately, causing the configuration resource to be assigned the IGNORED state. Since that delete is now not happening any more at the initial state, the resource stays in the INSTALLED state which seems correct... &lt;/p&gt;

&lt;p&gt;Again, I could be wrong, but this is how I understand it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16369155" author="cziegeler" created="Mon, 19 Feb 2018 14:17:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt; I just looked at what ConfigInstallTest#testInstallUpdateRemoveConfigFactory does. As the name says it installs a configuration through the installer, updates the config through CM and then removes the config through CM.&lt;/p&gt;

&lt;p&gt;Now the desired states are:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;config installed through installer. state = INSTALLED&lt;/li&gt;
	&lt;li&gt;config updated through CM - manual intervention detected, state = IGNORED&lt;/li&gt;
	&lt;li&gt;config removed through CM - manual intervention detected, reverting to the config known to the installer, state = INSTALLED&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The state needs to switch from INSTALLED to IGNORED when a configuration installed through the installer is manually changed. So I think that test case is correct&lt;/p&gt;</comment>
                            <comment id="16369245" author="bosschaert" created="Mon, 19 Feb 2018 15:44:17 +0000"  >&lt;p&gt;Thanks for the feedback &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - I guess in that case the change in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/1&lt;/a&gt; was incorrect. Maybe the best thing to do would be to back it out for the moment?&lt;/p&gt;</comment>
                            <comment id="16369276" author="bosschaert" created="Mon, 19 Feb 2018 16:19:01 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegele&quot; class=&quot;user-hover&quot; rel=&quot;cziegele&quot;&gt;cziegele&lt;/a&gt; I guess the test case was incorrect in that is wasn&apos;t waiting for the system to reach the initial INSTALLED state for the configurations. I added an extra check to the test cases, and reverted the state to IGNORED where it had this state before.&lt;/p&gt;</comment>
                            <comment id="16369277" author="githubbot" created="Mon, 19 Feb 2018 16:19:38 +0000"  >&lt;p&gt;cziegeler closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7496&quot; title=&quot;Factory config deleted with ConfigAdmin immediately after creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7496&quot;&gt;&lt;del&gt;SLING-7496&lt;/del&gt;&lt;/a&gt; Factory config deleted with ConfigAdmin immediately after creation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-factory-configuration/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/installer/factories/configuration/impl/AbstractConfigTask.java b/src/main/java/org/apache/sling/installer/factories/configuration/impl/AbstractConfigTask.java&lt;br/&gt;
index c5f4d1d..a1d628a 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/installer/factories/configuration/impl/AbstractConfigTask.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/installer/factories/configuration/impl/AbstractConfigTask.java&lt;br/&gt;
@@ -80,7 +80,12 @@ protected String getCompositeAliasPid() {&lt;br/&gt;
         if ( this.aliasPid == null || this.factoryPid == null ) &lt;/p&gt;
{
             return null;
         }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final String alias = factoryPid + &quot;.&quot; + this.aliasPid;&lt;br/&gt;
+        final String alias;&lt;br/&gt;
+        if (this.aliasPid.startsWith(this.factoryPid)) 
{
+            alias = this.aliasPid;
+        }
&lt;p&gt; else &lt;/p&gt;
{
+            alias = this.factoryPid + &quot;.&quot; + this.aliasPid;
+        }
&lt;p&gt;         final int pos = this.getResource().getEntityId().indexOf(&apos;:&apos;);&lt;br/&gt;
         if ( this.getResource().getEntityId().substring(pos + 1).equals(alias) ) {&lt;br/&gt;
             return null;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16369279" author="githubbot" created="Mon, 19 Feb 2018 16:20:51 +0000"  >&lt;p&gt;cziegeler closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7496&quot; title=&quot;Factory config deleted with ConfigAdmin immediately after creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7496&quot;&gt;&lt;del&gt;SLING-7496&lt;/del&gt;&lt;/a&gt; - Fix two failures in ConfigInstallTest&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-it/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-it/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/test/java/org/apache/sling/installer/it/ConfigInstallTest.java b/src/test/java/org/apache/sling/installer/it/ConfigInstallTest.java&lt;br/&gt;
index 6a56db0..f27c16f 100644&lt;br/&gt;
&amp;#8212; a/src/test/java/org/apache/sling/installer/it/ConfigInstallTest.java&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/installer/it/ConfigInstallTest.java&lt;br/&gt;
@@ -16,10 +16,6 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.sling.installer.it;&lt;/p&gt;

&lt;p&gt;-import static org.junit.Assert.assertEquals;&lt;br/&gt;
-import static org.junit.Assert.assertNotNull;&lt;br/&gt;
-import static org.junit.Assert.assertNull;&lt;br/&gt;
-&lt;br/&gt;
 import java.util.ArrayList;&lt;br/&gt;
 import java.util.Dictionary;&lt;br/&gt;
 import java.util.Hashtable;&lt;br/&gt;
@@ -48,6 +44,10 @@&lt;br/&gt;
 import org.osgi.util.tracker.ServiceTracker;&lt;br/&gt;
 import org.osgi.util.tracker.ServiceTrackerCustomizer;&lt;/p&gt;

&lt;p&gt;+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertNotNull;&lt;br/&gt;
+import static org.junit.Assert.assertNull;&lt;br/&gt;
+&lt;br/&gt;
 @RunWith(PaxExam.class)&lt;/p&gt;

&lt;p&gt; public class ConfigInstallTest extends OsgiInstallerTestBase implements ConfigurationListener {&lt;br/&gt;
@@ -359,6 +359,8 @@ public void testInstallUpdateRemoveConfigFactory() throws Exception {&lt;br/&gt;
                 null, cfgData, null, InstallableResource.TYPE_PROPERTIES, 10);&lt;br/&gt;
         installer.updateResources(URL_SCHEME, new InstallableResource[] &lt;/p&gt;
{rsrc}, null);&lt;br/&gt;
 &lt;br/&gt;
+        waitForResource(URL_SCHEME + &quot;:/configA/&quot; + cfgFactoryPid + &quot;-&quot; + alias, ResourceState.INSTALLED);&lt;br/&gt;
+&lt;br/&gt;
         // get factory config&lt;br/&gt;
         final Configuration cfg = waitForFactoryConfigValue(&quot;After installing&quot;, cfgFactoryPid, &quot;foo&quot;, &quot;bar&quot;);&lt;br/&gt;
 &lt;br/&gt;
@@ -392,6 +394,8 @@ public void testInstallUpdateRemoveTemplateConfigFactory() throws Exception {&lt;br/&gt;
                 null, cfgData, null, InstallableResource.TYPE_PROPERTIES, 10);&lt;br/&gt;
         installer.updateResources(URL_SCHEME, new InstallableResource[] {rsrc}
&lt;p&gt;, null);&lt;/p&gt;

&lt;p&gt;+        waitForResource(URL_SCHEME + &quot;:/configA/&quot; + cfgFactoryPid + &quot;-&quot; + alias, ResourceState.INSTALLED);&lt;br/&gt;
+&lt;br/&gt;
         // get factory config&lt;br/&gt;
         final Configuration cfg = waitForFactoryConfigValue(&quot;After installing&quot;, cfgFactoryPid, &quot;foo&quot;, &quot;bar&quot;);&lt;/p&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16369285" author="cziegeler" created="Mon, 19 Feb 2018 16:23:21 +0000"  >&lt;p&gt;Thanks for the updated patches, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bosschaert&quot; class=&quot;user-hover&quot; rel=&quot;bosschaert&quot;&gt;bosschaert&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I added a minor tweak to your patch.&lt;/p&gt;

&lt;p&gt;All tests pass now&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q2uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7492] Lots of logs on missing SlingRequestProgressTracker</title>
                <link>https://issues.apache.org/jira/browse/SLING-7492</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Constructing a fully correct request that implements HttpServletRequest means that it won&apos;t have an attribute of SlingRequestProgressTracker. There is no chance to instantiate it.&#160;&lt;br/&gt;
 When developer invokes method processRequest from SlingRequestProcessor using mentioned, created request it writes lots of warnings in logs.&lt;br/&gt;
 That&apos;s because constructor of org.apache.sling.engine.impl.request.RequestData contains given lines:&#160;&lt;/p&gt;

&lt;p&gt;Object o = request.getAttribute(RequestProgressTracker.class.getName());&lt;br/&gt;
 if(o instanceof SlingRequestProgressTracker)&lt;/p&gt;

{ &#160; &#160; this.requestProgressTracker = (SlingRequestProgressTracker)o; }

&lt;p&gt;else&lt;/p&gt;

{ &#160; &#160; this.log.warn(&quot;SlingRequestProgressTracker not found in request attributes&quot;); &#160; &#160; this.requestProgressTracker = new SlingRequestProgressTracker(request); }

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Create new class, let&apos;s call it MockRequest, that implements HttpServletRequest.&lt;/li&gt;
	&lt;li&gt;Create an object of MockRequest.&lt;/li&gt;
	&lt;li&gt;Instantiate or inject an object of SlingRequestProcessor.&lt;/li&gt;
	&lt;li&gt;On SlingRequestProcessor object invoke method processRequest(), where, as a request parameter, provide a MockRequest object.&lt;/li&gt;
	&lt;li&gt;Check logs. You will see lot&apos;s of warnings like given one:&lt;br/&gt;
 26.01.2018 01:25:48.607 &lt;b&gt;WARN&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-331-thread-3&amp;#93;&lt;/span&gt; org.apache.sling.engine.impl.request.RequestData SlingRequestProgressTracker not found in request attributes&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Expected:&#160;warnings does not appear in logs or there is a way to avoid them.&lt;/p&gt;</description>
                <environment>Using Adobe Experience Manager</environment>
        <key id="13137791">SLING-7492</key>
            <summary>Lots of logs on missing SlingRequestProgressTracker</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="tomasz.dzumaga">Tomasz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Feb 2018 08:02:02 +0000</created>
                <updated>Fri, 1 Apr 2022 10:29:03 +0000</updated>
                            <resolved>Tue, 29 Mar 2022 05:32:53 +0000</resolved>
                                    <version>Engine 2.6.6</version>
                                    <fixVersion>Engine 2.9.0</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17499016" author="casalino@adobe.com" created="Mon, 28 Feb 2022 16:36:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomasz.dzumaga&quot; class=&quot;user-hover&quot; rel=&quot;tomasz.dzumaga&quot;&gt;tomasz.dzumaga&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=petitbear68&quot; class=&quot;user-hover&quot; rel=&quot;petitbear68&quot;&gt;petitbear68&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Can we please get someone to prioritize this? &lt;/p&gt;

&lt;p&gt;(edit by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;: redacted)&lt;/p&gt;</comment>
                            <comment id="17499190" author="rombert" created="Mon, 28 Feb 2022 21:39:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=casalino%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;casalino@adobe.com&quot;&gt;casalino@adobe.com&lt;/a&gt; - I redacted your comment as it contained some details that are not relevant to a public Jira.&lt;/p&gt;

&lt;p&gt;As this issue has been reported four years ago and no progress has been made, I&apos;d wager that the best way forward would be for someone to step up with a patch.&lt;/p&gt;</comment>
                            <comment id="17499193" author="casalino@adobe.com" created="Mon, 28 Feb 2022 21:53:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; ! I&apos;ll see if one of our engineers can address and submit a PR.&lt;/p&gt;</comment>
                            <comment id="17499621" author="casalino@adobe.com" created="Tue, 1 Mar 2022 15:55:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&#160; Our engineers have created a patch for this. Could you please merge it into SLING? What&apos;s the next step to get this promoted into the next AEM 6.5 service pack?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-engine/pull/22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-engine/pull/22&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17499628" author="rombert" created="Tue, 1 Mar 2022 16:03:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=casalino%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;casalino@adobe.com&quot;&gt;casalino@adobe.com&lt;/a&gt; - thanks, I replied to the PR, this will need a bit of discussion. About the AEM 6.5 service pack, I have no idea &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I would guess you need to find the right team within Adobe and ask them about this.&lt;/p&gt;

&lt;p&gt;We don&apos;t have any idea about AEM decisions and schedules in the Apache Sling open source project &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17505408" author="cziegeler" created="Sun, 13 Mar 2022 08:34:42 +0000"  >&lt;p&gt;I haven&apos;t really looked into the details why we choose to use the request attribute to propagate the tracker; reducing the log level to debug sounds reasonable, however, I have the feeling that we need to improve the code to also handle building custom request objects using the builder ( &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-api/tree/master/src/main/java/org/apache/sling/api/request/builder&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-api/tree/master/src/main/java/org/apache/sling/api/request/builder&lt;/a&gt; ) as that one allows to set a request progress tracker which then seems to be ignored here.&lt;/p&gt;</comment>
                            <comment id="17506826" author="cziegeler" created="Tue, 15 Mar 2022 10:09:24 +0000"  >&lt;p&gt;Looking deeper into the code, I think logging this situation as a &quot;warn&quot; is actually a good thing as this indicates a wrongly setup request object. However, for custom code it is not possible to create an object of type SlingRequestProgressTracker as this is a (private) implementation class.&lt;br/&gt;
I changed the code to just check for the interface: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-engine/commit/529802e2d538111336c60d98b35d16f2b9b3e51f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-engine/commit/529802e2d538111336c60d98b35d16f2b9b3e51f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17507235" author="casalino@adobe.com" created="Tue, 15 Mar 2022 21:19:25 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;. I will follow up within Adobe to get the fix integrated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3q253:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7482] MockSlingHttpServletResponse.getHeaders is case sensitive</title>
                <link>https://issues.apache.org/jira/browse/SLING-7482</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A call to&#160;org.apache.sling.servlethelpers.MockSlingHttpServletResponse.getHeaders is case sensitive wrt. the header name. This contradicts the HTTP protocol, which specifies them as case-insensitive.&lt;/p&gt;

&lt;p&gt;The root of this is that org.apache.sling.servlethelpers.HeaderSupport.getHeaders uses equals instead of equalsIgnoreCase: see &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/extensions/servlet-helpers/src/main/java/org/apache/sling/servlethelpers/HeaderSupport.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/extensions/servlet-helpers/src/main/java/org/apache/sling/servlethelpers/HeaderSupport.java&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13137098">SLING-7482</key>
            <summary>MockSlingHttpServletResponse.getHeaders is case sensitive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="hanspeterstoerr">Hans-Peter Stoerr</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Feb 2018 09:00:48 +0000</created>
                <updated>Thu, 1 Mar 2018 14:49:41 +0000</updated>
                            <resolved>Wed, 14 Feb 2018 16:07:18 +0000</resolved>
                                    <version>Servlet Helpers 1.1.0</version>
                                    <fixVersion>Servlet Helpers 1.1.4</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="16364337" author="sseifert@pro-vision.de" created="Wed, 14 Feb 2018 16:07:18 +0000"  >&lt;p&gt;fixed: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlet-helpers/commit/60969dd4588cc63f7c8583cba72b26b69a64d8ae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlet-helpers/commit/60969dd4588cc63f7c8583cba72b26b69a64d8ae&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pxv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7476] Exceptions should be logged correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-7476</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when filtering a source that is larger than 200k, the xss api fails with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: Unable to scan input

	at org.apache.sling.xss.impl.HtmlToHtmlContentContext.filter(HtmlToHtmlContentContext.java:73)
	at org.apache.sling.xss.impl.XSSFilterImpl.filter(XSSFilterImpl.java:190)
	at org.apache.sling.xss.impl.XSSFilterImpl.filter(XSSFilterImpl.java:123)
	at org.apache.sling.xss.impl.XSSAPIImpl.filterHTML(XSSAPIImpl.java:466)
	at org.apache.sling.xss.impl.XSSAPIImplTest.testFilterLargeHTML(XSSAPIImplTest.java:223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testFilterLargeHTML() {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; SIZE = 210000;
        StringBuilder b = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringBuilder(SIZE);
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (b.length() &amp;lt; SIZE) {
            b.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec at enim et dui egestas accumsan amet.&quot;&lt;/span&gt;);
        }
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; source = b.toString();
        TestCase.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Filtering large source&quot;&lt;/span&gt;, source, xssAPI.filterHTML(source));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13136771">SLING-7476</key>
            <summary>Exceptions should be logged correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="tripod">Tobias Bocanegra</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Feb 2018 08:01:53 +0000</created>
                <updated>Fri, 3 Aug 2018 12:59:45 +0000</updated>
                            <resolved>Wed, 7 Mar 2018 14:12:01 +0000</resolved>
                                    <version>XSS Protection API 2.0.4</version>
                                    <fixVersion>XSS Protection API 2.0.6</fixVersion>
                                    <component>XSS Protection API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16355516" author="rombert" created="Wed, 7 Feb 2018 14:29:16 +0000"  >&lt;p&gt;This is a configuration issue. 200,000 bytes is the default size, as defined in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/blob/4c118bd1457e1f9f7a04e965eadcf2b4494cee4c/src/main/resources/SLING-INF/content/config.xml#L27&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-xss/blob/4c118bd1457e1f9f7a04e965eadcf2b4494cee4c/src/main/resources/SLING-INF/content/config.xml#L27&lt;/a&gt; . Changing the value to 300,000 makes the test pass, so there isn&apos;t really anything to change in the code here.&lt;/p&gt;</comment>
                            <comment id="16355621" author="tripod" created="Wed, 7 Feb 2018 15:53:22 +0000"  >&lt;p&gt;well, this is a limitation of the underlying library, which can&apos;t be configured via OSGi config.&lt;br/&gt;
I&apos;m ok with that, since it&apos;s insane to have such long strings &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;but the error is a bit misleading. I would expect:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;either an IllegalArgumentException that explains why it fails&lt;/li&gt;
	&lt;li&gt;or better, the text being truncated to the limit.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="16355626" author="rombert" created="Wed, 7 Feb 2018 15:56:40 +0000"  >&lt;p&gt;The exception is swallowed in &lt;tt&gt;HtmlToHtmlContentContext&lt;/tt&gt; but I&apos;m not familiar enough with the codebase to make an informed decision about this.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; - WDYT about including the original error message?&lt;/p&gt;</comment>
                            <comment id="16356907" author="radu.cotescu" created="Thu, 8 Feb 2018 12:56:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, it was probably a thing we missed doing before donating the code to Sling. Of course all exceptions should be properly logged. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16358267" author="githubbot" created="Fri, 9 Feb 2018 11:12:39 +0000"  >&lt;p&gt;raducotescu opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7476&quot; title=&quot;Exceptions should be logged correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7476&quot;&gt;&lt;del&gt;SLING-7476&lt;/del&gt;&lt;/a&gt; - Exceptions should be logged correctly&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-xss/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;made sure all exceptions are logged&lt;/li&gt;
	&lt;li&gt;added more detailed information about failures in debug messages&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16358269" author="radu.cotescu" created="Fri, 9 Feb 2018 11:13:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; - anything against the patch from the PR?&lt;/p&gt;</comment>
                            <comment id="16389551" author="githubbot" created="Wed, 7 Mar 2018 13:32:13 +0000"  >&lt;p&gt;raducotescu closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7476&quot; title=&quot;Exceptions should be logged correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7476&quot;&gt;&lt;del&gt;SLING-7476&lt;/del&gt;&lt;/a&gt; - Exceptions should be logged correctly&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-xss/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16389596" author="radu.cotescu" created="Wed, 7 Mar 2018 14:12:01 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-xss/commit/a22e1f3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit a22e1f3&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13176701">SLING-7801</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pvuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7474] Please use HTTPS for sigs and hashes</title>
                <link>https://issues.apache.org/jira/browse/SLING-7474</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Please use HTTPS for links to hashes and sigs on the download page.&lt;/p&gt;

&lt;p&gt;Also, the KEYS file must be linked from &lt;a href=&quot;https://www.apache.org/dist/sling/KEYS&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/dist/sling/KEYS&lt;/a&gt;&lt;br/&gt;
and NOT&lt;br/&gt;
&lt;a href=&quot;https://people.apache.org/keys/group/sling.asc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://people.apache.org/keys/group/sling.asc&lt;/a&gt;&lt;br/&gt;
which is unsuitable for the reasons noted here:&lt;br/&gt;
&lt;a href=&quot;https://people.apache.org/keys/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://people.apache.org/keys/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</description>
                <environment></environment>
        <key id="13136595">SLING-7474</key>
            <summary>Please use HTTPS for sigs and hashes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Feb 2018 15:37:22 +0000</created>
                <updated>Wed, 7 Feb 2018 11:32:20 +0000</updated>
                            <resolved>Wed, 7 Feb 2018 10:06:35 +0000</resolved>
                                                                    <component>Site</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16354022" author="sebb@apache.org" created="Tue, 6 Feb 2018 15:41:08 +0000"  >&lt;p&gt;Also it would be helpful to explain to downloaders how to verify releases.&lt;br/&gt;
Or at least point to documentation that explains how.&lt;/p&gt;</comment>
                            <comment id="16355246" author="bdelacretaz" created="Wed, 7 Feb 2018 10:06:35 +0000"  >&lt;p&gt;Thanks Sebb, good points! I have made the https and KEYS changes at &lt;a href=&quot;http://sling.apache.org/downloads.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/downloads.cgi&lt;/a&gt; and created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7477&quot; title=&quot;Downloads page should explain how to verify releases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7477&quot;&gt;&lt;del&gt;SLING-7477&lt;/del&gt;&lt;/a&gt; for explaining the verification.&lt;/p&gt;</comment>
                            <comment id="16355312" author="sebb@apache.org" created="Wed, 7 Feb 2018 11:01:14 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;P.S. Next time the page is updated, you might want to update the copyright from 2017.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Or change the page generator to use the current year?&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16355334" author="bdelacretaz" created="Wed, 7 Feb 2018 11:32:20 +0000"  >&lt;p&gt;Thanks, I fixed the copyright dates as well. It&apos;s the kind of thing that you don&apos;t notice anymore after some time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3purj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7471] Pricing information for subscription is incorrect. Shows $infinity / month.</title>
                <link>https://issues.apache.org/jira/browse/SLING-7471</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Pricing information is incorrect. Please check screenshot&lt;/p&gt;</description>
                <environment>Mac OS EL Capitan. Chrome v 63.0.3239.132.</environment>
        <key id="13136161">SLING-7471</key>
            <summary>Pricing information for subscription is incorrect. Shows $infinity / month.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gvivekcbe">Vivek Gokuladas</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Feb 2018 22:19:32 +0000</created>
                <updated>Mon, 5 Feb 2018 10:17:15 +0000</updated>
                            <resolved>Mon, 5 Feb 2018 10:17:15 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16351908" author="bdelacretaz" created="Sun, 4 Feb 2018 22:26:13 +0000"  >&lt;p&gt;This doesn&apos;t look like an Apache Sling issue.&lt;/p&gt;</comment>
                            <comment id="16352209" author="rombert" created="Mon, 5 Feb 2018 10:17:15 +0000"  >&lt;p&gt;Not an Apache Sling issue, as Bertrand mentioned &#8594; invalid.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12909164" name="Screen Shot 2018-02-04 at 2.24.10 PM.png" size="55095" author="gvivekcbe" created="Sun, 4 Feb 2018 22:06:36 +0000"/>
                            <attachment id="12909163" name="Screen Shot 2018-02-04 at 2.29.16 PM.png" size="56433" author="gvivekcbe" created="Sun, 4 Feb 2018 22:07:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ps3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7470] Memory Leak for &quot;fake&quot; Request objects in ModelAdapterFactory</title>
                <link>https://issues.apache.org/jira/browse/SLING-7470</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The functionality added in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5668&quot; title=&quot;Models: Leverage ServletRequestListener.requestDestroyed for calling DisposalCallback in case the model was created from a request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5668&quot;&gt;&lt;del&gt;SLING-5668&lt;/del&gt;&lt;/a&gt; to dispose of OSGi services (or anything else needing disposal when creating a Sling Model object) based on the ServletRequest lifecycle only works if the ServletRequest object was actually created by the ServletContext. In some cases, applications make construct &quot;fake&quot; request object (primarily for use with SlingRequestProcessor). In these cases, since the&#160;ServletContext didn&apos;t create these requests, it won&apos;t call the requestDestroyed method when they are complete.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The easiest way to resolve this is to only apply the special behavior in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5668&quot; title=&quot;Models: Leverage ServletRequestListener.requestDestroyed for calling DisposalCallback in case the model was created from a request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5668&quot;&gt;&lt;del&gt;SLING-5668&lt;/del&gt;&lt;/a&gt; to request objects actually created by the ServletContext and use the&#160;general-purpose ReferenceQueue method for all other requests (and all other adaptables).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135969">SLING-7470</key>
            <summary>Memory Leak for &quot;fake&quot; Request objects in ModelAdapterFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Feb 2018 00:12:31 +0000</created>
                <updated>Mon, 5 Mar 2018 12:24:07 +0000</updated>
                            <resolved>Sat, 3 Feb 2018 00:13:55 +0000</resolved>
                                    <version>Models Impl 1.4.6</version>
                                    <fixVersion>Models Impl 1.4.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16351102" author="justinedelson" created="Sat, 3 Feb 2018 00:13:55 +0000"  >&lt;p&gt;Fixed by&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-models-impl/commit/b0647a3419924c46e58b78aa6384e0f49491a0c6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-models-impl/commit/b0647a3419924c46e58b78aa6384e0f49491a0c6&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13141018">SLING-7517</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pqwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7467] JcrInstaller fails to startup if wrong sling:OsgiConfig is present</title>
                <link>https://issues.apache.org/jira/browse/SLING-7467</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After deploying a wrong osgi config, JcrInstaller won&apos;t get active again, if launchpad is restarted.&lt;/p&gt;

&lt;p&gt;Reproduction steps:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;start launchpad
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java -jar org.apache.sling.launchpad-9.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;create info logger for class org.apache.sling.installer.provider.jcr.impl.JcrInstaller with Info Level&lt;/li&gt;
	&lt;li&gt;create wrong OSGi org.apache.felix.webconsole.plugins.event.internal.PluginServlet.config file
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
max.size=I&lt;span class=&quot;code-quote&quot;&gt;&quot;sfdg&quot;&lt;/span&gt;
service.pid=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.felix.webconsole.plugins.event.internal.PluginServlet&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;deploy the previous created OSGi config file
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl -v -F &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.felix.webconsole.plugins.event.internal.PluginServlet.config=@org.apache.felix.webconsole.plugins.event.internal.PluginServlet.config&apos;&lt;/span&gt; \
-F &lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:primaryType=sling:OsgiConfig&quot;&lt;/span&gt; \
http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/apps/jcrtest/install&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;JcrInstaller creates log entry:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
02.02.2018 15:17:31.872 *WARN* [JcrInstaller.2] org.apache.sling.installer.provider.jcr.impl.JcrInstaller Exception in runOneCycle()
java.lang.NumberFormatException: For input string: &lt;span class=&quot;code-quote&quot;&gt;&quot;sfdg&quot;&lt;/span&gt;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.java:580)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.valueOf(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.java:766)
	at org.apache.felix.cm.file.ConfigurationHandler.readSimple(ConfigurationHandler.java:457)
	at org.apache.felix.cm.file.ConfigurationHandler.readValue(ConfigurationHandler.java:352)
	at org.apache.felix.cm.file.ConfigurationHandler.readInternal(ConfigurationHandler.java:306)
	at org.apache.felix.cm.file.ConfigurationHandler.read(ConfigurationHandler.java:265)
	at org.apache.sling.installer.core.impl.InternalResource.readDictionary(InternalResource.java:257)
	at org.apache.sling.installer.core.impl.InternalResource.create(InternalResource.java:98)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.createResources(OsgiInstallerImpl.java:373)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.updateResources(OsgiInstallerImpl.java:413)
	at org.apache.sling.installer.provider.jcr.impl.JcrInstaller.runOneCycle(JcrInstaller.java:549)
	at org.apache.sling.installer.provider.jcr.impl.JcrInstaller$StoppableThread.run(JcrInstaller.java:322)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;now stop launchpad instance&lt;/li&gt;
	&lt;li&gt;start again and check the previously created logger for JcrInstaller&lt;/li&gt;
	&lt;li&gt;throws following exception:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
02.02.2018 15:35:01.210 *INFO* [pool-9-thread-1] org.apache.sling.installer.provider.jcr.impl.JcrInstaller Activating Apache Sling JCR Installer
02.02.2018 15:35:01.211 *ERROR* [pool-9-thread-1] org.apache.sling.installer.provider.jcr.impl.JcrInstaller Repository exception during startup - deactivating installer!
javax.jcr.LoginException: Cannot derive user name &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; bundle org.apache.sling.installer.provider.jcr [123] and sub service &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.jcr.base.AbstractSlingRepository2.loginService(AbstractSlingRepository2.java:311)
	at org.apache.sling.installer.provider.jcr.impl.JcrInstaller$StoppableThread.&amp;lt;init&amp;gt;(JcrInstaller.java:217)
	at org.apache.sling.installer.provider.jcr.impl.JcrInstaller.start(JcrInstaller.java:355)
	at org.apache.sling.installer.provider.jcr.impl.JcrInstaller.activate(JcrInstaller.java:342)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.felix.scr.impl.inject.BaseMethod.invokeMethod(BaseMethod.java:224)
	at org.apache.felix.scr.impl.inject.BaseMethod.access$500(BaseMethod.java:39)
	at org.apache.felix.scr.impl.inject.BaseMethod$Resolved.invoke(BaseMethod.java:617)
	at org.apache.felix.scr.impl.inject.BaseMethod.invoke(BaseMethod.java:501)
	at org.apache.felix.scr.impl.inject.ActivateMethod.invoke(ActivateMethod.java:302)
	at org.apache.felix.scr.impl.inject.ActivateMethod.invoke(ActivateMethod.java:294)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:298)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:109)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:906)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:879)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:823)
	at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:347)
	at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
	at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:350)
	at org.apache.felix.framework.Felix.getService(Felix.java:3721)
	at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470)
	at org.apache.sling.commons.osgi.SortingServiceTracker.addingService(SortingServiceTracker.java:79)
	at org.apache.sling.installer.core.impl.SortingServiceTracker.addingService(SortingServiceTracker.java:45)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)
	at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901)
	at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
	at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
	at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4579)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3571)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:887)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:874)
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:132)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:941)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:741)
	at org.apache.felix.scr.impl.manager.ExtendedServiceEvent.activateManagers(ExtendedServiceEvent.java:59)
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:144)
	at org.apache.felix.framework.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:990)
	at org.apache.felix.framework.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
	at org.apache.felix.framework.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4579)
	at org.apache.felix.framework.Felix.access$000(Felix.java:105)
	at org.apache.felix.framework.Felix$1.serviceChanged(Felix.java:419)
	at org.apache.felix.framework.ServiceRegistry.unregisterService(ServiceRegistry.java:170)
	at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:144)
	at org.apache.sling.serviceusermapping.impl.ServiceUserMapperImpl.executeServiceRegistrations(ServiceUserMapperImpl.java:315)
	at org.apache.sling.serviceusermapping.impl.ServiceUserMapperImpl.access$000(ServiceUserMapperImpl.java:60)
	at org.apache.sling.serviceusermapping.impl.ServiceUserMapperImpl$1.run(ServiceUserMapperImpl.java:295)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>osx</environment>
        <key id="13135788">SLING-7467</key>
            <summary>JcrInstaller fails to startup if wrong sling:OsgiConfig is present</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="luckyluke">Lukas Kummer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2018 14:46:42 +0000</created>
                <updated>Mon, 27 Aug 2018 08:15:03 +0000</updated>
                            <resolved>Fri, 23 Feb 2018 07:27:18 +0000</resolved>
                                                    <fixVersion>Installer Core 3.9.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16374035" author="cziegeler" created="Fri, 23 Feb 2018 07:27:18 +0000"  >&lt;p&gt;Fixed in rev 1c2032d by ignoring all exceptions that might occur during a resource processing in the installer&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12908990" name="org.apache.felix.webconsole.plugins.event.internal.PluginServlet.config" size="96" author="luckyluke" created="Fri, 2 Feb 2018 14:46:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ppsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7466] EntityResourceList cleaning up resource instead of updating</title>
                <link>https://issues.apache.org/jira/browse/SLING-7466</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case of a replaced launchpad containing an unchanged resource the EntityResourceList is called for &quot;addOrUpdate&quot; of this Resource - in case the resource already exists but the digest differs the method currently drops the new resource without updating the existing one keeping the old dataUri.&lt;/p&gt;

&lt;p&gt;The issue manifests if these RegisteredResources are currently in INSTALL state and the INSTALLED version gets dropped subsequently.&lt;/p&gt;

&lt;p&gt;This isn&apos;t just a theoretical case but was observed for cases where a bundle in an n-1 version was patched to the same version provided in version n of launchpad and launchpad hasn&apos;t changed for n+1. If the jcr version is then removed the installation of the outdated registeredResource fails because of a wrong dataUri.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135748">SLING-7466</key>
            <summary>EntityResourceList cleaning up resource instead of updating</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="dsuess">Dominik S&#252;&#223;</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2018 11:38:42 +0000</created>
                <updated>Fri, 27 Jul 2018 06:15:23 +0000</updated>
                            <resolved>Mon, 5 Feb 2018 15:09:40 +0000</resolved>
                                    <version>Installer Core 3.8.10</version>
                                    <fixVersion>Installer Core 3.8.12</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16350199" author="githubbot" created="Fri, 2 Feb 2018 11:46:37 +0000"  >&lt;p&gt;DominikSuess opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7466&quot; title=&quot;EntityResourceList cleaning up resource instead of updating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7466&quot;&gt;&lt;del&gt;SLING-7466&lt;/del&gt;&lt;/a&gt; - adding update of existing resource to make sure datauri &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/1&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;is clean&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16350200" author="dsuess" created="Fri, 2 Feb 2018 11:47:04 +0000"  >&lt;p&gt;Created PR at&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16350290" author="githubbot" created="Fri, 2 Feb 2018 13:07:58 +0000"  >&lt;p&gt;cziegeler commented on issue #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7466&quot; title=&quot;EntityResourceList cleaning up resource instead of updating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7466&quot;&gt;&lt;del&gt;SLING-7466&lt;/del&gt;&lt;/a&gt; - adding update of existing resource to make sure datauri &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/1#issuecomment-362581545&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/1#issuecomment-362581545&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the patch. The patch only handels the use case where the artifact is not copied into the local cache. I&apos;ll apply it anyway and work from there&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16350291" author="githubbot" created="Fri, 2 Feb 2018 13:08:04 +0000"  >&lt;p&gt;cziegeler closed pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7466&quot; title=&quot;EntityResourceList cleaning up resource instead of updating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7466&quot;&gt;&lt;del&gt;SLING-7466&lt;/del&gt;&lt;/a&gt; - adding update of existing resource to make sure datauri &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/java/org/apache/sling/installer/core/impl/EntityResourceList.java b/src/main/java/org/apache/sling/installer/core/impl/EntityResourceList.java&lt;br/&gt;
index c61af04..e143af6 100644&lt;br/&gt;
&amp;#8212; a/src/main/java/org/apache/sling/installer/core/impl/EntityResourceList.java&lt;br/&gt;
+++ b/src/main/java/org/apache/sling/installer/core/impl/EntityResourceList.java&lt;br/&gt;
@@ -373,7 +373,20 @@ public void addOrUpdate(final RegisteredResourceImpl r) {&lt;br/&gt;
                 if ( rr.getURL().equals(r.getURL()) ) {&lt;br/&gt;
                     if ( RegisteredResourceImpl.isSameResource((RegisteredResourceImpl)rr, r) ) {&lt;br/&gt;
                         if ( !rr.getDigest().equals(r.getDigest()) ) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// same resource but different digest, we need to remove the file&lt;br/&gt;
+                            // same resource but different digest, we need to to update the file&lt;br/&gt;
+                            LOGGER.debug(&quot;Updating resource with due to different digest: {}&quot;, r);&lt;br/&gt;
+                            try 
{
+								InternalResource intRes = InternalResource.create(r.getScheme(), 
+										new InstallableResource(r.getEntityId(), 
+												r.getInputStream(), 
+												r.getDictionary(),
+												r.getDigest(), 
+												r.getType(), 
+												r.getPriority()));
+								((RegisteredResourceImpl)rr).update(intRes);
+                            }
&lt;p&gt; catch (IOException e) {&lt;br/&gt;
+								LOGGER.error(&quot;Failed to update resource with different digest: {}&quot;, r);&lt;br/&gt;
+							}&lt;br/&gt;
                             LOGGER.debug(&quot;Cleanup duplicate resource: {}&quot;, r);&lt;br/&gt;
                             this.cleanup(r);&lt;br/&gt;
                         }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16350327" author="cziegeler" created="Fri, 2 Feb 2018 13:34:07 +0000"  >&lt;p&gt;Adjusted the patch and cleary document what it handles and what not - while the patch does not handle all cases it&apos;s at least better than before&lt;/p&gt;

&lt;p&gt;rev 0897a1d&lt;/p&gt;</comment>
                            <comment id="16352314" author="githubbot" created="Mon, 5 Feb 2018 12:23:03 +0000"  >&lt;p&gt;DominikSuess opened a new pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7466&quot; title=&quot;EntityResourceList cleaning up resource instead of updating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7466&quot;&gt;&lt;del&gt;SLING-7466&lt;/del&gt;&lt;/a&gt; : adding basic unittest&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16352479" author="githubbot" created="Mon, 5 Feb 2018 14:48:07 +0000"  >&lt;p&gt;rombert commented on issue #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7466&quot; title=&quot;EntityResourceList cleaning up resource instead of updating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7466&quot;&gt;&lt;del&gt;SLING-7466&lt;/del&gt;&lt;/a&gt; : adding basic unittest&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/2#issuecomment-363105900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/2#issuecomment-363105900&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the test addition @DominikSuess &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16352480" author="githubbot" created="Mon, 5 Feb 2018 14:48:08 +0000"  >&lt;p&gt;rombert closed pull request #2: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7466&quot; title=&quot;EntityResourceList cleaning up resource instead of updating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7466&quot;&gt;&lt;del&gt;SLING-7466&lt;/del&gt;&lt;/a&gt; : adding basic unittest&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-installer-core/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-installer-core/pull/2&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/pom.xml b/pom.xml&lt;br/&gt;
index 0d66181..605ba78 100644&lt;br/&gt;
&amp;#8212; a/pom.xml&lt;br/&gt;
+++ b/pom.xml&lt;br/&gt;
@@ -158,5 +158,11 @@&lt;br/&gt;
             &amp;lt;version&amp;gt;2.5.1&amp;lt;/version&amp;gt;&lt;br/&gt;
             &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
         &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+        &amp;lt;dependency&amp;gt;&lt;br/&gt;
+            &amp;lt;groupId&amp;gt;org.mockito&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+            &amp;lt;artifactId&amp;gt;mockito-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+            &amp;lt;version&amp;gt;2.13.0&amp;lt;/version&amp;gt;&lt;br/&gt;
+            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;&lt;br/&gt;
+        &amp;lt;/dependency&amp;gt;&lt;br/&gt;
     &amp;lt;/dependencies&amp;gt;&lt;br/&gt;
 &amp;lt;/project&amp;gt;&lt;br/&gt;
diff --git a/src/test/java/org/apache/sling/installer/core/impl/EntityResourceListTest.java b/src/test/java/org/apache/sling/installer/core/impl/EntityResourceListTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..6b389a3&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/src/test/java/org/apache/sling/installer/core/impl/EntityResourceListTest.java&lt;br/&gt;
@@ -0,0 +1,56 @@&lt;br/&gt;
+package org.apache.sling.installer.core.impl;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.sling.installer.api.event.InstallationListener;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.junit.runner.RunWith;&lt;br/&gt;
+import org.mockito.ArgumentCaptor;&lt;br/&gt;
+import org.mockito.Mock;&lt;br/&gt;
+import org.mockito.internal.matchers.Any;&lt;br/&gt;
+import org.mockito.junit.MockitoJUnitRunner;&lt;br/&gt;
+import org.osgi.framework.Version;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+&lt;br/&gt;
+import static org.mockito.Mockito.mock;&lt;br/&gt;
+import static org.mockito.Mockito.when;&lt;br/&gt;
+import static org.mockito.Mockito.verify;&lt;br/&gt;
+&lt;br/&gt;
+@RunWith(MockitoJUnitRunner.class)&lt;br/&gt;
+public class EntityResourceListTest {&lt;br/&gt;
+	&lt;br/&gt;
+	private static final String OLD_URI = &quot;old-uri&quot;;&lt;br/&gt;
+	private static final String OLD_DIGEST = &quot;old-digest&quot;;&lt;br/&gt;
+	private static final String NEW_URI = &quot;new-uri&quot;;&lt;br/&gt;
+	private static final String NEW_DIGEST = &quot;new-digest&quot;;&lt;br/&gt;
+	&lt;br/&gt;
+	private static final String MOCK_URL = &quot;mock-url&quot;;&lt;br/&gt;
+	private static final String RESOURCE_ID = &quot;res-id&quot;;&lt;br/&gt;
+	private static final Version VERSION = new Version(&quot;1.0.0&quot;);&lt;br/&gt;
+	&lt;br/&gt;
+	@Mock&lt;br/&gt;
+	InstallationListener listener;&lt;br/&gt;
+	&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testAddExistingResourceWithDifferentDataUriAndDigest() &lt;/p&gt;
{
+    	EntityResourceList erl = new EntityResourceList(RESOURCE_ID, listener);
+    	RegisteredResourceImpl r1 = mock(RegisteredResourceImpl.class);
+    	when(r1.getURL()).thenReturn(MOCK_URL);
+    	when(r1.getVersion()).thenReturn((VERSION));
+    	when(r1.getDataURI()).thenReturn(OLD_URI);
+    	when(r1.getDigest()).thenReturn(OLD_DIGEST);
+    	erl.addOrUpdate(r1);
+    	assertEquals(OLD_URI, ((RegisteredResourceImpl)erl.getFirstResource()).getDataURI());
+
+    	RegisteredResourceImpl r2 = mock(RegisteredResourceImpl.class);
+    	when(r2.getURL()).thenReturn(MOCK_URL);
+    	when(r2.getVersion()).thenReturn(VERSION);
+    	when(r2.getDataURI()).thenReturn(NEW_URI);
+    	when(r2.getDigest()).thenReturn(NEW_DIGEST);
+    	erl.addOrUpdate(r2);
+    	ArgumentCaptor&amp;lt;String&amp;gt; argument = ArgumentCaptor.forClass(String.class);
+    	verify(r1).updateResourceUri(argument.capture());
+    	assertEquals(NEW_URI, argument.getValue());
+    }
&lt;p&gt;+&lt;br/&gt;
+}&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16352511" author="rombert" created="Mon, 5 Feb 2018 15:09:40 +0000"  >&lt;p&gt;With the merge of the unit test by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; I think this is good enough to resolve.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ppjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7464] FS Resource Provider for initial content missing children</title>
                <link>https://issues.apache.org/jira/browse/SLING-7464</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The FS Resource Provider for initial content lists either all children embedded within a JSON/XML file or the children based on files and folder, but not a merged view of both.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135453">SLING-7464</key>
            <summary>FS Resource Provider for initial content missing children</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Feb 2018 15:12:01 +0000</created>
                <updated>Thu, 1 Feb 2018 15:18:14 +0000</updated>
                            <resolved>Thu, 1 Feb 2018 15:18:14 +0000</resolved>
                                    <version>File System Resource Provider 2.1.10</version>
                                    <fixVersion>File System Resource Provider 2.1.12</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16348721" author="jsedding" created="Thu, 1 Feb 2018 15:18:14 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-fsresource.git;a=commitdiff;h=6cf2b45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;6cf2b45&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pnqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7463] FS Resource Provider incorrectly deals with vault aggregate files</title>
                <link>https://issues.apache.org/jira/browse/SLING-7463</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The FS Resource Provider incorrectly deals with vault aggregate files when accessing them via child iteration rather than by name.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;E.g. a file defined at &lt;tt&gt;fs-root/content/_sling_aggregate.xml&lt;/tt&gt; can be accessed via &lt;tt&gt;getResource(&quot;/content/sling:aggregate&quot;)&lt;/tt&gt;, but is not listed with &lt;tt&gt;getResource(&lt;/tt&gt;&lt;tt&gt;&quot;/content&quot;&lt;/tt&gt;&lt;tt&gt;).getChildren().&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135452">SLING-7463</key>
            <summary>FS Resource Provider incorrectly deals with vault aggregate files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Feb 2018 15:09:36 +0000</created>
                <updated>Thu, 1 Feb 2018 15:17:23 +0000</updated>
                            <resolved>Thu, 1 Feb 2018 15:17:23 +0000</resolved>
                                    <version>File System Resource Provider 2.1.10</version>
                                    <fixVersion>File System Resource Provider 2.1.12</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16348719" author="jsedding" created="Thu, 1 Feb 2018 15:17:23 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-fsresource.git;a=commitdiff;h=2d658ef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2d658ef&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pnq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7462] DistributionEventDistributeDistributionTriggerTest fails sporadically</title>
                <link>https://issues.apache.org/jira/browse/SLING-7462</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When compiling this repository locally&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
git@github.com:apache/sling-org-apache-sling-distribution-core.git
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this unit test sometimes fails with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.distribution.trigger.impl.DistributionEventDistributeDistributionTriggerTest
testDistributionLoop(org.apache.sling.distribution.trigger.impl.DistributionEventDistributeDistributionTriggerTest)  Time elapsed: 0.997 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at org.junit.Assert.assertEquals(Assert.java:631)
	at org.apache.sling.distribution.trigger.impl.DistributionEventDistributeDistributionTriggerTest.testDistributionLoop(DistributionEventDistributeDistributionTriggerTest.java:133)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13135416">SLING-7462</key>
            <summary>DistributionEventDistributeDistributionTriggerTest fails sporadically</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Feb 2018 13:19:36 +0000</created>
                <updated>Thu, 1 Feb 2018 15:24:25 +0000</updated>
                            <resolved>Thu, 1 Feb 2018 15:24:25 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.3.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16348734" author="marett" created="Thu, 1 Feb 2018 15:24:10 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/d50eac320d7aaabad14c76f754a54de85b2a415d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-distribution-core/commit/d50eac320d7aaabad14c76f754a54de85b2a415d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pni7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7461] Official endpoints property from Http Whiteboard should be used</title>
                <link>https://issues.apache.org/jira/browse/SLING-7461</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the implementation uses the interims property &quot;osgi.http.service.endpoints&quot; from the RFC. The final http whiteboard spec however changed that name to &quot;osgi.http.endpoint&quot;.&lt;/p&gt;

&lt;p&gt;Therefore we should use the official name (and revert back to the interims one if not found)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135359">SLING-7461</key>
            <summary>Official endpoints property from Http Whiteboard should be used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Feb 2018 09:21:53 +0000</created>
                <updated>Tue, 6 Feb 2018 17:51:51 +0000</updated>
                            <resolved>Thu, 1 Feb 2018 09:25:27 +0000</resolved>
                                    <version>Discovery Support 1.0.0</version>
                                    <fixVersion>Discovery Support 1.0.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16348275" author="cziegeler" created="Thu, 1 Feb 2018 09:25:27 +0000"  >&lt;p&gt;Fixed in rev 80f93e1&lt;/p&gt;</comment>
                            <comment id="16350510" author="cziegeler" created="Fri, 2 Feb 2018 15:21:51 +0000"  >&lt;p&gt;Fixed typo in rev 0d7d4fa&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13135326">SLING-7459</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pn5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7459] Official endpoints property from Http Whiteboard should be used</title>
                <link>https://issues.apache.org/jira/browse/SLING-7459</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the implementation uses the interims property &quot;osgi.http.service.endpoints&quot; from the RFC. The final http whiteboard spec however changed that name to &quot;osgi.http.endpoint&quot;.&lt;/p&gt;

&lt;p&gt;Therefore we should use the official name (and revert back to the interims one if not found)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135326">SLING-7459</key>
            <summary>Official endpoints property from Http Whiteboard should be used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Feb 2018 06:41:19 +0000</created>
                <updated>Tue, 6 Feb 2018 17:51:56 +0000</updated>
                            <resolved>Thu, 1 Feb 2018 06:49:34 +0000</resolved>
                                    <version>Discovery Base 2.0.4</version>
                                    <fixVersion>Discovery Base 2.0.8</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16348104" author="cziegeler" created="Thu, 1 Feb 2018 06:49:34 +0000"  >&lt;p&gt;Fixed in rev ae2b304&lt;/p&gt;</comment>
                            <comment id="16350508" author="cziegeler" created="Fri, 2 Feb 2018 15:20:22 +0000"  >&lt;p&gt;Corrected typo in rev cdabe0f&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13135359">SLING-7461</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pmy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7458] Index Out of Bounds in sling:getParents Tag / Function</title>
                <link>https://issues.apache.org/jira/browse/SLING-7458</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the user specifies a depth greater than the depth of the&#160;resource used for the child note, the&#160;&#160;sling:getParents Tag and Function will throw an Index Out of Bounds exception. The less-error prone behavior would be to return an empty iterator of parent resources.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135238">SLING-7458</key>
            <summary>Index Out of Bounds in sling:getParents Tag / Function</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Jan 2018 21:47:59 +0000</created>
                <updated>Mon, 15 Oct 2018 15:59:33 +0000</updated>
                            <resolved>Wed, 31 Jan 2018 21:49:53 +0000</resolved>
                                    <version>Scripting JSP-Taglib 2.2.6</version>
                                    <fixVersion>Scripting JSP Taglib 2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16347669" author="klcodanr" created="Wed, 31 Jan 2018 21:49:53 +0000"  >&lt;p&gt;Fixed in&#160;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-jsp-taglib/commit/463596ca6a2436636ab762ddad1795b30e6dc91f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-jsp-taglib/commit/463596ca6a2436636ab762ddad1795b30e6dc91f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16650414" author="klcodanr" created="Mon, 15 Oct 2018 15:59:33 +0000"  >&lt;p&gt;Closed with the release of &lt;a href=&quot;https://issues.apache.org/jira/projects/SLING/versions/12342671&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Sling JSP Taglib 2.3.0&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pmen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7457] Poor documentation on mongoDB or other NOSQL use</title>
                <link>https://issues.apache.org/jira/browse/SLING-7457</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I am evaluating sling.&lt;/p&gt;

&lt;p&gt;I succeed in setting it up and it works as I thought, seems to be a very valuable product for those who want to rapidlly build a software that relies on JCR, which is my case.&lt;/p&gt;

&lt;p&gt;But the next question is &quot;Should I use a noSQL Database or not&quot;. As it may be an important choice, since Sling is not really compatible with SQL database, I wanted to make sling run with MongoDB.&lt;/p&gt;

&lt;p&gt;I read the documentation, and at first impression, it seemed quite immediate; I simply have to add an option to change the mode of launching the starter application, as it is said in the following documentation: &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/the-sling-launchpad.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/the-sling-launchpad.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So I tried to launch the starter application with the following lines:&lt;/p&gt;

&lt;p&gt;java -Dsling.run.modes=oak,oak_mongo -jar org.apache.sling.starter-10-SNAPSHOT.jar&lt;/p&gt;

&lt;p&gt;and checked with a mongodb client if a mongodb server was started or not ...&lt;/p&gt;

&lt;p&gt;As I was unable to connect to mongodb://localhost:27017 I guess something is missing, maybe mongodb should be installed separetely ?&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I continue reading the documentation, and find &lt;a href=&quot;https://sling.apache.org/documentation/bundles/nosql-resource-providers.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/nosql-resource-providers.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;OK, my conclusion was I missed to install the nosql-resource-providers, so I installed the bundle and check again ...&lt;/p&gt;

&lt;p&gt;Nothing new, it seems I have done nothing.&lt;/p&gt;

&lt;p&gt;So, always according to &lt;a href=&quot;https://sling.apache.org/documentation/bundles/nosql-resource-providers.html,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/nosql-resource-providers.html,&lt;/a&gt;&#160;there is another launchpad to use.&lt;/p&gt;

&lt;p&gt;There is the link to the source code:&#160;&lt;a href=&quot;https://github.com/apache/sling-old-svn-mirror/tree/trunk/contrib/nosql/launchpad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-old-svn-mirror/tree/trunk/contrib/nosql/launchpad&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But it is said that this source repository is obsolete and shall not be used.&lt;/p&gt;

&lt;p&gt;So I get back to apache git repository, and filtered on &quot;sling&quot; and &quot;nosql&quot;, I can find some code now ...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache?utf8=%E2%9C%93&amp;amp;q=sling+nosql&amp;amp;type=&amp;amp;language=&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache?utf8=%E2%9C%93&amp;amp;q=sling+nosql&amp;amp;type=&amp;amp;language=&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But it is absolutely not clear to me whether I have to do something with that modules or not ...&lt;/p&gt;

&lt;p&gt;So my real problem is I can&apos;t get the right documentation on &quot;How to setup Sling 9 to work with mongodb&quot; and there is, as far as I know, no forum where I can ask this to a community to help.&lt;/p&gt;

&lt;p&gt;I guess sling is working well with mongoDB, but if I need 10 days to set it up (I spend 1 day, maybe it is not enough) my point of view is made: I won&apos;t use mongodb.&lt;/p&gt;

&lt;p&gt;But this maybe a terrible mistake !&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So help please !&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135111">SLING-7457</key>
            <summary>Poor documentation on mongoDB or other NOSQL use</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="frougeot">frederic rougeot</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Jan 2018 15:21:53 +0000</created>
                <updated>Mon, 6 Jan 2025 13:36:33 +0000</updated>
                            <resolved>Mon, 6 Jan 2025 13:36:33 +0000</resolved>
                                                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16347077" author="olli" created="Wed, 31 Jan 2018 16:16:07 +0000"  >&lt;p&gt;Please try with Oak Segment Tar if you are new to Sling.&lt;/p&gt;

&lt;p&gt;For help or discussions use our &lt;a href=&quot;https://sling.apache.org/project-information.html#mailing-lists&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mailings lists&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16347126" author="olli" created="Wed, 31 Jan 2018 16:29:11 +0000"  >&lt;p&gt;Sling with Oak Mongo requires a running MongoDB instance on localhost (port: &lt;tt&gt;27017&lt;/tt&gt;, db: &lt;tt&gt;sling&lt;/tt&gt;) &#8211; it&apos;s documented for &lt;a href=&quot;https://sling.apache.org/documentation/karaf.html#getting-started&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Karaf&lt;/a&gt;, but we should improve documentation for Sling Starter.&lt;/p&gt;</comment>
                            <comment id="16347170" author="frougeot" created="Wed, 31 Jan 2018 16:57:03 +0000"  >&lt;p&gt;I succeed indeed, by providing a mongodb database by myself, and by using the launchpad dedicated to mongodb after building it, from the source code I got in the actual apache git repository not the deprecated one.&lt;/p&gt;

&lt;p&gt;I really think the documentation is very confusing on that part.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16347181" author="frougeot" created="Wed, 31 Jan 2018 17:03:21 +0000"  >&lt;p&gt;I tried first with OAk Segment Tar and it is OK for me.&lt;/p&gt;

&lt;p&gt;The next step was using MongoDB.&lt;/p&gt;

&lt;p&gt;I said in previous comment It was OK now, but in fact not...&lt;/p&gt;

&lt;p&gt;I checked that the sling database is created in mongodb, it was OK and I thought everything was fine.&lt;/p&gt;

&lt;p&gt;But when accessing to http:/localhost:8080 I got now the following HTTP 403 error...&lt;/p&gt;

&lt;p&gt;Once again, I think the documentation should help !&lt;/p&gt;

&lt;p&gt;I guess I have to provide somewhere the right configuration for authenticating to the mongodb database ...&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;h1&gt;&lt;a name=&quot;Forbidden%28403%29&quot;&gt;&lt;/a&gt;Forbidden (403)&lt;/h1&gt;

&lt;p&gt;The requested URL resulted in an error in org.apache.sling.servlets.get.DefaultGetServlet.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;RequestProgress%3A&quot;&gt;&lt;/a&gt;Request Progress:&lt;/h3&gt;

&lt;p&gt;0 TIMER_START{Request Processing} 0 COMMENT timer_end format is {&amp;lt;elapsed msec&amp;gt;,&amp;lt;timer name&amp;gt;} &amp;lt;optional message&amp;gt; 0 LOG Method=GET, PathInfo= 0 TIMER_START{ResourceResolution} 2 TIMER_END{2,ResourceResolution} URI= resolves to Resource=NoSqlResource, type=nt:unstructured, superType=null, path=/ 2 LOG Resource Path Info: SlingRequestPathInfo: path=&apos;/&apos;, selectorString=&apos;null&apos;, extension=&apos;null&apos;, suffix=&apos;null&apos; 2 TIMER_START{ServletResolution} 2 TIMER_START{resolveServlet(NoSqlResource, type=nt:unstructured, superType=null, path=/)} 2 TIMER_END{0,resolveServlet(NoSqlResource, type=nt:unstructured, superType=null, path=/)} Using servlet org.apache.sling.servlets.get.DefaultGetServlet 2 TIMER_END{0,ServletResolution} URI= handled by Servlet=org.apache.sling.servlets.get.DefaultGetServlet 3 LOG Applying Requestfilters 3 LOG Calling filter: org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter 3 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter 3 LOG Applying Componentfilters 3 TIMER_START{org.apache.sling.servlets.get.DefaultGetServlet#0} 3 LOG Using org.apache.sling.servlets.get.impl.helpers.StreamRendererServlet to render for extension=null 5 LOG Applying Error filters 5 LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter 5 TIMER_START{handleError:status=403} 40 TIMER_END{35,handleError:status=403} Using handler org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet 41 TIMER_END{41,Request Processing} Dumping SlingRequestProgressTracker Entries&lt;/p&gt;</comment>
                            <comment id="16347256" author="olli" created="Wed, 31 Jan 2018 17:42:06 +0000"  >&lt;p&gt;The &lt;a href=&quot;https://sling.apache.org/documentation/bundles/nosql-resource-providers.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;NoSQL Resource Providers&lt;/a&gt;&#160;and the related Launchpad are not providing a JCR itself &#8211; so don&apos;t use them. Use &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-starter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Sling Starter&lt;/a&gt; 10 with run mode &lt;tt&gt;oak_mongo&lt;/tt&gt; if you prefer Mongo over TAR (btw, you can also run Sling with &lt;a href=&quot;https://jackrabbit.apache.org/oak/docs/nodestore/documentmk.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Oak/RDBMS&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16348199" author="frougeot" created="Thu, 1 Feb 2018 08:37:08 +0000"  >&lt;p&gt;thanks, tell me when the documentation will be updated, I didn&apos;t find in it the kind of information you give in this comment ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I just tried again with sling &lt;b&gt;10&lt;/b&gt;&#160;launchpad&lt;/p&gt;

&lt;p&gt;java -jar org.apache.sling.starter-10-SNAPSHOT.jar&#160; -Dsling.run.modes=oak_mongo&lt;/p&gt;

&lt;p&gt;the nosql resource provider bundle is present but not loaded (Got an error while launching the bundle, that does not affect the global launching of the launchpad),&#160;&lt;/p&gt;

&lt;p&gt;I then upload a ressource to sling, but it does not seem&#160;that this ressource is stored in&#160;mongodb ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16348225" author="rombert" created="Thu, 1 Feb 2018 08:51:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frougeot&quot; class=&quot;user-hover&quot; rel=&quot;frougeot&quot;&gt;frougeot&lt;/a&gt; - where would you expect to see that information? The docs are there, but maybe scattered a bit.&lt;/p&gt;</comment>
                            <comment id="16348239" author="frougeot" created="Thu, 1 Feb 2018 09:03:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Sorry the documentation is not scattered a bit, it is not updated at all and for now, nothing works.&lt;/p&gt;

&lt;p&gt;I spent two days for something that should be very simple and immediate - or am I the first that wants to plug sling to mongodb ?&lt;/p&gt;

&lt;p&gt;... Therefore I am not sure to use Sling at all.&lt;/p&gt;</comment>
                            <comment id="16348243" author="rombert" created="Thu, 1 Feb 2018 09:04:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frougeot&quot; class=&quot;user-hover&quot; rel=&quot;frougeot&quot;&gt;frougeot&lt;/a&gt; - some comments&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;the NoSQL resource provider bundle is not needed to store JCR data in Oak, so I suggest you don&apos;t use it for now unless you have a specific use case that calls for it&lt;/li&gt;
	&lt;li&gt;the MongoDB setup starts up a bit slower, so that might explain some 404s in the beginning&lt;/li&gt;
	&lt;li&gt;I recommend you start fresh - wipe out the sling repository, drop the MongoDB database and restart the launchpad&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Once that is done, confirm that there is MongoDB data in the &quot;sling&quot; database.&lt;/p&gt;</comment>
                            <comment id="16348605" author="frougeot" created="Thu, 1 Feb 2018 13:53:37 +0000"  >&lt;p&gt;Thanks Robert,&#160;&lt;/p&gt;

&lt;p&gt;I tried ... but without success ...&lt;/p&gt;

&lt;p&gt;0/ I have removed the nosql mongodb bundle&lt;/p&gt;

&lt;p&gt;1/ I have deleted the repository subdir&lt;/p&gt;

&lt;p&gt;2/ I have dropped the sling database(that was previously created thanks to the Nosql launchpad)&lt;/p&gt;

&lt;p&gt;3/ I have started the lauchpad again as said in the doc:&#160;java -jar org.apache.sling.starter-10-SNAPSHOT.jar&#160; -Dsling.run.modes=oak_mongo&lt;/p&gt;

&lt;p&gt;4/ I upload a file to sling with CURL&lt;/p&gt;

&lt;p&gt;--&amp;gt; no sling database created, the file is stored in the segmentstore in the repository ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Are you sure the sling.run.modes to use is oak_mongo and not&#160;&lt;tt&gt;nosql-mongodb as it is for the nosql launchpad : &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-nosql-launchpad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-nosql-launchpad&lt;/a&gt;&#160;?&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16350090" author="rombert" created="Fri, 2 Feb 2018 10:01:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frougeot&quot; class=&quot;user-hover&quot; rel=&quot;frougeot&quot;&gt;frougeot&lt;/a&gt; - I double-checked my steps, here&apos;s what I did to ensure this work&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;ensures that no other &apos;sling&apos; database exists in mongodb&lt;/li&gt;
	&lt;li&gt;downloaded a sling starter 10-SNAPSHOT from repository.apache.org&lt;/li&gt;
	&lt;li&gt;started the app with the proper runmodes&lt;/li&gt;
	&lt;li&gt;validated that there are now entries in the sling.nodes collection&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;MongoDB&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ mongo
MongoDB shell version v3.4.10
connecting to: mongodb://127.0.0.1:27017
MongoDB server version: 3.4.10
&amp;gt; show dbs
admin  0.000GB
local  0.000GB
&amp;gt; exit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Sling Starter&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ wget https://repository.apache.org/content/repositories/snapshots/org/apache/sling/org.apache.sling.starter/10-SNAPSHOT/org.apache.sling.starter-10-20180131.135931-131.jar
$ java -jar org.apache.sling.starter-10-20180131.135931-131.jar -Dsling.run.modes=oak_mongo
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Verifying&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;After a little time, MongoDB connection information should be printed on stdout&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO: Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, version=ServerVersion{versionList=[3, 4, 10]}, minWireVersion=0, maxWireVersion=5, maxDocumentSize=16777216, roundTripTimeNanos=460489}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, data should be in the &lt;tt&gt;nodes&lt;/tt&gt; collection of the &lt;tt&gt;sling&lt;/tt&gt; mongo database&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ mongo
&amp;gt; use sling
&amp;gt; db.nodes.count();
13454&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you follow these steps and let me know where it stops working for you?&lt;/p&gt;</comment>
                            <comment id="16350107" author="frougeot" created="Fri, 2 Feb 2018 10:19:19 +0000"  >&lt;p&gt;Sure I will try again this afternoon (french timezone). What differs from my previous attempts is to restart from a fresh downloaded snapshot, not from a version build from the source code and previously used. I tell you once done.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16350122" author="olli" created="Fri, 2 Feb 2018 10:31:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frougeot&quot; class=&quot;user-hover&quot; rel=&quot;frougeot&quot;&gt;frougeot&lt;/a&gt;, you have to use a &quot;fresh&quot; instance if you switch between Oak stores (tar, mongo, ...).&lt;/p&gt;</comment>
                            <comment id="16350135" author="frougeot" created="Fri, 2 Feb 2018 10:39:34 +0000"  >&lt;p&gt;OK this kind of information is really important, and as previously said if it is not clearly explained in the documentation, it is very hard to guess it !&lt;/p&gt;

&lt;p&gt;I check now !&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16350169" author="frougeot" created="Fri, 2 Feb 2018 10:59:10 +0000"  >&lt;p&gt;I tried and it still does not work.&lt;/p&gt;

&lt;p&gt;I did not download form the repository, since I am using the latest JDK, as i mentionned in another ticket to get sling to work I had to build it from source.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So What I did is:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;remove the target directory&lt;/li&gt;
	&lt;li&gt;mvn clean install&lt;/li&gt;
	&lt;li&gt;launch mongodb (on Windows)&lt;/li&gt;
	&lt;li&gt;launch sling:
	&lt;ul&gt;
		&lt;li&gt;cd target&lt;/li&gt;
		&lt;li&gt;java -jar org.apache.sling.starter-10-SNAPSHOT.jar&#160; -Dsling.run.modes=oak_mongo&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;access to sling web page&lt;/li&gt;
	&lt;li&gt;Wait 10 minutes&lt;/li&gt;
	&lt;li&gt;access to sling web page&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The result is:&lt;/p&gt;

&lt;p&gt;I got the following line in sling logs&lt;/p&gt;

&lt;p&gt;INFOS: Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, version=ServerVersion&lt;/p&gt;
{versionList=[3, 6, 2]}
&lt;p&gt;, minWireVersion=0, maxWireVersion=6, maxDocumentSize=16777216, roundTripTimeNanos=1324019}&lt;/p&gt;

&lt;p&gt;BUT&lt;/p&gt;

&lt;p&gt;when accessing &lt;a href=&quot;http://localhost:8080/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080&lt;/a&gt;&#160;it is written thant sling is launching (not launched)&lt;/p&gt;

&lt;p&gt;checking the mongodb database, nothing is created (no sling table created) ...&lt;/p&gt;

&lt;p&gt;(two days before, when I tried with&#160;the nosql launcher, the sling database was created (I got a 403))&lt;/p&gt;

&lt;p&gt;Mongodb version is 3.6 ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16353932" author="rombert" created="Tue, 6 Feb 2018 14:27:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frougeot&quot; class=&quot;user-hover&quot; rel=&quot;frougeot&quot;&gt;frougeot&lt;/a&gt; - can you attach the &lt;tt&gt;sling/logs/error.log&lt;/tt&gt; file?&lt;/p&gt;</comment>
                            <comment id="16353954" author="frougeot" created="Tue, 6 Feb 2018 14:46:21 +0000"  >&lt;p&gt;here you are ...&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12909449/12909449_error.log&quot; title=&quot;error.log attached to SLING-7457&quot;&gt;error.log&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16354139" author="rombert" created="Tue, 6 Feb 2018 16:57:29 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frougeot&quot; class=&quot;user-hover&quot; rel=&quot;frougeot&quot;&gt;frougeot&lt;/a&gt;. Seems the root cause is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;com.mongodb.MongoTimeoutException: Timed out after 30000 ms while waiting to connect. Client view of cluster state is {type=UNKNOWN, servers=[{address=localhost:27017, type=UNKNOWN, state=CONNECTING, exception={com.mongodb.MongoSocketReadTimeoutException: Timeout while receiving message}, caused by {java.net.SocketTimeoutException: Read timed out}}]
	at com.mongodb.connection.BaseCluster.getDescription(BaseCluster.java:163) [org.mongodb.mongo-java-driver:3.4.1]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you confirm that connecting via another tool works? Or maybe this is a firewall issue? I admit that I&apos;m not at all knowledgeable with Windows.&lt;/p&gt;</comment>
                            <comment id="16354162" author="frougeot" created="Tue, 6 Feb 2018 17:14:16 +0000"  >&lt;p&gt;yes I confirm absolutely no problem to connect by default, it is immediate with any tool (MongoDB Compass or Robo 3T).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;No firewall issue as everything runs on local: sling and mongodb ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;What is strange is that that behaviour was totally different when using the nosql launchpad as earlier said; the sling database was created ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Furthermore, the error logs should lead to another message to the user when trying to get the sling homepage, it should be written &quot;Error connecting to database&quot; not &quot;Sling is starting&quot; ...&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17910224" author="sseifert@pro-vision.de" created="Mon, 6 Jan 2025 13:36:33 +0000"  >&lt;p&gt;the sling nosql modules are now marked deprecated&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12909449" name="error.log" size="295578" author="frougeot" created="Tue, 6 Feb 2018 14:45:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3plmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7456] FlushCache in SlingServletResolver can throw an NPE</title>
                <link>https://issues.apache.org/jira/browse/SLING-7456</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Given that we check for the this.cache being null everytime we reference the cache we should probably do the same in flushCache. I can&apos;t reproduce it but the NPE looked like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException: null
	at org.apache.sling.servlets.resolver.internal.SlingServletResolver.flushCache(SlingServletResolver.java:1122) [org.apache.sling.servlets.resolver:2.4.22]
	at org.apache.sling.servlets.resolver.internal.SlingServletResolver.onChange(SlingServletResolver.java:1464) [org.apache.sling.servlets.resolver:2.4.22]
	at org.apache.sling.resourceresolver.impl.observation.BasicObservationReporter.reportChanges(BasicObservationReporter.java:211) [org.apache.sling.resourceresolver:1.5.34]
	at org.apache.sling.jcr.resource.internal.JcrResourceListener.onEvent(JcrResourceListener.java:155) [org.apache.sling.jcr.resource:3.0.8]
	at org.apache.jackrabbit.commons.observation.ListenerTracker$1.onEvent(ListenerTracker.java:190) [org.apache.jackrabbit.jackrabbit-jcr-commons:2.16.0]
	at org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor.contentChanged(ChangeProcessor.java:508) [org.apache.jackrabbit.oak-jcr:1.8.1]
	at org.apache.jackrabbit.oak.plugins.observation.FilteringDispatcher.contentChanged(FilteringDispatcher.java:53) [org.apache.jackrabbit.oak-core:1.8.1]
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:128) [org.apache.jackrabbit.oak-store-spi:1.8.1]
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:122) [org.apache.jackrabbit.oak-store-spi:1.8.1]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)
	at java.base/java.lang.Thread.run(Thread.java:844)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13135075">SLING-7456</key>
            <summary>FlushCache in SlingServletResolver can throw an NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="karlpauls">Karl Pauls</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Jan 2018 13:18:40 +0000</created>
                <updated>Tue, 13 Nov 2018 11:07:56 +0000</updated>
                            <resolved>Fri, 2 Feb 2018 06:17:31 +0000</resolved>
                                    <version>Servlets Resolver 2.4.22</version>
                                    <fixVersion>Servlets Resolver 2.4.24</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16346913" author="cziegeler" created="Wed, 31 Jan 2018 14:32:32 +0000"  >&lt;p&gt;This is interesting, the resolver is only registered as an event receiver if the cache is not null.&lt;/p&gt;

&lt;p&gt;However if the jmx bean is invoked, there should be a null check nevertheless.&lt;/p&gt;</comment>
                            <comment id="16346973" author="karlpauls" created="Wed, 31 Jan 2018 15:06:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;,&#160;not sure - it looks like we might not have a cache if the cachesize is configured to be &amp;gt; 5. Again, I&apos;m not sure why this happend but it was in a messed up instance so maybe that had something going wrong in the configs and ended-up with a cachesize too small?&lt;/p&gt;</comment>
                            <comment id="16346986" author="cziegeler" created="Wed, 31 Jan 2018 15:12:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt; The listener is only registered if cache is not null:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/blob/master/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/blob/master/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L865&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The check for the jmx bean at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-servlets-resolver/blob/master/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-servlets-resolver/blob/master/src/main/java/org/apache/sling/servlets/resolver/internal/SlingServletResolver.java#L879&lt;/a&gt; should be changed&lt;/p&gt;

&lt;p&gt;However in your stack trace, the listener is invoked. As that seems to be a scheduled thread, I assume the servlets resolver is already disposed (where cache has been set to null). So we should check for null in flush just to avoid this situation&lt;/p&gt;</comment>
                            <comment id="16346994" author="karlpauls" created="Wed, 31 Jan 2018 15:17:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, ah right - I missed that. Yes, must have been a deactivate then.&lt;/p&gt;</comment>
                            <comment id="16347057" author="karlpauls" created="Wed, 31 Jan 2018 16:03:04 +0000"  >&lt;p&gt;I guess all of the handling of the cache seems to suffer a bit from possible race conditions. I&apos;ll not have time for this right now but we should try to clean that up a little.&lt;/p&gt;</comment>
                            <comment id="16349841" author="cziegeler" created="Fri, 2 Feb 2018 06:17:31 +0000"  >&lt;p&gt;Fixed in rev 557ad87&lt;/p&gt;

&lt;p&gt;Before cache is used/checked, it is copied into a local variable to avoid racing with deactivate&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3plef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7452] Document the handling of multiple value fields with SlingPostServlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-7452</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The SlingPostServlet documentation at &lt;a href=&quot;http://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html&lt;/a&gt;&#160;doesn&apos;t detail on how to manipulate multi-valued properties with the changes introduced by&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-1983&quot; title=&quot;Post servlet: Patching multi-value properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-1983&quot;&gt;&lt;del&gt;SLING-1983&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13134466">SLING-7452</key>
            <summary>Document the handling of multiple value fields with SlingPostServlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="dplaton">Daniel Platon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jan 2018 15:05:15 +0000</created>
                <updated>Tue, 30 Jan 2018 11:54:34 +0000</updated>
                            <resolved>Tue, 30 Jan 2018 11:54:34 +0000</resolved>
                                                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16343525" author="githubbot" created="Mon, 29 Jan 2018 15:51:22 +0000"  >&lt;p&gt;dplaton commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361288956&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361288956&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I see that the changes are already documented at &lt;a href=&quot;http://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html#patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html#patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Wouldn&apos;t make sense to have this at least moved in the &quot;Multiple values&quot; section? &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344765" author="githubbot" created="Tue, 30 Jan 2018 09:47:56 +0000"  >&lt;p&gt;rombert commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361537110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361537110&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @dplaton - would it work if you added a link from the &apos;multiple values&apos; section to the &apos;patch&apos; section? Also it would be good to review if your changes have any additions/clarifications over the current docs.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344886" author="githubbot" created="Tue, 30 Jan 2018 11:14:59 +0000"  >&lt;p&gt;dplaton commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361562068&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361562068&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Ok @rombert , I added a link to the &apos;patch&apos; section. That section covers everything there is to know.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344923" author="githubbot" created="Tue, 30 Jan 2018 11:39:59 +0000"  >&lt;p&gt;rombert commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361567910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361567910&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I know I&apos;m nitpicking, but there&apos;s already an auto-generated patch anchor - &lt;a href=&quot;https://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html#patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html#patch&lt;/a&gt; . Can you use that instead?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344925" author="githubbot" created="Tue, 30 Jan 2018 11:41:04 +0000"  >&lt;p&gt;dplaton commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361568162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361568162&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Ok, I wanted to use an internal link instead of the long one.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344937" author="githubbot" created="Tue, 30 Jan 2018 11:45:26 +0000"  >&lt;p&gt;rombert commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361569163&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361569163&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Can&apos;t you use &apos;#patch&apos; as a link?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344939" author="githubbot" created="Tue, 30 Jan 2018 11:48:00 +0000"  >&lt;p&gt;dplaton commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361569721&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361569721&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   My editor didn&apos;t recognize the link when I used #patch so I thought is not supported.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344940" author="githubbot" created="Tue, 30 Jan 2018 11:48:58 +0000"  >&lt;p&gt;rombert commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361569957&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361569957&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   It&apos;s auto-generated by the markdown template, so the editor can&apos;t know about it.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344942" author="githubbot" created="Tue, 30 Jan 2018 11:53:49 +0000"  >&lt;p&gt;rombert closed pull request #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/src/main/jbake/content/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.md b/src/main/jbake/content/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.md&lt;br/&gt;
index 2b04c1f8..324d3b1e 100644&lt;br/&gt;
&amp;#8212; a/src/main/jbake/content/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.md&lt;br/&gt;
+++ b/src/main/jbake/content/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.md&lt;br/&gt;
@@ -144,6 +144,8 @@ Would assign the `/content/page/multi` property the value &lt;b&gt;[ &quot;one&quot;, &quot;two&quot; ]&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt; This is pretty much all there is to know about creating and modifying content. The following sections will now introduce more functionality which help you with more fine-grained control in your content management application.&lt;/p&gt;

&lt;p&gt;+For more operations with multiple values you can use the &lt;span class=&quot;error&quot;&gt;&amp;#91;`@Patch`&amp;#93;&lt;/span&gt;(#patch) suffix.&lt;br/&gt;
+&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;
			&lt;ol&gt;
				&lt;li&gt;
				&lt;ol&gt;
					&lt;li&gt;Automatic property values: last modified and created by&lt;/li&gt;
				&lt;/ol&gt;
				&lt;/li&gt;
			&lt;/ol&gt;
			&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt; To make it easier to set &quot;last modified&quot; and &quot;created by&quot; property&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344943" author="githubbot" created="Tue, 30 Jan 2018 11:53:55 +0000"  >&lt;p&gt;rombert commented on issue #7: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7452&quot; title=&quot;Document the handling of multiple value fields with SlingPostServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7452&quot;&gt;&lt;del&gt;SLING-7452&lt;/del&gt;&lt;/a&gt; Document the handling of multiple value fields with SlingPostServlet&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-site/pull/7#issuecomment-361571112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-site/pull/7#issuecomment-361571112&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Looks good, thanks!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16344945" author="rombert" created="Tue, 30 Jan 2018 11:54:34 +0000"  >&lt;p&gt;Patch applied, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dplaton&quot; class=&quot;user-hover&quot; rel=&quot;dplaton&quot;&gt;dplaton&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12498786">SLING-1983</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3phnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7447] Race condition in ThreadLocalCleaner initialization code</title>
                <link>https://issues.apache.org/jira/browse/SLING-7447</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There is a race condition in the &lt;tt&gt;ThreadLocalCleaner&lt;/tt&gt; initialization code that can lead to the fields not being fully initialized when read.&lt;/p&gt;

&lt;p&gt;The stack trace is similar to&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;sling-oak-observation-2&quot; java.lang.NullPointerException
        at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.copy(ThreadLocalCleaner.java:110)
        at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.saveOldThreadLocals(ThreadLocalCleaner.java:230)
        at org.apache.sling.commons.threads.impl.ThreadLocalCleaner.&amp;lt;init&amp;gt;(ThreadLocalCleaner.java:155)
        at org.apache.sling.commons.threads.impl.ThreadPoolExecutorCleaningThreadLocals.beforeExecute(ThreadPoolExecutorCleaningThreadLocals.java:58)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1139)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:748)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Assume that two threads, &lt;em&gt;T1&lt;/em&gt; and &lt;em&gt;T2&lt;/em&gt; enter the constructor at more or less the same time. The following events can then occur, leading to the above invalid access&lt;/p&gt;


&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;T1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;T2&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;check threadLocalsField (is null)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;invoke initReflectionFields, load threadLocalsField&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; check threadLocalsField (is not null) &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; invoke saveOldTreadLocals &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; invoke copy &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;At this point, the &lt;tt&gt;tableField&lt;/tt&gt; field is null since &lt;tt&gt;initReflectionFields&lt;/tt&gt; has not yet completed, which leads to the above NPE.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;edit&lt;/em&gt;: formatting&lt;/p&gt;</description>
                <environment></environment>
        <key id="13133854">SLING-7447</key>
            <summary>Race condition in ThreadLocalCleaner initialization code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jan 2018 21:51:22 +0000</created>
                <updated>Mon, 29 Jan 2018 09:04:30 +0000</updated>
                            <resolved>Thu, 25 Jan 2018 22:25:49 +0000</resolved>
                                                    <fixVersion>Commons Threads 3.2.16</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16340203" author="rombert" created="Thu, 25 Jan 2018 22:25:49 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/c472954b67524042618b59bb0e45f180bcea146f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/c472954b67524042618b59bb0e45f180bcea146f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16342113" author="kwin" created="Sat, 27 Jan 2018 12:22:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Thanks for finding and fixing this issue. &lt;br/&gt;
I am not sure about throwing exception from static initializers. We are not yet sure how well this is working for other JREs than OpenJDK/Oracle therefore it is unclear how often one might experience such an exception. Unfortunately you only get the real exception logged the first time you try to access this class but only a very generic NoClassDefFoundException afterwards (&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8051847&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8051847&lt;/a&gt;).&lt;br/&gt;
The other alternative is to catch it in the static initializer and store it in a field. In the constructor you can then check if that exception field is set and throw it then. That way you prevent those hard to debug {{NoClassDefFoundException}}s. WDYT?&lt;/p&gt;</comment>
                            <comment id="16343105" author="rombert" created="Mon, 29 Jan 2018 09:04:30 +0000"  >&lt;p&gt;Sure, we can do that as a follow-up fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13126255">SLING-7320</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pdw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7445] Install bundle: &quot;Failed getting intermediate path at http://localhost:4502/apps/project. Reason: Forbidden&quot; when directory listings are turned off</title>
                <link>https://issues.apache.org/jira/browse/SLING-7445</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The maven-sling-plugin tries to deploy a bundle to a Sling system. In case it deploys to a path that doesn&apos;t exist yet, it tries to create the intermediary paths.&lt;/p&gt;

&lt;p&gt;In case of WebDAV deployment, it tries to figure out which paths exist and which paths don&apos;t exist, to determine what work it needs to do to ensure all intermediary paths.&lt;/p&gt;

&lt;p&gt;When determining which path is the first one to not exist, it relies on the status code 404 to indicate this.&lt;/p&gt;

&lt;p&gt;However, when the &quot;index&quot;-property of&#160;org.apache.sling.servlets.get.DefaultGetServlet is set to false (default setting on Adobe AEM), the server will send a 403 Forbidden instead of a 404 Not Found. This causes the install-command to fail with the exception mentioned in the title.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;It would be nice if there is a fallback in case the index-property of DefaultGetServlet is turned off.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:4502/apps/project/install/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/apps/project/install/&lt;/a&gt;&#160;gives 404 (correct, so it should try the parent)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:4502/apps/project/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/apps/project/&lt;/a&gt;&#160;gives 403 (problem, it expected 200, because it exists)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13133637">SLING-7445</key>
            <summary>Install bundle: &quot;Failed getting intermediate path at http://localhost:4502/apps/project. Reason: Forbidden&quot; when directory listings are turned off</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="Henry Kuijpers">Henry Kuijpers</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jan 2018 10:02:23 +0000</created>
                <updated>Mon, 14 Jan 2019 17:06:40 +0000</updated>
                            <resolved>Tue, 8 Jan 2019 10:29:54 +0000</resolved>
                                    <version>Maven Sling Plugin 2.1.8</version>
                    <version>Maven Sling Plugin 2.3.4</version>
                                    <fixVersion>Sling Maven Plugin 2.4.0</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16339473" author="kwin" created="Thu, 25 Jan 2018 16:41:17 +0000"  >&lt;p&gt;I think requesting via a HEAD towards the node is the only available way to figure out from the outside whether a node exists already. The only thing we could do here is treat 200 and 403 in the same way (&lt;a href=&quot;https://github.com/apache/sling-maven-sling-plugin/blob/249bc5359d636f9412989691d4528fdc72e65381/src/main/java/org/apache/sling/maven/bundlesupport/deploy/method/WebDavPutDeployMethod.java#L133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-maven-sling-plugin/blob/249bc5359d636f9412989691d4528fdc72e65381/src/main/java/org/apache/sling/maven/bundlesupport/deploy/method/WebDavPutDeployMethod.java#L133&lt;/a&gt;), i.e. we assume that the node exists already.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="16339497" author="githubbot" created="Thu, 25 Jan 2018 16:51:59 +0000"  >&lt;p&gt;kwin opened a new pull request #1: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7445&quot; title=&quot;Install bundle: &amp;quot;Failed getting intermediate path at http://localhost:4502/apps/project. Reason: Forbidden&amp;quot; when directory listings are turned off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7445&quot;&gt;&lt;del&gt;SLING-7445&lt;/del&gt;&lt;/a&gt; also accept 403 status code for existing intermediate nodes&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/sling-maven-sling-plugin/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-maven-sling-plugin/pull/1&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16339498" author="kwin" created="Thu, 25 Jan 2018 16:52:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt; Could you test the PR at &lt;a href=&quot;https://github.com/apache/sling-maven-sling-plugin/pull/1?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-maven-sling-plugin/pull/1?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16736976" author="kwin" created="Tue, 8 Jan 2019 10:29:44 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/sling-maven-sling-plugin/commit/4b458edf752299c9bfd47de8342a0bffb2192cc1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-maven-sling-plugin/commit/4b458edf752299c9bfd47de8342a0bffb2192cc1&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;But the better fix is to rely on the separate webdav URI (&lt;a href=&quot;https://sling.apache.org/documentation/development/repository-based-development.html#separate-uri-space-webdav&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/repository-based-development.html#separate-uri-space-webdav&lt;/a&gt;). That should not leverage the default get servlet for that purpose.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pcjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7443] Actual build for standalone jar is not working with latest JDK</title>
                <link>https://issues.apache.org/jira/browse/SLING-7443</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I tried to use your standalone jar with latest JDK, I mean JDK 9, or JDK 1.8.0_162b12, but it does not work ... The following log is encountered with JDK 1.8.162 when launching java -jar org.apache.sling.launchpad-9.jar:&lt;/p&gt;

&lt;p&gt;24.01.2018 15:45:34.872 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;FelixStartLevel&amp;#93;&lt;/span&gt; ERROR: Bundle &apos;18&apos; Error starting slinginstall:C:\projets\Veolia\tools\sling\startup\1\slf4j-api-1.7.21.jar (org.osgi.framework.BundleException: Unable to resolve slf4j.api &lt;span class=&quot;error&quot;&gt;&amp;#91;18&amp;#93;&lt;/span&gt;(R 18.0): missing requirement [slf4j.api &lt;span class=&quot;error&quot;&gt;&amp;#91;18&amp;#93;&lt;/span&gt;(R 18.0)] ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So I will try now with JDK 1.8.0.161 (a colleague tells me it was quite OK with JDK 1.8.0.77&#224;&lt;/p&gt;</description>
                <environment>Windows 10, JDK 9 or latest 1.8</environment>
        <key id="13133394">SLING-7443</key>
            <summary>Actual build for standalone jar is not working with latest JDK</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="frougeot">frederic rougeot</reporter>
                        <labels>
                            <label>starter</label>
                    </labels>
                <created>Wed, 24 Jan 2018 14:47:44 +0000</created>
                <updated>Tue, 30 Jan 2018 10:51:56 +0000</updated>
                                                                            <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16338180" author="rombert" created="Wed, 24 Jan 2018 20:36:34 +0000"  >&lt;p&gt;What exact version did you try, released 9 or 10-SNAPSHOT built from git? Version 10-SNAPSHOT will work with Java 9 if you add {--add-modules java.se.ee}}, while version 9 will only work with Java 8.&lt;/p&gt;</comment>
                            <comment id="16339017" author="frougeot" created="Thu, 25 Jan 2018 10:03:11 +0000"  >&lt;p&gt;I used the 9 release.&lt;/p&gt;

&lt;p&gt;I tried with with JDK 1.8.0.161 also it also fails.&lt;/p&gt;

&lt;p&gt;but building the 10-SNAPSHOT from source code works well (I tried).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It seems that the problem is that the 9 release has been built with a non supported anymore JDK&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16344810" author="rombert" created="Tue, 30 Jan 2018 10:13:10 +0000"  >&lt;p&gt;I am running the 9 release with Java 8 without any issues. I think you&apos;re actually using Java 9, based on the errors, instead of Java 8. &lt;/p&gt;</comment>
                            <comment id="16344855" author="frougeot" created="Tue, 30 Jan 2018 10:46:17 +0000"  >&lt;p&gt;Absolutely not ... I checked first with version 9 first, then with version 8 b162, then b161 -&amp;gt; the pre-compiled version does not work, if I compile from source yes it works.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The precompiled version works with version 8 but release 77 (I did not check all the release, only this one).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16344864" author="rombert" created="Tue, 30 Jan 2018 10:50:50 +0000"  >&lt;p&gt;Hm, interesting. Here are the steps that I took, in an empty directory:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ wget -q http://repo1.maven.org/maven2/org/apache/sling/org.apache.sling.launchpad/9/org.apache.sling.launchpad-9.jar
$ java -version
java version &quot;1.8.0_152&quot;
Java(TM) SE Runtime Environment (build 1.8.0_152-b16)
Java HotSpot(TM) 64-Bit Server VM (build 25.152-b16, mixed mode)
$ java -jar org.apache.sling.launchpad-9.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you access &lt;a href=&quot;http://localhost:8080/system/console/status-Bundles&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/status-Bundles&lt;/a&gt;, press &apos;Download Full Zip&apos; and attach it here?&lt;/p&gt;</comment>
                            <comment id="16344867" author="rombert" created="Tue, 30 Jan 2018 10:51:56 +0000"  >&lt;p&gt;Or rather &apos;Download Zip&apos;, the full zip looks broken on Sling 9.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pb1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7436] Wrong content/type in the Default JSON Renderer </title>
                <link>https://issues.apache.org/jira/browse/SLING-7436</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Steps to reproduce:&lt;br/&gt;
 1.Render a page (Renderer enabled) with JSON renderer. E.g:&lt;br/&gt;
 &lt;a href=&quot;http://localhost.com/dir/page(selector&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost.com/dir/page(selector&lt;/a&gt; value).json&lt;/p&gt;

&lt;p&gt;2. Now, extend the url with a slash / and a name with any other extensions e.g &lt;br/&gt;
 &lt;a href=&quot;http://localhost.com/dir/page.(value).json/file.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost.com/dir/page.(value).json/file.html&lt;/a&gt;.]&lt;/p&gt;

&lt;p&gt;3. Observe file.html was automatically downloaded&lt;/p&gt;

&lt;p&gt;Credit: this issue was found by Md. Sabuktagin&lt;/p&gt;</description>
                <environment></environment>
        <key id="13133289">SLING-7436</key>
            <summary>Wrong content/type in the Default JSON Renderer </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jan 2018 06:51:04 +0000</created>
                <updated>Fri, 9 Nov 2018 08:44:37 +0000</updated>
                            <resolved>Fri, 9 Nov 2018 08:44:37 +0000</resolved>
                                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16680989" author="cziegeler" created="Fri, 9 Nov 2018 07:32:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; I&apos;m trying to figure out what the problem is we have to fix here?&lt;br/&gt;
When I try the above example, indeed the json gets downloaded at 2 and the content type is set to application/json;charset=utf-8.&lt;br/&gt;
So what needs to change here?&lt;/p&gt;</comment>
                            <comment id="16681033" author="asanso" created="Fri, 9 Nov 2018 08:13:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; AFAIR the problem is not the content content type but the fact the file is automatically download.&lt;/p&gt;

&lt;p&gt;In 2. is there a contention disposition being set ?&lt;/p&gt;</comment>
                            <comment id="16681041" author="cziegeler" created="Fri, 9 Nov 2018 08:16:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; These are the headers send back&lt;br/&gt;
&amp;lt; HTTP/1.1 200 OK&lt;br/&gt;
&amp;lt; Date: Fri, 09 Nov 2018 08:15:59 GMT&lt;br/&gt;
&amp;lt; X-Content-Type-Options: nosniff&lt;br/&gt;
&amp;lt; X-Frame-Options: SAMEORIGIN&lt;br/&gt;
&amp;lt; Content-Type: application/json;charset=utf-8&lt;br/&gt;
&amp;lt; Content-Length: 190&lt;/p&gt;

&lt;p&gt;In my case, the file is not downloaded but displayed in the browser&lt;/p&gt;</comment>
                            <comment id="16681076" author="cziegeler" created="Fri, 9 Nov 2018 08:44:37 +0000"  >&lt;p&gt;I can&apos;t reproduce this, in addition the description mentions a selector &lt;b&gt;and&lt;/b&gt; the default get servlet, however the default get servlet does not support selectors (except for a few like tidy and the recursion level as a number)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3paev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7435] Authorizable pipe autocreate group does not handle dryRun</title>
                <link>https://issues.apache.org/jira/browse/SLING-7435</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;autocreateGroup does not handle dry Run&lt;/p&gt;</description>
                <environment></environment>
        <key id="13133113">SLING-7435</key>
            <summary>Authorizable pipe autocreate group does not handle dryRun</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="npeltier">Nicolas Peltier</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Jan 2018 16:46:58 +0000</created>
                <updated>Tue, 24 Apr 2018 13:31:12 +0000</updated>
                            <resolved>Wed, 24 Jan 2018 14:31:10 +0000</resolved>
                                    <version>Pipes 2.0.2</version>
                                    <fixVersion>Pipes 2.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13133112">SLING-7434</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p9bz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7434] Authorizable pipe autocreate group does not handle dryRun</title>
                <link>https://issues.apache.org/jira/browse/SLING-7434</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;autocreateGroup does not handle dry Run&lt;/p&gt;</description>
                <environment></environment>
        <key id="13133112">SLING-7434</key>
            <summary>Authorizable pipe autocreate group does not handle dryRun</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Jan 2018 16:46:55 +0000</created>
                <updated>Tue, 24 Apr 2018 13:31:34 +0000</updated>
                            <resolved>Sat, 27 Jan 2018 21:14:45 +0000</resolved>
                                    <version>Pipes 2.0.2</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13133113">SLING-7435</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p9br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7432] Thread pool clean up code can lead to infinite loops in ThreadLocal.get</title>
                <link>https://issues.apache.org/jira/browse/SLING-7432</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The thread local clean up code added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6261&quot; title=&quot;ThreadExpiringThreadPool is relying on uncaught exceptions to kill threads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6261&quot;&gt;&lt;del&gt;SLING-6261&lt;/del&gt;&lt;/a&gt; leads to Threads stuck in &lt;tt&gt;ThreadLocal.get&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I am working on a simplified test case, but the stack trace is similar to&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;pool-1-thread-1&quot; prio=10 tid=0x00007f47f4374800 nid=0xb19 runnable [0x00007f47e734e000]
   java.lang.Thread.State: RUNNABLE
	at java.lang.ThreadLocal$ThreadLocalMap.set(ThreadLocal.java:429)
	at java.lang.ThreadLocal$ThreadLocalMap.access$100(ThreadLocal.java:261)
	at java.lang.ThreadLocal.set(ThreadLocal.java:183)
	at org.apache.sling.commons.threads.impl.ThreadPoolExecutorCleaningThreadLocalsTest$RunnableImplementation.run(ThreadPoolExecutorCleaningThreadLocalsTest.java:100)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13133059">SLING-7432</key>
            <summary>Thread pool clean up code can lead to infinite loops in ThreadLocal.get</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Jan 2018 13:54:00 +0000</created>
                <updated>Thu, 1 Feb 2018 09:55:25 +0000</updated>
                            <resolved>Thu, 25 Jan 2018 13:36:34 +0000</resolved>
                                    <version>Commons Threads 3.2.10</version>
                                    <fixVersion>Commons Threads 3.2.16</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16335793" author="rombert" created="Tue, 23 Jan 2018 13:58:27 +0000"  >&lt;p&gt;Added ignored test in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/21a553d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-commons-threads commit 21a553d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16335840" author="rombert" created="Tue, 23 Jan 2018 14:34:42 +0000"  >&lt;p&gt;Applied a potential fix in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/afa59d6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-commons-threads commit afa59d6&lt;/a&gt;. This at least makes the failing test for me.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - I am going to run some more extensive tests, but it would be good if you could also review the change. I&apos;ve checked and the &lt;tt&gt;ThreadLocalMap&lt;/tt&gt; has the same three fields in Java 7, 8 and 9, so we should be covered at least from that point of view.&lt;/p&gt;</comment>
                            <comment id="16335860" author="kwin" created="Tue, 23 Jan 2018 14:46:59 +0000"  >&lt;p&gt;Looks good to me. I am wondering whether &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7320&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-7320&lt;/a&gt; is related but up to now I couldn&apos;t reproduce the NPE.&lt;/p&gt;</comment>
                            <comment id="16335864" author="rombert" created="Tue, 23 Jan 2018 14:48:26 +0000"  >&lt;p&gt;Well, I apparently fixed one problem, but I am still able to reproduce the hang outside the unit test :| So I need to dig a bit more&lt;/p&gt;</comment>
                            <comment id="16336371" author="rombert" created="Tue, 23 Jan 2018 21:05:56 +0000"  >&lt;p&gt;While going deeper and deeper in the code we currently have, I wonder whether it&apos;s all necessary. We have a thread pool where we manage all threads, they never &quot;escape&quot; from our control. So we don&apos;t need to provide anyone with guarantees regarding restoring thread local values after threads have finished execution.&lt;/p&gt;

&lt;p&gt;I think we can simply set the ThreadLocalMap fields to null and be done with it ( and testing this assumption now ).&lt;/p&gt;</comment>
                            <comment id="16336388" author="kwin" created="Tue, 23 Jan 2018 21:20:08 +0000"  >&lt;p&gt;New threads by default carry some thread locals (which are set by Oracle). Removing those once a thread from the pool is gonna be reused might have negative side-effects.&lt;/p&gt;</comment>
                            <comment id="16336397" author="rombert" created="Tue, 23 Jan 2018 21:27:11 +0000"  >&lt;p&gt;Interesting, I did not know about that. I looked briefly at the code and all that I found was the passing of &apos;inheritable&apos; thread locals&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (inheritThreadLocals &amp;amp;&amp;amp; parent.inheritableThreadLocals != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.inheritableThreadLocals =
                ThreadLocal.createInheritedMap(parent.inheritableThreadLocals);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Do you have any other references for the default thread locals? I&apos;d like to make sure I don&apos;t mess anything up related to that.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Edit&lt;/em&gt;: formatting&lt;/p&gt;</comment>
                            <comment id="16337329" author="kwin" created="Wed, 24 Jan 2018 10:28:06 +0000"  >&lt;p&gt;I unfortunately don&apos;t have any reference but right after creating the thread (i.e. in the &lt;tt&gt;beforeExecute&lt;/tt&gt; method) it already has 7 thread locals attached (i.e. size is 7). Some of them are integers. Don&apos;t know for what they are used internally.&lt;/p&gt;</comment>
                            <comment id="16337818" author="kwin" created="Wed, 24 Jan 2018 16:07:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Please check out the branch from &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/compare/bugfix/SLING-7432?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-commons-threads/compare/bugfix/SLING-7432?expand=1&lt;/a&gt;. There I added some logging (therefore please do not merge as is) and also I cleaned up the logic a bit where the old thread local state is being stored. This is now no longer internally relying on thread locals. Please check if that fixes the issue on your side already. If not the logging should give further hints on why you run into an infinite loop (hopefully).&lt;/p&gt;</comment>
                            <comment id="16338125" author="rombert" created="Wed, 24 Jan 2018 19:44:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - I am working on removing all thread locals as well, I assume this might trip to the save/restore logic. I&apos;m running the tests as we speak and I&apos;ll compare with your changes as well.&lt;/p&gt;</comment>
                            <comment id="16339221" author="rombert" created="Thu, 25 Jan 2018 13:36:34 +0000"  >&lt;p&gt;I think we finally got this right, so pushing my changes&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/69c0e9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-commons-threads commit 69c0e9f&lt;/a&gt; - stop using any sort of &lt;tt&gt;ThreadLocal&lt;/tt&gt; field&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-commons-threads/commit/e046d2f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-org-apache-sling-commons-threads commit e046d2f&lt;/a&gt; - throw any errors or runtime exceptions from the &lt;tt&gt;beforeExecute&lt;/tt&gt; method to make sure the fallback thread pool implementation is used&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; for your help.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13123940">SLING-7300</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13019472">SLING-6261</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p8zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-7430] Invalid assumptions in SlingSpecificsSightlyIT#testI18nBasename</title>
                <link>https://issues.apache.org/jira/browse/SLING-7430</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The test at &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/blob/905ffd59bebd8d9adaa5d172d169e6eac1469a03/src/test/java/org/apache/sling/scripting/sightly/it/SlingSpecificsSightlyIT.java#L342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing/blob/905ffd59bebd8d9adaa5d172d169e6eac1469a03/src/test/java/org/apache/sling/scripting/sightly/it/SlingSpecificsSightlyIT.java#L342&lt;/a&gt; incorrectly assumes that the key being returned when no basename is set is always the key from the dictionary not having the property &lt;tt&gt;sling:basename&lt;/tt&gt; is set. This is wrong according to both documentation &lt;a href=&quot;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html#resourcebundle-with-base-names&lt;/a&gt; and implementation in i18n.&lt;/p&gt;

&lt;p&gt;Although the implementation might change in the future (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7429&quot; title=&quot;Improve basename handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7429&quot;&gt;SLING-7429&lt;/a&gt;) right now the IT needs to be fixed to also accept value &quot;die Bank&quot; being returned (&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/blob/91e9397133eea906372aae2ea1f4a1e2e46f4c70/src/main/resources/SLING-INF/apps/sightly/locales/de_finance_basename.json#L13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-scripting-sightly-testing-content/blob/91e9397133eea906372aae2ea1f4a1e2e46f4c70/src/main/resources/SLING-INF/apps/sightly/locales/de_finance_basename.json#L13&lt;/a&gt;) even when no explicit basename is set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13133036">SLING-7430</key>
            <summary>Invalid assumptions in SlingSpecificsSightlyIT#testI18nBasename</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Jan 2018 12:51:10 +0000</created>
                <updated>Tue, 9 Oct 2018 19:50:53 +0000</updated>
                                                                            <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16335748" author="radu.cotescu" created="Tue, 23 Jan 2018 13:01:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, I&apos;m afraid you didn&apos;t check the test properly. The value &quot;die Bank&quot; is expected to be returned whenever an explicit &lt;tt&gt;basename&lt;/tt&gt; value is passed to the &lt;tt&gt;org.apache.sling.i18n.ResourceBundleProvider#getResourceBundle(java.lang.String, java.util.Locale)&lt;/tt&gt; method, since there&apos;s a dictionary matching both the base name and the locale.&lt;/p&gt;

&lt;p&gt;It should probably be the other way around: the value of &quot;das Ufer&quot; might have to be accepted even when not specifying a &lt;tt&gt;basename&lt;/tt&gt; value. The question is how should this be handled? What&apos;s the expected value in the current setup?&lt;/p&gt;</comment>
                            <comment id="16335751" author="kwin" created="Tue, 23 Jan 2018 13:04:46 +0000"  >&lt;p&gt;Actually both values &quot;die Bank&quot; as well as &quot;das Ufer&quot; are valid for key &lt;tt&gt;the bank&lt;/tt&gt; in case no basename is given. That is what I though I had written above &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13133033">SLING-7429</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3p8uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>